Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from fraxinus.osuosl.org (smtp4.osuosl.org [140.211.166.137])
	by mail.lfdr.de (Postfix) with ESMTPS id 348A5155E11
	for <lists.virtualization@lfdr.de>; Fri,  7 Feb 2020 19:26:37 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by fraxinus.osuosl.org (Postfix) with ESMTP id E5E71869AB;
	Fri,  7 Feb 2020 18:26:35 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from fraxinus.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YfavnAQof8oh; Fri,  7 Feb 2020 18:26:31 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by fraxinus.osuosl.org (Postfix) with ESMTP id A16B08698B;
	Fri,  7 Feb 2020 18:26:07 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 6E5DAC1D81;
	Fri,  7 Feb 2020 18:26:07 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id D8DD7C1D81
 for <virtualization@lists.linux-foundation.org>;
 Fri,  7 Feb 2020 18:26:01 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by whitealder.osuosl.org (Postfix) with ESMTP id C78C386DF4
 for <virtualization@lists.linux-foundation.org>;
 Fri,  7 Feb 2020 18:26:01 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id EjzQipRxKM5e
 for <virtualization@lists.linux-foundation.org>;
 Fri,  7 Feb 2020 18:25:57 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mx01.bbu.dsd.mx.bitdefender.com
 (mx01.bbu.dsd.mx.bitdefender.com [91.199.104.161])
 by whitealder.osuosl.org (Postfix) with ESMTPS id DDDD986E33
 for <virtualization@lists.linux-foundation.org>;
 Fri,  7 Feb 2020 18:25:55 +0000 (UTC)
Received: from smtp.bitdefender.com (smtp01.buh.bitdefender.com [10.17.80.75])
 by mx01.bbu.dsd.mx.bitdefender.com (Postfix) with ESMTPS id
 80651305D35D; Fri,  7 Feb 2020 20:16:41 +0200 (EET)
Received: from host.bbu.bitdefender.biz (unknown [195.210.4.22])
 by smtp.bitdefender.com (Postfix) with ESMTPSA id 7363C3052073;
 Fri,  7 Feb 2020 20:16:41 +0200 (EET)
From: =?UTF-8?q?Adalbert=20Laz=C4=83r?= <alazar@bitdefender.com>
To: kvm@vger.kernel.org
Subject: [RFC PATCH v7 63/78] KVM: introspection: add KVMI_VM_GET_MAX_GFN
Date: Fri,  7 Feb 2020 20:16:21 +0200
Message-Id: <20200207181636.1065-64-alazar@bitdefender.com>
In-Reply-To: <20200207181636.1065-1-alazar@bitdefender.com>
References: <20200207181636.1065-1-alazar@bitdefender.com>
MIME-Version: 1.0
Cc: =?UTF-8?q?Nicu=C8=99or=20C=C3=AE=C8=9Bu?= <ncitu@bitdefender.com>,
 =?UTF-8?q?=C8=98tefan=20=C8=98icleru?= <ssicleru@bitdefender.com>,
 Sean Christopherson <sean.j.christopherson@intel.com>,
 virtualization@lists.linux-foundation.org,
 =?UTF-8?q?Adalbert=20Laz=C4=83r?= <alazar@bitdefender.com>,
 Paolo Bonzini <pbonzini@redhat.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

RnJvbTogyJh0ZWZhbiDImGljbGVydSA8c3NpY2xlcnVAYml0ZGVmZW5kZXIuY29tPgoKVGhlIGlu
dHJvc3BlY3Rpb24gdG9vbCBjYW4gdXNlIHRoaXMgdG8gc2V0IGFjY2VzcyByZXN0cmljdGlvbnMg
Zm9yIGEKd2lkZSByYW5nZSBvZiBndWVzdCBhZGRyZXNzZXMuCgpTaWduZWQtb2ZmLWJ5OiDImHRl
ZmFuIMiYaWNsZXJ1IDxzc2ljbGVydUBiaXRkZWZlbmRlci5jb20+CkNvLWRldmVsb3BlZC1ieTog
TmljdciZb3IgQ8OuyJt1IDxuY2l0dUBiaXRkZWZlbmRlci5jb20+ClNpZ25lZC1vZmYtYnk6IE5p
Y3XImW9yIEPDrsibdSA8bmNpdHVAYml0ZGVmZW5kZXIuY29tPgpTaWduZWQtb2ZmLWJ5OiBBZGFs
YmVydCBMYXrEg3IgPGFsYXphckBiaXRkZWZlbmRlci5jb20+Ci0tLQogRG9jdW1lbnRhdGlvbi92
aXJ0L2t2bS9rdm1pLnJzdCAgICAgICAgICAgICAgIHwgMjAgKysrKysrKysrKysrKysrKysrKwog
aW5jbHVkZS91YXBpL2xpbnV4L2t2bWkuaCAgICAgICAgICAgICAgICAgICAgIHwgIDYgKysrKysr
CiAuLi4vdGVzdGluZy9zZWxmdGVzdHMva3ZtL3g4Nl82NC9rdm1pX3Rlc3QuYyAgfCAxMiArKysr
KysrKysrKwogdmlydC9rdm0vaW50cm9zcGVjdGlvbi9rdm1pX2ludC5oICAgICAgICAgICAgIHwg
IDEgKwogdmlydC9rdm0vaW50cm9zcGVjdGlvbi9rdm1pX21zZy5jICAgICAgICAgICAgIHwgMTQg
KysrKysrKysrKysrKwogNSBmaWxlcyBjaGFuZ2VkLCA1MyBpbnNlcnRpb25zKCspCgpkaWZmIC0t
Z2l0IGEvRG9jdW1lbnRhdGlvbi92aXJ0L2t2bS9rdm1pLnJzdCBiL0RvY3VtZW50YXRpb24vdmly
dC9rdm0va3ZtaS5yc3QKaW5kZXggOWE5MDJhOTRlZDI4Li5jMWJhZGNkZTE2NjIgMTAwNjQ0Ci0t
LSBhL0RvY3VtZW50YXRpb24vdmlydC9rdm0va3ZtaS5yc3QKKysrIGIvRG9jdW1lbnRhdGlvbi92
aXJ0L2t2bS9rdm1pLnJzdApAQCAtNzM1LDYgKzczNSwyNiBAQCBvcmRlciB0byBiZSBub3RpZmll
ZCBhYm91dCB0aGUgZWZmZWN0aXZlIGluamVjdGVkIGV4cGVjdGlvbi4KICogLUtWTV9FQlVTWSAt
IGFub3RoZXIgKktWTUlfVkNQVV9JTkpFQ1RfRVhDRVBUSU9OKiBjb21tYW5kIHdhcyBpc3N1ZWQg
YW5kIG5vCiAgIGNvcnJlc3BvbmRpbmcgKktWTUlfRVZFTlRfVFJBUCogKGlmIGVuYWJsZWQpIGhh
cyBiZWVuIHByb3ZpZGVkIHlldC4KIAorMTYuIEtWTUlfVk1fR0VUX01BWF9HRk4KKy0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tCisKKzpBcmNoaXRlY3R1cmU6IGFsbAorOlZlcnNpb25zOiA+PSAxCis6
UGFyYW1ldGVyczogbm9uZQorOlJldHVybnM6CisKKzo6CisKKyAgICAgICAgc3RydWN0IGt2bWlf
ZXJyb3JfY29kZTsKKyAgICAgICAgc3RydWN0IGt2bWlfdm1fZ2V0X21heF9nZm5fcmVwbHkgewor
ICAgICAgICAgICAgICAgIF9fdTY0IGdmbjsKKyAgICAgICAgfTsKKworUHJvdmlkZXMgdGhlIG1h
eGltdW0gR0ZOIGFsbG9jYXRlZCB0byB0aGUgVk0gYnkgd2Fsa2luZyB0aHJvdWdoIGFsbAorbWVt
b3J5IHNsb3RzIGFsbG9jYXRlZCBieSBLVk0sIGNvbnNpZGVyaW5nIGFsbCBhZGRyZXNzIHNwYWNl
cyBpbmRpY2F0ZWQKK2J5IEtWTV9BRERSRVNTX1NQQUNFX05VTS4gU3RyaWNseSBzcGVha2luZywg
dGhlIHJldHVybmVkIHZhbHVlIHJlZmVycwordG8gdGhlIGZpcnN0IGluYWNjZXNzaWJsZSBHRk4s
IG5leHQgdG8gdGhlIG1heGltdW0gYWNjZXNzaWJsZSBHRk4uCisKIEV2ZW50cwogPT09PT09CiAK
ZGlmZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9saW51eC9rdm1pLmggYi9pbmNsdWRlL3VhcGkvbGlu
dXgva3ZtaS5oCmluZGV4IGZjYmIxOTAyMGM3MC4uNzBkNWE2N2JhZGVmIDEwMDY0NAotLS0gYS9p
bmNsdWRlL3VhcGkvbGludXgva3ZtaS5oCisrKyBiL2luY2x1ZGUvdWFwaS9saW51eC9rdm1pLmgK
QEAgLTM1LDYgKzM1LDggQEAgZW51bSB7CiAJS1ZNSV9WQ1BVX0NPTlRST0xfQ1IgICAgICAgPSAx
NSwKIAlLVk1JX1ZDUFVfSU5KRUNUX0VYQ0VQVElPTiA9IDE2LAogCisJS1ZNSV9WTV9HRVRfTUFY
X0dGTiA9IDE3LAorCiAJS1ZNSV9OVU1fTUVTU0FHRVMKIH07CiAKQEAgLTEzMCw2ICsxMzIsMTAg
QEAgc3RydWN0IGt2bWlfdmNwdV9jb250cm9sX2V2ZW50cyB7CiAJX191MzIgcGFkZGluZzI7CiB9
OwogCitzdHJ1Y3Qga3ZtaV92bV9nZXRfbWF4X2dmbl9yZXBseSB7CisJX191NjQgZ2ZuOworfTsK
Kwogc3RydWN0IGt2bWlfZXZlbnQgewogCV9fdTE2IHNpemU7CiAJX191MTYgdmNwdTsKZGlmZiAt
LWdpdCBhL3Rvb2xzL3Rlc3Rpbmcvc2VsZnRlc3RzL2t2bS94ODZfNjQva3ZtaV90ZXN0LmMgYi90
b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9rdm0veDg2XzY0L2t2bWlfdGVzdC5jCmluZGV4IDZjOWQx
ZjNmOTI3Yy4uMjg1MmU2ODk0ZTgxIDEwMDY0NAotLS0gYS90b29scy90ZXN0aW5nL3NlbGZ0ZXN0
cy9rdm0veDg2XzY0L2t2bWlfdGVzdC5jCisrKyBiL3Rvb2xzL3Rlc3Rpbmcvc2VsZnRlc3RzL2t2
bS94ODZfNjQva3ZtaV90ZXN0LmMKQEAgLTEyMjksNiArMTIyOSwxNyBAQCBzdGF0aWMgdm9pZCB0
ZXN0X2NtZF92Y3B1X2luamVjdF9leGNlcHRpb24oc3RydWN0IGt2bV92bSAqdm0pCiAJZGlzYWJs
ZV92Y3B1X2V2ZW50KHZtLCBLVk1JX0VWRU5UX0JSRUFLUE9JTlQpOwogfQogCitzdGF0aWMgdm9p
ZCB0ZXN0X2NtZF92bV9nZXRfbWF4X2dmbih2b2lkKQoreworCXN0cnVjdCBrdm1pX3ZtX2dldF9t
YXhfZ2ZuX3JlcGx5IHJwbDsKKwlzdHJ1Y3Qga3ZtaV9tc2dfaGRyIHJlcTsKKworCXRlc3Rfdm1f
Y29tbWFuZChLVk1JX1ZNX0dFVF9NQVhfR0ZOLCAmcmVxLCBzaXplb2YocmVxKSwKKwkJCSZycGws
IHNpemVvZihycGwpKTsKKworCURFQlVHKCJtYXhfZ2ZuOiAweCVsbHhcbiIsIHJwbC5nZm4pOwor
fQorCiBzdGF0aWMgdm9pZCB0ZXN0X2ludHJvc3BlY3Rpb24oc3RydWN0IGt2bV92bSAqdm0pCiB7
CiAJc2V0dXBfc29ja2V0KCk7CkBAIC0xMjUyLDYgKzEyNjMsNyBAQCBzdGF0aWMgdm9pZCB0ZXN0
X2ludHJvc3BlY3Rpb24oc3RydWN0IGt2bV92bSAqdm0pCiAJdGVzdF9ldmVudF9icmVha3BvaW50
KHZtKTsKIAl0ZXN0X2NtZF92Y3B1X2NvbnRyb2xfY3Iodm0pOwogCXRlc3RfY21kX3ZjcHVfaW5q
ZWN0X2V4Y2VwdGlvbih2bSk7CisJdGVzdF9jbWRfdm1fZ2V0X21heF9nZm4oKTsKIAogCXVuaG9v
a19pbnRyb3NwZWN0aW9uKHZtKTsKIH0KZGlmZiAtLWdpdCBhL3ZpcnQva3ZtL2ludHJvc3BlY3Rp
b24va3ZtaV9pbnQuaCBiL3ZpcnQva3ZtL2ludHJvc3BlY3Rpb24va3ZtaV9pbnQuaAppbmRleCA5
Nzg0NDc3ZGI0NmMuLjY1YTU4MDFmMTQzYyAxMDA2NDQKLS0tIGEvdmlydC9rdm0vaW50cm9zcGVj
dGlvbi9rdm1pX2ludC5oCisrKyBiL3ZpcnQva3ZtL2ludHJvc3BlY3Rpb24va3ZtaV9pbnQuaApA
QCAtMzcsNiArMzcsNyBAQAogCQkJfCBCSVQoS1ZNSV9WTV9DSEVDS19FVkVOVCkgXAogCQkJfCBC
SVQoS1ZNSV9WTV9DT05UUk9MX0VWRU5UUykgXAogCQkJfCBCSVQoS1ZNSV9WTV9HRVRfSU5GTykg
XAorCQkJfCBCSVQoS1ZNSV9WTV9HRVRfTUFYX0dGTikgXAogCQkJfCBCSVQoS1ZNSV9WTV9SRUFE
X1BIWVNJQ0FMKSBcCiAJCQl8IEJJVChLVk1JX1ZNX1dSSVRFX1BIWVNJQ0FMKSBcCiAJCQl8IEJJ
VChLVk1JX1ZDUFVfR0VUX0lORk8pIFwKZGlmZiAtLWdpdCBhL3ZpcnQva3ZtL2ludHJvc3BlY3Rp
b24va3ZtaV9tc2cuYyBiL3ZpcnQva3ZtL2ludHJvc3BlY3Rpb24va3ZtaV9tc2cuYwppbmRleCA4
ZDc3ZTZhNzc5NGQuLjk0ZmFiNzBiNTZmYSAxMDA2NDQKLS0tIGEvdmlydC9rdm0vaW50cm9zcGVj
dGlvbi9rdm1pX21zZy5jCisrKyBiL3ZpcnQva3ZtL2ludHJvc3BlY3Rpb24va3ZtaV9tc2cuYwpA
QCAtMjMsNiArMjMsNyBAQCBzdGF0aWMgY29uc3QgY2hhciAqY29uc3QgbXNnX0lEc1tdID0gewog
CVtLVk1JX1ZNX0NIRUNLX0VWRU5UXSAgICAgICAgPSAiS1ZNSV9WTV9DSEVDS19FVkVOVCIsCiAJ
W0tWTUlfVk1fQ09OVFJPTF9FVkVOVFNdICAgICA9ICJLVk1JX1ZNX0NPTlRST0xfRVZFTlRTIiwK
IAlbS1ZNSV9WTV9HRVRfSU5GT10gICAgICAgICAgID0gIktWTUlfVk1fR0VUX0lORk8iLAorCVtL
Vk1JX1ZNX0dFVF9NQVhfR0ZOXSAgICAgICAgPSAiS1ZNSV9WTV9HRVRfTUFYX0dGTiIsCiAJW0tW
TUlfVk1fUkVBRF9QSFlTSUNBTF0gICAgICA9ICJLVk1JX1ZNX1JFQURfUEhZU0lDQUwiLAogCVtL
Vk1JX1ZNX1dSSVRFX1BIWVNJQ0FMXSAgICAgPSAiS1ZNSV9WTV9XUklURV9QSFlTSUNBTCIsCiAJ
W0tWTUlfVkNQVV9DT05UUk9MX0NSXSAgICAgICA9ICJLVk1JX1ZDUFVfQ09OVFJPTF9DUiIsCkBA
IC0zMzYsNiArMzM3LDE4IEBAIHN0YXRpYyBpbnQgaGFuZGxlX3BhdXNlX3ZjcHUoc3RydWN0IGt2
bV9pbnRyb3NwZWN0aW9uICprdm1pLAogCXJldHVybiBrdm1pX21zZ192bV9yZXBseShrdm1pLCBt
c2csIGVyciwgTlVMTCwgMCk7CiB9CiAKK3N0YXRpYyBpbnQgaGFuZGxlX3ZtX2dldF9tYXhfZ2Zu
KHN0cnVjdCBrdm1faW50cm9zcGVjdGlvbiAqa3ZtaSwKKwkJCQkgY29uc3Qgc3RydWN0IGt2bWlf
bXNnX2hkciAqbXNnLAorCQkJCSBjb25zdCB2b2lkICpyZXEpCit7CisJc3RydWN0IGt2bWlfdm1f
Z2V0X21heF9nZm5fcmVwbHkgcnBsOworCisJbWVtc2V0KCZycGwsIDAsIHNpemVvZihycGwpKTsK
KwlycGwuZ2ZuID0ga3ZtX2dldF9tYXhfZ2ZuKGt2bWktPmt2bSk7CisKKwlyZXR1cm4ga3ZtaV9t
c2dfdm1fcmVwbHkoa3ZtaSwgbXNnLCAwLCAmcnBsLCBzaXplb2YocnBsKSk7Cit9CisKIC8qCiAg
KiBUaGVzZSBjb21tYW5kcyBhcmUgZXhlY3V0ZWQgYnkgdGhlIHJlY2VpdmluZyB0aHJlYWQvd29y
a2VyLgogICovCkBAIC0zNDYsNiArMzU5LDcgQEAgc3RhdGljIGludCgqY29uc3QgbXNnX3ZtW10p
KHN0cnVjdCBrdm1faW50cm9zcGVjdGlvbiAqLAogCVtLVk1JX1ZNX0NIRUNLX0VWRU5UXSAgICA9
IGhhbmRsZV9jaGVja19ldmVudCwKIAlbS1ZNSV9WTV9DT05UUk9MX0VWRU5UU10gPSBoYW5kbGVf
dm1fY29udHJvbF9ldmVudHMsCiAJW0tWTUlfVk1fR0VUX0lORk9dICAgICAgID0gaGFuZGxlX2dl
dF9pbmZvLAorCVtLVk1JX1ZNX0dFVF9NQVhfR0ZOXSAgICA9IGhhbmRsZV92bV9nZXRfbWF4X2dm
biwKIAlbS1ZNSV9WTV9SRUFEX1BIWVNJQ0FMXSAgPSBoYW5kbGVfcmVhZF9waHlzaWNhbCwKIAlb
S1ZNSV9WTV9XUklURV9QSFlTSUNBTF0gPSBoYW5kbGVfd3JpdGVfcGh5c2ljYWwsCiAJW0tWTUlf
VkNQVV9QQVVTRV0gICAgICAgID0gaGFuZGxlX3BhdXNlX3ZjcHUsCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlz
dApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3Rz
LmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
