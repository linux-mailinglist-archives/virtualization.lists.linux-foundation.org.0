Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp3.osuosl.org (smtp3.osuosl.org [140.211.166.136])
	by mail.lfdr.de (Postfix) with ESMTPS id 131C5707CA1
	for <lists.virtualization@lfdr.de>; Thu, 18 May 2023 11:18:37 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp3.osuosl.org (Postfix) with ESMTP id AB22660EF4;
	Thu, 18 May 2023 09:18:35 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org AB22660EF4
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
	by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dcMOshPF5uJM; Thu, 18 May 2023 09:18:34 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp3.osuosl.org (Postfix) with ESMTPS id 23F9960D95;
	Thu, 18 May 2023 09:18:34 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 23F9960D95
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 51078C007A;
	Thu, 18 May 2023 09:18:33 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp2.osuosl.org (smtp2.osuosl.org [IPv6:2605:bc80:3010::133])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 8701BC002A
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 09:18:32 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp2.osuosl.org (Postfix) with ESMTP id 6184C40530
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 09:18:32 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 6184C40530
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
 by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id CRQRuD-J_qcT
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 09:18:30 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 191E740363
Received: from out30-111.freemail.mail.aliyun.com
 (out30-111.freemail.mail.aliyun.com [115.124.30.111])
 by smtp2.osuosl.org (Postfix) with ESMTPS id 191E740363
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 09:18:29 +0000 (UTC)
X-Alimail-AntiSpam: AC=PASS; BC=-1|-1; BR=01201311R171e4; CH=green; DM=||false|;
 DS=||; FP=0|-1|-1|-1|0|-1|-1|-1; HT=ay29a033018046050;
 MF=xuanzhuo@linux.alibaba.com; NM=1; PH=DS; RN=4; SR=0;
 TI=SMTPD_---0ViwEemR_1684401502; 
Received: from localhost(mailfrom:xuanzhuo@linux.alibaba.com
 fp:SMTPD_---0ViwEemR_1684401502) by smtp.aliyun-inc.com;
 Thu, 18 May 2023 17:18:23 +0800
Message-ID: <1684401243.4437356-2-xuanzhuo@linux.alibaba.com>
Subject: Re: [PATCH vhost v9 05/12] virtio_ring: split: virtqueue_add_split()
 support premapped
Date: Thu, 18 May 2023 17:14:03 +0800
From: Xuan Zhuo <xuanzhuo@linux.alibaba.com>
To: Jason Wang <jasowang@redhat.com>
References: <20230517022249.20790-1-xuanzhuo@linux.alibaba.com>
 <20230517022249.20790-6-xuanzhuo@linux.alibaba.com>
 <CACGkMEu7+kDPiWmULXW_saW6pb5yF=gnqXRkSWcYbZCiJmszHQ@mail.gmail.com>
 <20230518030701-mutt-send-email-mst@kernel.org>
 <1684395232.2129312-1-xuanzhuo@linux.alibaba.com>
 <20230518041446-mutt-send-email-mst@kernel.org>
 <CACGkMEso-pDo_sDN_nCR95WSOh32wtUQAfWLy69tOyXr7EA9_g@mail.gmail.com>
In-Reply-To: <CACGkMEso-pDo_sDN_nCR95WSOh32wtUQAfWLy69tOyXr7EA9_g@mail.gmail.com>
Cc: Christoph Hellwig <hch@infradead.org>,
 "Michael S. Tsirkin" <mst@redhat.com>,
 virtualization@lists.linux-foundation.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gVGh1LCAxOCBNYXkgMjAyMyAxNjo1NzozNyArMDgwMCwgSmFzb24gV2FuZyA8amFzb3dhbmdA
cmVkaGF0LmNvbT4gd3JvdGU6Cj4gT24gVGh1LCBNYXkgMTgsIDIwMjMgYXQgNDoyOeKAr1BNIE1p
Y2hhZWwgUy4gVHNpcmtpbiA8bXN0QHJlZGhhdC5jb20+IHdyb3RlOgo+ID4KPiA+IE9uIFRodSwg
TWF5IDE4LCAyMDIzIGF0IDAzOjMzOjUyUE0gKzA4MDAsIFh1YW4gWmh1byB3cm90ZToKPiA+ID4g
T24gVGh1LCAxOCBNYXkgMjAyMyAwMzoxMToyNSAtMDQwMCwgIk1pY2hhZWwgUy4gVHNpcmtpbiIg
PG1zdEByZWRoYXQuY29tPiB3cm90ZToKPiA+ID4gPiBPbiBUaHUsIE1heSAxOCwgMjAyMyBhdCAw
Mjo1MTo1N1BNICswODAwLCBKYXNvbiBXYW5nIHdyb3RlOgo+ID4gPiA+ID4gT24gV2VkLCBNYXkg
MTcsIDIwMjMgYXQgMTA6MjPigK9BTSBYdWFuIFpodW8gPHh1YW56aHVvQGxpbnV4LmFsaWJhYmEu
Y29tPiB3cm90ZToKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gdmlydHF1ZXVlX2FkZF9zcGxpdCgp
IG9ubHkgc3VwcG9ydHMgdmlydHVhbCBhZGRyZXNzZXMsIGRtYSBpcyBjb21wbGV0ZWQKPiA+ID4g
PiA+ID4gaW4gdmlydHF1ZXVlX2FkZF9zcGxpdCgpLgo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiBJ
biBzb21lIHNjZW5hcmlvcyAoc3VjaCBhcyB0aGUgQUZfWERQIHNjZW5hcmlvKSwgdGhlIG1lbW9y
eSBpcyBhbGxvY2F0ZWQKPiA+ID4gPiA+ID4gYW5kIERNQSBpcyBjb21wbGV0ZWQgaW4gYWR2YW5j
ZSwgc28gaXQgaXMgbmVjZXNzYXJ5IGZvciB1cyB0byBzdXBwb3J0Cj4gPiA+ID4gPiA+IHBhc3Np
bmcgdGhlIERNQSBhZGRyZXNzIHRvIHZpcnRxdWV1ZV9hZGRfc3BsaXQoKS4KPiA+ID4gPiA+ID4K
PiA+ID4gPiA+ID4gUmVjb3JkIHRoaXMgaW5mb3JtYXRpb24gaW4gZGVzY19zdGF0ZSwgd2UgY2Fu
IHNraXAgdW5tYXAgYmFzZWQgb24gdGhpcwo+ID4gPiA+ID4gPiB3aGVuIGV4ZWN1dGluZyBkbWEg
dW5tYXAuCj4gPiA+ID4gPgo+ID4gPiA+ID4gSSB3b3VsZCBhbHNvIHN1Z2dlc3QgZG9jdW1lbnRp
bmcgd2h5IGEgcGVyIGRlc2NyaXB0b3IgbWV0YWRhdGEgaXMKPiA+ID4gPiA+IG5lZWRlZCBpbnN0
ZWFkIG9mIGEgcGVyIHZpcnRxdWV1ZSBvbmUuCj4gPiA+ID4KPiA+ID4gPiBJIHRoaW5rIHdlIGNv
dWxkIG1ha2UgaXQgcGVyIHZpcnRxdWV1ZS4gVGhhdCB3b3VsZCBtZWFuIGFsbCBjb2RlIGluCj4g
PiA+ID4gdmlydGlvIG5ldCB3b3VsZCBoYXZlIHRvIGNoYW5nZSB0byBkbyBkbWEgbWFwcGluZyBp
dHNlbGYgaW5zdGVhZCBvZgo+ID4gPiA+IHJlbHlpbmcgb24gdmlydGlvIGNvcmUgdGhvdWdoLiAg
V2hpY2ggaXMgbWF5YmUgYSBnb29kIGlkZWE/IERlZmluaXRlbHkgYQo+ID4gPiA+IHZlcnkgaW50
cnVzaXZlIGNoYW5nZSB0aG91Z2gsIHdpbGwgbmVlZCBhIGxvdCBvZiBwZXJmb3JtYW5jZSB0ZXN0
aW5nCj4gPiA+ID4gdG8gbWFrZSBzdXJlIHdlIGRvbid0IGJyZWFrIGFueXRoaW5nLgo+ID4gPgo+
ID4gPiBJbiBmYWN0LCB3ZSBoYXZlIHRyaWVkIHRoaXMgaWRlYS4KPiA+ID4KPiA+ID4gVGhlIHBy
b2JsZW0gaXMgdGhlIGRldGFjaCBhbmQgdW5tYXAuCj4gPiA+Cj4gPiA+IFdlIG5lZWQgdG8gZ2V0
IGFsbCBETUEgQWRkcmVzc2VzIGZyb20gdmlydGlvLXJpbmcgdG8gdW5tYXAuIEN1cnJlbnRseSwg
aXQgZG9lcwo+ID4gPiBub3Qgc3VwcG9ydCB0byByZXR1cm4gdGhlIERNQSBBZGRyZXNzLCBhbmQg
Zm9yIFNLQiwgd2UgbmVlZCB0byBnZXQgbXVsdGlwbGUgRE1BCj4gPiA+IEFkZHJlc3NlcyBhdCBv
bmUgdGltZS4KPiA+ID4KPiA+ID4gVGhpcyBuZWVkIHRvIG1vZGlmeSB0aGUgbG9naWMgb2YgVmly
dGlvLVJpbmcgZGV0YWNoLiBCZXNpZGVzIHRoaXMsIEkgYWxzbyBhZ3JlZQo+ID4gPiB3aXRoIHRo
aXMgaWRlYS4KPiA+ID4KPiA+ID4gVGhhbmtzLgo+ID4KPiA+IFdlbGwgeW91IGNhbiBoYXZlIGEg
dmVyc2lvbiBvZiBnZXRfYnVmIHRoYXQgcmV0dXJucyB0aGVtIC4uLiBidXQKPiA+IGl0IGlzIG5v
dCBjbGVhciB0byBtZSBhbGwgdGhpcyBpcyB3b3J0aCBpdCB1bmxlc3MgeW91IHdhbnQKPiA+IHRv
IGRvIHVuc2FmZSB0cmlja3MgbGlrZSBsZWF2aW5nIHRoZW0gbWFwcGVkLgo+Cj4gU29tZSBoaWdo
IHNwZWVkIE5JQyBkcml2ZXJzIHVzZSB0aGlzIHRyaWNrIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2Uu
CgoKSW50ZXJlc3RpbmcsIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgSSBrbm93IHRoaXMuIElzIHRo
ZXJlIGFueSBwcm9ibGVtPwoKU28sIGlzIHRoYXQgdmlydGlvLW5ldCBtYXN0ZXIgdGhlIG9wZXJh
dGlvbiBvZiBkbWEgYnkgaXRzZWxmIHRoZSByaWdodCB3YXk/CgpUaGFua3MKCgoKPgo+ID4gSSdk
IGxlYXZlIHRoYXQKPiA+IGZvciBhbm90aGVyIGRheSBtYXliZS4KPiA+Cj4gPiBGb3IgbWFya2lu
ZyBkZXNjIGFzIHByZW1hcHBlZCBJIHRoaW5rIHdlIGNhbiB1c2UgYSBiaXQgZnJvbQo+ID4gZGVz
Y19leHRyYS0+ZmxhZ3MsIGVpdGhlciByZXVzaW5nIG9uZSBvZiBORVhULEFWQUlMLFVTRUQsIG9y
IHN0ZWFsaW5nCj4gPiBhbm90aGVyIG9uZS4KPgo+IFByb2JhYmx5Lgo+Cj4gVGhhbmtzCj4KPiA+
Cj4gPgo+ID4KPiA+ID4KPiA+ID4gPgo+ID4gPiA+Cj4gPiA+ID4KPiA+ID4gPgo+ID4gPiA+ID4g
Pgo+ID4gPiA+ID4gPiBTaWduZWQtb2ZmLWJ5OiBYdWFuIFpodW8gPHh1YW56aHVvQGxpbnV4LmFs
aWJhYmEuY29tPgo+ID4gPiA+ID4gPiAtLS0KPiA+ID4gPiA+ID4gIGRyaXZlcnMvdmlydGlvL3Zp
cnRpb19yaW5nLmMgfCAzOCArKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0KPiA+
ID4gPiA+ID4gIDEgZmlsZSBjaGFuZ2VkLCAyOSBpbnNlcnRpb25zKCspLCA5IGRlbGV0aW9ucygt
KQo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92aXJ0aW8vdmly
dGlvX3JpbmcuYyBiL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19yaW5nLmMKPiA+ID4gPiA+ID4gaW5k
ZXggZTJmYzUwYzA1YmVjLi5iZDVlODRhZmFiMzcgMTAwNjQ0Cj4gPiA+ID4gPiA+IC0tLSBhL2Ry
aXZlcnMvdmlydGlvL3ZpcnRpb19yaW5nLmMKPiA+ID4gPiA+ID4gKysrIGIvZHJpdmVycy92aXJ0
aW8vdmlydGlvX3JpbmcuYwo+ID4gPiA+ID4gPiBAQCAtNzAsNiArNzAsNyBAQAo+ID4gPiA+ID4g
PiAgc3RydWN0IHZyaW5nX2Rlc2Nfc3RhdGVfc3BsaXQgewo+ID4gPiA+ID4gPiAgICAgICAgIHZv
aWQgKmRhdGE7ICAgICAgICAgICAgICAgICAgICAgLyogRGF0YSBmb3IgY2FsbGJhY2suICovCj4g
PiA+ID4gPiA+ICAgICAgICAgc3RydWN0IHZyaW5nX2Rlc2MgKmluZGlyX2Rlc2M7ICAvKiBJbmRp
cmVjdCBkZXNjcmlwdG9yLCBpZiBhbnkuICovCj4gPiA+ID4gPiA+ICsgICAgICAgYm9vbCBwcmVt
YXBwZWQ7ICAgICAgICAgICAgICAgICAvKiBETUEgbWFwcGluZyBpcyBkb25lIGJ5IGRyaXZlci4g
Ki8KPiA+ID4gPiA+Cj4gPiA+ID4gPiBHb2luZyBiYWNrIHRvIHRoZSBvcmlnaW5hbCBkaXNjdXNz
aW9uIGFyb3VuZCB3aGVyZSB0aGlzIHNob3VsZCBiZQo+ID4gPiA+ID4gcGxhY2VkLiBJIHdvbmRl
ciBpZiB3ZSBjYW4gZmluZCBhIGNvbW1vbiBwbGFjZSB0byBzdG9yZSB0aGlzIHNpbmNlIGl0Cj4g
PiA+ID4gPiBoYXMgbm90aGluZyByZWxhdGVkIHRvIHZpcnRxdWV1ZSBsYXlvdXQuIE1heWJlIGRl
c2NfZXh0cmE/IEFuZCBpdAo+ID4gPiA+ID4gd291bGQgYmUgZXZlbiBiZXR0ZXIgaWYgd2UgY2Fu
IGF2b2lkIHN0cmVzc2luZyB0aGUgY2FjaGUgbGlrZSBhYm92ZS4KPiA+ID4gPiA+Cj4gPiA+ID4g
PiA+ICB9Owo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiAgc3RydWN0IHZyaW5nX2Rlc2Nfc3RhdGVf
cGFja2VkIHsKPiA+ID4gPiA+ID4gQEAgLTM1Niw4ICszNTcsMTQgQEAgc3RhdGljIHN0cnVjdCBk
ZXZpY2UgKnZyaW5nX2RtYV9kZXYoY29uc3Qgc3RydWN0IHZyaW5nX3ZpcnRxdWV1ZSAqdnEpCj4g
PiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICAvKiBNYXAgb25lIHNnIGVudHJ5LiAqLwo+ID4gPiA+ID4g
PiAgc3RhdGljIGludCB2cmluZ19tYXBfb25lX3NnKGNvbnN0IHN0cnVjdCB2cmluZ192aXJ0cXVl
dWUgKnZxLCBzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNnLAo+ID4gPiA+ID4gPiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyZWN0aW9uLCBzdGF0aWMg
ZG1hX2FkZHJfdCAqYWRkcikKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
IGVudW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpcmVjdGlvbiwKPiA+ID4gPiA+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGJvb2wgcHJlbWFwcGVkLCBkbWFfYWRkcl90ICphZGRyKQo+ID4g
PiA+ID4KPiA+ID4gPiA+IGhhdmluZyB0aGluZ3MgbGlrZToKPiA+ID4gPiA+Cj4gPiA+ID4gPiBp
bnQgZnVuYyhib29sIGRvKQo+ID4gPiA+ID4gewo+ID4gPiA+ID4gaWYgKCFkbykKPiA+ID4gPiA+
ICAgICByZXR1cm47Cj4gPiA+ID4gPiB9Cj4gPiA+ID4gPgo+ID4gPiA+ID4gaXMgYSBoaW50IHRo
YXQgdGhlIGNoZWNrIG5lZWRzIHRvIGJlIGRvbmUgYnkgdGhlIGNhbGxlcj8KPiA+ID4gPiA+Cj4g
PiA+ID4gPiBBbmQgdGhpcyBjaGFuZ2Ugc2hvdWxkIHdvcmsgZm9yIGJvdGggcGFja2VkIGFuZCBz
cGxpdC4gSSB0aGluayB3ZSBuZWVkCj4gPiA+ID4gPiB0byBzcXVhc2ggdGhlIHBhY2tlZCBjaGFu
Z2VzIGhlcmUuCj4gPiA+ID4gPgo+ID4gPiA+ID4gTG9va2luZyBhdCBob3cgcGFja2VkIHZpcnRx
dWV1ZSB1c2VzIHRoaXMgaW4gdGhpcyBwYXRjaCwgSSBkb24ndCB0aGluawo+ID4gPiA+ID4gdGhp
cyBwYXRjaCBjYW4gZXZlbiBiZSBidWlsdC4gSSB3aWxsIHdhaXQgZm9yIGEgbmV3IHZlcnNpb24g
YW5kCj4gPiA+ID4gPiBjb250aW51ZSB0aGUgcmV2aWV3IGZyb20gdGhlcmUuCj4gPiA+ID4gPgo+
ID4gPiA+ID4gVGhhbmtzCj4gPiA+ID4gPgo+ID4gPiA+ID4KPiA+ID4gPiA+Cj4gPiA+ID4gPiA+
ICB7Cj4gPiA+ID4gPiA+ICsgICAgICAgaWYgKHByZW1hcHBlZCkgewo+ID4gPiA+ID4gPiArICAg
ICAgICAgICAgICAgKmFkZHIgPSBzZ19kbWFfYWRkcmVzcyhzZyk7Cj4gPiA+ID4gPiA+ICsgICAg
ICAgICAgICAgICByZXR1cm4gMDsKPiA+ID4gPiA+ID4gKyAgICAgICB9Cj4gPiA+ID4gPiA+ICsK
PiA+ID4gPiA+ID4gICAgICAgICBpZiAoIXZxLT51c2VfZG1hX2FwaSkgewo+ID4gPiA+ID4gPiAg
ICAgICAgICAgICAgICAgLyoKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAqIElmIERNQSBp
cyBub3QgdXNlZCwgS01TQU4gZG9lc24ndCBrbm93IHRoYXQgdGhlIHNjYXR0ZXJsaXN0Cj4gPiA+
ID4gPiA+IEBAIC00NDUsNyArNDUyLDcgQEAgc3RhdGljIHZvaWQgdnJpbmdfdW5tYXBfb25lX3Nw
bGl0X2luZGlyZWN0KGNvbnN0IHN0cnVjdCB2cmluZ192aXJ0cXVldWUgKnZxLAo+ID4gPiA+ID4g
PiAgfQo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiAgc3RhdGljIHVuc2lnbmVkIGludCB2cmluZ191
bm1hcF9vbmVfc3BsaXQoY29uc3Qgc3RydWN0IHZyaW5nX3ZpcnRxdWV1ZSAqdnEsCj4gPiA+ID4g
PiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGlu
dCBpKQo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1bnNpZ25lZCBpbnQgaSwgYm9vbCBwcmVtYXBwZWQpCj4gPiA+ID4gPiA+ICB7Cj4gPiA+ID4g
PiA+ICAgICAgICAgc3RydWN0IHZyaW5nX2Rlc2NfZXh0cmEgKmV4dHJhID0gdnEtPnNwbGl0LmRl
c2NfZXh0cmE7Cj4gPiA+ID4gPiA+ICAgICAgICAgdTE2IGZsYWdzOwo+ID4gPiA+ID4gPiBAQCAt
NDYyLDYgKzQ2OSw5IEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgdnJpbmdfdW5tYXBfb25lX3NwbGl0
KGNvbnN0IHN0cnVjdCB2cmluZ192aXJ0cXVldWUgKnZxLAo+ID4gPiA+ID4gPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAoZmxhZ3MgJiBWUklOR19ERVNDX0ZfV1JJVEUpID8KPiA+
ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRE1BX0ZST01fREVWSUNF
IDogRE1BX1RPX0RFVklDRSk7Cj4gPiA+ID4gPiA+ICAgICAgICAgfSBlbHNlIHsKPiA+ID4gPiA+
ID4gKyAgICAgICAgICAgICAgIGlmIChwcmVtYXBwZWQpCj4gPiA+ID4gPiA+ICsgICAgICAgICAg
ICAgICAgICAgICAgIGdvdG8gb3V0Owo+ID4gPiA+ID4gPiArCj4gPiA+ID4gPiA+ICAgICAgICAg
ICAgICAgICBkbWFfdW5tYXBfcGFnZSh2cmluZ19kbWFfZGV2KHZxKSwKPiA+ID4gPiA+ID4gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhW2ldLmFkZHIsCj4gPiA+ID4gPiA+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYVtpXS5sZW4sCj4gPiA+ID4gPiA+IEBA
IC01MzIsNiArNTQyLDcgQEAgc3RhdGljIGlubGluZSBpbnQgdmlydHF1ZXVlX2FkZF9zcGxpdChz
dHJ1Y3QgdmlydHF1ZXVlICpfdnEsCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGluX3NncywKPiA+ID4gPiA+ID4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkICpkYXRhLAo+ID4gPiA+ID4gPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKmN0eCwKPiA+ID4gPiA+ID4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHByZW1hcHBlZCwKPiA+
ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZnBfdCBnZnAp
Cj4gPiA+ID4gPiA+ICB7Cj4gPiA+ID4gPiA+ICAgICAgICAgc3RydWN0IHZyaW5nX3ZpcnRxdWV1
ZSAqdnEgPSB0b192dnEoX3ZxKTsKPiA+ID4gPiA+ID4gQEAgLTU5NSw3ICs2MDYsNyBAQCBzdGF0
aWMgaW5saW5lIGludCB2aXJ0cXVldWVfYWRkX3NwbGl0KHN0cnVjdCB2aXJ0cXVldWUgKl92cSwK
PiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIGZvciAoc2cgPSBzZ3Nbbl07IHNnOyBzZyA9IHNn
X25leHQoc2cpKSB7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIGRtYV9hZGRy
X3QgYWRkcjsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gLSAgICAgICAgICAgICAgICAgICAgICAg
aWYgKHZyaW5nX21hcF9vbmVfc2codnEsIHNnLCBETUFfVE9fREVWSUNFLCAmYWRkcikpCj4gPiA+
ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGlmICh2cmluZ19tYXBfb25lX3NnKHZxLCBz
ZywgRE1BX1RPX0RFVklDRSwgcHJlbWFwcGVkLCAmYWRkcikpCj4gPiA+ID4gPiA+ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZ290byB1bm1hcF9yZWxlYXNlOwo+ID4gPiA+ID4gPgo+
ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2ID0gaTsKPiA+ID4gPiA+ID4g
QEAgLTYxMSw3ICs2MjIsNyBAQCBzdGF0aWMgaW5saW5lIGludCB2aXJ0cXVldWVfYWRkX3NwbGl0
KHN0cnVjdCB2aXJ0cXVldWUgKl92cSwKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIGZvciAo
c2cgPSBzZ3Nbbl07IHNnOyBzZyA9IHNnX25leHQoc2cpKSB7Cj4gPiA+ID4gPiA+ICAgICAgICAg
ICAgICAgICAgICAgICAgIGRtYV9hZGRyX3QgYWRkcjsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4g
LSAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZyaW5nX21hcF9vbmVfc2codnEsIHNnLCBETUFf
RlJPTV9ERVZJQ0UsICZhZGRyKSkKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
aWYgKHZyaW5nX21hcF9vbmVfc2codnEsIHNnLCBETUFfRlJPTV9ERVZJQ0UsIHByZW1hcHBlZCwg
JmFkZHIpKQo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8g
dW5tYXBfcmVsZWFzZTsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAg
ICAgICAgcHJldiA9IGk7Cj4gPiA+ID4gPiA+IEBAIC02NTcsNiArNjY4LDcgQEAgc3RhdGljIGlu
bGluZSBpbnQgdmlydHF1ZXVlX2FkZF9zcGxpdChzdHJ1Y3QgdmlydHF1ZXVlICpfdnEsCj4gPiA+
ID4gPiA+Cj4gPiA+ID4gPiA+ICAgICAgICAgLyogU3RvcmUgdG9rZW4gYW5kIGluZGlyZWN0IGJ1
ZmZlciBzdGF0ZS4gKi8KPiA+ID4gPiA+ID4gICAgICAgICB2cS0+c3BsaXQuZGVzY19zdGF0ZVto
ZWFkXS5kYXRhID0gZGF0YTsKPiA+ID4gPiA+ID4gKyAgICAgICB2cS0+c3BsaXQuZGVzY19zdGF0
ZVtoZWFkXS5wcmVtYXBwZWQgPSBwcmVtYXBwZWQ7Cj4gPiA+ID4gPiA+ICAgICAgICAgaWYgKGlu
ZGlyZWN0KQo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgdnEtPnNwbGl0LmRlc2Nfc3RhdGVb
aGVhZF0uaW5kaXJfZGVzYyA9IGRlc2M7Cj4gPiA+ID4gPiA+ICAgICAgICAgZWxzZQo+ID4gPiA+
ID4gPiBAQCAtNjg2LDYgKzY5OCwxNCBAQCBzdGF0aWMgaW5saW5lIGludCB2aXJ0cXVldWVfYWRk
X3NwbGl0KHN0cnVjdCB2aXJ0cXVldWUgKl92cSwKPiA+ID4gPiA+ID4gICAgICAgICByZXR1cm4g
MDsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gIHVubWFwX3JlbGVhc2U6Cj4gPiA+ID4gPiA+ICsg
ICAgICAgaWYgKHByZW1hcHBlZCkgewo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgaWYgKGlu
ZGlyZWN0KQo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICBrZnJlZShkZXNjKTsK
PiA+ID4gPiA+ID4gKwo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgRU5EX1VTRSh2cSk7Cj4g
PiA+ID4gPiA+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiA+ID4gPiA+ID4gKyAg
ICAgICB9Cj4gPiA+ID4gPiA+ICsKPiA+ID4gPiA+ID4gICAgICAgICBlcnJfaWR4ID0gaTsKPiA+
ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAgICBpZiAoaW5kaXJlY3QpCj4gPiA+ID4gPiA+IEBA
IC03MDAsNyArNzIwLDcgQEAgc3RhdGljIGlubGluZSBpbnQgdmlydHF1ZXVlX2FkZF9zcGxpdChz
dHJ1Y3QgdmlydHF1ZXVlICpfdnEsCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAg
IHZyaW5nX3VubWFwX29uZV9zcGxpdF9pbmRpcmVjdCh2cSwgJmRlc2NbaV0pOwo+ID4gPiA+ID4g
PiAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdmlydGlvMTZfdG9fY3B1KF92cS0+dmRldiwg
ZGVzY1tpXS5uZXh0KTsKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIH0gZWxzZQo+ID4gPiA+
ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICBpID0gdnJpbmdfdW5tYXBfb25lX3NwbGl0KHZx
LCBpKTsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgaSA9IHZyaW5nX3VubWFw
X29uZV9zcGxpdCh2cSwgaSwgZmFsc2UpOwo+ID4gPiA+ID4gPiAgICAgICAgIH0KPiA+ID4gPiA+
ID4KPiA+ID4gPiA+ID4gICAgICAgICBpZiAoaW5kaXJlY3QpCj4gPiA+ID4gPiA+IEBAIC03NTcs
MTIgKzc3NywxMiBAQCBzdGF0aWMgdm9pZCBkZXRhY2hfYnVmX3NwbGl0KHN0cnVjdCB2cmluZ192
aXJ0cXVldWUgKnZxLCB1bnNpZ25lZCBpbnQgaGVhZCwKPiA+ID4gPiA+ID4gICAgICAgICBpID0g
aGVhZDsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAgICB3aGlsZSAodnEtPnNwbGl0LnZy
aW5nLmRlc2NbaV0uZmxhZ3MgJiBuZXh0ZmxhZykgewo+ID4gPiA+ID4gPiAtICAgICAgICAgICAg
ICAgdnJpbmdfdW5tYXBfb25lX3NwbGl0KHZxLCBpKTsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAg
ICAgIHZyaW5nX3VubWFwX29uZV9zcGxpdCh2cSwgaSwgc3RhdGUtPnByZW1hcHBlZCk7Cj4gPiA+
ID4gPiA+ICAgICAgICAgICAgICAgICBpID0gdnEtPnNwbGl0LmRlc2NfZXh0cmFbaV0ubmV4dDsK
PiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIHZxLT52cS5udW1fZnJlZSsrOwo+ID4gPiA+ID4g
PiAgICAgICAgIH0KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gLSAgICAgICB2cmluZ191bm1hcF9v
bmVfc3BsaXQodnEsIGkpOwo+ID4gPiA+ID4gPiArICAgICAgIHZyaW5nX3VubWFwX29uZV9zcGxp
dCh2cSwgaSwgc3RhdGUtPnByZW1hcHBlZCk7Cj4gPiA+ID4gPiA+ICAgICAgICAgdnEtPnNwbGl0
LmRlc2NfZXh0cmFbaV0ubmV4dCA9IHZxLT5mcmVlX2hlYWQ7Cj4gPiA+ID4gPiA+ICAgICAgICAg
dnEtPmZyZWVfaGVhZCA9IGhlYWQ7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IEBAIC03ODMsNyAr
ODAzLDcgQEAgc3RhdGljIHZvaWQgZGV0YWNoX2J1Zl9zcGxpdChzdHJ1Y3QgdnJpbmdfdmlydHF1
ZXVlICp2cSwgdW5zaWduZWQgaW50IGhlYWQsCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgVlJJTkdfREVTQ19GX0lORElSRUNUKSk7Cj4gPiA+ID4gPiA+ICAgICAg
ICAgICAgICAgICBCVUdfT04obGVuID09IDAgfHwgbGVuICUgc2l6ZW9mKHN0cnVjdCB2cmluZ19k
ZXNjKSk7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IC0gICAgICAgICAgICAgICBpZiAodnEtPnVz
ZV9kbWFfYXBpKSB7Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICBpZiAodnEtPnVzZV9kbWFf
YXBpICYmICFzdGF0ZS0+cHJlbWFwcGVkKSB7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW4gLyBzaXplb2Yoc3RydWN0IHZyaW5nX2Rlc2MpOyBq
KyspCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnJpbmdfdW5t
YXBfb25lX3NwbGl0X2luZGlyZWN0KHZxLCAmaW5kaXJfZGVzY1tqXSk7Cj4gPiA+ID4gPiA+ICAg
ICAgICAgICAgICAgICB9Cj4gPiA+ID4gPiA+IEBAIC0yMTQzLDcgKzIxNjMsNyBAQCBzdGF0aWMg
aW5saW5lIGludCB2aXJ0cXVldWVfYWRkKHN0cnVjdCB2aXJ0cXVldWUgKl92cSwKPiA+ID4gPiA+
ID4gICAgICAgICByZXR1cm4gdnEtPnBhY2tlZF9yaW5nID8gdmlydHF1ZXVlX2FkZF9wYWNrZWQo
X3ZxLCBzZ3MsIHRvdGFsX3NnLAo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgb3V0X3NncywgaW5fc2dzLCBkYXRhLCBjdHgsIGdmcCkgOgo+ID4gPiA+
ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXJ0cXVldWVfYWRkX3NwbGl0
KF92cSwgc2dzLCB0b3RhbF9zZywKPiA+ID4gPiA+ID4gLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIG91dF9zZ3MsIGluX3NncywgZGF0YSwgY3R4LCBnZnApOwo+ID4gPiA+
ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0X3NncywgaW5f
c2dzLCBkYXRhLCBjdHgsIHByZW1hcHBlZCwgZ2ZwKTsKPiA+ID4gPiA+ID4gIH0KPiA+ID4gPiA+
ID4KPiA+ID4gPiA+ID4gIC8qKgo+ID4gPiA+ID4gPiAtLQo+ID4gPiA+ID4gPiAyLjMyLjAuMy5n
MDExOTVjZjlmCj4gPiA+ID4gPiA+Cj4gPiA+ID4KPiA+Cj4KX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KVmlydHVhbGl6YXRpb24gbWFpbGluZyBsaXN0ClZp
cnR1YWxpemF0aW9uQGxpc3RzLmxpbnV4LWZvdW5kYXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGlu
dXhmb3VuZGF0aW9uLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3ZpcnR1YWxpemF0aW9u
