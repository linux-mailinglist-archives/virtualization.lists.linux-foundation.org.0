Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [IPv6:2605:bc80:3010::133])
	by mail.lfdr.de (Postfix) with ESMTPS id E6BC3725AA0
	for <lists.virtualization@lfdr.de>; Wed,  7 Jun 2023 11:36:17 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id 3211340ACD;
	Wed,  7 Jun 2023 09:36:16 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 3211340ACD
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8G0F6Au27NFy; Wed,  7 Jun 2023 09:36:14 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp2.osuosl.org (Postfix) with ESMTPS id 0C4CF408E1;
	Wed,  7 Jun 2023 09:36:13 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 0C4CF408E1
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 65137C008C;
	Wed,  7 Jun 2023 09:36:13 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp2.osuosl.org (smtp2.osuosl.org [140.211.166.133])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 94405C0029
 for <virtualization@lists.linux-foundation.org>;
 Wed,  7 Jun 2023 09:36:11 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp2.osuosl.org (Postfix) with ESMTP id 62963408E1
 for <virtualization@lists.linux-foundation.org>;
 Wed,  7 Jun 2023 09:36:11 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 62963408E1
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
 by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 1TP7ZK9MT4x4
 for <virtualization@lists.linux-foundation.org>;
 Wed,  7 Jun 2023 09:36:09 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org CCB4740BD0
Received: from out30-131.freemail.mail.aliyun.com
 (out30-131.freemail.mail.aliyun.com [115.124.30.131])
 by smtp2.osuosl.org (Postfix) with ESMTPS id CCB4740BD0
 for <virtualization@lists.linux-foundation.org>;
 Wed,  7 Jun 2023 09:36:08 +0000 (UTC)
X-Alimail-AntiSpam: AC=PASS; BC=-1|-1; BR=01201311R291e4; CH=green; DM=||false|;
 DS=||; FP=0|-1|-1|-1|0|-1|-1|-1; HT=ay29a033018046050;
 MF=xuanzhuo@linux.alibaba.com; NM=1; PH=DS; RN=11; SR=0;
 TI=SMTPD_---0Vka7QRF_1686130561; 
Received: from localhost(mailfrom:xuanzhuo@linux.alibaba.com
 fp:SMTPD_---0Vka7QRF_1686130561) by smtp.aliyun-inc.com;
 Wed, 07 Jun 2023 17:36:02 +0800
Message-ID: <1686130536.1579273-4-xuanzhuo@linux.alibaba.com>
Subject: Re: [PATCH net-next 2/5] virtio_net: Add page_pool support to improve
 performance
Date: Wed, 7 Jun 2023 17:35:36 +0800
From: Xuan Zhuo <xuanzhuo@linux.alibaba.com>
To: Liang Chen <liangchen.linux@gmail.com>
References: <20230526054621.18371-1-liangchen.linux@gmail.com>
 <20230526054621.18371-2-liangchen.linux@gmail.com>
 <20230528021708-mutt-send-email-mst@kernel.org>
 <CAKhg4tKzW6akbKLvg1UFpey+Lkiic3hBWh87jyg-a8ASchPvMA@mail.gmail.com>
 <20230529055439-mutt-send-email-mst@kernel.org>
 <CAKhg4t+64E5oisgwpJvt5zwcAzKpLoNhN-cMutRuiC9D-Z7C5A@mail.gmail.com>
 <CAKhg4tKpBFgGaEq743dvYJxZFavDSyOdqbvc7mE4+_sqeSpgQQ@mail.gmail.com>
In-Reply-To: <CAKhg4tKpBFgGaEq743dvYJxZFavDSyOdqbvc7mE4+_sqeSpgQQ@mail.gmail.com>
Cc: "Michael S. Tsirkin" <mst@redhat.com>, netdev@vger.kernel.org,
 linux-kernel@vger.kernel.org, alexander.duyck@gmail.com,
 virtualization@lists.linux-foundation.org, edumazet@google.com,
 kuba@kernel.org, pabeni@redhat.com, davem@davemloft.net
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gV2VkLCA3IEp1biAyMDIzIDE3OjA4OjU5ICswODAwLCBMaWFuZyBDaGVuIDxsaWFuZ2NoZW4u
bGludXhAZ21haWwuY29tPiB3cm90ZToKPiBPbiBUdWUsIE1heSAzMCwgMjAyMyBhdCA5OjE54oCv
QU0gTGlhbmcgQ2hlbiA8bGlhbmdjaGVuLmxpbnV4QGdtYWlsLmNvbT4gd3JvdGU6Cj4gPgo+ID4g
T24gTW9uLCBNYXkgMjksIDIwMjMgYXQgNTo1NeKAr1BNIE1pY2hhZWwgUy4gVHNpcmtpbiA8bXN0
QHJlZGhhdC5jb20+IHdyb3RlOgo+ID4gPgo+ID4gPiBPbiBNb24sIE1heSAyOSwgMjAyMyBhdCAw
MzoyNzo1NlBNICswODAwLCBMaWFuZyBDaGVuIHdyb3RlOgo+ID4gPiA+IE9uIFN1biwgTWF5IDI4
LCAyMDIzIGF0IDI6MjDigK9QTSBNaWNoYWVsIFMuIFRzaXJraW4gPG1zdEByZWRoYXQuY29tPiB3
cm90ZToKPiA+ID4gPiA+Cj4gPiA+ID4gPiBPbiBGcmksIE1heSAyNiwgMjAyMyBhdCAwMTo0Njox
OFBNICswODAwLCBMaWFuZyBDaGVuIHdyb3RlOgo+ID4gPiA+ID4gPiBUaGUgaW1wbGVtZW50YXRp
b24gYXQgdGhlIG1vbWVudCB1c2VzIG9uZSBwYWdlIHBlciBwYWNrZXQgaW4gYm90aCB0aGUKPiA+
ID4gPiA+ID4gbm9ybWFsIGFuZCBYRFAgcGF0aC4gSW4gYWRkaXRpb24sIGludHJvZHVjaW5nIGEg
bW9kdWxlIHBhcmFtZXRlciB0byBlbmFibGUKPiA+ID4gPiA+ID4gb3IgZGlzYWJsZSB0aGUgdXNh
Z2Ugb2YgcGFnZSBwb29sIChkaXNhYmxlZCBieSBkZWZhdWx0KS4KPiA+ID4gPiA+ID4KPiA+ID4g
PiA+ID4gSW4gc2luZ2xlLWNvcmUgdm0gdGVzdGluZyBlbnZpcm9ubWVudHMsIGl0IGdpdmVzIGEg
bW9kZXN0IHBlcmZvcm1hbmNlIGdhaW4KPiA+ID4gPiA+ID4gaW4gdGhlIG5vcm1hbCBwYXRoLgo+
ID4gPiA+ID4gPiAgIFVwc3RyZWFtIGNvZGViYXNlOiA0Ny41IEdiaXRzL3NlYwo+ID4gPiA+ID4g
PiAgIFVwc3RyZWFtIGNvZGViYXNlICsgcGFnZV9wb29sIHN1cHBvcnQ6IDUwLjIgR2JpdHMvc2Vj
Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IEluIG11bHRpLWNvcmUgdm0gdGVzdGluZyBlbnZpcm9u
bWVudHMsIFRoZSBtb3N0IHNpZ25pZmljYW50IHBlcmZvcm1hbmNlCj4gPiA+ID4gPiA+IGdhaW4g
aXMgb2JzZXJ2ZWQgaW4gWERQIGNwdW1hcDoKPiA+ID4gPiA+ID4gICBVcHN0cmVhbSBjb2RlYmFz
ZTogMS4zOCBHYml0cy9zZWMKPiA+ID4gPiA+ID4gICBVcHN0cmVhbSBjb2RlYmFzZSArIHBhZ2Vf
cG9vbCBzdXBwb3J0OiA5Ljc0IEdiaXRzL3NlYwo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiBXaXRo
IHRoaXMgZm91bmRhdGlvbiwgd2UgY2FuIGZ1cnRoZXIgaW50ZWdyYXRlIHBhZ2UgcG9vbCBmcmFn
bWVudGF0aW9uIGFuZAo+ID4gPiA+ID4gPiBETUEgbWFwL3VubWFwIHN1cHBvcnQuCj4gPiA+ID4g
PiA+Cj4gPiA+ID4gPiA+IFNpZ25lZC1vZmYtYnk6IExpYW5nIENoZW4gPGxpYW5nY2hlbi5saW51
eEBnbWFpbC5jb20+Cj4gPiA+ID4gPgo+ID4gPiA+ID4gV2h5IG9mZiBieSBkZWZhdWx0Pwo+ID4g
PiA+ID4gSSBhbSBndWVzc2luZyBpdCBzb21ldGltZXMgaGFzIHBlcmZvcm1hbmNlIGNvc3RzIHRv
bz8KPiA+ID4gPiA+Cj4gPiA+ID4gPgo+ID4gPiA+ID4gV2hhdCBoYXBwZW5zIGlmIHdlIHVzZSBw
YWdlIHBvb2wgZm9yIGJpZyBtb2RlIHRvbz8KPiA+ID4gPiA+IFRoZSBsZXNzIG1vZGVzIHdlIGhh
dmUgdGhlIGJldHRlci4uLgo+ID4gPiA+ID4KPiA+ID4gPiA+Cj4gPiA+ID4KPiA+ID4gPiBTdXJl
LCBub3cgSSBiZWxpZXZlIGl0IG1ha2VzIHNlbnNlIHRvIGVuYWJsZSBpdCBieSBkZWZhdWx0LiBX
aGVuIHRoZQo+ID4gPiA+IHBhY2tldCBzaXplIGlzIHZlcnkgc21hbGwsIGl0IHJlZHVjZXMgdGhl
IGxpa2VsaWhvb2Qgb2Ygc2tiCj4gPiA+ID4gY29hbGVzY2luZy4gQnV0IHN1Y2ggY2FzZXMgYXJl
IHJhcmUuCj4gPiA+Cj4gPiA+IHNtYWxsIHBhY2tldHMgYXJlIHJhcmU/IFRoZXNlIHdvcmtsb2Fk
cyBhcmUgZWFzeSB0byBjcmVhdGUgYWN0dWFsbHkuCj4gPiA+IFBscyB0cnkgYW5kIGluY2x1ZGUg
YmVuY2htYXJrIHdpdGggc21hbGwgcGFja2V0IHNpemUuCj4gPiA+Cj4gPgo+ID4gU3VyZSwgVGhh
bmtzIQo+Cj4gQmVmb3JlIGdvaW5nIGFoZWFkIGFuZCBwb3N0aW5nIHYyIHBhdGNoLCBJIHdvdWxk
IGxpa2UgdG8gaGVhciBtb3JlCj4gYWR2aWNlIGZvciB0aGUgY2FzZXMgb2Ygc21hbGwgcGFja2V0
cy4gSSBoYXZlIGRvbmUgbW9yZSBwZXJmb3JtYW5jZQo+IGJlbmNobWFyayB3aXRoIHNtYWxsIHBh
Y2tldHMgc2luY2UgdGhlbi4gSGVyZSBpcyBhIGxpc3Qgb2YgaXBlcmYKPiBvdXRwdXQsCgpDb3Vs
ZCB5b3Ugc2hvdyB0aGUgY29tbW5hZCBsaW5lPwoKVGhhbmtzCgoKPgo+IFdpdGggUFAgYW5kIFBQ
IGZyYWdtZW50aW5nOgo+IDI1Nks6ICAgWyAgNV0gNTA1LjAwLTUxMC4wMCBzZWMgIDEuMzQgR0J5
dGVzICAyLjMxIEdiaXRzL3NlYyAgICAwICAgIDE0NCBLQnl0ZXMKPiAxSzogICAgICAgWyAgNV0g
IDMwLjAwLTM1LjAwICBzZWMgIDQuNjMgR0J5dGVzICA3Ljk1IEdiaXRzL3NlYyAgICAwCj4gMjIz
IEtCeXRlcwo+IDJLOiAgICAgICBbICA1XSAgNjUuMDAtNzAuMDAgIHNlYyAgOC4zMyBHQnl0ZXMg
IDE0LjMgR2JpdHMvc2VjICAgIDAKPiAzMjQgS0J5dGVzCj4gNEs6ICAgICAgIFsgIDVdICAzMC4w
MC0zNS4wMCAgc2VjICAxMy4zIEdCeXRlcyAgMjIuOCBHYml0cy9zZWMgICAgMAo+IDEuMDggTUJ5
dGVzCj4gOEs6ICAgICAgIFsgIDVdICA1MC4wMC01NS4wMCAgc2VjICAxOC45IEdCeXRlcyAgMzIu
NCBHYml0cy9zZWMgICAgMAo+IDc0NCBLQnl0ZXMKPiAxNks6ICAgICBbICA1XSAgMjUuMDAtMzAu
MDAgIHNlYyAgMjQuNiBHQnl0ZXMgIDQyLjMgR2JpdHMvc2VjICAgIDAgICAgOTYzIEtCeXRlcwo+
IDMySzogICAgIFsgIDVdICA0NS4wMC01MC4wMCAgc2VjICAyOS44IEdCeXRlcyAgNTEuMiBHYml0
cy9zZWMgICAgMCAgIDEuMjUgTUJ5dGVzCj4gNjRLOiAgICAgWyAgNV0gIDM1LjAwLTQwLjAwICBz
ZWMgIDM0LjAgR0J5dGVzICA1OC40IEdiaXRzL3NlYyAgICAwICAgMS43MCBNQnl0ZXMKPiAxMjhL
OiAgIFsgIDVdICA0NS4wMC01MC4wMCAgc2VjICAzNi43IEdCeXRlcyAgNjMuMSBHYml0cy9zZWMg
ICAgMCAgIDQuMjYgTUJ5dGVzCj4gMjU2SzogICBbICA1XSAgMzAuMDAtMzUuMDAgIHNlYyAgNDAu
MCBHQnl0ZXMgIDY4LjggR2JpdHMvc2VjICAgIDAgICAzLjIwIE1CeXRlcwo+Cj4gV2l0aG91dCBQ
UDoKPiAyNTY6ICAgICBbICA1XSA2ODAuMDAtNjg1LjAwIHNlYyAgMS41NyBHQnl0ZXMgIDIuNjkg
R2JpdHMvc2VjICAgIDAgICAgMzU5IEtCeXRlcwo+IDFLOiAgICAgIFsgIDVdICA3NS4wMC04MC4w
MCAgc2VjICA1LjQ3IEdCeXRlcyAgOS40MCBHYml0cy9zZWMgICAgMCAgICA3MzAgS0J5dGVzCj4g
Mks6ICAgICAgWyAgNV0gIDY1LjAwLTcwLjAwICBzZWMgIDkuNDYgR0J5dGVzICAxNi4yIEdiaXRz
L3NlYyAgICAwICAgMS45OSBNQnl0ZXMKPiA0SzogICAgICBbICA1XSAgMzAuMDAtMzUuMDAgIHNl
YyAgMTQuNSBHQnl0ZXMgIDI1LjAgR2JpdHMvc2VjICAgIDAgICAxLjIwIE1CeXRlcwo+IDhLOiAg
ICAgIFsgIDVdICA0NS4wMC01MC4wMCAgc2VjICAxOS45IEdCeXRlcyAgMzQuMSBHYml0cy9zZWMg
ICAgMCAgIDEuNzIgTUJ5dGVzCj4gMTZLOiAgICBbICA1XSAgIDUuMDAtMTAuMDAgIHNlYyAgMjMu
OCBHQnl0ZXMgIDQwLjkgR2JpdHMvc2VjICAgIDAgICAyLjkwIE1CeXRlcwo+IDMySzogICAgWyAg
NV0gIDE1LjAwLTIwLjAwICBzZWMgIDI4LjAgR0J5dGVzICA0OC4xIEdiaXRzL3NlYyAgICAwICAg
My4wMyBNQnl0ZXMKPiA2NEs6ICAgIFsgIDVdICA2MC4wMC02NS4wMCAgc2VjICAzMS44IEdCeXRl
cyAgNTQuNiBHYml0cy9zZWMgICAgMCAgIDMuMDUgTUJ5dGVzCj4gMTI4SzogIFsgIDVdICA0NS4w
MC01MC4wMCAgc2VjICAzMy4wIEdCeXRlcyAgNTYuNiBHYml0cy9zZWMgICAgMSAgIDMuMDMgTUJ5
dGVzCj4gMjU2SzogIFsgIDVdICAyNS4wMC0zMC4wMCAgc2VjICAzNC43IEdCeXRlcyAgNTkuNiBH
Yml0cy9zZWMgICAgMCAgIDMuMTEgTUJ5dGVzCj4KPgo+IFRoZSBtYWpvciBmYWN0b3IgY29udHJp
YnV0aW5nIHRvIHRoZSBwZXJmb3JtYW5jZSBkcm9wIGlzIHRoZSByZWR1Y3Rpb24KPiBvZiBza2Ig
Y29hbGVzY2luZy4gQWRkaXRpb25hbGx5LCB3aXRob3V0IHRoZSBwYWdlIHBvb2wsIHNtYWxsIHBh
Y2tldHMKPiBjYW4gc3RpbGwgYmVuZWZpdCBmcm9tIHRoZSBhbGxvY2F0aW9uIG9mIDggY29udGlu
dW91cyBwYWdlcyBieQo+IGJyZWFraW5nIHRoZW0gZG93biBpbnRvIHNtYWxsZXIgcGllY2VzLiBU
aGlzIGVmZmVjdGl2ZWx5IHJlZHVjZXMgdGhlCj4gZnJlcXVlbmN5IG9mIHBhZ2UgYWxsb2NhdGlv
biBmcm9tIHRoZSBidWRkeSBzeXN0ZW0uIEZvciBpbnN0YW5jZSwgdGhlCj4gYXJyaXZhbCBvZiAz
MiAxSyBwYWNrZXRzIG9ubHkgdHJpZ2dlcnMgb25lIGFsbG9jX3BhZ2UgY2FsbC4gVGhlcmVmb3Jl
LAo+IHRoZSBiZW5lZml0cyBvZiB1c2luZyBhIHBhZ2UgcG9vbCBhcmUgbGltaXRlZCBpbiBzdWNo
IGNhc2VzLiBJbiBmYWN0LAo+IHdpdGhvdXQgcGFnZSBwb29sIGZyYWdtZW50aW5nIGVuYWJsZWQs
IGl0IGNhbiBldmVuIGhpbmRlciBwZXJmb3JtYW5jZQo+IGZyb20gdGhpcyBwZXJzcGVjdGl2ZS4K
Pgo+IFVwb24gZnVydGhlciBjb25zaWRlcmF0aW9uLCBJIHRlbmQgdG8gYmVsaWV2ZSBtYWtpbmcg
cGFnZSBwb29sIHRoZQo+IGRlZmF1bHQgb3B0aW9uIG1heSBub3QgYmUgYXBwcm9wcmlhdGUuIEFz
IHlvdSBwb2ludGVkIG91dCwgd2UgY2Fubm90Cj4gc2ltcGx5IGlnbm9yZSB0aGUgcGVyZm9ybWFu
Y2UgaW1wYWN0IG9uIHNtYWxsIHBhY2tldHMuIEFueSBjb21tZW50cyBvbgo+IHRoaXMgd2lsbCBi
ZSBtdWNoIGFwcHJlY2lhdGVkLgo+Cj4KPiBUaGFua3MsCj4gTGlhbmcKPgo+Cj4gPiA+ID4gVGhl
IHVzYWdlIG9mIHBhZ2UgcG9vbCBmb3IgYmlnIG1vZGUgaXMgYmVpbmcgZXZhbHVhdGVkIG5vdy4g
VGhhbmtzIQo+ID4gPiA+Cj4gPiA+ID4gPiA+IC0tLQo+ID4gPiA+ID4gPiAgZHJpdmVycy9uZXQv
dmlydGlvX25ldC5jIHwgMTg4ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0t
LQo+ID4gPiA+ID4gPiAgMSBmaWxlIGNoYW5nZWQsIDE0NiBpbnNlcnRpb25zKCspLCA0MiBkZWxl
dGlvbnMoLSkKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0
L3ZpcnRpb19uZXQuYyBiL2RyaXZlcnMvbmV0L3ZpcnRpb19uZXQuYwo+ID4gPiA+ID4gPiBpbmRl
eCBjNWRjYTBkOTJlNjQuLjk5YzBjYTBjMTc4MSAxMDA2NDQKPiA+ID4gPiA+ID4gLS0tIGEvZHJp
dmVycy9uZXQvdmlydGlvX25ldC5jCj4gPiA+ID4gPiA+ICsrKyBiL2RyaXZlcnMvbmV0L3ZpcnRp
b19uZXQuYwo+ID4gPiA+ID4gPiBAQCAtMzEsNiArMzEsOSBAQCBtb2R1bGVfcGFyYW0oY3N1bSwg
Ym9vbCwgMDQ0NCk7Cj4gPiA+ID4gPiA+ICBtb2R1bGVfcGFyYW0oZ3NvLCBib29sLCAwNDQ0KTsK
PiA+ID4gPiA+ID4gIG1vZHVsZV9wYXJhbShuYXBpX3R4LCBib29sLCAwNjQ0KTsKPiA+ID4gPiA+
ID4KPiA+ID4gPiA+ID4gK3N0YXRpYyBib29sIHBhZ2VfcG9vbF9lbmFibGVkOwo+ID4gPiA+ID4g
PiArbW9kdWxlX3BhcmFtKHBhZ2VfcG9vbF9lbmFibGVkLCBib29sLCAwNDAwKTsKPiA+ID4gPiA+
ID4gKwo+ID4gPiA+ID4gPiAgLyogRklYTUU6IE1UVSBpbiBjb25maWcuICovCj4gPiA+ID4gPiA+
ICAjZGVmaW5lIEdPT0RfUEFDS0VUX0xFTiAoRVRIX0hMRU4gKyBWTEFOX0hMRU4gKyBFVEhfREFU
QV9MRU4pCj4gPiA+ID4gPiA+ICAjZGVmaW5lIEdPT0RfQ09QWV9MRU4gICAgICAgIDEyOAo+ID4g
PiA+ID4gPiBAQCAtMTU5LDYgKzE2Miw5IEBAIHN0cnVjdCByZWNlaXZlX3F1ZXVlIHsKPiA+ID4g
PiA+ID4gICAgICAgLyogQ2hhaW4gcGFnZXMgYnkgdGhlIHByaXZhdGUgcHRyLiAqLwo+ID4gPiA+
ID4gPiAgICAgICBzdHJ1Y3QgcGFnZSAqcGFnZXM7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICsg
ICAgIC8qIFBhZ2UgcG9vbCAqLwo+ID4gPiA+ID4gPiArICAgICBzdHJ1Y3QgcGFnZV9wb29sICpw
YWdlX3Bvb2w7Cj4gPiA+ID4gPiA+ICsKPiA+ID4gPiA+ID4gICAgICAgLyogQXZlcmFnZSBwYWNr
ZXQgbGVuZ3RoIGZvciBtZXJnZWFibGUgcmVjZWl2ZSBidWZmZXJzLiAqLwo+ID4gPiA+ID4gPiAg
ICAgICBzdHJ1Y3QgZXdtYV9wa3RfbGVuIG1yZ19hdmdfcGt0X2xlbjsKPiA+ID4gPiA+ID4KPiA+
ID4gPiA+ID4gQEAgLTQ1OSw2ICs0NjUsMTQgQEAgc3RhdGljIHN0cnVjdCBza19idWZmICp2aXJ0
bmV0X2J1aWxkX3NrYih2b2lkICpidWYsIHVuc2lnbmVkIGludCBidWZsZW4sCj4gPiA+ID4gPiA+
ICAgICAgIHJldHVybiBza2I7Cj4gPiA+ID4gPiA+ICB9Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+
ICtzdGF0aWMgdm9pZCB2aXJ0bmV0X3B1dF9wYWdlKHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwg
c3RydWN0IHBhZ2UgKnBhZ2UpCj4gPiA+ID4gPiA+ICt7Cj4gPiA+ID4gPiA+ICsgICAgIGlmIChy
cS0+cGFnZV9wb29sKQo+ID4gPiA+ID4gPiArICAgICAgICAgICAgIHBhZ2VfcG9vbF9wdXRfZnVs
bF9wYWdlKHJxLT5wYWdlX3Bvb2wsIHBhZ2UsIHRydWUpOwo+ID4gPiA+ID4gPiArICAgICBlbHNl
Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgcHV0X3BhZ2UocGFnZSk7Cj4gPiA+ID4gPiA+ICt9
Cj4gPiA+ID4gPiA+ICsKPiA+ID4gPiA+ID4gIC8qIENhbGxlZCBmcm9tIGJvdHRvbSBoYWxmIGNv
bnRleHQgKi8KPiA+ID4gPiA+ID4gIHN0YXRpYyBzdHJ1Y3Qgc2tfYnVmZiAqcGFnZV90b19za2Io
c3RydWN0IHZpcnRuZXRfaW5mbyAqdmksCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwKPiA+ID4gPiA+ID4gQEAgLTU1
NSw3ICs1NjksNyBAQCBzdGF0aWMgc3RydWN0IHNrX2J1ZmYgKnBhZ2VfdG9fc2tiKHN0cnVjdCB2
aXJ0bmV0X2luZm8gKnZpLAo+ID4gPiA+ID4gPiAgICAgICBoZHIgPSBza2Jfdm5ldF9oZHIoc2ti
KTsKPiA+ID4gPiA+ID4gICAgICAgbWVtY3B5KGhkciwgaGRyX3AsIGhkcl9sZW4pOwo+ID4gPiA+
ID4gPiAgICAgICBpZiAocGFnZV90b19mcmVlKQo+ID4gPiA+ID4gPiAtICAgICAgICAgICAgIHB1
dF9wYWdlKHBhZ2VfdG9fZnJlZSk7Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgdmlydG5ldF9w
dXRfcGFnZShycSwgcGFnZV90b19mcmVlKTsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAg
cmV0dXJuIHNrYjsKPiA+ID4gPiA+ID4gIH0KPiA+ID4gPiA+ID4gQEAgLTgwMiw3ICs4MTYsNyBA
QCBzdGF0aWMgaW50IHZpcnRuZXRfeGRwX3htaXQoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiA+
ID4gPiA+ID4gICAgICAgcmV0dXJuIHJldDsKPiA+ID4gPiA+ID4gIH0KPiA+ID4gPiA+ID4KPiA+
ID4gPiA+ID4gLXN0YXRpYyB2b2lkIHB1dF94ZHBfZnJhZ3Moc3RydWN0IHhkcF9idWZmICp4ZHAp
Cj4gPiA+ID4gPiA+ICtzdGF0aWMgdm9pZCBwdXRfeGRwX2ZyYWdzKHN0cnVjdCB4ZHBfYnVmZiAq
eGRwLCBzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEpCj4gPiA+ID4gPiA+ICB7Cj4gPiA+ID4gPiA+
ICAgICAgIHN0cnVjdCBza2Jfc2hhcmVkX2luZm8gKnNoaW5mbzsKPiA+ID4gPiA+ID4gICAgICAg
c3RydWN0IHBhZ2UgKnhkcF9wYWdlOwo+ID4gPiA+ID4gPiBAQCAtODEyLDcgKzgyNiw3IEBAIHN0
YXRpYyB2b2lkIHB1dF94ZHBfZnJhZ3Moc3RydWN0IHhkcF9idWZmICp4ZHApCj4gPiA+ID4gPiA+
ICAgICAgICAgICAgICAgc2hpbmZvID0geGRwX2dldF9zaGFyZWRfaW5mb19mcm9tX2J1ZmYoeGRw
KTsKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2hpbmZvLT5ucl9m
cmFnczsgaSsrKSB7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICB4ZHBfcGFnZSA9
IHNrYl9mcmFnX3BhZ2UoJnNoaW5mby0+ZnJhZ3NbaV0pOwo+ID4gPiA+ID4gPiAtICAgICAgICAg
ICAgICAgICAgICAgcHV0X3BhZ2UoeGRwX3BhZ2UpOwo+ID4gPiA+ID4gPiArICAgICAgICAgICAg
ICAgICAgICAgdmlydG5ldF9wdXRfcGFnZShycSwgeGRwX3BhZ2UpOwo+ID4gPiA+ID4gPiAgICAg
ICAgICAgICAgIH0KPiA+ID4gPiA+ID4gICAgICAgfQo+ID4gPiA+ID4gPiAgfQo+ID4gPiA+ID4g
PiBAQCAtOTAzLDcgKzkxNywxMSBAQCBzdGF0aWMgc3RydWN0IHBhZ2UgKnhkcF9saW5lYXJpemVf
cGFnZShzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEsCj4gPiA+ID4gPiA+ICAgICAgIGlmIChwYWdl
X29mZiArICpsZW4gKyB0YWlscm9vbSA+IFBBR0VfU0laRSkKPiA+ID4gPiA+ID4gICAgICAgICAg
ICAgICByZXR1cm4gTlVMTDsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gLSAgICAgcGFnZSA9IGFs
bG9jX3BhZ2UoR0ZQX0FUT01JQyk7Cj4gPiA+ID4gPiA+ICsgICAgIGlmIChycS0+cGFnZV9wb29s
KQo+ID4gPiA+ID4gPiArICAgICAgICAgICAgIHBhZ2UgPSBwYWdlX3Bvb2xfZGV2X2FsbG9jX3Bh
Z2VzKHJxLT5wYWdlX3Bvb2wpOwo+ID4gPiA+ID4gPiArICAgICBlbHNlCj4gPiA+ID4gPiA+ICsg
ICAgICAgICAgICAgcGFnZSA9IGFsbG9jX3BhZ2UoR0ZQX0FUT01JQyk7Cj4gPiA+ID4gPiA+ICsK
PiA+ID4gPiA+ID4gICAgICAgaWYgKCFwYWdlKQo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgIHJl
dHVybiBOVUxMOwo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiBAQCAtOTI2LDIxICs5NDQsMjQgQEAg
c3RhdGljIHN0cnVjdCBwYWdlICp4ZHBfbGluZWFyaXplX3BhZ2Uoc3RydWN0IHJlY2VpdmVfcXVl
dWUgKnJxLAo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAqIGlzIHNlbmRpbmcgcGFja2V0IGxh
cmdlciB0aGFuIHRoZSBNVFUuCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICovCj4gPiA+ID4g
PiA+ICAgICAgICAgICAgICAgaWYgKChwYWdlX29mZiArIGJ1ZmxlbiArIHRhaWxyb29tKSA+IFBB
R0VfU0laRSkgewo+ID4gPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgcHV0X3BhZ2UocCk7
Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICB2aXJ0bmV0X3B1dF9wYWdlKHJxLCBw
KTsKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyX2J1ZjsKPiA+ID4g
PiA+ID4gICAgICAgICAgICAgICB9Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICAgICAgICAgICAg
ICAgbWVtY3B5KHBhZ2VfYWRkcmVzcyhwYWdlKSArIHBhZ2Vfb2ZmLAo+ID4gPiA+ID4gPiAgICAg
ICAgICAgICAgICAgICAgICBwYWdlX2FkZHJlc3MocCkgKyBvZmYsIGJ1Zmxlbik7Cj4gPiA+ID4g
PiA+ICAgICAgICAgICAgICAgcGFnZV9vZmYgKz0gYnVmbGVuOwo+ID4gPiA+ID4gPiAtICAgICAg
ICAgICAgIHB1dF9wYWdlKHApOwo+ID4gPiA+ID4gPiArICAgICAgICAgICAgIHZpcnRuZXRfcHV0
X3BhZ2UocnEsIHApOwo+ID4gPiA+ID4gPiAgICAgICB9Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+
ICAgICAgIC8qIEhlYWRyb29tIGRvZXMgbm90IGNvbnRyaWJ1dGUgdG8gcGFja2V0IGxlbmd0aCAq
Lwo+ID4gPiA+ID4gPiAgICAgICAqbGVuID0gcGFnZV9vZmYgLSBWSVJUSU9fWERQX0hFQURST09N
Owo+ID4gPiA+ID4gPiAgICAgICByZXR1cm4gcGFnZTsKPiA+ID4gPiA+ID4gIGVycl9idWY6Cj4g
PiA+ID4gPiA+IC0gICAgIF9fZnJlZV9wYWdlcyhwYWdlLCAwKTsKPiA+ID4gPiA+ID4gKyAgICAg
aWYgKHJxLT5wYWdlX3Bvb2wpCj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgcGFnZV9wb29sX3B1
dF9mdWxsX3BhZ2UocnEtPnBhZ2VfcG9vbCwgcGFnZSwgdHJ1ZSk7Cj4gPiA+ID4gPiA+ICsgICAg
IGVsc2UKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBfX2ZyZWVfcGFnZXMocGFnZSwgMCk7Cj4g
PiA+ID4gPiA+ICAgICAgIHJldHVybiBOVUxMOwo+ID4gPiA+ID4gPiAgfQo+ID4gPiA+ID4gPgo+
ID4gPiA+ID4gPiBAQCAtMTE0NCw3ICsxMTY1LDcgQEAgc3RhdGljIHZvaWQgbWVyZ2VhYmxlX2J1
Zl9mcmVlKHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwgaW50IG51bV9idWYsCj4gPiA+ID4gPiA+
ICAgICAgICAgICAgICAgfQo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgIHN0YXRzLT5ieXRlcyAr
PSBsZW47Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgcGFnZSA9IHZpcnRfdG9faGVhZF9wYWdl
KGJ1Zik7Cj4gPiA+ID4gPiA+IC0gICAgICAgICAgICAgcHV0X3BhZ2UocGFnZSk7Cj4gPiA+ID4g
PiA+ICsgICAgICAgICAgICAgdmlydG5ldF9wdXRfcGFnZShycSwgcGFnZSk7Cj4gPiA+ID4gPiA+
ICAgICAgIH0KPiA+ID4gPiA+ID4gIH0KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gQEAgLTEyNjQs
NyArMTI4NSw3IEBAIHN0YXRpYyBpbnQgdmlydG5ldF9idWlsZF94ZHBfYnVmZl9tcmcoc3RydWN0
IG5ldF9kZXZpY2UgKmRldiwKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICBjdXJfZnJhZ19zaXpl
ID0gdHJ1ZXNpemU7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgeGRwX2ZyYWdzX3RydWVzeiAr
PSBjdXJfZnJhZ19zaXplOwo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgIGlmICh1bmxpa2VseShs
ZW4gPiB0cnVlc2l6ZSAtIHJvb20gfHwgY3VyX2ZyYWdfc2l6ZSA+IFBBR0VfU0laRSkpIHsKPiA+
ID4gPiA+ID4gLSAgICAgICAgICAgICAgICAgICAgIHB1dF9wYWdlKHBhZ2UpOwo+ID4gPiA+ID4g
PiArICAgICAgICAgICAgICAgICAgICAgdmlydG5ldF9wdXRfcGFnZShycSwgcGFnZSk7Cj4gPiA+
ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICBwcl9kZWJ1ZygiJXM6IHJ4IGVycm9yOiBsZW4g
JXUgZXhjZWVkcyB0cnVlc2l6ZSAlbHVcbiIsCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBkZXYtPm5hbWUsIGxlbiwgKHVuc2lnbmVkIGxvbmcpKHRydWVzaXplIC0g
cm9vbSkpOwo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgZGV2LT5zdGF0cy5yeF9s
ZW5ndGhfZXJyb3JzKys7Cj4gPiA+ID4gPiA+IEBAIC0xMjgzLDcgKzEzMDQsNyBAQCBzdGF0aWMg
aW50IHZpcnRuZXRfYnVpbGRfeGRwX2J1ZmZfbXJnKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4g
PiA+ID4gPiA+ICAgICAgIHJldHVybiAwOwo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiAgZXJyOgo+
ID4gPiA+ID4gPiAtICAgICBwdXRfeGRwX2ZyYWdzKHhkcCk7Cj4gPiA+ID4gPiA+ICsgICAgIHB1
dF94ZHBfZnJhZ3MoeGRwLCBycSk7Cj4gPiA+ID4gPiA+ICAgICAgIHJldHVybiAtRUlOVkFMOwo+
ID4gPiA+ID4gPiAgfQo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiBAQCAtMTM0NCw3ICsxMzY1LDEw
IEBAIHN0YXRpYyB2b2lkICptZXJnZWFibGVfeGRwX2dldF9idWYoc3RydWN0IHZpcnRuZXRfaW5m
byAqdmksCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgaWYgKCpsZW4gKyB4ZHBfcm9vbSA+IFBB
R0VfU0laRSkKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOVUxMOwo+
ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiAtICAgICAgICAgICAgIHhkcF9wYWdlID0gYWxsb2NfcGFn
ZShHRlBfQVRPTUlDKTsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBpZiAocnEtPnBhZ2VfcG9v
bCkKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgIHhkcF9wYWdlID0gcGFnZV9wb29s
X2Rldl9hbGxvY19wYWdlcyhycS0+cGFnZV9wb29sKTsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAg
ICBlbHNlCj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICB4ZHBfcGFnZSA9IGFsbG9j
X3BhZ2UoR0ZQX0FUT01JQyk7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgaWYgKCF4ZHBfcGFn
ZSkKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOVUxMOwo+ID4gPiA+
ID4gPgo+ID4gPiA+ID4gPiBAQCAtMTM1NCw3ICsxMzc4LDcgQEAgc3RhdGljIHZvaWQgKm1lcmdl
YWJsZV94ZHBfZ2V0X2J1ZihzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwKPiA+ID4gPiA+ID4KPiA+
ID4gPiA+ID4gICAgICAgKmZyYW1lX3N6ID0gUEFHRV9TSVpFOwo+ID4gPiA+ID4gPgo+ID4gPiA+
ID4gPiAtICAgICBwdXRfcGFnZSgqcGFnZSk7Cj4gPiA+ID4gPiA+ICsgICAgIHZpcnRuZXRfcHV0
X3BhZ2UocnEsICpwYWdlKTsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAgKnBhZ2UgPSB4
ZHBfcGFnZTsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gQEAgLTE0MDAsNiArMTQyNCw4IEBAIHN0
YXRpYyBzdHJ1Y3Qgc2tfYnVmZiAqcmVjZWl2ZV9tZXJnZWFibGVfeGRwKHN0cnVjdCBuZXRfZGV2
aWNlICpkZXYsCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgaGVhZF9za2IgPSBidWlsZF9za2Jf
ZnJvbV94ZHBfYnVmZihkZXYsIHZpLCAmeGRwLCB4ZHBfZnJhZ3NfdHJ1ZXN6KTsKPiA+ID4gPiA+
ID4gICAgICAgICAgICAgICBpZiAodW5saWtlbHkoIWhlYWRfc2tiKSkKPiA+ID4gPiA+ID4gICAg
ICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ID4gPiA+ID4gPiArICAgICAgICAgICAgIGlmIChy
cS0+cGFnZV9wb29sKQo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgc2tiX21hcmtf
Zm9yX3JlY3ljbGUoaGVhZF9za2IpOwo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgIHJldHVybiBo
ZWFkX3NrYjsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAgY2FzZSBYRFBfVFg6Cj4gPiA+
ID4gPiA+IEBAIC0xNDEwLDEwICsxNDM2LDEwIEBAIHN0YXRpYyBzdHJ1Y3Qgc2tfYnVmZiAqcmVj
ZWl2ZV9tZXJnZWFibGVfeGRwKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4gPiA+ID4gPiA+ICAg
ICAgICAgICAgICAgYnJlYWs7Cj4gPiA+ID4gPiA+ICAgICAgIH0KPiA+ID4gPiA+ID4KPiA+ID4g
PiA+ID4gLSAgICAgcHV0X3hkcF9mcmFncygmeGRwKTsKPiA+ID4gPiA+ID4gKyAgICAgcHV0X3hk
cF9mcmFncygmeGRwLCBycSk7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICBlcnJfeGRwOgo+ID4g
PiA+ID4gPiAtICAgICBwdXRfcGFnZShwYWdlKTsKPiA+ID4gPiA+ID4gKyAgICAgdmlydG5ldF9w
dXRfcGFnZShycSwgcGFnZSk7Cj4gPiA+ID4gPiA+ICAgICAgIG1lcmdlYWJsZV9idWZfZnJlZShy
cSwgbnVtX2J1ZiwgZGV2LCBzdGF0cyk7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICAgICAgIHN0
YXRzLT54ZHBfZHJvcHMrKzsKPiA+ID4gPiA+ID4gQEAgLTE0NjcsNiArMTQ5Myw5IEBAIHN0YXRp
YyBzdHJ1Y3Qgc2tfYnVmZiAqcmVjZWl2ZV9tZXJnZWFibGUoc3RydWN0IG5ldF9kZXZpY2UgKmRl
diwKPiA+ID4gPiA+ID4gICAgICAgaGVhZF9za2IgPSBwYWdlX3RvX3NrYih2aSwgcnEsIHBhZ2Us
IG9mZnNldCwgbGVuLCB0cnVlc2l6ZSwgaGVhZHJvb20pOwo+ID4gPiA+ID4gPiAgICAgICBjdXJy
X3NrYiA9IGhlYWRfc2tiOwo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiArICAgICBpZiAocnEtPnBh
Z2VfcG9vbCkKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBza2JfbWFya19mb3JfcmVjeWNsZShj
dXJyX3NrYik7Cj4gPiA+ID4gPiA+ICsKPiA+ID4gPiA+ID4gICAgICAgaWYgKHVubGlrZWx5KCFj
dXJyX3NrYikpCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgZ290byBlcnJfc2tiOwo+ID4gPiA+
ID4gPiAgICAgICB3aGlsZSAoLS1udW1fYnVmKSB7Cj4gPiA+ID4gPiA+IEBAIC0xNTA5LDYgKzE1
MzgsOCBAQCBzdGF0aWMgc3RydWN0IHNrX2J1ZmYgKnJlY2VpdmVfbWVyZ2VhYmxlKHN0cnVjdCBu
ZXRfZGV2aWNlICpkZXYsCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICBjdXJyX3Nr
YiA9IG5za2I7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICBoZWFkX3NrYi0+dHJ1
ZXNpemUgKz0gbnNrYi0+dHJ1ZXNpemU7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAg
ICBudW1fc2tiX2ZyYWdzID0gMDsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgIGlm
IChycS0+cGFnZV9wb29sKQo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBza2JfbWFya19mb3JfcmVjeWNsZShjdXJyX3NrYik7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAg
ICAgfQo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgIGlmIChjdXJyX3NrYiAhPSBoZWFkX3NrYikg
ewo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgaGVhZF9za2ItPmRhdGFfbGVuICs9
IGxlbjsKPiA+ID4gPiA+ID4gQEAgLTE1MTcsNyArMTU0OCw3IEBAIHN0YXRpYyBzdHJ1Y3Qgc2tf
YnVmZiAqcmVjZWl2ZV9tZXJnZWFibGUoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiA+ID4gPiA+
ID4gICAgICAgICAgICAgICB9Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgb2Zmc2V0ID0gYnVm
IC0gcGFnZV9hZGRyZXNzKHBhZ2UpOwo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgIGlmIChza2Jf
Y2FuX2NvYWxlc2NlKGN1cnJfc2tiLCBudW1fc2tiX2ZyYWdzLCBwYWdlLCBvZmZzZXQpKSB7Cj4g
PiA+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICBwdXRfcGFnZShwYWdlKTsKPiA+ID4gPiA+
ID4gKyAgICAgICAgICAgICAgICAgICAgIHZpcnRuZXRfcHV0X3BhZ2UocnEsIHBhZ2UpOwo+ID4g
PiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgc2tiX2NvYWxlc2NlX3J4X2ZyYWcoY3Vycl9z
a2IsIG51bV9za2JfZnJhZ3MgLSAxLAo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgbGVuLCB0cnVlc2l6ZSk7Cj4gPiA+ID4gPiA+ICAgICAgICAg
ICAgICAgfSBlbHNlIHsKPiA+ID4gPiA+ID4gQEAgLTE1MzAsNyArMTU2MSw3IEBAIHN0YXRpYyBz
dHJ1Y3Qgc2tfYnVmZiAqcmVjZWl2ZV9tZXJnZWFibGUoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwK
PiA+ID4gPiA+ID4gICAgICAgcmV0dXJuIGhlYWRfc2tiOwo+ID4gPiA+ID4gPgo+ID4gPiA+ID4g
PiAgZXJyX3NrYjoKPiA+ID4gPiA+ID4gLSAgICAgcHV0X3BhZ2UocGFnZSk7Cj4gPiA+ID4gPiA+
ICsgICAgIHZpcnRuZXRfcHV0X3BhZ2UocnEsIHBhZ2UpOwo+ID4gPiA+ID4gPiAgICAgICBtZXJn
ZWFibGVfYnVmX2ZyZWUocnEsIG51bV9idWYsIGRldiwgc3RhdHMpOwo+ID4gPiA+ID4gPgo+ID4g
PiA+ID4gPiAgZXJyX2J1ZjoKPiA+ID4gPiA+ID4gQEAgLTE3MzcsMzEgKzE3NjgsNDAgQEAgc3Rh
dGljIGludCBhZGRfcmVjdmJ1Zl9tZXJnZWFibGUoc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksCj4g
PiA+ID4gPiA+ICAgICAgICAqIGRpc2FibGVkIEdTTyBmb3IgWERQLCBpdCB3b24ndCBiZSBhIGJp
ZyBpc3N1ZS4KPiA+ID4gPiA+ID4gICAgICAgICovCj4gPiA+ID4gPiA+ICAgICAgIGxlbiA9IGdl
dF9tZXJnZWFibGVfYnVmX2xlbihycSwgJnJxLT5tcmdfYXZnX3BrdF9sZW4sIHJvb20pOwo+ID4g
PiA+ID4gPiAtICAgICBpZiAodW5saWtlbHkoIXNrYl9wYWdlX2ZyYWdfcmVmaWxsKGxlbiArIHJv
b20sIGFsbG9jX2ZyYWcsIGdmcCkpKQo+ID4gPiA+ID4gPiAtICAgICAgICAgICAgIHJldHVybiAt
RU5PTUVNOwo+ID4gPiA+ID4gPiArICAgICBpZiAocnEtPnBhZ2VfcG9vbCkgewo+ID4gPiA+ID4g
PiArICAgICAgICAgICAgIHN0cnVjdCBwYWdlICpwYWdlOwo+ID4gPiA+ID4gPgo+ID4gPiA+ID4g
PiAtICAgICBidWYgPSAoY2hhciAqKXBhZ2VfYWRkcmVzcyhhbGxvY19mcmFnLT5wYWdlKSArIGFs
bG9jX2ZyYWctPm9mZnNldDsKPiA+ID4gPiA+ID4gLSAgICAgYnVmICs9IGhlYWRyb29tOyAvKiBh
ZHZhbmNlIGFkZHJlc3MgbGVhdmluZyBob2xlIGF0IGZyb250IG9mIHBrdCAqLwo+ID4gPiA+ID4g
PiAtICAgICBnZXRfcGFnZShhbGxvY19mcmFnLT5wYWdlKTsKPiA+ID4gPiA+ID4gLSAgICAgYWxs
b2NfZnJhZy0+b2Zmc2V0ICs9IGxlbiArIHJvb207Cj4gPiA+ID4gPiA+IC0gICAgIGhvbGUgPSBh
bGxvY19mcmFnLT5zaXplIC0gYWxsb2NfZnJhZy0+b2Zmc2V0Owo+ID4gPiA+ID4gPiAtICAgICBp
ZiAoaG9sZSA8IGxlbiArIHJvb20pIHsKPiA+ID4gPiA+ID4gLSAgICAgICAgICAgICAvKiBUbyBh
dm9pZCBpbnRlcm5hbCBmcmFnbWVudGF0aW9uLCBpZiB0aGVyZSBpcyB2ZXJ5IGxpa2VseSBub3QK
PiA+ID4gPiA+ID4gLSAgICAgICAgICAgICAgKiBlbm91Z2ggc3BhY2UgZm9yIGFub3RoZXIgYnVm
ZmVyLCBhZGQgdGhlIHJlbWFpbmluZyBzcGFjZSB0bwo+ID4gPiA+ID4gPiAtICAgICAgICAgICAg
ICAqIHRoZSBjdXJyZW50IGJ1ZmZlci4KPiA+ID4gPiA+ID4gLSAgICAgICAgICAgICAgKiBYRFAg
Y29yZSBhc3N1bWVzIHRoYXQgZnJhbWVfc2l6ZSBvZiB4ZHBfYnVmZiBhbmQgdGhlIGxlbmd0aAo+
ID4gPiA+ID4gPiAtICAgICAgICAgICAgICAqIG9mIHRoZSBmcmFnIGFyZSBQQUdFX1NJWkUsIHNv
IHdlIGRpc2FibGUgdGhlIGhvbGUgbWVjaGFuaXNtLgo+ID4gPiA+ID4gPiAtICAgICAgICAgICAg
ICAqLwo+ID4gPiA+ID4gPiAtICAgICAgICAgICAgIGlmICghaGVhZHJvb20pCj4gPiA+ID4gPiA+
IC0gICAgICAgICAgICAgICAgICAgICBsZW4gKz0gaG9sZTsKPiA+ID4gPiA+ID4gLSAgICAgICAg
ICAgICBhbGxvY19mcmFnLT5vZmZzZXQgKz0gaG9sZTsKPiA+ID4gPiA+ID4gLSAgICAgfQo+ID4g
PiA+ID4gPiArICAgICAgICAgICAgIHBhZ2UgPSBwYWdlX3Bvb2xfZGV2X2FsbG9jX3BhZ2VzKHJx
LT5wYWdlX3Bvb2wpOwo+ID4gPiA+ID4gPiArICAgICAgICAgICAgIGlmICh1bmxpa2VseSghcGFn
ZSkpCj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiA+
ID4gPiA+ID4gKyAgICAgICAgICAgICBidWYgPSAoY2hhciAqKXBhZ2VfYWRkcmVzcyhwYWdlKTsK
PiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBidWYgKz0gaGVhZHJvb207IC8qIGFkdmFuY2UgYWRk
cmVzcyBsZWF2aW5nIGhvbGUgYXQgZnJvbnQgb2YgcGt0ICovCj4gPiA+ID4gPiA+ICsgICAgIH0g
ZWxzZSB7Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgaWYgKHVubGlrZWx5KCFza2JfcGFnZV9m
cmFnX3JlZmlsbChsZW4gKyByb29tLCBhbGxvY19mcmFnLCBnZnApKSkKPiA+ID4gPiA+ID4gKyAg
ICAgICAgICAgICAgICAgICAgIHJldHVybiAtRU5PTUVNOwo+ID4gPiA+ID4gPgo+ID4gPiA+ID4g
PiArICAgICAgICAgICAgIGJ1ZiA9IChjaGFyICopcGFnZV9hZGRyZXNzKGFsbG9jX2ZyYWctPnBh
Z2UpICsgYWxsb2NfZnJhZy0+b2Zmc2V0Owo+ID4gPiA+ID4gPiArICAgICAgICAgICAgIGJ1ZiAr
PSBoZWFkcm9vbTsgLyogYWR2YW5jZSBhZGRyZXNzIGxlYXZpbmcgaG9sZSBhdCBmcm9udCBvZiBw
a3QgKi8KPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBnZXRfcGFnZShhbGxvY19mcmFnLT5wYWdl
KTsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBhbGxvY19mcmFnLT5vZmZzZXQgKz0gbGVuICsg
cm9vbTsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBob2xlID0gYWxsb2NfZnJhZy0+c2l6ZSAt
IGFsbG9jX2ZyYWctPm9mZnNldDsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBpZiAoaG9sZSA8
IGxlbiArIHJvb20pIHsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgIC8qIFRvIGF2
b2lkIGludGVybmFsIGZyYWdtZW50YXRpb24sIGlmIHRoZXJlIGlzIHZlcnkgbGlrZWx5IG5vdAo+
ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICogZW5vdWdoIHNwYWNlIGZvciBhbm90
aGVyIGJ1ZmZlciwgYWRkIHRoZSByZW1haW5pbmcgc3BhY2UgdG8KPiA+ID4gPiA+ID4gKyAgICAg
ICAgICAgICAgICAgICAgICAqIHRoZSBjdXJyZW50IGJ1ZmZlci4KPiA+ID4gPiA+ID4gKyAgICAg
ICAgICAgICAgICAgICAgICAqIFhEUCBjb3JlIGFzc3VtZXMgdGhhdCBmcmFtZV9zaXplIG9mIHhk
cF9idWZmIGFuZCB0aGUgbGVuZ3RoCj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
KiBvZiB0aGUgZnJhZyBhcmUgUEFHRV9TSVpFLCBzbyB3ZSBkaXNhYmxlIHRoZSBob2xlIG1lY2hh
bmlzbS4KPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAqLwo+ID4gPiA+ID4gPiAr
ICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkcm9vbSkKPiA+ID4gPiA+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgbGVuICs9IGhvbGU7Cj4gPiA+ID4gPiA+ICsgICAgICAgICAg
ICAgICAgICAgICBhbGxvY19mcmFnLT5vZmZzZXQgKz0gaG9sZTsKPiA+ID4gPiA+ID4gKyAgICAg
ICAgICAgICB9Cj4gPiA+ID4gPiA+ICsgICAgIH0KPiA+ID4gPiA+ID4gICAgICAgc2dfaW5pdF9v
bmUocnEtPnNnLCBidWYsIGxlbik7Cj4gPiA+ID4gPiA+ICAgICAgIGN0eCA9IG1lcmdlYWJsZV9s
ZW5fdG9fY3R4KGxlbiArIHJvb20sIGhlYWRyb29tKTsKPiA+ID4gPiA+ID4gICAgICAgZXJyID0g
dmlydHF1ZXVlX2FkZF9pbmJ1Zl9jdHgocnEtPnZxLCBycS0+c2csIDEsIGJ1ZiwgY3R4LCBnZnAp
Owo+ID4gPiA+ID4gPiAgICAgICBpZiAoZXJyIDwgMCkKPiA+ID4gPiA+ID4gLSAgICAgICAgICAg
ICBwdXRfcGFnZSh2aXJ0X3RvX2hlYWRfcGFnZShidWYpKTsKPiA+ID4gPiA+ID4gKyAgICAgICAg
ICAgICB2aXJ0bmV0X3B1dF9wYWdlKHJxLCB2aXJ0X3RvX2hlYWRfcGFnZShidWYpKTsKPiA+ID4g
PiA+ID4KPiA+ID4gPiA+ID4gICAgICAgcmV0dXJuIGVycjsKPiA+ID4gPiA+ID4gIH0KPiA+ID4g
PiA+ID4gQEAgLTE5OTQsOCArMjAzNCwxNSBAQCBzdGF0aWMgaW50IHZpcnRuZXRfZW5hYmxlX3F1
ZXVlX3BhaXIoc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksIGludCBxcF9pbmRleCkKPiA+ID4gPiA+
ID4gICAgICAgaWYgKGVyciA8IDApCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgcmV0dXJuIGVy
cjsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gLSAgICAgZXJyID0geGRwX3J4cV9pbmZvX3JlZ19t
ZW1fbW9kZWwoJnZpLT5ycVtxcF9pbmRleF0ueGRwX3J4cSwKPiA+ID4gPiA+ID4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTUVNX1RZUEVfUEFHRV9TSEFSRUQsIE5VTEwp
Owo+ID4gPiA+ID4gPiArICAgICBpZiAodmktPnJxW3FwX2luZGV4XS5wYWdlX3Bvb2wpCj4gPiA+
ID4gPiA+ICsgICAgICAgICAgICAgZXJyID0geGRwX3J4cV9pbmZvX3JlZ19tZW1fbW9kZWwoJnZp
LT5ycVtxcF9pbmRleF0ueGRwX3J4cSwKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBNRU1fVFlQRV9QQUdFX1BPT0wsCj4gPiA+ID4gPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmktPnJxW3Fw
X2luZGV4XS5wYWdlX3Bvb2wpOwo+ID4gPiA+ID4gPiArICAgICBlbHNlCj4gPiA+ID4gPiA+ICsg
ICAgICAgICAgICAgZXJyID0geGRwX3J4cV9pbmZvX3JlZ19tZW1fbW9kZWwoJnZpLT5ycVtxcF9p
bmRleF0ueGRwX3J4cSwKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBNRU1fVFlQRV9QQUdFX1NIQVJFRCwKPiA+ID4gPiA+ID4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOVUxMKTsKPiA+ID4gPiA+
ID4gKwo+ID4gPiA+ID4gPiAgICAgICBpZiAoZXJyIDwgMCkKPiA+ID4gPiA+ID4gICAgICAgICAg
ICAgICBnb3RvIGVycl94ZHBfcmVnX21lbV9tb2RlbDsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4g
QEAgLTI5NTEsNiArMjk5OCw3IEBAIHN0YXRpYyB2b2lkIHZpcnRuZXRfZ2V0X3N0cmluZ3Moc3Ry
dWN0IG5ldF9kZXZpY2UgKmRldiwgdTMyIHN0cmluZ3NldCwgdTggKmRhdGEpCj4gPiA+ID4gPiA+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV0aHRvb2xfc3ByaW50ZigmcCwgInR4X3F1
ZXVlXyV1XyVzIiwgaSwKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHZpcnRuZXRfc3Ffc3RhdHNfZGVzY1tqXS5kZXNjKTsKPiA+ID4gPiA+
ID4gICAgICAgICAgICAgICB9Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgcGFnZV9wb29sX2V0
aHRvb2xfc3RhdHNfZ2V0X3N0cmluZ3MocCk7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgYnJl
YWs7Cj4gPiA+ID4gPiA+ICAgICAgIH0KPiA+ID4gPiA+ID4gIH0KPiA+ID4gPiA+ID4gQEAgLTI5
NjIsMTIgKzMwMTAsMzAgQEAgc3RhdGljIGludCB2aXJ0bmV0X2dldF9zc2V0X2NvdW50KHN0cnVj
dCBuZXRfZGV2aWNlICpkZXYsIGludCBzc2V0KQo+ID4gPiA+ID4gPiAgICAgICBzd2l0Y2ggKHNz
ZXQpIHsKPiA+ID4gPiA+ID4gICAgICAgY2FzZSBFVEhfU1NfU1RBVFM6Cj4gPiA+ID4gPiA+ICAg
ICAgICAgICAgICAgcmV0dXJuIHZpLT5jdXJyX3F1ZXVlX3BhaXJzICogKFZJUlRORVRfUlFfU1RB
VFNfTEVOICsKPiA+ID4gPiA+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgVklSVE5FVF9TUV9TVEFUU19MRU4pOwo+ID4gPiA+ID4gPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWSVJUTkVUX1NRX1NUQVRTX0xFTiArCj4g
PiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAo
cGFnZV9wb29sX2VuYWJsZWQgJiYgdmktPm1lcmdlYWJsZV9yeF9idWZzID8KPiA+ID4gPiA+ID4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlX3Bvb2xf
ZXRodG9vbF9zdGF0c19nZXRfY291bnQoKSA6IDApKTsKPiA+ID4gPiA+ID4gICAgICAgZGVmYXVs
dDoKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICByZXR1cm4gLUVPUE5PVFNVUFA7Cj4gPiA+ID4g
PiA+ICAgICAgIH0KPiA+ID4gPiA+ID4gIH0KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gK3N0YXRp
YyB2b2lkIHZpcnRuZXRfZ2V0X3BhZ2VfcG9vbF9zdGF0cyhzdHJ1Y3QgbmV0X2RldmljZSAqZGV2
LCB1NjQgKmRhdGEpCj4gPiA+ID4gPiA+ICt7Cj4gPiA+ID4gPiA+ICsjaWZkZWYgQ09ORklHX1BB
R0VfUE9PTF9TVEFUUwo+ID4gPiA+ID4gPiArICAgICBzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSA9
IG5ldGRldl9wcml2KGRldik7Cj4gPiA+ID4gPiA+ICsgICAgIHN0cnVjdCBwYWdlX3Bvb2xfc3Rh
dHMgcHBfc3RhdHMgPSB7fTsKPiA+ID4gPiA+ID4gKyAgICAgaW50IGk7Cj4gPiA+ID4gPiA+ICsK
PiA+ID4gPiA+ID4gKyAgICAgZm9yIChpID0gMDsgaSA8IHZpLT5jdXJyX3F1ZXVlX3BhaXJzOyBp
KyspIHsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBpZiAoIXZpLT5ycVtpXS5wYWdlX3Bvb2wp
Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKPiA+ID4gPiA+ID4g
KyAgICAgICAgICAgICBwYWdlX3Bvb2xfZ2V0X3N0YXRzKHZpLT5ycVtpXS5wYWdlX3Bvb2wsICZw
cF9zdGF0cyk7Cj4gPiA+ID4gPiA+ICsgICAgIH0KPiA+ID4gPiA+ID4gKyAgICAgcGFnZV9wb29s
X2V0aHRvb2xfc3RhdHNfZ2V0KGRhdGEsICZwcF9zdGF0cyk7Cj4gPiA+ID4gPiA+ICsjZW5kaWYg
LyogQ09ORklHX1BBR0VfUE9PTF9TVEFUUyAqLwo+ID4gPiA+ID4gPiArfQo+ID4gPiA+ID4gPiAr
Cj4gPiA+ID4gPiA+ICBzdGF0aWMgdm9pZCB2aXJ0bmV0X2dldF9ldGh0b29sX3N0YXRzKHN0cnVj
dCBuZXRfZGV2aWNlICpkZXYsCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN0cnVjdCBldGh0b29sX3N0YXRzICpzdGF0cywgdTY0ICpkYXRhKQo+ID4gPiA+
ID4gPiAgewo+ID4gPiA+ID4gPiBAQCAtMzAwMyw2ICszMDY5LDggQEAgc3RhdGljIHZvaWQgdmly
dG5ldF9nZXRfZXRodG9vbF9zdGF0cyhzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+ID4gPiA+ID4g
PiAgICAgICAgICAgICAgIH0gd2hpbGUgKHU2NF9zdGF0c19mZXRjaF9yZXRyeSgmc3EtPnN0YXRz
LnN5bmNwLCBzdGFydCkpOwo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgIGlkeCArPSBWSVJUTkVU
X1NRX1NUQVRTX0xFTjsKPiA+ID4gPiA+ID4gICAgICAgfQo+ID4gPiA+ID4gPiArCj4gPiA+ID4g
PiA+ICsgICAgIHZpcnRuZXRfZ2V0X3BhZ2VfcG9vbF9zdGF0cyhkZXYsICZkYXRhW2lkeF0pOwo+
ID4gPiA+ID4gPiAgfQo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiAgc3RhdGljIHZvaWQgdmlydG5l
dF9nZXRfY2hhbm5lbHMoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiA+ID4gPiA+ID4gQEAgLTM2
MjMsNiArMzY5MSw4IEBAIHN0YXRpYyB2b2lkIHZpcnRuZXRfZnJlZV9xdWV1ZXMoc3RydWN0IHZp
cnRuZXRfaW5mbyAqdmkpCj4gPiA+ID4gPiA+ICAgICAgIGZvciAoaSA9IDA7IGkgPCB2aS0+bWF4
X3F1ZXVlX3BhaXJzOyBpKyspIHsKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICBfX25ldGlmX25h
cGlfZGVsKCZ2aS0+cnFbaV0ubmFwaSk7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgX19uZXRp
Zl9uYXBpX2RlbCgmdmktPnNxW2ldLm5hcGkpOwo+ID4gPiA+ID4gPiArICAgICAgICAgICAgIGlm
ICh2aS0+cnFbaV0ucGFnZV9wb29sKQo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAg
cGFnZV9wb29sX2Rlc3Ryb3kodmktPnJxW2ldLnBhZ2VfcG9vbCk7Cj4gPiA+ID4gPiA+ICAgICAg
IH0KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAgLyogV2UgY2FsbGVkIF9fbmV0aWZfbmFw
aV9kZWwoKSwKPiA+ID4gPiA+ID4gQEAgLTM2NzksMTIgKzM3NDksMTkgQEAgc3RhdGljIHZvaWQg
dmlydG5ldF9ycV9mcmVlX3VudXNlZF9idWYoc3RydWN0IHZpcnRxdWV1ZSAqdnEsIHZvaWQgKmJ1
ZikKPiA+ID4gPiA+ID4gICAgICAgc3RydWN0IHZpcnRuZXRfaW5mbyAqdmkgPSB2cS0+dmRldi0+
cHJpdjsKPiA+ID4gPiA+ID4gICAgICAgaW50IGkgPSB2cTJyeHEodnEpOwo+ID4gPiA+ID4gPgo+
ID4gPiA+ID4gPiAtICAgICBpZiAodmktPm1lcmdlYWJsZV9yeF9idWZzKQo+ID4gPiA+ID4gPiAt
ICAgICAgICAgICAgIHB1dF9wYWdlKHZpcnRfdG9faGVhZF9wYWdlKGJ1ZikpOwo+ID4gPiA+ID4g
PiAtICAgICBlbHNlIGlmICh2aS0+YmlnX3BhY2tldHMpCj4gPiA+ID4gPiA+ICsgICAgIGlmICh2
aS0+bWVyZ2VhYmxlX3J4X2J1ZnMpIHsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBpZiAodmkt
PnJxW2ldLnBhZ2VfcG9vbCkgewo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgcGFn
ZV9wb29sX3B1dF9mdWxsX3BhZ2UodmktPnJxW2ldLnBhZ2VfcG9vbCwKPiA+ID4gPiA+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpcnRfdG9faGVhZF9w
YWdlKGJ1ZiksCj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB0cnVlKTsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICB9IGVsc2Ugewo+ID4g
PiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgcHV0X3BhZ2UodmlydF90b19oZWFkX3BhZ2Uo
YnVmKSk7Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgfQo+ID4gPiA+ID4gPiArICAgICB9IGVs
c2UgaWYgKHZpLT5iaWdfcGFja2V0cykgewo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgIGdpdmVf
cGFnZXMoJnZpLT5ycVtpXSwgYnVmKTsKPiA+ID4gPiA+ID4gLSAgICAgZWxzZQo+ID4gPiA+ID4g
PiArICAgICB9IGVsc2Ugewo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgIHB1dF9wYWdlKHZpcnRf
dG9faGVhZF9wYWdlKGJ1ZikpOwo+ID4gPiA+ID4gPiArICAgICB9Cj4gPiA+ID4gPiA+ICB9Cj4g
PiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICBzdGF0aWMgdm9pZCBmcmVlX3VudXNlZF9idWZzKHN0cnVj
dCB2aXJ0bmV0X2luZm8gKnZpKQo+ID4gPiA+ID4gPiBAQCAtMzcxOCw2ICszNzk1LDI2IEBAIHN0
YXRpYyB2b2lkIHZpcnRuZXRfZGVsX3ZxcyhzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSkKPiA+ID4g
PiA+ID4gICAgICAgdmlydG5ldF9mcmVlX3F1ZXVlcyh2aSk7Cj4gPiA+ID4gPiA+ICB9Cj4gPiA+
ID4gPiA+Cj4gPiA+ID4gPiA+ICtzdGF0aWMgdm9pZCB2aXJ0bmV0X2FsbG9jX3BhZ2VfcG9vbChz
dHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEpCj4gPiA+ID4gPiA+ICt7Cj4gPiA+ID4gPiA+ICsgICAg
IHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2ID0gcnEtPnZxLT52ZGV2Owo+ID4gPiA+ID4gPiAr
Cj4gPiA+ID4gPiA+ICsgICAgIHN0cnVjdCBwYWdlX3Bvb2xfcGFyYW1zIHBwX3BhcmFtcyA9IHsK
PiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAub3JkZXIgPSAwLAo+ID4gPiA+ID4gPiArICAgICAg
ICAgICAgIC5wb29sX3NpemUgPSBycS0+dnEtPm51bV9tYXgsCj4gPiA+ID4gPiA+ICsgICAgICAg
ICAgICAgLm5pZCA9IGRldl90b19ub2RlKHZkZXYtPmRldi5wYXJlbnQpLAo+ID4gPiA+ID4gPiAr
ICAgICAgICAgICAgIC5kZXYgPSB2ZGV2LT5kZXYucGFyZW50LAo+ID4gPiA+ID4gPiArICAgICAg
ICAgICAgIC5vZmZzZXQgPSAwLAo+ID4gPiA+ID4gPiArICAgICB9Owo+ID4gPiA+ID4gPiArCj4g
PiA+ID4gPiA+ICsgICAgIHJxLT5wYWdlX3Bvb2wgPSBwYWdlX3Bvb2xfY3JlYXRlKCZwcF9wYXJh
bXMpOwo+ID4gPiA+ID4gPiArICAgICBpZiAoSVNfRVJSKHJxLT5wYWdlX3Bvb2wpKSB7Cj4gPiA+
ID4gPiA+ICsgICAgICAgICAgICAgZGV2X3dhcm4oJnZkZXYtPmRldiwgInBhZ2UgcG9vbCBjcmVh
dGlvbiBmYWlsZWQ6ICVsZFxuIiwKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICBQ
VFJfRVJSKHJxLT5wYWdlX3Bvb2wpKTsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICBycS0+cGFn
ZV9wb29sID0gTlVMTDsKPiA+ID4gPiA+ID4gKyAgICAgfQo+ID4gPiA+ID4gPiArfQo+ID4gPiA+
ID4gPiArCj4gPiA+ID4gPiA+ICAvKiBIb3cgbGFyZ2Ugc2hvdWxkIGEgc2luZ2xlIGJ1ZmZlciBi
ZSBzbyBhIHF1ZXVlIGZ1bGwgb2YgdGhlc2UgY2FuIGZpdCBhdAo+ID4gPiA+ID4gPiAgICogbGVh
c3Qgb25lIGZ1bGwgcGFja2V0Pwo+ID4gPiA+ID4gPiAgICogTG9naWMgYmVsb3cgYXNzdW1lcyB0
aGUgbWVyZ2VhYmxlIGJ1ZmZlciBoZWFkZXIgaXMgdXNlZC4KPiA+ID4gPiA+ID4gQEAgLTM4MDEs
NiArMzg5OCwxMyBAQCBzdGF0aWMgaW50IHZpcnRuZXRfZmluZF92cXMoc3RydWN0IHZpcnRuZXRf
aW5mbyAqdmkpCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgdmktPnJxW2ldLnZxID0gdnFzW3J4
cTJ2cShpKV07Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgdmktPnJxW2ldLm1pbl9idWZfbGVu
ID0gbWVyZ2VhYmxlX21pbl9idWZfbGVuKHZpLCB2aS0+cnFbaV0udnEpOwo+ID4gPiA+ID4gPiAg
ICAgICAgICAgICAgIHZpLT5zcVtpXS52cSA9IHZxc1t0eHEydnEoaSldOwo+ID4gPiA+ID4gPiAr
Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgaWYgKHBhZ2VfcG9vbF9lbmFibGVkICYmIHZpLT5t
ZXJnZWFibGVfcnhfYnVmcykKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgIHZpcnRu
ZXRfYWxsb2NfcGFnZV9wb29sKCZ2aS0+cnFbaV0pOwo+ID4gPiA+ID4gPiArICAgICAgICAgICAg
IGVsc2UKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgIGRldl93YXJuKCZ2aS0+dmRl
di0+ZGV2LAo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInBhZ2Ug
cG9vbCBvbmx5IHN1cHBvcnQgbWVyZ2VhYmxlIG1vZGVcbiIpOwo+ID4gPiA+ID4gPiArCj4gPiA+
ID4gPiA+ICAgICAgIH0KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAgLyogcnVuIGhlcmU6
IHJldCA9PSAwLiAqLwo+ID4gPiA+ID4gPiAtLQo+ID4gPiA+ID4gPiAyLjMxLjEKPiA+ID4gPiA+
Cj4gPiA+Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClZp
cnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3Vu
ZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0
aW5mby92aXJ0dWFsaXphdGlvbg==
