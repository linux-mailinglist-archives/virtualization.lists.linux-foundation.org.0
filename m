Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp1.osuosl.org (smtp1.osuosl.org [IPv6:2605:bc80:3010::138])
	by mail.lfdr.de (Postfix) with ESMTPS id 33F59707C65
	for <lists.virtualization@lfdr.de>; Thu, 18 May 2023 10:58:45 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp1.osuosl.org (Postfix) with ESMTP id AFF1E817AF;
	Thu, 18 May 2023 08:58:43 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org AFF1E817AF
Authentication-Results: smtp1.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=MViUKSiS
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
	by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id D-4Q9bcfvFgB; Thu, 18 May 2023 08:58:42 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp1.osuosl.org (Postfix) with ESMTPS id 2755781A34;
	Thu, 18 May 2023 08:58:42 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org 2755781A34
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 4A205C007E;
	Thu, 18 May 2023 08:58:41 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp1.osuosl.org (smtp1.osuosl.org [IPv6:2605:bc80:3010::138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 4A13CC002A
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 08:58:39 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp1.osuosl.org (Postfix) with ESMTP id 24C7881551
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 08:58:39 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org 24C7881551
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
 by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 05Yq4BOgqpwc
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 08:58:38 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org F1A3E81496
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.129.124])
 by smtp1.osuosl.org (Postfix) with ESMTPS id F1A3E81496
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 08:58:37 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1684400316;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=R2zRPPOpCGxfHA7LAynyrzidiLdL2wvU7TRezMqpJsU=;
 b=MViUKSiSSQDI7ehaMclqNYBHqCwSNoGZzpurA2ijudGccyxYkN5tknt5l1jEDDSZHPY264
 nTvUE2E1B59HZ/Ri3Box9T0PnYPZGROX7RPLgFMkQXeYeeEAa1+4FUFBZTSRNXDKs8HmwN
 lmQjjmPbLwkbRnrRXMbuDXgv7EaWXJ0=
Received: from mail-lj1-f199.google.com (mail-lj1-f199.google.com
 [209.85.208.199]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-2-tcpd36NqNy24DkdEMFEO1A-1; Thu, 18 May 2023 04:57:26 -0400
X-MC-Unique: tcpd36NqNy24DkdEMFEO1A-1
Received: by mail-lj1-f199.google.com with SMTP id
 38308e7fff4ca-2ad9ee492c7so9861751fa.2
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 01:57:25 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20221208; t=1684400244; x=1686992244;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=R2zRPPOpCGxfHA7LAynyrzidiLdL2wvU7TRezMqpJsU=;
 b=W6G7zHhekN4J+LnddnoG9EPjR/fXPKhvhugNLTqWm0mB3VxsyzLsaaBxM6oNAgbIko
 7N1+SFvxHzXkyTlPFE6u8WZbqDXoH4omjQAyeKDjjjewp/dPZ2QjRYMd8akdlv5MKoab
 Ko4NzW/KlmIT0ZV4mah6Y76DmngADoR3/ClHs30uWLlLRT73GkNbvNB6c/8mFHmfh0CH
 5+9t167Khu3YztjrBflBOUn2b4zhDLWxK+IVFPAV+tlBGhu/HijP2i3aGOXZ+hoyjg97
 mMj5sAuZhIsdJ8hKwnfg9d+kEH1FrOPHjAZAbgx4Y3dZFDsDSreGutaBac2/j+yryXf0
 8teQ==
X-Gm-Message-State: AC+VfDwiHpiis3KhnhQ6e87Tg/2yCaH3xYmmgYbCRj9g+FWcbxIamQn/
 GYEAy9n86yzRbP+dqNRSMMHs+h3szTI0Lc+YolF/s3UDaxTQy4MRg0tLpvbBVJnijBeUGSxtb2e
 BJ5QS8idD3mdtfrlbv0g6//rue5JOshNTDuVH9dmq1UoCDG8CTKsXvKjMEg==
X-Received: by 2002:a2e:9496:0:b0:2a7:9884:ad53 with SMTP id
 c22-20020a2e9496000000b002a79884ad53mr9969317ljh.48.1684400244559; 
 Thu, 18 May 2023 01:57:24 -0700 (PDT)
X-Google-Smtp-Source: ACHHUZ5PlclxeHTlYY2qb5YdVyU+dIwjqwpuQ6Vzz+0B81L1GPhtuqie57Sus3Io55tjrtC2SHampeNqbqVtVAS5LYE=
X-Received: by 2002:a2e:9496:0:b0:2a7:9884:ad53 with SMTP id
 c22-20020a2e9496000000b002a79884ad53mr9969309ljh.48.1684400244179; Thu, 18
 May 2023 01:57:24 -0700 (PDT)
MIME-Version: 1.0
References: <20230517022249.20790-1-xuanzhuo@linux.alibaba.com>
 <20230517022249.20790-6-xuanzhuo@linux.alibaba.com>
 <CACGkMEu7+kDPiWmULXW_saW6pb5yF=gnqXRkSWcYbZCiJmszHQ@mail.gmail.com>
 <20230518030701-mutt-send-email-mst@kernel.org>
 <1684395232.2129312-1-xuanzhuo@linux.alibaba.com>
 <CACGkMEsgVnwgBiUnT3UfqKji3aNFEqhCXq6zpovjgKa5joAGtQ@mail.gmail.com>
 <1684396589.894549-2-xuanzhuo@linux.alibaba.com>
In-Reply-To: <1684396589.894549-2-xuanzhuo@linux.alibaba.com>
From: Jason Wang <jasowang@redhat.com>
Date: Thu, 18 May 2023 16:57:12 +0800
Message-ID: <CACGkMEsX0DG=zOvVkhkxy_ivEyK2T8Ouhh+QUmdwVOUVpc_ivA@mail.gmail.com>
Subject: Re: [PATCH vhost v9 05/12] virtio_ring: split: virtqueue_add_split()
 support premapped
To: Xuan Zhuo <xuanzhuo@linux.alibaba.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: Christoph Hellwig <hch@infradead.org>,
 virtualization@lists.linux-foundation.org,
 "Michael S. Tsirkin" <mst@redhat.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gVGh1LCBNYXkgMTgsIDIwMjMgYXQgMzo1N+KAr1BNIFh1YW4gWmh1byA8eHVhbnpodW9AbGlu
dXguYWxpYmFiYS5jb20+IHdyb3RlOgo+Cj4gT24gVGh1LCAxOCBNYXkgMjAyMyAxNTo1NDowOSAr
MDgwMCwgSmFzb24gV2FuZyA8amFzb3dhbmdAcmVkaGF0LmNvbT4gd3JvdGU6Cj4gPiBPbiBUaHUs
IE1heSAxOCwgMjAyMyBhdCAzOjQx4oCvUE0gWHVhbiBaaHVvIDx4dWFuemh1b0BsaW51eC5hbGli
YWJhLmNvbT4gd3JvdGU6Cj4gPiA+Cj4gPiA+IE9uIFRodSwgMTggTWF5IDIwMjMgMDM6MTE6MjUg
LTA0MDAsICJNaWNoYWVsIFMuIFRzaXJraW4iIDxtc3RAcmVkaGF0LmNvbT4gd3JvdGU6Cj4gPiA+
ID4gT24gVGh1LCBNYXkgMTgsIDIwMjMgYXQgMDI6NTE6NTdQTSArMDgwMCwgSmFzb24gV2FuZyB3
cm90ZToKPiA+ID4gPiA+IE9uIFdlZCwgTWF5IDE3LCAyMDIzIGF0IDEwOjIz4oCvQU0gWHVhbiBa
aHVvIDx4dWFuemh1b0BsaW51eC5hbGliYWJhLmNvbT4gd3JvdGU6Cj4gPiA+ID4gPiA+Cj4gPiA+
ID4gPiA+IHZpcnRxdWV1ZV9hZGRfc3BsaXQoKSBvbmx5IHN1cHBvcnRzIHZpcnR1YWwgYWRkcmVz
c2VzLCBkbWEgaXMgY29tcGxldGVkCj4gPiA+ID4gPiA+IGluIHZpcnRxdWV1ZV9hZGRfc3BsaXQo
KS4KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gSW4gc29tZSBzY2VuYXJpb3MgKHN1Y2ggYXMgdGhl
IEFGX1hEUCBzY2VuYXJpbyksIHRoZSBtZW1vcnkgaXMgYWxsb2NhdGVkCj4gPiA+ID4gPiA+IGFu
ZCBETUEgaXMgY29tcGxldGVkIGluIGFkdmFuY2UsIHNvIGl0IGlzIG5lY2Vzc2FyeSBmb3IgdXMg
dG8gc3VwcG9ydAo+ID4gPiA+ID4gPiBwYXNzaW5nIHRoZSBETUEgYWRkcmVzcyB0byB2aXJ0cXVl
dWVfYWRkX3NwbGl0KCkuCj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IFJlY29yZCB0aGlzIGluZm9y
bWF0aW9uIGluIGRlc2Nfc3RhdGUsIHdlIGNhbiBza2lwIHVubWFwIGJhc2VkIG9uIHRoaXMKPiA+
ID4gPiA+ID4gd2hlbiBleGVjdXRpbmcgZG1hIHVubWFwLgo+ID4gPiA+ID4KPiA+ID4gPiA+IEkg
d291bGQgYWxzbyBzdWdnZXN0IGRvY3VtZW50aW5nIHdoeSBhIHBlciBkZXNjcmlwdG9yIG1ldGFk
YXRhIGlzCj4gPiA+ID4gPiBuZWVkZWQgaW5zdGVhZCBvZiBhIHBlciB2aXJ0cXVldWUgb25lLgo+
ID4gPiA+Cj4gPiA+ID4gSSB0aGluayB3ZSBjb3VsZCBtYWtlIGl0IHBlciB2aXJ0cXVldWUuIFRo
YXQgd291bGQgbWVhbiBhbGwgY29kZSBpbgo+ID4gPiA+IHZpcnRpbyBuZXQgd291bGQgaGF2ZSB0
byBjaGFuZ2UgdG8gZG8gZG1hIG1hcHBpbmcgaXRzZWxmIGluc3RlYWQgb2YKPiA+ID4gPiByZWx5
aW5nIG9uIHZpcnRpbyBjb3JlIHRob3VnaC4gIFdoaWNoIGlzIG1heWJlIGEgZ29vZCBpZGVhPyBE
ZWZpbml0ZWx5IGEKPiA+ID4gPiB2ZXJ5IGludHJ1c2l2ZSBjaGFuZ2UgdGhvdWdoLCB3aWxsIG5l
ZWQgYSBsb3Qgb2YgcGVyZm9ybWFuY2UgdGVzdGluZwo+ID4gPiA+IHRvIG1ha2Ugc3VyZSB3ZSBk
b24ndCBicmVhayBhbnl0aGluZy4KPiA+ID4KPiA+ID4gSW4gZmFjdCwgd2UgaGF2ZSB0cmllZCB0
aGlzIGlkZWEuCj4gPiA+Cj4gPiA+IFRoZSBwcm9ibGVtIGlzIHRoZSBkZXRhY2ggYW5kIHVubWFw
Lgo+ID4gPgo+ID4gPiBXZSBuZWVkIHRvIGdldCBhbGwgRE1BIEFkZHJlc3NlcyBmcm9tIHZpcnRp
by1yaW5nIHRvIHVubWFwLiBDdXJyZW50bHksIGl0IGRvZXMKPiA+ID4gbm90IHN1cHBvcnQgdG8g
cmV0dXJuIHRoZSBETUEgQWRkcmVzcywKPiA+Cj4gPiBJJ20gbm90IHN1cmUgSSBnb3QgaGVyZSwg
YnV0IHdlJ3ZlIGFscmVhZHkgc3RvcmVkIHRoZSBETUEgYWRkcmVzcyBpbiBkZXNjX2V4dHJhPwo+
Cj4KPiBJIG1lYW4gd2UgbmVlZCB0byBnZXQgdGhlIGRtYSBhZGRyZXNzIGZyb20gdGhlIHZpcnRp
by1jb3JlIHRvIHZpcnRpby1uZXQuCj4KCkl0IHByb2JhYmx5IGp1c3QgcmVxdWlyZXMgYSBuZXcg
aGVscGVyLgoKVGhhbmtzCgo+IFRoYW5rcy4KPgo+Cj4gPgo+ID4gPiBhbmQgZm9yIFNLQiwgd2Ug
bmVlZCB0byBnZXQgbXVsdGlwbGUgRE1BCj4gPiA+IEFkZHJlc3NlcyBhdCBvbmUgdGltZS4KPiA+
Cj4gPiBDb3VsZCB5b3UgZWxhYm9yYXRlIG9uIHRoaXM/Cj4gPgo+ID4gVGhhbmtzCj4gPgo+ID4g
Pgo+ID4gPiBUaGlzIG5lZWQgdG8gbW9kaWZ5IHRoZSBsb2dpYyBvZiBWaXJ0aW8tUmluZyBkZXRh
Y2guIEJlc2lkZXMgdGhpcywgSSBhbHNvIGFncmVlCj4gPiA+IHdpdGggdGhpcyBpZGVhLgo+ID4g
Pgo+ID4gPiBUaGFua3MuCj4gPiA+Cj4gPiA+Cj4gPiA+ID4KPiA+ID4gPgo+ID4gPiA+Cj4gPiA+
ID4KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gU2lnbmVkLW9mZi1ieTogWHVhbiBaaHVvIDx4dWFu
emh1b0BsaW51eC5hbGliYWJhLmNvbT4KPiA+ID4gPiA+ID4gLS0tCj4gPiA+ID4gPiA+ICBkcml2
ZXJzL3ZpcnRpby92aXJ0aW9fcmluZy5jIHwgMzggKysrKysrKysrKysrKysrKysrKysrKysrKysr
LS0tLS0tLS0tCj4gPiA+ID4gPiA+ICAxIGZpbGUgY2hhbmdlZCwgMjkgaW5zZXJ0aW9ucygrKSwg
OSBkZWxldGlvbnMoLSkKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvdmlydGlvL3ZpcnRpb19yaW5nLmMgYi9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fcmluZy5jCj4g
PiA+ID4gPiA+IGluZGV4IGUyZmM1MGMwNWJlYy4uYmQ1ZTg0YWZhYjM3IDEwMDY0NAo+ID4gPiA+
ID4gPiAtLS0gYS9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fcmluZy5jCj4gPiA+ID4gPiA+ICsrKyBi
L2RyaXZlcnMvdmlydGlvL3ZpcnRpb19yaW5nLmMKPiA+ID4gPiA+ID4gQEAgLTcwLDYgKzcwLDcg
QEAKPiA+ID4gPiA+ID4gIHN0cnVjdCB2cmluZ19kZXNjX3N0YXRlX3NwbGl0IHsKPiA+ID4gPiA+
ID4gICAgICAgICB2b2lkICpkYXRhOyAgICAgICAgICAgICAgICAgICAgIC8qIERhdGEgZm9yIGNh
bGxiYWNrLiAqLwo+ID4gPiA+ID4gPiAgICAgICAgIHN0cnVjdCB2cmluZ19kZXNjICppbmRpcl9k
ZXNjOyAgLyogSW5kaXJlY3QgZGVzY3JpcHRvciwgaWYgYW55LiAqLwo+ID4gPiA+ID4gPiArICAg
ICAgIGJvb2wgcHJlbWFwcGVkOyAgICAgICAgICAgICAgICAgLyogRE1BIG1hcHBpbmcgaXMgZG9u
ZSBieSBkcml2ZXIuICovCj4gPiA+ID4gPgo+ID4gPiA+ID4gR29pbmcgYmFjayB0byB0aGUgb3Jp
Z2luYWwgZGlzY3Vzc2lvbiBhcm91bmQgd2hlcmUgdGhpcyBzaG91bGQgYmUKPiA+ID4gPiA+IHBs
YWNlZC4gSSB3b25kZXIgaWYgd2UgY2FuIGZpbmQgYSBjb21tb24gcGxhY2UgdG8gc3RvcmUgdGhp
cyBzaW5jZSBpdAo+ID4gPiA+ID4gaGFzIG5vdGhpbmcgcmVsYXRlZCB0byB2aXJ0cXVldWUgbGF5
b3V0LiBNYXliZSBkZXNjX2V4dHJhPyBBbmQgaXQKPiA+ID4gPiA+IHdvdWxkIGJlIGV2ZW4gYmV0
dGVyIGlmIHdlIGNhbiBhdm9pZCBzdHJlc3NpbmcgdGhlIGNhY2hlIGxpa2UgYWJvdmUuCj4gPiA+
ID4gPgo+ID4gPiA+ID4gPiAgfTsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gIHN0cnVjdCB2cmlu
Z19kZXNjX3N0YXRlX3BhY2tlZCB7Cj4gPiA+ID4gPiA+IEBAIC0zNTYsOCArMzU3LDE0IEBAIHN0
YXRpYyBzdHJ1Y3QgZGV2aWNlICp2cmluZ19kbWFfZGV2KGNvbnN0IHN0cnVjdCB2cmluZ192aXJ0
cXVldWUgKnZxKQo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiAgLyogTWFwIG9uZSBzZyBlbnRyeS4g
Ki8KPiA+ID4gPiA+ID4gIHN0YXRpYyBpbnQgdnJpbmdfbWFwX29uZV9zZyhjb25zdCBzdHJ1Y3Qg
dnJpbmdfdmlydHF1ZXVlICp2cSwgc3RydWN0IHNjYXR0ZXJsaXN0ICpzZywKPiA+ID4gPiA+ID4g
LSAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW0gZG1hX2RhdGFfZGlyZWN0aW9uIGRpcmVj
dGlvbiwgc3RhdGljIGRtYV9hZGRyX3QgKmFkZHIpCj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXJlY3Rpb24sCj4gPiA+ID4g
PiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHByZW1hcHBlZCwgZG1hX2FkZHJf
dCAqYWRkcikKPiA+ID4gPiA+Cj4gPiA+ID4gPiBoYXZpbmcgdGhpbmdzIGxpa2U6Cj4gPiA+ID4g
Pgo+ID4gPiA+ID4gaW50IGZ1bmMoYm9vbCBkbykKPiA+ID4gPiA+IHsKPiA+ID4gPiA+IGlmICgh
ZG8pCj4gPiA+ID4gPiAgICAgcmV0dXJuOwo+ID4gPiA+ID4gfQo+ID4gPiA+ID4KPiA+ID4gPiA+
IGlzIGEgaGludCB0aGF0IHRoZSBjaGVjayBuZWVkcyB0byBiZSBkb25lIGJ5IHRoZSBjYWxsZXI/
Cj4gPiA+ID4gPgo+ID4gPiA+ID4gQW5kIHRoaXMgY2hhbmdlIHNob3VsZCB3b3JrIGZvciBib3Ro
IHBhY2tlZCBhbmQgc3BsaXQuIEkgdGhpbmsgd2UgbmVlZAo+ID4gPiA+ID4gdG8gc3F1YXNoIHRo
ZSBwYWNrZWQgY2hhbmdlcyBoZXJlLgo+ID4gPiA+ID4KPiA+ID4gPiA+IExvb2tpbmcgYXQgaG93
IHBhY2tlZCB2aXJ0cXVldWUgdXNlcyB0aGlzIGluIHRoaXMgcGF0Y2gsIEkgZG9uJ3QgdGhpbmsK
PiA+ID4gPiA+IHRoaXMgcGF0Y2ggY2FuIGV2ZW4gYmUgYnVpbHQuIEkgd2lsbCB3YWl0IGZvciBh
IG5ldyB2ZXJzaW9uIGFuZAo+ID4gPiA+ID4gY29udGludWUgdGhlIHJldmlldyBmcm9tIHRoZXJl
Lgo+ID4gPiA+ID4KPiA+ID4gPiA+IFRoYW5rcwo+ID4gPiA+ID4KPiA+ID4gPiA+Cj4gPiA+ID4g
Pgo+ID4gPiA+ID4gPiAgewo+ID4gPiA+ID4gPiArICAgICAgIGlmIChwcmVtYXBwZWQpIHsKPiA+
ID4gPiA+ID4gKyAgICAgICAgICAgICAgICphZGRyID0gc2dfZG1hX2FkZHJlc3Moc2cpOwo+ID4g
PiA+ID4gPiArICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gPiA+ID4gPiA+ICsgICAgICAgfQo+
ID4gPiA+ID4gPiArCj4gPiA+ID4gPiA+ICAgICAgICAgaWYgKCF2cS0+dXNlX2RtYV9hcGkpIHsK
PiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIC8qCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAg
ICAgKiBJZiBETUEgaXMgbm90IHVzZWQsIEtNU0FOIGRvZXNuJ3Qga25vdyB0aGF0IHRoZSBzY2F0
dGVybGlzdAo+ID4gPiA+ID4gPiBAQCAtNDQ1LDcgKzQ1Miw3IEBAIHN0YXRpYyB2b2lkIHZyaW5n
X3VubWFwX29uZV9zcGxpdF9pbmRpcmVjdChjb25zdCBzdHJ1Y3QgdnJpbmdfdmlydHF1ZXVlICp2
cSwKPiA+ID4gPiA+ID4gIH0KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gIHN0YXRpYyB1bnNpZ25l
ZCBpbnQgdnJpbmdfdW5tYXBfb25lX3NwbGl0KGNvbnN0IHN0cnVjdCB2cmluZ192aXJ0cXVldWUg
KnZxLAo+ID4gPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1bnNpZ25lZCBpbnQgaSkKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGksIGJvb2wgcHJlbWFwcGVkKQo+ID4gPiA+ID4g
PiAgewo+ID4gPiA+ID4gPiAgICAgICAgIHN0cnVjdCB2cmluZ19kZXNjX2V4dHJhICpleHRyYSA9
IHZxLT5zcGxpdC5kZXNjX2V4dHJhOwo+ID4gPiA+ID4gPiAgICAgICAgIHUxNiBmbGFnczsKPiA+
ID4gPiA+ID4gQEAgLTQ2Miw2ICs0NjksOSBAQCBzdGF0aWMgdW5zaWduZWQgaW50IHZyaW5nX3Vu
bWFwX29uZV9zcGxpdChjb25zdCBzdHJ1Y3QgdnJpbmdfdmlydHF1ZXVlICp2cSwKPiA+ID4gPiA+
ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZsYWdzICYgVlJJTkdfREVTQ19G
X1dSSVRFKSA/Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERN
QV9GUk9NX0RFVklDRSA6IERNQV9UT19ERVZJQ0UpOwo+ID4gPiA+ID4gPiAgICAgICAgIH0gZWxz
ZSB7Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICBpZiAocHJlbWFwcGVkKQo+ID4gPiA+ID4g
PiArICAgICAgICAgICAgICAgICAgICAgICBnb3RvIG91dDsKPiA+ID4gPiA+ID4gKwo+ID4gPiA+
ID4gPiAgICAgICAgICAgICAgICAgZG1hX3VubWFwX3BhZ2UodnJpbmdfZG1hX2Rldih2cSksCj4g
PiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYVtpXS5hZGRyLAo+
ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFbaV0ubGVuLAo+
ID4gPiA+ID4gPiBAQCAtNTMyLDYgKzU0Miw3IEBAIHN0YXRpYyBpbmxpbmUgaW50IHZpcnRxdWV1
ZV9hZGRfc3BsaXQoc3RydWN0IHZpcnRxdWV1ZSAqX3ZxLAo+ID4gPiA+ID4gPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBpbl9zZ3MsCj4gPiA+ID4g
PiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAqZGF0YSwKPiA+
ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkICpjdHgs
Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBw
cmVtYXBwZWQsCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZ2ZwX3QgZ2ZwKQo+ID4gPiA+ID4gPiAgewo+ID4gPiA+ID4gPiAgICAgICAgIHN0cnVjdCB2
cmluZ192aXJ0cXVldWUgKnZxID0gdG9fdnZxKF92cSk7Cj4gPiA+ID4gPiA+IEBAIC01OTUsNyAr
NjA2LDcgQEAgc3RhdGljIGlubGluZSBpbnQgdmlydHF1ZXVlX2FkZF9zcGxpdChzdHJ1Y3Qgdmly
dHF1ZXVlICpfdnEsCj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICBmb3IgKHNnID0gc2dzW25d
OyBzZzsgc2cgPSBzZ19uZXh0KHNnKSkgewo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAg
ICAgICBkbWFfYWRkcl90IGFkZHI7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IC0gICAgICAgICAg
ICAgICAgICAgICAgIGlmICh2cmluZ19tYXBfb25lX3NnKHZxLCBzZywgRE1BX1RPX0RFVklDRSwg
JmFkZHIpKQo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAodnJpbmdfbWFw
X29uZV9zZyh2cSwgc2csIERNQV9UT19ERVZJQ0UsIHByZW1hcHBlZCwgJmFkZHIpKQo+ID4gPiA+
ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gdW5tYXBfcmVsZWFzZTsK
PiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9IGk7
Cj4gPiA+ID4gPiA+IEBAIC02MTEsNyArNjIyLDcgQEAgc3RhdGljIGlubGluZSBpbnQgdmlydHF1
ZXVlX2FkZF9zcGxpdChzdHJ1Y3QgdmlydHF1ZXVlICpfdnEsCj4gPiA+ID4gPiA+ICAgICAgICAg
ICAgICAgICBmb3IgKHNnID0gc2dzW25dOyBzZzsgc2cgPSBzZ19uZXh0KHNnKSkgewo+ID4gPiA+
ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICBkbWFfYWRkcl90IGFkZHI7Cj4gPiA+ID4gPiA+
Cj4gPiA+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIGlmICh2cmluZ19tYXBfb25lX3Nn
KHZxLCBzZywgRE1BX0ZST01fREVWSUNFLCAmYWRkcikpCj4gPiA+ID4gPiA+ICsgICAgICAgICAg
ICAgICAgICAgICAgIGlmICh2cmluZ19tYXBfb25lX3NnKHZxLCBzZywgRE1BX0ZST01fREVWSUNF
LCBwcmVtYXBwZWQsICZhZGRyKSkKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBnb3RvIHVubWFwX3JlbGVhc2U7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICAgICAg
ICAgICAgICAgICAgICAgICAgIHByZXYgPSBpOwo+ID4gPiA+ID4gPiBAQCAtNjU3LDYgKzY2OCw3
IEBAIHN0YXRpYyBpbmxpbmUgaW50IHZpcnRxdWV1ZV9hZGRfc3BsaXQoc3RydWN0IHZpcnRxdWV1
ZSAqX3ZxLAo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiAgICAgICAgIC8qIFN0b3JlIHRva2VuIGFu
ZCBpbmRpcmVjdCBidWZmZXIgc3RhdGUuICovCj4gPiA+ID4gPiA+ICAgICAgICAgdnEtPnNwbGl0
LmRlc2Nfc3RhdGVbaGVhZF0uZGF0YSA9IGRhdGE7Cj4gPiA+ID4gPiA+ICsgICAgICAgdnEtPnNw
bGl0LmRlc2Nfc3RhdGVbaGVhZF0ucHJlbWFwcGVkID0gcHJlbWFwcGVkOwo+ID4gPiA+ID4gPiAg
ICAgICAgIGlmIChpbmRpcmVjdCkKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIHZxLT5zcGxp
dC5kZXNjX3N0YXRlW2hlYWRdLmluZGlyX2Rlc2MgPSBkZXNjOwo+ID4gPiA+ID4gPiAgICAgICAg
IGVsc2UKPiA+ID4gPiA+ID4gQEAgLTY4Niw2ICs2OTgsMTQgQEAgc3RhdGljIGlubGluZSBpbnQg
dmlydHF1ZXVlX2FkZF9zcGxpdChzdHJ1Y3QgdmlydHF1ZXVlICpfdnEsCj4gPiA+ID4gPiA+ICAg
ICAgICAgcmV0dXJuIDA7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICB1bm1hcF9yZWxlYXNlOgo+
ID4gPiA+ID4gPiArICAgICAgIGlmIChwcmVtYXBwZWQpIHsKPiA+ID4gPiA+ID4gKyAgICAgICAg
ICAgICAgIGlmIChpbmRpcmVjdCkKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
a2ZyZWUoZGVzYyk7Cj4gPiA+ID4gPiA+ICsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgIEVO
RF9VU0UodnEpOwo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4g
PiA+ID4gPiA+ICsgICAgICAgfQo+ID4gPiA+ID4gPiArCj4gPiA+ID4gPiA+ICAgICAgICAgZXJy
X2lkeCA9IGk7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICAgICAgICAgaWYgKGluZGlyZWN0KQo+
ID4gPiA+ID4gPiBAQCAtNzAwLDcgKzcyMCw3IEBAIHN0YXRpYyBpbmxpbmUgaW50IHZpcnRxdWV1
ZV9hZGRfc3BsaXQoc3RydWN0IHZpcnRxdWV1ZSAqX3ZxLAo+ID4gPiA+ID4gPiAgICAgICAgICAg
ICAgICAgICAgICAgICB2cmluZ191bm1hcF9vbmVfc3BsaXRfaW5kaXJlY3QodnEsICZkZXNjW2ld
KTsKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHZpcnRpbzE2X3RvX2Nw
dShfdnEtPnZkZXYsIGRlc2NbaV0ubmV4dCk7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICB9
IGVsc2UKPiA+ID4gPiA+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgaSA9IHZyaW5nX3VubWFw
X29uZV9zcGxpdCh2cSwgaSk7Cj4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGkg
PSB2cmluZ191bm1hcF9vbmVfc3BsaXQodnEsIGksIGZhbHNlKTsKPiA+ID4gPiA+ID4gICAgICAg
ICB9Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICAgICAgICAgaWYgKGluZGlyZWN0KQo+ID4gPiA+
ID4gPiBAQCAtNzU3LDEyICs3NzcsMTIgQEAgc3RhdGljIHZvaWQgZGV0YWNoX2J1Zl9zcGxpdChz
dHJ1Y3QgdnJpbmdfdmlydHF1ZXVlICp2cSwgdW5zaWduZWQgaW50IGhlYWQsCj4gPiA+ID4gPiA+
ICAgICAgICAgaSA9IGhlYWQ7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICAgICAgICAgd2hpbGUg
KHZxLT5zcGxpdC52cmluZy5kZXNjW2ldLmZsYWdzICYgbmV4dGZsYWcpIHsKPiA+ID4gPiA+ID4g
LSAgICAgICAgICAgICAgIHZyaW5nX3VubWFwX29uZV9zcGxpdCh2cSwgaSk7Cj4gPiA+ID4gPiA+
ICsgICAgICAgICAgICAgICB2cmluZ191bm1hcF9vbmVfc3BsaXQodnEsIGksIHN0YXRlLT5wcmVt
YXBwZWQpOwo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgaSA9IHZxLT5zcGxpdC5kZXNjX2V4
dHJhW2ldLm5leHQ7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICB2cS0+dnEubnVtX2ZyZWUr
KzsKPiA+ID4gPiA+ID4gICAgICAgICB9Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IC0gICAgICAg
dnJpbmdfdW5tYXBfb25lX3NwbGl0KHZxLCBpKTsKPiA+ID4gPiA+ID4gKyAgICAgICB2cmluZ191
bm1hcF9vbmVfc3BsaXQodnEsIGksIHN0YXRlLT5wcmVtYXBwZWQpOwo+ID4gPiA+ID4gPiAgICAg
ICAgIHZxLT5zcGxpdC5kZXNjX2V4dHJhW2ldLm5leHQgPSB2cS0+ZnJlZV9oZWFkOwo+ID4gPiA+
ID4gPiAgICAgICAgIHZxLT5mcmVlX2hlYWQgPSBoZWFkOwo+ID4gPiA+ID4gPgo+ID4gPiA+ID4g
PiBAQCAtNzgzLDcgKzgwMyw3IEBAIHN0YXRpYyB2b2lkIGRldGFjaF9idWZfc3BsaXQoc3RydWN0
IHZyaW5nX3ZpcnRxdWV1ZSAqdnEsIHVuc2lnbmVkIGludCBoZWFkLAo+ID4gPiA+ID4gPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZSSU5HX0RFU0NfRl9JTkRJUkVDVCkpOwo+ID4g
PiA+ID4gPiAgICAgICAgICAgICAgICAgQlVHX09OKGxlbiA9PSAwIHx8IGxlbiAlIHNpemVvZihz
dHJ1Y3QgdnJpbmdfZGVzYykpOwo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiAtICAgICAgICAgICAg
ICAgaWYgKHZxLT51c2VfZG1hX2FwaSkgewo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgaWYg
KHZxLT51c2VfZG1hX2FwaSAmJiAhc3RhdGUtPnByZW1hcHBlZCkgewo+ID4gPiA+ID4gPiAgICAg
ICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGVuIC8gc2l6ZW9mKHN0cnVjdCB2
cmluZ19kZXNjKTsgaisrKQo+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHZyaW5nX3VubWFwX29uZV9zcGxpdF9pbmRpcmVjdCh2cSwgJmluZGlyX2Rlc2Nbal0pOwo+
ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgfQo+ID4gPiA+ID4gPiBAQCAtMjE0Myw3ICsyMTYz
LDcgQEAgc3RhdGljIGlubGluZSBpbnQgdmlydHF1ZXVlX2FkZChzdHJ1Y3QgdmlydHF1ZXVlICpf
dnEsCj4gPiA+ID4gPiA+ICAgICAgICAgcmV0dXJuIHZxLT5wYWNrZWRfcmluZyA/IHZpcnRxdWV1
ZV9hZGRfcGFja2VkKF92cSwgc2dzLCB0b3RhbF9zZywKPiA+ID4gPiA+ID4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dF9zZ3MsIGluX3NncywgZGF0YSwgY3R4LCBn
ZnApIDoKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlydHF1
ZXVlX2FkZF9zcGxpdChfdnEsIHNncywgdG90YWxfc2csCj4gPiA+ID4gPiA+IC0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRfc2dzLCBpbl9zZ3MsIGRhdGEsIGN0eCwg
Z2ZwKTsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IG91dF9zZ3MsIGluX3NncywgZGF0YSwgY3R4LCBwcmVtYXBwZWQsIGdmcCk7Cj4gPiA+ID4gPiA+
ICB9Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICAvKioKPiA+ID4gPiA+ID4gLS0KPiA+ID4gPiA+
ID4gMi4zMi4wLjMuZzAxMTk1Y2Y5Zgo+ID4gPiA+ID4gPgo+ID4gPiA+Cj4gPiA+Cj4gPgo+Cgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpWaXJ0dWFsaXph
dGlvbiBtYWlsaW5nIGxpc3QKVmlydHVhbGl6YXRpb25AbGlzdHMubGludXgtZm91bmRhdGlvbi5v
cmcKaHR0cHM6Ly9saXN0cy5saW51eGZvdW5kYXRpb24ub3JnL21haWxtYW4vbGlzdGluZm8vdmly
dHVhbGl6YXRpb24=
