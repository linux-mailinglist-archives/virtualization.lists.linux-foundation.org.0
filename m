Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp1.osuosl.org (smtp1.osuosl.org [140.211.166.138])
	by mail.lfdr.de (Postfix) with ESMTPS id 32BB03F1231
	for <lists.virtualization@lfdr.de>; Thu, 19 Aug 2021 06:07:27 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp1.osuosl.org (Postfix) with ESMTP id C58C080EA0;
	Thu, 19 Aug 2021 04:07:25 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
	by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8dUeCu0CIhEr; Thu, 19 Aug 2021 04:07:22 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp1.osuosl.org (Postfix) with ESMTPS id 8137280EB8;
	Thu, 19 Aug 2021 04:07:21 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id DFD15C0022;
	Thu, 19 Aug 2021 04:07:20 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp3.osuosl.org (smtp3.osuosl.org [140.211.166.136])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 04BEAC000E
 for <virtualization@lists.linux-foundation.org>;
 Thu, 19 Aug 2021 04:07:20 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp3.osuosl.org (Postfix) with ESMTP id D590D60B85
 for <virtualization@lists.linux-foundation.org>;
 Thu, 19 Aug 2021 04:07:19 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp3.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp3.osuosl.org ([127.0.0.1])
 by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id a1SAnSfTuNJ0
 for <virtualization@lists.linux-foundation.org>;
 Thu, 19 Aug 2021 04:07:15 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [216.205.24.124])
 by smtp3.osuosl.org (Postfix) with ESMTPS id 5F45960825
 for <virtualization@lists.linux-foundation.org>;
 Thu, 19 Aug 2021 04:07:15 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1629346034;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=AUXeRejIfNV7jQjs7x7WwmKLTSnTAUEGm0iU8jcGHr8=;
 b=DtpBFJC0mj2UWXc7aJThflXT+fXDxTkdRTrN1CEcCixCWSK6KvkZjEqKICmhGxjU3BGPXa
 Id7vz2Gd1Nq38pwtMhlP3felAq0ORXFVGE5XY258jvJ40ql8IMwU6jXvvoOAMo5EzaXteR
 iHAgTosvXczeaqPO2x+2vy5izK8Jzbk=
Received: from mail-pg1-f197.google.com (mail-pg1-f197.google.com
 [209.85.215.197]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-601-L0Wtxi-QM9WNT5vn5nHqtw-1; Thu, 19 Aug 2021 00:07:13 -0400
X-MC-Unique: L0Wtxi-QM9WNT5vn5nHqtw-1
Received: by mail-pg1-f197.google.com with SMTP id
 d1-20020a630e010000b029023afa459291so2735784pgl.11
 for <virtualization@lists.linux-foundation.org>;
 Wed, 18 Aug 2021 21:07:12 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=AUXeRejIfNV7jQjs7x7WwmKLTSnTAUEGm0iU8jcGHr8=;
 b=PwjTMW6ziUcHvIfaab5eGznZJhR9Boprbb0LaZTpZ/3Dlw+kz/6PKvcVhBAgJlSTih
 7jc+WysEthOsyKMdFrDNd746t1TVXAvG4jJyLAylwcBqCFxHSvf5CRLf9+Sa6hAYMuVI
 V+yZGmbQGFIiGVJZzc++jhmDqbaDn1Oirabsq7x3+shiZQqTKAgwawOVUiB2zVV2VaE9
 Lq4PONzm41QZIaqkOFP0kYXqZlvDjHiRWs4c8x6JOr69pNt3lclTLkLbt/pWiP7F5dnz
 zZMCqZIVji1kvRLt/jc1ICDUIokrwQ4eF5VyH9/NmagH8bZspdPDdpFtQ4ydeYvg8xvH
 H1ZQ==
X-Gm-Message-State: AOAM530Dowkr2mW11O+K0QLELbBTpP8i5z4k3ovDm5WjWiG9y2Crr1nF
 LNREbwRHfmLNm69cwbl+2khFRPxi1PFBlICJZJfm7hInjMXkzfUhWRJnYTNgjuGmuxCLM9nLtgL
 I2Bp5tnirLxh08U9g5l4/yQo167JovScEdO1T2hKJkA==
X-Received: by 2002:a62:a117:0:b029:394:dddf:6b00 with SMTP id
 b23-20020a62a1170000b0290394dddf6b00mr12408691pff.50.1629346031466; 
 Wed, 18 Aug 2021 21:07:11 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJxbHzsuxSAw66HZRWdCxePmmSMCbTwYRuZ7xN+JDKr4eWqyHBOMQ1JNZub+X1FQlz/7DvLIkg==
X-Received: by 2002:a62:a117:0:b029:394:dddf:6b00 with SMTP id
 b23-20020a62a1170000b0290394dddf6b00mr12408665pff.50.1629346031153; 
 Wed, 18 Aug 2021 21:07:11 -0700 (PDT)
Received: from wangxiaodeMacBook-Air.local ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id s32sm1401961pfw.84.2021.08.18.21.07.08
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Wed, 18 Aug 2021 21:07:10 -0700 (PDT)
Subject: Re: [PATCH v2 6/6] vdpa/mlx5: Add multiqueue support
To: Eli Cohen <elic@nvidia.com>, mst@redhat.com,
 virtualization@lists.linux-foundation.org
References: <20210817060250.188705-1-elic@nvidia.com>
 <20210817060250.188705-7-elic@nvidia.com>
From: Jason Wang <jasowang@redhat.com>
Message-ID: <92433ea6-c739-4282-801a-7ded10ba74db@redhat.com>
Date: Thu, 19 Aug 2021 12:07:03 +0800
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0)
 Gecko/20100101 Thunderbird/78.13.0
MIME-Version: 1.0
In-Reply-To: <20210817060250.188705-7-elic@nvidia.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: eperezma@redhat.com
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="gbk"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CtTaIDIwMjEvOC8xNyDPws7nMjowMiwgRWxpIENvaGVuINC0tcA6Cj4gTXVsdGlxdWV1ZSBzdXBw
b3J0IHJlcXVpcmVzIGFkZGl0aW9uYWwgdmlydGlvX25ldF9xIG9iamVjdHMgdG8gYmUgYWRkZWQK
PiBvciByZW1vdmVkIHBlciB0aGUgY29uZmlndXJlZCBudW1iZXIgb2YgcXVldWUgcGFpcnMuIElu
IGFkZGl0aW9uIHRoZSBSUQo+IHRhYmxlcyBuZWVkcyB0byBiZSBtb2RpZmllZCB0byBtYXRjaCB0
aGUgbnVtYmVyIG9mIGNvbmZpZ3VyZWQgcmVjZWl2ZQo+IHF1ZXVlcyBzbyB0aGUgcGFja2V0cyBh
cmUgZGlzcGF0Y2hlZCB0byB0aGUgcmlnaHQgdmlydHF1ZXVlIGFjY29yZGluZyB0bwo+IHRoZSBo
YXNoIHJlc3VsdC4KPgo+IE5vdGU6IHFlbXUgdjYuMC4wIGlzIGJyb2tlbiB3aGVuIHRoZSBkZXZp
Y2UgcmVxdWVzdHMgbW9yZSB0aGFuIHR3byBkYXRhCj4gcXVldWVzOyBubyBuZXQgZGV2aWNlIHdp
bGwgYmUgY3JlYXRlZCBmb3IgdGhlIHZkcGEgZGV2aWNlLiBUbyBhdm9pZAo+IHRoaXMsIG9uZSBz
aG91bGQgc3BlY2lmeSBtcT1vZmYgdG8gcWVtdS4gSW4gdGhpcyBjYXNlIGl0IHdpbGwgZW5kIHVw
Cj4gd2l0aCBhIHNpbmdsZSBxdWV1ZS4KPgo+IFNpZ25lZC1vZmYtYnk6IEVsaSBDb2hlbiA8ZWxp
Y0BudmlkaWEuY29tPgo+IC0tLQo+ICAgZHJpdmVycy92ZHBhL21seDUvY29yZS9tbHg1X3ZkcGEu
aCB8ICAgMSArCj4gICBkcml2ZXJzL3ZkcGEvbWx4NS9jb3JlL3Jlc291cmNlcy5jIHwgIDEwICsr
Cj4gICBkcml2ZXJzL3ZkcGEvbWx4NS9uZXQvbWx4NV92bmV0LmMgIHwgMTg5ICsrKysrKysrKysr
KysrKysrKysrKysrKy0tLS0tCj4gICAzIGZpbGVzIGNoYW5nZWQsIDE2OSBpbnNlcnRpb25zKCsp
LCAzMSBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEvbWx4NS9jb3Jl
L21seDVfdmRwYS5oIGIvZHJpdmVycy92ZHBhL21seDUvY29yZS9tbHg1X3ZkcGEuaAo+IGluZGV4
IDZjNDM0NzZhNjljYi4uMDFhODQ4YWRmNTkwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvdmRwYS9t
bHg1L2NvcmUvbWx4NV92ZHBhLmgKPiArKysgYi9kcml2ZXJzL3ZkcGEvbWx4NS9jb3JlL21seDVf
dmRwYS5oCj4gQEAgLTkxLDYgKzkxLDcgQEAgaW50IG1seDVfdmRwYV9nZXRfbnVsbF9ta2V5KHN0
cnVjdCBtbHg1X3ZkcGFfZGV2ICpkZXYsIHUzMiAqbnVsbF9ta2V5KTsKPiAgIGludCBtbHg1X3Zk
cGFfY3JlYXRlX3RpcyhzdHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYsIHZvaWQgKmluLCB1MzIg
KnRpc24pOwo+ICAgdm9pZCBtbHg1X3ZkcGFfZGVzdHJveV90aXMoc3RydWN0IG1seDVfdmRwYV9k
ZXYgKm12ZGV2LCB1MzIgdGlzbik7Cj4gICBpbnQgbWx4NV92ZHBhX2NyZWF0ZV9ycXQoc3RydWN0
IG1seDVfdmRwYV9kZXYgKm12ZGV2LCB2b2lkICppbiwgaW50IGlubGVuLCB1MzIgKnJxdG4pOwo+
ICtpbnQgbWx4NV92ZHBhX21vZGlmeV9ycXQoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2LCB2
b2lkICppbiwgaW50IGlubGVuLCB1MzIgcnF0bik7Cj4gICB2b2lkIG1seDVfdmRwYV9kZXN0cm95
X3JxdChzdHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYsIHUzMiBycXRuKTsKPiAgIGludCBtbHg1
X3ZkcGFfY3JlYXRlX3RpcihzdHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYsIHZvaWQgKmluLCB1
MzIgKnRpcm4pOwo+ICAgdm9pZCBtbHg1X3ZkcGFfZGVzdHJveV90aXIoc3RydWN0IG1seDVfdmRw
YV9kZXYgKm12ZGV2LCB1MzIgdGlybik7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmRwYS9tbHg1
L2NvcmUvcmVzb3VyY2VzLmMgYi9kcml2ZXJzL3ZkcGEvbWx4NS9jb3JlL3Jlc291cmNlcy5jCj4g
aW5kZXggZDI0YWUxYTg1MTU5Li5iYmRjZjlhMDFhNmQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92
ZHBhL21seDUvY29yZS9yZXNvdXJjZXMuYwo+ICsrKyBiL2RyaXZlcnMvdmRwYS9tbHg1L2NvcmUv
cmVzb3VyY2VzLmMKPiBAQCAtMTI5LDYgKzEyOSwxNiBAQCBpbnQgbWx4NV92ZHBhX2NyZWF0ZV9y
cXQoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2LCB2b2lkICppbiwgaW50IGlubGVuLCB1MzIg
Kgo+ICAgCXJldHVybiBlcnI7Cj4gICB9Cj4gICAKPiAraW50IG1seDVfdmRwYV9tb2RpZnlfcnF0
KHN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldiwgdm9pZCAqaW4sIGludCBpbmxlbiwgdTMyIHJx
dG4pCj4gK3sKPiArCXUzMiBvdXRbTUxYNV9TVF9TWl9EVyhjcmVhdGVfcnF0X291dCldID0ge307
Cj4gKwo+ICsJTUxYNV9TRVQobW9kaWZ5X3JxdF9pbiwgaW4sIHVpZCwgbXZkZXYtPnJlcy51aWQp
Owo+ICsJTUxYNV9TRVQobW9kaWZ5X3JxdF9pbiwgaW4sIHJxdG4sIHJxdG4pOwo+ICsJTUxYNV9T
RVQobW9kaWZ5X3JxdF9pbiwgaW4sIG9wY29kZSwgTUxYNV9DTURfT1BfTU9ESUZZX1JRVCk7Cj4g
KwlyZXR1cm4gbWx4NV9jbWRfZXhlYyhtdmRldi0+bWRldiwgaW4sIGlubGVuLCBvdXQsIHNpemVv
ZihvdXQpKTsKPiArfQo+ICsKPiAgIHZvaWQgbWx4NV92ZHBhX2Rlc3Ryb3lfcnF0KHN0cnVjdCBt
bHg1X3ZkcGFfZGV2ICptdmRldiwgdTMyIHJxdG4pCj4gICB7Cj4gICAJdTMyIGluW01MWDVfU1Rf
U1pfRFcoZGVzdHJveV9ycXRfaW4pXSA9IHt9Owo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEv
bWx4NS9uZXQvbWx4NV92bmV0LmMgYi9kcml2ZXJzL3ZkcGEvbWx4NS9uZXQvbWx4NV92bmV0LmMK
PiBpbmRleCBlMTg2NjU3ODExMzUuLjljZmYzYTQ5NTUyZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJz
L3ZkcGEvbWx4NS9uZXQvbWx4NV92bmV0LmMKPiArKysgYi9kcml2ZXJzL3ZkcGEvbWx4NS9uZXQv
bWx4NV92bmV0LmMKPiBAQCAtMTMzLDcgKzEzMyw3IEBAIHN0cnVjdCBtbHg1X3ZkcGFfdmlydHF1
ZXVlIHsKPiAgIC8qIFdlIHdpbGwgcmVtb3ZlIHRoaXMgbGltaXRhdGlvbiBvbmNlIG1seDVfdmRw
YV9hbGxvY19yZXNvdXJjZXMoKQo+ICAgICogcHJvdmlkZXMgZm9yIGRyaXZlciBzcGFjZSBhbGxv
Y2F0aW9uCj4gICAgKi8KPiAtI2RlZmluZSBNTFg1X01BWF9TVVBQT1JURURfVlFTIDIKPiArI2Rl
ZmluZSBNTFg1X01BWF9TVVBQT1JURURfVlFTIDE2CgoKSSB3b25kZXIgaWYgd2UgY2FuIHN0aWNr
IHRoaXMgdW5jaGFuZ2VkLCBzaW5jZSBwcmV2aW91cyBwYXRjaCBjaGFuZ2UgaXQgCmZyb20gMTYg
dG8gMi4KCk90aGVyIHRoYW4gdGhpcy4KCkFja2VkLWJ5OiBKYXNvbiBXYW5nIDxqYXNvd2FuZ0By
ZWRoYXQuY29tPgoKCj4gICAKPiAgIHN0YXRpYyBib29sIGlzX2luZGV4X3ZhbGlkKHN0cnVjdCBt
bHg1X3ZkcGFfZGV2ICptdmRldiwgdTE2IGlkeCkKPiAgIHsKPiBAQCAtMTg0LDYgKzE4NCwyMyBA
QCBzdGF0aWMgYm9vbCBtbHg1X3ZkcGFfZGVidWc7Cj4gICAJCQltbHg1X3ZkcGFfaW5mbyhtdmRl
diwgIiVzXG4iLCAjX3N0YXR1cyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBc
Cj4gICAJfSB3aGlsZSAoMCkKPiAgIAo+ICsvKiBUT0RPOiBjcm9zcy1lbmRpYW4gc3VwcG9ydCAq
Lwo+ICtzdGF0aWMgaW5saW5lIGJvb2wgbWx4NV92ZHBhX2lzX2xpdHRsZV9lbmRpYW4oc3RydWN0
IG1seDVfdmRwYV9kZXYgKm12ZGV2KQo+ICt7Cj4gKwlyZXR1cm4gdmlydGlvX2xlZ2FjeV9pc19s
aXR0bGVfZW5kaWFuKCkgfHwKPiArCQkobXZkZXYtPmFjdHVhbF9mZWF0dXJlcyAmIEJJVF9VTEwo
VklSVElPX0ZfVkVSU0lPTl8xKSk7Cj4gK30KPiArCj4gK3N0YXRpYyB1MTYgbWx4NXZkcGExNl90
b19jcHUoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2LCBfX3ZpcnRpbzE2IHZhbCkKPiArewo+
ICsJcmV0dXJuIF9fdmlydGlvMTZfdG9fY3B1KG1seDVfdmRwYV9pc19saXR0bGVfZW5kaWFuKG12
ZGV2KSwgdmFsKTsKPiArfQo+ICsKPiArc3RhdGljIF9fdmlydGlvMTYgY3B1X3RvX21seDV2ZHBh
MTYoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2LCB1MTYgdmFsKQo+ICt7Cj4gKwlyZXR1cm4g
X19jcHVfdG9fdmlydGlvMTYobWx4NV92ZHBhX2lzX2xpdHRsZV9lbmRpYW4obXZkZXYpLCB2YWwp
Owo+ICt9Cj4gKwo+ICAgc3RhdGljIGlubGluZSB1MzIgbWx4NV92ZHBhX21heF9xcHMoaW50IG1h
eF92cXMpCj4gICB7Cj4gICAJcmV0dXJuIG1heF92cXMgLyAyOwo+IEBAIC0xOTEsNiArMjA4LDkg
QEAgc3RhdGljIGlubGluZSB1MzIgbWx4NV92ZHBhX21heF9xcHMoaW50IG1heF92cXMpCj4gICAK
PiAgIHN0YXRpYyB1MTYgY3RybF92cV9pZHgoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2KQo+
ICAgewo+ICsJaWYgKCEobXZkZXYtPmFjdHVhbF9mZWF0dXJlcyAmIEJJVF9VTEwoVklSVElPX05F
VF9GX01RKSkpCj4gKwkJcmV0dXJuIDI7Cj4gKwo+ICAgCXJldHVybiAyICogbWx4NV92ZHBhX21h
eF9xcHMobXZkZXYtPm1heF92cXMpOwo+ICAgfQo+ICAgCj4gQEAgLTExMjcsMTAgKzExNDcsOCBA
QCBzdGF0aWMgaW50IHNldHVwX3ZxKHN0cnVjdCBtbHg1X3ZkcGFfbmV0ICpuZGV2LCBzdHJ1Y3Qg
bWx4NV92ZHBhX3ZpcnRxdWV1ZSAqbXZxKQo+ICAgCWlmICghbXZxLT5udW1fZW50KQo+ICAgCQly
ZXR1cm4gMDsKPiAgIAo+IC0JaWYgKG12cS0+aW5pdGlhbGl6ZWQpIHsKPiAtCQltbHg1X3ZkcGFf
d2FybigmbmRldi0+bXZkZXYsICJhdHRlbXB0IHJlIGluaXRcbiIpOwo+IC0JCXJldHVybiAtRUlO
VkFMOwo+IC0JfQo+ICsJaWYgKG12cS0+aW5pdGlhbGl6ZWQpCj4gKwkJcmV0dXJuIDA7Cj4gICAK
PiAgIAllcnIgPSBjcV9jcmVhdGUobmRldiwgaWR4LCBtdnEtPm51bV9lbnQpOwo+ICAgCWlmIChl
cnIpCj4gQEAgLTEyMTcsMTkgKzEyMzUsMjAgQEAgc3RhdGljIHZvaWQgdGVhcmRvd25fdnEoc3Ry
dWN0IG1seDVfdmRwYV9uZXQgKm5kZXYsIHN0cnVjdCBtbHg1X3ZkcGFfdmlydHF1ZXVlICoKPiAg
IAo+ICAgc3RhdGljIGludCBjcmVhdGVfcnF0KHN0cnVjdCBtbHg1X3ZkcGFfbmV0ICpuZGV2KQo+
ICAgewo+IC0JaW50IGxvZ19tYXhfcnF0Owo+ICAgCV9fYmUzMiAqbGlzdDsKPiArCWludCBtYXhf
cnF0Owo+ICAgCXZvaWQgKnJxdGM7Cj4gICAJaW50IGlubGVuOwo+ICAgCXZvaWQgKmluOwo+ICAg
CWludCBpLCBqOwo+ICAgCWludCBlcnI7Cj4gICAKPiAtCWxvZ19tYXhfcnF0ID0gbWluX3QoaW50
LCAxLCBNTFg1X0NBUF9HRU4obmRldi0+bXZkZXYubWRldiwgbG9nX21heF9ycXRfc2l6ZSkpOwo+
IC0JaWYgKGxvZ19tYXhfcnF0IDwgMSkKPiArCW1heF9ycXQgPSBtaW5fdChpbnQsIE1MWDVfTUFY
X1NVUFBPUlRFRF9WUVMgLyAyLAo+ICsJCQkxIDw8IE1MWDVfQ0FQX0dFTihuZGV2LT5tdmRldi5t
ZGV2LCBsb2dfbWF4X3JxdF9zaXplKSk7Cj4gKwlpZiAobWF4X3JxdCA8IDEpCj4gICAJCXJldHVy
biAtRU9QTk9UU1VQUDsKPiAgIAo+IC0JaW5sZW4gPSBNTFg1X1NUX1NaX0JZVEVTKGNyZWF0ZV9y
cXRfaW4pICsgKDEgPDwgbG9nX21heF9ycXQpICogTUxYNV9TVF9TWl9CWVRFUyhycV9udW0pOwo+
ICsJaW5sZW4gPSBNTFg1X1NUX1NaX0JZVEVTKGNyZWF0ZV9ycXRfaW4pICsgbWF4X3JxdCAqIE1M
WDVfU1RfU1pfQllURVMocnFfbnVtKTsKPiAgIAlpbiA9IGt6YWxsb2MoaW5sZW4sIEdGUF9LRVJO
RUwpOwo+ICAgCWlmICghaW4pCj4gICAJCXJldHVybiAtRU5PTUVNOwo+IEBAIC0xMjM4LDEwICsx
MjU3LDkgQEAgc3RhdGljIGludCBjcmVhdGVfcnF0KHN0cnVjdCBtbHg1X3ZkcGFfbmV0ICpuZGV2
KQo+ICAgCXJxdGMgPSBNTFg1X0FERFJfT0YoY3JlYXRlX3JxdF9pbiwgaW4sIHJxdF9jb250ZXh0
KTsKPiAgIAo+ICAgCU1MWDVfU0VUKHJxdGMsIHJxdGMsIGxpc3RfcV90eXBlLCBNTFg1X1JRVENf
TElTVF9RX1RZUEVfVklSVElPX05FVF9RKTsKPiAtCU1MWDVfU0VUKHJxdGMsIHJxdGMsIHJxdF9t
YXhfc2l6ZSwgMSA8PCBsb2dfbWF4X3JxdCk7Cj4gLQlNTFg1X1NFVChycXRjLCBycXRjLCBycXRf
YWN0dWFsX3NpemUsIDEpOwo+ICsJTUxYNV9TRVQocnF0YywgcnF0YywgcnF0X21heF9zaXplLCBt
YXhfcnF0KTsKPiAgIAlsaXN0ID0gTUxYNV9BRERSX09GKHJxdGMsIHJxdGMsIHJxX251bVswXSk7
Cj4gLQlmb3IgKGkgPSAwLCBqID0gMDsgaiA8IG5kZXYtPm12ZGV2Lm1heF92cXM7IGorKykgewo+
ICsJZm9yIChpID0gMCwgaiA9IDA7IGogPCBtYXhfcnF0OyBqKyspIHsKPiAgIAkJaWYgKCFuZGV2
LT52cXNbal0uaW5pdGlhbGl6ZWQpCj4gICAJCQljb250aW51ZTsKPiAgIAo+IEBAIC0xMjUwLDYg
KzEyNjgsNyBAQCBzdGF0aWMgaW50IGNyZWF0ZV9ycXQoc3RydWN0IG1seDVfdmRwYV9uZXQgKm5k
ZXYpCj4gICAJCQlpKys7Cj4gICAJCX0KPiAgIAl9Cj4gKwlNTFg1X1NFVChycXRjLCBycXRjLCBy
cXRfYWN0dWFsX3NpemUsIGkpOwo+ICAgCj4gICAJZXJyID0gbWx4NV92ZHBhX2NyZWF0ZV9ycXQo
Jm5kZXYtPm12ZGV2LCBpbiwgaW5sZW4sICZuZGV2LT5yZXMucnF0bik7Cj4gICAJa2ZyZWUoaW4p
Owo+IEBAIC0xMjU5LDYgKzEyNzgsNTIgQEAgc3RhdGljIGludCBjcmVhdGVfcnF0KHN0cnVjdCBt
bHg1X3ZkcGFfbmV0ICpuZGV2KQo+ICAgCXJldHVybiAwOwo+ICAgfQo+ICAgCj4gKyNkZWZpbmUg
TUxYNV9NT0RJRllfUlFUX05VTV9SUVMgKCh1NjQpMSkKPiArCj4gK2ludCBtb2RpZnlfcnF0KHN0
cnVjdCBtbHg1X3ZkcGFfbmV0ICpuZGV2LCBpbnQgbnVtKQo+ICt7Cj4gKwlfX2JlMzIgKmxpc3Q7
Cj4gKwlpbnQgbWF4X3JxdDsKPiArCXZvaWQgKnJxdGM7Cj4gKwlpbnQgaW5sZW47Cj4gKwl2b2lk
ICppbjsKPiArCWludCBpLCBqOwo+ICsJaW50IGVycjsKPiArCj4gKwltYXhfcnF0ID0gbWluX3Qo
aW50LCBuZGV2LT5jdXJfbnVtX3ZxcyAvIDIsCj4gKwkJCTEgPDwgTUxYNV9DQVBfR0VOKG5kZXYt
Pm12ZGV2Lm1kZXYsIGxvZ19tYXhfcnF0X3NpemUpKTsKPiArCWlmIChtYXhfcnF0IDwgMSkKPiAr
CQlyZXR1cm4gLUVPUE5PVFNVUFA7Cj4gKwo+ICsJaW5sZW4gPSBNTFg1X1NUX1NaX0JZVEVTKG1v
ZGlmeV9ycXRfaW4pICsgbWF4X3JxdCAqIE1MWDVfU1RfU1pfQllURVMocnFfbnVtKTsKPiArCWlu
ID0ga3phbGxvYyhpbmxlbiwgR0ZQX0tFUk5FTCk7Cj4gKwlpZiAoIWluKQo+ICsJCXJldHVybiAt
RU5PTUVNOwo+ICsKPiArCU1MWDVfU0VUKG1vZGlmeV9ycXRfaW4sIGluLCB1aWQsIG5kZXYtPm12
ZGV2LnJlcy51aWQpOwo+ICsJTUxYNV9TRVQ2NChtb2RpZnlfcnF0X2luLCBpbiwgYml0bWFzaywg
TUxYNV9NT0RJRllfUlFUX05VTV9SUVMpOwo+ICsJcnF0YyA9IE1MWDVfQUREUl9PRihtb2RpZnlf
cnF0X2luLCBpbiwgY3R4KTsKPiArCU1MWDVfU0VUKHJxdGMsIHJxdGMsIGxpc3RfcV90eXBlLCBN
TFg1X1JRVENfTElTVF9RX1RZUEVfVklSVElPX05FVF9RKTsKPiArCj4gKwlsaXN0ID0gTUxYNV9B
RERSX09GKHJxdGMsIHJxdGMsIHJxX251bVswXSk7Cj4gKwlmb3IgKGkgPSAwLCBqID0gMDsgaiA8
IG51bTsgaisrKSB7Cj4gKwkJaWYgKCFuZGV2LT52cXNbal0uaW5pdGlhbGl6ZWQpCj4gKwkJCWNv
bnRpbnVlOwo+ICsKPiArCQlpZiAoIXZxX2lzX3R4KG5kZXYtPnZxc1tqXS5pbmRleCkpIHsKPiAr
CQkJbGlzdFtpXSA9IGNwdV90b19iZTMyKG5kZXYtPnZxc1tqXS52aXJ0cV9pZCk7Cj4gKwkJCWkr
KzsKPiArCQl9Cj4gKwl9Cj4gKwlNTFg1X1NFVChycXRjLCBycXRjLCBycXRfYWN0dWFsX3NpemUs
IGkpOwo+ICsJZXJyID0gbWx4NV92ZHBhX21vZGlmeV9ycXQoJm5kZXYtPm12ZGV2LCBpbiwgaW5s
ZW4sIG5kZXYtPnJlcy5ycXRuKTsKPiArCWtmcmVlKGluKTsKPiArCWlmIChlcnIpCj4gKwkJcmV0
dXJuIGVycjsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiAgIHN0YXRpYyB2b2lkIGRlc3Ry
b3lfcnF0KHN0cnVjdCBtbHg1X3ZkcGFfbmV0ICpuZGV2KQo+ICAgewo+ICAgCW1seDVfdmRwYV9k
ZXN0cm95X3JxdCgmbmRldi0+bXZkZXYsIG5kZXYtPnJlcy5ycXRuKTsKPiBAQCAtMTQxOCw2ICsx
NDgzLDc3IEBAIHZpcnRpb19uZXRfY3RybF9hY2sgaGFuZGxlX2N0cmxfbWFjKHN0cnVjdCBtbHg1
X3ZkcGFfZGV2ICptdmRldiwgdTggY21kKQo+ICAgCXJldHVybiBzdGF0dXM7Cj4gICB9Cj4gICAK
PiArc3RhdGljIGludCBjaGFuZ2VfbnVtX3FwcyhzdHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYs
IGludCBuZXdxcHMpCj4gK3sKPiArCXN0cnVjdCBtbHg1X3ZkcGFfbmV0ICpuZGV2ID0gdG9fbWx4
NV92ZHBhX25kZXYobXZkZXYpOwo+ICsJaW50IGN1cl9xcHMgPSBuZGV2LT5jdXJfbnVtX3ZxcyAv
IDI7Cj4gKwlpbnQgZXJyOwo+ICsJaW50IGk7Cj4gKwo+ICsJaWYgKGN1cl9xcHMgPiBuZXdxcHMp
IHsKPiArCQllcnIgPSBtb2RpZnlfcnF0KG5kZXYsIDIgKiBuZXdxcHMpOwo+ICsJCWlmIChlcnIp
Cj4gKwkJCXJldHVybiBlcnI7Cj4gKwo+ICsJCWZvciAoaSA9IG5kZXYtPmN1cl9udW1fdnFzIC0g
MTsgaSA+PSAyICogbmV3cXBzOyBpLS0pCj4gKwkJCXRlYXJkb3duX3ZxKG5kZXYsICZuZGV2LT52
cXNbaV0pOwo+ICsKPiArCQluZGV2LT5jdXJfbnVtX3ZxcyA9IDIgKiBuZXdxcHM7Cj4gKwl9IGVs
c2Ugewo+ICsJCW5kZXYtPmN1cl9udW1fdnFzID0gMiAqIG5ld3FwczsKPiArCQlmb3IgKGkgPSBj
dXJfcXBzICogMjsgaSA8IDIgKiBuZXdxcHM7IGkrKykgewo+ICsJCQllcnIgPSBzZXR1cF92cShu
ZGV2LCAmbmRldi0+dnFzW2ldKTsKPiArCQkJaWYgKGVycikKPiArCQkJCWdvdG8gY2xlYW5fYWRk
ZWQ7Cj4gKwkJfQo+ICsJCWVyciA9IG1vZGlmeV9ycXQobmRldiwgMiAqIG5ld3Fwcyk7Cj4gKwkJ
aWYgKGVycikKPiArCQkJZ290byBjbGVhbl9hZGRlZDsKPiArCX0KPiArCXJldHVybiAwOwo+ICsK
PiArY2xlYW5fYWRkZWQ6Cj4gKwlmb3IgKC0taTsgaSA+PSBjdXJfcXBzOyAtLWkpCj4gKwkJdGVh
cmRvd25fdnEobmRldiwgJm5kZXYtPnZxc1tpXSk7Cj4gKwo+ICsJcmV0dXJuIGVycjsKPiArfQo+
ICsKPiArdmlydGlvX25ldF9jdHJsX2FjayBoYW5kbGVfY3RybF9tcShzdHJ1Y3QgbWx4NV92ZHBh
X2RldiAqbXZkZXYsIHU4IGNtZCkKPiArewo+ICsJc3RydWN0IG1seDVfdmRwYV9uZXQgKm5kZXYg
PSB0b19tbHg1X3ZkcGFfbmRldihtdmRldik7Cj4gKwl2aXJ0aW9fbmV0X2N0cmxfYWNrIHN0YXR1
cyA9IFZJUlRJT19ORVRfRVJSOwo+ICsJc3RydWN0IG1seDVfY29udHJvbF92cSAqY3ZxID0gJm12
ZGV2LT5jdnE7Cj4gKwlzdHJ1Y3QgdmlydGlvX25ldF9jdHJsX21xIG1xOwo+ICsJc2l6ZV90IHJl
YWQ7Cj4gKwl1MTYgbmV3cXBzOwo+ICsKPiArCXN3aXRjaCAoY21kKSB7Cj4gKwljYXNlIFZJUlRJ
T19ORVRfQ1RSTF9NUV9WUV9QQUlSU19TRVQ6Cj4gKwkJcmVhZCA9IHZyaW5naF9pb3ZfcHVsbF9p
b3RsYigmY3ZxLT52cmluZywgJmN2cS0+cmlvdiwgKHZvaWQgKikmbXEsIHNpemVvZihtcSkpOwo+
ICsJCWlmIChyZWFkICE9IHNpemVvZihtcSkpCj4gKwkJCWJyZWFrOwo+ICsKPiArCQluZXdxcHMg
PSBtbHg1dmRwYTE2X3RvX2NwdShtdmRldiwgbXEudmlydHF1ZXVlX3BhaXJzKTsKPiArCQlpZiAo
bmRldi0+Y3VyX251bV92cXMgPT0gMiAqIG5ld3Fwcykgewo+ICsJCQlzdGF0dXMgPSBWSVJUSU9f
TkVUX09LOwo+ICsJCQlicmVhazsKPiArCQl9Cj4gKwo+ICsJCWlmIChuZXdxcHMgJiAobmV3cXBz
IC0gMSkpCj4gKwkJCWJyZWFrOwo+ICsKPiArCQlpZiAoIWNoYW5nZV9udW1fcXBzKG12ZGV2LCBu
ZXdxcHMpKQo+ICsJCQlzdGF0dXMgPSBWSVJUSU9fTkVUX09LOwo+ICsKPiArCQlicmVhazsKPiAr
CWRlZmF1bHQ6Cj4gKwkJYnJlYWs7Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIHN0YXR1czsKPiArfQo+
ICsKPiAgIHN0YXRpYyB2b2lkIG1seDVfY3ZxX2tpY2tfaGFuZGxlcihzdHJ1Y3Qgd29ya19zdHJ1
Y3QgKndvcmspCj4gICB7Cj4gICAJdmlydGlvX25ldF9jdHJsX2FjayBzdGF0dXMgPSBWSVJUSU9f
TkVUX0VSUjsKPiBAQCAtMTQ1Myw2ICsxNTg5LDkgQEAgc3RhdGljIHZvaWQgbWx4NV9jdnFfa2lj
a19oYW5kbGVyKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKPiAgIAkJY2FzZSBWSVJUSU9fTkVU
X0NUUkxfTUFDOgo+ICAgCQkJc3RhdHVzID0gaGFuZGxlX2N0cmxfbWFjKG12ZGV2LCBjdHJsLmNt
ZCk7Cj4gICAJCQlicmVhazsKPiArCQljYXNlIFZJUlRJT19ORVRfQ1RSTF9NUToKPiArCQkJc3Rh
dHVzID0gaGFuZGxlX2N0cmxfbXEobXZkZXYsIGN0cmwuY21kKTsKPiArCQkJYnJlYWs7Cj4gICAK
PiAgIAkJZGVmYXVsdDoKPiAgIAkJCWJyZWFrOwo+IEBAIC0xNzEwLDYgKzE4NDksNyBAQCBzdGF0
aWMgdTY0IG1seDVfdmRwYV9nZXRfZmVhdHVyZXMoc3RydWN0IHZkcGFfZGV2aWNlICp2ZGV2KQo+
ICAgCW5kZXYtPm12ZGV2Lm1seF9mZWF0dXJlcyB8PSBCSVRfVUxMKFZJUlRJT19GX0FDQ0VTU19Q
TEFURk9STSk7Cj4gICAJbmRldi0+bXZkZXYubWx4X2ZlYXR1cmVzIHw9IEJJVF9VTEwoVklSVElP
X05FVF9GX0NUUkxfVlEpOwo+ICAgCW5kZXYtPm12ZGV2Lm1seF9mZWF0dXJlcyB8PSBCSVRfVUxM
KFZJUlRJT19ORVRfRl9DVFJMX01BQ19BRERSKTsKPiArCW5kZXYtPm12ZGV2Lm1seF9mZWF0dXJl
cyB8PSBCSVRfVUxMKFZJUlRJT19ORVRfRl9NUSk7Cj4gICAKPiAgIAlwcmludF9mZWF0dXJlcyht
dmRldiwgbmRldi0+bXZkZXYubWx4X2ZlYXR1cmVzLCBmYWxzZSk7Cj4gICAJcmV0dXJuIG5kZXYt
Pm12ZGV2Lm1seF9mZWF0dXJlczsKPiBAQCAtMTc2OSwxOCArMTkwOSw2IEBAIHN0YXRpYyB2b2lk
IHRlYXJkb3duX3ZpcnRxdWV1ZXMoc3RydWN0IG1seDVfdmRwYV9uZXQgKm5kZXYpCj4gICAJfQo+
ICAgfQo+ICAgCj4gLS8qIFRPRE86IGNyb3NzLWVuZGlhbiBzdXBwb3J0ICovCj4gLXN0YXRpYyBp
bmxpbmUgYm9vbCBtbHg1X3ZkcGFfaXNfbGl0dGxlX2VuZGlhbihzdHJ1Y3QgbWx4NV92ZHBhX2Rl
diAqbXZkZXYpCj4gLXsKPiAtCXJldHVybiB2aXJ0aW9fbGVnYWN5X2lzX2xpdHRsZV9lbmRpYW4o
KSB8fAo+IC0JCShtdmRldi0+YWN0dWFsX2ZlYXR1cmVzICYgQklUX1VMTChWSVJUSU9fRl9WRVJT
SU9OXzEpKTsKPiAtfQo+IC0KPiAtc3RhdGljIF9fdmlydGlvMTYgY3B1X3RvX21seDV2ZHBhMTYo
c3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2LCB1MTYgdmFsKQo+IC17Cj4gLQlyZXR1cm4gX19j
cHVfdG9fdmlydGlvMTYobWx4NV92ZHBhX2lzX2xpdHRsZV9lbmRpYW4obXZkZXYpLCB2YWwpOwo+
IC19Cj4gLQo+ICAgc3RhdGljIHZvaWQgdXBkYXRlX2N2cV9pbmZvKHN0cnVjdCBtbHg1X3ZkcGFf
ZGV2ICptdmRldikKPiAgIHsKPiAgIAlpZiAoTUxYNV9GRUFUVVJFKG12ZGV2LCBWSVJUSU9fTkVU
X0ZfQ1RSTF9WUSkpIHsKPiBAQCAtMTg0NiwxNSArMTk3NCwxNCBAQCBzdGF0aWMgdTggbWx4NV92
ZHBhX2dldF9zdGF0dXMoc3RydWN0IHZkcGFfZGV2aWNlICp2ZGV2KQo+ICAgc3RhdGljIGludCBz
YXZlX2NoYW5uZWxfaW5mbyhzdHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRldiwgc3RydWN0IG1seDVf
dmRwYV92aXJ0cXVldWUgKm12cSkKPiAgIHsKPiAgIAlzdHJ1Y3QgbWx4NV92cV9yZXN0b3JlX2lu
Zm8gKnJpID0gJm12cS0+cmk7Cj4gLQlzdHJ1Y3QgbWx4NV92aXJ0cV9hdHRyIGF0dHI7Cj4gKwlz
dHJ1Y3QgbWx4NV92aXJ0cV9hdHRyIGF0dHIgPSB7fTsKPiAgIAlpbnQgZXJyOwo+ICAgCj4gLQlp
ZiAoIW12cS0+aW5pdGlhbGl6ZWQpCj4gLQkJcmV0dXJuIDA7Cj4gLQo+IC0JZXJyID0gcXVlcnlf
dmlydHF1ZXVlKG5kZXYsIG12cSwgJmF0dHIpOwo+IC0JaWYgKGVycikKPiAtCQlyZXR1cm4gZXJy
Owo+ICsJaWYgKG12cS0+aW5pdGlhbGl6ZWQpIHsKPiArCQllcnIgPSBxdWVyeV92aXJ0cXVldWUo
bmRldiwgbXZxLCAmYXR0cik7Cj4gKwkJaWYgKGVycikKPiArCQkJcmV0dXJuIGVycjsKPiArCX0K
PiAgIAo+ICAgCXJpLT5hdmFpbF9pbmRleCA9IGF0dHIuYXZhaWxhYmxlX2luZGV4Owo+ICAgCXJp
LT51c2VkX2luZGV4ID0gYXR0ci51c2VkX2luZGV4OwoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KVmlydHVhbGl6YXRpb24gbWFpbGluZyBsaXN0ClZpcnR1
YWxpemF0aW9uQGxpc3RzLmxpbnV4LWZvdW5kYXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGludXhm
b3VuZGF0aW9uLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3ZpcnR1YWxpemF0aW9u
