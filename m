Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from mail.linuxfoundation.org (mail.linuxfoundation.org [140.211.169.12])
	by mail.lfdr.de (Postfix) with ESMTPS id 8CCEDB63C0
	for <lists.virtualization@lfdr.de>; Wed, 18 Sep 2019 14:57:09 +0200 (CEST)
Received: from mail.linux-foundation.org (localhost [127.0.0.1])
	by mail.linuxfoundation.org (Postfix) with ESMTP id 7569ACC6;
	Wed, 18 Sep 2019 12:57:01 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@mail.linuxfoundation.org
Received: from smtp1.linuxfoundation.org (smtp1.linux-foundation.org
	[172.17.192.35])
	by mail.linuxfoundation.org (Postfix) with ESMTPS id CEE65CAC
	for <virtualization@lists.linux-foundation.org>;
	Wed, 18 Sep 2019 12:56:59 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by smtp1.linuxfoundation.org (Postfix) with ESMTPS id 343788AA
	for <virtualization@lists.linux-foundation.org>;
	Wed, 18 Sep 2019 12:56:57 +0000 (UTC)
Received: from mail-wr1-f69.google.com (mail-wr1-f69.google.com
	[209.85.221.69])
	(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
	(No client certificate requested)
	by mx1.redhat.com (Postfix) with ESMTPS id E028F550BB
	for <virtualization@lists.linux-foundation.org>;
	Wed, 18 Sep 2019 12:56:55 +0000 (UTC)
Received: by mail-wr1-f69.google.com with SMTP id w8so2345998wrm.3
	for <virtualization@lists.linux-foundation.org>;
	Wed, 18 Sep 2019 05:56:55 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=1e100.net; s=20161025;
	h=x-gm-message-state:date:from:to:cc:subject:message-id:references
	:mime-version:content-disposition:content-transfer-encoding
	:in-reply-to;
	bh=plMY3Ez0wUfdJsn/CJ+rsL4S5EnMErj/7R5cabmIbh4=;
	b=Z+R5jNQ9Vuj47OFps9/9F1I4/mUmI77a6zxfe2C3JuN1s0RNzDd+JpzartEZjvlFcl
	nLYTMpJpoMugStfEFc9OSSxG1oBlY+H3KS9U3BaMKSD9ruvDIHTHQhHHTQmKRhe9MTKU
	/mujPwRM54EicRe2UW+sjy7gr28mHyeB4P3B1RPcQgTkYAsU1OeYoW/NvASvt3wc3ZQu
	5Aa+p0Ed6zGjmsiCJFEyPVyNG5z7+uE5i/h4+vIbWRIimaW25iLCXlGlkec/INTFtoLm
	s5jF6EmSPfLfESrDloUZAUp4t0D2kkflyC7wbkpASaqwn4/34ck4nn0BzVXi6xmjqIEB
	S/MA==
X-Gm-Message-State: APjAAAXRnGZW0LpUxd4spG6HWEFiEnfkTt+CaaHX1JwNBtLUHwx1e36Z
	3HSxvQfcnkTjRHVu1bT8GyCzcm5Jl/lRKDGa8/mGlQBDLiVYeHMHxRqoeoDxDQbWOTaHamP6das
	01Gbp5Dt9SRTy6+0LjyhedVyRgGHwqkuk01ugPqXZJA==
X-Received: by 2002:adf:df91:: with SMTP id z17mr2833262wrl.116.1568811414326; 
	Wed, 18 Sep 2019 05:56:54 -0700 (PDT)
X-Google-Smtp-Source: APXvYqzx8b6otIcLd5FrziRLQjnsT1IzHneWDmtmEDMxsbDOx+pP/EDr1Igz36bPiw2Ucew/eG3/5w==
X-Received: by 2002:adf:df91:: with SMTP id z17mr2833234wrl.116.1568811413788; 
	Wed, 18 Sep 2019 05:56:53 -0700 (PDT)
Received: from redhat.com (bzq-79-176-40-226.red.bezeqint.net. [79.176.40.226])
	by smtp.gmail.com with ESMTPSA id
	w125sm4435625wmg.32.2019.09.18.05.56.50
	(version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
	Wed, 18 Sep 2019 05:56:52 -0700 (PDT)
Date: Wed, 18 Sep 2019 08:56:49 -0400
From: "Michael S. Tsirkin" <mst@redhat.com>
To: Miklos Szeredi <mszeredi@redhat.com>
Subject: Re: [PATCH v6] virtio-fs: add virtiofs filesystem
Message-ID: <20190918084651-mutt-send-email-mst@kernel.org>
References: <20190912141931.30819-1-mszeredi@redhat.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20190912141931.30819-1-mszeredi@redhat.com>
X-Spam-Status: No, score=-6.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_HI
	autolearn=ham version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	smtp1.linux-foundation.org
Cc: "Dr. David Alan Gilbert" <dgilbert@redhat.com>,
	linux-kernel@vger.kernel.org, Stefan Hajnoczi <stefanha@redhat.com>,
	linux-fsdevel@vger.kernel.org, virtualization@lists.linux-foundation.org,
	Vivek Goyal <vgoyal@redhat.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.12
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: virtualization-bounces@lists.linux-foundation.org
Errors-To: virtualization-bounces@lists.linux-foundation.org

T24gVGh1LCBTZXAgMTIsIDIwMTkgYXQgMDQ6MTk6MzFQTSArMDIwMCwgTWlrbG9zIFN6ZXJlZGkg
d3JvdGU6Cj4gRnJvbTogU3RlZmFuIEhham5vY3ppIDxzdGVmYW5oYUByZWRoYXQuY29tPgo+IAo+
IE1pY2hhZWwsCj4gCj4gSGVyZSdzIGEgdjYgb2YgdGhlIHZpcnRpb2ZzIGNvZGUgKGZ1c2UuZ2l0
I3ZpcnRpb2ZzLXY2KS4gIEkgdGhpbmsgd2UndmUKPiBhZGRyZXNzZWQgYWxsIHlvdXIgY29tbWVu
dHMuCj4gCj4gV291bGQgeW91IG1pbmQgZ2l2aW5nIGl0IGFub3RoZXIgbG9vaywgYW5kIGlmIHlv
dSdyZSBzYXRpc2ZpZWQgYWNraW5nIHRoaXMKPiBwYXRjaD8KPiAKPiBUaGFua3MsCj4gTWlrbG9z
Cj4gCj4gLS0tLQo+IEFkZCBhIGJhc2ljIGZpbGUgc3lzdGVtIG1vZHVsZSBmb3IgdmlydGlvLWZz
LiAgVGhpcyBkb2VzIG5vdCB5ZXQgY29udGFpbgo+IHNoYXJlZCBkYXRhIHN1cHBvcnQgYmV0d2Vl
biBob3N0IGFuZCBndWVzdCBvciBtZXRhZGF0YSBjb2hlcmVuY3kgc3BlZWR1cHMuCj4gSG93ZXZl
ciBpdCBpcyBhbHJlYWR5IHNpZ25pZmljYW50bHkgZmFzdGVyIHRoYW4gdmlydGlvLTlwLgo+IAo+
IERlc2lnbiBPdmVydmlldwo+ID09PT09PT09PT09PT09PQo+IAo+IFdpdGggdGhlIGdvYWwgb2Yg
ZGVzaWduaW5nIHNvbWV0aGluZyB3aXRoIGJldHRlciBwZXJmb3JtYW5jZSBhbmQgbG9jYWwgZmls
ZQo+IHN5c3RlbSBzZW1hbnRpY3MsIGEgYnVuY2ggb2YgaWRlYXMgd2VyZSBwcm9wb3NlZC4KPiAK
PiAgLSBVc2UgZnVzZSBwcm90b2NvbCAoaW5zdGVhZCBvZiA5cCkgZm9yIGNvbW11bmljYXRpb24g
YmV0d2VlbiBndWVzdCBhbmQKPiAgICBob3N0LiAgR3Vlc3Qga2VybmVsIHdpbGwgYmUgZnVzZSBj
bGllbnQgYW5kIGEgZnVzZSBzZXJ2ZXIgd2lsbCBydW4gb24KPiAgICBob3N0IHRvIHNlcnZlIHRo
ZSByZXF1ZXN0cy4KPiAKPiAgLSBGb3IgZGF0YSBhY2Nlc3MgaW5zaWRlIGd1ZXN0LCBtbWFwIHBv
cnRpb24gb2YgZmlsZSBpbiBRRU1VIGFkZHJlc3Mgc3BhY2UKPiAgICBhbmQgZ3Vlc3QgYWNjZXNz
ZXMgdGhpcyBtZW1vcnkgdXNpbmcgZGF4LiAgVGhhdCB3YXkgZ3Vlc3QgcGFnZSBjYWNoZSBpcwo+
ICAgIGJ5cGFzc2VkIGFuZCB0aGVyZSBpcyBvbmx5IG9uZSBjb3B5IG9mIGRhdGEgKG9uIGhvc3Qp
LiAgVGhpcyB3aWxsIGFsc28KPiAgICBlbmFibGUgbW1hcChNQVBfU0hBUkVEKSBiZXR3ZWVuIGd1
ZXN0cy4KPiAKPiAgLSBGb3IgbWV0YWRhdGEgY29oZXJlbmN5LCB0aGVyZSBpcyBhIHNoYXJlZCBt
ZW1vcnkgcmVnaW9uIHdoaWNoIGNvbnRhaW5zCj4gICAgdmVyc2lvbiBudW1iZXIgYXNzb2NpYXRl
ZCB3aXRoIG1ldGFkYXRhIGFuZCBhbnkgZ3Vlc3QgY2hhbmdpbmcgbWV0YWRhdGEKPiAgICB1cGRh
dGVzIHZlcnNpb24gbnVtYmVyIGFuZCBvdGhlciBndWVzdHMgcmVmcmVzaCBtZXRhZGF0YSBvbiBu
ZXh0IGFjY2Vzcy4KPiAgICBUaGlzIGlzIHlldCB0byBiZSBpbXBsZW1lbnRlZC4KPiAKPiBIb3cg
dmlydGlvLWZzIGRpZmZlcnMgZnJvbSBleGlzdGluZyBhcHByb2FjaGVzCj4gPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQo+IAo+IFRoZSB1bmlxdWUgaWRlYSBi
ZWhpbmQgdmlydGlvLWZzIGlzIHRvIHRha2UgYWR2YW50YWdlIG9mIHRoZSBjby1sb2NhdGlvbiBv
Zgo+IHRoZSB2aXJ0dWFsIG1hY2hpbmUgYW5kIGh5cGVydmlzb3IgdG8gYXZvaWQgY29tbXVuaWNh
dGlvbiAodm1leGl0cykuCj4gCj4gREFYIGFsbG93cyBmaWxlIGNvbnRlbnRzIHRvIGJlIGFjY2Vz
c2VkIHdpdGhvdXQgY29tbXVuaWNhdGlvbiB3aXRoIHRoZQo+IGh5cGVydmlzb3IuICBUaGUgc2hh
cmVkIG1lbW9yeSByZWdpb24gZm9yIG1ldGFkYXRhIGF2b2lkcyBjb21tdW5pY2F0aW9uIGluCj4g
dGhlIGNvbW1vbiBjYXNlIHdoZXJlIG1ldGFkYXRhIGlzIHVuY2hhbmdlZC4KPiAKPiBCeSByZXBs
YWNpbmcgZXhwZW5zaXZlIGNvbW11bmljYXRpb24gd2l0aCBjaGVhcGVyIHNoYXJlZCBtZW1vcnkg
YWNjZXNzZXMsCj4gd2UgZXhwZWN0IHRvIGFjaGlldmUgYmV0dGVyIHBlcmZvcm1hbmNlIHRoYW4g
YXBwcm9hY2hlcyBiYXNlZCBvbiBuZXR3b3JrCj4gZmlsZSBzeXN0ZW0gcHJvdG9jb2xzLiAgSW4g
YWRkaXRpb24sIHRoaXMgYWxzbyBtYWtlcyBpdCBlYXNpZXIgdG8gYWNoaWV2ZQo+IGxvY2FsIGZp
bGUgc3lzdGVtIHNlbWFudGljcyAoY29oZXJlbmN5KS4KPiAKPiBUaGVzZSB0ZWNobmlxdWVzIGFy
ZSBub3QgYXBwbGljYWJsZSB0byBuZXR3b3JrIGZpbGUgc3lzdGVtIHByb3RvY29scyBzaW5jZQo+
IHRoZSBjb21tdW5pY2F0aW9ucyBjaGFubmVsIGlzIGJ5cGFzc2VkIGJ5IHRha2luZyBhZHZhbnRh
Z2Ugb2Ygc2hhcmVkIG1lbW9yeQo+IG9uIGEgbG9jYWwgbWFjaGluZS4gIFRoaXMgaXMgd2h5IHdl
IGRlY2lkZWQgdG8gYnVpbGQgdmlydGlvLWZzIHJhdGhlciB0aGFuCj4gZm9jdXMgb24gOVAgb3Ig
TkZTLgo+IAo+IENhY2hpbmcgTW9kZXMKPiA9PT09PT09PT09PT09Cj4gCj4gTGlrZSB2aXJ0aW8t
OXAsIGRpZmZlcmVudCBjYWNoaW5nIG1vZGVzIGFyZSBzdXBwb3J0ZWQgd2hpY2ggZGV0ZXJtaW5l
IHRoZQo+IGNvaGVyZW5jeSBsZXZlbCBhcyB3ZWxsLiAgVGhlIOKAnGNhY2hlPUZPT+KAnSBhbmQg
4oCcd3JpdGViYWNr4oCdIG9wdGlvbnMgY29udHJvbAo+IHRoZSBsZXZlbCBvZiBjb2hlcmVuY2Ug
YmV0d2VlbiB0aGUgZ3Vlc3QgYW5kIGhvc3QgZmlsZXN5c3RlbXMuCj4gCj4gIC0gY2FjaGU9bm9u
ZQo+ICAgIG1ldGFkYXRhLCBkYXRhIGFuZCBwYXRobmFtZSBsb29rdXAgYXJlIG5vdCBjYWNoZWQg
aW4gZ3Vlc3QuICBUaGV5IGFyZQo+ICAgIGFsd2F5cyBmZXRjaGVkIGZyb20gaG9zdCBhbmQgYW55
IGNoYW5nZXMgYXJlIGltbWVkaWF0ZWx5IHB1c2hlZCB0byBob3N0Lgo+IAo+ICAtIGNhY2hlPWFs
d2F5cwo+ICAgIG1ldGFkYXRhLCBkYXRhIGFuZCBwYXRobmFtZSBsb29rdXAgYXJlIGNhY2hlZCBp
biBndWVzdCBhbmQgbmV2ZXIgZXhwaXJlLgo+IAo+ICAtIGNhY2hlPWF1dG8KPiAgICBtZXRhZGF0
YSBhbmQgcGF0aG5hbWUgbG9va3VwIGNhY2hlIGV4cGlyZXMgYWZ0ZXIgYSBjb25maWd1cmVkIGFt
b3VudCBvZgo+ICAgIHRpbWUgKGRlZmF1bHQgaXMgMSBzZWNvbmQpLiAgRGF0YSBpcyBjYWNoZWQg
d2hpbGUgdGhlIGZpbGUgaXMgb3Blbgo+ICAgIChjbG9zZSB0byBvcGVuIGNvbnNpc3RlbmN5KS4K
PiAKPiAgLSB3cml0ZWJhY2svbm9fd3JpdGViYWNrCj4gICAgVGhlc2Ugb3B0aW9ucyBjb250cm9s
IHRoZSB3cml0ZWJhY2sgc3RyYXRlZ3kuICBJZiB3cml0ZWJhY2sgaXMgZGlzYWJsZWQsCj4gICAg
dGhlbiBub3JtYWwgd3JpdGVzIHdpbGwgaW1tZWRpYXRlbHkgYmUgc3luY2hyb25pemVkIHdpdGgg
dGhlIGhvc3QgZnMuCj4gICAgSWYgd3JpdGViYWNrIGlzIGVuYWJsZWQsIHRoZW4gd3JpdGVzIG1h
eSBiZSBjYWNoZWQgaW4gdGhlIGd1ZXN0IHVudGlsCj4gICAgdGhlIGZpbGUgaXMgY2xvc2VkIG9y
IGFuIGZzeW5jKDIpIHBlcmZvcm1lZC4gIFRoaXMgb3B0aW9uIGhhcyBubyBlZmZlY3QKPiAgICBv
biBtbWFwLWVkIHdyaXRlcyBvciB3cml0ZXMgZ29pbmcgdGhyb3VnaCB0aGUgREFYIG1lY2hhbmlz
bS4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBTdGVmYW4gSGFqbm9jemkgPHN0ZWZhbmhhQHJlZGhhdC5j
b20+Cj4gU2lnbmVkLW9mZi1ieTogVml2ZWsgR295YWwgPHZnb3lhbEByZWRoYXQuY29tPgo+IFNp
Z25lZC1vZmYtYnk6IE1pa2xvcyBTemVyZWRpIDxtc3plcmVkaUByZWRoYXQuY29tPgoKCk92ZXJh
bGwgdGhpcyBsb29rcyBvayB0byBtZS4gSGFuZGxpbmcgZnVsbCB2cSBieSBhIHRpbWVyIGlzIHJl
YWxseSBncm9zcwpidXQgaXQncyBjb3JyZWN0IC0ganVzdCB0ZXJyaWJseSBpbmVmZmljaWVudC4g
IEkgdGhpbmsgeW91IHNob3VsZCBhZGQgYQpNQUlOVEFJTkVSUyBlbnRyeSB0aG91Z2gsIHdlIHdh
bnQKdmlydHVhbGl6YXRpb25AbGlzdHMubGludXgtZm91bmRhdGlvbi5vcmcgQ2MnZCBvbiBwYXRj
aGVzLgoKV2l0aCB0aGF0IGNvcnJlY3RlZDoKCkFja2VkLWJ5OiBNaWNoYWVsIFMuIFRzaXJraW4g
PG1zdEByZWRoYXQuY29tPgoKV2hvJ3MgZ29pbmcgdG8gbWVyZ2UgdGhpcz8gTWlrbG9zIGRvIHlv
dSB3YW50IHRvIG1lcmdlIGl0IHlvdXJzZWxmPwoKPiAtLS0KPiAgZnMvZnVzZS9LY29uZmlnICAg
ICAgICAgICAgICAgICB8ICAgMTEgKwo+ICBmcy9mdXNlL01ha2VmaWxlICAgICAgICAgICAgICAg
IHwgICAgMSArCj4gIGZzL2Z1c2UvZnVzZV9pLmggICAgICAgICAgICAgICAgfCAgICA5ICsKPiAg
ZnMvZnVzZS9pbm9kZS5jICAgICAgICAgICAgICAgICB8ICAgIDQgKwo+ICBmcy9mdXNlL3ZpcnRp
b19mcy5jICAgICAgICAgICAgIHwgMTE5NSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
Cj4gIGluY2x1ZGUvdWFwaS9saW51eC92aXJ0aW9fZnMuaCAgfCAgIDE5ICsKPiAgaW5jbHVkZS91
YXBpL2xpbnV4L3ZpcnRpb19pZHMuaCB8ICAgIDEgKwo+ICA3IGZpbGVzIGNoYW5nZWQsIDEyNDAg
aW5zZXJ0aW9ucygrKQo+ICBjcmVhdGUgbW9kZSAxMDA2NDQgZnMvZnVzZS92aXJ0aW9fZnMuYwo+
ICBjcmVhdGUgbW9kZSAxMDA2NDQgaW5jbHVkZS91YXBpL2xpbnV4L3ZpcnRpb19mcy5oCj4gCj4g
ZGlmZiAtLWdpdCBhL2ZzL2Z1c2UvS2NvbmZpZyBiL2ZzL2Z1c2UvS2NvbmZpZwo+IGluZGV4IDI0
ZmM1YTVjMWI5Ny4uMDYzNWNiYTE5OTcxIDEwMDY0NAo+IC0tLSBhL2ZzL2Z1c2UvS2NvbmZpZwo+
ICsrKyBiL2ZzL2Z1c2UvS2NvbmZpZwo+IEBAIC0yNywzICsyNywxNCBAQCBjb25maWcgQ1VTRQo+
ICAKPiAgCSAgSWYgeW91IHdhbnQgdG8gZGV2ZWxvcCBvciB1c2UgYSB1c2Vyc3BhY2UgY2hhcmFj
dGVyIGRldmljZQo+ICAJICBiYXNlZCBvbiBDVVNFLCBhbnN3ZXIgWSBvciBNLgo+ICsKPiArY29u
ZmlnIFZJUlRJT19GUwo+ICsJdHJpc3RhdGUgIlZpcnRpbyBGaWxlc3lzdGVtIgo+ICsJZGVwZW5k
cyBvbiBGVVNFX0ZTCj4gKwlzZWxlY3QgVklSVElPCj4gKwloZWxwCj4gKwkgIFRoZSBWaXJ0aW8g
RmlsZXN5c3RlbSBhbGxvd3MgZ3Vlc3RzIHRvIG1vdW50IGZpbGUgc3lzdGVtcyBmcm9tIHRoZQo+
ICsgICAgICAgICAgaG9zdC4KPiArCj4gKwkgIElmIHlvdSB3YW50IHRvIHNoYXJlIGZpbGVzIGJl
dHdlZW4gZ3Vlc3RzIG9yIHdpdGggdGhlIGhvc3QsIGFuc3dlciBZCj4gKyAgICAgICAgICBvciBN
Lgo+IGRpZmYgLS1naXQgYS9mcy9mdXNlL01ha2VmaWxlIGIvZnMvZnVzZS9NYWtlZmlsZQo+IGlu
ZGV4IDk0ODUwMTljMmExNC4uNjQxOWEyYjM1MTBkIDEwMDY0NAo+IC0tLSBhL2ZzL2Z1c2UvTWFr
ZWZpbGUKPiArKysgYi9mcy9mdXNlL01ha2VmaWxlCj4gQEAgLTUsNSArNSw2IEBACj4gIAo+ICBv
YmotJChDT05GSUdfRlVTRV9GUykgKz0gZnVzZS5vCj4gIG9iai0kKENPTkZJR19DVVNFKSArPSBj
dXNlLm8KPiArb2JqLSQoQ09ORklHX1ZJUlRJT19GUykgKz0gdmlydGlvX2ZzLm8KPiAgCj4gIGZ1
c2Utb2JqcyA6PSBkZXYubyBkaXIubyBmaWxlLm8gaW5vZGUubyBjb250cm9sLm8geGF0dHIubyBh
Y2wubyByZWFkZGlyLm8KPiBkaWZmIC0tZ2l0IGEvZnMvZnVzZS9mdXNlX2kuaCBiL2ZzL2Z1c2Uv
ZnVzZV9pLmgKPiBpbmRleCBmYzg5Y2I0MGU4NzQuLjRkMTI0MGE4NzExYiAxMDA2NDQKPiAtLS0g
YS9mcy9mdXNlL2Z1c2VfaS5oCj4gKysrIGIvZnMvZnVzZS9mdXNlX2kuaAo+IEBAIC0zNTMsNiAr
MzUzLDEwIEBAIHN0cnVjdCBmdXNlX3JlcSB7Cj4gIAkvKiogVXNlZCB0byB3YWtlIHVwIHRoZSB0
YXNrIHdhaXRpbmcgZm9yIGNvbXBsZXRpb24gb2YgcmVxdWVzdCovCj4gIAl3YWl0X3F1ZXVlX2hl
YWRfdCB3YWl0cTsKPiAgCj4gKyNpZiBJU19FTkFCTEVEKENPTkZJR19WSVJUSU9fRlMpCj4gKwkv
KiogdmlydGlvLWZzJ3MgcGh5c2ljYWxseSBjb250aWd1b3VzIGJ1ZmZlciBmb3IgaW4gYW5kIG91
dCBhcmdzICovCj4gKwl2b2lkICphcmdidWY7Cj4gKyNlbmRpZgo+ICB9Owo+ICAKPiAgc3RydWN0
IGZ1c2VfaXF1ZXVlOwo+IEBAIC0zODMsNiArMzg3LDExIEBAIHN0cnVjdCBmdXNlX2lxdWV1ZV9v
cHMgewo+ICAJICovCj4gIAl2b2lkICgqd2FrZV9wZW5kaW5nX2FuZF91bmxvY2spKHN0cnVjdCBm
dXNlX2lxdWV1ZSAqZmlxKQo+ICAJCV9fcmVsZWFzZXMoZmlxLT5sb2NrKTsKPiArCj4gKwkvKioK
PiArCSAqIENsZWFudXAgdXAgd2hlbiBmdXNlX2lxdWV1ZSBpcyBkZXN0cm95ZWQKCkNsZWFudXAg
dXAgLT4gQ2xlYW4gdXAKCj4gKwkgKi8KPiArCXZvaWQgKCpyZWxlYXNlKShzdHJ1Y3QgZnVzZV9p
cXVldWUgKmZpcSk7Cj4gIH07Cj4gIAo+ICAvKiogL2Rldi9mdXNlIGlucHV0IHF1ZXVlIG9wZXJh
dGlvbnMgKi8KPiBkaWZmIC0tZ2l0IGEvZnMvZnVzZS9pbm9kZS5jIGIvZnMvZnVzZS9pbm9kZS5j
Cj4gaW5kZXggMTBkMTkzYjI0ZmI4Li4zZDU5OGE1YmI1YjUgMTAwNjQ0Cj4gLS0tIGEvZnMvZnVz
ZS9pbm9kZS5jCj4gKysrIGIvZnMvZnVzZS9pbm9kZS5jCj4gQEAgLTYzMCw2ICs2MzAsMTAgQEAg
RVhQT1JUX1NZTUJPTF9HUEwoZnVzZV9jb25uX2luaXQpOwo+ICB2b2lkIGZ1c2VfY29ubl9wdXQo
c3RydWN0IGZ1c2VfY29ubiAqZmMpCj4gIHsKPiAgCWlmIChyZWZjb3VudF9kZWNfYW5kX3Rlc3Qo
JmZjLT5jb3VudCkpIHsKPiArCQlzdHJ1Y3QgZnVzZV9pcXVldWUgKmZpcSA9ICZmYy0+aXE7Cj4g
Kwo+ICsJCWlmIChmaXEtPm9wcy0+cmVsZWFzZSkKPiArCQkJZmlxLT5vcHMtPnJlbGVhc2UoZmlx
KTsKPiAgCQlwdXRfcGlkX25zKGZjLT5waWRfbnMpOwo+ICAJCXB1dF91c2VyX25zKGZjLT51c2Vy
X25zKTsKPiAgCQlmYy0+cmVsZWFzZShmYyk7Cj4gZGlmZiAtLWdpdCBhL2ZzL2Z1c2UvdmlydGlv
X2ZzLmMgYi9mcy9mdXNlL3ZpcnRpb19mcy5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRl
eCAwMDAwMDAwMDAwMDAuLjM5MmI5ZTdkOWRkZgo+IC0tLSAvZGV2L251bGwKPiArKysgYi9mcy9m
dXNlL3ZpcnRpb19mcy5jCj4gQEAgLTAsMCArMSwxMTk1IEBACj4gKy8vIFNQRFgtTGljZW5zZS1J
ZGVudGlmaWVyOiBHUEwtMi4wCj4gKy8qCj4gKyAqIHZpcnRpby1mczogVmlydGlvIEZpbGVzeXN0
ZW0KPiArICogQ29weXJpZ2h0IChDKSAyMDE4IFJlZCBIYXQsIEluYy4KCgoyMDE5IGF0IHRoaXMg
cG9pbnQ/Cgo+ICsgKi8KPiArCj4gKyNpbmNsdWRlIDxsaW51eC9mcy5oPgo+ICsjaW5jbHVkZSA8
bGludXgvbW9kdWxlLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC92aXJ0aW8uaD4KPiArI2luY2x1ZGUg
PGxpbnV4L3ZpcnRpb19mcy5oPgo+ICsjaW5jbHVkZSA8bGludXgvZGVsYXkuaD4KPiArI2luY2x1
ZGUgPGxpbnV4L2ZzX2NvbnRleHQuaD4KPiArI2luY2x1ZGUgPGxpbnV4L2hpZ2htZW0uaD4KPiAr
I2luY2x1ZGUgImZ1c2VfaS5oIgo+ICsKPiArLyogTGlzdCBvZiB2aXJ0aW8tZnMgZGV2aWNlIGlu
c3RhbmNlcyBhbmQgYSBsb2NrIGZvciB0aGUgbGlzdC4gQWxzbyBwcm92aWRlcwo+ICsgKiBtdXR1
YWwgZXhjbHVzaW9uIGluIGRldmljZSByZW1vdmFsIGFuZCBtb3VudGluZyBwYXRoCj4gKyAqLwo+
ICtzdGF0aWMgREVGSU5FX01VVEVYKHZpcnRpb19mc19tdXRleCk7Cj4gK3N0YXRpYyBMSVNUX0hF
QUQodmlydGlvX2ZzX2luc3RhbmNlcyk7Cj4gKwo+ICtlbnVtIHsKPiArCVZRX0hJUFJJTywKPiAr
CVZRX1JFUVVFU1QKPiArfTsKPiArCj4gKy8qIFBlci12aXJ0cXVldWUgc3RhdGUgKi8KPiArc3Ry
dWN0IHZpcnRpb19mc192cSB7Cj4gKwlzcGlubG9ja190IGxvY2s7Cj4gKwlzdHJ1Y3QgdmlydHF1
ZXVlICp2cTsgICAgIC8qIHByb3RlY3RlZCBieSAtPmxvY2sgKi8KPiArCXN0cnVjdCB3b3JrX3N0
cnVjdCBkb25lX3dvcms7Cj4gKwlzdHJ1Y3QgbGlzdF9oZWFkIHF1ZXVlZF9yZXFzOwo+ICsJc3Ry
dWN0IGRlbGF5ZWRfd29yayBkaXNwYXRjaF93b3JrOwo+ICsJc3RydWN0IGZ1c2VfZGV2ICpmdWQ7
Cj4gKwlib29sIGNvbm5lY3RlZDsKPiArCWxvbmcgaW5fZmxpZ2h0Owo+ICsJY2hhciBuYW1lWzI0
XTsKPiArfSBfX19fY2FjaGVsaW5lX2FsaWduZWRfaW5fc21wOwo+ICsKPiArLyogQSB2aXJ0aW8t
ZnMgZGV2aWNlIGluc3RhbmNlICovCj4gK3N0cnVjdCB2aXJ0aW9fZnMgewo+ICsJc3RydWN0IGty
ZWYgcmVmY291bnQ7Cj4gKwlzdHJ1Y3QgbGlzdF9oZWFkIGxpc3Q7ICAgIC8qIG9uIHZpcnRpb19m
c19pbnN0YW5jZXMgKi8KPiArCWNoYXIgKnRhZzsKPiArCXN0cnVjdCB2aXJ0aW9fZnNfdnEgKnZx
czsKPiArCXVuc2lnbmVkIGludCBudnFzOyAgICAgICAgICAgIC8qIG51bWJlciBvZiB2aXJ0cXVl
dWVzICovCj4gKwl1bnNpZ25lZCBpbnQgbnVtX3F1ZXVlczsgICAgICAvKiBudW1iZXIgb2YgcmVx
dWVzdCBxdWV1ZXMgKi8KPiArfTsKPiArCj4gK3N0cnVjdCB2aXJ0aW9fZnNfZm9yZ2V0IHsKPiAr
CXN0cnVjdCBmdXNlX2luX2hlYWRlciBpaDsKPiArCXN0cnVjdCBmdXNlX2ZvcmdldF9pbiBhcmc7
Cj4gKwkvKiBUaGlzIHJlcXVlc3QgY2FuIGJlIHRlbXBvcmFyaWx5IHF1ZXVlZCBvbiB2aXJ0IHF1
ZXVlICovCj4gKwlzdHJ1Y3QgbGlzdF9oZWFkIGxpc3Q7Cj4gK307Cj4gKwo+ICtzdGF0aWMgaW5s
aW5lIHN0cnVjdCB2aXJ0aW9fZnNfdnEgKnZxX3RvX2ZzdnEoc3RydWN0IHZpcnRxdWV1ZSAqdnEp
Cj4gK3sKPiArCXN0cnVjdCB2aXJ0aW9fZnMgKmZzID0gdnEtPnZkZXYtPnByaXY7Cj4gKwo+ICsJ
cmV0dXJuICZmcy0+dnFzW3ZxLT5pbmRleF07Cj4gK30KPiArCj4gK3N0YXRpYyBpbmxpbmUgc3Ry
dWN0IGZ1c2VfcHF1ZXVlICp2cV90b19mcHEoc3RydWN0IHZpcnRxdWV1ZSAqdnEpCj4gK3sKPiAr
CXJldHVybiAmdnFfdG9fZnN2cSh2cSktPmZ1ZC0+cHE7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lk
IHJlbGVhc2VfdmlydGlvX2ZzX29iaihzdHJ1Y3Qga3JlZiAqcmVmKQo+ICt7Cj4gKwlzdHJ1Y3Qg
dmlydGlvX2ZzICp2ZnMgPSBjb250YWluZXJfb2YocmVmLCBzdHJ1Y3QgdmlydGlvX2ZzLCByZWZj
b3VudCk7Cj4gKwo+ICsJa2ZyZWUodmZzLT52cXMpOwo+ICsJa2ZyZWUodmZzKTsKPiArfQo+ICsK
PiArLyogTWFrZSBzdXJlIHZpcnRpb2ZzX211dGV4IGlzIGhlbGQgKi8KPiArc3RhdGljIHZvaWQg
dmlydGlvX2ZzX3B1dChzdHJ1Y3QgdmlydGlvX2ZzICpmcykKPiArewo+ICsJa3JlZl9wdXQoJmZz
LT5yZWZjb3VudCwgcmVsZWFzZV92aXJ0aW9fZnNfb2JqKTsKPiArfQo+ICsKPiArc3RhdGljIHZv
aWQgdmlydGlvX2ZzX2ZpcV9yZWxlYXNlKHN0cnVjdCBmdXNlX2lxdWV1ZSAqZmlxKQo+ICt7Cj4g
KwlzdHJ1Y3QgdmlydGlvX2ZzICp2ZnMgPSBmaXEtPnByaXY7Cj4gKwo+ICsJbXV0ZXhfbG9jaygm
dmlydGlvX2ZzX211dGV4KTsKPiArCXZpcnRpb19mc19wdXQodmZzKTsKPiArCW11dGV4X3VubG9j
aygmdmlydGlvX2ZzX211dGV4KTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgdmlydGlvX2ZzX2Ry
YWluX3F1ZXVlKHN0cnVjdCB2aXJ0aW9fZnNfdnEgKmZzdnEpCj4gK3sKPiArCVdBUk5fT04oZnN2
cS0+aW5fZmxpZ2h0IDwgMCk7Cj4gKwo+ICsJLyogV2FpdCBmb3IgaW4gZmxpZ2h0IHJlcXVlc3Rz
IHRvIGZpbmlzaC4qLwo+ICsJd2hpbGUgKDEpIHsKPiArCQlzcGluX2xvY2soJmZzdnEtPmxvY2sp
Owo+ICsJCWlmICghZnN2cS0+aW5fZmxpZ2h0KSB7Cj4gKwkJCXNwaW5fdW5sb2NrKCZmc3ZxLT5s
b2NrKTsKPiArCQkJYnJlYWs7Cj4gKwkJfQo+ICsJCXNwaW5fdW5sb2NrKCZmc3ZxLT5sb2NrKTsK
PiArCQkvKiBUT0RPIHVzZSBjb21wbGV0aW9uIGluc3RlYWQgb2YgdGltZW91dCAqLwo+ICsJCXVz
bGVlcF9yYW5nZSgxMDAwLCAyMDAwKTsKPiArCX0KPiArCj4gKwlmbHVzaF93b3JrKCZmc3ZxLT5k
b25lX3dvcmspOwo+ICsJZmx1c2hfZGVsYXllZF93b3JrKCZmc3ZxLT5kaXNwYXRjaF93b3JrKTsK
PiArfQo+ICsKPiArc3RhdGljIGlubGluZSB2b2lkIGRyYWluX2hpcHJpb19xdWV1ZWRfcmVxcyhz
dHJ1Y3QgdmlydGlvX2ZzX3ZxICpmc3ZxKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX2ZzX2Zvcmdl
dCAqZm9yZ2V0Owo+ICsKPiArCXNwaW5fbG9jaygmZnN2cS0+bG9jayk7Cj4gKwl3aGlsZSAoMSkg
ewo+ICsJCWZvcmdldCA9IGxpc3RfZmlyc3RfZW50cnlfb3JfbnVsbCgmZnN2cS0+cXVldWVkX3Jl
cXMsCj4gKwkJCQkJCXN0cnVjdCB2aXJ0aW9fZnNfZm9yZ2V0LCBsaXN0KTsKPiArCQlpZiAoIWZv
cmdldCkKPiArCQkJYnJlYWs7Cj4gKwkJbGlzdF9kZWwoJmZvcmdldC0+bGlzdCk7Cj4gKwkJa2Zy
ZWUoZm9yZ2V0KTsKPiArCX0KPiArCXNwaW5fdW5sb2NrKCZmc3ZxLT5sb2NrKTsKPiArfQo+ICsK
PiArc3RhdGljIHZvaWQgdmlydGlvX2ZzX2RyYWluX2FsbF9xdWV1ZXMoc3RydWN0IHZpcnRpb19m
cyAqZnMpCj4gK3sKPiArCXN0cnVjdCB2aXJ0aW9fZnNfdnEgKmZzdnE7Cj4gKwlpbnQgaTsKPiAr
Cj4gKwlmb3IgKGkgPSAwOyBpIDwgZnMtPm52cXM7IGkrKykgewo+ICsJCWZzdnEgPSAmZnMtPnZx
c1tpXTsKPiArCQlpZiAoaSA9PSBWUV9ISVBSSU8pCj4gKwkJCWRyYWluX2hpcHJpb19xdWV1ZWRf
cmVxcyhmc3ZxKTsKPiArCj4gKwkJdmlydGlvX2ZzX2RyYWluX3F1ZXVlKGZzdnEpOwo+ICsJfQo+
ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2aXJ0aW9fZnNfc3RhcnRfYWxsX3F1ZXVlcyhzdHJ1Y3Qg
dmlydGlvX2ZzICpmcykKPiArewo+ICsJc3RydWN0IHZpcnRpb19mc192cSAqZnN2cTsKPiArCWlu
dCBpOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBmcy0+bnZxczsgaSsrKSB7Cj4gKwkJZnN2cSA9
ICZmcy0+dnFzW2ldOwo+ICsJCXNwaW5fbG9jaygmZnN2cS0+bG9jayk7Cj4gKwkJZnN2cS0+Y29u
bmVjdGVkID0gdHJ1ZTsKPiArCQlzcGluX3VubG9jaygmZnN2cS0+bG9jayk7Cj4gKwl9Cj4gK30K
PiArCj4gKy8qIEFkZCBhIG5ldyBpbnN0YW5jZSB0byB0aGUgbGlzdCBvciByZXR1cm4gLUVFWElT
VCBpZiB0YWcgbmFtZSBleGlzdHMqLwo+ICtzdGF0aWMgaW50IHZpcnRpb19mc19hZGRfaW5zdGFu
Y2Uoc3RydWN0IHZpcnRpb19mcyAqZnMpCj4gK3sKPiArCXN0cnVjdCB2aXJ0aW9fZnMgKmZzMjsK
PiArCWJvb2wgZHVwbGljYXRlID0gZmFsc2U7Cj4gKwo+ICsJbXV0ZXhfbG9jaygmdmlydGlvX2Zz
X211dGV4KTsKPiArCj4gKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KGZzMiwgJnZpcnRpb19mc19pbnN0
YW5jZXMsIGxpc3QpIHsKPiArCQlpZiAoc3RyY21wKGZzLT50YWcsIGZzMi0+dGFnKSA9PSAwKQo+
ICsJCQlkdXBsaWNhdGUgPSB0cnVlOwo+ICsJfQo+ICsKPiArCWlmICghZHVwbGljYXRlKQo+ICsJ
CWxpc3RfYWRkX3RhaWwoJmZzLT5saXN0LCAmdmlydGlvX2ZzX2luc3RhbmNlcyk7Cj4gKwo+ICsJ
bXV0ZXhfdW5sb2NrKCZ2aXJ0aW9fZnNfbXV0ZXgpOwo+ICsKPiArCWlmIChkdXBsaWNhdGUpCj4g
KwkJcmV0dXJuIC1FRVhJU1Q7Cj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArLyogUmV0dXJuIHRo
ZSB2aXJ0aW9fZnMgd2l0aCBhIGdpdmVuIHRhZywgb3IgTlVMTCAqLwo+ICtzdGF0aWMgc3RydWN0
IHZpcnRpb19mcyAqdmlydGlvX2ZzX2ZpbmRfaW5zdGFuY2UoY29uc3QgY2hhciAqdGFnKQo+ICt7
Cj4gKwlzdHJ1Y3QgdmlydGlvX2ZzICpmczsKPiArCj4gKwltdXRleF9sb2NrKCZ2aXJ0aW9fZnNf
bXV0ZXgpOwo+ICsKPiArCWxpc3RfZm9yX2VhY2hfZW50cnkoZnMsICZ2aXJ0aW9fZnNfaW5zdGFu
Y2VzLCBsaXN0KSB7Cj4gKwkJaWYgKHN0cmNtcChmcy0+dGFnLCB0YWcpID09IDApIHsKPiArCQkJ
a3JlZl9nZXQoJmZzLT5yZWZjb3VudCk7Cj4gKwkJCWdvdG8gZm91bmQ7Cj4gKwkJfQo+ICsJfQo+
ICsKPiArCWZzID0gTlVMTDsgLyogbm90IGZvdW5kICovCj4gKwo+ICtmb3VuZDoKPiArCW11dGV4
X3VubG9jaygmdmlydGlvX2ZzX211dGV4KTsKPiArCj4gKwlyZXR1cm4gZnM7Cj4gK30KPiArCj4g
K3N0YXRpYyB2b2lkIHZpcnRpb19mc19mcmVlX2RldnMoc3RydWN0IHZpcnRpb19mcyAqZnMpCj4g
K3sKPiArCXVuc2lnbmVkIGludCBpOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBmcy0+bnZxczsg
aSsrKSB7Cj4gKwkJc3RydWN0IHZpcnRpb19mc192cSAqZnN2cSA9ICZmcy0+dnFzW2ldOwo+ICsK
PiArCQlpZiAoIWZzdnEtPmZ1ZCkKPiArCQkJY29udGludWU7Cj4gKwo+ICsJCWZ1c2VfZGV2X2Zy
ZWUoZnN2cS0+ZnVkKTsKPiArCQlmc3ZxLT5mdWQgPSBOVUxMOwo+ICsJfQo+ICt9Cj4gKwo+ICsv
KiBSZWFkIGZpbGVzeXN0ZW0gbmFtZSBmcm9tIHZpcnRpbyBjb25maWcgaW50byBmcy0+dGFnICht
dXN0IGtmcmVlKCkpLiAqLwo+ICtzdGF0aWMgaW50IHZpcnRpb19mc19yZWFkX3RhZyhzdHJ1Y3Qg
dmlydGlvX2RldmljZSAqdmRldiwgc3RydWN0IHZpcnRpb19mcyAqZnMpCj4gK3sKPiArCWNoYXIg
dGFnX2J1ZltzaXplb2ZfZmllbGQoc3RydWN0IHZpcnRpb19mc19jb25maWcsIHRhZyldOwo+ICsJ
Y2hhciAqZW5kOwo+ICsJc2l6ZV90IGxlbjsKPiArCj4gKwl2aXJ0aW9fY3JlYWRfYnl0ZXModmRl
diwgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19mc19jb25maWcsIHRhZyksCj4gKwkJCSAgICZ0YWdf
YnVmLCBzaXplb2YodGFnX2J1ZikpOwo+ICsJZW5kID0gbWVtY2hyKHRhZ19idWYsICdcMCcsIHNp
emVvZih0YWdfYnVmKSk7Cj4gKwlpZiAoZW5kID09IHRhZ19idWYpCj4gKwkJcmV0dXJuIC1FSU5W
QUw7IC8qIGVtcHR5IHRhZyAqLwo+ICsJaWYgKCFlbmQpCj4gKwkJZW5kID0gJnRhZ19idWZbc2l6
ZW9mKHRhZ19idWYpXTsKPiArCj4gKwlsZW4gPSBlbmQgLSB0YWdfYnVmOwo+ICsJZnMtPnRhZyA9
IGRldm1fa21hbGxvYygmdmRldi0+ZGV2LCBsZW4gKyAxLCBHRlBfS0VSTkVMKTsKPiArCWlmICgh
ZnMtPnRhZykKPiArCQlyZXR1cm4gLUVOT01FTTsKPiArCW1lbWNweShmcy0+dGFnLCB0YWdfYnVm
LCBsZW4pOwo+ICsJZnMtPnRhZ1tsZW5dID0gJ1wwJzsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+
ICsvKiBXb3JrIGZ1bmN0aW9uIGZvciBoaXByaW8gY29tcGxldGlvbiAqLwo+ICtzdGF0aWMgdm9p
ZCB2aXJ0aW9fZnNfaGlwcmlvX2RvbmVfd29yayhzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCj4g
K3sKPiArCXN0cnVjdCB2aXJ0aW9fZnNfdnEgKmZzdnEgPSBjb250YWluZXJfb2Yod29yaywgc3Ry
dWN0IHZpcnRpb19mc192cSwKPiArCQkJCQkJIGRvbmVfd29yayk7Cj4gKwlzdHJ1Y3QgdmlydHF1
ZXVlICp2cSA9IGZzdnEtPnZxOwo+ICsKPiArCS8qIEZyZWUgY29tcGxldGVkIEZVU0VfRk9SR0VU
IHJlcXVlc3RzICovCj4gKwlzcGluX2xvY2soJmZzdnEtPmxvY2spOwo+ICsJZG8gewo+ICsJCXVu
c2lnbmVkIGludCBsZW47Cj4gKwkJdm9pZCAqcmVxOwo+ICsKPiArCQl2aXJ0cXVldWVfZGlzYWJs
ZV9jYih2cSk7Cj4gKwo+ICsJCXdoaWxlICgocmVxID0gdmlydHF1ZXVlX2dldF9idWYodnEsICZs
ZW4pKSAhPSBOVUxMKSB7Cj4gKwkJCWtmcmVlKHJlcSk7Cj4gKwkJCWZzdnEtPmluX2ZsaWdodC0t
Owo+ICsJCX0KPiArCX0gd2hpbGUgKCF2aXJ0cXVldWVfZW5hYmxlX2NiKHZxKSAmJiBsaWtlbHko
IXZpcnRxdWV1ZV9pc19icm9rZW4odnEpKSk7Cj4gKwlzcGluX3VubG9jaygmZnN2cS0+bG9jayk7
Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHZpcnRpb19mc19kdW1teV9kaXNwYXRjaF93b3JrKHN0
cnVjdCB3b3JrX3N0cnVjdCAqd29yaykKPiArewo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2aXJ0
aW9fZnNfaGlwcmlvX2Rpc3BhdGNoX3dvcmsoc3RydWN0IHdvcmtfc3RydWN0ICp3b3JrKQo+ICt7
Cj4gKwlzdHJ1Y3QgdmlydGlvX2ZzX2ZvcmdldCAqZm9yZ2V0Owo+ICsJc3RydWN0IHZpcnRpb19m
c192cSAqZnN2cSA9IGNvbnRhaW5lcl9vZih3b3JrLCBzdHJ1Y3QgdmlydGlvX2ZzX3ZxLAo+ICsJ
CQkJCQkgZGlzcGF0Y2hfd29yay53b3JrKTsKPiArCXN0cnVjdCB2aXJ0cXVldWUgKnZxID0gZnN2
cS0+dnE7Cj4gKwlzdHJ1Y3Qgc2NhdHRlcmxpc3Qgc2c7Cj4gKwlzdHJ1Y3Qgc2NhdHRlcmxpc3Qg
KnNnc1tdID0geyZzZ307Cj4gKwlib29sIG5vdGlmeTsKPiArCWludCByZXQ7Cj4gKwo+ICsJcHJf
ZGVidWcoInZpcnRpby1mczogd29ya2VyICVzIGNhbGxlZC5cbiIsIF9fZnVuY19fKTsKPiArCXdo
aWxlICgxKSB7Cj4gKwkJc3Bpbl9sb2NrKCZmc3ZxLT5sb2NrKTsKPiArCQlmb3JnZXQgPSBsaXN0
X2ZpcnN0X2VudHJ5X29yX251bGwoJmZzdnEtPnF1ZXVlZF9yZXFzLAo+ICsJCQkJCXN0cnVjdCB2
aXJ0aW9fZnNfZm9yZ2V0LCBsaXN0KTsKPiArCQlpZiAoIWZvcmdldCkgewo+ICsJCQlzcGluX3Vu
bG9jaygmZnN2cS0+bG9jayk7Cj4gKwkJCXJldHVybjsKPiArCQl9Cj4gKwo+ICsJCWxpc3RfZGVs
KCZmb3JnZXQtPmxpc3QpOwo+ICsJCWlmICghZnN2cS0+Y29ubmVjdGVkKSB7Cj4gKwkJCXNwaW5f
dW5sb2NrKCZmc3ZxLT5sb2NrKTsKPiArCQkJa2ZyZWUoZm9yZ2V0KTsKPiArCQkJY29udGludWU7
Cj4gKwkJfQo+ICsKPiArCQlzZ19pbml0X29uZSgmc2csIGZvcmdldCwgc2l6ZW9mKCpmb3JnZXQp
KTsKPiArCj4gKwkJLyogRW5xdWV1ZSB0aGUgcmVxdWVzdCAqLwo+ICsJCWRldl9kYmcoJnZxLT52
ZGV2LT5kZXYsICIlc1xuIiwgX19mdW5jX18pOwo+ICsJCXJldCA9IHZpcnRxdWV1ZV9hZGRfc2dz
KHZxLCBzZ3MsIDEsIDAsIGZvcmdldCwgR0ZQX0FUT01JQyk7Cj4gKwkJaWYgKHJldCA8IDApIHsK
PiArCQkJaWYgKHJldCA9PSAtRU5PTUVNIHx8IHJldCA9PSAtRU5PU1BDKSB7Cj4gKwkJCQlwcl9k
ZWJ1ZygidmlydGlvLWZzOiBDb3VsZCBub3QgcXVldWUgRk9SR0VUOiBlcnI9JWQuIFdpbGwgdHJ5
IGxhdGVyXG4iLAo+ICsJCQkJCSByZXQpOwo+ICsJCQkJbGlzdF9hZGRfdGFpbCgmZm9yZ2V0LT5s
aXN0LAo+ICsJCQkJCQkmZnN2cS0+cXVldWVkX3JlcXMpOwo+ICsJCQkJc2NoZWR1bGVfZGVsYXll
ZF93b3JrKCZmc3ZxLT5kaXNwYXRjaF93b3JrLAo+ICsJCQkJCQltc2Vjc190b19qaWZmaWVzKDEp
KTsKPiArCQkJfSBlbHNlIHsKPiArCQkJCXByX2RlYnVnKCJ2aXJ0aW8tZnM6IENvdWxkIG5vdCBx
dWV1ZSBGT1JHRVQ6IGVycj0lZC4gRHJvcHBpbmcgaXQuXG4iLAo+ICsJCQkJCSByZXQpOwo+ICsJ
CQkJa2ZyZWUoZm9yZ2V0KTsKPiArCQkJfQo+ICsJCQlzcGluX3VubG9jaygmZnN2cS0+bG9jayk7
Cj4gKwkJCXJldHVybjsKPiArCQl9Cj4gKwo+ICsJCWZzdnEtPmluX2ZsaWdodCsrOwo+ICsJCW5v
dGlmeSA9IHZpcnRxdWV1ZV9raWNrX3ByZXBhcmUodnEpOwo+ICsJCXNwaW5fdW5sb2NrKCZmc3Zx
LT5sb2NrKTsKPiArCj4gKwkJaWYgKG5vdGlmeSkKPiArCQkJdmlydHF1ZXVlX25vdGlmeSh2cSk7
Cj4gKwkJcHJfZGVidWcoInZpcnRpby1mczogd29ya2VyICVzIGRpc3BhdGNoZWQgb25lIGZvcmdl
dCByZXF1ZXN0LlxuIiwKPiArCQkJIF9fZnVuY19fKTsKPiArCX0KPiArfQo+ICsKPiArLyogQWxs
b2NhdGUgYW5kIGNvcHkgYXJncyBpbnRvIHJlcS0+YXJnYnVmICovCj4gK3N0YXRpYyBpbnQgY29w
eV9hcmdzX3RvX2FyZ2J1ZihzdHJ1Y3QgZnVzZV9yZXEgKnJlcSkKPiArewo+ICsJc3RydWN0IGZ1
c2VfYXJncyAqYXJncyA9IHJlcS0+YXJnczsKPiArCXVuc2lnbmVkIGludCBvZmZzZXQgPSAwOwo+
ICsJdW5zaWduZWQgaW50IG51bV9pbjsKPiArCXVuc2lnbmVkIGludCBudW1fb3V0Owo+ICsJdW5z
aWduZWQgaW50IGxlbjsKPiArCXVuc2lnbmVkIGludCBpOwo+ICsKPiArCW51bV9pbiA9IGFyZ3Mt
PmluX251bWFyZ3MgLSBhcmdzLT5pbl9wYWdlczsKPiArCW51bV9vdXQgPSBhcmdzLT5vdXRfbnVt
YXJncyAtIGFyZ3MtPm91dF9wYWdlczsKPiArCWxlbiA9IGZ1c2VfbGVuX2FyZ3MobnVtX2luLCAo
c3RydWN0IGZ1c2VfYXJnICopIGFyZ3MtPmluX2FyZ3MpICsKPiArCSAgICAgIGZ1c2VfbGVuX2Fy
Z3MobnVtX291dCwgYXJncy0+b3V0X2FyZ3MpOwo+ICsKPiArCXJlcS0+YXJnYnVmID0ga21hbGxv
YyhsZW4sIEdGUF9BVE9NSUMpOwo+ICsJaWYgKCFyZXEtPmFyZ2J1ZikKPiArCQlyZXR1cm4gLUVO
T01FTTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgbnVtX2luOyBpKyspIHsKPiArCQltZW1jcHko
cmVxLT5hcmdidWYgKyBvZmZzZXQsCj4gKwkJICAgICAgIGFyZ3MtPmluX2FyZ3NbaV0udmFsdWUs
Cj4gKwkJICAgICAgIGFyZ3MtPmluX2FyZ3NbaV0uc2l6ZSk7Cj4gKwkJb2Zmc2V0ICs9IGFyZ3Mt
PmluX2FyZ3NbaV0uc2l6ZTsKPiArCX0KPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArLyog
Q29weSBhcmdzIG91dCBvZiBhbmQgZnJlZSByZXEtPmFyZ2J1ZiAqLwo+ICtzdGF0aWMgdm9pZCBj
b3B5X2FyZ3NfZnJvbV9hcmdidWYoc3RydWN0IGZ1c2VfYXJncyAqYXJncywgc3RydWN0IGZ1c2Vf
cmVxICpyZXEpCj4gK3sKPiArCXVuc2lnbmVkIGludCByZW1haW5pbmc7Cj4gKwl1bnNpZ25lZCBp
bnQgb2Zmc2V0Owo+ICsJdW5zaWduZWQgaW50IG51bV9pbjsKPiArCXVuc2lnbmVkIGludCBudW1f
b3V0Owo+ICsJdW5zaWduZWQgaW50IGk7Cj4gKwo+ICsJcmVtYWluaW5nID0gcmVxLT5vdXQuaC5s
ZW4gLSBzaXplb2YocmVxLT5vdXQuaCk7Cj4gKwludW1faW4gPSBhcmdzLT5pbl9udW1hcmdzIC0g
YXJncy0+aW5fcGFnZXM7Cj4gKwludW1fb3V0ID0gYXJncy0+b3V0X251bWFyZ3MgLSBhcmdzLT5v
dXRfcGFnZXM7Cj4gKwlvZmZzZXQgPSBmdXNlX2xlbl9hcmdzKG51bV9pbiwgKHN0cnVjdCBmdXNl
X2FyZyAqKWFyZ3MtPmluX2FyZ3MpOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBudW1fb3V0OyBp
KyspIHsKPiArCQl1bnNpZ25lZCBpbnQgYXJnc2l6ZSA9IGFyZ3MtPm91dF9hcmdzW2ldLnNpemU7
Cj4gKwo+ICsJCWlmIChhcmdzLT5vdXRfYXJndmFyICYmCj4gKwkJICAgIGkgPT0gYXJncy0+b3V0
X251bWFyZ3MgLSAxICYmCj4gKwkJICAgIGFyZ3NpemUgPiByZW1haW5pbmcpIHsKPiArCQkJYXJn
c2l6ZSA9IHJlbWFpbmluZzsKPiArCQl9Cj4gKwo+ICsJCW1lbWNweShhcmdzLT5vdXRfYXJnc1tp
XS52YWx1ZSwgcmVxLT5hcmdidWYgKyBvZmZzZXQsIGFyZ3NpemUpOwo+ICsJCW9mZnNldCArPSBh
cmdzaXplOwo+ICsKPiArCQlpZiAoaSAhPSBhcmdzLT5vdXRfbnVtYXJncyAtIDEpCj4gKwkJCXJl
bWFpbmluZyAtPSBhcmdzaXplOwo+ICsJfQo+ICsKPiArCS8qIFN0b3JlIHRoZSBhY3R1YWwgc2l6
ZSBvZiB0aGUgdmFyaWFibGUtbGVuZ3RoIGFyZyAqLwo+ICsJaWYgKGFyZ3MtPm91dF9hcmd2YXIp
Cj4gKwkJYXJncy0+b3V0X2FyZ3NbYXJncy0+b3V0X251bWFyZ3MgLSAxXS5zaXplID0gcmVtYWlu
aW5nOwo+ICsKPiArCWtmcmVlKHJlcS0+YXJnYnVmKTsKPiArCXJlcS0+YXJnYnVmID0gTlVMTDsK
PiArfQo+ICsKPiArLyogV29yayBmdW5jdGlvbiBmb3IgcmVxdWVzdCBjb21wbGV0aW9uICovCj4g
K3N0YXRpYyB2b2lkIHZpcnRpb19mc19yZXF1ZXN0c19kb25lX3dvcmsoc3RydWN0IHdvcmtfc3Ry
dWN0ICp3b3JrKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX2ZzX3ZxICpmc3ZxID0gY29udGFpbmVy
X29mKHdvcmssIHN0cnVjdCB2aXJ0aW9fZnNfdnEsCj4gKwkJCQkJCSBkb25lX3dvcmspOwo+ICsJ
c3RydWN0IGZ1c2VfcHF1ZXVlICpmcHEgPSAmZnN2cS0+ZnVkLT5wcTsKPiArCXN0cnVjdCBmdXNl
X2Nvbm4gKmZjID0gZnN2cS0+ZnVkLT5mYzsKPiArCXN0cnVjdCB2aXJ0cXVldWUgKnZxID0gZnN2
cS0+dnE7Cj4gKwlzdHJ1Y3QgZnVzZV9yZXEgKnJlcTsKPiArCXN0cnVjdCBmdXNlX2FyZ3NfcGFn
ZXMgKmFwOwo+ICsJc3RydWN0IGZ1c2VfcmVxICpuZXh0Owo+ICsJc3RydWN0IGZ1c2VfYXJncyAq
YXJnczsKPiArCXVuc2lnbmVkIGludCBsZW4sIGksIHRoaXNsZW47Cj4gKwlzdHJ1Y3QgcGFnZSAq
cGFnZTsKPiArCUxJU1RfSEVBRChyZXFzKTsKPiArCj4gKwkvKiBDb2xsZWN0IGNvbXBsZXRlZCBy
ZXF1ZXN0cyBvZmYgdGhlIHZpcnRxdWV1ZSAqLwo+ICsJc3Bpbl9sb2NrKCZmc3ZxLT5sb2NrKTsK
PiArCWRvIHsKPiArCQl2aXJ0cXVldWVfZGlzYWJsZV9jYih2cSk7Cj4gKwo+ICsJCXdoaWxlICgo
cmVxID0gdmlydHF1ZXVlX2dldF9idWYodnEsICZsZW4pKSAhPSBOVUxMKSB7Cj4gKwkJCXNwaW5f
bG9jaygmZnBxLT5sb2NrKTsKPiArCQkJbGlzdF9tb3ZlX3RhaWwoJnJlcS0+bGlzdCwgJnJlcXMp
Owo+ICsJCQlzcGluX3VubG9jaygmZnBxLT5sb2NrKTsKPiArCQl9Cj4gKwl9IHdoaWxlICghdmly
dHF1ZXVlX2VuYWJsZV9jYih2cSkgJiYgbGlrZWx5KCF2aXJ0cXVldWVfaXNfYnJva2VuKHZxKSkp
Owo+ICsJc3Bpbl91bmxvY2soJmZzdnEtPmxvY2spOwo+ICsKPiArCS8qIEVuZCByZXF1ZXN0cyAq
Lwo+ICsJbGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKHJlcSwgbmV4dCwgJnJlcXMsIGxpc3QpIHsK
PiArCQkvKgo+ICsJCSAqIFRPRE8gdmVyaWZ5IHRoYXQgc2VydmVyIHByb3Blcmx5IGZvbGxvd3Mg
RlVTRSBwcm90b2NvbAo+ICsJCSAqIChvaC51bmlxLCBvaC5sZW4pCj4gKwkJICovCj4gKwkJYXJn
cyA9IHJlcS0+YXJnczsKPiArCQljb3B5X2FyZ3NfZnJvbV9hcmdidWYoYXJncywgcmVxKTsKPiAr
Cj4gKwkJaWYgKGFyZ3MtPm91dF9wYWdlcyAmJiBhcmdzLT5wYWdlX3plcm9pbmcpIHsKPiArCQkJ
bGVuID0gYXJncy0+b3V0X2FyZ3NbYXJncy0+b3V0X251bWFyZ3MgLSAxXS5zaXplOwo+ICsJCQlh
cCA9IGNvbnRhaW5lcl9vZihhcmdzLCB0eXBlb2YoKmFwKSwgYXJncyk7Cj4gKwkJCWZvciAoaSA9
IDA7IGkgPCBhcC0+bnVtX3BhZ2VzOyBpKyspIHsKPiArCQkJCXRoaXNsZW4gPSBhcC0+ZGVzY3Nb
aV0ubGVuZ3RoOwo+ICsJCQkJaWYgKGxlbiA8IHRoaXNsZW4pIHsKPiArCQkJCQlXQVJOX09OKGFw
LT5kZXNjc1tpXS5vZmZzZXQpOwo+ICsJCQkJCXBhZ2UgPSBhcC0+cGFnZXNbaV07Cj4gKwkJCQkJ
emVyb191c2VyX3NlZ21lbnQocGFnZSwgbGVuLCB0aGlzbGVuKTsKPiArCQkJCQlsZW4gPSAwOwo+
ICsJCQkJfSBlbHNlIHsKPiArCQkJCQlsZW4gLT0gdGhpc2xlbjsKPiArCQkJCX0KPiArCQkJfQo+
ICsJCX0KPiArCj4gKwkJc3Bpbl9sb2NrKCZmcHEtPmxvY2spOwo+ICsJCWNsZWFyX2JpdChGUl9T
RU5ULCAmcmVxLT5mbGFncyk7Cj4gKwkJbGlzdF9kZWxfaW5pdCgmcmVxLT5saXN0KTsKPiArCQlz
cGluX3VubG9jaygmZnBxLT5sb2NrKTsKPiArCj4gKwkJZnVzZV9yZXF1ZXN0X2VuZChmYywgcmVx
KTsKPiArCQlzcGluX2xvY2soJmZzdnEtPmxvY2spOwo+ICsJCWZzdnEtPmluX2ZsaWdodC0tOwo+
ICsJCXNwaW5fdW5sb2NrKCZmc3ZxLT5sb2NrKTsKPiArCX0KPiArfQo+ICsKPiArLyogVmlydHF1
ZXVlIGludGVycnVwdCBoYW5kbGVyICovCj4gK3N0YXRpYyB2b2lkIHZpcnRpb19mc192cV9kb25l
KHN0cnVjdCB2aXJ0cXVldWUgKnZxKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX2ZzX3ZxICpmc3Zx
ID0gdnFfdG9fZnN2cSh2cSk7Cj4gKwo+ICsJZGV2X2RiZygmdnEtPnZkZXYtPmRldiwgIiVzICVz
XG4iLCBfX2Z1bmNfXywgZnN2cS0+bmFtZSk7Cj4gKwo+ICsJc2NoZWR1bGVfd29yaygmZnN2cS0+
ZG9uZV93b3JrKTsKPiArfQo+ICsKPiArLyogSW5pdGlhbGl6ZSB2aXJ0cXVldWVzICovCj4gK3N0
YXRpYyBpbnQgdmlydGlvX2ZzX3NldHVwX3ZxcyhzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldiwK
PiArCQkJICAgICAgIHN0cnVjdCB2aXJ0aW9fZnMgKmZzKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydHF1
ZXVlICoqdnFzOwo+ICsJdnFfY2FsbGJhY2tfdCAqKmNhbGxiYWNrczsKPiArCWNvbnN0IGNoYXIg
KipuYW1lczsKPiArCXVuc2lnbmVkIGludCBpOwo+ICsJaW50IHJldCA9IDA7Cj4gKwo+ICsJdmly
dGlvX2NyZWFkKHZkZXYsIHN0cnVjdCB2aXJ0aW9fZnNfY29uZmlnLCBudW1fcXVldWVzLAo+ICsJ
CSAgICAgJmZzLT5udW1fcXVldWVzKTsKPiArCWlmIChmcy0+bnVtX3F1ZXVlcyA9PSAwKQo+ICsJ
CXJldHVybiAtRUlOVkFMOwo+ICsKPiArCWZzLT5udnFzID0gMSArIGZzLT5udW1fcXVldWVzOwo+
ICsJZnMtPnZxcyA9IGtjYWxsb2MoZnMtPm52cXMsIHNpemVvZihmcy0+dnFzW1ZRX0hJUFJJT10p
LCBHRlBfS0VSTkVMKTsKPiArCWlmICghZnMtPnZxcykKPiArCQlyZXR1cm4gLUVOT01FTTsKPiAr
Cj4gKwl2cXMgPSBrbWFsbG9jX2FycmF5KGZzLT5udnFzLCBzaXplb2YodnFzW1ZRX0hJUFJJT10p
LCBHRlBfS0VSTkVMKTsKPiArCWNhbGxiYWNrcyA9IGttYWxsb2NfYXJyYXkoZnMtPm52cXMsIHNp
emVvZihjYWxsYmFja3NbVlFfSElQUklPXSksCj4gKwkJCQkJR0ZQX0tFUk5FTCk7Cj4gKwluYW1l
cyA9IGttYWxsb2NfYXJyYXkoZnMtPm52cXMsIHNpemVvZihuYW1lc1tWUV9ISVBSSU9dKSwgR0ZQ
X0tFUk5FTCk7Cj4gKwlpZiAoIXZxcyB8fCAhY2FsbGJhY2tzIHx8ICFuYW1lcykgewo+ICsJCXJl
dCA9IC1FTk9NRU07Cj4gKwkJZ290byBvdXQ7Cj4gKwl9Cj4gKwo+ICsJY2FsbGJhY2tzW1ZRX0hJ
UFJJT10gPSB2aXJ0aW9fZnNfdnFfZG9uZTsKPiArCXNucHJpbnRmKGZzLT52cXNbVlFfSElQUklP
XS5uYW1lLCBzaXplb2YoZnMtPnZxc1tWUV9ISVBSSU9dLm5hbWUpLAo+ICsJCQkiaGlwcmlvIik7
Cj4gKwluYW1lc1tWUV9ISVBSSU9dID0gZnMtPnZxc1tWUV9ISVBSSU9dLm5hbWU7Cj4gKwlJTklU
X1dPUksoJmZzLT52cXNbVlFfSElQUklPXS5kb25lX3dvcmssIHZpcnRpb19mc19oaXByaW9fZG9u
ZV93b3JrKTsKPiArCUlOSVRfTElTVF9IRUFEKCZmcy0+dnFzW1ZRX0hJUFJJT10ucXVldWVkX3Jl
cXMpOwo+ICsJSU5JVF9ERUxBWUVEX1dPUksoJmZzLT52cXNbVlFfSElQUklPXS5kaXNwYXRjaF93
b3JrLAo+ICsJCQl2aXJ0aW9fZnNfaGlwcmlvX2Rpc3BhdGNoX3dvcmspOwo+ICsJc3Bpbl9sb2Nr
X2luaXQoJmZzLT52cXNbVlFfSElQUklPXS5sb2NrKTsKPiArCj4gKwkvKiBJbml0aWFsaXplIHRo
ZSByZXF1ZXN0cyB2aXJ0cXVldWVzICovCj4gKwlmb3IgKGkgPSBWUV9SRVFVRVNUOyBpIDwgZnMt
Pm52cXM7IGkrKykgewo+ICsJCXNwaW5fbG9ja19pbml0KCZmcy0+dnFzW2ldLmxvY2spOwo+ICsJ
CUlOSVRfV09SSygmZnMtPnZxc1tpXS5kb25lX3dvcmssIHZpcnRpb19mc19yZXF1ZXN0c19kb25l
X3dvcmspOwo+ICsJCUlOSVRfREVMQVlFRF9XT1JLKCZmcy0+dnFzW2ldLmRpc3BhdGNoX3dvcmss
Cj4gKwkJCQkJdmlydGlvX2ZzX2R1bW15X2Rpc3BhdGNoX3dvcmspOwo+ICsJCUlOSVRfTElTVF9I
RUFEKCZmcy0+dnFzW2ldLnF1ZXVlZF9yZXFzKTsKPiArCQlzbnByaW50Zihmcy0+dnFzW2ldLm5h
bWUsIHNpemVvZihmcy0+dnFzW2ldLm5hbWUpLAo+ICsJCQkgInJlcXVlc3RzLiV1IiwgaSAtIFZR
X1JFUVVFU1QpOwo+ICsJCWNhbGxiYWNrc1tpXSA9IHZpcnRpb19mc192cV9kb25lOwo+ICsJCW5h
bWVzW2ldID0gZnMtPnZxc1tpXS5uYW1lOwo+ICsJfQo+ICsKPiArCXJldCA9IHZpcnRpb19maW5k
X3Zxcyh2ZGV2LCBmcy0+bnZxcywgdnFzLCBjYWxsYmFja3MsIG5hbWVzLCBOVUxMKTsKPiArCWlm
IChyZXQgPCAwKQo+ICsJCWdvdG8gb3V0Owo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBmcy0+bnZx
czsgaSsrKQo+ICsJCWZzLT52cXNbaV0udnEgPSB2cXNbaV07Cj4gKwo+ICsJdmlydGlvX2ZzX3N0
YXJ0X2FsbF9xdWV1ZXMoZnMpOwo+ICtvdXQ6Cj4gKwlrZnJlZShuYW1lcyk7Cj4gKwlrZnJlZShj
YWxsYmFja3MpOwo+ICsJa2ZyZWUodnFzKTsKPiArCWlmIChyZXQpCj4gKwkJa2ZyZWUoZnMtPnZx
cyk7Cj4gKwlyZXR1cm4gcmV0Owo+ICt9Cj4gKwo+ICsvKiBGcmVlIHZpcnRxdWV1ZXMgKGRldmlj
ZSBtdXN0IGFscmVhZHkgYmUgcmVzZXQpICovCj4gK3N0YXRpYyB2b2lkIHZpcnRpb19mc19jbGVh
bnVwX3ZxcyhzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldiwKPiArCQkJCSAgc3RydWN0IHZpcnRp
b19mcyAqZnMpCj4gK3sKPiArCXZkZXYtPmNvbmZpZy0+ZGVsX3Zxcyh2ZGV2KTsKPiArfQo+ICsK
PiArc3RhdGljIGludCB2aXJ0aW9fZnNfcHJvYmUoc3RydWN0IHZpcnRpb19kZXZpY2UgKnZkZXYp
Cj4gK3sKPiArCXN0cnVjdCB2aXJ0aW9fZnMgKmZzOwo+ICsJaW50IHJldDsKPiArCj4gKwlmcyA9
IGt6YWxsb2Moc2l6ZW9mKCpmcyksIEdGUF9LRVJORUwpOwo+ICsJaWYgKCFmcykKPiArCQlyZXR1
cm4gLUVOT01FTTsKPiArCWtyZWZfaW5pdCgmZnMtPnJlZmNvdW50KTsKPiArCXZkZXYtPnByaXYg
PSBmczsKPiArCj4gKwlyZXQgPSB2aXJ0aW9fZnNfcmVhZF90YWcodmRldiwgZnMpOwo+ICsJaWYg
KHJldCA8IDApCj4gKwkJZ290byBvdXQ7Cj4gKwo+ICsJcmV0ID0gdmlydGlvX2ZzX3NldHVwX3Zx
cyh2ZGV2LCBmcyk7Cj4gKwlpZiAocmV0IDwgMCkKPiArCQlnb3RvIG91dDsKPiArCj4gKwkvKiBU
T0RPIHZxIGFmZmluaXR5ICovCj4gKwo+ICsJLyogQnJpbmcgdGhlIGRldmljZSBvbmxpbmUgaW4g
Y2FzZSB0aGUgZmlsZXN5c3RlbSBpcyBtb3VudGVkIGFuZAo+ICsJICogcmVxdWVzdHMgbmVlZCB0
byBiZSBzZW50IGJlZm9yZSB3ZSByZXR1cm4uCj4gKwkgKi8KPiArCXZpcnRpb19kZXZpY2VfcmVh
ZHkodmRldik7Cj4gKwo+ICsJcmV0ID0gdmlydGlvX2ZzX2FkZF9pbnN0YW5jZShmcyk7Cj4gKwlp
ZiAocmV0IDwgMCkKPiArCQlnb3RvIG91dF92cXM7Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gKwo+ICtv
dXRfdnFzOgo+ICsJdmRldi0+Y29uZmlnLT5yZXNldCh2ZGV2KTsKPiArCXZpcnRpb19mc19jbGVh
bnVwX3Zxcyh2ZGV2LCBmcyk7Cj4gKwo+ICtvdXQ6Cj4gKwl2ZGV2LT5wcml2ID0gTlVMTDsKPiAr
CWtmcmVlKGZzKTsKPiArCXJldHVybiByZXQ7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHZpcnRp
b19mc19zdG9wX2FsbF9xdWV1ZXMoc3RydWN0IHZpcnRpb19mcyAqZnMpCj4gK3sKPiArCXN0cnVj
dCB2aXJ0aW9fZnNfdnEgKmZzdnE7Cj4gKwlpbnQgaTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwg
ZnMtPm52cXM7IGkrKykgewo+ICsJCWZzdnEgPSAmZnMtPnZxc1tpXTsKPiArCQlzcGluX2xvY2so
JmZzdnEtPmxvY2spOwo+ICsJCWZzdnEtPmNvbm5lY3RlZCA9IGZhbHNlOwo+ICsJCXNwaW5fdW5s
b2NrKCZmc3ZxLT5sb2NrKTsKPiArCX0KPiArfQo+ICsKPiArc3RhdGljIHZvaWQgdmlydGlvX2Zz
X3JlbW92ZShzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldikKPiArewo+ICsJc3RydWN0IHZpcnRp
b19mcyAqZnMgPSB2ZGV2LT5wcml2Owo+ICsKPiArCW11dGV4X2xvY2soJnZpcnRpb19mc19tdXRl
eCk7Cj4gKwkvKiBUaGlzIGRldmljZSBpcyBnb2luZyBhd2F5LiBObyBvbmUgc2hvdWxkIGdldCBu
ZXcgcmVmZXJlbmNlICovCj4gKwlsaXN0X2RlbF9pbml0KCZmcy0+bGlzdCk7Cj4gKwl2aXJ0aW9f
ZnNfc3RvcF9hbGxfcXVldWVzKGZzKTsKPiArCXZpcnRpb19mc19kcmFpbl9hbGxfcXVldWVzKGZz
KTsKPiArCXZkZXYtPmNvbmZpZy0+cmVzZXQodmRldik7Cj4gKwl2aXJ0aW9fZnNfY2xlYW51cF92
cXModmRldiwgZnMpOwo+ICsKPiArCXZkZXYtPnByaXYgPSBOVUxMOwo+ICsJLyogUHV0IGRldmlj
ZSByZWZlcmVuY2Ugb24gdmlydGlvX2ZzIG9iamVjdCAqLwo+ICsJdmlydGlvX2ZzX3B1dChmcyk7
Cj4gKwltdXRleF91bmxvY2soJnZpcnRpb19mc19tdXRleCk7Cj4gK30KPiArCj4gKyNpZmRlZiBD
T05GSUdfUE1fU0xFRVAKPiArc3RhdGljIGludCB2aXJ0aW9fZnNfZnJlZXplKHN0cnVjdCB2aXJ0
aW9fZGV2aWNlICp2ZGV2KQo+ICt7Cj4gKwkvKiBUT0RPIG5lZWQgdG8gc2F2ZSBzdGF0ZSBoZXJl
ICovCj4gKwlwcl93YXJuKCJ2aXJ0aW8tZnM6IHN1c3BlbmQvcmVzdW1lIG5vdCB5ZXQgc3VwcG9y
dGVkXG4iKTsKPiArCXJldHVybiAtRU9QTk9UU1VQUDsKPiArfQo+ICsKPiArc3RhdGljIGludCB2
aXJ0aW9fZnNfcmVzdG9yZShzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldikKPiArewo+ICsJIC8q
IFRPRE8gbmVlZCB0byByZXN0b3JlIHN0YXRlIGhlcmUgKi8KPiArCXJldHVybiAwOwo+ICt9Cj4g
KyNlbmRpZiAvKiBDT05GSUdfUE1fU0xFRVAgKi8KPiArCj4gK2NvbnN0IHN0YXRpYyBzdHJ1Y3Qg
dmlydGlvX2RldmljZV9pZCBpZF90YWJsZVtdID0gewo+ICsJeyBWSVJUSU9fSURfRlMsIFZJUlRJ
T19ERVZfQU5ZX0lEIH0sCj4gKwl7fSwKPiArfTsKPiArCj4gK2NvbnN0IHN0YXRpYyB1bnNpZ25l
ZCBpbnQgZmVhdHVyZV90YWJsZVtdID0ge307Cj4gKwo+ICtzdGF0aWMgc3RydWN0IHZpcnRpb19k
cml2ZXIgdmlydGlvX2ZzX2RyaXZlciA9IHsKPiArCS5kcml2ZXIubmFtZQkJPSBLQlVJTERfTU9E
TkFNRSwKPiArCS5kcml2ZXIub3duZXIJCT0gVEhJU19NT0RVTEUsCj4gKwkuaWRfdGFibGUJCT0g
aWRfdGFibGUsCj4gKwkuZmVhdHVyZV90YWJsZQkJPSBmZWF0dXJlX3RhYmxlLAo+ICsJLmZlYXR1
cmVfdGFibGVfc2l6ZQk9IEFSUkFZX1NJWkUoZmVhdHVyZV90YWJsZSksCj4gKwkucHJvYmUJCQk9
IHZpcnRpb19mc19wcm9iZSwKPiArCS5yZW1vdmUJCQk9IHZpcnRpb19mc19yZW1vdmUsCj4gKyNp
ZmRlZiBDT05GSUdfUE1fU0xFRVAKPiArCS5mcmVlemUJCQk9IHZpcnRpb19mc19mcmVlemUsCj4g
KwkucmVzdG9yZQkJPSB2aXJ0aW9fZnNfcmVzdG9yZSwKPiArI2VuZGlmCj4gK307Cj4gKwo+ICtz
dGF0aWMgdm9pZCB2aXJ0aW9fZnNfd2FrZV9mb3JnZXRfYW5kX3VubG9jayhzdHJ1Y3QgZnVzZV9p
cXVldWUgKmZpcSkKPiArX19yZWxlYXNlcyhmaXEtPmxvY2spCj4gK3sKPiArCXN0cnVjdCBmdXNl
X2ZvcmdldF9saW5rICpsaW5rOwo+ICsJc3RydWN0IHZpcnRpb19mc19mb3JnZXQgKmZvcmdldDsK
PiArCXN0cnVjdCBzY2F0dGVybGlzdCBzZzsKPiArCXN0cnVjdCBzY2F0dGVybGlzdCAqc2dzW10g
PSB7JnNnfTsKPiArCXN0cnVjdCB2aXJ0aW9fZnMgKmZzOwo+ICsJc3RydWN0IHZpcnRxdWV1ZSAq
dnE7Cj4gKwlzdHJ1Y3QgdmlydGlvX2ZzX3ZxICpmc3ZxOwo+ICsJYm9vbCBub3RpZnk7Cj4gKwl1
NjQgdW5pcXVlOwo+ICsJaW50IHJldDsKPiArCj4gKwlsaW5rID0gZnVzZV9kZXF1ZXVlX2Zvcmdl
dChmaXEsIDEsIE5VTEwpOwo+ICsJdW5pcXVlID0gZnVzZV9nZXRfdW5pcXVlKGZpcSk7Cj4gKwo+
ICsJZnMgPSBmaXEtPnByaXY7Cj4gKwlmc3ZxID0gJmZzLT52cXNbVlFfSElQUklPXTsKPiArCXNw
aW5fdW5sb2NrKCZmaXEtPmxvY2spOwo+ICsKPiArCS8qIEFsbG9jYXRlIGEgYnVmZmVyIGZvciB0
aGUgcmVxdWVzdCAqLwo+ICsJZm9yZ2V0ID0ga21hbGxvYyhzaXplb2YoKmZvcmdldCksIEdGUF9O
T0ZTIHwgX19HRlBfTk9GQUlMKTsKPiArCj4gKwlmb3JnZXQtPmloID0gKHN0cnVjdCBmdXNlX2lu
X2hlYWRlcil7Cj4gKwkJLm9wY29kZSA9IEZVU0VfRk9SR0VULAo+ICsJCS5ub2RlaWQgPSBsaW5r
LT5mb3JnZXRfb25lLm5vZGVpZCwKPiArCQkudW5pcXVlID0gdW5pcXVlLAo+ICsJCS5sZW4gPSBz
aXplb2YoKmZvcmdldCksCj4gKwl9Owo+ICsJZm9yZ2V0LT5hcmcgPSAoc3RydWN0IGZ1c2VfZm9y
Z2V0X2luKXsKPiArCQkubmxvb2t1cCA9IGxpbmstPmZvcmdldF9vbmUubmxvb2t1cCwKPiArCX07
Cj4gKwo+ICsJc2dfaW5pdF9vbmUoJnNnLCBmb3JnZXQsIHNpemVvZigqZm9yZ2V0KSk7Cj4gKwo+
ICsJLyogRW5xdWV1ZSB0aGUgcmVxdWVzdCAqLwo+ICsJc3Bpbl9sb2NrKCZmc3ZxLT5sb2NrKTsK
PiArCj4gKwlpZiAoIWZzdnEtPmNvbm5lY3RlZCkgewo+ICsJCWtmcmVlKGZvcmdldCk7Cj4gKwkJ
c3Bpbl91bmxvY2soJmZzdnEtPmxvY2spOwo+ICsJCWdvdG8gb3V0Owo+ICsJfQo+ICsKPiArCXZx
ID0gZnN2cS0+dnE7Cj4gKwlkZXZfZGJnKCZ2cS0+dmRldi0+ZGV2LCAiJXNcbiIsIF9fZnVuY19f
KTsKPiArCj4gKwlyZXQgPSB2aXJ0cXVldWVfYWRkX3Nncyh2cSwgc2dzLCAxLCAwLCBmb3JnZXQs
IEdGUF9BVE9NSUMpOwo+ICsJaWYgKHJldCA8IDApIHsKPiArCQlpZiAocmV0ID09IC1FTk9NRU0g
fHwgcmV0ID09IC1FTk9TUEMpIHsKPiArCQkJcHJfZGVidWcoInZpcnRpby1mczogQ291bGQgbm90
IHF1ZXVlIEZPUkdFVDogZXJyPSVkLiBXaWxsIHRyeSBsYXRlci5cbiIsCj4gKwkJCQkgcmV0KTsK
PiArCQkJbGlzdF9hZGRfdGFpbCgmZm9yZ2V0LT5saXN0LCAmZnN2cS0+cXVldWVkX3JlcXMpOwo+
ICsJCQlzY2hlZHVsZV9kZWxheWVkX3dvcmsoJmZzdnEtPmRpc3BhdGNoX3dvcmssCj4gKwkJCQkJ
bXNlY3NfdG9famlmZmllcygxKSk7Cj4gKwkJfSBlbHNlIHsKPiArCQkJcHJfZGVidWcoInZpcnRp
by1mczogQ291bGQgbm90IHF1ZXVlIEZPUkdFVDogZXJyPSVkLiBEcm9wcGluZyBpdC5cbiIsCj4g
KwkJCQkgcmV0KTsKPiArCQkJa2ZyZWUoZm9yZ2V0KTsKPiArCQl9Cj4gKwkJc3Bpbl91bmxvY2so
JmZzdnEtPmxvY2spOwo+ICsJCWdvdG8gb3V0Owo+ICsJfQo+ICsKPiArCWZzdnEtPmluX2ZsaWdo
dCsrOwo+ICsJbm90aWZ5ID0gdmlydHF1ZXVlX2tpY2tfcHJlcGFyZSh2cSk7Cj4gKwo+ICsJc3Bp
bl91bmxvY2soJmZzdnEtPmxvY2spOwo+ICsKPiArCWlmIChub3RpZnkpCj4gKwkJdmlydHF1ZXVl
X25vdGlmeSh2cSk7Cj4gK291dDoKPiArCWtmcmVlKGxpbmspOwo+ICt9Cj4gKwo+ICtzdGF0aWMg
dm9pZCB2aXJ0aW9fZnNfd2FrZV9pbnRlcnJ1cHRfYW5kX3VubG9jayhzdHJ1Y3QgZnVzZV9pcXVl
dWUgKmZpcSkKPiArX19yZWxlYXNlcyhmaXEtPmxvY2spCj4gK3sKPiArCS8qCj4gKwkgKiBUT0RP
IGludGVycnVwdHMuCj4gKwkgKgo+ICsJICogTm9ybWFsIGZzIG9wZXJhdGlvbnMgb24gYSBsb2Nh
bCBmaWxlc3lzdGVtcyBhcmVuJ3QgaW50ZXJydXB0aWJsZS4KPiArCSAqIEV4Y2VwdGlvbnMgYXJl
IGJsb2NraW5nIGxvY2sgb3BlcmF0aW9uczsgZm9yIGV4YW1wbGUgZmNudGwoRl9TRVRMS1cpCj4g
KwkgKiB3aXRoIHNoYXJlZCBsb2NrIGJldHdlZW4gaG9zdCBhbmQgZ3Vlc3QuCj4gKwkgKi8KPiAr
CXNwaW5fdW5sb2NrKCZmaXEtPmxvY2spOwo+ICt9Cj4gKwo+ICsvKiBSZXR1cm4gdGhlIG51bWJl
ciBvZiBzY2F0dGVyLWdhdGhlciBsaXN0IGVsZW1lbnRzIHJlcXVpcmVkICovCj4gK3N0YXRpYyB1
bnNpZ25lZCBpbnQgc2dfY291bnRfZnVzZV9yZXEoc3RydWN0IGZ1c2VfcmVxICpyZXEpCj4gK3sK
PiArCXN0cnVjdCBmdXNlX2FyZ3MgKmFyZ3MgPSByZXEtPmFyZ3M7Cj4gKwlzdHJ1Y3QgZnVzZV9h
cmdzX3BhZ2VzICphcCA9IGNvbnRhaW5lcl9vZihhcmdzLCB0eXBlb2YoKmFwKSwgYXJncyk7Cj4g
Kwl1bnNpZ25lZCBpbnQgdG90YWxfc2dzID0gMSAvKiBmdXNlX2luX2hlYWRlciAqLzsKPiArCj4g
KwlpZiAoYXJncy0+aW5fbnVtYXJncyAtIGFyZ3MtPmluX3BhZ2VzKQo+ICsJCXRvdGFsX3NncyAr
PSAxOwo+ICsKPiArCWlmIChhcmdzLT5pbl9wYWdlcykKPiArCQl0b3RhbF9zZ3MgKz0gYXAtPm51
bV9wYWdlczsKPiArCj4gKwlpZiAoIXRlc3RfYml0KEZSX0lTUkVQTFksICZyZXEtPmZsYWdzKSkK
PiArCQlyZXR1cm4gdG90YWxfc2dzOwo+ICsKPiArCXRvdGFsX3NncyArPSAxIC8qIGZ1c2Vfb3V0
X2hlYWRlciAqLzsKPiArCj4gKwlpZiAoYXJncy0+b3V0X251bWFyZ3MgLSBhcmdzLT5vdXRfcGFn
ZXMpCj4gKwkJdG90YWxfc2dzICs9IDE7Cj4gKwo+ICsJaWYgKGFyZ3MtPm91dF9wYWdlcykKPiAr
CQl0b3RhbF9zZ3MgKz0gYXAtPm51bV9wYWdlczsKPiArCj4gKwlyZXR1cm4gdG90YWxfc2dzOwo+
ICt9Cj4gKwo+ICsvKiBBZGQgcGFnZXMgdG8gc2NhdHRlci1nYXRoZXIgbGlzdCBhbmQgcmV0dXJu
IG51bWJlciBvZiBlbGVtZW50cyB1c2VkICovCj4gK3N0YXRpYyB1bnNpZ25lZCBpbnQgc2dfaW5p
dF9mdXNlX3BhZ2VzKHN0cnVjdCBzY2F0dGVybGlzdCAqc2csCj4gKwkJCQkgICAgICAgc3RydWN0
IHBhZ2UgKipwYWdlcywKPiArCQkJCSAgICAgICBzdHJ1Y3QgZnVzZV9wYWdlX2Rlc2MgKnBhZ2Vf
ZGVzY3MsCj4gKwkJCQkgICAgICAgdW5zaWduZWQgaW50IG51bV9wYWdlcywKPiArCQkJCSAgICAg
ICB1bnNpZ25lZCBpbnQgdG90YWxfbGVuKQo+ICt7Cj4gKwl1bnNpZ25lZCBpbnQgaTsKPiArCXVu
c2lnbmVkIGludCB0aGlzX2xlbjsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgbnVtX3BhZ2VzICYm
IHRvdGFsX2xlbjsgaSsrKSB7Cj4gKwkJc2dfaW5pdF90YWJsZSgmc2dbaV0sIDEpOwo+ICsJCXRo
aXNfbGVuID0gIG1pbihwYWdlX2Rlc2NzW2ldLmxlbmd0aCwgdG90YWxfbGVuKTsKPiArCQlzZ19z
ZXRfcGFnZSgmc2dbaV0sIHBhZ2VzW2ldLCB0aGlzX2xlbiwgcGFnZV9kZXNjc1tpXS5vZmZzZXQp
Owo+ICsJCXRvdGFsX2xlbiAtPSB0aGlzX2xlbjsKPiArCX0KPiArCj4gKwlyZXR1cm4gaTsKPiAr
fQo+ICsKPiArLyogQWRkIGFyZ3MgdG8gc2NhdHRlci1nYXRoZXIgbGlzdCBhbmQgcmV0dXJuIG51
bWJlciBvZiBlbGVtZW50cyB1c2VkICovCj4gK3N0YXRpYyB1bnNpZ25lZCBpbnQgc2dfaW5pdF9m
dXNlX2FyZ3Moc3RydWN0IHNjYXR0ZXJsaXN0ICpzZywKPiArCQkJCSAgICAgIHN0cnVjdCBmdXNl
X3JlcSAqcmVxLAo+ICsJCQkJICAgICAgc3RydWN0IGZ1c2VfYXJnICphcmdzLAo+ICsJCQkJICAg
ICAgdW5zaWduZWQgaW50IG51bWFyZ3MsCj4gKwkJCQkgICAgICBib29sIGFyZ3BhZ2VzLAo+ICsJ
CQkJICAgICAgdm9pZCAqYXJnYnVmLAo+ICsJCQkJICAgICAgdW5zaWduZWQgaW50ICpsZW5fdXNl
ZCkKPiArewo+ICsJc3RydWN0IGZ1c2VfYXJnc19wYWdlcyAqYXAgPSBjb250YWluZXJfb2YocmVx
LT5hcmdzLCB0eXBlb2YoKmFwKSwgYXJncyk7Cj4gKwl1bnNpZ25lZCBpbnQgdG90YWxfc2dzID0g
MDsKPiArCXVuc2lnbmVkIGludCBsZW47Cj4gKwo+ICsJbGVuID0gZnVzZV9sZW5fYXJncyhudW1h
cmdzIC0gYXJncGFnZXMsIGFyZ3MpOwo+ICsJaWYgKGxlbikKPiArCQlzZ19pbml0X29uZSgmc2db
dG90YWxfc2dzKytdLCBhcmdidWYsIGxlbik7Cj4gKwo+ICsJaWYgKGFyZ3BhZ2VzKQo+ICsJCXRv
dGFsX3NncyArPSBzZ19pbml0X2Z1c2VfcGFnZXMoJnNnW3RvdGFsX3Nnc10sCj4gKwkJCQkJCWFw
LT5wYWdlcywgYXAtPmRlc2NzLAo+ICsJCQkJCQlhcC0+bnVtX3BhZ2VzLAo+ICsJCQkJCQlhcmdz
W251bWFyZ3MgLSAxXS5zaXplKTsKPiArCj4gKwlpZiAobGVuX3VzZWQpCj4gKwkJKmxlbl91c2Vk
ID0gbGVuOwo+ICsKPiArCXJldHVybiB0b3RhbF9zZ3M7Cj4gK30KPiArCj4gKy8qIEFkZCBhIHJl
cXVlc3QgdG8gYSB2aXJ0cXVldWUgYW5kIGtpY2sgdGhlIGRldmljZSAqLwo+ICtzdGF0aWMgaW50
IHZpcnRpb19mc19lbnF1ZXVlX3JlcShzdHJ1Y3QgdmlydGlvX2ZzX3ZxICpmc3ZxLAo+ICsJCQkJ
IHN0cnVjdCBmdXNlX3JlcSAqcmVxKQo+ICt7Cj4gKwkvKiByZXF1ZXN0cyBuZWVkIGF0IGxlYXN0
IDQgZWxlbWVudHMgKi8KPiArCXN0cnVjdCBzY2F0dGVybGlzdCAqc3RhY2tfc2dzWzZdOwo+ICsJ
c3RydWN0IHNjYXR0ZXJsaXN0IHN0YWNrX3NnW0FSUkFZX1NJWkUoc3RhY2tfc2dzKV07Cj4gKwlz
dHJ1Y3Qgc2NhdHRlcmxpc3QgKipzZ3MgPSBzdGFja19zZ3M7Cj4gKwlzdHJ1Y3Qgc2NhdHRlcmxp
c3QgKnNnID0gc3RhY2tfc2c7Cj4gKwlzdHJ1Y3QgdmlydHF1ZXVlICp2cTsKPiArCXN0cnVjdCBm
dXNlX2FyZ3MgKmFyZ3MgPSByZXEtPmFyZ3M7Cj4gKwl1bnNpZ25lZCBpbnQgYXJnYnVmX3VzZWQg
PSAwOwo+ICsJdW5zaWduZWQgaW50IG91dF9zZ3MgPSAwOwo+ICsJdW5zaWduZWQgaW50IGluX3Nn
cyA9IDA7Cj4gKwl1bnNpZ25lZCBpbnQgdG90YWxfc2dzOwo+ICsJdW5zaWduZWQgaW50IGk7Cj4g
KwlpbnQgcmV0Owo+ICsJYm9vbCBub3RpZnk7Cj4gKwo+ICsJLyogRG9lcyB0aGUgc2dsaXN0IGZp
dCBvbiB0aGUgc3RhY2s/ICovCj4gKwl0b3RhbF9zZ3MgPSBzZ19jb3VudF9mdXNlX3JlcShyZXEp
Owo+ICsJaWYgKHRvdGFsX3NncyA+IEFSUkFZX1NJWkUoc3RhY2tfc2dzKSkgewo+ICsJCXNncyA9
IGttYWxsb2NfYXJyYXkodG90YWxfc2dzLCBzaXplb2Yoc2dzWzBdKSwgR0ZQX0FUT01JQyk7Cj4g
KwkJc2cgPSBrbWFsbG9jX2FycmF5KHRvdGFsX3Nncywgc2l6ZW9mKHNnWzBdKSwgR0ZQX0FUT01J
Qyk7Cj4gKwkJaWYgKCFzZ3MgfHwgIXNnKSB7Cj4gKwkJCXJldCA9IC1FTk9NRU07Cj4gKwkJCWdv
dG8gb3V0Owo+ICsJCX0KPiArCX0KPiArCj4gKwkvKiBVc2UgYSBib3VuY2UgYnVmZmVyIHNpbmNl
IHN0YWNrIGFyZ3MgY2Fubm90IGJlIG1hcHBlZCAqLwo+ICsJcmV0ID0gY29weV9hcmdzX3RvX2Fy
Z2J1ZihyZXEpOwo+ICsJaWYgKHJldCA8IDApCj4gKwkJZ290byBvdXQ7Cj4gKwo+ICsJLyogUmVx
dWVzdCBlbGVtZW50cyAqLwo+ICsJc2dfaW5pdF9vbmUoJnNnW291dF9zZ3MrK10sICZyZXEtPmlu
LmgsIHNpemVvZihyZXEtPmluLmgpKTsKPiArCW91dF9zZ3MgKz0gc2dfaW5pdF9mdXNlX2FyZ3Mo
JnNnW291dF9zZ3NdLCByZXEsCj4gKwkJCQkgICAgIChzdHJ1Y3QgZnVzZV9hcmcgKilhcmdzLT5p
bl9hcmdzLAo+ICsJCQkJICAgICBhcmdzLT5pbl9udW1hcmdzLCBhcmdzLT5pbl9wYWdlcywKPiAr
CQkJCSAgICAgcmVxLT5hcmdidWYsICZhcmdidWZfdXNlZCk7Cj4gKwo+ICsJLyogUmVwbHkgZWxl
bWVudHMgKi8KPiArCWlmICh0ZXN0X2JpdChGUl9JU1JFUExZLCAmcmVxLT5mbGFncykpIHsKPiAr
CQlzZ19pbml0X29uZSgmc2dbb3V0X3NncyArIGluX3NncysrXSwKPiArCQkJICAgICZyZXEtPm91
dC5oLCBzaXplb2YocmVxLT5vdXQuaCkpOwo+ICsJCWluX3NncyArPSBzZ19pbml0X2Z1c2VfYXJn
cygmc2dbb3V0X3NncyArIGluX3Nnc10sIHJlcSwKPiArCQkJCQkgICAgYXJncy0+b3V0X2FyZ3Ms
IGFyZ3MtPm91dF9udW1hcmdzLAo+ICsJCQkJCSAgICBhcmdzLT5vdXRfcGFnZXMsCj4gKwkJCQkJ
ICAgIHJlcS0+YXJnYnVmICsgYXJnYnVmX3VzZWQsIE5VTEwpOwo+ICsJfQo+ICsKPiArCVdBUk5f
T04ob3V0X3NncyArIGluX3NncyAhPSB0b3RhbF9zZ3MpOwo+ICsKPiArCWZvciAoaSA9IDA7IGkg
PCB0b3RhbF9zZ3M7IGkrKykKPiArCQlzZ3NbaV0gPSAmc2dbaV07Cj4gKwo+ICsJc3Bpbl9sb2Nr
KCZmc3ZxLT5sb2NrKTsKPiArCj4gKwlpZiAoIWZzdnEtPmNvbm5lY3RlZCkgewo+ICsJCXNwaW5f
dW5sb2NrKCZmc3ZxLT5sb2NrKTsKPiArCQlyZXQgPSAtRU5PVENPTk47Cj4gKwkJZ290byBvdXQ7
Cj4gKwl9Cj4gKwo+ICsJdnEgPSBmc3ZxLT52cTsKPiArCXJldCA9IHZpcnRxdWV1ZV9hZGRfc2dz
KHZxLCBzZ3MsIG91dF9zZ3MsIGluX3NncywgcmVxLCBHRlBfQVRPTUlDKTsKPiArCWlmIChyZXQg
PCAwKSB7Cj4gKwkJc3Bpbl91bmxvY2soJmZzdnEtPmxvY2spOwo+ICsJCWdvdG8gb3V0Owo+ICsJ
fQo+ICsKPiArCWZzdnEtPmluX2ZsaWdodCsrOwo+ICsJbm90aWZ5ID0gdmlydHF1ZXVlX2tpY2tf
cHJlcGFyZSh2cSk7Cj4gKwo+ICsJc3Bpbl91bmxvY2soJmZzdnEtPmxvY2spOwo+ICsKPiArCWlm
IChub3RpZnkpCj4gKwkJdmlydHF1ZXVlX25vdGlmeSh2cSk7Cj4gKwo+ICtvdXQ6Cj4gKwlpZiAo
cmV0IDwgMCAmJiByZXEtPmFyZ2J1Zikgewo+ICsJCWtmcmVlKHJlcS0+YXJnYnVmKTsKPiArCQly
ZXEtPmFyZ2J1ZiA9IE5VTEw7Cj4gKwl9Cj4gKwlpZiAoc2dzICE9IHN0YWNrX3Nncykgewo+ICsJ
CWtmcmVlKHNncyk7Cj4gKwkJa2ZyZWUoc2cpOwo+ICsJfQo+ICsKPiArCXJldHVybiByZXQ7Cj4g
K30KPiArCj4gK3N0YXRpYyB2b2lkIHZpcnRpb19mc193YWtlX3BlbmRpbmdfYW5kX3VubG9jayhz
dHJ1Y3QgZnVzZV9pcXVldWUgKmZpcSkKPiArX19yZWxlYXNlcyhmaXEtPmxvY2spCj4gK3sKPiAr
CXVuc2lnbmVkIGludCBxdWV1ZV9pZCA9IFZRX1JFUVVFU1Q7IC8qIFRPRE8gbXVsdGlxdWV1ZSAq
Lwo+ICsJc3RydWN0IHZpcnRpb19mcyAqZnM7Cj4gKwlzdHJ1Y3QgZnVzZV9jb25uICpmYzsKPiAr
CXN0cnVjdCBmdXNlX3JlcSAqcmVxOwo+ICsJc3RydWN0IGZ1c2VfcHF1ZXVlICpmcHE7Cj4gKwlp
bnQgcmV0Owo+ICsKPiArCVdBUk5fT04obGlzdF9lbXB0eSgmZmlxLT5wZW5kaW5nKSk7Cj4gKwly
ZXEgPSBsaXN0X2xhc3RfZW50cnkoJmZpcS0+cGVuZGluZywgc3RydWN0IGZ1c2VfcmVxLCBsaXN0
KTsKPiArCWNsZWFyX2JpdChGUl9QRU5ESU5HLCAmcmVxLT5mbGFncyk7Cj4gKwlsaXN0X2RlbF9p
bml0KCZyZXEtPmxpc3QpOwo+ICsJV0FSTl9PTighbGlzdF9lbXB0eSgmZmlxLT5wZW5kaW5nKSk7
Cj4gKwlzcGluX3VubG9jaygmZmlxLT5sb2NrKTsKPiArCj4gKwlmcyA9IGZpcS0+cHJpdjsKPiAr
CWZjID0gZnMtPnZxc1txdWV1ZV9pZF0uZnVkLT5mYzsKPiArCj4gKwlwcl9kZWJ1ZygiJXM6IG9w
Y29kZSAldSB1bmlxdWUgJSNsbHggbm9kZWlkICUjbGx4IGluLmxlbiAldSBvdXQubGVuICV1XG4i
LAo+ICsJCSAgX19mdW5jX18sIHJlcS0+aW4uaC5vcGNvZGUsIHJlcS0+aW4uaC51bmlxdWUsCj4g
KwkJIHJlcS0+aW4uaC5ub2RlaWQsIHJlcS0+aW4uaC5sZW4sCj4gKwkJIGZ1c2VfbGVuX2FyZ3Mo
cmVxLT5hcmdzLT5vdXRfbnVtYXJncywgcmVxLT5hcmdzLT5vdXRfYXJncykpOwo+ICsKPiArCWZw
cSA9ICZmcy0+dnFzW3F1ZXVlX2lkXS5mdWQtPnBxOwo+ICsJc3Bpbl9sb2NrKCZmcHEtPmxvY2sp
Owo+ICsJaWYgKCFmcHEtPmNvbm5lY3RlZCkgewo+ICsJCXNwaW5fdW5sb2NrKCZmcHEtPmxvY2sp
Owo+ICsJCXJlcS0+b3V0LmguZXJyb3IgPSAtRU5PREVWOwo+ICsJCXByX2VycigidmlydGlvLWZz
OiAlcyBkaXNjb25uZWN0ZWRcbiIsIF9fZnVuY19fKTsKPiArCQlmdXNlX3JlcXVlc3RfZW5kKGZj
LCByZXEpOwo+ICsJCXJldHVybjsKPiArCX0KPiArCWxpc3RfYWRkX3RhaWwoJnJlcS0+bGlzdCwg
ZnBxLT5wcm9jZXNzaW5nKTsKPiArCXNwaW5fdW5sb2NrKCZmcHEtPmxvY2spOwo+ICsJc2V0X2Jp
dChGUl9TRU5ULCAmcmVxLT5mbGFncyk7Cj4gKwkvKiBtYXRjaGVzIGJhcnJpZXIgaW4gcmVxdWVz
dF93YWl0X2Fuc3dlcigpICovCj4gKwlzbXBfbWJfX2FmdGVyX2F0b21pYygpOwo+ICsKPiArcmV0
cnk6Cj4gKwlyZXQgPSB2aXJ0aW9fZnNfZW5xdWV1ZV9yZXEoJmZzLT52cXNbcXVldWVfaWRdLCBy
ZXEpOwo+ICsJaWYgKHJldCA8IDApIHsKPiArCQlpZiAocmV0ID09IC1FTk9NRU0gfHwgcmV0ID09
IC1FTk9TUEMpIHsKPiArCQkJLyogVmlydHF1ZXVlIGZ1bGwuIFJldHJ5IHN1Ym1pc3Npb24gKi8K
PiArCQkJLyogVE9ETyB1c2UgY29tcGxldGlvbiBpbnN0ZWFkIG9mIHRpbWVvdXQgKi8KPiArCQkJ
dXNsZWVwX3JhbmdlKDIwLCAzMCk7Cj4gKwkJCWdvdG8gcmV0cnk7Cj4gKwkJfQo+ICsJCXJlcS0+
b3V0LmguZXJyb3IgPSByZXQ7Cj4gKwkJcHJfZXJyKCJ2aXJ0aW8tZnM6IHZpcnRpb19mc19lbnF1
ZXVlX3JlcSgpIGZhaWxlZCAlZFxuIiwgcmV0KTsKPiArCQlzcGluX2xvY2soJmZwcS0+bG9jayk7
Cj4gKwkJY2xlYXJfYml0KEZSX1NFTlQsICZyZXEtPmZsYWdzKTsKPiArCQlsaXN0X2RlbF9pbml0
KCZyZXEtPmxpc3QpOwo+ICsJCXNwaW5fdW5sb2NrKCZmcHEtPmxvY2spOwo+ICsJCWZ1c2VfcmVx
dWVzdF9lbmQoZmMsIHJlcSk7Cj4gKwkJcmV0dXJuOwo+ICsJfQo+ICt9Cj4gKwo+ICtjb25zdCBz
dGF0aWMgc3RydWN0IGZ1c2VfaXF1ZXVlX29wcyB2aXJ0aW9fZnNfZmlxX29wcyA9IHsKPiArCS53
YWtlX2ZvcmdldF9hbmRfdW5sb2NrCQk9IHZpcnRpb19mc193YWtlX2ZvcmdldF9hbmRfdW5sb2Nr
LAo+ICsJLndha2VfaW50ZXJydXB0X2FuZF91bmxvY2sJPSB2aXJ0aW9fZnNfd2FrZV9pbnRlcnJ1
cHRfYW5kX3VubG9jaywKPiArCS53YWtlX3BlbmRpbmdfYW5kX3VubG9jawk9IHZpcnRpb19mc193
YWtlX3BlbmRpbmdfYW5kX3VubG9jaywKPiArCS5yZWxlYXNlCQkJPSB2aXJ0aW9fZnNfZmlxX3Jl
bGVhc2UsCj4gK307Cj4gKwo+ICtzdGF0aWMgaW50IHZpcnRpb19mc19maWxsX3N1cGVyKHN0cnVj
dCBzdXBlcl9ibG9jayAqc2IpCj4gK3sKPiArCXN0cnVjdCBmdXNlX2Nvbm4gKmZjID0gZ2V0X2Z1
c2VfY29ubl9zdXBlcihzYik7Cj4gKwlzdHJ1Y3QgdmlydGlvX2ZzICpmcyA9IGZjLT5pcS5wcml2
Owo+ICsJdW5zaWduZWQgaW50IGk7Cj4gKwlpbnQgZXJyOwo+ICsJc3RydWN0IGZ1c2VfZnNfY29u
dGV4dCBjdHggPSB7Cj4gKwkJLnJvb3Rtb2RlID0gU19JRkRJUiwKPiArCQkuZGVmYXVsdF9wZXJt
aXNzaW9ucyA9IDEsCj4gKwkJLmFsbG93X290aGVyID0gMSwKPiArCQkubWF4X3JlYWQgPSBVSU5U
X01BWCwKPiArCQkuYmxrc2l6ZSA9IDUxMiwKPiArCQkuZGVzdHJveSA9IHRydWUsCj4gKwkJLm5v
X2NvbnRyb2wgPSB0cnVlLAo+ICsJCS5ub19mb3JjZV91bW91bnQgPSB0cnVlLAo+ICsJfTsKPiAr
Cj4gKwltdXRleF9sb2NrKCZ2aXJ0aW9fZnNfbXV0ZXgpOwo+ICsKPiArCS8qIEFmdGVyIGhvbGRp
bmcgbXV0ZXgsIG1ha2Ugc3VyZSB2aXJ0aW9mcyBkZXZpY2UgaXMgc3RpbGwgdGhlcmUuCj4gKwkg
KiBUaG91Z2ggd2UgYXJlIGhvbGRpbmcgYSByZWZlcm5jZSB0byBpdCwgZHJpdmUgLT5yZW1vdmUg
bWlnaHQKCnJlZmVybmNlIC0+IHJlZmVyZW5jZQoKPiArCSAqIHN0aWxsIGhhdmUgY2xlYW5lZCB1
cCB2aXJ0dWFsIHF1ZXVlcy4gSW4gdGhhdCBjYXNlIGJhaWwgb3V0Lgo+ICsJICovCj4gKwllcnIg
PSAtRUlOVkFMOwo+ICsJaWYgKGxpc3RfZW1wdHkoJmZzLT5saXN0KSkgewo+ICsJCXByX2luZm8o
InZpcnRpby1mczogdGFnIDwlcz4gbm90IGZvdW5kXG4iLCBmcy0+dGFnKTsKPiArCQlnb3RvIGVy
cjsKPiArCX0KPiArCj4gKwllcnIgPSAtRU5PTUVNOwo+ICsJLyogQWxsb2NhdGUgZnVzZV9kZXYg
Zm9yIGhpcHJpbyBhbmQgbm90aWZpY2F0aW9uIHF1ZXVlcyAqLwo+ICsJZm9yIChpID0gMDsgaSA8
IFZRX1JFUVVFU1Q7IGkrKykgewo+ICsJCXN0cnVjdCB2aXJ0aW9fZnNfdnEgKmZzdnEgPSAmZnMt
PnZxc1tpXTsKPiArCj4gKwkJZnN2cS0+ZnVkID0gZnVzZV9kZXZfYWxsb2MoKTsKPiArCQlpZiAo
IWZzdnEtPmZ1ZCkKPiArCQkJZ290byBlcnJfZnJlZV9mdXNlX2RldnM7Cj4gKwl9Cj4gKwo+ICsJ
Y3R4LmZ1ZHB0ciA9ICh2b2lkICoqKSZmcy0+dnFzW1ZRX1JFUVVFU1RdLmZ1ZDsKPiArCWVyciA9
IGZ1c2VfZmlsbF9zdXBlcl9jb21tb24oc2IsICZjdHgpOwo+ICsJaWYgKGVyciA8IDApCj4gKwkJ
Z290byBlcnJfZnJlZV9mdXNlX2RldnM7Cj4gKwo+ICsJZmMgPSBmcy0+dnFzW1ZRX1JFUVVFU1Rd
LmZ1ZC0+ZmM7Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IGZzLT5udnFzOyBpKyspIHsKPiArCQlz
dHJ1Y3QgdmlydGlvX2ZzX3ZxICpmc3ZxID0gJmZzLT52cXNbaV07Cj4gKwo+ICsJCWlmIChpID09
IFZRX1JFUVVFU1QpCj4gKwkJCWNvbnRpbnVlOyAvKiBhbHJlYWR5IGluaXRpYWxpemVkICovCj4g
KwkJZnVzZV9kZXZfaW5zdGFsbChmc3ZxLT5mdWQsIGZjKTsKPiArCX0KPiArCj4gKwkvKiBQcmV2
aW91cyB1bm1vdW50IHdpbGwgc3RvcCBhbGwgcXVldWVzLiBTdGFydCB0aGVzZSBhZ2FpbiAqLwo+
ICsJdmlydGlvX2ZzX3N0YXJ0X2FsbF9xdWV1ZXMoZnMpOwo+ICsJZnVzZV9zZW5kX2luaXQoZmMp
Owo+ICsJbXV0ZXhfdW5sb2NrKCZ2aXJ0aW9fZnNfbXV0ZXgpOwo+ICsJcmV0dXJuIDA7Cj4gKwo+
ICtlcnJfZnJlZV9mdXNlX2RldnM6Cj4gKwl2aXJ0aW9fZnNfZnJlZV9kZXZzKGZzKTsKPiArZXJy
Ogo+ICsJbXV0ZXhfdW5sb2NrKCZ2aXJ0aW9fZnNfbXV0ZXgpOwo+ICsJcmV0dXJuIGVycjsKPiAr
fQo+ICsKPiArc3RhdGljIHZvaWQgdmlydGlvX2tpbGxfc2Ioc3RydWN0IHN1cGVyX2Jsb2NrICpz
YikKPiArewo+ICsJc3RydWN0IGZ1c2VfY29ubiAqZmMgPSBnZXRfZnVzZV9jb25uX3N1cGVyKHNi
KTsKPiArCXN0cnVjdCB2aXJ0aW9fZnMgKnZmczsKPiArCXN0cnVjdCB2aXJ0aW9fZnNfdnEgKmZz
dnE7Cj4gKwo+ICsJLyogSWYgbW91bnQgZmFpbGVkLCB3ZSBjYW4gc3RpbGwgYmUgY2FsbGVkIHdp
dGhvdXQgYW55IGZjICovCj4gKwlpZiAoIWZjKQo+ICsJCXJldHVybiBmdXNlX2tpbGxfc2JfYW5v
bihzYik7Cj4gKwo+ICsJdmZzID0gZmMtPmlxLnByaXY7Cj4gKwlmc3ZxID0gJnZmcy0+dnFzW1ZR
X0hJUFJJT107Cj4gKwo+ICsJLyogU3RvcCBmb3JnZXQgcXVldWUuIFNvb24gZGVzdHJveSB3aWxs
IGJlIHNlbnQgKi8KPiArCXNwaW5fbG9jaygmZnN2cS0+bG9jayk7Cj4gKwlmc3ZxLT5jb25uZWN0
ZWQgPSBmYWxzZTsKPiArCXNwaW5fdW5sb2NrKCZmc3ZxLT5sb2NrKTsKPiArCXZpcnRpb19mc19k
cmFpbl9hbGxfcXVldWVzKHZmcyk7Cj4gKwo+ICsJZnVzZV9raWxsX3NiX2Fub24oc2IpOwo+ICsK
PiArCS8qIGZ1c2Vfa2lsbF9zYl9hbm9uKCkgbXVzdCBoYXZlIHNlbnQgZGVzdHJveS4gU3RvcCBh
bGwgcXVldWVzCj4gKwkgKiBhbmQgZHJhaW4gb25lIG1vcmUgdGltZSBhbmQgZnJlZSBmdXNlIGRl
dmljZXMuIEZyZWVpbmcgZnVzZQo+ICsJICogZGV2aWNlcyB3aWxsIGRyb3AgdGhlaXIgcmVmZXJl
bmNlIG9uIGZ1c2VfY29ubiBhbmQgdGhhdCBpbgo+ICsJICogdHVybiB3aWxsIGRyb3AgaXRzIHJl
ZmVyZW5jZSBvbiB2aXJ0aW9fZnMgb2JqZWN0Lgo+ICsJICovCj4gKwl2aXJ0aW9fZnNfc3RvcF9h
bGxfcXVldWVzKHZmcyk7Cj4gKwl2aXJ0aW9fZnNfZHJhaW5fYWxsX3F1ZXVlcyh2ZnMpOwo+ICsJ
dmlydGlvX2ZzX2ZyZWVfZGV2cyh2ZnMpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHZpcnRpb19m
c190ZXN0X3N1cGVyKHN0cnVjdCBzdXBlcl9ibG9jayAqc2IsCj4gKwkJCQlzdHJ1Y3QgZnNfY29u
dGV4dCAqZnNjKQo+ICt7Cj4gKwlzdHJ1Y3QgZnVzZV9jb25uICpmYyA9IGZzYy0+c19mc19pbmZv
Owo+ICsKPiArCXJldHVybiBmYy0+aXEucHJpdiA9PSBnZXRfZnVzZV9jb25uX3N1cGVyKHNiKS0+
aXEucHJpdjsKPiArfQo+ICsKPiArc3RhdGljIGludCB2aXJ0aW9fZnNfc2V0X3N1cGVyKHN0cnVj
dCBzdXBlcl9ibG9jayAqc2IsCj4gKwkJCSAgICAgICBzdHJ1Y3QgZnNfY29udGV4dCAqZnNjKQo+
ICt7Cj4gKwlpbnQgZXJyOwo+ICsKPiArCWVyciA9IGdldF9hbm9uX2JkZXYoJnNiLT5zX2Rldik7
Cj4gKwlpZiAoIWVycikKPiArCQlmdXNlX2Nvbm5fZ2V0KGZzYy0+c19mc19pbmZvKTsKPiArCj4g
KwlyZXR1cm4gZXJyOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHZpcnRpb19mc19nZXRfdHJlZShz
dHJ1Y3QgZnNfY29udGV4dCAqZnNjKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX2ZzICpmczsKPiAr
CXN0cnVjdCBzdXBlcl9ibG9jayAqc2I7Cj4gKwlzdHJ1Y3QgZnVzZV9jb25uICpmYzsKPiArCWlu
dCBlcnI7Cj4gKwo+ICsJLyogVGhpcyBnZXRzIGEgcmVmZXJlbmNlIG9uIHZpcnRpb19mcyBvYmpl
Y3QuIFRoaXMgcHRyIGdldHMgaW5zdGFsbGVkCj4gKwkgKiBpbiBmYy0+aXEtPnByaXYuIE9uY2Ug
ZnVzZV9jb25uIGlzIGdvaW5nIGF3YXksIGl0IGNhbGxzIC0+cHV0KCkKPiArCSAqIHRvIGRyb3Ag
dGhlIHJlZmVyZW5jZSB0byB0aGlzIG9iamVjdC4KPiArCSAqLwo+ICsJZnMgPSB2aXJ0aW9fZnNf
ZmluZF9pbnN0YW5jZShmc2MtPnNvdXJjZSk7Cj4gKwlpZiAoIWZzKSB7Cj4gKwkJcHJfaW5mbygi
dmlydGlvLWZzOiB0YWcgPCVzPiBub3QgZm91bmRcbiIsIGZzYy0+c291cmNlKTsKPiArCQlyZXR1
cm4gLUVJTlZBTDsKPiArCX0KPiArCj4gKwlmYyA9IGt6YWxsb2Moc2l6ZW9mKHN0cnVjdCBmdXNl
X2Nvbm4pLCBHRlBfS0VSTkVMKTsKPiArCWlmICghZmMpIHsKPiArCQltdXRleF9sb2NrKCZ2aXJ0
aW9fZnNfbXV0ZXgpOwo+ICsJCXZpcnRpb19mc19wdXQoZnMpOwo+ICsJCW11dGV4X3VubG9jaygm
dmlydGlvX2ZzX211dGV4KTsKPiArCQlyZXR1cm4gLUVOT01FTTsKPiArCX0KPiArCj4gKwlmdXNl
X2Nvbm5faW5pdChmYywgZ2V0X3VzZXJfbnMoY3VycmVudF91c2VyX25zKCkpLCAmdmlydGlvX2Zz
X2ZpcV9vcHMsCj4gKwkJICAgICAgIGZzKTsKPiArCWZjLT5yZWxlYXNlID0gZnVzZV9mcmVlX2Nv
bm47Cj4gKwlmYy0+ZGVsZXRlX3N0YWxlID0gdHJ1ZTsKPiArCj4gKwlmc2MtPnNfZnNfaW5mbyA9
IGZjOwo+ICsJc2IgPSBzZ2V0X2ZjKGZzYywgdmlydGlvX2ZzX3Rlc3Rfc3VwZXIsIHZpcnRpb19m
c19zZXRfc3VwZXIpOwo+ICsJZnVzZV9jb25uX3B1dChmYyk7Cj4gKwlpZiAoSVNfRVJSKHNiKSkK
PiArCQlyZXR1cm4gUFRSX0VSUihzYik7Cj4gKwo+ICsJaWYgKCFzYi0+c19yb290KSB7Cj4gKwkJ
ZXJyID0gdmlydGlvX2ZzX2ZpbGxfc3VwZXIoc2IpOwo+ICsJCWlmIChlcnIpIHsKPiArCQkJZGVh
Y3RpdmF0ZV9sb2NrZWRfc3VwZXIoc2IpOwo+ICsJCQlyZXR1cm4gZXJyOwo+ICsJCX0KPiArCj4g
KwkJc2ItPnNfZmxhZ3MgfD0gU0JfQUNUSVZFOwo+ICsJfQo+ICsKPiArCVdBUk5fT04oZnNjLT5y
b290KTsKPiArCWZzYy0+cm9vdCA9IGRnZXQoc2ItPnNfcm9vdCk7Cj4gKwlyZXR1cm4gMDsKPiAr
fQo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVjdCBmc19jb250ZXh0X29wZXJhdGlvbnMgdmlydGlv
X2ZzX2NvbnRleHRfb3BzID0gewo+ICsJLmdldF90cmVlCT0gdmlydGlvX2ZzX2dldF90cmVlLAo+
ICt9Owo+ICsKPiArc3RhdGljIGludCB2aXJ0aW9fZnNfaW5pdF9mc19jb250ZXh0KHN0cnVjdCBm
c19jb250ZXh0ICpmc2MpCj4gK3sKPiArCWZzYy0+b3BzID0gJnZpcnRpb19mc19jb250ZXh0X29w
czsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtzdGF0aWMgc3RydWN0IGZpbGVfc3lzdGVtX3R5
cGUgdmlydGlvX2ZzX3R5cGUgPSB7Cj4gKwkub3duZXIJCT0gVEhJU19NT0RVTEUsCj4gKwkubmFt
ZQkJPSAidmlydGlvZnMiLAo+ICsJLmluaXRfZnNfY29udGV4dCA9IHZpcnRpb19mc19pbml0X2Zz
X2NvbnRleHQsCj4gKwkua2lsbF9zYgk9IHZpcnRpb19raWxsX3NiLAo+ICt9Owo+ICsKPiArc3Rh
dGljIGludCBfX2luaXQgdmlydGlvX2ZzX2luaXQodm9pZCkKPiArewo+ICsJaW50IHJldDsKPiAr
Cj4gKwlyZXQgPSByZWdpc3Rlcl92aXJ0aW9fZHJpdmVyKCZ2aXJ0aW9fZnNfZHJpdmVyKTsKPiAr
CWlmIChyZXQgPCAwKQo+ICsJCXJldHVybiByZXQ7Cj4gKwo+ICsJcmV0ID0gcmVnaXN0ZXJfZmls
ZXN5c3RlbSgmdmlydGlvX2ZzX3R5cGUpOwo+ICsJaWYgKHJldCA8IDApIHsKPiArCQl1bnJlZ2lz
dGVyX3ZpcnRpb19kcml2ZXIoJnZpcnRpb19mc19kcml2ZXIpOwo+ICsJCXJldHVybiByZXQ7Cj4g
Kwl9Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArbW9kdWxlX2luaXQodmlydGlvX2ZzX2luaXQp
Owo+ICsKPiArc3RhdGljIHZvaWQgX19leGl0IHZpcnRpb19mc19leGl0KHZvaWQpCj4gK3sKPiAr
CXVucmVnaXN0ZXJfZmlsZXN5c3RlbSgmdmlydGlvX2ZzX3R5cGUpOwo+ICsJdW5yZWdpc3Rlcl92
aXJ0aW9fZHJpdmVyKCZ2aXJ0aW9fZnNfZHJpdmVyKTsKPiArfQo+ICttb2R1bGVfZXhpdCh2aXJ0
aW9fZnNfZXhpdCk7Cj4gKwo+ICtNT0RVTEVfQVVUSE9SKCJTdGVmYW4gSGFqbm9jemkgPHN0ZWZh
bmhhQHJlZGhhdC5jb20+Iik7Cj4gK01PRFVMRV9ERVNDUklQVElPTigiVmlydGlvIEZpbGVzeXN0
ZW0iKTsKPiArTU9EVUxFX0xJQ0VOU0UoIkdQTCIpOwo+ICtNT0RVTEVfQUxJQVNfRlMoS0JVSUxE
X01PRE5BTUUpOwo+ICtNT0RVTEVfREVWSUNFX1RBQkxFKHZpcnRpbywgaWRfdGFibGUpOwo+IGRp
ZmYgLS1naXQgYS9pbmNsdWRlL3VhcGkvbGludXgvdmlydGlvX2ZzLmggYi9pbmNsdWRlL3VhcGkv
bGludXgvdmlydGlvX2ZzLmgKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAwMDAwMDAw
MDAwMC4uYjVlOTljMjE3Yzg2Cj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2luY2x1ZGUvdWFwaS9s
aW51eC92aXJ0aW9fZnMuaAo+IEBAIC0wLDAgKzEsMTkgQEAKPiArLyogU1BEWC1MaWNlbnNlLUlk
ZW50aWZpZXI6ICgoR1BMLTIuMCBXSVRIIExpbnV4LXN5c2NhbGwtbm90ZSkgT1IgQlNELTMtQ2xh
dXNlKSAqLwo+ICsKPiArI2lmbmRlZiBfVUFQSV9MSU5VWF9WSVJUSU9fRlNfSAo+ICsjZGVmaW5l
IF9VQVBJX0xJTlVYX1ZJUlRJT19GU19ICj4gKwo+ICsjaW5jbHVkZSA8bGludXgvdHlwZXMuaD4K
PiArI2luY2x1ZGUgPGxpbnV4L3ZpcnRpb19pZHMuaD4KPiArI2luY2x1ZGUgPGxpbnV4L3ZpcnRp
b19jb25maWcuaD4KPiArI2luY2x1ZGUgPGxpbnV4L3ZpcnRpb190eXBlcy5oPgo+ICsKPiArc3Ry
dWN0IHZpcnRpb19mc19jb25maWcgewo+ICsJLyogRmlsZXN5c3RlbSBuYW1lIChVVEYtOCwgbm90
IE5VTC10ZXJtaW5hdGVkLCBwYWRkZWQgd2l0aCBOVUxzKSAqLwo+ICsJX191OCB0YWdbMzZdOwo+
ICsKPiArCS8qIE51bWJlciBvZiByZXF1ZXN0IHF1ZXVlcyAqLwo+ICsJX191MzIgbnVtX3F1ZXVl
czsKPiArfSBfX2F0dHJpYnV0ZV9fKChwYWNrZWQpKTsKPiArCj4gKyNlbmRpZiAvKiBfVUFQSV9M
SU5VWF9WSVJUSU9fRlNfSCAqLwo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL3VhcGkvbGludXgvdmly
dGlvX2lkcy5oIGIvaW5jbHVkZS91YXBpL2xpbnV4L3ZpcnRpb19pZHMuaAo+IGluZGV4IDM0OGZk
MDE3NmY3NS4uNTg1ZTA3YjI3MzMzIDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvdWFwaS9saW51eC92
aXJ0aW9faWRzLmgKPiArKysgYi9pbmNsdWRlL3VhcGkvbGludXgvdmlydGlvX2lkcy5oCj4gQEAg
LTQ0LDYgKzQ0LDcgQEAKPiAgI2RlZmluZSBWSVJUSU9fSURfVlNPQ0sgICAgICAgIDE5IC8qIHZp
cnRpbyB2c29jayB0cmFuc3BvcnQgKi8KPiAgI2RlZmluZSBWSVJUSU9fSURfQ1JZUFRPICAgICAg
IDIwIC8qIHZpcnRpbyBjcnlwdG8gKi8KPiAgI2RlZmluZSBWSVJUSU9fSURfSU9NTVUgICAgICAg
IDIzIC8qIHZpcnRpbyBJT01NVSAqLwo+ICsjZGVmaW5lIFZJUlRJT19JRF9GUyAgICAgICAgICAg
MjYgLyogdmlydGlvIGZpbGVzeXN0ZW0gKi8KPiAgI2RlZmluZSBWSVJUSU9fSURfUE1FTSAgICAg
ICAgIDI3IC8qIHZpcnRpbyBwbWVtICovCj4gIAo+ICAjZW5kaWYgLyogX0xJTlVYX1ZJUlRJT19J
RFNfSCAqLwo+IC0tIAo+IDIuMjEuMApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fXwpWaXJ0dWFsaXphdGlvbiBtYWlsaW5nIGxpc3QKVmlydHVhbGl6YXRpb25A
bGlzdHMubGludXgtZm91bmRhdGlvbi5vcmcKaHR0cHM6Ly9saXN0cy5saW51eGZvdW5kYXRpb24u
b3JnL21haWxtYW4vbGlzdGluZm8vdmlydHVhbGl6YXRpb24=
