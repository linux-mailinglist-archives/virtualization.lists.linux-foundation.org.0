Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
	by mail.lfdr.de (Postfix) with ESMTPS id D19FD428587
	for <lists.virtualization@lfdr.de>; Mon, 11 Oct 2021 05:18:58 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp4.osuosl.org (Postfix) with ESMTP id 469934031B;
	Mon, 11 Oct 2021 03:18:57 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
	by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ASWb_slMNoB9; Mon, 11 Oct 2021 03:18:55 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp4.osuosl.org (Postfix) with ESMTPS id 887D3402D4;
	Mon, 11 Oct 2021 03:18:55 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 22062C0022;
	Mon, 11 Oct 2021 03:18:55 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp1.osuosl.org (smtp1.osuosl.org [IPv6:2605:bc80:3010::138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id F097BC000D
 for <virtualization@lists.linux-foundation.org>;
 Mon, 11 Oct 2021 03:18:52 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp1.osuosl.org (Postfix) with ESMTP id C53AE8176D
 for <virtualization@lists.linux-foundation.org>;
 Mon, 11 Oct 2021 03:18:52 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp1.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp1.osuosl.org ([127.0.0.1])
 by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 98SA6nUYC9uK
 for <virtualization@lists.linux-foundation.org>;
 Mon, 11 Oct 2021 03:18:51 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [216.205.24.124])
 by smtp1.osuosl.org (Postfix) with ESMTPS id 56E7180E51
 for <virtualization@lists.linux-foundation.org>;
 Mon, 11 Oct 2021 03:18:51 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1633922330;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=RrmCOWUNFhBpmieo2mW/jV26ouiX7jrbtd5i756UNCw=;
 b=ahlliTa28S+nxhZYmBuf6ShbTl4SGdKfQPQf+AXT910J4ta4Y+Vfv5AZFt1I4GBdEwGueX
 zhtOzZP2GHUtZ4vzHxjbps4NOJun2KEczbYhMGe3HBZaEMzVcLyLwLFagrXzJ+HPapPZsp
 5vxlUUXPo2U+b+9VPputQtfeYRdk7R8=
Received: from mail-pf1-f198.google.com (mail-pf1-f198.google.com
 [209.85.210.198]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-515-EIjie6bYM1WEknwP0pe1bw-1; Sun, 10 Oct 2021 23:18:48 -0400
X-MC-Unique: EIjie6bYM1WEknwP0pe1bw-1
Received: by mail-pf1-f198.google.com with SMTP id
 t79-20020a627852000000b0044d0ecd9f7aso721278pfc.13
 for <virtualization@lists.linux-foundation.org>;
 Sun, 10 Oct 2021 20:18:47 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=RrmCOWUNFhBpmieo2mW/jV26ouiX7jrbtd5i756UNCw=;
 b=KVGeeaS1X1kzPm9ghmkuojePXOK6oMkY6H7pVnEnI7wJLmOgxzKzpOreg/td6UQotp
 j6pKfyiyODEbNXAREOqs+CuTKHBLjhfzNS9dzWw6CUee19MvyX2PraIfJL9Nak0ypryx
 Kyz1LV+tld+/R6cP8KTVGkY7hmZjQj16kEzEX3wxheTY6A9d0JNzkZdF2YNUwnd4Pjpz
 45gL+kDdADe5NBuyh/iL5hxtCMwurCcylXZGsjeeYlt5RkPA7w6EK2k2ZHZ7ltdlaApr
 R2HVNEoCNTbMtUIGWxHMGpfHHnzQx+oE8OqqK0OdX1NiKDBCqGvob6TLDbVxzdQi/v4e
 lYyQ==
X-Gm-Message-State: AOAM532PbCU8GM/1742Cx76WM7+B6VZjJmKzUhVC/oV7qUbe7NOjRVYw
 r8NDxHy1CXNDKJYPnE/DI19bq6pVv/XYSioAjjlZtvhmdLxIhFfbZjLFm05DcV6cB20/Z4TXOFl
 mp5rP9znkPq+qXhSxkOskUd3AYxNZsW3OwWyWXwEPmw==
X-Received: by 2002:a65:47cd:: with SMTP id f13mr16296397pgs.439.1633922326546; 
 Sun, 10 Oct 2021 20:18:46 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJyzF685edzKUD50yLSUADLjG3Ltj9JLirw1QXP6+S4L2ANPSfQSoy6gv+WGA4ouO3YIkWnghA==
X-Received: by 2002:a65:47cd:: with SMTP id f13mr16296375pgs.439.1633922326167; 
 Sun, 10 Oct 2021 20:18:46 -0700 (PDT)
Received: from wangxiaodeMacBook-Air.local ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id l18sm5855225pfu.202.2021.10.10.20.18.43
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Sun, 10 Oct 2021 20:18:45 -0700 (PDT)
Subject: Re: [PATCH v4 7/7] eni_vdpa: add vDPA driver for Alibaba ENI
To: Wu Zongyong <wuzongyong@linux.alibaba.com>,
 virtualization@lists.linux-foundation.org, linux-kernel@vger.kernel.org,
 mst@redhat.com
References: <cover.1632313398.git.wuzongyong@linux.alibaba.com>
 <cover.1632882380.git.wuzongyong@linux.alibaba.com>
 <68d4ffac2ed9c21f352c272efbdf21e567d7d48e.1632882380.git.wuzongyong@linux.alibaba.com>
From: Jason Wang <jasowang@redhat.com>
Message-ID: <7872513b-6cf5-704e-8807-43dc7b563d96@redhat.com>
Date: Mon, 11 Oct 2021 11:18:42 +0800
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0)
 Gecko/20100101 Thunderbird/78.14.0
MIME-Version: 1.0
In-Reply-To: <68d4ffac2ed9c21f352c272efbdf21e567d7d48e.1632882380.git.wuzongyong@linux.alibaba.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: wei.yang1@linux.alibaba.com
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="gbk"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CtTaIDIwMjEvOS8yOSDPws7nMjoxMSwgV3UgWm9uZ3lvbmcg0LS1wDoKPiBUaGlzIHBhdGNoIGFk
ZHMgYSBuZXcgdkRQQSBkcml2ZXIgZm9yIEFsaWJhYmEgRU5JKEVsYXN0aWMgTmV0d29yawo+IElu
dGVyZmFjZSkgd2hpY2ggaXMgYnVpbGQgdXBvbiB2aXJ0aW8gMC45LjUgc3BlY2lmaWNhdGlvbi4K
PiBBbmQgdGhpcyBkcml2ZXIgZG9lc24ndCBzdXBwb3J0IHRvIHJ1biBvbiBCRSBob3N0LgoKCklm
IHRoaXMgaXMgdHJ1ZSwgSSB0aGluayBpdCdzIHN0aWxsIGJldHRlciB0byBleGNsdWRlIHRoaXMg
ZHJpdmVyIHZpYSAKS2NvbmZpZy4KCgo+Cj4gU2lnbmVkLW9mZi1ieTogV3UgWm9uZ3lvbmcgPHd1
em9uZ3lvbmdAbGludXguYWxpYmFiYS5jb20+Cj4gLS0tCj4gICBkcml2ZXJzL3ZkcGEvS2NvbmZp
ZyAgICAgICAgICAgIHwgICA4ICsKPiAgIGRyaXZlcnMvdmRwYS9NYWtlZmlsZSAgICAgICAgICAg
fCAgIDEgKwo+ICAgZHJpdmVycy92ZHBhL2FsaWJhYmEvTWFrZWZpbGUgICB8ICAgMyArCj4gICBk
cml2ZXJzL3ZkcGEvYWxpYmFiYS9lbmlfdmRwYS5jIHwgNTUzICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrCj4gICA0IGZpbGVzIGNoYW5nZWQsIDU2NSBpbnNlcnRpb25zKCspCj4gICBj
cmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy92ZHBhL2FsaWJhYmEvTWFrZWZpbGUKPiAgIGNyZWF0
ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL3ZkcGEvYWxpYmFiYS9lbmlfdmRwYS5jCj4KPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy92ZHBhL0tjb25maWcgYi9kcml2ZXJzL3ZkcGEvS2NvbmZpZwo+IGluZGV4
IDNkOTE5ODJkODM3MS4uOTU4N2I5MTc3YjA1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvdmRwYS9L
Y29uZmlnCj4gKysrIGIvZHJpdmVycy92ZHBhL0tjb25maWcKPiBAQCAtNzgsNCArNzgsMTIgQEAg
Y29uZmlnIFZQX1ZEUEEKPiAgIAloZWxwCj4gICAJICBUaGlzIGtlcm5lbCBtb2R1bGUgYnJpZGdl
cyB2aXJ0aW8gUENJIGRldmljZSB0byB2RFBBIGJ1cy4KPiAgIAo+ICtjb25maWcgQUxJQkFCQV9F
TklfVkRQQQo+ICsJdHJpc3RhdGUgInZEUEEgZHJpdmVyIGZvciBBbGliYWJhIEVOSSIKPiArCXNl
bGVjdCBWSVJUSU9fUENJX0xFR0FDWV9MSUIKPiArCWRlcGVuZHMgb24gUENJX01TSQo+ICsJaGVs
cAo+ICsJICBWRFBBIGRyaXZlciBmb3IgQWxpYmFiYSBFTkkoRWxhc3RpYyBOZXR3b3JrIEludGVy
ZmFjZSkgd2hpY2ggaXMgYnVpbGQgdXBvbgo+ICsJICB2aXJ0aW8gMC45LjUgc3BlY2lmaWNhdGlv
bi4KPiArCj4gICBlbmRpZiAjIFZEUEEKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92ZHBhL01ha2Vm
aWxlIGIvZHJpdmVycy92ZHBhL01ha2VmaWxlCj4gaW5kZXggZjAyZWJlZDMzZjE5Li4xNTY2NTU2
M2E3ZjQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92ZHBhL01ha2VmaWxlCj4gKysrIGIvZHJpdmVy
cy92ZHBhL01ha2VmaWxlCj4gQEAgLTUsMyArNSw0IEBAIG9iai0kKENPTkZJR19WRFBBX1VTRVIp
ICs9IHZkcGFfdXNlci8KPiAgIG9iai0kKENPTkZJR19JRkNWRikgICAgKz0gaWZjdmYvCj4gICBv
YmotJChDT05GSUdfTUxYNV9WRFBBKSArPSBtbHg1Lwo+ICAgb2JqLSQoQ09ORklHX1ZQX1ZEUEEp
ICAgICs9IHZpcnRpb19wY2kvCj4gK29iai0kKENPTkZJR19BTElCQUJBX0VOSV9WRFBBKSArPSBh
bGliYWJhLwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEvYWxpYmFiYS9NYWtlZmlsZSBiL2Ry
aXZlcnMvdmRwYS9hbGliYWJhL01ha2VmaWxlCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRl
eCAwMDAwMDAwMDAwMDAuLmVmNGFhZTY5Zjg3YQo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2
ZXJzL3ZkcGEvYWxpYmFiYS9NYWtlZmlsZQo+IEBAIC0wLDAgKzEsMyBAQAo+ICsjIFNQRFgtTGlj
ZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCj4gK29iai0kKENPTkZJR19BTElCQUJBX0VOSV9WRFBB
KSArPSBlbmlfdmRwYS5vCj4gKwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEvYWxpYmFiYS9l
bmlfdmRwYS5jIGIvZHJpdmVycy92ZHBhL2FsaWJhYmEvZW5pX3ZkcGEuYwo+IG5ldyBmaWxlIG1v
ZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAwLi42YTA5ZjE1N2Q4MTAKPiAtLS0gL2Rldi9u
dWxsCj4gKysrIGIvZHJpdmVycy92ZHBhL2FsaWJhYmEvZW5pX3ZkcGEuYwo+IEBAIC0wLDAgKzEs
NTUzIEBACj4gKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKPiArLyoK
PiArICogdkRQQSBicmlkZ2UgZHJpdmVyIGZvciBBbGliYWJhIEVOSShFbGFzdGljIE5ldHdvcmsg
SW50ZXJmYWNlKQo+ICsgKgo+ICsgKiBDb3B5cmlnaHQgKGMpIDIwMjEsIEFsaWJhYmEgSW5jLiBB
bGwgcmlnaHRzIHJlc2VydmVkLgo+ICsgKiBBdXRob3I6IFd1IFpvbmd5b25nIDx3dXpvbmd5b25n
QGxpbnV4LmFsaWJhYmEuY29tPgo+ICsgKgo+ICsgKi8KPiArCj4gKyNpbmNsdWRlICJsaW51eC9i
aXRzLmgiCj4gKyNpbmNsdWRlIDxsaW51eC9pbnRlcnJ1cHQuaD4KPiArI2luY2x1ZGUgPGxpbnV4
L21vZHVsZS5oPgo+ICsjaW5jbHVkZSA8bGludXgvcGNpLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC92
ZHBhLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC92aXJ0aW8uaD4KPiArI2luY2x1ZGUgPGxpbnV4L3Zp
cnRpb19jb25maWcuaD4KPiArI2luY2x1ZGUgPGxpbnV4L3ZpcnRpb19yaW5nLmg+Cj4gKyNpbmNs
dWRlIDxsaW51eC92aXJ0aW9fcGNpLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC92aXJ0aW9fcGNpX2xl
Z2FjeS5oPgo+ICsjaW5jbHVkZSA8dWFwaS9saW51eC92aXJ0aW9fbmV0Lmg+Cj4gKwo+ICsjZGVm
aW5lIEVOSV9NU0lYX05BTUVfU0laRSAyNTYKPiArCj4gKyNkZWZpbmUgRU5JX0VSUihwZGV2LCBm
bXQsIC4uLikJXAo+ICsJZGV2X2VycigmcGRldi0+ZGV2LCAiJXMiZm10LCAiZW5pX3ZkcGE6ICIs
ICMjX19WQV9BUkdTX18pCj4gKyNkZWZpbmUgRU5JX0RCRyhwZGV2LCBmbXQsIC4uLikJXAo+ICsJ
ZGV2X2RiZygmcGRldi0+ZGV2LCAiJXMiZm10LCAiZW5pX3ZkcGE6ICIsICMjX19WQV9BUkdTX18p
Cj4gKyNkZWZpbmUgRU5JX0lORk8ocGRldiwgZm10LCAuLi4pIFwKPiArCWRldl9pbmZvKCZwZGV2
LT5kZXYsICIlcyJmbXQsICJlbmlfdmRwYTogIiwgIyNfX1ZBX0FSR1NfXykKPiArCj4gK3N0cnVj
dCBlbmlfdnJpbmcgewo+ICsJdm9pZCBfX2lvbWVtICpub3RpZnk7Cj4gKwljaGFyIG1zaXhfbmFt
ZVtFTklfTVNJWF9OQU1FX1NJWkVdOwo+ICsJc3RydWN0IHZkcGFfY2FsbGJhY2sgY2I7Cj4gKwlp
bnQgaXJxOwo+ICt9Owo+ICsKPiArc3RydWN0IGVuaV92ZHBhIHsKPiArCXN0cnVjdCB2ZHBhX2Rl
dmljZSB2ZHBhOwo+ICsJc3RydWN0IHZpcnRpb19wY2lfbGVnYWN5X2RldmljZSBsZGV2Owo+ICsJ
c3RydWN0IGVuaV92cmluZyAqdnJpbmc7Cj4gKwlzdHJ1Y3QgdmRwYV9jYWxsYmFjayBjb25maWdf
Y2I7Cj4gKwljaGFyIG1zaXhfbmFtZVtFTklfTVNJWF9OQU1FX1NJWkVdOwo+ICsJaW50IGNvbmZp
Z19pcnE7Cj4gKwlpbnQgcXVldWVzOwo+ICsJaW50IHZlY3RvcnM7Cj4gK307Cj4gKwo+ICtzdGF0
aWMgc3RydWN0IGVuaV92ZHBhICp2ZHBhX3RvX2VuaShzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEp
Cj4gK3sKPiArCXJldHVybiBjb250YWluZXJfb2YodmRwYSwgc3RydWN0IGVuaV92ZHBhLCB2ZHBh
KTsKPiArfQo+ICsKPiArc3RhdGljIHN0cnVjdCB2aXJ0aW9fcGNpX2xlZ2FjeV9kZXZpY2UgKnZk
cGFfdG9fbGRldihzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEpCj4gK3sKPiArCXN0cnVjdCBlbmlf
dmRwYSAqZW5pX3ZkcGEgPSB2ZHBhX3RvX2VuaSh2ZHBhKTsKPiArCj4gKwlyZXR1cm4gJmVuaV92
ZHBhLT5sZGV2Owo+ICt9Cj4gKwo+ICtzdGF0aWMgdTY0IGVuaV92ZHBhX2dldF9mZWF0dXJlcyhz
dHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEpCj4gK3sKPiArCXN0cnVjdCB2aXJ0aW9fcGNpX2xlZ2Fj
eV9kZXZpY2UgKmxkZXYgPSB2ZHBhX3RvX2xkZXYodmRwYSk7Cj4gKwl1NjQgZmVhdHVyZXMgPSB2
cF9sZWdhY3lfZ2V0X2ZlYXR1cmVzKGxkZXYpOwo+ICsKPiArCWZlYXR1cmVzIHw9IEJJVF9VTEwo
VklSVElPX0ZfQUNDRVNTX1BMQVRGT1JNKTsKPiArCWZlYXR1cmVzIHw9IEJJVF9VTEwoVklSVElP
X0ZfT1JERVJfUExBVEZPUk0pOwoKClZFUlNJT05fMSBpcyBhbHNvIG5lZWRlZD8KCgo+ICsKPiAr
CXJldHVybiBmZWF0dXJlczsKPiArfQo+ICsKPiArc3RhdGljIGludCBlbmlfdmRwYV9zZXRfZmVh
dHVyZXMoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhLCB1NjQgZmVhdHVyZXMpCj4gK3sKPiArCXN0
cnVjdCB2aXJ0aW9fcGNpX2xlZ2FjeV9kZXZpY2UgKmxkZXYgPSB2ZHBhX3RvX2xkZXYodmRwYSk7
Cj4gKwo+ICsJaWYgKCEoZmVhdHVyZXMgJiBCSVRfVUxMKFZJUlRJT19ORVRfRl9NUkdfUlhCVUYp
KSAmJiBmZWF0dXJlcykgewo+ICsJCUVOSV9FUlIobGRldi0+cGNpX2RldiwKPiArCQkJIlZJUlRJ
T19ORVRfRl9NUkdfUlhCVUYgaXMgbm90IG5lZ290aWF0ZWRcbiIpOwo+ICsJCXJldHVybiAtRUlO
VkFMOwoKCkRvIHdlIG5lZWQgdG8gbWFrZSBzdXJlIEZFQVRVUkVfT0sgaXMgbm90IHNldCBpbiB0
aGlzIGNhc2Ugb3IgdGhlIEVOSSAKY2FuIGRvIHRoaXMgZm9yIHVzPwoKT3RoZXIgbG9va3MgZ29v
ZC4KClRoYW5rcwoKCj4gKwl9Cj4gKwo+ICsJdnBfbGVnYWN5X3NldF9mZWF0dXJlcyhsZGV2LCAo
dTMyKWZlYXR1cmVzKTsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIHU4IGVu
aV92ZHBhX2dldF9zdGF0dXMoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhKQo+ICt7Cj4gKwlzdHJ1
Y3QgdmlydGlvX3BjaV9sZWdhY3lfZGV2aWNlICpsZGV2ID0gdmRwYV90b19sZGV2KHZkcGEpOwo+
ICsKPiArCXJldHVybiB2cF9sZWdhY3lfZ2V0X3N0YXR1cyhsZGV2KTsKPiArfQo+ICsKPiArc3Rh
dGljIGludCBlbmlfdmRwYV9nZXRfdnFfaXJxKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSwgdTE2
IGlkeCkKPiArewo+ICsJc3RydWN0IGVuaV92ZHBhICplbmlfdmRwYSA9IHZkcGFfdG9fZW5pKHZk
cGEpOwo+ICsJaW50IGlycSA9IGVuaV92ZHBhLT52cmluZ1tpZHhdLmlycTsKPiArCj4gKwlpZiAo
aXJxID09IFZJUlRJT19NU0lfTk9fVkVDVE9SKQo+ICsJCXJldHVybiAtRUlOVkFMOwo+ICsKPiAr
CXJldHVybiBpcnE7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGVuaV92ZHBhX2ZyZWVfaXJxKHN0
cnVjdCBlbmlfdmRwYSAqZW5pX3ZkcGEpCj4gK3sKPiArCXN0cnVjdCB2aXJ0aW9fcGNpX2xlZ2Fj
eV9kZXZpY2UgKmxkZXYgPSAmZW5pX3ZkcGEtPmxkZXY7Cj4gKwlzdHJ1Y3QgcGNpX2RldiAqcGRl
diA9IGxkZXYtPnBjaV9kZXY7Cj4gKwlpbnQgaTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgZW5p
X3ZkcGEtPnF1ZXVlczsgaSsrKSB7Cj4gKwkJaWYgKGVuaV92ZHBhLT52cmluZ1tpXS5pcnEgIT0g
VklSVElPX01TSV9OT19WRUNUT1IpIHsKPiArCQkJdnBfbGVnYWN5X3F1ZXVlX3ZlY3RvcihsZGV2
LCBpLCBWSVJUSU9fTVNJX05PX1ZFQ1RPUik7Cj4gKwkJCWRldm1fZnJlZV9pcnEoJnBkZXYtPmRl
diwgZW5pX3ZkcGEtPnZyaW5nW2ldLmlycSwKPiArCQkJCSAgICAgICZlbmlfdmRwYS0+dnJpbmdb
aV0pOwo+ICsJCQllbmlfdmRwYS0+dnJpbmdbaV0uaXJxID0gVklSVElPX01TSV9OT19WRUNUT1I7
Cj4gKwkJfQo+ICsJfQo+ICsKPiArCWlmIChlbmlfdmRwYS0+Y29uZmlnX2lycSAhPSBWSVJUSU9f
TVNJX05PX1ZFQ1RPUikgewo+ICsJCXZwX2xlZ2FjeV9jb25maWdfdmVjdG9yKGxkZXYsIFZJUlRJ
T19NU0lfTk9fVkVDVE9SKTsKPiArCQlkZXZtX2ZyZWVfaXJxKCZwZGV2LT5kZXYsIGVuaV92ZHBh
LT5jb25maWdfaXJxLCBlbmlfdmRwYSk7Cj4gKwkJZW5pX3ZkcGEtPmNvbmZpZ19pcnEgPSBWSVJU
SU9fTVNJX05PX1ZFQ1RPUjsKPiArCX0KPiArCj4gKwlpZiAoZW5pX3ZkcGEtPnZlY3RvcnMpIHsK
PiArCQlwY2lfZnJlZV9pcnFfdmVjdG9ycyhwZGV2KTsKPiArCQllbmlfdmRwYS0+dmVjdG9ycyA9
IDA7Cj4gKwl9Cj4gK30KPiArCj4gK3N0YXRpYyBpcnFyZXR1cm5fdCBlbmlfdmRwYV92cV9oYW5k
bGVyKGludCBpcnEsIHZvaWQgKmFyZykKPiArewo+ICsJc3RydWN0IGVuaV92cmluZyAqdnJpbmcg
PSBhcmc7Cj4gKwo+ICsJaWYgKHZyaW5nLT5jYi5jYWxsYmFjaykKPiArCQlyZXR1cm4gdnJpbmct
PmNiLmNhbGxiYWNrKHZyaW5nLT5jYi5wcml2YXRlKTsKPiArCj4gKwlyZXR1cm4gSVJRX0hBTkRM
RUQ7Cj4gK30KPiArCj4gK3N0YXRpYyBpcnFyZXR1cm5fdCBlbmlfdmRwYV9jb25maWdfaGFuZGxl
cihpbnQgaXJxLCB2b2lkICphcmcpCj4gK3sKPiArCXN0cnVjdCBlbmlfdmRwYSAqZW5pX3ZkcGEg
PSBhcmc7Cj4gKwo+ICsJaWYgKGVuaV92ZHBhLT5jb25maWdfY2IuY2FsbGJhY2spCj4gKwkJcmV0
dXJuIGVuaV92ZHBhLT5jb25maWdfY2IuY2FsbGJhY2soZW5pX3ZkcGEtPmNvbmZpZ19jYi5wcml2
YXRlKTsKPiArCj4gKwlyZXR1cm4gSVJRX0hBTkRMRUQ7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQg
ZW5pX3ZkcGFfcmVxdWVzdF9pcnEoc3RydWN0IGVuaV92ZHBhICplbmlfdmRwYSkKPiArewo+ICsJ
c3RydWN0IHZpcnRpb19wY2lfbGVnYWN5X2RldmljZSAqbGRldiA9ICZlbmlfdmRwYS0+bGRldjsK
PiArCXN0cnVjdCBwY2lfZGV2ICpwZGV2ID0gbGRldi0+cGNpX2RldjsKPiArCWludCBpLCByZXQs
IGlycTsKPiArCWludCBxdWV1ZXMgPSBlbmlfdmRwYS0+cXVldWVzOwo+ICsJaW50IHZlY3RvcnMg
PSBxdWV1ZXMgKyAxOwo+ICsKPiArCXJldCA9IHBjaV9hbGxvY19pcnFfdmVjdG9ycyhwZGV2LCB2
ZWN0b3JzLCB2ZWN0b3JzLCBQQ0lfSVJRX01TSVgpOwo+ICsJaWYgKHJldCAhPSB2ZWN0b3JzKSB7
Cj4gKwkJRU5JX0VSUihwZGV2LAo+ICsJCQkiZmFpbGVkIHRvIGFsbG9jYXRlIGlycSB2ZWN0b3Jz
IHdhbnQgJWQgYnV0ICVkXG4iLAo+ICsJCQl2ZWN0b3JzLCByZXQpOwo+ICsJCXJldHVybiByZXQ7
Cj4gKwl9Cj4gKwo+ICsJZW5pX3ZkcGEtPnZlY3RvcnMgPSB2ZWN0b3JzOwo+ICsKPiArCWZvciAo
aSA9IDA7IGkgPCBxdWV1ZXM7IGkrKykgewo+ICsJCXNucHJpbnRmKGVuaV92ZHBhLT52cmluZ1tp
XS5tc2l4X25hbWUsIEVOSV9NU0lYX05BTUVfU0laRSwKPiArCQkJICJlbmktdmRwYVslc10tJWRc
biIsIHBjaV9uYW1lKHBkZXYpLCBpKTsKPiArCQlpcnEgPSBwY2lfaXJxX3ZlY3RvcihwZGV2LCBp
KTsKPiArCQlyZXQgPSBkZXZtX3JlcXVlc3RfaXJxKCZwZGV2LT5kZXYsIGlycSwKPiArCQkJCSAg
ICAgICBlbmlfdmRwYV92cV9oYW5kbGVyLAo+ICsJCQkJICAgICAgIDAsIGVuaV92ZHBhLT52cmlu
Z1tpXS5tc2l4X25hbWUsCj4gKwkJCQkgICAgICAgJmVuaV92ZHBhLT52cmluZ1tpXSk7Cj4gKwkJ
aWYgKHJldCkgewo+ICsJCQlFTklfRVJSKHBkZXYsICJmYWlsZWQgdG8gcmVxdWVzdCBpcnEgZm9y
IHZxICVkXG4iLCBpKTsKPiArCQkJZ290byBlcnI7Cj4gKwkJfQo+ICsJCXZwX2xlZ2FjeV9xdWV1
ZV92ZWN0b3IobGRldiwgaSwgaSk7Cj4gKwkJZW5pX3ZkcGEtPnZyaW5nW2ldLmlycSA9IGlycTsK
PiArCX0KPiArCj4gKwlzbnByaW50ZihlbmlfdmRwYS0+bXNpeF9uYW1lLCBFTklfTVNJWF9OQU1F
X1NJWkUsICJlbmktdmRwYVslc10tY29uZmlnXG4iLAo+ICsJCSBwY2lfbmFtZShwZGV2KSk7Cj4g
KwlpcnEgPSBwY2lfaXJxX3ZlY3RvcihwZGV2LCBxdWV1ZXMpOwo+ICsJcmV0ID0gZGV2bV9yZXF1
ZXN0X2lycSgmcGRldi0+ZGV2LCBpcnEsIGVuaV92ZHBhX2NvbmZpZ19oYW5kbGVyLCAwLAo+ICsJ
CQkgICAgICAgZW5pX3ZkcGEtPm1zaXhfbmFtZSwgZW5pX3ZkcGEpOwo+ICsJaWYgKHJldCkgewo+
ICsJCUVOSV9FUlIocGRldiwgImZhaWxlZCB0byByZXF1ZXN0IGlycSBmb3IgY29uZmlnIHZxICVk
XG4iLCBpKTsKPiArCQlnb3RvIGVycjsKPiArCX0KPiArCXZwX2xlZ2FjeV9jb25maWdfdmVjdG9y
KGxkZXYsIHF1ZXVlcyk7Cj4gKwllbmlfdmRwYS0+Y29uZmlnX2lycSA9IGlycTsKPiArCj4gKwly
ZXR1cm4gMDsKPiArZXJyOgo+ICsJZW5pX3ZkcGFfZnJlZV9pcnEoZW5pX3ZkcGEpOwo+ICsJcmV0
dXJuIHJldDsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgZW5pX3ZkcGFfc2V0X3N0YXR1cyhzdHJ1
Y3QgdmRwYV9kZXZpY2UgKnZkcGEsIHU4IHN0YXR1cykKPiArewo+ICsJc3RydWN0IGVuaV92ZHBh
ICplbmlfdmRwYSA9IHZkcGFfdG9fZW5pKHZkcGEpOwo+ICsJc3RydWN0IHZpcnRpb19wY2lfbGVn
YWN5X2RldmljZSAqbGRldiA9ICZlbmlfdmRwYS0+bGRldjsKPiArCXU4IHMgPSBlbmlfdmRwYV9n
ZXRfc3RhdHVzKHZkcGEpOwo+ICsKPiArCWlmIChzdGF0dXMgJiBWSVJUSU9fQ09ORklHX1NfRFJJ
VkVSX09LICYmCj4gKwkgICAgIShzICYgVklSVElPX0NPTkZJR19TX0RSSVZFUl9PSykpIHsKPiAr
CQllbmlfdmRwYV9yZXF1ZXN0X2lycShlbmlfdmRwYSk7Cj4gKwl9Cj4gKwo+ICsJdnBfbGVnYWN5
X3NldF9zdGF0dXMobGRldiwgc3RhdHVzKTsKPiArCj4gKwlpZiAoIShzdGF0dXMgJiBWSVJUSU9f
Q09ORklHX1NfRFJJVkVSX09LKSAmJgo+ICsJICAgIChzICYgVklSVElPX0NPTkZJR19TX0RSSVZF
Ul9PSykpCj4gKwkJZW5pX3ZkcGFfZnJlZV9pcnEoZW5pX3ZkcGEpOwo+ICt9Cj4gKwo+ICtzdGF0
aWMgaW50IGVuaV92ZHBhX3Jlc2V0KHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSkKPiArewo+ICsJ
c3RydWN0IGVuaV92ZHBhICplbmlfdmRwYSA9IHZkcGFfdG9fZW5pKHZkcGEpOwo+ICsJc3RydWN0
IHZpcnRpb19wY2lfbGVnYWN5X2RldmljZSAqbGRldiA9ICZlbmlfdmRwYS0+bGRldjsKPiArCXU4
IHMgPSBlbmlfdmRwYV9nZXRfc3RhdHVzKHZkcGEpOwo+ICsKPiArCXZwX2xlZ2FjeV9zZXRfc3Rh
dHVzKGxkZXYsIDApOwo+ICsKPiArCWlmIChzICYgVklSVElPX0NPTkZJR19TX0RSSVZFUl9PSykK
PiArCQllbmlfdmRwYV9mcmVlX2lycShlbmlfdmRwYSk7Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30K
PiArCj4gK3N0YXRpYyB1MTYgZW5pX3ZkcGFfZ2V0X3ZxX251bV9tYXgoc3RydWN0IHZkcGFfZGV2
aWNlICp2ZHBhKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX3BjaV9sZWdhY3lfZGV2aWNlICpsZGV2
ID0gdmRwYV90b19sZGV2KHZkcGEpOwo+ICsKPiArCXJldHVybiB2cF9sZWdhY3lfZ2V0X3F1ZXVl
X3NpemUobGRldiwgMCk7Cj4gK30KPiArCj4gK3N0YXRpYyB1MTYgZW5pX3ZkcGFfZ2V0X3ZxX251
bV9taW4oc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX3Bj
aV9sZWdhY3lfZGV2aWNlICpsZGV2ID0gdmRwYV90b19sZGV2KHZkcGEpOwo+ICsKPiArCXJldHVy
biB2cF9sZWdhY3lfZ2V0X3F1ZXVlX3NpemUobGRldiwgMCk7Cj4gK30KPiArCj4gK3N0YXRpYyBp
bnQgZW5pX3ZkcGFfZ2V0X3ZxX3N0YXRlKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSwgdTE2IHFp
ZCwKPiArCQkJCXN0cnVjdCB2ZHBhX3ZxX3N0YXRlICpzdGF0ZSkKPiArewo+ICsJcmV0dXJuIC1F
T1BOT1RTVVBQOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGVuaV92ZHBhX3NldF92cV9zdGF0ZShz
dHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEsIHUxNiBxaWQsCj4gKwkJCQkgY29uc3Qgc3RydWN0IHZk
cGFfdnFfc3RhdGUgKnN0YXRlKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX3BjaV9sZWdhY3lfZGV2
aWNlICpsZGV2ID0gdmRwYV90b19sZGV2KHZkcGEpOwo+ICsJY29uc3Qgc3RydWN0IHZkcGFfdnFf
c3RhdGVfc3BsaXQgKnNwbGl0ID0gJnN0YXRlLT5zcGxpdDsKPiArCj4gKwkvKiBFTkkgaXMgYnVp
bGQgdXBvbiB2aXJ0aW8tcGNpIHNwZWNmaWNhdGlvbiB3aGljaCBub3Qgc3VwcG9ydAo+ICsJICog
dG8gc2V0IHN0YXRlIG9mIHZpcnRxdWV1ZS4gQnV0IGlmIHRoZSBzdGF0ZSBpcyBlcXVhbCB0byB0
aGUKPiArCSAqIGRldmljZSBpbml0aWFsIHN0YXRlIGJ5IGNoYW5jZSwgd2UgY2FuIGxldCBpdCBn
by4KPiArCSAqLwo+ICsJaWYgKCF2cF9sZWdhY3lfZ2V0X3F1ZXVlX2VuYWJsZShsZGV2LCBxaWQp
Cj4gKwkgICAgJiYgc3BsaXQtPmF2YWlsX2luZGV4ID09IDApCj4gKwkJcmV0dXJuIDA7Cj4gKwo+
ICsJcmV0dXJuIC1FT1BOT1RTVVBQOwo+ICt9Cj4gKwo+ICsKPiArc3RhdGljIHZvaWQgZW5pX3Zk
cGFfc2V0X3ZxX2NiKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSwgdTE2IHFpZCwKPiArCQkJICAg
ICAgIHN0cnVjdCB2ZHBhX2NhbGxiYWNrICpjYikKPiArewo+ICsJc3RydWN0IGVuaV92ZHBhICpl
bmlfdmRwYSA9IHZkcGFfdG9fZW5pKHZkcGEpOwo+ICsKPiArCWVuaV92ZHBhLT52cmluZ1txaWRd
LmNiID0gKmNiOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBlbmlfdmRwYV9zZXRfdnFfcmVhZHko
c3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhLCB1MTYgcWlkLAo+ICsJCQkJICBib29sIHJlYWR5KQo+
ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX3BjaV9sZWdhY3lfZGV2aWNlICpsZGV2ID0gdmRwYV90b19s
ZGV2KHZkcGEpOwo+ICsKPiArCS8qIEVOSSBpcyBhIGxlZ2FjeSB2aXJ0aW8tcGNpIGRldmljZS4g
VGhpcyBpcyBub3Qgc3VwcG9ydGVkCj4gKwkgKiBieSBzcGVjaWZpY2F0aW9uLiBCdXQgd2UgY2Fu
IGRpc2FibGUgdmlydHF1ZXVlIGJ5IHNldHRpbmcKPiArCSAqIGFkZHJlc3MgdG8gMC4KPiArCSAq
Lwo+ICsJaWYgKCFyZWFkeSkKPiArCQl2cF9sZWdhY3lfc2V0X3F1ZXVlX2FkZHJlc3MobGRldiwg
cWlkLCAwKTsKPiArfQo+ICsKPiArc3RhdGljIGJvb2wgZW5pX3ZkcGFfZ2V0X3ZxX3JlYWR5KHN0
cnVjdCB2ZHBhX2RldmljZSAqdmRwYSwgdTE2IHFpZCkKPiArewo+ICsJc3RydWN0IHZpcnRpb19w
Y2lfbGVnYWN5X2RldmljZSAqbGRldiA9IHZkcGFfdG9fbGRldih2ZHBhKTsKPiArCj4gKwlyZXR1
cm4gdnBfbGVnYWN5X2dldF9xdWV1ZV9lbmFibGUobGRldiwgcWlkKTsKPiArfQo+ICsKPiArc3Rh
dGljIHZvaWQgZW5pX3ZkcGFfc2V0X3ZxX251bShzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEsIHUx
NiBxaWQsCj4gKwkJCSAgICAgICB1MzIgbnVtKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX3BjaV9s
ZWdhY3lfZGV2aWNlICpsZGV2ID0gdmRwYV90b19sZGV2KHZkcGEpOwo+ICsJc3RydWN0IHBjaV9k
ZXYgKnBkZXYgPSBsZGV2LT5wY2lfZGV2Owo+ICsJdTE2IG4gPSB2cF9sZWdhY3lfZ2V0X3F1ZXVl
X3NpemUobGRldiwgcWlkKTsKPiArCj4gKwkvKiBFTkkgaXMgYSBsZWdhY3kgdmlydGlvLXBjaSBk
ZXZpY2Ugd2hpY2ggbm90IGFsbG93IHRvIGNoYW5nZQo+ICsJICogdmlydHF1ZXVlIHNpemUuIEp1
c3QgcmVwb3J0IGEgZXJyb3IgaWYgc29tZW9uZSB0cmllcyB0bwo+ICsJICogY2hhbmdlIGl0Lgo+
ICsJICovCj4gKwlpZiAobnVtICE9IG4pCj4gKwkJRU5JX0VSUihwZGV2LAo+ICsJCQkibm90IHN1
cHBvcnQgdG8gc2V0IHZxICV1IGZpeGVkIG51bSAldSB0byAldVxuIiwKPiArCQkJcWlkLCBuLCBu
dW0pOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGVuaV92ZHBhX3NldF92cV9hZGRyZXNzKHN0cnVj
dCB2ZHBhX2RldmljZSAqdmRwYSwgdTE2IHFpZCwKPiArCQkJCSAgIHU2NCBkZXNjX2FyZWEsIHU2
NCBkcml2ZXJfYXJlYSwKPiArCQkJCSAgIHU2NCBkZXZpY2VfYXJlYSkKPiArewo+ICsJc3RydWN0
IHZpcnRpb19wY2lfbGVnYWN5X2RldmljZSAqbGRldiA9IHZkcGFfdG9fbGRldih2ZHBhKTsKPiAr
CXUzMiBwZm4gPSBkZXNjX2FyZWEgPj4gVklSVElPX1BDSV9RVUVVRV9BRERSX1NISUZUOwo+ICsK
PiArCXZwX2xlZ2FjeV9zZXRfcXVldWVfYWRkcmVzcyhsZGV2LCBxaWQsIHBmbik7Cj4gKwo+ICsJ
cmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGVuaV92ZHBhX2tpY2tfdnEoc3RydWN0
IHZkcGFfZGV2aWNlICp2ZHBhLCB1MTYgcWlkKQo+ICt7Cj4gKwlzdHJ1Y3QgZW5pX3ZkcGEgKmVu
aV92ZHBhID0gdmRwYV90b19lbmkodmRwYSk7Cj4gKwo+ICsJaW93cml0ZTE2KHFpZCwgZW5pX3Zk
cGEtPnZyaW5nW3FpZF0ubm90aWZ5KTsKPiArfQo+ICsKPiArc3RhdGljIHUzMiBlbmlfdmRwYV9n
ZXRfZGV2aWNlX2lkKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSkKPiArewo+ICsJc3RydWN0IHZp
cnRpb19wY2lfbGVnYWN5X2RldmljZSAqbGRldiA9IHZkcGFfdG9fbGRldih2ZHBhKTsKPiArCj4g
KwlyZXR1cm4gbGRldi0+aWQuZGV2aWNlOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdTMyIGVuaV92ZHBh
X2dldF92ZW5kb3JfaWQoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhKQo+ICt7Cj4gKwlzdHJ1Y3Qg
dmlydGlvX3BjaV9sZWdhY3lfZGV2aWNlICpsZGV2ID0gdmRwYV90b19sZGV2KHZkcGEpOwo+ICsK
PiArCXJldHVybiBsZGV2LT5pZC52ZW5kb3I7Cj4gK30KPiArCj4gK3N0YXRpYyB1MzIgZW5pX3Zk
cGFfZ2V0X3ZxX2FsaWduKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSkKPiArewo+ICsJcmV0dXJu
IFBBR0VfU0laRTsKPiArfQo+ICsKPiArc3RhdGljIHNpemVfdCBlbmlfdmRwYV9nZXRfY29uZmln
X3NpemUoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhKQo+ICt7Cj4gKwlyZXR1cm4gc2l6ZW9mKHN0
cnVjdCB2aXJ0aW9fbmV0X2NvbmZpZyk7Cj4gK30KPiArCj4gKwo+ICtzdGF0aWMgdm9pZCBlbmlf
dmRwYV9nZXRfY29uZmlnKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSwKPiArCQkJCXVuc2lnbmVk
IGludCBvZmZzZXQsCj4gKwkJCQl2b2lkICpidWYsIHVuc2lnbmVkIGludCBsZW4pCj4gK3sKPiAr
CXN0cnVjdCBlbmlfdmRwYSAqZW5pX3ZkcGEgPSB2ZHBhX3RvX2VuaSh2ZHBhKTsKPiArCXN0cnVj
dCB2aXJ0aW9fcGNpX2xlZ2FjeV9kZXZpY2UgKmxkZXYgPSAmZW5pX3ZkcGEtPmxkZXY7Cj4gKwl2
b2lkIF9faW9tZW0gKmlvYWRkciA9IGxkZXYtPmlvYWRkciArCj4gKwkJVklSVElPX1BDSV9DT05G
SUdfT0ZGKGVuaV92ZHBhLT52ZWN0b3JzKSArCj4gKwkJb2Zmc2V0Owo+ICsJdTggKnAgPSBidWY7
Cj4gKwlpbnQgaTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspCj4gKwkJKnArKyA9
IGlvcmVhZDgoaW9hZGRyICsgaSk7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGVuaV92ZHBhX3Nl
dF9jb25maWcoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhLAo+ICsJCQkJdW5zaWduZWQgaW50IG9m
ZnNldCwgY29uc3Qgdm9pZCAqYnVmLAo+ICsJCQkJdW5zaWduZWQgaW50IGxlbikKPiArewo+ICsJ
c3RydWN0IGVuaV92ZHBhICplbmlfdmRwYSA9IHZkcGFfdG9fZW5pKHZkcGEpOwo+ICsJc3RydWN0
IHZpcnRpb19wY2lfbGVnYWN5X2RldmljZSAqbGRldiA9ICZlbmlfdmRwYS0+bGRldjsKPiArCXZv
aWQgX19pb21lbSAqaW9hZGRyID0gbGRldi0+aW9hZGRyICsKPiArCQlWSVJUSU9fUENJX0NPTkZJ
R19PRkYoZW5pX3ZkcGEtPnZlY3RvcnMpICsKPiArCQlvZmZzZXQ7Cj4gKwljb25zdCB1OCAqcCA9
IGJ1ZjsKPiArCWludCBpOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykKPiArCQlp
b3dyaXRlOCgqcCsrLCBpb2FkZHIgKyBpKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgZW5pX3Zk
cGFfc2V0X2NvbmZpZ19jYihzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEsCj4gKwkJCQkgICBzdHJ1
Y3QgdmRwYV9jYWxsYmFjayAqY2IpCj4gK3sKPiArCXN0cnVjdCBlbmlfdmRwYSAqZW5pX3ZkcGEg
PSB2ZHBhX3RvX2VuaSh2ZHBhKTsKPiArCj4gKwllbmlfdmRwYS0+Y29uZmlnX2NiID0gKmNiOwo+
ICt9Cj4gKwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IHZkcGFfY29uZmlnX29wcyBlbmlfdmRwYV9v
cHMgPSB7Cj4gKwkuZ2V0X2ZlYXR1cmVzCT0gZW5pX3ZkcGFfZ2V0X2ZlYXR1cmVzLAo+ICsJLnNl
dF9mZWF0dXJlcwk9IGVuaV92ZHBhX3NldF9mZWF0dXJlcywKPiArCS5nZXRfc3RhdHVzCT0gZW5p
X3ZkcGFfZ2V0X3N0YXR1cywKPiArCS5zZXRfc3RhdHVzCT0gZW5pX3ZkcGFfc2V0X3N0YXR1cywK
PiArCS5yZXNldAkJPSBlbmlfdmRwYV9yZXNldCwKPiArCS5nZXRfdnFfbnVtX21heAk9IGVuaV92
ZHBhX2dldF92cV9udW1fbWF4LAo+ICsJLmdldF92cV9udW1fbWluCT0gZW5pX3ZkcGFfZ2V0X3Zx
X251bV9taW4sCj4gKwkuZ2V0X3ZxX3N0YXRlCT0gZW5pX3ZkcGFfZ2V0X3ZxX3N0YXRlLAo+ICsJ
LnNldF92cV9zdGF0ZQk9IGVuaV92ZHBhX3NldF92cV9zdGF0ZSwKPiArCS5zZXRfdnFfY2IJPSBl
bmlfdmRwYV9zZXRfdnFfY2IsCj4gKwkuc2V0X3ZxX3JlYWR5CT0gZW5pX3ZkcGFfc2V0X3ZxX3Jl
YWR5LAo+ICsJLmdldF92cV9yZWFkeQk9IGVuaV92ZHBhX2dldF92cV9yZWFkeSwKPiArCS5zZXRf
dnFfbnVtCT0gZW5pX3ZkcGFfc2V0X3ZxX251bSwKPiArCS5zZXRfdnFfYWRkcmVzcwk9IGVuaV92
ZHBhX3NldF92cV9hZGRyZXNzLAo+ICsJLmtpY2tfdnEJPSBlbmlfdmRwYV9raWNrX3ZxLAo+ICsJ
LmdldF9kZXZpY2VfaWQJPSBlbmlfdmRwYV9nZXRfZGV2aWNlX2lkLAo+ICsJLmdldF92ZW5kb3Jf
aWQJPSBlbmlfdmRwYV9nZXRfdmVuZG9yX2lkLAo+ICsJLmdldF92cV9hbGlnbgk9IGVuaV92ZHBh
X2dldF92cV9hbGlnbiwKPiArCS5nZXRfY29uZmlnX3NpemUgPSBlbmlfdmRwYV9nZXRfY29uZmln
X3NpemUsCj4gKwkuZ2V0X2NvbmZpZwk9IGVuaV92ZHBhX2dldF9jb25maWcsCj4gKwkuc2V0X2Nv
bmZpZwk9IGVuaV92ZHBhX3NldF9jb25maWcsCj4gKwkuc2V0X2NvbmZpZ19jYiAgPSBlbmlfdmRw
YV9zZXRfY29uZmlnX2NiLAo+ICsJLmdldF92cV9pcnEJPSBlbmlfdmRwYV9nZXRfdnFfaXJxLAo+
ICt9Owo+ICsKPiArCj4gK3N0YXRpYyB1MTYgZW5pX3ZkcGFfZ2V0X251bV9xdWV1ZXMoc3RydWN0
IGVuaV92ZHBhICplbmlfdmRwYSkKPiArewo+ICsJc3RydWN0IHZpcnRpb19wY2lfbGVnYWN5X2Rl
dmljZSAqbGRldiA9ICZlbmlfdmRwYS0+bGRldjsKPiArCXUzMiBmZWF0dXJlcyA9IHZwX2xlZ2Fj
eV9nZXRfZmVhdHVyZXMobGRldik7Cj4gKwl1MTYgbnVtID0gMjsKPiArCj4gKwlpZiAoZmVhdHVy
ZXMgJiBCSVRfVUxMKFZJUlRJT19ORVRfRl9NUSkpIHsKPiArCQlfX3ZpcnRpbzE2IG1heF92aXJ0
cXVldWVfcGFpcnM7Cj4gKwo+ICsJCWVuaV92ZHBhX2dldF9jb25maWcoJmVuaV92ZHBhLT52ZHBh
LAo+ICsJCQlvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX25ldF9jb25maWcsIG1heF92aXJ0cXVldWVf
cGFpcnMpLAo+ICsJCQkmbWF4X3ZpcnRxdWV1ZV9wYWlycywKPiArCQkJc2l6ZW9mKG1heF92aXJ0
cXVldWVfcGFpcnMpKTsKPiArCQludW0gPSAyICogX192aXJ0aW8xNl90b19jcHUodmlydGlvX2xl
Z2FjeV9pc19saXR0bGVfZW5kaWFuKCksCj4gKwkJCQltYXhfdmlydHF1ZXVlX3BhaXJzKTsKPiAr
CX0KPiArCj4gKwlpZiAoZmVhdHVyZXMgJiBCSVRfVUxMKFZJUlRJT19ORVRfRl9DVFJMX1ZRKSkK
PiArCQludW0gKz0gMTsKPiArCj4gKwlyZXR1cm4gbnVtOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9p
ZCBlbmlfdmRwYV9mcmVlX2lycV92ZWN0b3JzKHZvaWQgKmRhdGEpCj4gK3sKPiArCXBjaV9mcmVl
X2lycV92ZWN0b3JzKGRhdGEpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGVuaV92ZHBhX3Byb2Jl
KHN0cnVjdCBwY2lfZGV2ICpwZGV2LCBjb25zdCBzdHJ1Y3QgcGNpX2RldmljZV9pZCAqaWQpCj4g
K3sKPiArCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZwZGV2LT5kZXY7Cj4gKwlzdHJ1Y3QgZW5pX3Zk
cGEgKmVuaV92ZHBhOwo+ICsJc3RydWN0IHZpcnRpb19wY2lfbGVnYWN5X2RldmljZSAqbGRldjsK
PiArCWludCByZXQsIGk7Cj4gKwo+ICsJcmV0ID0gcGNpbV9lbmFibGVfZGV2aWNlKHBkZXYpOwo+
ICsJaWYgKHJldCkKPiArCQlyZXR1cm4gcmV0Owo+ICsKPiArCWVuaV92ZHBhID0gdmRwYV9hbGxv
Y19kZXZpY2Uoc3RydWN0IGVuaV92ZHBhLCB2ZHBhLAo+ICsJCQkJICAgICBkZXYsICZlbmlfdmRw
YV9vcHMsIE5VTEwsIGZhbHNlKTsKPiArCWlmIChJU19FUlIoZW5pX3ZkcGEpKSB7Cj4gKwkJRU5J
X0VSUihwZGV2LCAiZmFpbGVkIHRvIGFsbG9jYXRlIHZEUEEgc3RydWN0dXJlXG4iKTsKPiArCQly
ZXR1cm4gUFRSX0VSUihlbmlfdmRwYSk7Cj4gKwl9Cj4gKwo+ICsJbGRldiA9ICZlbmlfdmRwYS0+
bGRldjsKPiArCWxkZXYtPnBjaV9kZXYgPSBwZGV2Owo+ICsKPiArCXJldCA9IHZwX2xlZ2FjeV9w
cm9iZShsZGV2KTsKPiArCWlmIChyZXQpIHsKPiArCQlFTklfRVJSKHBkZXYsICJmYWlsZWQgdG8g
cHJvYmUgbGVnYWN5IFBDSSBkZXZpY2VcbiIpOwo+ICsJCWdvdG8gZXJyOwo+ICsJfQo+ICsKPiAr
CXBjaV9zZXRfbWFzdGVyKHBkZXYpOwo+ICsJcGNpX3NldF9kcnZkYXRhKHBkZXYsIGVuaV92ZHBh
KTsKPiArCj4gKwllbmlfdmRwYS0+dmRwYS5kbWFfZGV2ID0gJnBkZXYtPmRldjsKPiArCWVuaV92
ZHBhLT5xdWV1ZXMgPSBlbmlfdmRwYV9nZXRfbnVtX3F1ZXVlcyhlbmlfdmRwYSk7Cj4gKwo+ICsJ
cmV0ID0gZGV2bV9hZGRfYWN0aW9uX29yX3Jlc2V0KGRldiwgZW5pX3ZkcGFfZnJlZV9pcnFfdmVj
dG9ycywgcGRldik7Cj4gKwlpZiAocmV0KSB7Cj4gKwkJRU5JX0VSUihwZGV2LAo+ICsJCQkiZmFp
bGVkIGZvciBhZGRpbmcgZGV2cmVzIGZvciBmcmVlaW5nIGlycSB2ZWN0b3JzXG4iKTsKPiArCQln
b3RvIGVycjsKPiArCX0KPiArCj4gKwllbmlfdmRwYS0+dnJpbmcgPSBkZXZtX2tjYWxsb2MoJnBk
ZXYtPmRldiwgZW5pX3ZkcGEtPnF1ZXVlcywKPiArCQkJCSAgICAgIHNpemVvZigqZW5pX3ZkcGEt
PnZyaW5nKSwKPiArCQkJCSAgICAgIEdGUF9LRVJORUwpOwo+ICsJaWYgKCFlbmlfdmRwYS0+dnJp
bmcpIHsKPiArCQlyZXQgPSAtRU5PTUVNOwo+ICsJCUVOSV9FUlIocGRldiwgImZhaWxlZCB0byBh
bGxvY2F0ZSB2aXJ0cXVldWVzXG4iKTsKPiArCQlnb3RvIGVycjsKPiArCX0KPiArCj4gKwlmb3Ig
KGkgPSAwOyBpIDwgZW5pX3ZkcGEtPnF1ZXVlczsgaSsrKSB7Cj4gKwkJZW5pX3ZkcGEtPnZyaW5n
W2ldLmlycSA9IFZJUlRJT19NU0lfTk9fVkVDVE9SOwo+ICsJCWVuaV92ZHBhLT52cmluZ1tpXS5u
b3RpZnkgPSBsZGV2LT5pb2FkZHIgKyBWSVJUSU9fUENJX1FVRVVFX05PVElGWTsKPiArCX0KPiAr
CWVuaV92ZHBhLT5jb25maWdfaXJxID0gVklSVElPX01TSV9OT19WRUNUT1I7Cj4gKwo+ICsJcmV0
ID0gdmRwYV9yZWdpc3Rlcl9kZXZpY2UoJmVuaV92ZHBhLT52ZHBhLCBlbmlfdmRwYS0+cXVldWVz
KTsKPiArCWlmIChyZXQpIHsKPiArCQlFTklfRVJSKHBkZXYsICJmYWlsZWQgdG8gcmVnaXN0ZXIg
dG8gdmRwYSBidXNcbiIpOwo+ICsJCWdvdG8gZXJyOwo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+
ICsKPiArZXJyOgo+ICsJcHV0X2RldmljZSgmZW5pX3ZkcGEtPnZkcGEuZGV2KTsKPiArCXJldHVy
biByZXQ7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGVuaV92ZHBhX3JlbW92ZShzdHJ1Y3QgcGNp
X2RldiAqcGRldikKPiArewo+ICsJc3RydWN0IGVuaV92ZHBhICplbmlfdmRwYSA9IHBjaV9nZXRf
ZHJ2ZGF0YShwZGV2KTsKPiArCj4gKwl2ZHBhX3VucmVnaXN0ZXJfZGV2aWNlKCZlbmlfdmRwYS0+
dmRwYSk7Cj4gKwl2cF9sZWdhY3lfcmVtb3ZlKCZlbmlfdmRwYS0+bGRldik7Cj4gK30KPiArCj4g
K3N0YXRpYyBzdHJ1Y3QgcGNpX2RldmljZV9pZCBlbmlfcGNpX2lkc1tdID0gewo+ICsJeyBQQ0lf
REVWSUNFX1NVQihQQ0lfVkVORE9SX0lEX1JFREhBVF9RVU1SQU5FVCwKPiArCQkJIFZJUlRJT19U
UkFOU19JRF9ORVQsCj4gKwkJCSBQQ0lfU1VCVkVORE9SX0lEX1JFREhBVF9RVU1SQU5FVCwKPiAr
CQkJIFZJUlRJT19JRF9ORVQpIH0sCj4gKwl7IDAgfSwKPiArfTsKPiArCj4gK3N0YXRpYyBzdHJ1
Y3QgcGNpX2RyaXZlciBlbmlfdmRwYV9kcml2ZXIgPSB7Cj4gKwkubmFtZQkJPSAiYWxpYmFiYS1l
bmktdmRwYSIsCj4gKwkuaWRfdGFibGUJPSBlbmlfcGNpX2lkcywKPiArCS5wcm9iZQkJPSBlbmlf
dmRwYV9wcm9iZSwKPiArCS5yZW1vdmUJCT0gZW5pX3ZkcGFfcmVtb3ZlLAo+ICt9Owo+ICsKPiAr
bW9kdWxlX3BjaV9kcml2ZXIoZW5pX3ZkcGFfZHJpdmVyKTsKPiArCj4gK01PRFVMRV9BVVRIT1Io
Ild1IFpvbmd5b25nIDx3dXpvbmd5b25nQGxpbnV4LmFsaWJhYmEuY29tPiIpOwo+ICtNT0RVTEVf
REVTQ1JJUFRJT04oIkFsaWJhYmEgRU5JIHZEUEEgZHJpdmVyIik7Cj4gK01PRFVMRV9MSUNFTlNF
KCJHUEwgdjIiKTsKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51
eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1h
bi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
