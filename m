Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [IPv6:2605:bc80:3010::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 31F0371457E
	for <lists.virtualization@lfdr.de>; Mon, 29 May 2023 09:29:48 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id C1CA7417C2;
	Mon, 29 May 2023 07:29:46 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org C1CA7417C2
Authentication-Results: smtp2.osuosl.org;
	dkim=fail reason="signature verification failed" (2048-bit key) header.d=gmail.com header.i=@gmail.com header.a=rsa-sha256 header.s=20221208 header.b=QyZQ45wM
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id MfM3tBkrOkFg; Mon, 29 May 2023 07:29:45 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp2.osuosl.org (Postfix) with ESMTPS id 3ECF6417B3;
	Mon, 29 May 2023 07:29:45 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 3ECF6417B3
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 80662C0089;
	Mon, 29 May 2023 07:29:44 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [IPv6:2605:bc80:3010::137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 5C87BC002A
 for <virtualization@lists.linux-foundation.org>;
 Mon, 29 May 2023 07:29:43 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id 423A341910
 for <virtualization@lists.linux-foundation.org>;
 Mon, 29 May 2023 07:29:43 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 423A341910
Authentication-Results: smtp4.osuosl.org;
 dkim=pass (2048-bit key) header.d=gmail.com header.i=@gmail.com
 header.a=rsa-sha256 header.s=20221208 header.b=QyZQ45wM
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id KJYD6OSpzA_F
 for <virtualization@lists.linux-foundation.org>;
 Mon, 29 May 2023 07:29:41 +0000 (UTC)
X-Greylist: whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 821284190D
Received: from mail-lj1-x229.google.com (mail-lj1-x229.google.com
 [IPv6:2a00:1450:4864:20::229])
 by smtp4.osuosl.org (Postfix) with ESMTPS id 821284190D
 for <virtualization@lists.linux-foundation.org>;
 Mon, 29 May 2023 07:29:41 +0000 (UTC)
Received: by mail-lj1-x229.google.com with SMTP id
 38308e7fff4ca-2af28a07be9so30208061fa.2
 for <virtualization@lists.linux-foundation.org>;
 Mon, 29 May 2023 00:29:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20221208; t=1685345379; x=1687937379;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:from:to:cc:subject:date
 :message-id:reply-to;
 bh=TuyYcu8t+w4tBaiuC6qtUy6PrdNxgiYYt2fH8+OWVDY=;
 b=QyZQ45wMo1H/zbmv5hl67s6/CQ/iTljYSFFQrpTwhPoSKo3Y8hcx0rtgxQr81Jdzwh
 XENE8WRNIT/SfwkQb/k7hwarAmqWGmTMniberK9F5KXA8oxRAqqY52+zIrNAUJHEU2rk
 5Z2UP1FSVWZM5ra4pGDgXOcEy941BjAASlxf71N2LdhyyrYZt5dos6SRHCvONPUivPuo
 mdY/0+6M4ukzeuf7AAZ0Mi1SOqy/bym8ZkWPENgI0yjNtNa6eloLhaC1JgyrljkexlvH
 1x4XE33mrfpX2BjGwqEG8S4kiEE2J+Su2S3BAA0fcZqbuBLVPJxD+QntLFy26wexSwBr
 vJIQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20221208; t=1685345379; x=1687937379;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=TuyYcu8t+w4tBaiuC6qtUy6PrdNxgiYYt2fH8+OWVDY=;
 b=goww2SUTVmogKAn6XOLA7EzbzRreoDkkH2bLGFVK75sts/FkRyFzCIaNnLz307kvmW
 hmtyJfqSgLKQGEIO1HDGMNWU4AXavOZnhoSwB4/eQqdIhcvJ8EztM2Rypq+fnvvoFRe8
 t8nVaK47iDQfzpMTSl0OGZFnN6yOboefcJwVz3Yi/yX3q5galODJ+6YoxzFhhLlc27yQ
 aEtJlM2MLrx0PiVqb4KGxLOV5gfqj8NB/PC8kLZwuCxeN/+hMrfizgQn/m/pPmuXuGnZ
 XJs0qVoWmKiKyRmfvpuJxbYB9LIiuXDr+jeP0ILRQy8NxWDb6ZZwvk1zuGe4r0ncAcbB
 AbJg==
X-Gm-Message-State: AC+VfDxDHRdpLXTr/vI0wuVIzeKvYfKdZ8jiLUxpG6BCLMFzwFD46TB7
 72Y/wLQyffyAeoxdKzKGc7ZnUG5nidNF+b0ESl8=
X-Google-Smtp-Source: ACHHUZ5vNyF4W+5bG5UxT0wd2OAbCfY+GFjfWFElVoSmaPe5/FUy0nqfBFTkIsivhWe5c+qh/DptkgT6RTS5OOYlWCY=
X-Received: by 2002:a2e:94c3:0:b0:2ad:9a11:b131 with SMTP id
 r3-20020a2e94c3000000b002ad9a11b131mr3432418ljh.32.1685345379171; Mon, 29 May
 2023 00:29:39 -0700 (PDT)
MIME-Version: 1.0
References: <20230526054621.18371-1-liangchen.linux@gmail.com>
 <20230526054621.18371-3-liangchen.linux@gmail.com>
 <20230528022057-mutt-send-email-mst@kernel.org>
In-Reply-To: <20230528022057-mutt-send-email-mst@kernel.org>
From: Liang Chen <liangchen.linux@gmail.com>
Date: Mon, 29 May 2023 15:29:26 +0800
Message-ID: <CAKhg4tKrG=G6VGUsBK-ykypioWiEydR8z_w_xJiKdPrnKA9xjA@mail.gmail.com>
Subject: Re: [PATCH net-next 3/5] virtio_net: Add page pool fragmentation
 support
To: "Michael S. Tsirkin" <mst@redhat.com>
Cc: xuanzhuo@linux.alibaba.com, netdev@vger.kernel.org,
 linux-kernel@vger.kernel.org, alexander.duyck@gmail.com,
 virtualization@lists.linux-foundation.org, edumazet@google.com,
 kuba@kernel.org, pabeni@redhat.com, davem@davemloft.net
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gU3VuLCBNYXkgMjgsIDIwMjMgYXQgMjoyNeKAr1BNIE1pY2hhZWwgUy4gVHNpcmtpbiA8bXN0
QHJlZGhhdC5jb20+IHdyb3RlOgo+Cj4gT24gRnJpLCBNYXkgMjYsIDIwMjMgYXQgMDE6NDY6MTlQ
TSArMDgwMCwgTGlhbmcgQ2hlbiB3cm90ZToKPiA+IFRvIGZ1cnRoZXIgZW5oYW5jZSBwZXJmb3Jt
YW5jZSwgaW1wbGVtZW50IHBhZ2UgcG9vbCBmcmFnbWVudGF0aW9uCj4gPiBzdXBwb3J0IGFuZCBp
bnRyb2R1Y2UgYSBtb2R1bGUgcGFyYW1ldGVyIHRvIGVuYWJsZSBvciBkaXNhYmxlIGl0Lgo+ID4K
PiA+IEluIHNpbmdsZS1jb3JlIHZtIHRlc3RpbmcgZW52aXJvbm1lbnRzLCB0aGVyZSBpcyBhbiBh
ZGRpdGlvbmFsIHBlcmZvcm1hbmNlCj4gPiBnYWluIG9ic2VydmVkIGluIHRoZSBub3JtYWwgcGF0
aCBjb21wYXJlZCB0byB0aGUgb25lIHBhY2tldCBwZXIgcGFnZQo+ID4gYXBwcm9hY2guCj4gPiAg
IFVwc3RyZWFtIGNvZGViYXNlOiA0Ny41IEdiaXRzL3NlYwo+ID4gICBVcHN0cmVhbSBjb2RlYmFz
ZSB3aXRoIHBhZ2UgcG9vbDogNTAuMiBHYml0cy9zZWMKPiA+ICAgVXBzdHJlYW0gY29kZWJhc2Ug
d2l0aCBwYWdlIHBvb2wgZnJhZ21lbnRhdGlvbiBzdXBwb3J0OiA1Mi4zIEdiaXRzL3NlYwo+ID4K
PiA+IFRoZXJlIGlzIGFsc28gc29tZSBwZXJmb3JtYW5jZSBnYWluIGZvciBYRFAgY3B1bWFwLgo+
ID4gICBVcHN0cmVhbSBjb2RlYmFzZTogMS4zOCBHYml0cy9zZWMKPiA+ICAgVXBzdHJlYW0gY29k
ZWJhc2Ugd2l0aCBwYWdlIHBvb2w6IDkuNzQgR2JpdHMvc2VjCj4gPiAgIFVwc3RyZWFtIGNvZGVi
YXNlIHdpdGggcGFnZSBwb29sIGZyYWdtZW50YXRpb246IDEwLjMgR2JpdHMvc2VjCj4gPgo+ID4g
U2lnbmVkLW9mZi1ieTogTGlhbmcgQ2hlbiA8bGlhbmdjaGVuLmxpbnV4QGdtYWlsLmNvbT4KPgo+
IEkgdGhpbmsgaXQncyBjYWxsZWQgZnJhZ21lbnRpbmcgbm90IGZyYWdtZW50YXRpb24uCj4KPgoK
U3VyZSwgdGhhbmtzIQoKPiA+IC0tLQo+ID4gIGRyaXZlcnMvbmV0L3ZpcnRpb19uZXQuYyB8IDcy
ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0KPiA+ICAxIGZpbGUgY2hh
bmdlZCwgNTUgaW5zZXJ0aW9ucygrKSwgMTcgZGVsZXRpb25zKC0pCj4gPgo+ID4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvbmV0L3ZpcnRpb19uZXQuYyBiL2RyaXZlcnMvbmV0L3ZpcnRpb19uZXQuYwo+
ID4gaW5kZXggOTljMGNhMGMxNzgxLi5hYzQwYjhjNjZjNTkgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2
ZXJzL25ldC92aXJ0aW9fbmV0LmMKPiA+ICsrKyBiL2RyaXZlcnMvbmV0L3ZpcnRpb19uZXQuYwo+
ID4gQEAgLTMyLDcgKzMyLDkgQEAgbW9kdWxlX3BhcmFtKGdzbywgYm9vbCwgMDQ0NCk7Cj4gPiAg
bW9kdWxlX3BhcmFtKG5hcGlfdHgsIGJvb2wsIDA2NDQpOwo+ID4KPiA+ICBzdGF0aWMgYm9vbCBw
YWdlX3Bvb2xfZW5hYmxlZDsKPiA+ICtzdGF0aWMgYm9vbCBwYWdlX3Bvb2xfZnJhZzsKPiA+ICBt
b2R1bGVfcGFyYW0ocGFnZV9wb29sX2VuYWJsZWQsIGJvb2wsIDA0MDApOwo+ID4gK21vZHVsZV9w
YXJhbShwYWdlX3Bvb2xfZnJhZywgYm9vbCwgMDQwMCk7Cj4gPgo+ID4gIC8qIEZJWE1FOiBNVFUg
aW4gY29uZmlnLiAqLwo+ID4gICNkZWZpbmUgR09PRF9QQUNLRVRfTEVOIChFVEhfSExFTiArIFZM
QU5fSExFTiArIEVUSF9EQVRBX0xFTikKPgo+IFNvIGhlcmUgYWdhaW4gc2FtZSBxdWVzdGlvbnMu
Cj4KPiAtd2hlbiBpcyB0aGlzIGEgbmV0IHBlcmYgZ2FpbiB3aGVuIGRvZXMgaXQgaGF2ZSBubyBl
ZmZlY3Q/Cj4gLWNhbiBiZSBvbiBieSBkZWZhdWx0Cj4gLSBjYW4gd2UgZ2V0IHJpZCBvZiB0aGUg
ZXh0cmEgbW9kZXM/Cj4KPgoKWWVhaCwgbm93IEkgYmVsaWV2ZSBpdCBtYWtlcyBzZW5zZSB0byBl
bmFibGUgaXQgYnkgZGVmYXVsdCB0byBhdm9pZAp0aGUgZXh0cmEgbW9kZXMuIFRoYW5rcy4KCgo+
ID4gQEAgLTkwOSwyMyArOTExLDMyIEBAIHN0YXRpYyBzdHJ1Y3QgcGFnZSAqeGRwX2xpbmVhcml6
ZV9wYWdlKHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwKPiA+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgcGFnZSAqcCwKPiA+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBpbnQgb2Zmc2V0LAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGludCBwYWdlX29mZiwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB1bnNpZ25lZCBpbnQgKmxlbikKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgKmxlbiwKPiA+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50ICpwcF9mcmFnX29mZnNldCkKPiA+ICB7
Cj4gPiAgICAgICBpbnQgdGFpbHJvb20gPSBTS0JfREFUQV9BTElHTihzaXplb2Yoc3RydWN0IHNr
Yl9zaGFyZWRfaW5mbykpOwo+ID4gICAgICAgc3RydWN0IHBhZ2UgKnBhZ2U7Cj4gPiArICAgICB1
bnNpZ25lZCBpbnQgcHBfZnJhZ19vZmZzZXRfdmFsOwo+ID4KPiA+ICAgICAgIGlmIChwYWdlX29m
ZiArICpsZW4gKyB0YWlscm9vbSA+IFBBR0VfU0laRSkKPiA+ICAgICAgICAgICAgICAgcmV0dXJu
IE5VTEw7Cj4gPgo+ID4gICAgICAgaWYgKHJxLT5wYWdlX3Bvb2wpCj4gPiAtICAgICAgICAgICAg
IHBhZ2UgPSBwYWdlX3Bvb2xfZGV2X2FsbG9jX3BhZ2VzKHJxLT5wYWdlX3Bvb2wpOwo+ID4gKyAg
ICAgICAgICAgICBpZiAocnEtPnBhZ2VfcG9vbC0+cC5mbGFncyAmIFBQX0ZMQUdfUEFHRV9GUkFH
KQo+ID4gKyAgICAgICAgICAgICAgICAgICAgIHBhZ2UgPSBwYWdlX3Bvb2xfZGV2X2FsbG9jX2Zy
YWcocnEtPnBhZ2VfcG9vbCwgcHBfZnJhZ19vZmZzZXQsCj4gPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQUdFX1NJWkUpOwo+ID4gKyAgICAg
ICAgICAgICBlbHNlCj4gPiArICAgICAgICAgICAgICAgICAgICAgcGFnZSA9IHBhZ2VfcG9vbF9k
ZXZfYWxsb2NfcGFnZXMocnEtPnBhZ2VfcG9vbCk7Cj4gPiAgICAgICBlbHNlCj4gPiAgICAgICAg
ICAgICAgIHBhZ2UgPSBhbGxvY19wYWdlKEdGUF9BVE9NSUMpOwo+ID4KPiA+ICAgICAgIGlmICgh
cGFnZSkKPiA+ICAgICAgICAgICAgICAgcmV0dXJuIE5VTEw7Cj4gPgo+ID4gLSAgICAgbWVtY3B5
KHBhZ2VfYWRkcmVzcyhwYWdlKSArIHBhZ2Vfb2ZmLCBwYWdlX2FkZHJlc3MocCkgKyBvZmZzZXQs
ICpsZW4pOwo+ID4gKyAgICAgcHBfZnJhZ19vZmZzZXRfdmFsID0gcHBfZnJhZ19vZmZzZXQgPyAq
cHBfZnJhZ19vZmZzZXQgOiAwOwo+ID4gKwo+ID4gKyAgICAgbWVtY3B5KHBhZ2VfYWRkcmVzcyhw
YWdlKSArIHBhZ2Vfb2ZmICsgcHBfZnJhZ19vZmZzZXRfdmFsLAo+ID4gKyAgICAgICAgICAgIHBh
Z2VfYWRkcmVzcyhwKSArIG9mZnNldCwgKmxlbik7Cj4gPiAgICAgICBwYWdlX29mZiArPSAqbGVu
Owo+ID4KPiA+ICAgICAgIHdoaWxlICgtLSpudW1fYnVmKSB7Cj4gPiBAQCAtOTQ4LDcgKzk1OSw3
IEBAIHN0YXRpYyBzdHJ1Y3QgcGFnZSAqeGRwX2xpbmVhcml6ZV9wYWdlKHN0cnVjdCByZWNlaXZl
X3F1ZXVlICpycSwKPiA+ICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVycl9idWY7Cj4gPiAg
ICAgICAgICAgICAgIH0KPiA+Cj4gPiAtICAgICAgICAgICAgIG1lbWNweShwYWdlX2FkZHJlc3Mo
cGFnZSkgKyBwYWdlX29mZiwKPiA+ICsgICAgICAgICAgICAgbWVtY3B5KHBhZ2VfYWRkcmVzcyhw
YWdlKSArIHBhZ2Vfb2ZmICsgcHBfZnJhZ19vZmZzZXRfdmFsLAo+ID4gICAgICAgICAgICAgICAg
ICAgICAgcGFnZV9hZGRyZXNzKHApICsgb2ZmLCBidWZsZW4pOwo+ID4gICAgICAgICAgICAgICBw
YWdlX29mZiArPSBidWZsZW47Cj4gPiAgICAgICAgICAgICAgIHZpcnRuZXRfcHV0X3BhZ2UocnEs
IHApOwo+ID4gQEAgLTEwMjksNyArMTA0MCw3IEBAIHN0YXRpYyBzdHJ1Y3Qgc2tfYnVmZiAqcmVj
ZWl2ZV9zbWFsbF94ZHAoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiA+ICAgICAgICAgICAgICAg
ICAgICAgICBTS0JfREFUQV9BTElHTihzaXplb2Yoc3RydWN0IHNrYl9zaGFyZWRfaW5mbykpOwo+
ID4gICAgICAgICAgICAgICB4ZHBfcGFnZSA9IHhkcF9saW5lYXJpemVfcGFnZShycSwgJm51bV9i
dWYsIHBhZ2UsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IG9mZnNldCwgaGVhZGVyX29mZnNldCwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgJnRsZW4pOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAmdGxlbiwgTlVMTCk7Cj4gPiAgICAgICAgICAgICAgIGlmICgheGRwX3Bh
Z2UpCj4gPiAgICAgICAgICAgICAgICAgICAgICAgZ290byBlcnJfeGRwOwo+ID4KPiA+IEBAIC0x
MzIzLDYgKzEzMzQsNyBAQCBzdGF0aWMgdm9pZCAqbWVyZ2VhYmxlX3hkcF9nZXRfYnVmKHN0cnVj
dCB2aXJ0bmV0X2luZm8gKnZpLAo+ID4gICAgICAgdW5zaWduZWQgaW50IGhlYWRyb29tID0gbWVy
Z2VhYmxlX2N0eF90b19oZWFkcm9vbShjdHgpOwo+ID4gICAgICAgc3RydWN0IHBhZ2UgKnhkcF9w
YWdlOwo+ID4gICAgICAgdW5zaWduZWQgaW50IHhkcF9yb29tOwo+ID4gKyAgICAgdW5zaWduZWQg
aW50IHBhZ2VfZnJhZ19vZmZzZXQgPSAwOwo+ID4KPiA+ICAgICAgIC8qIFRyYW5zaWVudCBmYWls
dXJlIHdoaWNoIGluIHRoZW9yeSBjb3VsZCBvY2N1ciBpZgo+ID4gICAgICAgICogaW4tZmxpZ2h0
IHBhY2tldHMgZnJvbSBiZWZvcmUgWERQIHdhcyBlbmFibGVkIHJlYWNoCj4gPiBAQCAtMTM1Niw3
ICsxMzY4LDggQEAgc3RhdGljIHZvaWQgKm1lcmdlYWJsZV94ZHBfZ2V0X2J1ZihzdHJ1Y3Qgdmly
dG5ldF9pbmZvICp2aSwKPiA+ICAgICAgICAgICAgICAgeGRwX3BhZ2UgPSB4ZHBfbGluZWFyaXpl
X3BhZ2UocnEsIG51bV9idWYsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICpwYWdlLCBvZmZzZXQsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFZJUlRJT19YRFBfSEVBRFJPT00sCj4gPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbik7Cj4gPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGxlbiwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICZwYWdlX2ZyYWdfb2Zmc2V0KTsKPiA+ICAgICAgICAg
ICAgICAgaWYgKCF4ZHBfcGFnZSkKPiA+ICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTlVM
TDsKPiA+ICAgICAgIH0gZWxzZSB7Cj4gPiBAQCAtMTM2NiwxNCArMTM3OSwxOSBAQCBzdGF0aWMg
dm9pZCAqbWVyZ2VhYmxlX3hkcF9nZXRfYnVmKHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLAo+ID4g
ICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBOVUxMOwo+ID4KPiA+ICAgICAgICAgICAgICAg
aWYgKHJxLT5wYWdlX3Bvb2wpCj4gPiAtICAgICAgICAgICAgICAgICAgICAgeGRwX3BhZ2UgPSBw
YWdlX3Bvb2xfZGV2X2FsbG9jX3BhZ2VzKHJxLT5wYWdlX3Bvb2wpOwo+ID4gKyAgICAgICAgICAg
ICAgICAgICAgIGlmIChycS0+cGFnZV9wb29sLT5wLmZsYWdzICYgUFBfRkxBR19QQUdFX0ZSQUcp
Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ZHBfcGFnZSA9IHBhZ2VfcG9vbF9k
ZXZfYWxsb2NfZnJhZyhycS0+cGFnZV9wb29sLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnBhZ2VfZnJhZ19vZmZz
ZXQsIFBBR0VfU0laRSk7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgZWxzZQo+ID4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgeGRwX3BhZ2UgPSBwYWdlX3Bvb2xfZGV2X2FsbG9jX3Bh
Z2VzKHJxLT5wYWdlX3Bvb2wpOwo+ID4gICAgICAgICAgICAgICBlbHNlCj4gPiAgICAgICAgICAg
ICAgICAgICAgICAgeGRwX3BhZ2UgPSBhbGxvY19wYWdlKEdGUF9BVE9NSUMpOwo+ID4gKwo+ID4g
ICAgICAgICAgICAgICBpZiAoIXhkcF9wYWdlKQo+ID4gICAgICAgICAgICAgICAgICAgICAgIHJl
dHVybiBOVUxMOwo+ID4KPiA+IC0gICAgICAgICAgICAgbWVtY3B5KHBhZ2VfYWRkcmVzcyh4ZHBf
cGFnZSkgKyBWSVJUSU9fWERQX0hFQURST09NLAo+ID4gLSAgICAgICAgICAgICAgICAgICAgcGFn
ZV9hZGRyZXNzKCpwYWdlKSArIG9mZnNldCwgKmxlbik7Cj4gPiArICAgICAgICAgICAgIG1lbWNw
eShwYWdlX2FkZHJlc3MoeGRwX3BhZ2UpICsgVklSVElPX1hEUF9IRUFEUk9PTSArCj4gPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlX2ZyYWdfb2Zmc2V0LCBwYWdlX2FkZHJlc3Mo
KnBhZ2UpICsgb2Zmc2V0LCAqbGVuKTsKPiA+ICAgICAgIH0KPiA+Cj4gPiAgICAgICAqZnJhbWVf
c3ogPSBQQUdFX1NJWkU7Cj4gPiBAQCAtMTM4Miw3ICsxNDAwLDcgQEAgc3RhdGljIHZvaWQgKm1l
cmdlYWJsZV94ZHBfZ2V0X2J1ZihzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwKPiA+Cj4gPiAgICAg
ICAqcGFnZSA9IHhkcF9wYWdlOwo+ID4KPiA+IC0gICAgIHJldHVybiBwYWdlX2FkZHJlc3MoKnBh
Z2UpICsgVklSVElPX1hEUF9IRUFEUk9PTTsKPiA+ICsgICAgIHJldHVybiBwYWdlX2FkZHJlc3Mo
KnBhZ2UpICsgVklSVElPX1hEUF9IRUFEUk9PTSArIHBhZ2VfZnJhZ19vZmZzZXQ7Cj4gPiAgfQo+
ID4KPiA+ICBzdGF0aWMgc3RydWN0IHNrX2J1ZmYgKnJlY2VpdmVfbWVyZ2VhYmxlX3hkcChzdHJ1
Y3QgbmV0X2RldmljZSAqZGV2LAo+ID4gQEAgLTE3NjIsNiArMTc4MCw3IEBAIHN0YXRpYyBpbnQg
YWRkX3JlY3ZidWZfbWVyZ2VhYmxlKHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLAo+ID4gICAgICAg
dm9pZCAqY3R4Owo+ID4gICAgICAgaW50IGVycjsKPiA+ICAgICAgIHVuc2lnbmVkIGludCBsZW4s
IGhvbGU7Cj4gPiArICAgICB1bnNpZ25lZCBpbnQgcHBfZnJhZ19vZmZzZXQ7Cj4gPgo+ID4gICAg
ICAgLyogRXh0cmEgdGFpbHJvb20gaXMgbmVlZGVkIHRvIHNhdGlzZnkgWERQJ3MgYXNzdW1wdGlv
bi4gVGhpcwo+ID4gICAgICAgICogbWVhbnMgcnggZnJhZ3MgY29hbGVzY2luZyB3b24ndCB3b3Jr
LCBidXQgY29uc2lkZXIgd2UndmUKPiA+IEBAIC0xNzY5LDEzICsxNzg4LDI5IEBAIHN0YXRpYyBp
bnQgYWRkX3JlY3ZidWZfbWVyZ2VhYmxlKHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLAo+ID4gICAg
ICAgICovCj4gPiAgICAgICBsZW4gPSBnZXRfbWVyZ2VhYmxlX2J1Zl9sZW4ocnEsICZycS0+bXJn
X2F2Z19wa3RfbGVuLCByb29tKTsKPiA+ICAgICAgIGlmIChycS0+cGFnZV9wb29sKSB7Cj4gPiAt
ICAgICAgICAgICAgIHN0cnVjdCBwYWdlICpwYWdlOwo+ID4gKyAgICAgICAgICAgICBpZiAocnEt
PnBhZ2VfcG9vbC0+cC5mbGFncyAmIFBQX0ZMQUdfUEFHRV9GUkFHKSB7Cj4gPiArICAgICAgICAg
ICAgICAgICAgICAgaWYgKHVubGlrZWx5KCFwYWdlX3Bvb2xfZGV2X2FsbG9jX2ZyYWcocnEtPnBh
Z2VfcG9vbCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAmcHBfZnJhZ19vZmZzZXQsIGxlbiArIHJvb20pKSkKPiA+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtRU5PTUVNOwo+ID4gKyAgICAgICAgICAg
ICAgICAgICAgIGJ1ZiA9IChjaGFyICopcGFnZV9hZGRyZXNzKHJxLT5wYWdlX3Bvb2wtPmZyYWdf
cGFnZSkgKwo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHBfZnJhZ19vZmZzZXQ7
Cj4gPiArICAgICAgICAgICAgICAgICAgICAgYnVmICs9IGhlYWRyb29tOyAvKiBhZHZhbmNlIGFk
ZHJlc3MgbGVhdmluZyBob2xlIGF0IGZyb250IG9mIHBrdCAqLwo+ID4gKyAgICAgICAgICAgICAg
ICAgICAgIGhvbGUgPSAoUEFHRV9TSVpFIDw8IHJxLT5wYWdlX3Bvb2wtPnAub3JkZXIpCj4gPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIHJxLT5wYWdlX3Bvb2wtPmZyYWdfb2Zmc2V0
Owo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGlmIChob2xlIDwgbGVuICsgcm9vbSkgewo+ID4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkcm9vbSkKPiA+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuICs9IGhvbGU7Cj4gPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBycS0+cGFnZV9wb29sLT5mcmFnX29mZnNldCArPSBob2xlOwo+
ID4gKyAgICAgICAgICAgICAgICAgICAgIH0KPiA+ICsgICAgICAgICAgICAgfSBlbHNlIHsKPiA+
ICsgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgcGFnZSAqcGFnZTsKPiA+Cj4gPiAtICAgICAg
ICAgICAgIHBhZ2UgPSBwYWdlX3Bvb2xfZGV2X2FsbG9jX3BhZ2VzKHJxLT5wYWdlX3Bvb2wpOwo+
ID4gLSAgICAgICAgICAgICBpZiAodW5saWtlbHkoIXBhZ2UpKQo+ID4gLSAgICAgICAgICAgICAg
ICAgICAgIHJldHVybiAtRU5PTUVNOwo+ID4gLSAgICAgICAgICAgICBidWYgPSAoY2hhciAqKXBh
Z2VfYWRkcmVzcyhwYWdlKTsKPiA+IC0gICAgICAgICAgICAgYnVmICs9IGhlYWRyb29tOyAvKiBh
ZHZhbmNlIGFkZHJlc3MgbGVhdmluZyBob2xlIGF0IGZyb250IG9mIHBrdCAqLwo+ID4gKyAgICAg
ICAgICAgICAgICAgICAgIHBhZ2UgPSBwYWdlX3Bvb2xfZGV2X2FsbG9jX3BhZ2VzKHJxLT5wYWdl
X3Bvb2wpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGlmICh1bmxpa2VseSghcGFnZSkpCj4g
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsKPiA+ICsgICAg
ICAgICAgICAgICAgICAgICBidWYgPSAoY2hhciAqKXBhZ2VfYWRkcmVzcyhwYWdlKTsKPiA+ICsg
ICAgICAgICAgICAgICAgICAgICBidWYgKz0gaGVhZHJvb207IC8qIGFkdmFuY2UgYWRkcmVzcyBs
ZWF2aW5nIGhvbGUgYXQgZnJvbnQgb2YgcGt0ICovCj4gPiArICAgICAgICAgICAgIH0KPiA+ICAg
ICAgIH0gZWxzZSB7Cj4gPiAgICAgICAgICAgICAgIGlmICh1bmxpa2VseSghc2tiX3BhZ2VfZnJh
Z19yZWZpbGwobGVuICsgcm9vbSwgYWxsb2NfZnJhZywgZ2ZwKSkpCj4gPiAgICAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gPiBAQCAtMzgwMCwxMyArMzgzNSwxNiBAQCBzdGF0
aWMgdm9pZCB2aXJ0bmV0X2FsbG9jX3BhZ2VfcG9vbChzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEp
Cj4gPiAgICAgICBzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldiA9IHJxLT52cS0+dmRldjsKPiA+
Cj4gPiAgICAgICBzdHJ1Y3QgcGFnZV9wb29sX3BhcmFtcyBwcF9wYXJhbXMgPSB7Cj4gPiAtICAg
ICAgICAgICAgIC5vcmRlciA9IDAsCj4gPiArICAgICAgICAgICAgIC5vcmRlciA9IHBhZ2VfcG9v
bF9mcmFnID8gU0tCX0ZSQUdfUEFHRV9PUkRFUiA6IDAsCj4gPiAgICAgICAgICAgICAgIC5wb29s
X3NpemUgPSBycS0+dnEtPm51bV9tYXgsCj4gPiAgICAgICAgICAgICAgIC5uaWQgPSBkZXZfdG9f
bm9kZSh2ZGV2LT5kZXYucGFyZW50KSwKPiA+ICAgICAgICAgICAgICAgLmRldiA9IHZkZXYtPmRl
di5wYXJlbnQsCj4gPiAgICAgICAgICAgICAgIC5vZmZzZXQgPSAwLAo+ID4gICAgICAgfTsKPiA+
Cj4gPiArICAgICBpZiAocGFnZV9wb29sX2ZyYWcpCj4gPiArICAgICAgICAgICAgIHBwX3BhcmFt
cy5mbGFncyB8PSBQUF9GTEFHX1BBR0VfRlJBRzsKPiA+ICsKPiA+ICAgICAgIHJxLT5wYWdlX3Bv
b2wgPSBwYWdlX3Bvb2xfY3JlYXRlKCZwcF9wYXJhbXMpOwo+ID4gICAgICAgaWYgKElTX0VSUihy
cS0+cGFnZV9wb29sKSkgewo+ID4gICAgICAgICAgICAgICBkZXZfd2FybigmdmRldi0+ZGV2LCAi
cGFnZSBwb29sIGNyZWF0aW9uIGZhaWxlZDogJWxkXG4iLAo+ID4gLS0KPiA+IDIuMzEuMQo+Cl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0
aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9y
ZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0
dWFsaXphdGlvbg==
