Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
	by mail.lfdr.de (Postfix) with ESMTPS id 661A831A5D9
	for <lists.virtualization@lfdr.de>; Fri, 12 Feb 2021 21:14:22 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by whitealder.osuosl.org (Postfix) with ESMTP id 1916C87457;
	Fri, 12 Feb 2021 20:14:21 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id yB3R9ctUkv+C; Fri, 12 Feb 2021 20:14:16 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by whitealder.osuosl.org (Postfix) with ESMTP id 22F63871A5;
	Fri, 12 Feb 2021 20:14:16 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id ECB13C013A;
	Fri, 12 Feb 2021 20:14:15 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 671D1C013A
 for <virtualization@lists.linux-foundation.org>;
 Fri, 12 Feb 2021 20:14:13 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by whitealder.osuosl.org (Postfix) with ESMTP id 4FEB787406
 for <virtualization@lists.linux-foundation.org>;
 Fri, 12 Feb 2021 20:14:13 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id Fp+ZF4lIvZRS
 for <virtualization@lists.linux-foundation.org>;
 Fri, 12 Feb 2021 20:14:10 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mail-ot1-f41.google.com (mail-ot1-f41.google.com
 [209.85.210.41])
 by whitealder.osuosl.org (Postfix) with ESMTPS id E16E5871A5
 for <virtualization@lists.linux-foundation.org>;
 Fri, 12 Feb 2021 20:14:09 +0000 (UTC)
Received: by mail-ot1-f41.google.com with SMTP id d7so350856otq.6
 for <virtualization@lists.linux-foundation.org>;
 Fri, 12 Feb 2021 12:14:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=sender:date:from:to:cc:subject:message-id:references:mime-version
 :content-disposition:content-transfer-encoding:in-reply-to
 :user-agent; bh=ZZ/qFAVDgY8Svc1qUsCFGH+l98jC0NuUQUyTSmwfjcA=;
 b=XsbP9ogSHJh96KKvAsaxsA9NffKY6/T9W6qIMaNmaaLKSUNM0rfSjgxhjytFuZZdq+
 X+Q6aFa4FE4ZDJPOD0RQtaZwFvO8wzRGl1Fer/SGFnPcJS+d4h3qajHZG3FMPInN9r9n
 OF0aw7rVK4QvtIpyjKbEdZXr+YroXghibdb81S6ec340BKpYespbUt994pe49iIRes2J
 xzWZggvr4YRrT5nUOmMQbpIuwTDf5U2ZYUKdMd9OlcyKMPZalZ0p84Yi6VYysIKY4lnH
 Ln4UYbkoW+KpzrBreDVRZWNNM5DBj2SYlz+YECnuWEOQ8Ku2/PAbs1dR1riBB0BWBoCS
 BMQQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:sender:date:from:to:cc:subject:message-id
 :references:mime-version:content-disposition
 :content-transfer-encoding:in-reply-to:user-agent;
 bh=ZZ/qFAVDgY8Svc1qUsCFGH+l98jC0NuUQUyTSmwfjcA=;
 b=lC7wvvaK20X/xqHvx4cglKQMm+tTd77ZVHjRBNwE25wBmZBR/divwdW1B1k/P/knZL
 iZFqD7/sBeeNDW1jgbmFnbmHtuvCNZAQ+kswW/1YLf5szqfyCgqy9ew/UF6q/VMx+OaQ
 2m/wPnhkaX4WDrotGbjje9XPxTzc4LFaqpBue2eMUCvjMG0d3W0Oeu9tbYWIYOE8NChW
 UpYJJTz9R2B32mBTU8w7QLVxW1KHp4d1/ExjWza4CW5NhgHLak997Kotq0TLSjJANl13
 RjvrexXrUiWAETQKbcQ9Ez29F5WOefeZwjoBeIr81+tMLajPvY/Kdw1jPTi0mP1GLVox
 2GbQ==
X-Gm-Message-State: AOAM533joD2xNksZFxmDA6rSMYbCMEVSeR/WtshUc+SiFY4wx6lpYkdr
 6kizMIbeKATQWOTKmuDMzto=
X-Google-Smtp-Source: ABdhPJzaYpvIhQYkSiHsOc8L12oKu9HQNecndskAKginHTwh0gUJf723NZVyCqyyWdxeaqQqX87grA==
X-Received: by 2002:a9d:74d7:: with SMTP id a23mr3185424otl.331.1613160848726; 
 Fri, 12 Feb 2021 12:14:08 -0800 (PST)
Received: from localhost ([2600:1700:e321:62f0:329c:23ff:fee3:9d7c])
 by smtp.gmail.com with ESMTPSA id h24sm1794922otl.50.2021.02.12.12.14.06
 (version=TLS1_2 cipher=ECDHE-ECDSA-CHACHA20-POLY1305 bits=256/256);
 Fri, 12 Feb 2021 12:14:07 -0800 (PST)
Date: Fri, 12 Feb 2021 12:14:05 -0800
From: Guenter Roeck <linux@roeck-us.net>
To: Jason Wang <jasowang@redhat.com>
Subject: Re: [PATCH V3 16/19] virtio-pci: introduce modern device module
Message-ID: <20210212201405.GA112742@roeck-us.net>
References: <20210104065503.199631-1-jasowang@redhat.com>
 <20210104065503.199631-17-jasowang@redhat.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20210104065503.199631-17-jasowang@redhat.com>
User-Agent: Mutt/1.9.4 (2018-02-28)
Cc: shahafs@mellanox.com, lulu@redhat.com, mst@redhat.com,
 rdunlap@infradead.org, linux-kernel@vger.kernel.org,
 virtualization@lists.linux-foundation.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gTW9uLCBKYW4gMDQsIDIwMjEgYXQgMDI6NTU6MDBQTSArMDgwMCwgSmFzb24gV2FuZyB3cm90
ZToKPiBTaWduZWQtb2ZmLWJ5OiBKYXNvbiBXYW5nIDxqYXNvd2FuZ0ByZWRoYXQuY29tPgo+IFJl
cG9ydGVkLWJ5OiBOYXJlc2ggS2FtYm9qdSA8bmFyZXNoLmthbWJvanVAbGluYXJvLm9yZz4KCkkg
ZG9uJ3QgcmVhbGx5IHNlZSB0aGUgcG9pbnQgb2YgaGF2aW5nIHRvIGVuYWJsZSBWSVJUSU9fUENJ
X01PREVSTgpiZWNhdXNlIG90aGVyd2lzZSBWSVJUSU9fUENJIG5vIGxvbmdlciB3b3Jrcy4gSWYg
VklSVElPX1BDSSBub3cKcmVxdWlyZXMgVklSVElPX1BDSV9NT0RFUk4sIG1heWJlIGl0IHNob3Vs
ZCBzZWxlY3QgaXQgaW5zdGVhZCBvZgpkZXBlbmRpbmcgb24gaXQgPyBBbHRlcm5hdGl2ZWx5LCB5
b3UgY291bGQganVzdCBkcm9wIHRoZSBuZXcKY29uZmlndXJhdGlvbiBmbGFnIGVudGlyZWx5IGFu
ZCBidWlsZCB2aXJ0aW9fcGNpX21vZGVybl9kZXYubyB3aXRoClZJUlRJT19QQ0kuIE9uZSBkb2Vz
bid0IHdvcmsgd2l0aG91dCB0aGUgb3RoZXIgYW55d2F5LCBhZnRlciBhbGwuCgpHdWVudGVyCgo+
IC0tLQo+ICBkcml2ZXJzL3ZpcnRpby9LY29uZmlnICAgICAgICAgICAgICAgICB8ICAxMCArLQo+
ICBkcml2ZXJzL3ZpcnRpby9NYWtlZmlsZSAgICAgICAgICAgICAgICB8ICAgMSArCj4gIGRyaXZl
cnMvdmlydGlvL3ZpcnRpb19wY2lfY29tbW9uLmggICAgIHwgIDI3ICstCj4gIGRyaXZlcnMvdmly
dGlvL3ZpcnRpb19wY2lfbW9kZXJuLmMgICAgIHwgNjE3IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KPiAgZHJpdmVycy92aXJ0aW8vdmlydGlvX3BjaV9tb2Rlcm5fZGV2LmMgfCA1OTkgKysrKysr
KysrKysrKysrKysrKysrKysrCj4gIGluY2x1ZGUvbGludXgvdmlydGlvX3BjaV9tb2Rlcm4uaCAg
ICAgIHwgMTExICsrKysrCj4gIDYgZmlsZXMgY2hhbmdlZCwgNzIxIGluc2VydGlvbnMoKyksIDY0
NCBkZWxldGlvbnMoLSkKPiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvdmlydGlvL3ZpcnRp
b19wY2lfbW9kZXJuX2Rldi5jCj4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBpbmNsdWRlL2xpbnV4L3Zp
cnRpb19wY2lfbW9kZXJuLmgKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92aXJ0aW8vS2NvbmZp
ZyBiL2RyaXZlcnMvdmlydGlvL0tjb25maWcKPiBpbmRleCA3YjQxMTMwZDNmMzUuLjZiOWI4MWY0
YjhjMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZpcnRpby9LY29uZmlnCj4gKysrIGIvZHJpdmVy
cy92aXJ0aW8vS2NvbmZpZwo+IEBAIC0xMiw2ICsxMiwxNCBAQCBjb25maWcgQVJDSF9IQVNfUkVT
VFJJQ1RFRF9WSVJUSU9fTUVNT1JZX0FDQ0VTUwo+ICAJICBUaGlzIG9wdGlvbiBpcyBzZWxlY3Rl
ZCBpZiB0aGUgYXJjaGl0ZWN0dXJlIG1heSBuZWVkIHRvIGVuZm9yY2UKPiAgCSAgVklSVElPX0Zf
QUNDRVNTX1BMQVRGT1JNCj4gIAo+ICtjb25maWcgVklSVElPX1BDSV9NT0RFUk4KPiArCXRyaXN0
YXRlICJNb2Rlcm4gVmlydGlvIFBDSSBEZXZpY2UiCj4gKwlkZXBlbmRzIG9uIFBDSQo+ICsJaGVs
cAo+ICsJICBNb2Rlcm4gUENJIGRldmljZSBpbXBsZW1lbnRhdGlvbi4gVGhpcyBtb2R1bGUgaW1w
bGVtZW50cyB0aGUKPiArCSAgYmFzaWMgcHJvYmUgYW5kIGNvbnRyb2wgZm9yIGRldmljZXMgd2hp
Y2ggYXJlIGJhc2VkIG9uIG1vZGVybgo+ICsJICBQQ0kgZGV2aWNlIHdpdGggcG9zc2libGUgdmVu
ZG9yIHNwZWNpZmljIGV4dGVuc2lvbnMuCj4gKwo+ICBtZW51Y29uZmlnIFZJUlRJT19NRU5VCj4g
IAlib29sICJWaXJ0aW8gZHJpdmVycyIKPiAgCWRlZmF1bHQgeQo+IEBAIC0yMCw3ICsyOCw3IEBA
IGlmIFZJUlRJT19NRU5VCj4gIAo+ICBjb25maWcgVklSVElPX1BDSQo+ICAJdHJpc3RhdGUgIlBD
SSBkcml2ZXIgZm9yIHZpcnRpbyBkZXZpY2VzIgo+IC0JZGVwZW5kcyBvbiBQQ0kKPiArCWRlcGVu
ZHMgb24gVklSVElPX1BDSV9NT0RFUk4KPiAgCXNlbGVjdCBWSVJUSU8KPiAgCWhlbHAKPiAgCSAg
VGhpcyBkcml2ZXIgcHJvdmlkZXMgc3VwcG9ydCBmb3IgdmlydGlvIGJhc2VkIHBhcmF2aXJ0dWFs
IGRldmljZQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpcnRpby9NYWtlZmlsZSBiL2RyaXZlcnMv
dmlydGlvL01ha2VmaWxlCj4gaW5kZXggNTkxZTZmNzJhYTU0Li5mMDk3NTc4YWFhOGYgMTAwNjQ0
Cj4gLS0tIGEvZHJpdmVycy92aXJ0aW8vTWFrZWZpbGUKPiArKysgYi9kcml2ZXJzL3ZpcnRpby9N
YWtlZmlsZQo+IEBAIC0xLDUgKzEsNiBAQAo+ICAjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBH
UEwtMi4wCj4gIG9iai0kKENPTkZJR19WSVJUSU8pICs9IHZpcnRpby5vIHZpcnRpb19yaW5nLm8K
PiArb2JqLSQoQ09ORklHX1ZJUlRJT19QQ0lfTU9ERVJOKSArPSB2aXJ0aW9fcGNpX21vZGVybl9k
ZXYubwo+ICBvYmotJChDT05GSUdfVklSVElPX01NSU8pICs9IHZpcnRpb19tbWlvLm8KPiAgb2Jq
LSQoQ09ORklHX1ZJUlRJT19QQ0kpICs9IHZpcnRpb19wY2kubwo+ICB2aXJ0aW9fcGNpLXkgOj0g
dmlydGlvX3BjaV9tb2Rlcm4ubyB2aXJ0aW9fcGNpX2NvbW1vbi5vCj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvdmlydGlvL3ZpcnRpb19wY2lfY29tbW9uLmggYi9kcml2ZXJzL3ZpcnRpby92aXJ0aW9f
cGNpX2NvbW1vbi5oCj4gaW5kZXggZjM1ZmY1YjZiNDY3Li5iZWVjMDQ3YThmOGQgMTAwNjQ0Cj4g
LS0tIGEvZHJpdmVycy92aXJ0aW8vdmlydGlvX3BjaV9jb21tb24uaAo+ICsrKyBiL2RyaXZlcnMv
dmlydGlvL3ZpcnRpb19wY2lfY29tbW9uLmgKPiBAQCAtMjUsNiArMjUsNyBAQAo+ICAjaW5jbHVk
ZSA8bGludXgvdmlydGlvX2NvbmZpZy5oPgo+ICAjaW5jbHVkZSA8bGludXgvdmlydGlvX3Jpbmcu
aD4KPiAgI2luY2x1ZGUgPGxpbnV4L3ZpcnRpb19wY2kuaD4KPiArI2luY2x1ZGUgPGxpbnV4L3Zp
cnRpb19wY2lfbW9kZXJuLmg+Cj4gICNpbmNsdWRlIDxsaW51eC9oaWdobWVtLmg+Cj4gICNpbmNs
dWRlIDxsaW51eC9zcGlubG9jay5oPgo+ICAKPiBAQCAtMzksMzIgKzQwLDYgQEAgc3RydWN0IHZp
cnRpb19wY2lfdnFfaW5mbyB7Cj4gIAl1bnNpZ25lZCBtc2l4X3ZlY3RvcjsKPiAgfTsKPiAgCj4g
LXN0cnVjdCB2aXJ0aW9fcGNpX21vZGVybl9kZXZpY2Ugewo+IC0Jc3RydWN0IHBjaV9kZXYgKnBj
aV9kZXY7Cj4gLQo+IC0Jc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZyBfX2lvbWVtICpjb21t
b247Cj4gLQkvKiBEZXZpY2Utc3BlY2lmaWMgZGF0YSAobm9uLWxlZ2FjeSBtb2RlKSAgKi8KPiAt
CXZvaWQgX19pb21lbSAqZGV2aWNlOwo+IC0JLyogQmFzZSBvZiB2cSBub3RpZmljYXRpb25zIChu
b24tbGVnYWN5IG1vZGUpLiAqLwo+IC0Jdm9pZCBfX2lvbWVtICpub3RpZnlfYmFzZTsKPiAtCS8q
IFdoZXJlIHRvIHJlYWQgYW5kIGNsZWFyIGludGVycnVwdCAqLwo+IC0JdTggX19pb21lbSAqaXNy
Owo+IC0KPiAtCS8qIFNvIHdlIGNhbiBzYW5pdHktY2hlY2sgYWNjZXNzZXMuICovCj4gLQlzaXpl
X3Qgbm90aWZ5X2xlbjsKPiAtCXNpemVfdCBkZXZpY2VfbGVuOwo+IC0KPiAtCS8qIENhcGFiaWxp
dHkgZm9yIHdoZW4gd2UgbmVlZCB0byBtYXAgbm90aWZpY2F0aW9ucyBwZXItdnEuICovCj4gLQlp
bnQgbm90aWZ5X21hcF9jYXA7Cj4gLQo+IC0JLyogTXVsdGlwbHkgcXVldWVfbm90aWZ5X29mZiBi
eSB0aGlzIHZhbHVlLiAobm9uLWxlZ2FjeSBtb2RlKS4gKi8KPiAtCXUzMiBub3RpZnlfb2Zmc2V0
X211bHRpcGxpZXI7Cj4gLQo+IC0JaW50IG1vZGVybl9iYXJzOwo+IC0KPiAtCXN0cnVjdCB2aXJ0
aW9fZGV2aWNlX2lkIGlkOwo+IC19Owo+IC0KPiAgLyogT3VyIGRldmljZSBzdHJ1Y3R1cmUgKi8K
PiAgc3RydWN0IHZpcnRpb19wY2lfZGV2aWNlIHsKPiAgCXN0cnVjdCB2aXJ0aW9fZGV2aWNlIHZk
ZXY7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19wY2lfbW9kZXJuLmMgYi9k
cml2ZXJzL3ZpcnRpby92aXJ0aW9fcGNpX21vZGVybi5jCj4gaW5kZXggYTVlM2E1ZTQwMzIzLi5m
YmQ0ZWJjMDBlYjYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92aXJ0aW8vdmlydGlvX3BjaV9tb2Rl
cm4uYwo+ICsrKyBiL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19wY2lfbW9kZXJuLmMKPiBAQCAtMTks
MTU4ICsxOSw2IEBACj4gICNkZWZpbmUgVklSVElPX1JJTkdfTk9fTEVHQUNZCj4gICNpbmNsdWRl
ICJ2aXJ0aW9fcGNpX2NvbW1vbi5oIgo+ICAKPiAtLyoKPiAtICogVHlwZS1zYWZlIHdyYXBwZXJz
IGZvciBpbyBhY2Nlc3Nlcy4KPiAtICogVXNlIHRoZXNlIHRvIGVuZm9yY2UgYXQgY29tcGlsZSB0
aW1lIHRoZSBmb2xsb3dpbmcgc3BlYyByZXF1aXJlbWVudDoKPiAtICoKPiAtICogVGhlIGRyaXZl
ciBNVVNUIGFjY2VzcyBlYWNoIGZpZWxkIHVzaW5nIHRoZSDigJxuYXR1cmFs4oCdIGFjY2Vzcwo+
IC0gKiBtZXRob2QsIGkuZS4gMzItYml0IGFjY2Vzc2VzIGZvciAzMi1iaXQgZmllbGRzLCAxNi1i
aXQgYWNjZXNzZXMKPiAtICogZm9yIDE2LWJpdCBmaWVsZHMgYW5kIDgtYml0IGFjY2Vzc2VzIGZv
ciA4LWJpdCBmaWVsZHMuCj4gLSAqLwo+IC1zdGF0aWMgaW5saW5lIHU4IHZwX2lvcmVhZDgoY29u
c3QgdTggX19pb21lbSAqYWRkcikKPiAtewo+IC0JcmV0dXJuIGlvcmVhZDgoYWRkcik7Cj4gLX0K
PiAtc3RhdGljIGlubGluZSB1MTYgdnBfaW9yZWFkMTYgKGNvbnN0IF9fbGUxNiBfX2lvbWVtICph
ZGRyKQo+IC17Cj4gLQlyZXR1cm4gaW9yZWFkMTYoYWRkcik7Cj4gLX0KPiAtCj4gLXN0YXRpYyBp
bmxpbmUgdTMyIHZwX2lvcmVhZDMyKGNvbnN0IF9fbGUzMiBfX2lvbWVtICphZGRyKQo+IC17Cj4g
LQlyZXR1cm4gaW9yZWFkMzIoYWRkcik7Cj4gLX0KPiAtCj4gLXN0YXRpYyBpbmxpbmUgdm9pZCB2
cF9pb3dyaXRlOCh1OCB2YWx1ZSwgdTggX19pb21lbSAqYWRkcikKPiAtewo+IC0JaW93cml0ZTgo
dmFsdWUsIGFkZHIpOwo+IC19Cj4gLQo+IC1zdGF0aWMgaW5saW5lIHZvaWQgdnBfaW93cml0ZTE2
KHUxNiB2YWx1ZSwgX19sZTE2IF9faW9tZW0gKmFkZHIpCj4gLXsKPiAtCWlvd3JpdGUxNih2YWx1
ZSwgYWRkcik7Cj4gLX0KPiAtCj4gLXN0YXRpYyBpbmxpbmUgdm9pZCB2cF9pb3dyaXRlMzIodTMy
IHZhbHVlLCBfX2xlMzIgX19pb21lbSAqYWRkcikKPiAtewo+IC0JaW93cml0ZTMyKHZhbHVlLCBh
ZGRyKTsKPiAtfQo+IC0KPiAtc3RhdGljIHZvaWQgdnBfaW93cml0ZTY0X3R3b3BhcnQodTY0IHZh
bCwKPiAtCQkJCSBfX2xlMzIgX19pb21lbSAqbG8sIF9fbGUzMiBfX2lvbWVtICpoaSkKPiAtewo+
IC0JdnBfaW93cml0ZTMyKCh1MzIpdmFsLCBsbyk7Cj4gLQl2cF9pb3dyaXRlMzIodmFsID4+IDMy
LCBoaSk7Cj4gLX0KPiAtCj4gLS8qCj4gLSAqIHZwX21vZGVybl9tYXBfY2FwYWJpbGl0eSAtIG1h
cCBhIHBhcnQgb2YgdmlydGlvIHBjaSBjYXBhYmlsaXR5Cj4gLSAqIEBtZGV2OiB0aGUgbW9kZXJu
IHZpcnRpby1wY2kgZGV2aWNlCj4gLSAqIEBvZmY6IG9mZnNldCBvZiB0aGUgY2FwYWJpbGl0eQo+
IC0gKiBAbWlubGVuOiBtaW5pbWFsIGxlbmd0aCBvZiB0aGUgY2FwYWJpbGl0eQo+IC0gKiBAYWxp
Z246IGFsaWduIHJlcXVpcmVtZW50Cj4gLSAqIEBzdGFydDogc3RhcnQgZnJvbSB0aGUgY2FwYWJp
bGl0eQo+IC0gKiBAc2l6ZTogbWFwIHNpemUKPiAtICogQGxlbjogdGhlIGxlbmd0aCB0aGF0IGlz
IGFjdHVhbGx5IG1hcHBlZAo+IC0gKgo+IC0gKiBSZXR1cm5zIHRoZSBpbyBhZGRyZXNzIG9mIGZv
ciB0aGUgcGFydCBvZiB0aGUgY2FwYWJpbGl0eQo+IC0gKi8KPiAtdm9pZCBfX2lvbWVtICp2cF9t
b2Rlcm5fbWFwX2NhcGFiaWxpdHkoc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRl
diwgaW50IG9mZiwKPiAtCQkJCSAgICAgICBzaXplX3QgbWlubGVuLAo+IC0JCQkJICAgICAgIHUz
MiBhbGlnbiwKPiAtCQkJCSAgICAgICB1MzIgc3RhcnQsIHUzMiBzaXplLAo+IC0JCQkJICAgICAg
IHNpemVfdCAqbGVuKQo+IC17Cj4gLQlzdHJ1Y3QgcGNpX2RldiAqZGV2ID0gbWRldi0+cGNpX2Rl
djsKPiAtCXU4IGJhcjsKPiAtCXUzMiBvZmZzZXQsIGxlbmd0aDsKPiAtCXZvaWQgX19pb21lbSAq
cDsKPiAtCj4gLQlwY2lfcmVhZF9jb25maWdfYnl0ZShkZXYsIG9mZiArIG9mZnNldG9mKHN0cnVj
dCB2aXJ0aW9fcGNpX2NhcCwKPiAtCQkJCQkJIGJhciksCj4gLQkJCSAgICAgJmJhcik7Cj4gLQlw
Y2lfcmVhZF9jb25maWdfZHdvcmQoZGV2LCBvZmYgKyBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3Bj
aV9jYXAsIG9mZnNldCksCj4gLQkJCSAgICAgJm9mZnNldCk7Cj4gLQlwY2lfcmVhZF9jb25maWdf
ZHdvcmQoZGV2LCBvZmYgKyBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jYXAsIGxlbmd0aCks
Cj4gLQkJCSAgICAgICZsZW5ndGgpOwo+IC0KPiAtCWlmIChsZW5ndGggPD0gc3RhcnQpIHsKPiAt
CQlkZXZfZXJyKCZkZXYtPmRldiwKPiAtCQkJInZpcnRpb19wY2k6IGJhZCBjYXBhYmlsaXR5IGxl
biAldSAoPiV1IGV4cGVjdGVkKVxuIiwKPiAtCQkJbGVuZ3RoLCBzdGFydCk7Cj4gLQkJcmV0dXJu
IE5VTEw7Cj4gLQl9Cj4gLQo+IC0JaWYgKGxlbmd0aCAtIHN0YXJ0IDwgbWlubGVuKSB7Cj4gLQkJ
ZGV2X2VycigmZGV2LT5kZXYsCj4gLQkJCSJ2aXJ0aW9fcGNpOiBiYWQgY2FwYWJpbGl0eSBsZW4g
JXUgKD49JXp1IGV4cGVjdGVkKVxuIiwKPiAtCQkJbGVuZ3RoLCBtaW5sZW4pOwo+IC0JCXJldHVy
biBOVUxMOwo+IC0JfQo+IC0KPiAtCWxlbmd0aCAtPSBzdGFydDsKPiAtCj4gLQlpZiAoc3RhcnQg
KyBvZmZzZXQgPCBvZmZzZXQpIHsKPiAtCQlkZXZfZXJyKCZkZXYtPmRldiwKPiAtCQkJInZpcnRp
b19wY2k6IG1hcCB3cmFwLWFyb3VuZCAldSsldVxuIiwKPiAtCQkJc3RhcnQsIG9mZnNldCk7Cj4g
LQkJcmV0dXJuIE5VTEw7Cj4gLQl9Cj4gLQo+IC0Jb2Zmc2V0ICs9IHN0YXJ0Owo+IC0KPiAtCWlm
IChvZmZzZXQgJiAoYWxpZ24gLSAxKSkgewo+IC0JCWRldl9lcnIoJmRldi0+ZGV2LAo+IC0JCQki
dmlydGlvX3BjaTogb2Zmc2V0ICV1IG5vdCBhbGlnbmVkIHRvICV1XG4iLAo+IC0JCQlvZmZzZXQs
IGFsaWduKTsKPiAtCQlyZXR1cm4gTlVMTDsKPiAtCX0KPiAtCj4gLQlpZiAobGVuZ3RoID4gc2l6
ZSkKPiAtCQlsZW5ndGggPSBzaXplOwo+IC0KPiAtCWlmIChsZW4pCj4gLQkJKmxlbiA9IGxlbmd0
aDsKPiAtCj4gLQlpZiAobWlubGVuICsgb2Zmc2V0IDwgbWlubGVuIHx8Cj4gLQkgICAgbWlubGVu
ICsgb2Zmc2V0ID4gcGNpX3Jlc291cmNlX2xlbihkZXYsIGJhcikpIHsKPiAtCQlkZXZfZXJyKCZk
ZXYtPmRldiwKPiAtCQkJInZpcnRpb19wY2k6IG1hcCB2aXJ0aW8gJXp1QCV1ICIKPiAtCQkJIm91
dCBvZiByYW5nZSBvbiBiYXIgJWkgbGVuZ3RoICVsdVxuIiwKPiAtCQkJbWlubGVuLCBvZmZzZXQs
Cj4gLQkJCWJhciwgKHVuc2lnbmVkIGxvbmcpcGNpX3Jlc291cmNlX2xlbihkZXYsIGJhcikpOwo+
IC0JCXJldHVybiBOVUxMOwo+IC0JfQo+IC0KPiAtCXAgPSBwY2lfaW9tYXBfcmFuZ2UoZGV2LCBi
YXIsIG9mZnNldCwgbGVuZ3RoKTsKPiAtCWlmICghcCkKPiAtCQlkZXZfZXJyKCZkZXYtPmRldiwK
PiAtCQkJInZpcnRpb19wY2k6IHVuYWJsZSB0byBtYXAgdmlydGlvICV1QCV1IG9uIGJhciAlaVxu
IiwKPiAtCQkJbGVuZ3RoLCBvZmZzZXQsIGJhcik7Cj4gLQlyZXR1cm4gcDsKPiAtfQo+IC0KPiAt
LyoKPiAtICogdnBfbW9kZXJuX2dldF9mZWF0dXJlcyAtIGdldCBmZWF0dXJlcyBmcm9tIGRldmlj
ZQo+IC0gKiBAbWRldjogdGhlIG1vZGVybiB2aXJ0aW8tcGNpIGRldmljZQo+IC0gKgo+IC0gKiBS
ZXR1cm5zIHRoZSBmZWF0dXJlcyByZWFkIGZyb20gdGhlIGRldmljZQo+IC0gKi8KPiAtc3RhdGlj
IHU2NCB2cF9tb2Rlcm5fZ2V0X2ZlYXR1cmVzKHN0cnVjdCB2aXJ0aW9fcGNpX21vZGVybl9kZXZp
Y2UgKm1kZXYpCj4gLXsKPiAtCXN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcgX19pb21lbSAq
Y2ZnID0gbWRldi0+Y29tbW9uOwo+IC0KPiAtCXU2NCBmZWF0dXJlczsKPiAtCj4gLQl2cF9pb3dy
aXRlMzIoMCwgJmNmZy0+ZGV2aWNlX2ZlYXR1cmVfc2VsZWN0KTsKPiAtCWZlYXR1cmVzID0gdnBf
aW9yZWFkMzIoJmNmZy0+ZGV2aWNlX2ZlYXR1cmUpOwo+IC0JdnBfaW93cml0ZTMyKDEsICZjZmct
PmRldmljZV9mZWF0dXJlX3NlbGVjdCk7Cj4gLQlmZWF0dXJlcyB8PSAoKHU2NCl2cF9pb3JlYWQz
MigmY2ZnLT5kZXZpY2VfZmVhdHVyZSkgPDwgMzIpOwo+IC0KPiAtCXJldHVybiBmZWF0dXJlczsK
PiAtfQo+IC0KPiAtLyogdmlydGlvIGNvbmZpZy0+Z2V0X2ZlYXR1cmVzKCkgaW1wbGVtZW50YXRp
b24gKi8KPiAgc3RhdGljIHU2NCB2cF9nZXRfZmVhdHVyZXMoc3RydWN0IHZpcnRpb19kZXZpY2Ug
KnZkZXYpCj4gIHsKPiAgCXN0cnVjdCB2aXJ0aW9fcGNpX2RldmljZSAqdnBfZGV2ID0gdG9fdnBf
ZGV2aWNlKHZkZXYpOwo+IEBAIC0xODgsMTQ5ICszNiw2IEBAIHN0YXRpYyB2b2lkIHZwX3RyYW5z
cG9ydF9mZWF0dXJlcyhzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldiwgdTY0IGZlYXR1cmVzKQo+
ICAJCV9fdmlydGlvX3NldF9iaXQodmRldiwgVklSVElPX0ZfU1JfSU9WKTsKPiAgfQo+ICAKPiAt
LyoKPiAtICogdnBfbW9kZXJuX3NldF9mZWF0dXJlcyAtIHNldCBmZWF0dXJlcyB0byBkZXZpY2UK
PiAtICogQG1kZXY6IHRoZSBtb2Rlcm4gdmlydGlvLXBjaSBkZXZpY2UKPiAtICogQGZlYXR1cmVz
OiB0aGUgZmVhdHVyZXMgc2V0IHRvIGRldmljZQo+IC0gKi8KPiAtc3RhdGljIHZvaWQgdnBfbW9k
ZXJuX3NldF9mZWF0dXJlcyhzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2LAo+
IC0JCQkJICAgdTY0IGZlYXR1cmVzKQo+IC17Cj4gLQlzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25f
Y2ZnIF9faW9tZW0gKmNmZyA9IG1kZXYtPmNvbW1vbjsKPiAtCj4gLQl2cF9pb3dyaXRlMzIoMCwg
JmNmZy0+Z3Vlc3RfZmVhdHVyZV9zZWxlY3QpOwo+IC0JdnBfaW93cml0ZTMyKCh1MzIpZmVhdHVy
ZXMsICZjZmctPmd1ZXN0X2ZlYXR1cmUpOwo+IC0JdnBfaW93cml0ZTMyKDEsICZjZmctPmd1ZXN0
X2ZlYXR1cmVfc2VsZWN0KTsKPiAtCXZwX2lvd3JpdGUzMihmZWF0dXJlcyA+PiAzMiwgJmNmZy0+
Z3Vlc3RfZmVhdHVyZSk7Cj4gLX0KPiAtCj4gLS8qCj4gLSAqIHZwX21vZGVybl9xdWV1ZV92ZWN0
b3IgLSBzZXQgdGhlIE1TSVggdmVjdG9yIGZvciBhIHNwZWNpZmljIHZpcnRxdWV1ZQo+IC0gKiBA
bWRldjogdGhlIG1vZGVybiB2aXJ0aW8tcGNpIGRldmljZQo+IC0gKiBAaW5kZXg6IHF1ZXVlIGlu
ZGV4Cj4gLSAqIEB2ZWN0b3I6IHRoZSBjb25maWcgdmVjdG9yCj4gLSAqCj4gLSAqIFJldHVybnMg
dGhlIGNvbmZpZyB2ZWN0b3IgcmVhZCBmcm9tIHRoZSBkZXZpY2UKPiAtICovCj4gLXN0YXRpYyB1
MTYgdnBfbW9kZXJuX3F1ZXVlX3ZlY3RvcihzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNl
ICptZGV2LAo+IC0JCQkJICB1MTYgaW5kZXgsIHUxNiB2ZWN0b3IpCj4gLXsKPiAtCXN0cnVjdCB2
aXJ0aW9fcGNpX2NvbW1vbl9jZmcgX19pb21lbSAqY2ZnID0gbWRldi0+Y29tbW9uOwo+IC0KPiAt
CXZwX2lvd3JpdGUxNihpbmRleCwgJmNmZy0+cXVldWVfc2VsZWN0KTsKPiAtCXZwX2lvd3JpdGUx
Nih2ZWN0b3IsICZjZmctPnF1ZXVlX21zaXhfdmVjdG9yKTsKPiAtCS8qIEZsdXNoIHRoZSB3cml0
ZSBvdXQgdG8gZGV2aWNlICovCj4gLQlyZXR1cm4gdnBfaW9yZWFkMTYoJmNmZy0+cXVldWVfbXNp
eF92ZWN0b3IpOwo+IC19Cj4gLQo+IC0vKgo+IC0gKiB2cF9tb2Rlcm5fcXVldWVfYWRkcmVzcyAt
IHNldCB0aGUgdmlydHF1ZXVlIGFkZHJlc3MKPiAtICogQG1kZXY6IHRoZSBtb2Rlcm4gdmlydGlv
LXBjaSBkZXZpY2UKPiAtICogQGluZGV4OiB0aGUgcXVldWUgaW5kZXgKPiAtICogQGRlc2NfYWRk
cjogYWRkcmVzcyBvZiB0aGUgZGVzY3JpcHRvciBhcmVhCj4gLSAqIEBkcml2ZXJfYWRkcjogYWRk
cmVzcyBvZiB0aGUgZHJpdmVyIGFyZWEKPiAtICogQGRldmljZV9hZGRyOiBhZGRyZXNzIG9mIHRo
ZSBkZXZpY2UgYXJlYQo+IC0gKi8KPiAtc3RhdGljIHZvaWQgdnBfbW9kZXJuX3F1ZXVlX2FkZHJl
c3Moc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiwKPiAtCQkJCSAgICB1MTYg
aW5kZXgsIHU2NCBkZXNjX2FkZHIsIHU2NCBkcml2ZXJfYWRkciwKPiAtCQkJCSAgICB1NjQgZGV2
aWNlX2FkZHIpCj4gLXsKPiAtCXN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcgX19pb21lbSAq
Y2ZnID0gbWRldi0+Y29tbW9uOwo+IC0KPiAtCXZwX2lvd3JpdGUxNihpbmRleCwgJmNmZy0+cXVl
dWVfc2VsZWN0KTsKPiAtCj4gLQl2cF9pb3dyaXRlNjRfdHdvcGFydChkZXNjX2FkZHIsICZjZmct
PnF1ZXVlX2Rlc2NfbG8sCj4gLQkJCSAgICAgJmNmZy0+cXVldWVfZGVzY19oaSk7Cj4gLQl2cF9p
b3dyaXRlNjRfdHdvcGFydChkcml2ZXJfYWRkciwgJmNmZy0+cXVldWVfYXZhaWxfbG8sCj4gLQkJ
CSAgICAgJmNmZy0+cXVldWVfYXZhaWxfaGkpOwo+IC0JdnBfaW93cml0ZTY0X3R3b3BhcnQoZGV2
aWNlX2FkZHIsICZjZmctPnF1ZXVlX3VzZWRfbG8sCj4gLQkJCSAgICAgJmNmZy0+cXVldWVfdXNl
ZF9oaSk7Cj4gLX0KPiAtCj4gLS8qCj4gLSAqIHZwX21vZGVybl9zZXRfcXVldWVfZW5hYmxlIC0g
ZW5hYmxlIGEgdmlydHF1ZXVlCj4gLSAqIEBtZGV2OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kgZGV2
aWNlCj4gLSAqIEBpbmRleDogdGhlIHF1ZXVlIGluZGV4Cj4gLSAqIEBlbmFibGU6IHdoZXRoZXIg
dGhlIHZpcnRxdWV1ZSBpcyBlbmFibGUgb3Igbm90Cj4gLSAqLwo+IC1zdGF0aWMgdm9pZCB2cF9t
b2Rlcm5fc2V0X3F1ZXVlX2VuYWJsZShzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICpt
ZGV2LAo+IC0JCQkJICAgICAgIHUxNiBpbmRleCwgYm9vbCBlbmFibGUpCj4gLXsKPiAtCXZwX2lv
d3JpdGUxNihpbmRleCwgJm1kZXYtPmNvbW1vbi0+cXVldWVfc2VsZWN0KTsKPiAtCXZwX2lvd3Jp
dGUxNihlbmFibGUsICZtZGV2LT5jb21tb24tPnF1ZXVlX2VuYWJsZSk7Cj4gLX0KPiAtCj4gLS8q
Cj4gLSAqIHZwX21vZGVybl9nZXRfcXVldWVfZW5hYmxlIC0gZW5hYmxlIGEgdmlydHF1ZXVlCj4g
LSAqIEBtZGV2OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kgZGV2aWNlCj4gLSAqIEBpbmRleDogdGhl
IHF1ZXVlIGluZGV4Cj4gLSAqCj4gLSAqIFJldHVybnMgd2hldGhlciBhIHZpcnRxdWV1ZSBpcyBl
bmFibGVkIG9yIG5vdAo+IC0gKi8KPiAtc3RhdGljIGJvb2wgdnBfbW9kZXJuX2dldF9xdWV1ZV9l
bmFibGUoc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiwKPiAtCQkJCSAgICAg
ICB1MTYgaW5kZXgpCj4gLXsKPiAtCXZwX2lvd3JpdGUxNihpbmRleCwgJm1kZXYtPmNvbW1vbi0+
cXVldWVfc2VsZWN0KTsKPiAtCj4gLQlyZXR1cm4gdnBfaW9yZWFkMTYoJm1kZXYtPmNvbW1vbi0+
cXVldWVfZW5hYmxlKTsKPiAtfQo+IC0KPiAtLyoKPiAtICogdnBfbW9kZXJuX3NldF9xdWV1ZV9z
aXplIC0gc2V0IHNpemUgZm9yIGEgdmlydHF1ZXVlCj4gLSAqIEBtZGV2OiB0aGUgbW9kZXJuIHZp
cnRpby1wY2kgZGV2aWNlCj4gLSAqIEBpbmRleDogdGhlIHF1ZXVlIGluZGV4Cj4gLSAqIEBzaXpl
OiB0aGUgc2l6ZSBvZiB0aGUgdmlydHF1ZXVlCj4gLSAqLwo+IC1zdGF0aWMgdm9pZCB2cF9tb2Rl
cm5fc2V0X3F1ZXVlX3NpemUoc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiwK
PiAtCQkJCSAgICAgdTE2IGluZGV4LCB1MTYgc2l6ZSkKPiAtewo+IC0JdnBfaW93cml0ZTE2KGlu
ZGV4LCAmbWRldi0+Y29tbW9uLT5xdWV1ZV9zZWxlY3QpOwo+IC0JdnBfaW93cml0ZTE2KHNpemUs
ICZtZGV2LT5jb21tb24tPnF1ZXVlX3NpemUpOwo+IC0KPiAtfQo+IC0KPiAtLyoKPiAtICogdnBf
bW9kZXJuX2dldF9xdWV1ZV9zaXplIC0gZ2V0IHNpemUgZm9yIGEgdmlydHF1ZXVlCj4gLSAqIEBt
ZGV2OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kgZGV2aWNlCj4gLSAqIEBpbmRleDogdGhlIHF1ZXVl
IGluZGV4Cj4gLSAqCj4gLSAqIFJldHVybnMgdGhlIHNpemUgb2YgdGhlIHZpcnRxdWV1ZQo+IC0g
Ki8KPiAtc3RhdGljIHUxNiB2cF9tb2Rlcm5fZ2V0X3F1ZXVlX3NpemUoc3RydWN0IHZpcnRpb19w
Y2lfbW9kZXJuX2RldmljZSAqbWRldiwKPiAtCQkJCSAgICB1MTYgaW5kZXgpCj4gLXsKPiAtCXZw
X2lvd3JpdGUxNihpbmRleCwgJm1kZXYtPmNvbW1vbi0+cXVldWVfc2VsZWN0KTsKPiAtCj4gLQly
ZXR1cm4gdnBfaW9yZWFkMTYoJm1kZXYtPmNvbW1vbi0+cXVldWVfc2l6ZSk7Cj4gLQo+IC19Cj4g
LQo+IC0vKgo+IC0gKiB2cF9tb2Rlcm5fZ2V0X251bV9xdWV1ZXMgLSBnZXQgdGhlIG51bWJlciBv
ZiB2aXJ0cXVldWVzCj4gLSAqIEBtZGV2OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kgZGV2aWNlCj4g
LSAqCj4gLSAqIFJldHVybnMgdGhlIG51bWJlciBvZiB2aXJ0cXVldWVzCj4gLSAqLwo+IC1zdGF0
aWMgdTE2IHZwX21vZGVybl9nZXRfbnVtX3F1ZXVlcyhzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5f
ZGV2aWNlICptZGV2KQo+IC17Cj4gLQlyZXR1cm4gdnBfaW9yZWFkMTYoJm1kZXYtPmNvbW1vbi0+
bnVtX3F1ZXVlcyk7Cj4gLX0KPiAtCj4gLS8qCj4gLSAqIHZwX21vZGVybl9nZXRfcXVldWVfbm90
aWZ5X29mZiAtIGdldCBub3RpZmljYXRpb24gb2Zmc2V0IGZvciBhIHZpcnRxdWV1ZQo+IC0gKiBA
bWRldjogdGhlIG1vZGVybiB2aXJ0aW8tcGNpIGRldmljZQo+IC0gKiBAaW5kZXg6IHRoZSBxdWV1
ZSBpbmRleAo+IC0gKgo+IC0gKiBSZXR1cm5zIHRoZSBub3RpZmljYXRpb24gb2Zmc2V0IGZvciBh
IHZpcnRxdWV1ZQo+IC0gKi8KPiAtc3RhdGljIHUxNiB2cF9tb2Rlcm5fZ2V0X3F1ZXVlX25vdGlm
eV9vZmYoc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiwKPiAtCQkJCQkgIHUx
NiBpbmRleCkKPiAtewo+IC0JdnBfaW93cml0ZTE2KGluZGV4LCAmbWRldi0+Y29tbW9uLT5xdWV1
ZV9zZWxlY3QpOwo+IC0KPiAtCXJldHVybiB2cF9pb3JlYWQxNigmbWRldi0+Y29tbW9uLT5xdWV1
ZV9ub3RpZnlfb2ZmKTsKPiAtfQo+IC0KPiAgLyogdmlydGlvIGNvbmZpZy0+ZmluYWxpemVfZmVh
dHVyZXMoKSBpbXBsZW1lbnRhdGlvbiAqLwo+ICBzdGF0aWMgaW50IHZwX2ZpbmFsaXplX2ZlYXR1
cmVzKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2KQo+ICB7Cj4gQEAgLTQyOSwxOSArMTM0LDYg
QEAgc3RhdGljIHZvaWQgdnBfc2V0KHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2LCB1bnNpZ25l
ZCBvZmZzZXQsCj4gIAl9Cj4gIH0KPiAgCj4gLS8qCj4gLSAqIHZwX21vZGVybl9nZW5lcmF0aW9u
IC0gZ2V0IHRoZSBkZXZpY2UgZ2VucmVhdGlvbgo+IC0gKiBAbWRldjogdGhlIG1vZGVybiB2aXJ0
aW8tcGNpIGRldmljZQo+IC0gKgo+IC0gKiBSZXR1cm5zIHRoZSBnZW5yZWF0aW9uIHJlYWQgZnJv
bSBkZXZpY2UKPiAtICovCj4gLXN0YXRpYyB1MzIgdnBfbW9kZXJuX2dlbmVyYXRpb24oc3RydWN0
IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldikKPiAtewo+IC0Jc3RydWN0IHZpcnRpb19w
Y2lfY29tbW9uX2NmZyBfX2lvbWVtICpjZmcgPSBtZGV2LT5jb21tb247Cj4gLQo+IC0JcmV0dXJu
IHZwX2lvcmVhZDgoJmNmZy0+Y29uZmlnX2dlbmVyYXRpb24pOwo+IC19Cj4gLQo+ICBzdGF0aWMg
dTMyIHZwX2dlbmVyYXRpb24oc3RydWN0IHZpcnRpb19kZXZpY2UgKnZkZXYpCj4gIHsKPiAgCXN0
cnVjdCB2aXJ0aW9fcGNpX2RldmljZSAqdnBfZGV2ID0gdG9fdnBfZGV2aWNlKHZkZXYpOwo+IEBA
IC00NDksMTkgKzE0MSw2IEBAIHN0YXRpYyB1MzIgdnBfZ2VuZXJhdGlvbihzdHJ1Y3QgdmlydGlv
X2RldmljZSAqdmRldikKPiAgCXJldHVybiB2cF9tb2Rlcm5fZ2VuZXJhdGlvbigmdnBfZGV2LT5t
ZGV2KTsKPiAgfQo+ICAKPiAtLyoKPiAtICogdnBfbW9kZXJuX2dldF9zdGF0dXMgLSBnZXQgdGhl
IGRldmljZSBzdGF0dXMKPiAtICogQG1kZXY6IHRoZSBtb2Rlcm4gdmlydGlvLXBjaSBkZXZpY2UK
PiAtICoKPiAtICogUmV0dXJucyB0aGUgc3RhdHVzIHJlYWQgZnJvbSBkZXZpY2UKPiAtICovCj4g
LXN0YXRpYyB1OCB2cF9tb2Rlcm5fZ2V0X3N0YXR1cyhzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5f
ZGV2aWNlICptZGV2KQo+IC17Cj4gLQlzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnIF9faW9t
ZW0gKmNmZyA9IG1kZXYtPmNvbW1vbjsKPiAtCj4gLQlyZXR1cm4gdnBfaW9yZWFkOCgmY2ZnLT5k
ZXZpY2Vfc3RhdHVzKTsKPiAtfQo+IC0KPiAgLyogY29uZmlnLT57Z2V0LHNldH1fc3RhdHVzKCkg
aW1wbGVtZW50YXRpb25zICovCj4gIHN0YXRpYyB1OCB2cF9nZXRfc3RhdHVzKHN0cnVjdCB2aXJ0
aW9fZGV2aWNlICp2ZGV2KQo+ICB7Cj4gQEAgLTQ3MCwxOSArMTQ5LDYgQEAgc3RhdGljIHU4IHZw
X2dldF9zdGF0dXMoc3RydWN0IHZpcnRpb19kZXZpY2UgKnZkZXYpCj4gIAlyZXR1cm4gdnBfbW9k
ZXJuX2dldF9zdGF0dXMoJnZwX2Rldi0+bWRldik7Cj4gIH0KPiAgCj4gLS8qCj4gLSAqIHZwX21v
ZGVybl9zZXRfc3RhdHVzIC0gc2V0IHN0YXR1cyB0byBkZXZpY2UKPiAtICogQG1kZXY6IHRoZSBt
b2Rlcm4gdmlydGlvLXBjaSBkZXZpY2UKPiAtICogQHN0YXR1czogdGhlIHN0YXR1cyBzZXQgdG8g
ZGV2aWNlCj4gLSAqLwo+IC1zdGF0aWMgdm9pZCB2cF9tb2Rlcm5fc2V0X3N0YXR1cyhzdHJ1Y3Qg
dmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2LAo+IC0JCQkJIHU4IHN0YXR1cykKPiAtewo+
IC0Jc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZyBfX2lvbWVtICpjZmcgPSBtZGV2LT5jb21t
b247Cj4gLQo+IC0JdnBfaW93cml0ZTgoc3RhdHVzLCAmY2ZnLT5kZXZpY2Vfc3RhdHVzKTsKPiAt
fQo+IC0KPiAgc3RhdGljIHZvaWQgdnBfc2V0X3N0YXR1cyhzdHJ1Y3QgdmlydGlvX2RldmljZSAq
dmRldiwgdTggc3RhdHVzKQo+ICB7Cj4gIAlzdHJ1Y3QgdmlydGlvX3BjaV9kZXZpY2UgKnZwX2Rl
diA9IHRvX3ZwX2RldmljZSh2ZGV2KTsKPiBAQCAtNTEwLDI1ICsxNzYsNiBAQCBzdGF0aWMgdm9p
ZCB2cF9yZXNldChzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldikKPiAgCXZwX3N5bmNocm9uaXpl
X3ZlY3RvcnModmRldik7Cj4gIH0KPiAgCj4gLS8qCj4gLSAqIHZwX21vZGVybl9jb25maWdfdmVj
dG9yIC0gc2V0IHRoZSB2ZWN0b3IgZm9yIGNvbmZpZyBpbnRlcnJ1cHQKPiAtICogQG1kZXY6IHRo
ZSBtb2Rlcm4gdmlydGlvLXBjaSBkZXZpY2UKPiAtICogQHZlY3RvcjogdGhlIGNvbmZpZyB2ZWN0
b3IKPiAtICoKPiAtICogUmV0dXJucyB0aGUgY29uZmlnIHZlY3RvciByZWFkIGZyb20gdGhlIGRl
dmljZQo+IC0gKi8KPiAtc3RhdGljIHUxNiB2cF9tb2Rlcm5fY29uZmlnX3ZlY3RvcihzdHJ1Y3Qg
dmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2LAo+IC0JCQkJICAgdTE2IHZlY3RvcikKPiAt
ewo+IC0Jc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZyBfX2lvbWVtICpjZmcgPSBtZGV2LT5j
b21tb247Cj4gLQo+IC0JLyogU2V0dXAgdGhlIHZlY3RvciB1c2VkIGZvciBjb25maWd1cmF0aW9u
IGV2ZW50cyAqLwo+IC0JdnBfaW93cml0ZTE2KHZlY3RvciwgJmNmZy0+bXNpeF9jb25maWcpOwo+
IC0JLyogVmVyaWZ5IHdlIGhhZCBlbm91Z2ggcmVzb3VyY2VzIHRvIGFzc2lnbiB0aGUgdmVjdG9y
ICovCj4gLQkvKiBXaWxsIGFsc28gZmx1c2ggdGhlIHdyaXRlIG91dCB0byBkZXZpY2UgKi8KPiAt
CXJldHVybiB2cF9pb3JlYWQxNigmY2ZnLT5tc2l4X2NvbmZpZyk7Cj4gLX0KPiAtCj4gIHN0YXRp
YyB1MTYgdnBfY29uZmlnX3ZlY3RvcihzdHJ1Y3QgdmlydGlvX3BjaV9kZXZpY2UgKnZwX2Rldiwg
dTE2IHZlY3RvcikKPiAgewo+ICAJcmV0dXJuIHZwX21vZGVybl9jb25maWdfdmVjdG9yKCZ2cF9k
ZXYtPm1kZXYsIHZlY3Rvcik7Cj4gQEAgLTc4OSwyNTMgKzQzNiw2IEBAIHN0YXRpYyBjb25zdCBz
dHJ1Y3QgdmlydGlvX2NvbmZpZ19vcHMgdmlydGlvX3BjaV9jb25maWdfb3BzID0gewo+ICAJLmdl
dF9zaG1fcmVnaW9uICA9IHZwX2dldF9zaG1fcmVnaW9uLAo+ICB9Owo+ICAKPiAtLyoqCj4gLSAq
IHZpcnRpb19wY2lfZmluZF9jYXBhYmlsaXR5IC0gd2FsayBjYXBhYmlsaXRpZXMgdG8gZmluZCBk
ZXZpY2UgaW5mby4KPiAtICogQGRldjogdGhlIHBjaSBkZXZpY2UKPiAtICogQGNmZ190eXBlOiB0
aGUgVklSVElPX1BDSV9DQVBfKiB2YWx1ZSB3ZSBzZWVrCj4gLSAqIEBpb3Jlc291cmNlX3R5cGVz
OiBJT1JFU09VUkNFX01FTSBhbmQvb3IgSU9SRVNPVVJDRV9JTy4KPiAtICogQGJhcnM6IHRoZSBi
aXRtYXNrIG9mIEJBUnMKPiAtICoKPiAtICogUmV0dXJucyBvZmZzZXQgb2YgdGhlIGNhcGFiaWxp
dHksIG9yIDAuCj4gLSAqLwo+IC1zdGF0aWMgaW5saW5lIGludCB2aXJ0aW9fcGNpX2ZpbmRfY2Fw
YWJpbGl0eShzdHJ1Y3QgcGNpX2RldiAqZGV2LCB1OCBjZmdfdHlwZSwKPiAtCQkJCQkgICAgIHUz
MiBpb3Jlc291cmNlX3R5cGVzLCBpbnQgKmJhcnMpCj4gLXsKPiAtCWludCBwb3M7Cj4gLQo+IC0J
Zm9yIChwb3MgPSBwY2lfZmluZF9jYXBhYmlsaXR5KGRldiwgUENJX0NBUF9JRF9WTkRSKTsKPiAt
CSAgICAgcG9zID4gMDsKPiAtCSAgICAgcG9zID0gcGNpX2ZpbmRfbmV4dF9jYXBhYmlsaXR5KGRl
diwgcG9zLCBQQ0lfQ0FQX0lEX1ZORFIpKSB7Cj4gLQkJdTggdHlwZSwgYmFyOwo+IC0JCXBjaV9y
ZWFkX2NvbmZpZ19ieXRlKGRldiwgcG9zICsgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY2Fw
LAo+IC0JCQkJCQkJIGNmZ190eXBlKSwKPiAtCQkJCSAgICAgJnR5cGUpOwo+IC0JCXBjaV9yZWFk
X2NvbmZpZ19ieXRlKGRldiwgcG9zICsgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY2FwLAo+
IC0JCQkJCQkJIGJhciksCj4gLQkJCQkgICAgICZiYXIpOwo+IC0KPiAtCQkvKiBJZ25vcmUgc3Ry
dWN0dXJlcyB3aXRoIHJlc2VydmVkIEJBUiB2YWx1ZXMgKi8KPiAtCQlpZiAoYmFyID4gMHg1KQo+
IC0JCQljb250aW51ZTsKPiAtCj4gLQkJaWYgKHR5cGUgPT0gY2ZnX3R5cGUpIHsKPiAtCQkJaWYg
KHBjaV9yZXNvdXJjZV9sZW4oZGV2LCBiYXIpICYmCj4gLQkJCSAgICBwY2lfcmVzb3VyY2VfZmxh
Z3MoZGV2LCBiYXIpICYgaW9yZXNvdXJjZV90eXBlcykgewo+IC0JCQkJKmJhcnMgfD0gKDEgPDwg
YmFyKTsKPiAtCQkJCXJldHVybiBwb3M7Cj4gLQkJCX0KPiAtCQl9Cj4gLQl9Cj4gLQlyZXR1cm4g
MDsKPiAtfQo+IC0KPiAtLyogVGhpcyBpcyBwYXJ0IG9mIHRoZSBBQkkuICBEb24ndCBzY3JldyB3
aXRoIGl0LiAqLwo+IC1zdGF0aWMgaW5saW5lIHZvaWQgY2hlY2tfb2Zmc2V0cyh2b2lkKQo+IC17
Cj4gLQkvKiBOb3RlOiBkaXNrIHNwYWNlIHdhcyBoYXJtZWQgaW4gY29tcGlsYXRpb24gb2YgdGhp
cyBmdW5jdGlvbi4gKi8KPiAtCUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NBUF9WTkRSICE9Cj4g
LQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jYXAsIGNhcF92bmRyKSk7Cj4gLQlC
VUlMRF9CVUdfT04oVklSVElPX1BDSV9DQVBfTkVYVCAhPQo+IC0JCSAgICAgb2Zmc2V0b2Yoc3Ry
dWN0IHZpcnRpb19wY2lfY2FwLCBjYXBfbmV4dCkpOwo+IC0JQlVJTERfQlVHX09OKFZJUlRJT19Q
Q0lfQ0FQX0xFTiAhPQo+IC0JCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY2FwLCBj
YXBfbGVuKSk7Cj4gLQlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DQVBfQ0ZHX1RZUEUgIT0KPiAt
CQkgICAgIG9mZnNldG9mKHN0cnVjdCB2aXJ0aW9fcGNpX2NhcCwgY2ZnX3R5cGUpKTsKPiAtCUJV
SUxEX0JVR19PTihWSVJUSU9fUENJX0NBUF9CQVIgIT0KPiAtCQkgICAgIG9mZnNldG9mKHN0cnVj
dCB2aXJ0aW9fcGNpX2NhcCwgYmFyKSk7Cj4gLQlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DQVBf
T0ZGU0VUICE9Cj4gLQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jYXAsIG9mZnNl
dCkpOwo+IC0JQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ0FQX0xFTkdUSCAhPQo+IC0JCSAgICAg
b2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY2FwLCBsZW5ndGgpKTsKPiAtCUJVSUxEX0JVR19P
TihWSVJUSU9fUENJX05PVElGWV9DQVBfTVVMVCAhPQo+IC0JCSAgICAgb2Zmc2V0b2Yoc3RydWN0
IHZpcnRpb19wY2lfbm90aWZ5X2NhcCwKPiAtCQkJICAgICAgbm90aWZ5X29mZl9tdWx0aXBsaWVy
KSk7Cj4gLQlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fREZTRUxFQ1QgIT0KPiAtCQkg
ICAgIG9mZnNldG9mKHN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcsCj4gLQkJCSAgICAgIGRl
dmljZV9mZWF0dXJlX3NlbGVjdCkpOwo+IC0JQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9O
X0RGICE9Cj4gLQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBk
ZXZpY2VfZmVhdHVyZSkpOwo+IC0JQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX0dGU0VM
RUNUICE9Cj4gLQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLAo+
IC0JCQkgICAgICBndWVzdF9mZWF0dXJlX3NlbGVjdCkpOwo+IC0JQlVJTERfQlVHX09OKFZJUlRJ
T19QQ0lfQ09NTU9OX0dGICE9Cj4gLQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9j
b21tb25fY2ZnLCBndWVzdF9mZWF0dXJlKSk7Cj4gLQlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9D
T01NT05fTVNJWCAhPQo+IC0JCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9u
X2NmZywgbXNpeF9jb25maWcpKTsKPiAtCUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NPTU1PTl9O
VU1RICE9Cj4gLQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBu
dW1fcXVldWVzKSk7Cj4gLQlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fU1RBVFVTICE9
Cj4gLQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBkZXZpY2Vf
c3RhdHVzKSk7Cj4gLQlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fQ0ZHR0VORVJBVElP
TiAhPQo+IC0JCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywgY29u
ZmlnX2dlbmVyYXRpb24pKTsKPiAtCUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NPTU1PTl9RX1NF
TEVDVCAhPQo+IC0JCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywg
cXVldWVfc2VsZWN0KSk7Cj4gLQlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fUV9TSVpF
ICE9Cj4gLQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1
ZV9zaXplKSk7Cj4gLQlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fUV9NU0lYICE9Cj4g
LQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV9tc2l4
X3ZlY3RvcikpOwo+IC0JQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX1FfRU5BQkxFICE9
Cj4gLQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV9l
bmFibGUpKTsKPiAtCUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NPTU1PTl9RX05PRkYgIT0KPiAt
CQkgICAgIG9mZnNldG9mKHN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcsIHF1ZXVlX25vdGlm
eV9vZmYpKTsKPiAtCUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NPTU1PTl9RX0RFU0NMTyAhPQo+
IC0JCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywgcXVldWVfZGVz
Y19sbykpOwo+IC0JQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX1FfREVTQ0hJICE9Cj4g
LQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV9kZXNj
X2hpKSk7Cj4gLQlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fUV9BVkFJTExPICE9Cj4g
LQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV9hdmFp
bF9sbykpOwo+IC0JQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX1FfQVZBSUxISSAhPQo+
IC0JCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywgcXVldWVfYXZh
aWxfaGkpKTsKPiAtCUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NPTU1PTl9RX1VTRURMTyAhPQo+
IC0JCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywgcXVldWVfdXNl
ZF9sbykpOwo+IC0JQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX1FfVVNFREhJICE9Cj4g
LQkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV91c2Vk
X2hpKSk7Cj4gLX0KPiAtCj4gLS8qCj4gLSAqIHZwX21vZGVybl9wcm9iZTogcHJvYmUgdGhlIG1v
ZGVybiB2aXJ0aW8gcGNpIGRldmljZSwgbm90ZSB0aGF0IHRoZQo+IC0gKiBjYWxsZXIgaXMgcmVx
dWlyZWQgdG8gZW5hYmxlIFBDSSBkZXZpY2UgYmVmb3JlIGNhbGxpbmcgdGhpcyBmdW5jdGlvbi4K
PiAtICogQG1kZXY6IHRoZSBtb2Rlcm4gdmlydGlvLXBjaSBkZXZpY2UKPiAtICoKPiAtICogUmV0
dXJuIDAgb24gc3VjY2VlZCBvdGhlcndpc2UgZmFpbAo+IC0gKi8KPiAtc3RhdGljIGludCB2cF9t
b2Rlcm5fcHJvYmUoc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldikKPiAtewo+
IC0Jc3RydWN0IHBjaV9kZXYgKnBjaV9kZXYgPSBtZGV2LT5wY2lfZGV2Owo+IC0JaW50IGVyciwg
Y29tbW9uLCBpc3IsIG5vdGlmeSwgZGV2aWNlOwo+IC0JdTMyIG5vdGlmeV9sZW5ndGg7Cj4gLQl1
MzIgbm90aWZ5X29mZnNldDsKPiAtCj4gLQljaGVja19vZmZzZXRzKCk7Cj4gLQo+IC0JbWRldi0+
cGNpX2RldiA9IHBjaV9kZXY7Cj4gLQo+IC0JLyogV2Ugb25seSBvd24gZGV2aWNlcyA+PSAweDEw
MDAgYW5kIDw9IDB4MTA3ZjogbGVhdmUgdGhlIHJlc3QuICovCj4gLQlpZiAocGNpX2Rldi0+ZGV2
aWNlIDwgMHgxMDAwIHx8IHBjaV9kZXYtPmRldmljZSA+IDB4MTA3ZikKPiAtCQlyZXR1cm4gLUVO
T0RFVjsKPiAtCj4gLQlpZiAocGNpX2Rldi0+ZGV2aWNlIDwgMHgxMDQwKSB7Cj4gLQkJLyogVHJh
bnNpdGlvbmFsIGRldmljZXM6IHVzZSB0aGUgUENJIHN1YnN5c3RlbSBkZXZpY2UgaWQgYXMKPiAt
CQkgKiB2aXJ0aW8gZGV2aWNlIGlkLCBzYW1lIGFzIGxlZ2FjeSBkcml2ZXIgYWx3YXlzIGRpZC4K
PiAtCQkgKi8KPiAtCQltZGV2LT5pZC5kZXZpY2UgPSBwY2lfZGV2LT5zdWJzeXN0ZW1fZGV2aWNl
Owo+IC0JfSBlbHNlIHsKPiAtCQkvKiBNb2Rlcm4gZGV2aWNlczogc2ltcGx5IHVzZSBQQ0kgZGV2
aWNlIGlkLCBidXQgc3RhcnQgZnJvbSAweDEwNDAuICovCj4gLQkJbWRldi0+aWQuZGV2aWNlID0g
cGNpX2Rldi0+ZGV2aWNlIC0gMHgxMDQwOwo+IC0JfQo+IC0JbWRldi0+aWQudmVuZG9yID0gcGNp
X2Rldi0+c3Vic3lzdGVtX3ZlbmRvcjsKPiAtCj4gLQkvKiBjaGVjayBmb3IgYSBjb21tb24gY29u
ZmlnOiBpZiBub3QsIHVzZSBsZWdhY3kgbW9kZSAoYmFyIDApLiAqLwo+IC0JY29tbW9uID0gdmly
dGlvX3BjaV9maW5kX2NhcGFiaWxpdHkocGNpX2RldiwgVklSVElPX1BDSV9DQVBfQ09NTU9OX0NG
RywKPiAtCQkJCQkgICAgSU9SRVNPVVJDRV9JTyB8IElPUkVTT1VSQ0VfTUVNLAo+IC0JCQkJCSAg
ICAmbWRldi0+bW9kZXJuX2JhcnMpOwo+IC0JaWYgKCFjb21tb24pIHsKPiAtCQlkZXZfaW5mbygm
cGNpX2Rldi0+ZGV2LAo+IC0JCQkgInZpcnRpb19wY2k6IGxlYXZpbmcgZm9yIGxlZ2FjeSBkcml2
ZXJcbiIpOwo+IC0JCXJldHVybiAtRU5PREVWOwo+IC0JfQo+IC0KPiAtCS8qIElmIGNvbW1vbiBp
cyB0aGVyZSwgdGhlc2Ugc2hvdWxkIGJlIHRvby4uLiAqLwo+IC0JaXNyID0gdmlydGlvX3BjaV9m
aW5kX2NhcGFiaWxpdHkocGNpX2RldiwgVklSVElPX1BDSV9DQVBfSVNSX0NGRywKPiAtCQkJCQkg
SU9SRVNPVVJDRV9JTyB8IElPUkVTT1VSQ0VfTUVNLAo+IC0JCQkJCSAmbWRldi0+bW9kZXJuX2Jh
cnMpOwo+IC0Jbm90aWZ5ID0gdmlydGlvX3BjaV9maW5kX2NhcGFiaWxpdHkocGNpX2RldiwgVklS
VElPX1BDSV9DQVBfTk9USUZZX0NGRywKPiAtCQkJCQkgICAgSU9SRVNPVVJDRV9JTyB8IElPUkVT
T1VSQ0VfTUVNLAo+IC0JCQkJCSAgICAmbWRldi0+bW9kZXJuX2JhcnMpOwo+IC0JaWYgKCFpc3Ig
fHwgIW5vdGlmeSkgewo+IC0JCWRldl9lcnIoJnBjaV9kZXYtPmRldiwKPiAtCQkJInZpcnRpb19w
Y2k6IG1pc3NpbmcgY2FwYWJpbGl0aWVzICVpLyVpLyVpXG4iLAo+IC0JCQljb21tb24sIGlzciwg
bm90aWZ5KTsKPiAtCQlyZXR1cm4gLUVJTlZBTDsKPiAtCX0KPiAtCj4gLQllcnIgPSBkbWFfc2V0
X21hc2tfYW5kX2NvaGVyZW50KCZwY2lfZGV2LT5kZXYsIERNQV9CSVRfTUFTSyg2NCkpOwo+IC0J
aWYgKGVycikKPiAtCQllcnIgPSBkbWFfc2V0X21hc2tfYW5kX2NvaGVyZW50KCZwY2lfZGV2LT5k
ZXYsCj4gLQkJCQkJCURNQV9CSVRfTUFTSygzMikpOwo+IC0JaWYgKGVycikKPiAtCQlkZXZfd2Fy
bigmcGNpX2Rldi0+ZGV2LCAiRmFpbGVkIHRvIGVuYWJsZSA2NC1iaXQgb3IgMzItYml0IERNQS4g
IFRyeWluZyB0byBjb250aW51ZSwgYnV0IHRoaXMgbWlnaHQgbm90IHdvcmsuXG4iKTsKPiAtCj4g
LQkvKiBEZXZpY2UgY2FwYWJpbGl0eSBpcyBvbmx5IG1hbmRhdG9yeSBmb3IgZGV2aWNlcyB0aGF0
IGhhdmUKPiAtCSAqIGRldmljZS1zcGVjaWZpYyBjb25maWd1cmF0aW9uLgo+IC0JICovCj4gLQlk
ZXZpY2UgPSB2aXJ0aW9fcGNpX2ZpbmRfY2FwYWJpbGl0eShwY2lfZGV2LCBWSVJUSU9fUENJX0NB
UF9ERVZJQ0VfQ0ZHLAo+IC0JCQkJCSAgICBJT1JFU09VUkNFX0lPIHwgSU9SRVNPVVJDRV9NRU0s
Cj4gLQkJCQkJICAgICZtZGV2LT5tb2Rlcm5fYmFycyk7Cj4gLQo+IC0JZXJyID0gcGNpX3JlcXVl
c3Rfc2VsZWN0ZWRfcmVnaW9ucyhwY2lfZGV2LCBtZGV2LT5tb2Rlcm5fYmFycywKPiAtCQkJCQkg
ICAidmlydGlvLXBjaS1tb2Rlcm4iKTsKPiAtCWlmIChlcnIpCj4gLQkJcmV0dXJuIGVycjsKPiAt
Cj4gLQllcnIgPSAtRUlOVkFMOwo+IC0JbWRldi0+Y29tbW9uID0gdnBfbW9kZXJuX21hcF9jYXBh
YmlsaXR5KG1kZXYsIGNvbW1vbiwKPiAtCQkJCSAgICAgIHNpemVvZihzdHJ1Y3QgdmlydGlvX3Bj
aV9jb21tb25fY2ZnKSwgNCwKPiAtCQkJCSAgICAgIDAsIHNpemVvZihzdHJ1Y3QgdmlydGlvX3Bj
aV9jb21tb25fY2ZnKSwKPiAtCQkJCSAgICAgIE5VTEwpOwo+IC0JaWYgKCFtZGV2LT5jb21tb24p
Cj4gLQkJZ290byBlcnJfbWFwX2NvbW1vbjsKPiAtCW1kZXYtPmlzciA9IHZwX21vZGVybl9tYXBf
Y2FwYWJpbGl0eShtZGV2LCBpc3IsIHNpemVvZih1OCksIDEsCj4gLQkJCQkJICAgICAwLCAxLAo+
IC0JCQkJCSAgICAgTlVMTCk7Cj4gLQlpZiAoIW1kZXYtPmlzcikKPiAtCQlnb3RvIGVycl9tYXBf
aXNyOwo+IC0KPiAtCS8qIFJlYWQgbm90aWZ5X29mZl9tdWx0aXBsaWVyIGZyb20gY29uZmlnIHNw
YWNlLiAqLwo+IC0JcGNpX3JlYWRfY29uZmlnX2R3b3JkKHBjaV9kZXYsCj4gLQkJCSAgICAgIG5v
dGlmeSArIG9mZnNldG9mKHN0cnVjdCB2aXJ0aW9fcGNpX25vdGlmeV9jYXAsCj4gLQkJCQkJCW5v
dGlmeV9vZmZfbXVsdGlwbGllciksCj4gLQkJCSAgICAgICZtZGV2LT5ub3RpZnlfb2Zmc2V0X211
bHRpcGxpZXIpOwo+IC0JLyogUmVhZCBub3RpZnkgbGVuZ3RoIGFuZCBvZmZzZXQgZnJvbSBjb25m
aWcgc3BhY2UuICovCj4gLQlwY2lfcmVhZF9jb25maWdfZHdvcmQocGNpX2RldiwKPiAtCQkJICAg
ICAgbm90aWZ5ICsgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfbm90aWZ5X2NhcCwKPiAtCQkJ
CQkJY2FwLmxlbmd0aCksCj4gLQkJCSAgICAgICZub3RpZnlfbGVuZ3RoKTsKPiAtCj4gLQlwY2lf
cmVhZF9jb25maWdfZHdvcmQocGNpX2RldiwKPiAtCQkJICAgICAgbm90aWZ5ICsgb2Zmc2V0b2Yo
c3RydWN0IHZpcnRpb19wY2lfbm90aWZ5X2NhcCwKPiAtCQkJCQkJY2FwLm9mZnNldCksCj4gLQkJ
CSAgICAgICZub3RpZnlfb2Zmc2V0KTsKPiAtCj4gLQkvKiBXZSBkb24ndCBrbm93IGhvdyBtYW55
IFZRcyB3ZSdsbCBtYXAsIGFoZWFkIG9mIHRoZSB0aW1lLgo+IC0JICogSWYgbm90aWZ5IGxlbmd0
aCBpcyBzbWFsbCwgbWFwIGl0IGFsbCBub3cuCj4gLQkgKiBPdGhlcndpc2UsIG1hcCBlYWNoIFZR
IGluZGl2aWR1YWxseSBsYXRlci4KPiAtCSAqLwo+IC0JaWYgKCh1NjQpbm90aWZ5X2xlbmd0aCAr
IChub3RpZnlfb2Zmc2V0ICUgUEFHRV9TSVpFKSA8PSBQQUdFX1NJWkUpIHsKPiAtCQltZGV2LT5u
b3RpZnlfYmFzZSA9IHZwX21vZGVybl9tYXBfY2FwYWJpbGl0eShtZGV2LCBub3RpZnksCj4gLQkJ
CQkJCQkgICAgIDIsIDIsCj4gLQkJCQkJCQkgICAgIDAsIG5vdGlmeV9sZW5ndGgsCj4gLQkJCQkJ
CQkgICAgICZtZGV2LT5ub3RpZnlfbGVuKTsKPiAtCQlpZiAoIW1kZXYtPm5vdGlmeV9iYXNlKQo+
IC0JCQlnb3RvIGVycl9tYXBfbm90aWZ5Owo+IC0JfSBlbHNlIHsKPiAtCQltZGV2LT5ub3RpZnlf
bWFwX2NhcCA9IG5vdGlmeTsKPiAtCX0KPiAtCj4gLQkvKiBBZ2Fpbiwgd2UgZG9uJ3Qga25vdyBo
b3cgbXVjaCB3ZSBzaG91bGQgbWFwLCBidXQgUEFHRV9TSVpFCj4gLQkgKiBpcyBtb3JlIHRoYW4g
ZW5vdWdoIGZvciBhbGwgZXhpc3RpbmcgZGV2aWNlcy4KPiAtCSAqLwo+IC0JaWYgKGRldmljZSkg
ewo+IC0JCW1kZXYtPmRldmljZSA9IHZwX21vZGVybl9tYXBfY2FwYWJpbGl0eShtZGV2LCBkZXZp
Y2UsIDAsIDQsCj4gLQkJCQkJCQkwLCBQQUdFX1NJWkUsCj4gLQkJCQkJCQkmbWRldi0+ZGV2aWNl
X2xlbik7Cj4gLQkJaWYgKCFtZGV2LT5kZXZpY2UpCj4gLQkJCWdvdG8gZXJyX21hcF9kZXZpY2U7
Cj4gLQl9Cj4gLQo+IC0JcmV0dXJuIDA7Cj4gLQo+IC1lcnJfbWFwX2RldmljZToKPiAtCWlmICht
ZGV2LT5ub3RpZnlfYmFzZSkKPiAtCQlwY2lfaW91bm1hcChwY2lfZGV2LCBtZGV2LT5ub3RpZnlf
YmFzZSk7Cj4gLWVycl9tYXBfbm90aWZ5Ogo+IC0JcGNpX2lvdW5tYXAocGNpX2RldiwgbWRldi0+
aXNyKTsKPiAtZXJyX21hcF9pc3I6Cj4gLQlwY2lfaW91bm1hcChwY2lfZGV2LCBtZGV2LT5jb21t
b24pOwo+IC1lcnJfbWFwX2NvbW1vbjoKPiAtCXJldHVybiBlcnI7Cj4gLX0KPiAtCj4gIC8qIHRo
ZSBQQ0kgcHJvYmluZyBmdW5jdGlvbiAqLwo+ICBpbnQgdmlydGlvX3BjaV9tb2Rlcm5fcHJvYmUo
c3RydWN0IHZpcnRpb19wY2lfZGV2aWNlICp2cF9kZXYpCj4gIHsKPiBAQCAtMTA2MywyMyArNDYz
LDYgQEAgaW50IHZpcnRpb19wY2lfbW9kZXJuX3Byb2JlKHN0cnVjdCB2aXJ0aW9fcGNpX2Rldmlj
ZSAqdnBfZGV2KQo+ICAJcmV0dXJuIDA7Cj4gIH0KPiAgCj4gLS8qCj4gLSAqIHZwX21vZGVybl9w
cm9iZTogcmVtb3ZlIGFuZCBjbGVhbnVwIHRoZSBtb2Rlcm4gdmlydGlvIHBjaSBkZXZpY2UKPiAt
ICogQG1kZXY6IHRoZSBtb2Rlcm4gdmlydGlvLXBjaSBkZXZpY2UKPiAtICovCj4gLXN0YXRpYyB2
b2lkIHZwX21vZGVybl9yZW1vdmUoc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRl
dikKPiAtewo+IC0Jc3RydWN0IHBjaV9kZXYgKnBjaV9kZXYgPSBtZGV2LT5wY2lfZGV2Owo+IC0K
PiAtCWlmIChtZGV2LT5kZXZpY2UpCj4gLQkJcGNpX2lvdW5tYXAocGNpX2RldiwgbWRldi0+ZGV2
aWNlKTsKPiAtCWlmIChtZGV2LT5ub3RpZnlfYmFzZSkKPiAtCQlwY2lfaW91bm1hcChwY2lfZGV2
LCBtZGV2LT5ub3RpZnlfYmFzZSk7Cj4gLQlwY2lfaW91bm1hcChwY2lfZGV2LCBtZGV2LT5pc3Ip
Owo+IC0JcGNpX2lvdW5tYXAocGNpX2RldiwgbWRldi0+Y29tbW9uKTsKPiAtCXBjaV9yZWxlYXNl
X3NlbGVjdGVkX3JlZ2lvbnMocGNpX2RldiwgbWRldi0+bW9kZXJuX2JhcnMpOwo+IC19Cj4gLQo+
ICB2b2lkIHZpcnRpb19wY2lfbW9kZXJuX3JlbW92ZShzdHJ1Y3QgdmlydGlvX3BjaV9kZXZpY2Ug
KnZwX2RldikKPiAgewo+ICAJc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiA9
ICZ2cF9kZXYtPm1kZXY7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19wY2lf
bW9kZXJuX2Rldi5jIGIvZHJpdmVycy92aXJ0aW8vdmlydGlvX3BjaV9tb2Rlcm5fZGV2LmMKPiBu
ZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAwMDAwMDAwMDAwMC4uY2JkNjY3NDk2YmIxCj4g
LS0tIC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19wY2lfbW9kZXJuX2Rl
di5jCj4gQEAgLTAsMCArMSw1OTkgQEAKPiArLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQ
TC0yLjAtb3ItbGF0ZXIKPiArCj4gKyNpbmNsdWRlIDxsaW51eC92aXJ0aW9fcGNpX21vZGVybi5o
Pgo+ICsjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9wY2kuaD4K
PiArCj4gKy8qCj4gKyAqIHZwX21vZGVybl9tYXBfY2FwYWJpbGl0eSAtIG1hcCBhIHBhcnQgb2Yg
dmlydGlvIHBjaSBjYXBhYmlsaXR5Cj4gKyAqIEBtZGV2OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kg
ZGV2aWNlCj4gKyAqIEBvZmY6IG9mZnNldCBvZiB0aGUgY2FwYWJpbGl0eQo+ICsgKiBAbWlubGVu
OiBtaW5pbWFsIGxlbmd0aCBvZiB0aGUgY2FwYWJpbGl0eQo+ICsgKiBAYWxpZ246IGFsaWduIHJl
cXVpcmVtZW50Cj4gKyAqIEBzdGFydDogc3RhcnQgZnJvbSB0aGUgY2FwYWJpbGl0eQo+ICsgKiBA
c2l6ZTogbWFwIHNpemUKPiArICogQGxlbjogdGhlIGxlbmd0aCB0aGF0IGlzIGFjdHVhbGx5IG1h
cHBlZAo+ICsgKgo+ICsgKiBSZXR1cm5zIHRoZSBpbyBhZGRyZXNzIG9mIGZvciB0aGUgcGFydCBv
ZiB0aGUgY2FwYWJpbGl0eQo+ICsgKi8KPiArdm9pZCBfX2lvbWVtICp2cF9tb2Rlcm5fbWFwX2Nh
cGFiaWxpdHkoc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiwgaW50IG9mZiwK
PiArCQkJCSAgICAgICBzaXplX3QgbWlubGVuLAo+ICsJCQkJICAgICAgIHUzMiBhbGlnbiwKPiAr
CQkJCSAgICAgICB1MzIgc3RhcnQsIHUzMiBzaXplLAo+ICsJCQkJICAgICAgIHNpemVfdCAqbGVu
KQo+ICt7Cj4gKwlzdHJ1Y3QgcGNpX2RldiAqZGV2ID0gbWRldi0+cGNpX2RldjsKPiArCXU4IGJh
cjsKPiArCXUzMiBvZmZzZXQsIGxlbmd0aDsKPiArCXZvaWQgX19pb21lbSAqcDsKPiArCj4gKwlw
Y2lfcmVhZF9jb25maWdfYnl0ZShkZXYsIG9mZiArIG9mZnNldG9mKHN0cnVjdCB2aXJ0aW9fcGNp
X2NhcCwKPiArCQkJCQkJIGJhciksCj4gKwkJCSAgICAgJmJhcik7Cj4gKwlwY2lfcmVhZF9jb25m
aWdfZHdvcmQoZGV2LCBvZmYgKyBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jYXAsIG9mZnNl
dCksCj4gKwkJCSAgICAgJm9mZnNldCk7Cj4gKwlwY2lfcmVhZF9jb25maWdfZHdvcmQoZGV2LCBv
ZmYgKyBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jYXAsIGxlbmd0aCksCj4gKwkJCSAgICAg
ICZsZW5ndGgpOwo+ICsKPiArCWlmIChsZW5ndGggPD0gc3RhcnQpIHsKPiArCQlkZXZfZXJyKCZk
ZXYtPmRldiwKPiArCQkJInZpcnRpb19wY2k6IGJhZCBjYXBhYmlsaXR5IGxlbiAldSAoPiV1IGV4
cGVjdGVkKVxuIiwKPiArCQkJbGVuZ3RoLCBzdGFydCk7Cj4gKwkJcmV0dXJuIE5VTEw7Cj4gKwl9
Cj4gKwo+ICsJaWYgKGxlbmd0aCAtIHN0YXJ0IDwgbWlubGVuKSB7Cj4gKwkJZGV2X2VycigmZGV2
LT5kZXYsCj4gKwkJCSJ2aXJ0aW9fcGNpOiBiYWQgY2FwYWJpbGl0eSBsZW4gJXUgKD49JXp1IGV4
cGVjdGVkKVxuIiwKPiArCQkJbGVuZ3RoLCBtaW5sZW4pOwo+ICsJCXJldHVybiBOVUxMOwo+ICsJ
fQo+ICsKPiArCWxlbmd0aCAtPSBzdGFydDsKPiArCj4gKwlpZiAoc3RhcnQgKyBvZmZzZXQgPCBv
ZmZzZXQpIHsKPiArCQlkZXZfZXJyKCZkZXYtPmRldiwKPiArCQkJInZpcnRpb19wY2k6IG1hcCB3
cmFwLWFyb3VuZCAldSsldVxuIiwKPiArCQkJc3RhcnQsIG9mZnNldCk7Cj4gKwkJcmV0dXJuIE5V
TEw7Cj4gKwl9Cj4gKwo+ICsJb2Zmc2V0ICs9IHN0YXJ0Owo+ICsKPiArCWlmIChvZmZzZXQgJiAo
YWxpZ24gLSAxKSkgewo+ICsJCWRldl9lcnIoJmRldi0+ZGV2LAo+ICsJCQkidmlydGlvX3BjaTog
b2Zmc2V0ICV1IG5vdCBhbGlnbmVkIHRvICV1XG4iLAo+ICsJCQlvZmZzZXQsIGFsaWduKTsKPiAr
CQlyZXR1cm4gTlVMTDsKPiArCX0KPiArCj4gKwlpZiAobGVuZ3RoID4gc2l6ZSkKPiArCQlsZW5n
dGggPSBzaXplOwo+ICsKPiArCWlmIChsZW4pCj4gKwkJKmxlbiA9IGxlbmd0aDsKPiArCj4gKwlp
ZiAobWlubGVuICsgb2Zmc2V0IDwgbWlubGVuIHx8Cj4gKwkgICAgbWlubGVuICsgb2Zmc2V0ID4g
cGNpX3Jlc291cmNlX2xlbihkZXYsIGJhcikpIHsKPiArCQlkZXZfZXJyKCZkZXYtPmRldiwKPiAr
CQkJInZpcnRpb19wY2k6IG1hcCB2aXJ0aW8gJXp1QCV1ICIKPiArCQkJIm91dCBvZiByYW5nZSBv
biBiYXIgJWkgbGVuZ3RoICVsdVxuIiwKPiArCQkJbWlubGVuLCBvZmZzZXQsCj4gKwkJCWJhciwg
KHVuc2lnbmVkIGxvbmcpcGNpX3Jlc291cmNlX2xlbihkZXYsIGJhcikpOwo+ICsJCXJldHVybiBO
VUxMOwo+ICsJfQo+ICsKPiArCXAgPSBwY2lfaW9tYXBfcmFuZ2UoZGV2LCBiYXIsIG9mZnNldCwg
bGVuZ3RoKTsKPiArCWlmICghcCkKPiArCQlkZXZfZXJyKCZkZXYtPmRldiwKPiArCQkJInZpcnRp
b19wY2k6IHVuYWJsZSB0byBtYXAgdmlydGlvICV1QCV1IG9uIGJhciAlaVxuIiwKPiArCQkJbGVu
Z3RoLCBvZmZzZXQsIGJhcik7Cj4gKwlyZXR1cm4gcDsKPiArfQo+ICtFWFBPUlRfU1lNQk9MX0dQ
TCh2cF9tb2Rlcm5fbWFwX2NhcGFiaWxpdHkpOwo+ICsKPiArLyoqCj4gKyAqIHZpcnRpb19wY2lf
ZmluZF9jYXBhYmlsaXR5IC0gd2FsayBjYXBhYmlsaXRpZXMgdG8gZmluZCBkZXZpY2UgaW5mby4K
PiArICogQGRldjogdGhlIHBjaSBkZXZpY2UKPiArICogQGNmZ190eXBlOiB0aGUgVklSVElPX1BD
SV9DQVBfKiB2YWx1ZSB3ZSBzZWVrCj4gKyAqIEBpb3Jlc291cmNlX3R5cGVzOiBJT1JFU09VUkNF
X01FTSBhbmQvb3IgSU9SRVNPVVJDRV9JTy4KPiArICogQGJhcnM6IHRoZSBiaXRtYXNrIG9mIEJB
UnMKPiArICoKPiArICogUmV0dXJucyBvZmZzZXQgb2YgdGhlIGNhcGFiaWxpdHksIG9yIDAuCj4g
KyAqLwo+ICtzdGF0aWMgaW5saW5lIGludCB2aXJ0aW9fcGNpX2ZpbmRfY2FwYWJpbGl0eShzdHJ1
Y3QgcGNpX2RldiAqZGV2LCB1OCBjZmdfdHlwZSwKPiArCQkJCQkgICAgIHUzMiBpb3Jlc291cmNl
X3R5cGVzLCBpbnQgKmJhcnMpCj4gK3sKPiArCWludCBwb3M7Cj4gKwo+ICsJZm9yIChwb3MgPSBw
Y2lfZmluZF9jYXBhYmlsaXR5KGRldiwgUENJX0NBUF9JRF9WTkRSKTsKPiArCSAgICAgcG9zID4g
MDsKPiArCSAgICAgcG9zID0gcGNpX2ZpbmRfbmV4dF9jYXBhYmlsaXR5KGRldiwgcG9zLCBQQ0lf
Q0FQX0lEX1ZORFIpKSB7Cj4gKwkJdTggdHlwZSwgYmFyOwo+ICsJCXBjaV9yZWFkX2NvbmZpZ19i
eXRlKGRldiwgcG9zICsgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY2FwLAo+ICsJCQkJCQkJ
IGNmZ190eXBlKSwKPiArCQkJCSAgICAgJnR5cGUpOwo+ICsJCXBjaV9yZWFkX2NvbmZpZ19ieXRl
KGRldiwgcG9zICsgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY2FwLAo+ICsJCQkJCQkJIGJh
ciksCj4gKwkJCQkgICAgICZiYXIpOwo+ICsKPiArCQkvKiBJZ25vcmUgc3RydWN0dXJlcyB3aXRo
IHJlc2VydmVkIEJBUiB2YWx1ZXMgKi8KPiArCQlpZiAoYmFyID4gMHg1KQo+ICsJCQljb250aW51
ZTsKPiArCj4gKwkJaWYgKHR5cGUgPT0gY2ZnX3R5cGUpIHsKPiArCQkJaWYgKHBjaV9yZXNvdXJj
ZV9sZW4oZGV2LCBiYXIpICYmCj4gKwkJCSAgICBwY2lfcmVzb3VyY2VfZmxhZ3MoZGV2LCBiYXIp
ICYgaW9yZXNvdXJjZV90eXBlcykgewo+ICsJCQkJKmJhcnMgfD0gKDEgPDwgYmFyKTsKPiArCQkJ
CXJldHVybiBwb3M7Cj4gKwkJCX0KPiArCQl9Cj4gKwl9Cj4gKwlyZXR1cm4gMDsKPiArfQo+ICsK
PiArLyogVGhpcyBpcyBwYXJ0IG9mIHRoZSBBQkkuICBEb24ndCBzY3JldyB3aXRoIGl0LiAqLwo+
ICtzdGF0aWMgaW5saW5lIHZvaWQgY2hlY2tfb2Zmc2V0cyh2b2lkKQo+ICt7Cj4gKwkvKiBOb3Rl
OiBkaXNrIHNwYWNlIHdhcyBoYXJtZWQgaW4gY29tcGlsYXRpb24gb2YgdGhpcyBmdW5jdGlvbi4g
Ki8KPiArCUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NBUF9WTkRSICE9Cj4gKwkJICAgICBvZmZz
ZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jYXAsIGNhcF92bmRyKSk7Cj4gKwlCVUlMRF9CVUdfT04o
VklSVElPX1BDSV9DQVBfTkVYVCAhPQo+ICsJCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19w
Y2lfY2FwLCBjYXBfbmV4dCkpOwo+ICsJQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ0FQX0xFTiAh
PQo+ICsJCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY2FwLCBjYXBfbGVuKSk7Cj4g
KwlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DQVBfQ0ZHX1RZUEUgIT0KPiArCQkgICAgIG9mZnNl
dG9mKHN0cnVjdCB2aXJ0aW9fcGNpX2NhcCwgY2ZnX3R5cGUpKTsKPiArCUJVSUxEX0JVR19PTihW
SVJUSU9fUENJX0NBUF9CQVIgIT0KPiArCQkgICAgIG9mZnNldG9mKHN0cnVjdCB2aXJ0aW9fcGNp
X2NhcCwgYmFyKSk7Cj4gKwlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DQVBfT0ZGU0VUICE9Cj4g
KwkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jYXAsIG9mZnNldCkpOwo+ICsJQlVJ
TERfQlVHX09OKFZJUlRJT19QQ0lfQ0FQX0xFTkdUSCAhPQo+ICsJCSAgICAgb2Zmc2V0b2Yoc3Ry
dWN0IHZpcnRpb19wY2lfY2FwLCBsZW5ndGgpKTsKPiArCUJVSUxEX0JVR19PTihWSVJUSU9fUENJ
X05PVElGWV9DQVBfTVVMVCAhPQo+ICsJCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lf
bm90aWZ5X2NhcCwKPiArCQkJICAgICAgbm90aWZ5X29mZl9tdWx0aXBsaWVyKSk7Cj4gKwlCVUlM
RF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fREZTRUxFQ1QgIT0KPiArCQkgICAgIG9mZnNldG9m
KHN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcsCj4gKwkJCSAgICAgIGRldmljZV9mZWF0dXJl
X3NlbGVjdCkpOwo+ICsJQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX0RGICE9Cj4gKwkJ
ICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBkZXZpY2VfZmVhdHVy
ZSkpOwo+ICsJQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX0dGU0VMRUNUICE9Cj4gKwkJ
ICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLAo+ICsJCQkgICAgICBn
dWVzdF9mZWF0dXJlX3NlbGVjdCkpOwo+ICsJQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9O
X0dGICE9Cj4gKwkJICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBn
dWVzdF9mZWF0dXJlKSk7Cj4gKwlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fTVNJWCAh
PQo+ICsJCSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywgbXNpeF9j
b25maWcpKTsKPiArCUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NPTU1PTl9OVU1RICE9Cj4gKwkJ
ICAgICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBudW1fcXVldWVzKSk7
Cj4gKwlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fU1RBVFVTICE9Cj4gKwkJICAgICBv
ZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBkZXZpY2Vfc3RhdHVzKSk7Cj4g
KwlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fQ0ZHR0VORVJBVElPTiAhPQo+ICsJCSAg
ICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywgY29uZmlnX2dlbmVyYXRp
b24pKTsKPiArCUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NPTU1PTl9RX1NFTEVDVCAhPQo+ICsJ
CSAgICAgb2Zmc2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywgcXVldWVfc2VsZWN0
KSk7Cj4gKwlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fUV9TSVpFICE9Cj4gKwkJICAg
ICBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV9zaXplKSk7Cj4g
KwlCVUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fUV9NU0lYICE9Cj4gKwkJICAgICBvZmZz
ZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV9tc2l4X3ZlY3RvcikpOwo+
ICsJQlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX1FfRU5BQkxFICE9Cj4gKwkJICAgICBv
ZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV9lbmFibGUpKTsKPiAr
CUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NPTU1PTl9RX05PRkYgIT0KPiArCQkgICAgIG9mZnNl
dG9mKHN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcsIHF1ZXVlX25vdGlmeV9vZmYpKTsKPiAr
CUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NPTU1PTl9RX0RFU0NMTyAhPQo+ICsJCSAgICAgb2Zm
c2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywgcXVldWVfZGVzY19sbykpOwo+ICsJ
QlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX1FfREVTQ0hJICE9Cj4gKwkJICAgICBvZmZz
ZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV9kZXNjX2hpKSk7Cj4gKwlC
VUlMRF9CVUdfT04oVklSVElPX1BDSV9DT01NT05fUV9BVkFJTExPICE9Cj4gKwkJICAgICBvZmZz
ZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV9hdmFpbF9sbykpOwo+ICsJ
QlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX1FfQVZBSUxISSAhPQo+ICsJCSAgICAgb2Zm
c2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywgcXVldWVfYXZhaWxfaGkpKTsKPiAr
CUJVSUxEX0JVR19PTihWSVJUSU9fUENJX0NPTU1PTl9RX1VTRURMTyAhPQo+ICsJCSAgICAgb2Zm
c2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZywgcXVldWVfdXNlZF9sbykpOwo+ICsJ
QlVJTERfQlVHX09OKFZJUlRJT19QQ0lfQ09NTU9OX1FfVVNFREhJICE9Cj4gKwkJICAgICBvZmZz
ZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnLCBxdWV1ZV91c2VkX2hpKSk7Cj4gK30K
PiArCj4gKy8qCj4gKyAqIHZwX21vZGVybl9wcm9iZTogcHJvYmUgdGhlIG1vZGVybiB2aXJ0aW8g
cGNpIGRldmljZSwgbm90ZSB0aGF0IHRoZQo+ICsgKiBjYWxsZXIgaXMgcmVxdWlyZWQgdG8gZW5h
YmxlIFBDSSBkZXZpY2UgYmVmb3JlIGNhbGxpbmcgdGhpcyBmdW5jdGlvbi4KPiArICogQG1kZXY6
IHRoZSBtb2Rlcm4gdmlydGlvLXBjaSBkZXZpY2UKPiArICoKPiArICogUmV0dXJuIDAgb24gc3Vj
Y2VlZCBvdGhlcndpc2UgZmFpbAo+ICsgKi8KPiAraW50IHZwX21vZGVybl9wcm9iZShzdHJ1Y3Qg
dmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2KQo+ICt7Cj4gKwlzdHJ1Y3QgcGNpX2RldiAq
cGNpX2RldiA9IG1kZXYtPnBjaV9kZXY7Cj4gKwlpbnQgZXJyLCBjb21tb24sIGlzciwgbm90aWZ5
LCBkZXZpY2U7Cj4gKwl1MzIgbm90aWZ5X2xlbmd0aDsKPiArCXUzMiBub3RpZnlfb2Zmc2V0Owo+
ICsKPiArCWNoZWNrX29mZnNldHMoKTsKPiArCj4gKwltZGV2LT5wY2lfZGV2ID0gcGNpX2RldjsK
PiArCj4gKwkvKiBXZSBvbmx5IG93biBkZXZpY2VzID49IDB4MTAwMCBhbmQgPD0gMHgxMDdmOiBs
ZWF2ZSB0aGUgcmVzdC4gKi8KPiArCWlmIChwY2lfZGV2LT5kZXZpY2UgPCAweDEwMDAgfHwgcGNp
X2Rldi0+ZGV2aWNlID4gMHgxMDdmKQo+ICsJCXJldHVybiAtRU5PREVWOwo+ICsKPiArCWlmIChw
Y2lfZGV2LT5kZXZpY2UgPCAweDEwNDApIHsKPiArCQkvKiBUcmFuc2l0aW9uYWwgZGV2aWNlczog
dXNlIHRoZSBQQ0kgc3Vic3lzdGVtIGRldmljZSBpZCBhcwo+ICsJCSAqIHZpcnRpbyBkZXZpY2Ug
aWQsIHNhbWUgYXMgbGVnYWN5IGRyaXZlciBhbHdheXMgZGlkLgo+ICsJCSAqLwo+ICsJCW1kZXYt
PmlkLmRldmljZSA9IHBjaV9kZXYtPnN1YnN5c3RlbV9kZXZpY2U7Cj4gKwl9IGVsc2Ugewo+ICsJ
CS8qIE1vZGVybiBkZXZpY2VzOiBzaW1wbHkgdXNlIFBDSSBkZXZpY2UgaWQsIGJ1dCBzdGFydCBm
cm9tIDB4MTA0MC4gKi8KPiArCQltZGV2LT5pZC5kZXZpY2UgPSBwY2lfZGV2LT5kZXZpY2UgLSAw
eDEwNDA7Cj4gKwl9Cj4gKwltZGV2LT5pZC52ZW5kb3IgPSBwY2lfZGV2LT5zdWJzeXN0ZW1fdmVu
ZG9yOwo+ICsKPiArCS8qIGNoZWNrIGZvciBhIGNvbW1vbiBjb25maWc6IGlmIG5vdCwgdXNlIGxl
Z2FjeSBtb2RlIChiYXIgMCkuICovCj4gKwljb21tb24gPSB2aXJ0aW9fcGNpX2ZpbmRfY2FwYWJp
bGl0eShwY2lfZGV2LCBWSVJUSU9fUENJX0NBUF9DT01NT05fQ0ZHLAo+ICsJCQkJCSAgICBJT1JF
U09VUkNFX0lPIHwgSU9SRVNPVVJDRV9NRU0sCj4gKwkJCQkJICAgICZtZGV2LT5tb2Rlcm5fYmFy
cyk7Cj4gKwlpZiAoIWNvbW1vbikgewo+ICsJCWRldl9pbmZvKCZwY2lfZGV2LT5kZXYsCj4gKwkJ
CSAidmlydGlvX3BjaTogbGVhdmluZyBmb3IgbGVnYWN5IGRyaXZlclxuIik7Cj4gKwkJcmV0dXJu
IC1FTk9ERVY7Cj4gKwl9Cj4gKwo+ICsJLyogSWYgY29tbW9uIGlzIHRoZXJlLCB0aGVzZSBzaG91
bGQgYmUgdG9vLi4uICovCj4gKwlpc3IgPSB2aXJ0aW9fcGNpX2ZpbmRfY2FwYWJpbGl0eShwY2lf
ZGV2LCBWSVJUSU9fUENJX0NBUF9JU1JfQ0ZHLAo+ICsJCQkJCSBJT1JFU09VUkNFX0lPIHwgSU9S
RVNPVVJDRV9NRU0sCj4gKwkJCQkJICZtZGV2LT5tb2Rlcm5fYmFycyk7Cj4gKwlub3RpZnkgPSB2
aXJ0aW9fcGNpX2ZpbmRfY2FwYWJpbGl0eShwY2lfZGV2LCBWSVJUSU9fUENJX0NBUF9OT1RJRllf
Q0ZHLAo+ICsJCQkJCSAgICBJT1JFU09VUkNFX0lPIHwgSU9SRVNPVVJDRV9NRU0sCj4gKwkJCQkJ
ICAgICZtZGV2LT5tb2Rlcm5fYmFycyk7Cj4gKwlpZiAoIWlzciB8fCAhbm90aWZ5KSB7Cj4gKwkJ
ZGV2X2VycigmcGNpX2Rldi0+ZGV2LAo+ICsJCQkidmlydGlvX3BjaTogbWlzc2luZyBjYXBhYmls
aXRpZXMgJWkvJWkvJWlcbiIsCj4gKwkJCWNvbW1vbiwgaXNyLCBub3RpZnkpOwo+ICsJCXJldHVy
biAtRUlOVkFMOwo+ICsJfQo+ICsKPiArCWVyciA9IGRtYV9zZXRfbWFza19hbmRfY29oZXJlbnQo
JnBjaV9kZXYtPmRldiwgRE1BX0JJVF9NQVNLKDY0KSk7Cj4gKwlpZiAoZXJyKQo+ICsJCWVyciA9
IGRtYV9zZXRfbWFza19hbmRfY29oZXJlbnQoJnBjaV9kZXYtPmRldiwKPiArCQkJCQkJRE1BX0JJ
VF9NQVNLKDMyKSk7Cj4gKwlpZiAoZXJyKQo+ICsJCWRldl93YXJuKCZwY2lfZGV2LT5kZXYsICJG
YWlsZWQgdG8gZW5hYmxlIDY0LWJpdCBvciAzMi1iaXQgRE1BLiAgVHJ5aW5nIHRvIGNvbnRpbnVl
LCBidXQgdGhpcyBtaWdodCBub3Qgd29yay5cbiIpOwo+ICsKPiArCS8qIERldmljZSBjYXBhYmls
aXR5IGlzIG9ubHkgbWFuZGF0b3J5IGZvciBkZXZpY2VzIHRoYXQgaGF2ZQo+ICsJICogZGV2aWNl
LXNwZWNpZmljIGNvbmZpZ3VyYXRpb24uCj4gKwkgKi8KPiArCWRldmljZSA9IHZpcnRpb19wY2lf
ZmluZF9jYXBhYmlsaXR5KHBjaV9kZXYsIFZJUlRJT19QQ0lfQ0FQX0RFVklDRV9DRkcsCj4gKwkJ
CQkJICAgIElPUkVTT1VSQ0VfSU8gfCBJT1JFU09VUkNFX01FTSwKPiArCQkJCQkgICAgJm1kZXYt
Pm1vZGVybl9iYXJzKTsKPiArCj4gKwllcnIgPSBwY2lfcmVxdWVzdF9zZWxlY3RlZF9yZWdpb25z
KHBjaV9kZXYsIG1kZXYtPm1vZGVybl9iYXJzLAo+ICsJCQkJCSAgICJ2aXJ0aW8tcGNpLW1vZGVy
biIpOwo+ICsJaWYgKGVycikKPiArCQlyZXR1cm4gZXJyOwo+ICsKPiArCWVyciA9IC1FSU5WQUw7
Cj4gKwltZGV2LT5jb21tb24gPSB2cF9tb2Rlcm5fbWFwX2NhcGFiaWxpdHkobWRldiwgY29tbW9u
LAo+ICsJCQkJICAgICAgc2l6ZW9mKHN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcpLCA0LAo+
ICsJCQkJICAgICAgMCwgc2l6ZW9mKHN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcpLAo+ICsJ
CQkJICAgICAgTlVMTCk7Cj4gKwlpZiAoIW1kZXYtPmNvbW1vbikKPiArCQlnb3RvIGVycl9tYXBf
Y29tbW9uOwo+ICsJbWRldi0+aXNyID0gdnBfbW9kZXJuX21hcF9jYXBhYmlsaXR5KG1kZXYsIGlz
ciwgc2l6ZW9mKHU4KSwgMSwKPiArCQkJCQkgICAgIDAsIDEsCj4gKwkJCQkJICAgICBOVUxMKTsK
PiArCWlmICghbWRldi0+aXNyKQo+ICsJCWdvdG8gZXJyX21hcF9pc3I7Cj4gKwo+ICsJLyogUmVh
ZCBub3RpZnlfb2ZmX211bHRpcGxpZXIgZnJvbSBjb25maWcgc3BhY2UuICovCj4gKwlwY2lfcmVh
ZF9jb25maWdfZHdvcmQocGNpX2RldiwKPiArCQkJICAgICAgbm90aWZ5ICsgb2Zmc2V0b2Yoc3Ry
dWN0IHZpcnRpb19wY2lfbm90aWZ5X2NhcCwKPiArCQkJCQkJbm90aWZ5X29mZl9tdWx0aXBsaWVy
KSwKPiArCQkJICAgICAgJm1kZXYtPm5vdGlmeV9vZmZzZXRfbXVsdGlwbGllcik7Cj4gKwkvKiBS
ZWFkIG5vdGlmeSBsZW5ndGggYW5kIG9mZnNldCBmcm9tIGNvbmZpZyBzcGFjZS4gKi8KPiArCXBj
aV9yZWFkX2NvbmZpZ19kd29yZChwY2lfZGV2LAo+ICsJCQkgICAgICBub3RpZnkgKyBvZmZzZXRv
ZihzdHJ1Y3QgdmlydGlvX3BjaV9ub3RpZnlfY2FwLAo+ICsJCQkJCQljYXAubGVuZ3RoKSwKPiAr
CQkJICAgICAgJm5vdGlmeV9sZW5ndGgpOwo+ICsKPiArCXBjaV9yZWFkX2NvbmZpZ19kd29yZChw
Y2lfZGV2LAo+ICsJCQkgICAgICBub3RpZnkgKyBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9u
b3RpZnlfY2FwLAo+ICsJCQkJCQljYXAub2Zmc2V0KSwKPiArCQkJICAgICAgJm5vdGlmeV9vZmZz
ZXQpOwo+ICsKPiArCS8qIFdlIGRvbid0IGtub3cgaG93IG1hbnkgVlFzIHdlJ2xsIG1hcCwgYWhl
YWQgb2YgdGhlIHRpbWUuCj4gKwkgKiBJZiBub3RpZnkgbGVuZ3RoIGlzIHNtYWxsLCBtYXAgaXQg
YWxsIG5vdy4KPiArCSAqIE90aGVyd2lzZSwgbWFwIGVhY2ggVlEgaW5kaXZpZHVhbGx5IGxhdGVy
Lgo+ICsJICovCj4gKwlpZiAoKHU2NClub3RpZnlfbGVuZ3RoICsgKG5vdGlmeV9vZmZzZXQgJSBQ
QUdFX1NJWkUpIDw9IFBBR0VfU0laRSkgewo+ICsJCW1kZXYtPm5vdGlmeV9iYXNlID0gdnBfbW9k
ZXJuX21hcF9jYXBhYmlsaXR5KG1kZXYsIG5vdGlmeSwKPiArCQkJCQkJCSAgICAgMiwgMiwKPiAr
CQkJCQkJCSAgICAgMCwgbm90aWZ5X2xlbmd0aCwKPiArCQkJCQkJCSAgICAgJm1kZXYtPm5vdGlm
eV9sZW4pOwo+ICsJCWlmICghbWRldi0+bm90aWZ5X2Jhc2UpCj4gKwkJCWdvdG8gZXJyX21hcF9u
b3RpZnk7Cj4gKwl9IGVsc2Ugewo+ICsJCW1kZXYtPm5vdGlmeV9tYXBfY2FwID0gbm90aWZ5Owo+
ICsJfQo+ICsKPiArCS8qIEFnYWluLCB3ZSBkb24ndCBrbm93IGhvdyBtdWNoIHdlIHNob3VsZCBt
YXAsIGJ1dCBQQUdFX1NJWkUKPiArCSAqIGlzIG1vcmUgdGhhbiBlbm91Z2ggZm9yIGFsbCBleGlz
dGluZyBkZXZpY2VzLgo+ICsJICovCj4gKwlpZiAoZGV2aWNlKSB7Cj4gKwkJbWRldi0+ZGV2aWNl
ID0gdnBfbW9kZXJuX21hcF9jYXBhYmlsaXR5KG1kZXYsIGRldmljZSwgMCwgNCwKPiArCQkJCQkJ
CTAsIFBBR0VfU0laRSwKPiArCQkJCQkJCSZtZGV2LT5kZXZpY2VfbGVuKTsKPiArCQlpZiAoIW1k
ZXYtPmRldmljZSkKPiArCQkJZ290byBlcnJfbWFwX2RldmljZTsKPiArCX0KPiArCj4gKwlyZXR1
cm4gMDsKPiArCj4gK2Vycl9tYXBfZGV2aWNlOgo+ICsJaWYgKG1kZXYtPm5vdGlmeV9iYXNlKQo+
ICsJCXBjaV9pb3VubWFwKHBjaV9kZXYsIG1kZXYtPm5vdGlmeV9iYXNlKTsKPiArZXJyX21hcF9u
b3RpZnk6Cj4gKwlwY2lfaW91bm1hcChwY2lfZGV2LCBtZGV2LT5pc3IpOwo+ICtlcnJfbWFwX2lz
cjoKPiArCXBjaV9pb3VubWFwKHBjaV9kZXYsIG1kZXYtPmNvbW1vbik7Cj4gK2Vycl9tYXBfY29t
bW9uOgo+ICsJcmV0dXJuIGVycjsKPiArfQo+ICtFWFBPUlRfU1lNQk9MX0dQTCh2cF9tb2Rlcm5f
cHJvYmUpOwo+ICsKPiArLyoKPiArICogdnBfbW9kZXJuX3Byb2JlOiByZW1vdmUgYW5kIGNsZWFu
dXAgdGhlIG1vZGVybiB2aXJ0aW8gcGNpIGRldmljZQo+ICsgKiBAbWRldjogdGhlIG1vZGVybiB2
aXJ0aW8tcGNpIGRldmljZQo+ICsgKi8KPiArdm9pZCB2cF9tb2Rlcm5fcmVtb3ZlKHN0cnVjdCB2
aXJ0aW9fcGNpX21vZGVybl9kZXZpY2UgKm1kZXYpCj4gK3sKPiArCXN0cnVjdCBwY2lfZGV2ICpw
Y2lfZGV2ID0gbWRldi0+cGNpX2RldjsKPiArCj4gKwlpZiAobWRldi0+ZGV2aWNlKQo+ICsJCXBj
aV9pb3VubWFwKHBjaV9kZXYsIG1kZXYtPmRldmljZSk7Cj4gKwlpZiAobWRldi0+bm90aWZ5X2Jh
c2UpCj4gKwkJcGNpX2lvdW5tYXAocGNpX2RldiwgbWRldi0+bm90aWZ5X2Jhc2UpOwo+ICsJcGNp
X2lvdW5tYXAocGNpX2RldiwgbWRldi0+aXNyKTsKPiArCXBjaV9pb3VubWFwKHBjaV9kZXYsIG1k
ZXYtPmNvbW1vbik7Cj4gKwlwY2lfcmVsZWFzZV9zZWxlY3RlZF9yZWdpb25zKHBjaV9kZXYsIG1k
ZXYtPm1vZGVybl9iYXJzKTsKPiArfQo+ICtFWFBPUlRfU1lNQk9MX0dQTCh2cF9tb2Rlcm5fcmVt
b3ZlKTsKPiArCj4gKy8qCj4gKyAqIHZwX21vZGVybl9nZXRfZmVhdHVyZXMgLSBnZXQgZmVhdHVy
ZXMgZnJvbSBkZXZpY2UKPiArICogQG1kZXY6IHRoZSBtb2Rlcm4gdmlydGlvLXBjaSBkZXZpY2UK
PiArICoKPiArICogUmV0dXJucyB0aGUgZmVhdHVyZXMgcmVhZCBmcm9tIHRoZSBkZXZpY2UKPiAr
ICovCj4gK3U2NCB2cF9tb2Rlcm5fZ2V0X2ZlYXR1cmVzKHN0cnVjdCB2aXJ0aW9fcGNpX21vZGVy
bl9kZXZpY2UgKm1kZXYpCj4gK3sKPiArCXN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcgX19p
b21lbSAqY2ZnID0gbWRldi0+Y29tbW9uOwo+ICsKPiArCXU2NCBmZWF0dXJlczsKPiArCj4gKwl2
cF9pb3dyaXRlMzIoMCwgJmNmZy0+ZGV2aWNlX2ZlYXR1cmVfc2VsZWN0KTsKPiArCWZlYXR1cmVz
ID0gdnBfaW9yZWFkMzIoJmNmZy0+ZGV2aWNlX2ZlYXR1cmUpOwo+ICsJdnBfaW93cml0ZTMyKDEs
ICZjZmctPmRldmljZV9mZWF0dXJlX3NlbGVjdCk7Cj4gKwlmZWF0dXJlcyB8PSAoKHU2NCl2cF9p
b3JlYWQzMigmY2ZnLT5kZXZpY2VfZmVhdHVyZSkgPDwgMzIpOwo+ICsKPiArCXJldHVybiBmZWF0
dXJlczsKPiArfQo+ICtFWFBPUlRfU1lNQk9MX0dQTCh2cF9tb2Rlcm5fZ2V0X2ZlYXR1cmVzKTsK
PiArCj4gKy8qCj4gKyAqIHZwX21vZGVybl9zZXRfZmVhdHVyZXMgLSBzZXQgZmVhdHVyZXMgdG8g
ZGV2aWNlCj4gKyAqIEBtZGV2OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kgZGV2aWNlCj4gKyAqIEBm
ZWF0dXJlczogdGhlIGZlYXR1cmVzIHNldCB0byBkZXZpY2UKPiArICovCj4gK3ZvaWQgdnBfbW9k
ZXJuX3NldF9mZWF0dXJlcyhzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2LAo+
ICsJCQkgICAgdTY0IGZlYXR1cmVzKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25f
Y2ZnIF9faW9tZW0gKmNmZyA9IG1kZXYtPmNvbW1vbjsKPiArCj4gKwl2cF9pb3dyaXRlMzIoMCwg
JmNmZy0+Z3Vlc3RfZmVhdHVyZV9zZWxlY3QpOwo+ICsJdnBfaW93cml0ZTMyKCh1MzIpZmVhdHVy
ZXMsICZjZmctPmd1ZXN0X2ZlYXR1cmUpOwo+ICsJdnBfaW93cml0ZTMyKDEsICZjZmctPmd1ZXN0
X2ZlYXR1cmVfc2VsZWN0KTsKPiArCXZwX2lvd3JpdGUzMihmZWF0dXJlcyA+PiAzMiwgJmNmZy0+
Z3Vlc3RfZmVhdHVyZSk7Cj4gK30KPiArRVhQT1JUX1NZTUJPTF9HUEwodnBfbW9kZXJuX3NldF9m
ZWF0dXJlcyk7Cj4gKwo+ICsvKgo+ICsgKiB2cF9tb2Rlcm5fZ2VuZXJhdGlvbiAtIGdldCB0aGUg
ZGV2aWNlIGdlbnJlYXRpb24KPiArICogQG1kZXY6IHRoZSBtb2Rlcm4gdmlydGlvLXBjaSBkZXZp
Y2UKPiArICoKPiArICogUmV0dXJucyB0aGUgZ2VucmVhdGlvbiByZWFkIGZyb20gZGV2aWNlCj4g
KyAqLwo+ICt1MzIgdnBfbW9kZXJuX2dlbmVyYXRpb24oc3RydWN0IHZpcnRpb19wY2lfbW9kZXJu
X2RldmljZSAqbWRldikKPiArewo+ICsJc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZyBfX2lv
bWVtICpjZmcgPSBtZGV2LT5jb21tb247Cj4gKwo+ICsJcmV0dXJuIHZwX2lvcmVhZDgoJmNmZy0+
Y29uZmlnX2dlbmVyYXRpb24pOwo+ICt9Cj4gK0VYUE9SVF9TWU1CT0xfR1BMKHZwX21vZGVybl9n
ZW5lcmF0aW9uKTsKPiArCj4gKy8qCj4gKyAqIHZwX21vZGVybl9nZXRfc3RhdHVzIC0gZ2V0IHRo
ZSBkZXZpY2Ugc3RhdHVzCj4gKyAqIEBtZGV2OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kgZGV2aWNl
Cj4gKyAqCj4gKyAqIFJldHVybnMgdGhlIHN0YXR1cyByZWFkIGZyb20gZGV2aWNlCj4gKyAqLwo+
ICt1OCB2cF9tb2Rlcm5fZ2V0X3N0YXR1cyhzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNl
ICptZGV2KQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnIF9faW9tZW0gKmNm
ZyA9IG1kZXYtPmNvbW1vbjsKPiArCj4gKwlyZXR1cm4gdnBfaW9yZWFkOCgmY2ZnLT5kZXZpY2Vf
c3RhdHVzKTsKPiArfQo+ICtFWFBPUlRfU1lNQk9MX0dQTCh2cF9tb2Rlcm5fZ2V0X3N0YXR1cyk7
Cj4gKwo+ICsvKgo+ICsgKiB2cF9tb2Rlcm5fc2V0X3N0YXR1cyAtIHNldCBzdGF0dXMgdG8gZGV2
aWNlCj4gKyAqIEBtZGV2OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kgZGV2aWNlCj4gKyAqIEBzdGF0
dXM6IHRoZSBzdGF0dXMgc2V0IHRvIGRldmljZQo+ICsgKi8KPiArdm9pZCB2cF9tb2Rlcm5fc2V0
X3N0YXR1cyhzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2LAo+ICsJCQkJIHU4
IHN0YXR1cykKPiArewo+ICsJc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZyBfX2lvbWVtICpj
ZmcgPSBtZGV2LT5jb21tb247Cj4gKwo+ICsJdnBfaW93cml0ZTgoc3RhdHVzLCAmY2ZnLT5kZXZp
Y2Vfc3RhdHVzKTsKPiArfQo+ICtFWFBPUlRfU1lNQk9MX0dQTCh2cF9tb2Rlcm5fc2V0X3N0YXR1
cyk7Cj4gKwo+ICsvKgo+ICsgKiB2cF9tb2Rlcm5fcXVldWVfdmVjdG9yIC0gc2V0IHRoZSBNU0lY
IHZlY3RvciBmb3IgYSBzcGVjaWZpYyB2aXJ0cXVldWUKPiArICogQG1kZXY6IHRoZSBtb2Rlcm4g
dmlydGlvLXBjaSBkZXZpY2UKPiArICogQGluZGV4OiBxdWV1ZSBpbmRleAo+ICsgKiBAdmVjdG9y
OiB0aGUgY29uZmlnIHZlY3Rvcgo+ICsgKgo+ICsgKiBSZXR1cm5zIHRoZSBjb25maWcgdmVjdG9y
IHJlYWQgZnJvbSB0aGUgZGV2aWNlCj4gKyAqLwo+ICt1MTYgdnBfbW9kZXJuX3F1ZXVlX3ZlY3Rv
cihzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2LAo+ICsJCQkgICB1MTYgaW5k
ZXgsIHUxNiB2ZWN0b3IpCj4gK3sKPiArCXN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcgX19p
b21lbSAqY2ZnID0gbWRldi0+Y29tbW9uOwo+ICsKPiArCXZwX2lvd3JpdGUxNihpbmRleCwgJmNm
Zy0+cXVldWVfc2VsZWN0KTsKPiArCXZwX2lvd3JpdGUxNih2ZWN0b3IsICZjZmctPnF1ZXVlX21z
aXhfdmVjdG9yKTsKPiArCS8qIEZsdXNoIHRoZSB3cml0ZSBvdXQgdG8gZGV2aWNlICovCj4gKwly
ZXR1cm4gdnBfaW9yZWFkMTYoJmNmZy0+cXVldWVfbXNpeF92ZWN0b3IpOwo+ICt9Cj4gK0VYUE9S
VF9TWU1CT0xfR1BMKHZwX21vZGVybl9xdWV1ZV92ZWN0b3IpOwo+ICsKPiArLyoKPiArICogdnBf
bW9kZXJuX2NvbmZpZ192ZWN0b3IgLSBzZXQgdGhlIHZlY3RvciBmb3IgY29uZmlnIGludGVycnVw
dAo+ICsgKiBAbWRldjogdGhlIG1vZGVybiB2aXJ0aW8tcGNpIGRldmljZQo+ICsgKiBAdmVjdG9y
OiB0aGUgY29uZmlnIHZlY3Rvcgo+ICsgKgo+ICsgKiBSZXR1cm5zIHRoZSBjb25maWcgdmVjdG9y
IHJlYWQgZnJvbSB0aGUgZGV2aWNlCj4gKyAqLwo+ICt1MTYgdnBfbW9kZXJuX2NvbmZpZ192ZWN0
b3Ioc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiwKPiArCQkJICAgIHUxNiB2
ZWN0b3IpCj4gK3sKPiArCXN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcgX19pb21lbSAqY2Zn
ID0gbWRldi0+Y29tbW9uOwo+ICsKPiArCS8qIFNldHVwIHRoZSB2ZWN0b3IgdXNlZCBmb3IgY29u
ZmlndXJhdGlvbiBldmVudHMgKi8KPiArCXZwX2lvd3JpdGUxNih2ZWN0b3IsICZjZmctPm1zaXhf
Y29uZmlnKTsKPiArCS8qIFZlcmlmeSB3ZSBoYWQgZW5vdWdoIHJlc291cmNlcyB0byBhc3NpZ24g
dGhlIHZlY3RvciAqLwo+ICsJLyogV2lsbCBhbHNvIGZsdXNoIHRoZSB3cml0ZSBvdXQgdG8gZGV2
aWNlICovCj4gKwlyZXR1cm4gdnBfaW9yZWFkMTYoJmNmZy0+bXNpeF9jb25maWcpOwo+ICt9Cj4g
K0VYUE9SVF9TWU1CT0xfR1BMKHZwX21vZGVybl9jb25maWdfdmVjdG9yKTsKPiArCj4gKy8qCj4g
KyAqIHZwX21vZGVybl9xdWV1ZV9hZGRyZXNzIC0gc2V0IHRoZSB2aXJ0cXVldWUgYWRkcmVzcwo+
ICsgKiBAbWRldjogdGhlIG1vZGVybiB2aXJ0aW8tcGNpIGRldmljZQo+ICsgKiBAaW5kZXg6IHRo
ZSBxdWV1ZSBpbmRleAo+ICsgKiBAZGVzY19hZGRyOiBhZGRyZXNzIG9mIHRoZSBkZXNjcmlwdG9y
IGFyZWEKPiArICogQGRyaXZlcl9hZGRyOiBhZGRyZXNzIG9mIHRoZSBkcml2ZXIgYXJlYQo+ICsg
KiBAZGV2aWNlX2FkZHI6IGFkZHJlc3Mgb2YgdGhlIGRldmljZSBhcmVhCj4gKyAqLwo+ICt2b2lk
IHZwX21vZGVybl9xdWV1ZV9hZGRyZXNzKHN0cnVjdCB2aXJ0aW9fcGNpX21vZGVybl9kZXZpY2Ug
Km1kZXYsCj4gKwkJCSAgICAgdTE2IGluZGV4LCB1NjQgZGVzY19hZGRyLCB1NjQgZHJpdmVyX2Fk
ZHIsCj4gKwkJCSAgICAgdTY0IGRldmljZV9hZGRyKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlvX3Bj
aV9jb21tb25fY2ZnIF9faW9tZW0gKmNmZyA9IG1kZXYtPmNvbW1vbjsKPiArCj4gKwl2cF9pb3dy
aXRlMTYoaW5kZXgsICZjZmctPnF1ZXVlX3NlbGVjdCk7Cj4gKwo+ICsJdnBfaW93cml0ZTY0X3R3
b3BhcnQoZGVzY19hZGRyLCAmY2ZnLT5xdWV1ZV9kZXNjX2xvLAo+ICsJCQkgICAgICZjZmctPnF1
ZXVlX2Rlc2NfaGkpOwo+ICsJdnBfaW93cml0ZTY0X3R3b3BhcnQoZHJpdmVyX2FkZHIsICZjZmct
PnF1ZXVlX2F2YWlsX2xvLAo+ICsJCQkgICAgICZjZmctPnF1ZXVlX2F2YWlsX2hpKTsKPiArCXZw
X2lvd3JpdGU2NF90d29wYXJ0KGRldmljZV9hZGRyLCAmY2ZnLT5xdWV1ZV91c2VkX2xvLAo+ICsJ
CQkgICAgICZjZmctPnF1ZXVlX3VzZWRfaGkpOwo+ICt9Cj4gK0VYUE9SVF9TWU1CT0xfR1BMKHZw
X21vZGVybl9xdWV1ZV9hZGRyZXNzKTsKPiArCj4gKy8qCj4gKyAqIHZwX21vZGVybl9zZXRfcXVl
dWVfZW5hYmxlIC0gZW5hYmxlIGEgdmlydHF1ZXVlCj4gKyAqIEBtZGV2OiB0aGUgbW9kZXJuIHZp
cnRpby1wY2kgZGV2aWNlCj4gKyAqIEBpbmRleDogdGhlIHF1ZXVlIGluZGV4Cj4gKyAqIEBlbmFi
bGU6IHdoZXRoZXIgdGhlIHZpcnRxdWV1ZSBpcyBlbmFibGUgb3Igbm90Cj4gKyAqLwo+ICt2b2lk
IHZwX21vZGVybl9zZXRfcXVldWVfZW5hYmxlKHN0cnVjdCB2aXJ0aW9fcGNpX21vZGVybl9kZXZp
Y2UgKm1kZXYsCj4gKwkJCQl1MTYgaW5kZXgsIGJvb2wgZW5hYmxlKQo+ICt7Cj4gKwl2cF9pb3dy
aXRlMTYoaW5kZXgsICZtZGV2LT5jb21tb24tPnF1ZXVlX3NlbGVjdCk7Cj4gKwl2cF9pb3dyaXRl
MTYoZW5hYmxlLCAmbWRldi0+Y29tbW9uLT5xdWV1ZV9lbmFibGUpOwo+ICt9Cj4gK0VYUE9SVF9T
WU1CT0xfR1BMKHZwX21vZGVybl9zZXRfcXVldWVfZW5hYmxlKTsKPiArCj4gKy8qCj4gKyAqIHZw
X21vZGVybl9nZXRfcXVldWVfZW5hYmxlIC0gZW5hYmxlIGEgdmlydHF1ZXVlCj4gKyAqIEBtZGV2
OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kgZGV2aWNlCj4gKyAqIEBpbmRleDogdGhlIHF1ZXVlIGlu
ZGV4Cj4gKyAqCj4gKyAqIFJldHVybnMgd2hldGhlciBhIHZpcnRxdWV1ZSBpcyBlbmFibGVkIG9y
IG5vdAo+ICsgKi8KPiArYm9vbCB2cF9tb2Rlcm5fZ2V0X3F1ZXVlX2VuYWJsZShzdHJ1Y3Qgdmly
dGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2LAo+ICsJCQkJdTE2IGluZGV4KQo+ICt7Cj4gKwl2
cF9pb3dyaXRlMTYoaW5kZXgsICZtZGV2LT5jb21tb24tPnF1ZXVlX3NlbGVjdCk7Cj4gKwo+ICsJ
cmV0dXJuIHZwX2lvcmVhZDE2KCZtZGV2LT5jb21tb24tPnF1ZXVlX2VuYWJsZSk7Cj4gK30KPiAr
RVhQT1JUX1NZTUJPTF9HUEwodnBfbW9kZXJuX2dldF9xdWV1ZV9lbmFibGUpOwo+ICsKPiArLyoK
PiArICogdnBfbW9kZXJuX3NldF9xdWV1ZV9zaXplIC0gc2V0IHNpemUgZm9yIGEgdmlydHF1ZXVl
Cj4gKyAqIEBtZGV2OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kgZGV2aWNlCj4gKyAqIEBpbmRleDog
dGhlIHF1ZXVlIGluZGV4Cj4gKyAqIEBzaXplOiB0aGUgc2l6ZSBvZiB0aGUgdmlydHF1ZXVlCj4g
KyAqLwo+ICt2b2lkIHZwX21vZGVybl9zZXRfcXVldWVfc2l6ZShzdHJ1Y3QgdmlydGlvX3BjaV9t
b2Rlcm5fZGV2aWNlICptZGV2LAo+ICsJCQkgICAgICB1MTYgaW5kZXgsIHUxNiBzaXplKQo+ICt7
Cj4gKwl2cF9pb3dyaXRlMTYoaW5kZXgsICZtZGV2LT5jb21tb24tPnF1ZXVlX3NlbGVjdCk7Cj4g
Kwl2cF9pb3dyaXRlMTYoc2l6ZSwgJm1kZXYtPmNvbW1vbi0+cXVldWVfc2l6ZSk7Cj4gKwo+ICt9
Cj4gK0VYUE9SVF9TWU1CT0xfR1BMKHZwX21vZGVybl9zZXRfcXVldWVfc2l6ZSk7Cj4gKwo+ICsv
Kgo+ICsgKiB2cF9tb2Rlcm5fZ2V0X3F1ZXVlX3NpemUgLSBnZXQgc2l6ZSBmb3IgYSB2aXJ0cXVl
dWUKPiArICogQG1kZXY6IHRoZSBtb2Rlcm4gdmlydGlvLXBjaSBkZXZpY2UKPiArICogQGluZGV4
OiB0aGUgcXVldWUgaW5kZXgKPiArICoKPiArICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgdmly
dHF1ZXVlCj4gKyAqLwo+ICt1MTYgdnBfbW9kZXJuX2dldF9xdWV1ZV9zaXplKHN0cnVjdCB2aXJ0
aW9fcGNpX21vZGVybl9kZXZpY2UgKm1kZXYsCj4gKwkJCSAgICAgdTE2IGluZGV4KQo+ICt7Cj4g
Kwl2cF9pb3dyaXRlMTYoaW5kZXgsICZtZGV2LT5jb21tb24tPnF1ZXVlX3NlbGVjdCk7Cj4gKwo+
ICsJcmV0dXJuIHZwX2lvcmVhZDE2KCZtZGV2LT5jb21tb24tPnF1ZXVlX3NpemUpOwo+ICsKPiAr
fQo+ICtFWFBPUlRfU1lNQk9MX0dQTCh2cF9tb2Rlcm5fZ2V0X3F1ZXVlX3NpemUpOwo+ICsKPiAr
LyoKPiArICogdnBfbW9kZXJuX2dldF9udW1fcXVldWVzIC0gZ2V0IHRoZSBudW1iZXIgb2Ygdmly
dHF1ZXVlcwo+ICsgKiBAbWRldjogdGhlIG1vZGVybiB2aXJ0aW8tcGNpIGRldmljZQo+ICsgKgo+
ICsgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdmlydHF1ZXVlcwo+ICsgKi8KPiArdTE2IHZwX21v
ZGVybl9nZXRfbnVtX3F1ZXVlcyhzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2
KQo+ICt7Cj4gKwlyZXR1cm4gdnBfaW9yZWFkMTYoJm1kZXYtPmNvbW1vbi0+bnVtX3F1ZXVlcyk7
Cj4gK30KPiArRVhQT1JUX1NZTUJPTF9HUEwodnBfbW9kZXJuX2dldF9udW1fcXVldWVzKTsKPiAr
Cj4gKy8qCj4gKyAqIHZwX21vZGVybl9nZXRfcXVldWVfbm90aWZ5X29mZiAtIGdldCBub3RpZmlj
YXRpb24gb2Zmc2V0IGZvciBhIHZpcnRxdWV1ZQo+ICsgKiBAbWRldjogdGhlIG1vZGVybiB2aXJ0
aW8tcGNpIGRldmljZQo+ICsgKiBAaW5kZXg6IHRoZSBxdWV1ZSBpbmRleAo+ICsgKgo+ICsgKiBS
ZXR1cm5zIHRoZSBub3RpZmljYXRpb24gb2Zmc2V0IGZvciBhIHZpcnRxdWV1ZQo+ICsgKi8KPiAr
dTE2IHZwX21vZGVybl9nZXRfcXVldWVfbm90aWZ5X29mZihzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rl
cm5fZGV2aWNlICptZGV2LAo+ICsJCQkJICAgdTE2IGluZGV4KQo+ICt7Cj4gKwl2cF9pb3dyaXRl
MTYoaW5kZXgsICZtZGV2LT5jb21tb24tPnF1ZXVlX3NlbGVjdCk7Cj4gKwo+ICsJcmV0dXJuIHZw
X2lvcmVhZDE2KCZtZGV2LT5jb21tb24tPnF1ZXVlX25vdGlmeV9vZmYpOwo+ICt9Cj4gK0VYUE9S
VF9TWU1CT0xfR1BMKHZwX21vZGVybl9nZXRfcXVldWVfbm90aWZ5X29mZik7Cj4gKwo+ICtNT0RV
TEVfVkVSU0lPTigiMC4xIik7Cj4gK01PRFVMRV9ERVNDUklQVElPTigiTW9kZXJuIFZpcnRpbyBQ
Q0kgRGV2aWNlIik7Cj4gK01PRFVMRV9BVVRIT1IoIkphc29uIFdhbmcgPGphc293YW5nQHJlZGhh
dC5jb20+Iik7Cj4gK01PRFVMRV9MSUNFTlNFKCJHUEwiKTsKPiBkaWZmIC0tZ2l0IGEvaW5jbHVk
ZS9saW51eC92aXJ0aW9fcGNpX21vZGVybi5oIGIvaW5jbHVkZS9saW51eC92aXJ0aW9fcGNpX21v
ZGVybi5oCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLmYyNmFj
YmVlYzk2NQo+IC0tLSAvZGV2L251bGwKPiArKysgYi9pbmNsdWRlL2xpbnV4L3ZpcnRpb19wY2lf
bW9kZXJuLmgKPiBAQCAtMCwwICsxLDExMSBAQAo+ICsvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmll
cjogR1BMLTIuMCAqLwo+ICsjaWZuZGVmIF9MSU5VWF9WSVJUSU9fUENJX01PREVSTl9ICj4gKyNk
ZWZpbmUgX0xJTlVYX1ZJUlRJT19QQ0lfTU9ERVJOX0gKPiArCj4gKyNpbmNsdWRlIDxsaW51eC9w
Y2kuaD4KPiArI2luY2x1ZGUgPGxpbnV4L3ZpcnRpb19wY2kuaD4KPiArCj4gK3N0cnVjdCB2aXJ0
aW9fcGNpX21vZGVybl9kZXZpY2Ugewo+ICsJc3RydWN0IHBjaV9kZXYgKnBjaV9kZXY7Cj4gKwo+
ICsJc3RydWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZyBfX2lvbWVtICpjb21tb247Cj4gKwkvKiBE
ZXZpY2Utc3BlY2lmaWMgZGF0YSAobm9uLWxlZ2FjeSBtb2RlKSAgKi8KPiArCXZvaWQgX19pb21l
bSAqZGV2aWNlOwo+ICsJLyogQmFzZSBvZiB2cSBub3RpZmljYXRpb25zIChub24tbGVnYWN5IG1v
ZGUpLiAqLwo+ICsJdm9pZCBfX2lvbWVtICpub3RpZnlfYmFzZTsKPiArCS8qIFdoZXJlIHRvIHJl
YWQgYW5kIGNsZWFyIGludGVycnVwdCAqLwo+ICsJdTggX19pb21lbSAqaXNyOwo+ICsKPiArCS8q
IFNvIHdlIGNhbiBzYW5pdHktY2hlY2sgYWNjZXNzZXMuICovCj4gKwlzaXplX3Qgbm90aWZ5X2xl
bjsKPiArCXNpemVfdCBkZXZpY2VfbGVuOwo+ICsKPiArCS8qIENhcGFiaWxpdHkgZm9yIHdoZW4g
d2UgbmVlZCB0byBtYXAgbm90aWZpY2F0aW9ucyBwZXItdnEuICovCj4gKwlpbnQgbm90aWZ5X21h
cF9jYXA7Cj4gKwo+ICsJLyogTXVsdGlwbHkgcXVldWVfbm90aWZ5X29mZiBieSB0aGlzIHZhbHVl
LiAobm9uLWxlZ2FjeSBtb2RlKS4gKi8KPiArCXUzMiBub3RpZnlfb2Zmc2V0X211bHRpcGxpZXI7
Cj4gKwo+ICsJaW50IG1vZGVybl9iYXJzOwo+ICsKPiArCXN0cnVjdCB2aXJ0aW9fZGV2aWNlX2lk
IGlkOwo+ICt9Owo+ICsKPiArLyoKPiArICogVHlwZS1zYWZlIHdyYXBwZXJzIGZvciBpbyBhY2Nl
c3Nlcy4KPiArICogVXNlIHRoZXNlIHRvIGVuZm9yY2UgYXQgY29tcGlsZSB0aW1lIHRoZSBmb2xs
b3dpbmcgc3BlYyByZXF1aXJlbWVudDoKPiArICoKPiArICogVGhlIGRyaXZlciBNVVNUIGFjY2Vz
cyBlYWNoIGZpZWxkIHVzaW5nIHRoZSDigJxuYXR1cmFs4oCdIGFjY2Vzcwo+ICsgKiBtZXRob2Qs
IGkuZS4gMzItYml0IGFjY2Vzc2VzIGZvciAzMi1iaXQgZmllbGRzLCAxNi1iaXQgYWNjZXNzZXMK
PiArICogZm9yIDE2LWJpdCBmaWVsZHMgYW5kIDgtYml0IGFjY2Vzc2VzIGZvciA4LWJpdCBmaWVs
ZHMuCj4gKyAqLwo+ICtzdGF0aWMgaW5saW5lIHU4IHZwX2lvcmVhZDgoY29uc3QgdTggX19pb21l
bSAqYWRkcikKPiArewo+ICsJcmV0dXJuIGlvcmVhZDgoYWRkcik7Cj4gK30KPiArc3RhdGljIGlu
bGluZSB1MTYgdnBfaW9yZWFkMTYgKGNvbnN0IF9fbGUxNiBfX2lvbWVtICphZGRyKQo+ICt7Cj4g
KwlyZXR1cm4gaW9yZWFkMTYoYWRkcik7Cj4gK30KPiArCj4gK3N0YXRpYyBpbmxpbmUgdTMyIHZw
X2lvcmVhZDMyKGNvbnN0IF9fbGUzMiBfX2lvbWVtICphZGRyKQo+ICt7Cj4gKwlyZXR1cm4gaW9y
ZWFkMzIoYWRkcik7Cj4gK30KPiArCj4gK3N0YXRpYyBpbmxpbmUgdm9pZCB2cF9pb3dyaXRlOCh1
OCB2YWx1ZSwgdTggX19pb21lbSAqYWRkcikKPiArewo+ICsJaW93cml0ZTgodmFsdWUsIGFkZHIp
Owo+ICt9Cj4gKwo+ICtzdGF0aWMgaW5saW5lIHZvaWQgdnBfaW93cml0ZTE2KHUxNiB2YWx1ZSwg
X19sZTE2IF9faW9tZW0gKmFkZHIpCj4gK3sKPiArCWlvd3JpdGUxNih2YWx1ZSwgYWRkcik7Cj4g
K30KPiArCj4gK3N0YXRpYyBpbmxpbmUgdm9pZCB2cF9pb3dyaXRlMzIodTMyIHZhbHVlLCBfX2xl
MzIgX19pb21lbSAqYWRkcikKPiArewo+ICsJaW93cml0ZTMyKHZhbHVlLCBhZGRyKTsKPiArfQo+
ICsKPiArc3RhdGljIGlubGluZSB2b2lkIHZwX2lvd3JpdGU2NF90d29wYXJ0KHU2NCB2YWwsCj4g
KwkJCQkJX19sZTMyIF9faW9tZW0gKmxvLAo+ICsJCQkJCV9fbGUzMiBfX2lvbWVtICpoaSkKPiAr
ewo+ICsJdnBfaW93cml0ZTMyKCh1MzIpdmFsLCBsbyk7Cj4gKwl2cF9pb3dyaXRlMzIodmFsID4+
IDMyLCBoaSk7Cj4gK30KPiArCj4gK3U2NCB2cF9tb2Rlcm5fZ2V0X2ZlYXR1cmVzKHN0cnVjdCB2
aXJ0aW9fcGNpX21vZGVybl9kZXZpY2UgKm1kZXYpOwo+ICt2b2lkIHZwX21vZGVybl9zZXRfZmVh
dHVyZXMoc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiwKPiArCQkgICAgIHU2
NCBmZWF0dXJlcyk7Cj4gK3UzMiB2cF9tb2Rlcm5fZ2VuZXJhdGlvbihzdHJ1Y3QgdmlydGlvX3Bj
aV9tb2Rlcm5fZGV2aWNlICptZGV2KTsKPiArdTggdnBfbW9kZXJuX2dldF9zdGF0dXMoc3RydWN0
IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldik7Cj4gK3ZvaWQgdnBfbW9kZXJuX3NldF9z
dGF0dXMoc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiwKPiArCQkgICB1OCBz
dGF0dXMpOwo+ICt1MTYgdnBfbW9kZXJuX3F1ZXVlX3ZlY3RvcihzdHJ1Y3QgdmlydGlvX3BjaV9t
b2Rlcm5fZGV2aWNlICptZGV2LAo+ICsJCQkgICB1MTYgaWR4LCB1MTYgdmVjdG9yKTsKPiArdTE2
IHZwX21vZGVybl9jb25maWdfdmVjdG9yKHN0cnVjdCB2aXJ0aW9fcGNpX21vZGVybl9kZXZpY2Ug
Km1kZXYsCj4gKwkJICAgICB1MTYgdmVjdG9yKTsKPiArdm9pZCB2cF9tb2Rlcm5fcXVldWVfYWRk
cmVzcyhzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2LAo+ICsJCQkgICAgIHUx
NiBpbmRleCwgdTY0IGRlc2NfYWRkciwgdTY0IGRyaXZlcl9hZGRyLAo+ICsJCQkgICAgIHU2NCBk
ZXZpY2VfYWRkcik7Cj4gK3ZvaWQgdnBfbW9kZXJuX3NldF9xdWV1ZV9lbmFibGUoc3RydWN0IHZp
cnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiwKPiArCQkJCXUxNiBpZHgsIGJvb2wgZW5hYmxl
KTsKPiArYm9vbCB2cF9tb2Rlcm5fZ2V0X3F1ZXVlX2VuYWJsZShzdHJ1Y3QgdmlydGlvX3BjaV9t
b2Rlcm5fZGV2aWNlICptZGV2LAo+ICsJCQkJdTE2IGlkeCk7Cj4gK3ZvaWQgdnBfbW9kZXJuX3Nl
dF9xdWV1ZV9zaXplKHN0cnVjdCB2aXJ0aW9fcGNpX21vZGVybl9kZXZpY2UgKm1kZXYsCj4gKwkJ
CSAgICAgIHUxNiBpZHgsIHUxNiBzaXplKTsKPiArdTE2IHZwX21vZGVybl9nZXRfcXVldWVfc2l6
ZShzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2LAo+ICsJCQkgICAgIHUxNiBp
ZHgpOwo+ICt1MTYgdnBfbW9kZXJuX2dldF9udW1fcXVldWVzKHN0cnVjdCB2aXJ0aW9fcGNpX21v
ZGVybl9kZXZpY2UgKm1kZXYpOwo+ICt1MTYgdnBfbW9kZXJuX2dldF9xdWV1ZV9ub3RpZnlfb2Zm
KHN0cnVjdCB2aXJ0aW9fcGNpX21vZGVybl9kZXZpY2UgKm1kZXYsCj4gKwkJCQkgICB1MTYgaWR4
KTsKPiArdm9pZCBfX2lvbWVtICp2cF9tb2Rlcm5fbWFwX2NhcGFiaWxpdHkoc3RydWN0IHZpcnRp
b19wY2lfbW9kZXJuX2RldmljZSAqbWRldiwgaW50IG9mZiwKPiArCQkJCSAgICAgICBzaXplX3Qg
bWlubGVuLAo+ICsJCQkJICAgICAgIHUzMiBhbGlnbiwKPiArCQkJCSAgICAgICB1MzIgc3RhcnQs
IHUzMiBzaXplLAo+ICsJCQkJICAgICAgIHNpemVfdCAqbGVuKTsKPiAraW50IHZwX21vZGVybl9w
cm9iZShzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2KTsKPiArdm9pZCB2cF9t
b2Rlcm5fcmVtb3ZlKHN0cnVjdCB2aXJ0aW9fcGNpX21vZGVybl9kZXZpY2UgKm1kZXYpOwo+ICsj
ZW5kaWYKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KVmly
dHVhbGl6YXRpb24gbWFpbGluZyBsaXN0ClZpcnR1YWxpemF0aW9uQGxpc3RzLmxpbnV4LWZvdW5k
YXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGludXhmb3VuZGF0aW9uLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL3ZpcnR1YWxpemF0aW9u
