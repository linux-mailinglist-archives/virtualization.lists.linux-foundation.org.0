Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
	by mail.lfdr.de (Postfix) with ESMTPS id 8D5643AFDB8
	for <lists.virtualization@lfdr.de>; Tue, 22 Jun 2021 09:20:22 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp3.osuosl.org (Postfix) with ESMTP id BE0346075F;
	Tue, 22 Jun 2021 07:20:20 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
	by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id g-UZfQeT5AFz; Tue, 22 Jun 2021 07:20:19 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp3.osuosl.org (Postfix) with ESMTPS id 1CDAC60757;
	Tue, 22 Jun 2021 07:20:19 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 908E9C000E;
	Tue, 22 Jun 2021 07:20:18 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp1.osuosl.org (smtp1.osuosl.org [140.211.166.138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 98E28C000E
 for <virtualization@lists.linux-foundation.org>;
 Tue, 22 Jun 2021 07:20:16 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp1.osuosl.org (Postfix) with ESMTP id 7FA6A82E2A
 for <virtualization@lists.linux-foundation.org>;
 Tue, 22 Jun 2021 07:20:16 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp1.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp1.osuosl.org ([127.0.0.1])
 by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 8Gv_BU6Hnx7y
 for <virtualization@lists.linux-foundation.org>;
 Tue, 22 Jun 2021 07:20:15 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp1.osuosl.org (Postfix) with ESMTPS id 35ECC82DF4
 for <virtualization@lists.linux-foundation.org>;
 Tue, 22 Jun 2021 07:20:15 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1624346414;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=mptGffj5jW63cZHx8d6tal99LihHyuNaE6PueKROSZs=;
 b=SZImdYlv9/9mEnu5c4yS0iN1k73gSNTCT5FBWbo/MvgmcRtMaqrZJ7MPQOX5x6pwl9xoSI
 qja5PLc033wzZ+SuestVRzPAE45F46UDzRHJJ7tfRzjInpkdPMQaCXcPIxTLKN/OrhVq7N
 uIFoBudK9Y5uhMB96e8l8S26PW0FY80=
Received: from mail-pj1-f72.google.com (mail-pj1-f72.google.com
 [209.85.216.72]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-522-t1ywLLqWNNmyMIjSwq8i3w-1; Tue, 22 Jun 2021 03:20:12 -0400
X-MC-Unique: t1ywLLqWNNmyMIjSwq8i3w-1
Received: by mail-pj1-f72.google.com with SMTP id
 t5-20020a17090a4485b029016f7fcb8a3dso1520649pjg.2
 for <virtualization@lists.linux-foundation.org>;
 Tue, 22 Jun 2021 00:20:12 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=mptGffj5jW63cZHx8d6tal99LihHyuNaE6PueKROSZs=;
 b=aD48EtqxP/n5yBUY0P3IAEhwlL9N0K6G6uOeA5pB8GMrP/EDh0H/mL+KQcjE+e+dDF
 MA/zZ87FtFJKyAytMu1OlQx70wCfSBgCslxDITzCJvG+RIL/f3kBnCylyR39kQMwDSzT
 iEr8IjDXpCSiqzAy+R8wTT7GhXyjNqIKutLfsXmttFLLQBSH9mqZYcWj7462CAmnLTMG
 oHGmy7/0xN5xZYI8PjfgvcbvGnIJ9alpJ/wgffLjaHcMBD2k8L0jaju80OxcEhWQxLSF
 47taR8FsbpTNuF0z2Ly7kkx8c7XkhARlp+DOdYQtviikooQfR/4d3TnSBZKThTtgeL4E
 Ys2w==
X-Gm-Message-State: AOAM530G8rwSOwrVo1kKm4Zq0vzHzz2Tu1pt3UU6aXr5voc8Ygve2xbf
 kNHBS0/Q5MYx7+RbE8IGKqiBtPyLH+s+RXXM5JG1WeXZRUB5U/MwiZRmZWI/QMMbfX9SqTkKRcq
 1IDJbo1p/FkBOgDgKTF8ulNvJMiTOzSkxVfXB1Kd01g==
X-Received: by 2002:a63:5a4b:: with SMTP id k11mr2430443pgm.289.1624346411385; 
 Tue, 22 Jun 2021 00:20:11 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJz+bZNUy4Rrp8JfFbNlHMnu/lxvqZH1+KWFX+3/qnw3FZN2VzUcCkCyj4UP0KYtk8ncUjFqRA==
X-Received: by 2002:a63:5a4b:: with SMTP id k11mr2430412pgm.289.1624346411113; 
 Tue, 22 Jun 2021 00:20:11 -0700 (PDT)
Received: from wangxiaodeMacBook-Air.local ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id l5sm7134950pgr.73.2021.06.22.00.20.09
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Tue, 22 Jun 2021 00:20:10 -0700 (PDT)
Subject: Re: [PATCH linux-next v3 2/6] vdpa: Introduce query of device config
 layout
To: Parav Pandit <parav@nvidia.com>, virtualization@lists.linux-foundation.org
References: <20210616191155.102303-1-parav@nvidia.com>
 <20210616191155.102303-3-parav@nvidia.com>
From: Jason Wang <jasowang@redhat.com>
Message-ID: <aa7899c0-4b6b-dee3-a175-91e0394bc999@redhat.com>
Date: Tue, 22 Jun 2021 15:20:04 +0800
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0)
 Gecko/20100101 Thunderbird/78.11.0
MIME-Version: 1.0
In-Reply-To: <20210616191155.102303-3-parav@nvidia.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: elic@nvidia.com, mst@redhat.com
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="gbk"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CtTaIDIwMjEvNi8xNyDJz87nMzoxMSwgUGFyYXYgUGFuZGl0INC0tcA6Cj4gSW50cm9kdWNlIGEg
Y29tbWFuZCB0byBxdWVyeSBhIGRldmljZSBjb25maWcgbGF5b3V0Lgo+Cj4gQW4gZXhhbXBsZSBx
dWVyeSBvZiBuZXR3b3JrIHZkcGEgZGV2aWNlOgo+Cj4gJCB2ZHBhIGRldiBhZGQgbmFtZSBiYXIg
bWdtdGRldiB2ZHBhc2ltX25ldAo+Cj4gJCB2ZHBhIGRldiBjb25maWcgc2hvdwo+IGJhcjogbWFj
IDAwOjM1OjA5OjE5OjQ4OjA1IGxpbmsgdXAgbGlua19hbm5vdW5jZSBmYWxzZSBtdHUgMTUwMCBz
cGVlZCAwIGR1cGxleCAwCj4KPiAkIHZkcGEgZGV2IGNvbmZpZyBzaG93IC1qcAo+IHsKPiAgICAg
ICJjb25maWciOiB7Cj4gICAgICAgICAgImJhciI6IHsKPiAgICAgICAgICAgICAgIm1hYyI6ICIw
MDozNTowOToxOTo0ODowNSIsCj4gICAgICAgICAgICAgICJsaW5rICI6ICJ1cCIsCj4gICAgICAg
ICAgICAgICJsaW5rX2Fubm91bmNlICI6IGZhbHNlLAo+ICAgICAgICAgICAgICAibXR1IjogMTUw
MCwKPiAgICAgICAgICAgICAgInNwZWVkIjogMCwKPiAgICAgICAgICAgICAgImR1cGxleCI6IDAK
PiAgICAgICAgICB9Cj4gICAgICB9Cj4gfQo+Cj4gU2lnbmVkLW9mZi1ieTogUGFyYXYgUGFuZGl0
IDxwYXJhdkBudmlkaWEuY29tPgo+IFNpZ25lZC1vZmYtYnk6IEVsaSBDb2hlbiA8ZWxpY0Budmlk
aWEuY29tPgo+IC0tLQo+ICAgZHJpdmVycy92ZHBhL3ZkcGEuYyAgICAgICB8IDIxMiArKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwo+ICAgaW5jbHVkZS9saW51eC92ZHBhLmgg
ICAgICB8ICAgMiArCj4gICBpbmNsdWRlL3VhcGkvbGludXgvdmRwYS5oIHwgIDExICsrCj4gICAz
IGZpbGVzIGNoYW5nZWQsIDIyNSBpbnNlcnRpb25zKCspCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy92ZHBhL3ZkcGEuYyBiL2RyaXZlcnMvdmRwYS92ZHBhLmMKPiBpbmRleCBiYzQ0Y2RjMzQxMTQu
LjEyOTU1MjgyNDRjMyAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZkcGEvdmRwYS5jCj4gKysrIGIv
ZHJpdmVycy92ZHBhL3ZkcGEuYwo+IEBAIC0xNCw2ICsxNCw4IEBACj4gICAjaW5jbHVkZSA8dWFw
aS9saW51eC92ZHBhLmg+Cj4gICAjaW5jbHVkZSA8bmV0L2dlbmV0bGluay5oPgo+ICAgI2luY2x1
ZGUgPGxpbnV4L21vZF9kZXZpY2V0YWJsZS5oPgo+ICsjaW5jbHVkZSA8bGludXgvdmlydGlvX25l
dC5oPgo+ICsjaW5jbHVkZSA8bGludXgvdmlydGlvX2lkcy5oPgo+ICAgCj4gICBzdGF0aWMgTElT
VF9IRUFEKG1kZXZfaGVhZCk7Cj4gICAvKiBBIGdsb2JhbCBtdXRleCB0aGF0IHByb3RlY3RzIHZk
cGEgbWFuYWdlbWVudCBkZXZpY2UgYW5kIGRldmljZSBsZXZlbCBvcGVyYXRpb25zLiAqLwo+IEBA
IC02MCw2ICs2Miw3IEBAIHN0YXRpYyB2b2lkIHZkcGFfcmVsZWFzZV9kZXYoc3RydWN0IGRldmlj
ZSAqZCkKPiAgIAkJb3BzLT5mcmVlKHZkZXYpOwo+ICAgCj4gICAJaWRhX3NpbXBsZV9yZW1vdmUo
JnZkcGFfaW5kZXhfaWRhLCB2ZGV2LT5pbmRleCk7Cj4gKwltdXRleF9kZXN0cm95KCZ2ZGV2LT5j
Zl9tdXRleCk7Cj4gICAJa2ZyZWUodmRldik7Cj4gICB9Cj4gICAKPiBAQCAtMTE0LDYgKzExNyw3
IEBAIHN0cnVjdCB2ZHBhX2RldmljZSAqX192ZHBhX2FsbG9jX2RldmljZShzdHJ1Y3QgZGV2aWNl
ICpwYXJlbnQsCj4gICAJaWYgKGVycikKPiAgIAkJZ290byBlcnJfbmFtZTsKPiAgIAo+ICsJbXV0
ZXhfaW5pdCgmdmRldi0+Y2ZfbXV0ZXgpOwo+ICAgCWRldmljZV9pbml0aWFsaXplKCZ2ZGV2LT5k
ZXYpOwo+ICAgCj4gICAJcmV0dXJuIHZkZXY7Cj4gQEAgLTI5Niw2ICszMDAsNyBAQCB2b2lkIHZk
cGFfZ2V0X2NvbmZpZyhzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkZXYsIHVuc2lnbmVkIGludCBvZmZz
ZXQsCj4gICB7Cj4gICAJY29uc3Qgc3RydWN0IHZkcGFfY29uZmlnX29wcyAqb3BzID0gdmRldi0+
Y29uZmlnOwo+ICAgCj4gKwltdXRleF9sb2NrKCZ2ZGV2LT5jZl9tdXRleCk7Cj4gICAJLyoKPiAg
IAkgKiBDb25maWcgYWNjZXNzZXMgYXJlbid0IHN1cHBvc2VkIHRvIHRyaWdnZXIgYmVmb3JlIGZl
YXR1cmVzIGFyZSBzZXQuCj4gICAJICogSWYgaXQgZG9lcyBoYXBwZW4gd2UgYXNzdW1lIGEgbGVn
YWN5IGd1ZXN0Lgo+IEBAIC0zMDMsNiArMzA4LDcgQEAgdm9pZCB2ZHBhX2dldF9jb25maWcoc3Ry
dWN0IHZkcGFfZGV2aWNlICp2ZGV2LCB1bnNpZ25lZCBpbnQgb2Zmc2V0LAo+ICAgCWlmICghdmRl
di0+ZmVhdHVyZXNfdmFsaWQpCj4gICAJCXZkcGFfc2V0X2ZlYXR1cmVzKHZkZXYsIDApOwo+ICAg
CW9wcy0+Z2V0X2NvbmZpZyh2ZGV2LCBvZmZzZXQsIGJ1ZiwgbGVuKTsKPiArCW11dGV4X3VubG9j
aygmdmRldi0+Y2ZfbXV0ZXgpOwo+ICAgfQo+ICAgRVhQT1JUX1NZTUJPTF9HUEwodmRwYV9nZXRf
Y29uZmlnKTsKPiAgIAo+IEBAIC0zMTYsNyArMzIyLDkgQEAgRVhQT1JUX1NZTUJPTF9HUEwodmRw
YV9nZXRfY29uZmlnKTsKPiAgIHZvaWQgdmRwYV9zZXRfY29uZmlnKHN0cnVjdCB2ZHBhX2Rldmlj
ZSAqdmRldiwgdW5zaWduZWQgaW50IG9mZnNldCwKPiAgIAkJICAgICB2b2lkICpidWYsIHVuc2ln
bmVkIGludCBsZW5ndGgpCj4gICB7Cj4gKwltdXRleF9sb2NrKCZ2ZGV2LT5jZl9tdXRleCk7Cj4g
ICAJdmRldi0+Y29uZmlnLT5zZXRfY29uZmlnKHZkZXYsIG9mZnNldCwgYnVmLCBsZW5ndGgpOwo+
ICsJbXV0ZXhfdW5sb2NrKCZ2ZGV2LT5jZl9tdXRleCk7CgoKSSB0aGluayBpdCdzIGJldHRlciB0
byB1c2UgYSBzZXBhcmF0ZSBwYXRjaCB0byBpbXBsZW1lbnQgdGhlIApzeW5jaHJvbml6YXRpb24g
aW4gc2V0X2dldCgpL2dldF9jb25maWcoKQoKCj4gICB9Cj4gICBFWFBPUlRfU1lNQk9MX0dQTCh2
ZHBhX3NldF9jb25maWcpOwo+ICAgCj4gQEAgLTY0Myw2ICs2NTEsMjA0IEBAIHN0YXRpYyBpbnQg
dmRwYV9ubF9jbWRfZGV2X2dldF9kdW1waXQoc3RydWN0IHNrX2J1ZmYgKm1zZywgc3RydWN0IG5l
dGxpbmtfY2FsbGJhCj4gICAJcmV0dXJuIG1zZy0+bGVuOwo+ICAgfQo+ICAgCj4gK3N0YXRpYyBp
bnQgdmRwYV9kZXZfbmV0X21xX2NvbmZpZ19maWxsKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRldiwK
PiArCQkJCSAgICAgICBzdHJ1Y3Qgc2tfYnVmZiAqbXNnLCB1NjQgZmVhdHVyZXMsCj4gKwkJCQkg
ICAgICAgY29uc3Qgc3RydWN0IHZpcnRpb19uZXRfY29uZmlnICpjb25maWcpCj4gK3sKPiArCXUx
NiB2YWxfdTE2Owo+ICsKPiArCWlmICgoZmVhdHVyZXMgJiAoMVVMTCA8PCBWSVJUSU9fTkVUX0Zf
TVEpKSA9PSAwKQo+ICsJCXJldHVybiAwOwo+ICsKPiArCXZhbF91MTYgPSBsZTE2X3RvX2NwdShj
b25maWctPm1heF92aXJ0cXVldWVfcGFpcnMpOwo+ICsJcmV0dXJuIG5sYV9wdXRfdTE2KG1zZywg
VkRQQV9BVFRSX0RFVl9ORVRfQ0ZHX01BWF9WUVAsIHZhbF91MTYpOwo+ICt9Cj4gKwo+ICtzdGF0
aWMgaW50IHZkcGFfZGV2X25ldF9yc3NfY29uZmlnX2ZpbGwoc3RydWN0IHZkcGFfZGV2aWNlICp2
ZGV2LAo+ICsJCQkJCXN0cnVjdCBza19idWZmICptc2csIHU2NCBmZWF0dXJlcywKPiArCQkJCQlj
b25zdCBzdHJ1Y3QgdmlydGlvX25ldF9jb25maWcgKmNvbmZpZykKPiArewo+ICsJdTE2IHZhbF91
MTY7Cj4gKwl1MTYgdmFsX3UzMjsKPiArCj4gKwlpZiAoKGZlYXR1cmVzICYgKDFVTEwgPDwgVklS
VElPX05FVF9GX1JTUykpID09IDApCj4gKwkJcmV0dXJuIDA7Cj4gKwo+ICsJaWYgKG5sYV9wdXRf
dTgobXNnLCBWRFBBX0FUVFJfREVWX05FVF9DRkdfUlNTX01BWF9LRVlfTEVOLAo+ICsJCSAgICAg
ICBjb25maWctPnJzc19tYXhfa2V5X3NpemUpKQo+ICsJCXJldHVybiAtRU1TR1NJWkU7Cj4gKwo+
ICsJdmFsX3UxNiA9IGxlMTZfdG9fY3B1KGNvbmZpZy0+cnNzX21heF9rZXlfc2l6ZSk7Cj4gKwlp
ZiAobmxhX3B1dF91MTYobXNnLCBWRFBBX0FUVFJfREVWX05FVF9DRkdfUlNTX01BWF9JVF9MRU4s
IHZhbF91MTYpKQo+ICsJCXJldHVybiAtRU1TR1NJWkU7Cj4gKwo+ICsJdmFsX3UzMiA9IGxlMzJf
dG9fY3B1KGNvbmZpZy0+c3VwcG9ydGVkX2hhc2hfdHlwZXMpOwo+ICsJaWYgKG5sYV9wdXRfdTMy
KG1zZywgVkRQQV9BVFRSX0RFVl9ORVRfQ0ZHX1JTU19IQVNIX1RZUEVTLCB2YWxfdTMyKSkKPiAr
CQlyZXR1cm4gLUVNU0dTSVpFOwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQg
dmRwYV9kZXZfbmV0X2NvbmZpZ19maWxsKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRldiwgc3RydWN0
IHNrX2J1ZmYgKm1zZykKPiArewo+ICsJc3RydWN0IHZpcnRpb19uZXRfY29uZmlnIGNvbmZpZyA9
IHt9Owo+ICsJdTY0IGZlYXR1cmVzOwo+ICsJdTMyIHZhbF91MzI7Cj4gKwl1MTYgdmFsX3UxNjsK
PiArCWludCBlcnI7Cj4gKwo+ICsJdmRwYV9nZXRfY29uZmlnKHZkZXYsIDAsICZjb25maWcsIHNp
emVvZihjb25maWcpKTsKPiArCj4gKwlpZiAobmxhX3B1dChtc2csIFZEUEFfQVRUUl9ERVZfTkVU
X0NGR19NQUNBRERSLCBzaXplb2YoY29uZmlnLm1hYyksCj4gKwkJICAgIGNvbmZpZy5tYWMpKQo+
ICsJCXJldHVybiAtRU1TR1NJWkU7Cj4gKwo+ICsJdmFsX3UxNiA9IGxlMTZfdG9fY3B1KGNvbmZp
Zy5zdGF0dXMpOwo+ICsJaWYgKG5sYV9wdXRfdTE2KG1zZywgVkRQQV9BVFRSX0RFVl9ORVRfU1RB
VFVTLCB2YWxfdTE2KSkKPiArCQlyZXR1cm4gLUVNU0dTSVpFOwoKCk5vdGUgdGhhdCBzdGF0dXMg
ZmllbGQgb25seSBleGlzdCB3aGVuIFZJUklUT19ORVRfRl9TVEFUVVMgaXMgCm5lZ290aWF0ZWQu
IEFuZCBpZiBub3QsIHdlIG5lZWQgYXNzdW1lIHRoZSBsaW5rIGlzIHVwLgoKCj4gKwo+ICsJdmFs
X3UxNiA9IGxlMTZfdG9fY3B1KGNvbmZpZy5tdHUpOwo+ICsJaWYgKG5sYV9wdXRfdTE2KG1zZywg
VkRQQV9BVFRSX0RFVl9ORVRfQ0ZHX01UVSwgdmFsX3UxNikpCj4gKwkJcmV0dXJuIC1FTVNHU0la
RTsKPiArCj4gKwl2YWxfdTMyID0gbGUzMl90b19jcHUoY29uZmlnLnNwZWVkKTsKPiArCWlmIChu
bGFfcHV0X3UzMihtc2csIFZEUEFfQVRUUl9ERVZfTkVUX0NGR19TUEVFRCwgdmFsX3UzMikpCj4g
KwkJcmV0dXJuIC1FTVNHU0laRTsKPiArCj4gKwlpZiAobmxhX3B1dF91OChtc2csIFZEUEFfQVRU
Ul9ERVZfTkVUX0NGR19EVVBMRVgsIGNvbmZpZy5kdXBsZXgpKQo+ICsJCXJldHVybiAtRU1TR1NJ
WkU7CgoKVGhlIGFib3ZlIHR3byBvbmx5IGV4aXN0cyB3aGVuIFZJUlRJT19ORVRfRl9TUEVFRF9E
VVBMRVggaXMgbmVnb3RpYXRlZC4KCgo+ICsKPiArCWZlYXR1cmVzID0gdmRldi0+Y29uZmlnLT5n
ZXRfZmVhdHVyZXModmRldik7Cj4gKwo+ICsJZXJyID0gdmRwYV9kZXZfbmV0X21xX2NvbmZpZ19m
aWxsKHZkZXYsIG1zZywgZmVhdHVyZXMsICZjb25maWcpOwo+ICsJaWYgKGVycikKPiArCQlyZXR1
cm4gZXJyOwo+ICsJcmV0dXJuIHZkcGFfZGV2X25ldF9yc3NfY29uZmlnX2ZpbGwodmRldiwgbXNn
LCBmZWF0dXJlcywgJmNvbmZpZyk7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQKPiArdmRwYV9kZXZf
Y29uZmlnX2ZpbGwoc3RydWN0IHZkcGFfZGV2aWNlICp2ZGV2LCBzdHJ1Y3Qgc2tfYnVmZiAqbXNn
LCB1MzIgcG9ydGlkLCB1MzIgc2VxLAo+ICsJCSAgICAgaW50IGZsYWdzLCBzdHJ1Y3QgbmV0bGlu
a19leHRfYWNrICpleHRhY2spCj4gK3sKPiArCXUzMiBkZXZpY2VfaWQ7Cj4gKwl2b2lkICpoZHI7
Cj4gKwlpbnQgZXJyOwo+ICsKPiArCWhkciA9IGdlbmxtc2dfcHV0KG1zZywgcG9ydGlkLCBzZXEs
ICZ2ZHBhX25sX2ZhbWlseSwgZmxhZ3MsCj4gKwkJCSAgVkRQQV9DTURfREVWX0NPTkZJR19HRVQp
Owo+ICsJaWYgKCFoZHIpCj4gKwkJcmV0dXJuIC1FTVNHU0laRTsKPiArCj4gKwlpZiAobmxhX3B1
dF9zdHJpbmcobXNnLCBWRFBBX0FUVFJfREVWX05BTUUsIGRldl9uYW1lKCZ2ZGV2LT5kZXYpKSkg
ewo+ICsJCWVyciA9IC1FTVNHU0laRTsKPiArCQlnb3RvIG1zZ19lcnI7Cj4gKwl9Cj4gKwo+ICsJ
ZGV2aWNlX2lkID0gdmRldi0+Y29uZmlnLT5nZXRfZGV2aWNlX2lkKHZkZXYpOwo+ICsJaWYgKG5s
YV9wdXRfdTMyKG1zZywgVkRQQV9BVFRSX0RFVl9JRCwgZGV2aWNlX2lkKSkgewo+ICsJCWVyciA9
IC1FTVNHU0laRTsKPiArCQlnb3RvIG1zZ19lcnI7Cj4gKwl9Cj4gKwo+ICsJc3dpdGNoIChkZXZp
Y2VfaWQpIHsKPiArCWNhc2UgVklSVElPX0lEX05FVDoKPiArCQllcnIgPSB2ZHBhX2Rldl9uZXRf
Y29uZmlnX2ZpbGwodmRldiwgbXNnKTsKPiArCQlicmVhazsKPiArCWRlZmF1bHQ6Cj4gKwkJZXJy
ID0gLUVPUE5PVFNVUFA7Cj4gKwkJYnJlYWs7Cj4gKwl9Cj4gKwlpZiAoZXJyKQo+ICsJCWdvdG8g
bXNnX2VycjsKPiArCj4gKwlnZW5sbXNnX2VuZChtc2csIGhkcik7Cj4gKwlyZXR1cm4gMDsKPiAr
Cj4gK21zZ19lcnI6Cj4gKwlnZW5sbXNnX2NhbmNlbChtc2csIGhkcik7Cj4gKwlyZXR1cm4gZXJy
Owo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHZkcGFfbmxfY21kX2Rldl9jb25maWdfZ2V0X2RvaXQo
c3RydWN0IHNrX2J1ZmYgKnNrYiwgc3RydWN0IGdlbmxfaW5mbyAqaW5mbykKPiArewo+ICsJc3Ry
dWN0IHZkcGFfZGV2aWNlICp2ZGV2Owo+ICsJc3RydWN0IHNrX2J1ZmYgKm1zZzsKPiArCWNvbnN0
IGNoYXIgKmRldm5hbWU7Cj4gKwlzdHJ1Y3QgZGV2aWNlICpkZXY7Cj4gKwlpbnQgZXJyOwo+ICsK
PiArCWlmICghaW5mby0+YXR0cnNbVkRQQV9BVFRSX0RFVl9OQU1FXSkKPiArCQlyZXR1cm4gLUVJ
TlZBTDsKPiArCWRldm5hbWUgPSBubGFfZGF0YShpbmZvLT5hdHRyc1tWRFBBX0FUVFJfREVWX05B
TUVdKTsKPiArCW1zZyA9IG5sbXNnX25ldyhOTE1TR19ERUZBVUxUX1NJWkUsIEdGUF9LRVJORUwp
Owo+ICsJaWYgKCFtc2cpCj4gKwkJcmV0dXJuIC1FTk9NRU07Cj4gKwo+ICsJbXV0ZXhfbG9jaygm
dmRwYV9kZXZfbXV0ZXgpOwo+ICsJZGV2ID0gYnVzX2ZpbmRfZGV2aWNlKCZ2ZHBhX2J1cywgTlVM
TCwgZGV2bmFtZSwgdmRwYV9uYW1lX21hdGNoKTsKPiArCWlmICghZGV2KSB7Cj4gKwkJTkxfU0VU
X0VSUl9NU0dfTU9EKGluZm8tPmV4dGFjaywgImRldmljZSBub3QgZm91bmQiKTsKPiArCQllcnIg
PSAtRU5PREVWOwo+ICsJCWdvdG8gZGV2X2VycjsKPiArCX0KPiArCXZkZXYgPSBjb250YWluZXJf
b2YoZGV2LCBzdHJ1Y3QgdmRwYV9kZXZpY2UsIGRldik7Cj4gKwlpZiAoIXZkZXYtPm1kZXYpIHsK
PiArCQlOTF9TRVRfRVJSX01TR19NT0QoaW5mby0+ZXh0YWNrLCAidW5tYW5hZ2VkIHZkcGEgZGV2
aWNlIik7Cj4gKwkJZXJyID0gLUVJTlZBTDsKPiArCQlnb3RvIG1kZXZfZXJyOwo+ICsJfQo+ICsJ
ZXJyID0gdmRwYV9kZXZfY29uZmlnX2ZpbGwodmRldiwgbXNnLCBpbmZvLT5zbmRfcG9ydGlkLCBp
bmZvLT5zbmRfc2VxLAo+ICsJCQkJICAgMCwgaW5mby0+ZXh0YWNrKTsKPiArCWlmICghZXJyKQo+
ICsJCWVyciA9IGdlbmxtc2dfcmVwbHkobXNnLCBpbmZvKTsKPiArCj4gK21kZXZfZXJyOgo+ICsJ
cHV0X2RldmljZShkZXYpOwo+ICtkZXZfZXJyOgo+ICsJbXV0ZXhfdW5sb2NrKCZ2ZHBhX2Rldl9t
dXRleCk7Cj4gKwlpZiAoZXJyKQo+ICsJCW5sbXNnX2ZyZWUobXNnKTsKPiArCXJldHVybiBlcnI7
Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgdmRwYV9kZXZfY29uZmlnX2R1bXAoc3RydWN0IGRldmlj
ZSAqZGV2LCB2b2lkICpkYXRhKQo+ICt7Cj4gKwlzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkZXYgPSBj
b250YWluZXJfb2YoZGV2LCBzdHJ1Y3QgdmRwYV9kZXZpY2UsIGRldik7Cj4gKwlzdHJ1Y3QgdmRw
YV9kZXZfZHVtcF9pbmZvICppbmZvID0gZGF0YTsKPiArCWludCBlcnI7Cj4gKwo+ICsJaWYgKCF2
ZGV2LT5tZGV2KQo+ICsJCXJldHVybiAwOwo+ICsJaWYgKGluZm8tPmlkeCA8IGluZm8tPnN0YXJ0
X2lkeCkgewo+ICsJCWluZm8tPmlkeCsrOwo+ICsJCXJldHVybiAwOwo+ICsJfQo+ICsJZXJyID0g
dmRwYV9kZXZfY29uZmlnX2ZpbGwodmRldiwgaW5mby0+bXNnLCBORVRMSU5LX0NCKGluZm8tPmNi
LT5za2IpLnBvcnRpZCwKPiArCQkJCSAgIGluZm8tPmNiLT5ubGgtPm5sbXNnX3NlcSwgTkxNX0Zf
TVVMVEksCj4gKwkJCQkgICBpbmZvLT5jYi0+ZXh0YWNrKTsKPiArCWlmIChlcnIpCj4gKwkJcmV0
dXJuIGVycjsKPiArCj4gKwlpbmZvLT5pZHgrKzsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtz
dGF0aWMgaW50Cj4gK3ZkcGFfbmxfY21kX2Rldl9jb25maWdfZ2V0X2R1bXBpdChzdHJ1Y3Qgc2tf
YnVmZiAqbXNnLCBzdHJ1Y3QgbmV0bGlua19jYWxsYmFjayAqY2IpCj4gK3sKPiArCXN0cnVjdCB2
ZHBhX2Rldl9kdW1wX2luZm8gaW5mbzsKPiArCj4gKwlpbmZvLm1zZyA9IG1zZzsKPiArCWluZm8u
Y2IgPSBjYjsKPiArCWluZm8uc3RhcnRfaWR4ID0gY2ItPmFyZ3NbMF07Cj4gKwlpbmZvLmlkeCA9
IDA7Cj4gKwo+ICsJbXV0ZXhfbG9jaygmdmRwYV9kZXZfbXV0ZXgpOwo+ICsJYnVzX2Zvcl9lYWNo
X2RldigmdmRwYV9idXMsIE5VTEwsICZpbmZvLCB2ZHBhX2Rldl9jb25maWdfZHVtcCk7Cj4gKwlt
dXRleF91bmxvY2soJnZkcGFfZGV2X211dGV4KTsKPiArCWNiLT5hcmdzWzBdID0gaW5mby5pZHg7
Cj4gKwlyZXR1cm4gbXNnLT5sZW47Cj4gK30KPiArCj4gICBzdGF0aWMgY29uc3Qgc3RydWN0IG5s
YV9wb2xpY3kgdmRwYV9ubF9wb2xpY3lbVkRQQV9BVFRSX01BWCArIDFdID0gewo+ICAgCVtWRFBB
X0FUVFJfTUdNVERFVl9CVVNfTkFNRV0gPSB7IC50eXBlID0gTkxBX05VTF9TVFJJTkcgfSwKPiAg
IAlbVkRQQV9BVFRSX01HTVRERVZfREVWX05BTUVdID0geyAudHlwZSA9IE5MQV9TVFJJTkcgfSwK
PiBAQCAtNjc0LDYgKzg4MCwxMiBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IGdlbmxfb3BzIHZkcGFf
bmxfb3BzW10gPSB7Cj4gICAJCS5kb2l0ID0gdmRwYV9ubF9jbWRfZGV2X2dldF9kb2l0LAo+ICAg
CQkuZHVtcGl0ID0gdmRwYV9ubF9jbWRfZGV2X2dldF9kdW1waXQsCj4gICAJfSwKPiArCXsKPiAr
CQkuY21kID0gVkRQQV9DTURfREVWX0NPTkZJR19HRVQsCj4gKwkJLnZhbGlkYXRlID0gR0VOTF9E
T05UX1ZBTElEQVRFX1NUUklDVCB8IEdFTkxfRE9OVF9WQUxJREFURV9EVU1QLAo+ICsJCS5kb2l0
ID0gdmRwYV9ubF9jbWRfZGV2X2NvbmZpZ19nZXRfZG9pdCwKPiArCQkuZHVtcGl0ID0gdmRwYV9u
bF9jbWRfZGV2X2NvbmZpZ19nZXRfZHVtcGl0LAo+ICsJfSwKPiAgIH07Cj4gICAKPiAgIHN0YXRp
YyBzdHJ1Y3QgZ2VubF9mYW1pbHkgdmRwYV9ubF9mYW1pbHkgX19yb19hZnRlcl9pbml0ID0gewo+
IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L3ZkcGEuaCBiL2luY2x1ZGUvbGludXgvdmRwYS5o
Cj4gaW5kZXggOTkzZDk5NTE5NDUyLi5iZjEwNGY5ZjQ2MWEgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVk
ZS9saW51eC92ZHBhLmgKPiArKysgYi9pbmNsdWRlL2xpbnV4L3ZkcGEuaAo+IEBAIC00Miw2ICs0
Miw3IEBAIHN0cnVjdCB2ZHBhX21nbXRfZGV2Owo+ICAgICogQGRldjogdW5kZXJseWluZyBkZXZp
Y2UKPiAgICAqIEBkbWFfZGV2OiB0aGUgYWN0dWFsIGRldmljZSB0aGF0IGlzIHBlcmZvcm1pbmcg
RE1BCj4gICAgKiBAY29uZmlnOiB0aGUgY29uZmlndXJhdGlvbiBvcHMgZm9yIHRoaXMgZGV2aWNl
Lgo+ICsgKiBAY2ZfbXV0ZXg6IFByb3RlY3RzIGdldCBhbmQgc2V0IGFjY2VzcyB0byBmZWF0dXJl
cyBhbmQgY29uZmlndXJhdGlvbiBsYXlvdXQuCj4gICAgKiBAaW5kZXg6IGRldmljZSBpbmRleAo+
ICAgICogQGZlYXR1cmVzX3ZhbGlkOiB3ZXJlIGZlYXR1cmVzIGluaXRpYWxpemVkPyBmb3IgbGVn
YWN5IGd1ZXN0cwo+ICAgICogQG52cXM6IG1heGltdW0gbnVtYmVyIG9mIHN1cHBvcnRlZCB2aXJ0
cXVldWVzCj4gQEAgLTUyLDYgKzUzLDcgQEAgc3RydWN0IHZkcGFfZGV2aWNlIHsKPiAgIAlzdHJ1
Y3QgZGV2aWNlIGRldjsKPiAgIAlzdHJ1Y3QgZGV2aWNlICpkbWFfZGV2Owo+ICAgCWNvbnN0IHN0
cnVjdCB2ZHBhX2NvbmZpZ19vcHMgKmNvbmZpZzsKPiArCXN0cnVjdCBtdXRleCBjZl9tdXRleDsg
LyogUHJvdGVjdHMgZ2V0L3NldCBjb25maWcgYW5kIGZlYXR1cmVzICovCj4gICAJdW5zaWduZWQg
aW50IGluZGV4Owo+ICAgCWJvb2wgZmVhdHVyZXNfdmFsaWQ7Cj4gICAJaW50IG52cXM7Cj4gZGlm
ZiAtLWdpdCBhL2luY2x1ZGUvdWFwaS9saW51eC92ZHBhLmggYi9pbmNsdWRlL3VhcGkvbGludXgv
dmRwYS5oCj4gaW5kZXggNjZhNDFlNGVjMTYzLi41YzMxZWNjM2I5NTYgMTAwNjQ0Cj4gLS0tIGEv
aW5jbHVkZS91YXBpL2xpbnV4L3ZkcGEuaAo+ICsrKyBiL2luY2x1ZGUvdWFwaS9saW51eC92ZHBh
LmgKPiBAQCAtMTcsNiArMTcsNyBAQCBlbnVtIHZkcGFfY29tbWFuZCB7Cj4gICAJVkRQQV9DTURf
REVWX05FVywKPiAgIAlWRFBBX0NNRF9ERVZfREVMLAo+ICAgCVZEUEFfQ01EX0RFVl9HRVQsCQkv
KiBjYW4gZHVtcCAqLwo+ICsJVkRQQV9DTURfREVWX0NPTkZJR19HRVQsCS8qIGNhbiBkdW1wICov
Cj4gICB9Owo+ICAgCj4gICBlbnVtIHZkcGFfYXR0ciB7Cj4gQEAgLTMzLDYgKzM0LDE2IEBAIGVu
dW0gdmRwYV9hdHRyIHsKPiAgIAlWRFBBX0FUVFJfREVWX01BWF9WUVMsCQkJLyogdTMyICovCj4g
ICAJVkRQQV9BVFRSX0RFVl9NQVhfVlFfU0laRSwJCS8qIHUxNiAqLwo+ICAgCj4gKwlWRFBBX0FU
VFJfREVWX05FVF9DRkdfTUFDQUREUiwJCS8qIGJpbmFyeSAqLwo+ICsJVkRQQV9BVFRSX0RFVl9O
RVRfU1RBVFVTLAkJLyogdTggKi8KPiArCVZEUEFfQVRUUl9ERVZfTkVUX0NGR19NQVhfVlFQLAkJ
LyogdTE2ICovCj4gKwlWRFBBX0FUVFJfREVWX05FVF9DRkdfTVRVLAkJLyogdTE2ICovCj4gKwlW
RFBBX0FUVFJfREVWX05FVF9DRkdfU1BFRUQsCQkvKiB1MTYgKi8KPiArCVZEUEFfQVRUUl9ERVZf
TkVUX0NGR19EVVBMRVgsCQkvKiB1MTYgKi8KPiArCVZEUEFfQVRUUl9ERVZfTkVUX0NGR19SU1Nf
TUFYX0tFWV9MRU4sCS8qIHU4ICovCj4gKwlWRFBBX0FUVFJfREVWX05FVF9DRkdfUlNTX01BWF9J
VF9MRU4sCS8qIHUxNiAqLwo+ICsJVkRQQV9BVFRSX0RFVl9ORVRfQ0ZHX1JTU19IQVNIX1RZUEVT
LAkvKiB1MzIgKi8KCgpJcyBpdCBiZXR0ZXIgdG8gdXNlIGEgc2VwYXJhdGUgZW51bSBmb3IgbmV0
IHNwZWNpZmljIGF0dHJpYnV0ZXM/CgpBbm90aGVyIHF1ZXN0aW9uIChzb3JyeSBpZiBpdCBoYXMg
YmVlbiBhc2tlZCBiZWZvcmUpLiBDYW4gd2Ugc2ltcGx5IApyZXR1cm4gdGhlIGNvbmZpZyAoYmlu
YXJ5KSB0byB0aGUgdXNlcnNwYWNlLCB0aGVuIHVzZXNwYWNlIGNhbiB1c2UgdGhlIApleGlzdGlu
ZyB1QVBJIGxpa2UgdmlydGlvX25ldF9jb25maWcgcGx1cyB0aGUgZmVhdHVyZSB0byBleHBsYWlu
IHRoZSBjb25maWc/CgpUaGFua3MKCgo+ICsKPiAgIAkvKiBuZXcgYXR0cmlidXRlcyBtdXN0IGJl
IGFkZGVkIGFib3ZlIGhlcmUgKi8KPiAgIAlWRFBBX0FUVFJfTUFYLAo+ICAgfTsKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1h
aWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRw
czovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXph
dGlvbg==
