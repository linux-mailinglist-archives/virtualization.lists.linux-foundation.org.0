Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp4.osuosl.org (smtp4.osuosl.org [IPv6:2605:bc80:3010::137])
	by mail.lfdr.de (Postfix) with ESMTPS id C8C564E6CBD
	for <lists.virtualization@lfdr.de>; Fri, 25 Mar 2022 04:04:24 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp4.osuosl.org (Postfix) with ESMTP id 5F1B8415C4;
	Fri, 25 Mar 2022 03:04:23 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
	by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id qU9m1Td-UJKU; Fri, 25 Mar 2022 03:04:22 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp4.osuosl.org (Postfix) with ESMTPS id CE252415AD;
	Fri, 25 Mar 2022 03:04:21 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 27753C0082;
	Fri, 25 Mar 2022 03:04:21 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id A8158C000B
 for <virtualization@lists.linux-foundation.org>;
 Fri, 25 Mar 2022 03:04:19 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id 94E61415AD
 for <virtualization@lists.linux-foundation.org>;
 Fri, 25 Mar 2022 03:04:19 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id HZRvUd2y3h35
 for <virtualization@lists.linux-foundation.org>;
 Fri, 25 Mar 2022 03:04:18 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp4.osuosl.org (Postfix) with ESMTPS id 66C96415AB
 for <virtualization@lists.linux-foundation.org>;
 Fri, 25 Mar 2022 03:04:17 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1648177457;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=voC+CecCW1anKRAUfc/O/ORcM2yqR9AcoKYTefROhcE=;
 b=OajAUJ8h1IDky/JCZcuaFpWScnwQZEEW6WrMBoDEzxvxLlRxdSaem591DbzTZBNAB09qdp
 lFPI/xCLUUnIjHjo3V4pJPSd/VaIYmkQQqZhEW3JXKlJ8d0wXYC3c8ZeEy0yzq67yVPSo7
 77le4rXKPBnJpaBXRDxp38oCB4xuDtI=
Received: from mail-pl1-f197.google.com (mail-pl1-f197.google.com
 [209.85.214.197]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 us-mta-182-XWp31vgiPPe-mKQHyNgMEw-1; Thu, 24 Mar 2022 23:04:15 -0400
X-MC-Unique: XWp31vgiPPe-mKQHyNgMEw-1
Received: by mail-pl1-f197.google.com with SMTP id
 r17-20020a170902ea5100b00153f493fa9aso3489774plg.17
 for <virtualization@lists.linux-foundation.org>;
 Thu, 24 Mar 2022 20:04:15 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:message-id:date:mime-version:user-agent:subject
 :content-language:to:cc:references:from:in-reply-to
 :content-transfer-encoding;
 bh=voC+CecCW1anKRAUfc/O/ORcM2yqR9AcoKYTefROhcE=;
 b=jNefuXX9rWp+2QWsMfyn4OIpQIQDThl5F+sWSkoQXfnAcKNsz3/sOKlNdhPtdubQjL
 YjCSF3WTrD60wHj3sTljMDAdUSX2jolLxUm3eIdnAPFMKO+v8zNLqT8Mw5rDJJnFI8hW
 QGcBztG8RzzzRamXvBP+tla2OfrRUJvhiIW5mIe2EMxDANEO41oqptq/GMhVnNdhlGSX
 A3cJfIuFu7y4wy64BJtpVmCGkKWiU5Xf06IW6ReBqBzkeOixfWqY7RBNce0ysLGGXmNq
 /WO2zU5RrW0aCHmj06pa5P8R7pQe3dXBeJAmug4XX0coE84R/wSGo0FqRW9+dMSTzjrE
 hfbA==
X-Gm-Message-State: AOAM533apaux+f6ZR939B9b6iAF+UMrynJgQW8bEt8NJ3RG6KIQHylIj
 eI3aQVKNFFuheesV+yurOZyuLRYpOHp8PuzAdWYuynJPdlUkFpaBjXQpP6B7wirdNm6x9Pn0kd0
 sO4fz1f9XaimoKpk6R/hGlc/jA7xoAATze6s6hEVDxQ==
X-Received: by 2002:a17:90b:3889:b0:1c6:408b:6b0f with SMTP id
 mu9-20020a17090b388900b001c6408b6b0fmr9990233pjb.43.1648177454497; 
 Thu, 24 Mar 2022 20:04:14 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJwFx3WcIeuaQXTVCvFymtyj1BKnoAAMxv8dD0sHclg3dnO/dKXf9OYdN+lecYfp6b7JEyEV1Q==
X-Received: by 2002:a17:90b:3889:b0:1c6:408b:6b0f with SMTP id
 mu9-20020a17090b388900b001c6408b6b0fmr9990205pjb.43.1648177454090; 
 Thu, 24 Mar 2022 20:04:14 -0700 (PDT)
Received: from [10.72.13.249] ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id
 w61-20020a17090a6bc300b001c7ca8a1467sm2401352pjj.46.2022.03.24.20.04.10
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Thu, 24 Mar 2022 20:04:13 -0700 (PDT)
Message-ID: <f7046303-7d7d-e39f-3c71-3688126cc812@redhat.com>
Date: Fri, 25 Mar 2022 11:04:08 +0800
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0)
 Gecko/20100101 Thunderbird/91.7.0
Subject: Re: [PATCH 3/3] virtio: harden vring IRQ
To: "Michael S. Tsirkin" <mst@redhat.com>
References: <20220324084004.14349-1-jasowang@redhat.com>
 <20220324084004.14349-4-jasowang@redhat.com>
 <20220324064849-mutt-send-email-mst@kernel.org>
From: Jason Wang <jasowang@redhat.com>
In-Reply-To: <20220324064849-mutt-send-email-mst@kernel.org>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: peterz@infradead.org, maz@kernel.org, keirf@google.com,
 linux-kernel@vger.kernel.org, virtualization@lists.linux-foundation.org,
 tglx@linutronix.de
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CuWcqCAyMDIyLzMvMjQg5LiL5Y2INzowMywgTWljaGFlbCBTLiBUc2lya2luIOWGmemBkzoKPiBP
biBUaHUsIE1hciAyNCwgMjAyMiBhdCAwNDo0MDowNFBNICswODAwLCBKYXNvbiBXYW5nIHdyb3Rl
Ogo+PiBUaGlzIGlzIGEgcmV3b3JrIG9uIHRoZSBwcmV2aW91cyBJUlEgaGFyZGVuaW5nIHRoYXQg
aXMgZG9uZSBmb3IKPj4gdmlydGlvLXBjaSB3aGVyZSBzZXZlcmFsIGRyYXdiYWNrcyB3ZXJlIGZv
dW5kIGFuZCB3ZXJlIHJldmVydGVkOgo+Pgo+PiAxKSB0cnkgdG8gdXNlIElSUUZfTk9fQVVUT0VO
IHdoaWNoIGlzIG5vdCBmcmllbmRseSB0byBhZmZpbml0eSBtYW5hZ2VkIElSUQo+PiAgICAgdGhh
dCBpcyB1c2VkIGJ5IHNvbWUgZGV2aWNlIHN1Y2ggYXMgdmlydGlvLWJsawo+PiAyKSBkb25lIG9u
bHkgZm9yIFBDSSB0cmFuc3BvcnQKPj4KPj4gSW4gdGhpcyBwYXRjaCwgd2UgdHJpZXMgdG8gYm9y
cm93IHRoZSBpZGVhIGZyb20gdGhlIElOVFggSVJRIGhhcmRlbmluZwo+PiBpbiB0aGUgcmV2ZXJ0
ZWQgY29tbWl0IDA4MGNkN2MzYWM4NyAoInZpcnRpby1wY2k6IGhhcmRlbiBJTlRYIGludGVycnVw
dHMiKQo+PiBieSBpbnRyb2R1Y2luZyBhIGdsb2JhbCBpcnFfc29mdF9lbmFibGVkIHZhcmlhYmxl
IGZvciBlYWNoCj4+IHZpcnRpb19kZXZpY2UuIFRoZW4gd2UgY2FuIHRvIHRvZ2dsZSBpdCBkdXJp
bmcKPj4gdmlydGlvX3Jlc2V0X2RldmljZSgpL3ZpcnRpb19kZXZpY2VfcmVhZHkoKS4gQSBzeW5j
aG9ybml6ZV9yY3UoKSBpcwo+PiB1c2VkIGluIHZpcnRpb19yZXNldF9kZXZpY2UoKSB0byBzeW5j
aHJvbml6ZSB3aXRoIHRoZSBJUlEgaGFuZGxlcnMuIEluCj4+IHRoZSBmdXR1cmUsIHdlIG1heSBw
cm92aWRlIGNvbmZpZ19vcHMgZm9yIHRoZSB0cmFuc3BvcnQgdGhhdCBkb2Vzbid0Cj4+IHVzZSBJ
UlEuIFdpdGggdGhpcywgdnJpbmdfaW50ZXJydXB0KCkgY2FuIHJldHVybiBjaGVjayBhbmQgZWFy
bHkgaWYKPj4gaXJxX3NvZnRfZW5hYmxlZCBpcyBmYWxzZS4gVGhpcyBsZWFkIHRvIHNtcF9sb2Fk
X2FjcXVpcmUoKSB0byBiZSB1c2VkCj4+IGJ1dCB0aGUgY29zdCBzaG91bGQgYmUgYWNjZXB0YWJs
ZS4KPiBNYXliZSBpdCBzaG91bGQgYmUgYnV0IGlzIGl0PyBDYW4ndCB3ZSB1c2Ugc3luY2hyb25p
emVfaXJxIGluc3RlYWQ/CgoKRXZlbiBpZiB3ZSBhbGxvdyB0aGUgdHJhbnNwb3J0IGRyaXZlciB0
byBzeW5jaG9ybml6ZSB0aHJvdWdoIApzeW5jaHJvbml6ZV9pcnEoKSB3ZSBzdGlsbCBuZWVkIGEg
Y2hlY2sgaW4gdGhlIHZyaW5nX2ludGVycnVwdCgpLgoKV2UgZG8gc29tZXRoaW5nIGxpa2UgdGhl
IGZvbGxvd2luZyBwcmV2aW91c2x5OgoKIMKgwqDCoMKgwqDCoMKgIGlmICghUkVBRF9PTkNFKHZw
X2Rldi0+aW50eF9zb2Z0X2VuYWJsZWQpKQogwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
IHJldHVybiBJUlFfTk9ORTsKCkJ1dCBpdCBsb29rcyBsaWtlIGEgYnVnIHNpbmNlIHNwZWN1bGF0
aXZlIHJlYWQgY2FuIGJlIGRvbmUgYmVmb3JlIHRoZSAKY2hlY2sgd2hlcmUgdGhlIGludGVycnVw
dCBoYW5kbGVyIGNhbid0IHNlZSB0aGUgdW5jb21taXR0ZWQgc2V0dXAgd2hpY2ggCmlzIGRvbmUg
YnkgdGhlIGRyaXZlci4KCgo+Cj4+IFRvIGF2b2lkIGJyZWFraW5nIGxlZ2FjeSBkZXZpY2Ugd2hp
Y2ggY2FuIHNlbmQgSVJRIGJlZm9yZSBEUklWRVJfT0ssIGEKPj4gbW9kdWxlIHBhcmFtZXRlciBp
cyBpbnRyb2R1Y2VkIHRvIGVuYWJsZSB0aGUgaGFyZGVuaW5nIHNvIGZ1bmN0aW9uCj4+IGhhcmRl
bmluZyBpcyBkaXNhYmxlZCBieSBkZWZhdWx0Lgo+IFdoaWNoIGRldmljZXMgYXJlIHRoZXNlPyBI
b3cgY29tZSB0aGV5IHNlbmQgYW4gaW50ZXJydXB0IGJlZm9yZSB0aGVyZQo+IGFyZSBhbnkgYnVm
ZmVycyBpbiBhbnkgcXVldWVzPwoKCkkgY29waWVkIHRoaXMgZnJvbSB0aGUgY29tbWl0IGxvZyBm
b3IgMjJiNzA1MGEwMjRkNwoKIgoKIMKgwqDCoCBUaGlzIGNoYW5nZSB3aWxsIGFsc28gYmVuZWZp
dCBvbGQgaHlwZXJ2aXNvcnMgKGJlZm9yZSAyMDA5KQogwqDCoMKgIHRoYXQgc2VuZCBpbnRlcnJ1
cHRzIHdpdGhvdXQgY2hlY2tpbmcgRFJJVkVSX09LOiBwcmV2aW91c2x5LAogwqDCoMKgIHRoZSBj
YWxsYmFjayBjb3VsZCByYWNlIHdpdGggZHJpdmVyLXNwZWNpZmljIGluaXRpYWxpemF0aW9uLgoi
CgpJZiB0aGlzIGlzIG9ubHkgZm9yIGNvbmZpZyBpbnRlcnJ1cHQsIEkgY2FuIHJlbW92ZSB0aGUg
YWJvdmUgbG9nLgoKCj4KPj4gTm90ZSB0aGF0IHRoZSBoYXJkZW5pbmcgaXMgb25seSBkb25lIGZv
ciB2cmluZyBpbnRlcnJ1cHQgc2luY2UgdGhlCj4+IGNvbmZpZyBpbnRlcnJ1cHQgaGFyZGVuaW5n
IGlzIGFscmVhZHkgZG9uZSBpbiBjb21taXQgMjJiNzA1MGEwMjRkNwo+PiAoInZpcnRpbzogZGVm
ZXIgY29uZmlnIGNoYW5nZWQgbm90aWZpY2F0aW9ucyIpLiBCdXQgdGhlIG1ldGhvZCB0aGF0IGlz
Cj4+IHVzZWQgYnkgY29uZmlnIGludGVycnVwdCBjYW4ndCBiZSByZXVzZWQgYnkgdGhlIHZyaW5n
IGludGVycnVwdAo+PiBoYW5kbGVyIGJlY2F1c2UgaXQgdXNlcyBzcGlubG9jayB0byBkbyB0aGUg
c3luY2hyb25pemF0aW9uIHdoaWNoIGlzCj4+IGV4cGVuc2l2ZS4KPj4KPj4gU2lnbmVkLW9mZi1i
eTogSmFzb24gV2FuZyA8amFzb3dhbmdAcmVkaGF0LmNvbT4KPgo+PiAtLS0KPj4gICBkcml2ZXJz
L3ZpcnRpby92aXJ0aW8uYyAgICAgICB8IDE5ICsrKysrKysrKysrKysrKysrKysKPj4gICBkcml2
ZXJzL3ZpcnRpby92aXJ0aW9fcmluZy5jICB8ICA5ICsrKysrKysrLQo+PiAgIGluY2x1ZGUvbGlu
dXgvdmlydGlvLmggICAgICAgIHwgIDQgKysrKwo+PiAgIGluY2x1ZGUvbGludXgvdmlydGlvX2Nv
bmZpZy5oIHwgMjUgKysrKysrKysrKysrKysrKysrKysrKysrKwo+PiAgIDQgZmlsZXMgY2hhbmdl
ZCwgNTYgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQo+Pgo+PiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy92aXJ0aW8vdmlydGlvLmMgYi9kcml2ZXJzL3ZpcnRpby92aXJ0aW8uYwo+PiBpbmRleCA4
ZGRlNDRlYTA0NGEuLjg1ZTMzMWVmYTljYyAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy92aXJ0aW8v
dmlydGlvLmMKPj4gKysrIGIvZHJpdmVycy92aXJ0aW8vdmlydGlvLmMKPj4gQEAgLTcsNiArNywx
MiBAQAo+PiAgICNpbmNsdWRlIDxsaW51eC9vZi5oPgo+PiAgICNpbmNsdWRlIDx1YXBpL2xpbnV4
L3ZpcnRpb19pZHMuaD4KPj4gICAKPj4gK3N0YXRpYyBib29sIGlycV9oYXJkZW5pbmcgPSBmYWxz
ZTsKPj4gKwo+PiArbW9kdWxlX3BhcmFtKGlycV9oYXJkZW5pbmcsIGJvb2wsIDA0NDQpOwo+PiAr
TU9EVUxFX1BBUk1fREVTQyhpcnFfaGFyZGVuaW5nLAo+PiArCQkgIkRpc2FsYmUgSVJRIHNvZnR3
YXJlIHByb2Nlc3Npbmcgd2hlbiBpdCBpcyBub3QgZXhwZWN0ZWQiKTsKPj4gKwo+PiAgIC8qIFVu
aXF1ZSBudW1iZXJpbmcgZm9yIHZpcnRpbyBkZXZpY2VzLiAqLwo+PiAgIHN0YXRpYyBERUZJTkVf
SURBKHZpcnRpb19pbmRleF9pZGEpOwo+PiAgIAo+PiBAQCAtMjIwLDYgKzIyNiwxNSBAQCBzdGF0
aWMgaW50IHZpcnRpb19mZWF0dXJlc19vayhzdHJ1Y3QgdmlydGlvX2RldmljZSAqZGV2KQo+PiAg
ICAqICovCj4+ICAgdm9pZCB2aXJ0aW9fcmVzZXRfZGV2aWNlKHN0cnVjdCB2aXJ0aW9fZGV2aWNl
ICpkZXYpCj4+ICAgewo+PiArCS8qCj4+ICsJICogVGhlIGJlbG93IHN5bmNocm9uaXplX3JjdSgp
IGd1YXJhbnRlZXMgdGhhdCBhbnkKPj4gKwkgKiBpbnRlcnJ1cHQgZm9yIHRoaXMgbGluZSBhcnJp
dmluZyBhZnRlcgo+PiArCSAqIHN5bmNocm9uaXplX3JjdSgpIGhhcyBjb21wbGV0ZWQgaXMgZ3Vh
cmFudGVlZCB0byBzZWUKPj4gKwkgKiBpcnFfc29mdF9lbmFibGVkID09IGZhbHNlLgo+IE5ld3Mg
dG8gbWUgSSBkaWQgbm90IGtub3cgc3luY2hyb25pemVfcmN1IGhhcyBhbnl0aGluZyB0byBkbwo+
IHdpdGggaW50ZXJydXB0cy4gRGlkIG5vdCB5b3UgaW50ZW5kIHRvIHVzZSBzeW5jaHJvbml6ZV9p
cnE/Cj4gSSBhbSBub3QgZXZlbiAxMDAlIHN1cmUgc3luY2hyb25pemVfcmN1IGlzIGJ5IGRlc2ln
biBhIG1lbW9yeSBiYXJyaWVyCj4gdGhvdWdoIGl0J3MgbW9zdCBsaWtlbHkgaXMgLi4uCgoKQWNj
b3JkaW5nIHRvIHRoZSBjb21tZW50IGFib3ZlIHRyZWUgUkNVIHZlcnNpb24gb2Ygc3luY2hyb25p
emVfcmN1KCk6CgoiIiIKCiDCoCogUkNVIHJlYWQtc2lkZSBjcml0aWNhbCBzZWN0aW9ucyBhcmUg
ZGVsaW1pdGVkIGJ5IHJjdV9yZWFkX2xvY2soKQogwqAqIGFuZCByY3VfcmVhZF91bmxvY2soKSwg
YW5kIG1heSBiZSBuZXN0ZWQuwqAgSW4gYWRkaXRpb24sIGJ1dCBvbmx5IGluCiDCoCogdjUuMCBh
bmQgbGF0ZXIsIHJlZ2lvbnMgb2YgY29kZSBhY3Jvc3Mgd2hpY2ggaW50ZXJydXB0cywgcHJlZW1w
dGlvbiwKIMKgKiBvciBzb2Z0aXJxcyBoYXZlIGJlZW4gZGlzYWJsZWQgYWxzbyBzZXJ2ZSBhcyBS
Q1UgcmVhZC1zaWRlIGNyaXRpY2FsCiDCoCogc2VjdGlvbnMuwqAgVGhpcyBpbmNsdWRlcyBoYXJk
d2FyZSBpbnRlcnJ1cHQgaGFuZGxlcnMsIHNvZnRpcnEgaGFuZGxlcnMsCiDCoCogYW5kIE5NSSBo
YW5kbGVycy4KIiIiCgpTbyBpbnRlcnJ1cHQgaGFuZGxlcnMgYXJlIHRyZWF0ZWQgYXMgcmVhZC1z
aWRlIGNyaXRpY2FsIHNlY3Rpb25zLgoKQW5kIGl0IGhhcyB0aGUgY29tbWVudCBmb3IgZXhwbGFp
biB0aGUgYmFycmllcjoKCiIiIgoKIMKgKiBOb3RlIHRoYXQgdGhpcyBndWFyYW50ZWUgaW1wbGll
cyBmdXJ0aGVyIG1lbW9yeS1vcmRlcmluZyBndWFyYW50ZWVzLgogwqAqIE9uIHN5c3RlbXMgd2l0
aCBtb3JlIHRoYW4gb25lIENQVSwgd2hlbiBzeW5jaHJvbml6ZV9yY3UoKSByZXR1cm5zLAogwqAq
IGVhY2ggQ1BVIGlzIGd1YXJhbnRlZWQgdG8gaGF2ZSBleGVjdXRlZCBhIGZ1bGwgbWVtb3J5IGJh
cnJpZXIgc2luY2UKIMKgKiB0aGUgZW5kIG9mIGl0cyBsYXN0IFJDVSByZWFkLXNpZGUgY3JpdGlj
YWwgc2VjdGlvbiB3aG9zZSBiZWdpbm5pbmcKIMKgKiBwcmVjZWRlZCB0aGUgY2FsbCB0byBzeW5j
aHJvbml6ZV9yY3UoKS7CoCBJbiBhZGRpdGlvbiwgZWFjaCBDUFUgaGF2aW5nCiIiIgoKU28gb24g
U01QIGl0IHByb3ZpZGVzIGEgZnVsbCBiYXJyaWVyLiBBbmQgZm9yIFVQL3RpbnkgUkNVIHdlIGRv
bid0IG5lZWQgCnRoZSBiYXJyaWVyLCBpZiB0aGUgaW50ZXJydXB0IGNvbWUgYWZ0ZXIgV1JJVEVf
T05DRSgpIGl0IHdpbGwgc2VlIHRoZSAKaXJxX3NvZnRfZW5hYmxlZCBhcyBmYWxzZS4KCgo+Cj4+
ICsJICovCj4+ICsJV1JJVEVfT05DRShkZXYtPmlycV9zb2Z0X2VuYWJsZWQsIGZhbHNlKTsKPj4g
KwlzeW5jaHJvbml6ZV9yY3UoKTsKPj4gKwo+PiAgIAlkZXYtPmNvbmZpZy0+cmVzZXQoZGV2KTsK
Pj4gICB9Cj4+ICAgRVhQT1JUX1NZTUJPTF9HUEwodmlydGlvX3Jlc2V0X2RldmljZSk7Cj4gUGxl
YXNlIGFkZCBjb21tZW50IGV4cGxhaW5pbmcgd2hlcmUgaXQgd2lsbCBiZSBlbmFibGVkLgo+IEFs
c28sIHdlICpyZWFsbHkqIGRvbid0IG5lZWQgdG8gc3luY2ggaWYgaXQgd2FzIGFscmVhZHkgZGlz
YWJsZWQsCj4gbGV0J3Mgbm90IGFkZCB1c2VsZXNzIG92ZXJoZWFkIHRvIHRoZSBib290IHNlcXVl
bmNlLgoKCk9rLgoKCj4KPgo+PiBAQCAtNDI3LDYgKzQ0MiwxMCBAQCBpbnQgcmVnaXN0ZXJfdmly
dGlvX2RldmljZShzdHJ1Y3QgdmlydGlvX2RldmljZSAqZGV2KQo+PiAgIAlzcGluX2xvY2tfaW5p
dCgmZGV2LT5jb25maWdfbG9jayk7Cj4+ICAgCWRldi0+Y29uZmlnX2VuYWJsZWQgPSBmYWxzZTsK
Pj4gICAJZGV2LT5jb25maWdfY2hhbmdlX3BlbmRpbmcgPSBmYWxzZTsKPj4gKwlkZXYtPmlycV9z
b2Z0X2NoZWNrID0gaXJxX2hhcmRlbmluZzsKPj4gKwo+PiArCWlmIChkZXYtPmlycV9zb2Z0X2No
ZWNrKQo+PiArCQlkZXZfaW5mbygmZGV2LT5kZXYsICJJUlEgaGFyZGVuaW5nIGlzIGVuYWJsZWRc
biIpOwo+PiAgIAo+PiAgIAkvKiBXZSBhbHdheXMgc3RhcnQgYnkgcmVzZXR0aW5nIHRoZSBkZXZp
Y2UsIGluIGNhc2UgYSBwcmV2aW91cwo+PiAgIAkgKiBkcml2ZXIgbWVzc2VkIGl0IHVwLiAgVGhp
cyBhbHNvIHRlc3RzIHRoYXQgY29kZSBwYXRoIGEgbGl0dGxlLiAqLwo+IG9uZSBvZiB0aGUgcG9p
bnRzIG9mIGhhcmRlbmluZyBpcyBpdCdzIGFsc28gaGVscGZ1bCBmb3IgYnVnZ3kKPiBkZXZpY2Vz
LiB0aGlzIGZsYWcgZGVmZWF0cyB0aGUgcHVycG9zZS4KCgpEbyB5b3UgbWVhbjoKCjEpIHdlIG5l
ZWQgc29tZXRoaW5nIGxpa2UgY29uZmlnX2VuYWJsZT8gVGhpcyBzZWVtcyBub3QgZWFzeSB0byBi
ZSAKaW1wbGVtZW50ZWQgd2l0aG91dCBvYnZpb3VzIG92ZXJoZWFkLCBtYWlubHkgdGhlIHN5bmNo
cm9uaXplIHdpdGggdGhlIAppbnRlcnJ1cHQgaGFuZGxlcnMKCjIpIGVuYWJsZSB0aGlzIGJ5IGRl
ZmF1bHQsIHNvIEkgZG9uJ3Qgb2JqZWN0LCBidXQgdGhpcyBtYXkgaGF2ZSBzb21lIApyaXNrIGZv
ciBvbGQgaHlwZXJ2aXNvcnMKCgo+Cj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpcnRpby92aXJ0
aW9fcmluZy5jIGIvZHJpdmVycy92aXJ0aW8vdmlydGlvX3JpbmcuYwo+PiBpbmRleCA5NjJmMTQ3
N2IxZmEuLjAxNzBmOGM3ODRkOCAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy92aXJ0aW8vdmlydGlv
X3JpbmcuYwo+PiArKysgYi9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fcmluZy5jCj4+IEBAIC0yMTQ0
LDEwICsyMTQ0LDE3IEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBtb3JlX3VzZWQoY29uc3Qgc3RydWN0
IHZyaW5nX3ZpcnRxdWV1ZSAqdnEpCj4+ICAgCXJldHVybiB2cS0+cGFja2VkX3JpbmcgPyBtb3Jl
X3VzZWRfcGFja2VkKHZxKSA6IG1vcmVfdXNlZF9zcGxpdCh2cSk7Cj4+ICAgfQo+PiAgIAo+PiAt
aXJxcmV0dXJuX3QgdnJpbmdfaW50ZXJydXB0KGludCBpcnEsIHZvaWQgKl92cSkKPj4gK2lycXJl
dHVybl90IHZyaW5nX2ludGVycnVwdChpbnQgaXJxLCB2b2lkICp2KQo+PiAgIHsKPj4gKwlzdHJ1
Y3QgdmlydHF1ZXVlICpfdnEgPSB2Owo+PiArCXN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2ID0g
X3ZxLT52ZGV2Owo+PiAgIAlzdHJ1Y3QgdnJpbmdfdmlydHF1ZXVlICp2cSA9IHRvX3Z2cShfdnEp
Owo+PiAgIAo+PiArCWlmICghdmlydGlvX2lycV9zb2Z0X2VuYWJsZWQodmRldikpIHsKPj4gKwkJ
ZGV2X3dhcm5fb25jZSgmdmRldi0+ZGV2LCAidmlydGlvIHZyaW5nIElSUSByYWlzZWQgYmVmb3Jl
IERSSVZFUl9PSyIpOwo+PiArCQlyZXR1cm4gSVJRX05PTkU7Cj4+ICsJfQo+PiArCj4+ICAgCWlm
ICghbW9yZV91c2VkKHZxKSkgewo+PiAgIAkJcHJfZGVidWcoInZpcnRxdWV1ZSBpbnRlcnJ1cHQg
d2l0aCBubyB3b3JrIGZvciAlcFxuIiwgdnEpOwo+PiAgIAkJcmV0dXJuIElSUV9OT05FOwo+PiBk
aWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC92aXJ0aW8uaCBiL2luY2x1ZGUvbGludXgvdmlydGlv
LmgKPj4gaW5kZXggNTQ2NGYzOTg5MTJhLi45NTdkNmFkNjA0YWMgMTAwNjQ0Cj4+IC0tLSBhL2lu
Y2x1ZGUvbGludXgvdmlydGlvLmgKPj4gKysrIGIvaW5jbHVkZS9saW51eC92aXJ0aW8uaAo+PiBA
QCAtOTUsNiArOTUsOCBAQCBkbWFfYWRkcl90IHZpcnRxdWV1ZV9nZXRfdXNlZF9hZGRyKHN0cnVj
dCB2aXJ0cXVldWUgKnZxKTsKPj4gICAgKiBAZmFpbGVkOiBzYXZlZCB2YWx1ZSBmb3IgVklSVElP
X0NPTkZJR19TX0ZBSUxFRCBiaXQgKGZvciByZXN0b3JlKQo+PiAgICAqIEBjb25maWdfZW5hYmxl
ZDogY29uZmlndXJhdGlvbiBjaGFuZ2UgcmVwb3J0aW5nIGVuYWJsZWQKPj4gICAgKiBAY29uZmln
X2NoYW5nZV9wZW5kaW5nOiBjb25maWd1cmF0aW9uIGNoYW5nZSByZXBvcnRlZCB3aGlsZSBkaXNh
YmxlZAo+PiArICogQGlycV9zb2Z0X2NoZWNrOiB3aGV0aGVyIG9yIG5vdCB0byBjaGVjayBAaXJx
X3NvZnRfZW5hYmxlZAo+PiArICogQGlycV9zb2Z0X2VuYWJsZWQ6IGNhbGxiYWNrcyBlbmFibGVk
Cj4+ICAgICogQGNvbmZpZ19sb2NrOiBwcm90ZWN0cyBjb25maWd1cmF0aW9uIGNoYW5nZSByZXBv
cnRpbmcKPj4gICAgKiBAZGV2OiB1bmRlcmx5aW5nIGRldmljZS4KPj4gICAgKiBAaWQ6IHRoZSBk
ZXZpY2UgdHlwZSBpZGVudGlmaWNhdGlvbiAodXNlZCB0byBtYXRjaCBpdCB3aXRoIGEgZHJpdmVy
KS4KPj4gQEAgLTEwOSw2ICsxMTEsOCBAQCBzdHJ1Y3QgdmlydGlvX2RldmljZSB7Cj4+ICAgCWJv
b2wgZmFpbGVkOwo+PiAgIAlib29sIGNvbmZpZ19lbmFibGVkOwo+PiAgIAlib29sIGNvbmZpZ19j
aGFuZ2VfcGVuZGluZzsKPj4gKwlib29sIGlycV9zb2Z0X2NoZWNrOwo+PiArCWJvb2wgaXJxX3Nv
ZnRfZW5hYmxlZDsKPj4gICAJc3BpbmxvY2tfdCBjb25maWdfbG9jazsKPj4gICAJc3BpbmxvY2tf
dCB2cXNfbGlzdF9sb2NrOyAvKiBQcm90ZWN0cyBWUXMgbGlzdCBhY2Nlc3MgKi8KPj4gICAJc3Ry
dWN0IGRldmljZSBkZXY7Cj4+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L3ZpcnRpb19jb25m
aWcuaCBiL2luY2x1ZGUvbGludXgvdmlydGlvX2NvbmZpZy5oCj4+IGluZGV4IGRhZmRjN2Y0OGMw
MS4uOWMxYjYxZjJlNTI1IDEwMDY0NAo+PiAtLS0gYS9pbmNsdWRlL2xpbnV4L3ZpcnRpb19jb25m
aWcuaAo+PiArKysgYi9pbmNsdWRlL2xpbnV4L3ZpcnRpb19jb25maWcuaAo+PiBAQCAtMTc0LDYg
KzE3NCwyNCBAQCBzdGF0aWMgaW5saW5lIGJvb2wgdmlydGlvX2hhc19mZWF0dXJlKGNvbnN0IHN0
cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2LAo+PiAgIAlyZXR1cm4gX192aXJ0aW9fdGVzdF9iaXQo
dmRldiwgZmJpdCk7Cj4+ICAgfQo+PiAgIAo+PiArLyoKPj4gKyAqIHZpcnRpb19pcnFfc29mdF9l
bmFibGVkOiB3aGV0aGVyIHdlIGNhbiBleGVjdXRlIGNhbGxiYWNrcwo+PiArICogQHZkZXY6IHRo
ZSBkZXZpY2UKPj4gKyAqLwo+PiArc3RhdGljIGlubGluZSBib29sIHZpcnRpb19pcnFfc29mdF9l
bmFibGVkKGNvbnN0IHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2KQo+PiArewo+PiArCWlmICgh
dmRldi0+aXJxX3NvZnRfY2hlY2spCj4+ICsJCXJldHVybiB0cnVlOwo+PiArCj4+ICsJLyoKPj4g
KwkgKiBSZWFkIGlycV9zb2Z0X2VuYWJsZWQgYmVmb3JlIHJlYWRpbmcgb3RoZXIgZGV2aWNlIHNw
ZWNpZmljCj4+ICsJICogZGF0YS4gUGFyaWVkIHdpdGggc21wX3N0b3JlX3JlbGFzZSgpIGluCj4g
cGFpcmVkCgoKV2lsbCBmaXguCgpUaGFua3MKCgo+Cj4+ICsJICogdmlydGlvX2RldmljZV9yZWFk
eSgpIGFuZCBXUklURV9PTkNFKCkvc3luY2hyb25pemVfcmN1KCkgaW4KPj4gKwkgKiB2aXJ0aW9f
cmVzZXRfZGV2aWNlKCkuCj4+ICsJICovCj4+ICsJcmV0dXJuIHNtcF9sb2FkX2FjcXVpcmUoJnZk
ZXYtPmlycV9zb2Z0X2VuYWJsZWQpOwo+PiArfQo+PiArCj4+ICAgLyoqCj4+ICAgICogdmlydGlv
X2hhc19kbWFfcXVpcmsgLSBkZXRlcm1pbmUgd2hldGhlciB0aGlzIGRldmljZSBoYXMgdGhlIERN
QSBxdWlyawo+PiAgICAqIEB2ZGV2OiB0aGUgZGV2aWNlCj4+IEBAIC0yMzYsNiArMjU0LDEzIEBA
IHZvaWQgdmlydGlvX2RldmljZV9yZWFkeShzdHJ1Y3QgdmlydGlvX2RldmljZSAqZGV2KQo+PiAg
IAlpZiAoZGV2LT5jb25maWctPmVuYWJsZV9jYnMpCj4+ICAgICAgICAgICAgICAgICAgICAgZGV2
LT5jb25maWctPmVuYWJsZV9jYnMoZGV2KTsKPj4gICAKPj4gKwkvKgo+PiArCSAqIENvbW1pdCB0
aGUgZHJpdmVyIHNldHVwIGJlZm9yZSBlbmFibGluZyB0aGUgdmlydHF1ZXVlCj4+ICsJICogY2Fs
bGJhY2tzLiBQYXJpZWQgd2l0aCBzbXBfbG9hZF9hY3VxaXJlKCkgaW4KPj4gKwkgKiB2aXJ0aW9f
aXJxX3NvZnRfZW5hYmxlZCgpCj4+ICsJICovCj4+ICsJc21wX3N0b3JlX3JlbGVhc2UoJmRldi0+
aXJxX3NvZnRfZW5hYmxlZCwgdHJ1ZSk7Cj4+ICsKPj4gICAJQlVHX09OKHN0YXR1cyAmIFZJUlRJ
T19DT05GSUdfU19EUklWRVJfT0spOwo+PiAgIAlkZXYtPmNvbmZpZy0+c2V0X3N0YXR1cyhkZXYs
IHN0YXR1cyB8IFZJUlRJT19DT05GSUdfU19EUklWRVJfT0spOwo+PiAgIH0KPj4gLS0gCj4+IDIu
MjUuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KVmly
dHVhbGl6YXRpb24gbWFpbGluZyBsaXN0ClZpcnR1YWxpemF0aW9uQGxpc3RzLmxpbnV4LWZvdW5k
YXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGludXhmb3VuZGF0aW9uLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL3ZpcnR1YWxpemF0aW9u
