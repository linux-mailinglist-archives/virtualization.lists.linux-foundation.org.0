Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
	by mail.lfdr.de (Postfix) with ESMTPS id 0F9C168D50C
	for <lists.virtualization@lfdr.de>; Tue,  7 Feb 2023 12:05:27 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp3.osuosl.org (Postfix) with ESMTP id 95C9060E7E;
	Tue,  7 Feb 2023 11:05:25 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 95C9060E7E
Authentication-Results: smtp3.osuosl.org;
	dkim=fail reason="signature verification failed" (2048-bit key) header.d=igel-co-jp.20210112.gappssmtp.com header.i=@igel-co-jp.20210112.gappssmtp.com header.a=rsa-sha256 header.s=20210112 header.b=0dPAoABe
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
	by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id g-DS77GMyeTE; Tue,  7 Feb 2023 11:05:24 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp3.osuosl.org (Postfix) with ESMTPS id F129560E66;
	Tue,  7 Feb 2023 11:05:23 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org F129560E66
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 2D65CC007C;
	Tue,  7 Feb 2023 11:05:23 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 69556C002B
 for <virtualization@lists.linux-foundation.org>;
 Tue,  7 Feb 2023 11:05:22 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id 44BCB417B2
 for <virtualization@lists.linux-foundation.org>;
 Tue,  7 Feb 2023 11:05:22 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 44BCB417B2
Authentication-Results: smtp4.osuosl.org;
 dkim=pass (2048-bit key) header.d=igel-co-jp.20210112.gappssmtp.com
 header.i=@igel-co-jp.20210112.gappssmtp.com header.a=rsa-sha256
 header.s=20210112 header.b=0dPAoABe
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id YOA0AyupsH2R
 for <virtualization@lists.linux-foundation.org>;
 Tue,  7 Feb 2023 11:05:21 +0000 (UTC)
X-Greylist: whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org D23A8417B0
Received: from mail-vk1-xa31.google.com (mail-vk1-xa31.google.com
 [IPv6:2607:f8b0:4864:20::a31])
 by smtp4.osuosl.org (Postfix) with ESMTPS id D23A8417B0
 for <virtualization@lists.linux-foundation.org>;
 Tue,  7 Feb 2023 11:05:20 +0000 (UTC)
Received: by mail-vk1-xa31.google.com with SMTP id v5so7639074vkc.10
 for <virtualization@lists.linux-foundation.org>;
 Tue, 07 Feb 2023 03:05:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=igel-co-jp.20210112.gappssmtp.com; s=20210112;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:from:to:cc:subject:date
 :message-id:reply-to;
 bh=GoPHPcTm8H8ze7FW2FRADE/W8w+P/SQ3Sd3300xGuo4=;
 b=0dPAoABezthwk9gv6NoB2KkyYvtpOVASTxfXFscCZF/vXmIhvKj4DrD/GzOAOrARik
 ivToWBkJVLLcSS9KZvgnWlwilnv+D1173Ed+WALVXqS6t6pEjvKFgnloZq1j4ADaXh1Q
 AT+gpssI28cNPKFIjxz4Ak+UlsfBubhD1cAX6ZggZ0sYTFXnj7guo1zmvth6y3mjjL00
 xdUw1z2IX3DT2P7ik5FJ7hnGtFjD30fS0W8aIZrbIn91cSjrC5DtomBwqywVLTUeU+Mf
 AvaVQT908ZvHMnrSsXewNQXjD7SVvAVL870MOHUot35VxWiq6zvzZ+4EYvp05Yx0EEgy
 C0+A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=GoPHPcTm8H8ze7FW2FRADE/W8w+P/SQ3Sd3300xGuo4=;
 b=gf3F0xeSpCsLmDe3XFUUV2YygDLqR5J/m9rqM2Zl3Va4SudIWSuwzp+n+z8s3Eb4uR
 cuN996zEZaGcXIFf/myFP7KES6WGGAYwbLJ2IDzuHV7u0UXGy0B9XzcwNgbjWdIMBP0o
 m/2nA/s2Zs3a86Q1YCrXDxVSPEe/3r1/wWeO4iUjObzgoRMP/tlMv+O0+mNum3uIBJUY
 c2WtPk6SPRVnCboLZ7y1ZlPBv/GQJ/1AtiLjXnSiPG+TIZa2J02j7QVbPB8qtgPyKHaJ
 5uddgCXkEJkIN3u2DUvGuy5fW7Ol75lUzuAK5l8e85CGwHvlKcAyyoQURn/ydgvN++p+
 nIGQ==
X-Gm-Message-State: AO0yUKVAORnWMgMbfNmufttf8eEFXq/XZZ0qiPsgzIEkNO94m+/clnU9
 Je2PffcL6tYJDdsMpvQCQ7zfuiGU9AV8/Opa79EEnQ==
X-Google-Smtp-Source: AK7set9nK8EJsglFuTDfip/AK3uw96RbrvDbyGTM4gE2EsRI6AGAzZVwnmVNnIBHUjxBZeYPdJ4Hxa6z7WxUVxSCdz0=
X-Received: by 2002:a1f:9d02:0:b0:3dd:f6a9:4b73 with SMTP id
 g2-20020a1f9d02000000b003ddf6a94b73mr348309vke.12.1675767919671; Tue, 07 Feb
 2023 03:05:19 -0800 (PST)
MIME-Version: 1.0
References: <20230203100418.2981144-1-mie@igel.co.jp>
 <20230203100418.2981144-4-mie@igel.co.jp>
 <20230203051844-mutt-send-email-mst@kernel.org>
In-Reply-To: <20230203051844-mutt-send-email-mst@kernel.org>
From: Shunsuke Mie <mie@igel.co.jp>
Date: Tue, 7 Feb 2023 20:05:08 +0900
Message-ID: <CANXvt5r10bec+X=j35ertph9i+d08bkxDG7ffwUjc5z_1NgKtw@mail.gmail.com>
Subject: Re: [RFC PATCH 3/4] PCI: endpoint: Introduce virtio library for EP
 functions
To: "Michael S. Tsirkin" <mst@redhat.com>
Cc: Kishon Vijay Abraham I <kishon@kernel.org>,
 =?UTF-8?Q?Krzysztof_Wilczy=C5=84ski?= <kw@linux.com>,
 Takanari Hayama <taki@igel.co.jp>, Manivannan Sadhasivam <mani@kernel.org>,
 linux-pci@vger.kernel.org, Lorenzo Pieralisi <lpieralisi@kernel.org>,
 Frank Li <Frank.Li@nxp.com>, linux-kernel@vger.kernel.org,
 virtualization@lists.linux-foundation.org, Ren Zhijie <renzhijie2@huawei.com>,
 Jon Mason <jdmason@kudzu.us>, Bjorn Helgaas <bhelgaas@google.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

MjAyM+W5tDLmnIgz5pelKOmHkSkgMTk6MjAgTWljaGFlbCBTLiBUc2lya2luIDxtc3RAcmVkaGF0
LmNvbT46Cj4KPiBPbiBGcmksIEZlYiAwMywgMjAyMyBhdCAwNzowNDoxN1BNICswOTAwLCBTaHVu
c3VrZSBNaWUgd3JvdGU6Cj4gPiBBZGQgYSBuZXcgbGlicmFyeSB0byBhY2Nlc3MgYSB2aXJ0aW8g
cmluZyBsb2NhdGVkIG9uIFBDSWUgaG9zdCBtZW1vcnkuIFRoZQo+ID4gbGlicmFyeSBnZW5lcmF0
ZXMgc3RydWN0IHBjaV9lcGZfdnJpbmdoIHRoYXQgaXMgaW50cm9kdWNlZCBpbiB0aGlzIHBhdGNo
Lgo+ID4gVGhlIHN0cnVjdCBoYXMgYSB2cmluZ2ggbWVtYmVyLCBzbyB2cmluZ2ggQVBJcyBjYW4g
YmUgdXNlZCB0byBhY2Nlc3MgdGhlCj4gPiB2aXJ0aW8gcmluZy4KPiA+Cj4gPiBTaWduZWQtb2Zm
LWJ5OiBTaHVuc3VrZSBNaWUgPG1pZUBpZ2VsLmNvLmpwPgo+ID4gU2lnbmVkLW9mZi1ieTogVGFr
YW5hcmkgSGF5YW1hIDx0YWtpQGlnZWwuY28uanA+Cj4gPiAtLS0KPiA+ICBkcml2ZXJzL3BjaS9l
bmRwb2ludC9LY29uZmlnICAgICAgICAgIHwgICA3ICsrCj4gPiAgZHJpdmVycy9wY2kvZW5kcG9p
bnQvTWFrZWZpbGUgICAgICAgICB8ICAgMSArCj4gPiAgZHJpdmVycy9wY2kvZW5kcG9pbnQvcGNp
LWVwZi12aXJ0aW8uYyB8IDExMyArKysrKysrKysrKysrKysrKysrKysrKysrKwo+ID4gIGluY2x1
ZGUvbGludXgvcGNpLWVwZi12aXJ0aW8uaCAgICAgICAgfCAgMjUgKysrKysrCj4gPiAgNCBmaWxl
cyBjaGFuZ2VkLCAxNDYgaW5zZXJ0aW9ucygrKQo+ID4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2
ZXJzL3BjaS9lbmRwb2ludC9wY2ktZXBmLXZpcnRpby5jCj4gPiAgY3JlYXRlIG1vZGUgMTAwNjQ0
IGluY2x1ZGUvbGludXgvcGNpLWVwZi12aXJ0aW8uaAo+ID4KPiA+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL3BjaS9lbmRwb2ludC9LY29uZmlnIGIvZHJpdmVycy9wY2kvZW5kcG9pbnQvS2NvbmZpZwo+
ID4gaW5kZXggMTdiYmRjOWJiZGUwLi4wNzI3NmRjYzQzYzggMTAwNjQ0Cj4gPiAtLS0gYS9kcml2
ZXJzL3BjaS9lbmRwb2ludC9LY29uZmlnCj4gPiArKysgYi9kcml2ZXJzL3BjaS9lbmRwb2ludC9L
Y29uZmlnCj4gPiBAQCAtMjgsNiArMjgsMTMgQEAgY29uZmlnIFBDSV9FTkRQT0lOVF9DT05GSUdG
Uwo+ID4gICAgICAgICAgY29uZmlndXJlIHRoZSBlbmRwb2ludCBmdW5jdGlvbiBhbmQgdXNlZCB0
byBiaW5kIHRoZQo+ID4gICAgICAgICAgZnVuY3Rpb24gd2l0aCBhIGVuZHBvaW50IGNvbnRyb2xs
ZXIuCj4gPgo+ID4gK2NvbmZpZyBQQ0lfRU5EUE9JTlRfVklSVElPCj4gPiArICAgICB0cmlzdGF0
ZQo+ID4gKyAgICAgZGVwZW5kcyBvbiBQQ0lfRU5EUE9JTlQKPiA+ICsgICAgIHNlbGVjdCBWSE9T
VF9JT01FTQo+ID4gKyAgICAgaGVscAo+ID4gKyAgICAgICBUT0RPIHVwZGF0ZSB0aGlzIGNvbW1l
bnQKPiA+ICsKPiA+ICBzb3VyY2UgImRyaXZlcnMvcGNpL2VuZHBvaW50L2Z1bmN0aW9ucy9LY29u
ZmlnIgo+ID4KPiA+ICBlbmRtZW51Cj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9wY2kvZW5kcG9p
bnQvTWFrZWZpbGUgYi9kcml2ZXJzL3BjaS9lbmRwb2ludC9NYWtlZmlsZQo+ID4gaW5kZXggOTVi
MmZlNDdlM2IwLi45NTcxMmYwYTEzZDEgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL3BjaS9lbmRw
b2ludC9NYWtlZmlsZQo+ID4gKysrIGIvZHJpdmVycy9wY2kvZW5kcG9pbnQvTWFrZWZpbGUKPiA+
IEBAIC00LDUgKzQsNiBAQAo+ID4gICMKPiA+Cj4gPiAgb2JqLSQoQ09ORklHX1BDSV9FTkRQT0lO
VF9DT05GSUdGUykgICs9IHBjaS1lcC1jZnMubwo+ID4gK29iai0kKENPTkZJR19QQ0lfRU5EUE9J
TlRfVklSVElPKSAgICArPSBwY2ktZXBmLXZpcnRpby5vCj4gPiAgb2JqLSQoQ09ORklHX1BDSV9F
TkRQT0lOVCkgICAgICAgICAgICs9IHBjaS1lcGMtY29yZS5vIHBjaS1lcGYtY29yZS5vXAo+ID4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2ktZXBjLW1lbS5vIGZ1
bmN0aW9ucy8KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3BjaS9lbmRwb2ludC9wY2ktZXBmLXZp
cnRpby5jIGIvZHJpdmVycy9wY2kvZW5kcG9pbnQvcGNpLWVwZi12aXJ0aW8uYwo+ID4gbmV3IGZp
bGUgbW9kZSAxMDA2NDQKPiA+IGluZGV4IDAwMDAwMDAwMDAwMC4uNzEzNGNhNDA3YTAzCj4gPiAt
LS0gL2Rldi9udWxsCj4gPiArKysgYi9kcml2ZXJzL3BjaS9lbmRwb2ludC9wY2ktZXBmLXZpcnRp
by5jCj4gPiBAQCAtMCwwICsxLDExMyBAQAo+ID4gKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVy
OiBHUEwtMi4wCj4gPiArLyoKPiA+ICsgKiBWaXJ0aW8gbGlicmFyeSBmb3IgUENJIEVuZHBvaW50
IGZ1bmN0aW9uCj4gPiArICovCj4gPiArI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPgo+ID4gKyNp
bmNsdWRlIDxsaW51eC9wY2ktZXBmLXZpcnRpby5oPgo+ID4gKyNpbmNsdWRlIDxsaW51eC9wY2kt
ZXBjLmg+Cj4gPiArI2luY2x1ZGUgPGxpbnV4L3ZpcnRpb19wY2kuaD4KPiA+ICsKPiA+ICtzdGF0
aWMgdm9pZCBfX2lvbWVtICplcGZfdmlydGlvX21hcF92cShzdHJ1Y3QgcGNpX2VwZiAqZXBmLCB1
MzIgcGZuLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVfdCBz
aXplLCBwaHlzX2FkZHJfdCAqdnFfcGh5cykKPiA+ICt7Cj4gPiArICAgICBpbnQgZXJyOwo+ID4g
KyAgICAgcGh5c19hZGRyX3QgdnFfYWRkcjsKPiA+ICsgICAgIHNpemVfdCB2cV9zaXplOwo+ID4g
KyAgICAgdm9pZCBfX2lvbWVtICp2cV92aXJ0Owo+ID4gKwo+ID4gKyAgICAgdnFfYWRkciA9IChw
aHlzX2FkZHJfdClwZm4gPDwgVklSVElPX1BDSV9RVUVVRV9BRERSX1NISUZUOwo+ID4gKwo+ID4g
KyAgICAgdnFfc2l6ZSA9IHZyaW5nX3NpemUoc2l6ZSwgVklSVElPX1BDSV9WUklOR19BTElHTikg
KyAxMDA7Cj4KPiAxMDA/Ckl0IGlzIGEgbWlzdGFrZSBhbmQgd2lsbCBiZSByZW1vdmVkLgo+IEFs
c28gdWdoLCB0aGlzIHVzZXMgdGhlIGxlZ2FjeSB2cmluZ19zaXplLgo+IERpZCBub3QgbG9vayBj
bG9zZWx5IGJ1dCBpcyBhbGwgdGhpcyBsaW1pdGVkIHRvIGxlZ2FjeSB2aXJ0aW8gdGhlbj8KPiBQ
bHMgbWFrZSBzdXJlIHlvdSBjb2RlIGJ1aWxkcyB3aXRoICNkZWZpbmUgVklSVElPX1JJTkdfTk9f
TEVHQUNZLgpUaGFua3MgZm9yIHlvdXIgc3VnZ2VzdGlvbiwgYnV0IHRoaXMgZGV2aWNlIHdvcmtz
IGFzIGEgbGVnYWN5IGRldmljZS4KSW4gdGhpcyBjYXNlLCB0aGUgTk9fTEVHQUNZIG1hY3JvIGNh
biBub3QgYXBwbGljYWJsZSBJIHRoaW5rLiBJcyB0aGF0IHJpZ2h0Pwo+ID4gKwo+ID4gKyAgICAg
dnFfdmlydCA9IHBjaV9lcGNfbWVtX2FsbG9jX2FkZHIoZXBmLT5lcGMsIHZxX3BoeXMsIHZxX3Np
emUpOwo+ID4gKyAgICAgaWYgKCF2cV92aXJ0KSB7Cj4gPiArICAgICAgICAgICAgIHByX2Vycigi
RmFpbGVkIHRvIGFsbG9jYXRlIGVwYyBtZW1vcnlcbiIpOwo+ID4gKyAgICAgICAgICAgICByZXR1
cm4gRVJSX1BUUigtRU5PTUVNKTsKPiA+ICsgICAgIH0KPiA+ICsKPiA+ICsgICAgIGVyciA9IHBj
aV9lcGNfbWFwX2FkZHIoZXBmLT5lcGMsIGVwZi0+ZnVuY19ubywgZXBmLT52ZnVuY19ubywgKnZx
X3BoeXMsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZxX2FkZHIsIHZxX3NpemUp
Owo+ID4gKyAgICAgaWYgKGVycikgewo+ID4gKyAgICAgICAgICAgICBwcl9lcnIoIkZhaWxlZCB0
byBtYXAgdmlydHVxdWV1ZSB0byBsb2NhbCIpOwo+ID4gKyAgICAgICAgICAgICBnb3RvIGVycl9m
cmVlOwo+ID4gKyAgICAgfQo+ID4gKwo+ID4gKyAgICAgcmV0dXJuIHZxX3ZpcnQ7Cj4gPiArCj4g
PiArZXJyX2ZyZWU6Cj4gPiArICAgICBwY2lfZXBjX21lbV9mcmVlX2FkZHIoZXBmLT5lcGMsICp2
cV9waHlzLCB2cV92aXJ0LCB2cV9zaXplKTsKPiA+ICsKPiA+ICsgICAgIHJldHVybiBFUlJfUFRS
KGVycik7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyB2b2lkIGVwZl92aXJ0aW9fdW5tYXBfdnEo
c3RydWN0IHBjaV9lcGYgKmVwZiwgdm9pZCBfX2lvbWVtICp2cV92aXJ0LAo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcGh5c19hZGRyX3QgdnFfcGh5cywgc2l6ZV90IHNpemUpCj4g
PiArewo+ID4gKyAgICAgcGNpX2VwY191bm1hcF9hZGRyKGVwZi0+ZXBjLCBlcGYtPmZ1bmNfbm8s
IGVwZi0+dmZ1bmNfbm8sIHZxX3BoeXMpOwo+ID4gKyAgICAgcGNpX2VwY19tZW1fZnJlZV9hZGRy
KGVwZi0+ZXBjLCB2cV9waHlzLCB2cV92aXJ0LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHZyaW5nX3NpemUoc2l6ZSwgVklSVElPX1BDSV9WUklOR19BTElHTikpOwo+ID4gK30KPiA+
ICsKPiA+ICsvKioKPiA+ICsgKiBwY2lfZXBmX3ZpcnRpb19hbGxvY192cmluZ2goKSAtIGFsbG9j
YXRlIGVwZiB2cmluZ2ggZnJvbSBAcGZuCj4gPiArICogQGVwZjogdGhlIEVQRiBkZXZpY2UgdGhh
dCBjb21tdW5pY2F0ZXMgdG8gaG9zdCB2aXJ0aW8gZGlydmVyCj4gPiArICogQGZlYXR1cmVzOiB0
aGUgdmlydGlvIGZlYXR1cmVzIG9mIGRldmljZQo+ID4gKyAqIEBwZm46IHBhZ2UgZnJhbWUgbnVt
YmVyIG9mIHZpcnRxdWV1ZSBsb2NhdGVkIG9uIGhvc3QgbWVtb3J5LiBJdCBpcwo+ID4gKyAqICAg
ICAgICAgICBwYXNzZWQgZHVyaW5nIHZpcnRxdWV1ZSBuZWdvdGlhdGlvbi4KPiA+ICsgKiBAc2l6
ZTogYSBsZW5ndGggb2YgdmlydHF1ZXVlCj4gPiArICovCj4gPiArc3RydWN0IHBjaV9lcGZfdnJp
bmdoICpwY2lfZXBmX3ZpcnRpb19hbGxvY192cmluZ2goc3RydWN0IHBjaV9lcGYgKmVwZiwKPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1NjQgZmVh
dHVyZXMsIHUzMiBwZm4sCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2l6ZV90IHNpemUpCj4gPiArewo+ID4gKyAgICAgaW50IGVycjsKPiA+ICsg
ICAgIHN0cnVjdCB2cmluZyB2cmluZzsKPiA+ICsgICAgIHN0cnVjdCBwY2lfZXBmX3ZyaW5naCAq
ZXZyaDsKPiA+ICsKPiA+ICsgICAgIGV2cmggPSBrbWFsbG9jKHNpemVvZigqZXZyaCksIEdGUF9L
RVJORUwpOwo+ID4gKyAgICAgaWYgKCFldnJoKSB7Cj4gPiArICAgICAgICAgICAgIGVyciA9IC1F
Tk9NRU07Cj4gPiArICAgICAgICAgICAgIGdvdG8gZXJyX3VubWFwX3ZxOwo+ID4gKyAgICAgfQo+
ID4gKwo+ID4gKyAgICAgZXZyaC0+c2l6ZSA9IHNpemU7Cj4gPiArCj4gPiArICAgICBldnJoLT52
aXJ0ID0gZXBmX3ZpcnRpb19tYXBfdnEoZXBmLCBwZm4sIHNpemUsICZldnJoLT5waHlzKTsKPiA+
ICsgICAgIGlmIChJU19FUlIoZXZyaC0+dmlydCkpCj4gPiArICAgICAgICAgICAgIHJldHVybiBl
dnJoLT52aXJ0Owo+ID4gKwo+ID4gKyAgICAgdnJpbmdfaW5pdCgmdnJpbmcsIHNpemUsIGV2cmgt
PnZpcnQsIFZJUlRJT19QQ0lfVlJJTkdfQUxJR04pOwo+ID4gKwo+ID4gKyAgICAgZXJyID0gdnJp
bmdoX2luaXRfaW9tZW0oJmV2cmgtPnZyaCwgZmVhdHVyZXMsIHNpemUsIGZhbHNlLCBHRlBfS0VS
TkVMLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnJpbmcuZGVzYywgdnJpbmcu
YXZhaWwsIHZyaW5nLnVzZWQpOwo+ID4gKyAgICAgaWYgKGVycikKPiA+ICsgICAgICAgICAgICAg
Z290byBlcnJfZnJlZV9lcGZfdnE7Cj4gPiArCj4gPiArICAgICByZXR1cm4gZXZyaDsKPiA+ICsK
PiA+ICtlcnJfZnJlZV9lcGZfdnE6Cj4gPiArICAgICBrZnJlZShldnJoKTsKPiA+ICsKPiA+ICtl
cnJfdW5tYXBfdnE6Cj4gPiArICAgICBlcGZfdmlydGlvX3VubWFwX3ZxKGVwZiwgZXZyaC0+dmly
dCwgZXZyaC0+cGh5cywgZXZyaC0+c2l6ZSk7Cj4gPiArCj4gPiArICAgICByZXR1cm4gRVJSX1BU
UihlcnIpOwo+ID4gK30KPiA+ICtFWFBPUlRfU1lNQk9MX0dQTChwY2lfZXBmX3ZpcnRpb19hbGxv
Y192cmluZ2gpOwo+ID4gKwo+ID4gKy8qKgo+ID4gKyAqIHBjaV9lcGZfdmlydGlvX2ZyZWVfdnJp
bmdoKCkgLSByZWxlYXNlIGFsbG9jYXRlZCBlcGYgdnJpbmcKPiA+ICsgKiBAZXBmOiB0aGUgRVBG
IGRldmljZSB0aGF0IGNvbW11bmljYXRlcyB0byBob3N0IHZpcnRpbyBkaXJ2ZXIKPiA+ICsgKiBA
ZXZyaDogZXBmIHZyaW5naCB0byBmcmVlCj4gPiArICovCj4gPiArdm9pZCBwY2lfZXBmX3ZpcnRp
b19mcmVlX3ZyaW5naChzdHJ1Y3QgcGNpX2VwZiAqZXBmLAo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc3RydWN0IHBjaV9lcGZfdnJpbmdoICpldnJoKQo+ID4gK3sKPiA+ICsgICAg
IGVwZl92aXJ0aW9fdW5tYXBfdnEoZXBmLCBldnJoLT52aXJ0LCBldnJoLT5waHlzLCBldnJoLT5z
aXplKTsKPiA+ICsgICAgIGtmcmVlKGV2cmgpOwo+ID4gK30KPiA+ICtFWFBPUlRfU1lNQk9MX0dQ
TChwY2lfZXBmX3ZpcnRpb19mcmVlX3ZyaW5naCk7Cj4gPiArCj4gPiArTU9EVUxFX0RFU0NSSVBU
SU9OKCJQQ0kgRVAgVmlydGlvIExpYnJhcnkiKTsKPiA+ICtNT0RVTEVfQVVUSE9SKCJTaHVuc3Vr
ZSBNaWUgPG1pZUBpZ2VsLmNvLmpwPiIpOwo+ID4gK01PRFVMRV9MSUNFTlNFKCJHUEwiKTsKPiA+
IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L3BjaS1lcGYtdmlydGlvLmggYi9pbmNsdWRlL2xp
bnV4L3BjaS1lcGYtdmlydGlvLmgKPiA+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gPiBpbmRleCAw
MDAwMDAwMDAwMDAuLmFlMDkwODc5MTlhOQo+ID4gLS0tIC9kZXYvbnVsbAo+ID4gKysrIGIvaW5j
bHVkZS9saW51eC9wY2ktZXBmLXZpcnRpby5oCj4gPiBAQCAtMCwwICsxLDI1IEBACj4gPiArLyog
U1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAgKi8KPiA+ICsvKgo+ID4gKyAqIFBDSSBF
bmRwb2ludCBGdW5jdGlvbiAoRVBGKSBmb3IgdmlydGlvIGRlZmluaXRpb25zCj4gPiArICovCj4g
PiArI2lmbmRlZiBfX0xJTlVYX1BDSV9FUEZfVklSVElPX0gKPiA+ICsjZGVmaW5lIF9fTElOVVhf
UENJX0VQRl9WSVJUSU9fSAo+ID4gKwo+ID4gKyNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgo+ID4g
KyNpbmNsdWRlIDxsaW51eC92cmluZ2guaD4KPiA+ICsjaW5jbHVkZSA8bGludXgvcGNpLWVwZi5o
Pgo+ID4gKwo+ID4gK3N0cnVjdCBwY2lfZXBmX3ZyaW5naCB7Cj4gPiArICAgICBzdHJ1Y3QgdnJp
bmdoIHZyaDsKPiA+ICsgICAgIHZvaWQgX19pb21lbSAqdmlydDsKPiA+ICsgICAgIHBoeXNfYWRk
cl90IHBoeXM7Cj4gPiArICAgICBzaXplX3Qgc2l6ZTsKPiA+ICt9Owo+ID4gKwo+ID4gK3N0cnVj
dCBwY2lfZXBmX3ZyaW5naCAqcGNpX2VwZl92aXJ0aW9fYWxsb2NfdnJpbmdoKHN0cnVjdCBwY2lf
ZXBmICplcGYsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdTY0IGZlYXR1cmVzLCB1MzIgcGZuLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVfdCBzaXplKTsKPiA+ICt2b2lkIHBjaV9lcGZf
dmlydGlvX2ZyZWVfdnJpbmdoKHN0cnVjdCBwY2lfZXBmICplcGYsCj4gPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgcGNpX2VwZl92cmluZ2ggKmV2cmgpOwo+ID4gKwo+ID4g
KyNlbmRpZiAvLyBfX0xJTlVYX1BDSV9FUEZfVklSVElPX0gKPiA+IC0tCj4gPiAyLjI1LjEKPgpC
ZXN0LApTaHVuc3VrZQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpWaXJ0dWFsaXphdGlvbiBtYWlsaW5nIGxpc3QKVmlydHVhbGl6YXRpb25AbGlzdHMubGlu
dXgtZm91bmRhdGlvbi5vcmcKaHR0cHM6Ly9saXN0cy5saW51eGZvdW5kYXRpb24ub3JnL21haWxt
YW4vbGlzdGluZm8vdmlydHVhbGl6YXRpb24=
