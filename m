Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
	by mail.lfdr.de (Postfix) with ESMTPS id 27B29707C63
	for <lists.virtualization@lfdr.de>; Thu, 18 May 2023 10:58:01 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp3.osuosl.org (Postfix) with ESMTP id 6CB6860F24;
	Thu, 18 May 2023 08:57:59 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 6CB6860F24
Authentication-Results: smtp3.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=bXTabYjz
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
	by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mxWIaqN1C_PH; Thu, 18 May 2023 08:57:58 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp3.osuosl.org (Postfix) with ESMTPS id C843160F67;
	Thu, 18 May 2023 08:57:57 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org C843160F67
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 06302C007E;
	Thu, 18 May 2023 08:57:57 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [IPv6:2605:bc80:3010::137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 60F72C002A
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 08:57:55 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id 238A24285B
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 08:57:55 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 238A24285B
Authentication-Results: smtp4.osuosl.org;
 dkim=pass (1024-bit key) header.d=redhat.com header.i=@redhat.com
 header.a=rsa-sha256 header.s=mimecast20190719 header.b=bXTabYjz
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id AlsPZDpq9phM
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 08:57:53 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 10A5D42855
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.129.124])
 by smtp4.osuosl.org (Postfix) with ESMTPS id 10A5D42855
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 08:57:52 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1684400271;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=YbDTA5OIZLSb8/vpFHNb6hq0b4Oa1UZTgFonscwVroM=;
 b=bXTabYjzQrE7NyJJnLdKphxBCVfXw006bxrsOEJ+cLbR+DKxHkCX4bhBGaLj29wzXmHYrF
 8Sia91lC4Dn1rL0EiRRvgfAgfCmvNoxDUIpbkJYD8bd5HCwfuAqVTtFmxg9BjsppyJ3seS
 cWHf3DoiVe+Zyu7tb0pxiIjUBJlHKBg=
Received: from mail-lj1-f199.google.com (mail-lj1-f199.google.com
 [209.85.208.199]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-461-TQcU4fcQMbGN8tzrlIO7tQ-1; Thu, 18 May 2023 04:57:50 -0400
X-MC-Unique: TQcU4fcQMbGN8tzrlIO7tQ-1
Received: by mail-lj1-f199.google.com with SMTP id
 38308e7fff4ca-2ad1ba6c3d6so7563811fa.0
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 01:57:50 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20221208; t=1684400269; x=1686992269;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=YbDTA5OIZLSb8/vpFHNb6hq0b4Oa1UZTgFonscwVroM=;
 b=TvT6hr+d53evw/HmNmIccJJgcTiE1dRn3crHePqZgGDxNROo9hANZmaseP1bxrp3rg
 /vMMOh1W61RhQbovWR7ID0QBuHyN1sK4E+9E0BPrq3S3UaCN0X7JXyz1uUvfeMoQ+ItR
 LlAmQ81DChdUQcDBxGFhFm09d4af7MJEn7ktMiQUBwS+v9HArMMyM3wd9JrGxfyO9yrg
 PqTL2zCWedg3ZlMxjqvj5Mgdy7+Q0THengKajQSe6ivx7ZwZHk+rvmjWXkMwGhfYgqU9
 EVwFKWxI9PNgk0sg67G1VqJEwX0YHr6O6tyDrQ1X7qTX9KRQMPQlE/6u/7Ad/ew0QPPa
 aSVA==
X-Gm-Message-State: AC+VfDyfcvVjSD7vbh09+BPlvSj2ejJHa9Ov2b4LMQonLdHK1C1Ll5SQ
 +BIXGHtLmD6z97iDq9LwujTLKMDdpu2yvB7W95CiTH6HOlz+CD4B9H1h4kgknrmbDN6m1v+R+L8
 WQNa53+7lmB+QIeqTkZIrdA8kuh8/fV4NmuWNd9N0K6H1aXb9hocB6SnzsQ==
X-Received: by 2002:a2e:7805:0:b0:2ab:2c7c:507f with SMTP id
 t5-20020a2e7805000000b002ab2c7c507fmr1835546ljc.15.1684400269139; 
 Thu, 18 May 2023 01:57:49 -0700 (PDT)
X-Google-Smtp-Source: ACHHUZ4Sh3mVW7261fPbIJDmUo3wYzaeQkoLWFrQ5uH3JJb7gwHaoaOcltohebiBX2ma7EyoeZpJ/9imX4H10KXrEqM=
X-Received: by 2002:a2e:7805:0:b0:2ab:2c7c:507f with SMTP id
 t5-20020a2e7805000000b002ab2c7c507fmr1835538ljc.15.1684400268781; Thu, 18 May
 2023 01:57:48 -0700 (PDT)
MIME-Version: 1.0
References: <20230517022249.20790-1-xuanzhuo@linux.alibaba.com>
 <20230517022249.20790-6-xuanzhuo@linux.alibaba.com>
 <CACGkMEu7+kDPiWmULXW_saW6pb5yF=gnqXRkSWcYbZCiJmszHQ@mail.gmail.com>
 <20230518030701-mutt-send-email-mst@kernel.org>
 <1684395232.2129312-1-xuanzhuo@linux.alibaba.com>
 <20230518041446-mutt-send-email-mst@kernel.org>
In-Reply-To: <20230518041446-mutt-send-email-mst@kernel.org>
From: Jason Wang <jasowang@redhat.com>
Date: Thu, 18 May 2023 16:57:37 +0800
Message-ID: <CACGkMEso-pDo_sDN_nCR95WSOh32wtUQAfWLy69tOyXr7EA9_g@mail.gmail.com>
Subject: Re: [PATCH vhost v9 05/12] virtio_ring: split: virtqueue_add_split()
 support premapped
To: "Michael S. Tsirkin" <mst@redhat.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: Christoph Hellwig <hch@infradead.org>,
 Xuan Zhuo <xuanzhuo@linux.alibaba.com>,
 virtualization@lists.linux-foundation.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gVGh1LCBNYXkgMTgsIDIwMjMgYXQgNDoyOeKAr1BNIE1pY2hhZWwgUy4gVHNpcmtpbiA8bXN0
QHJlZGhhdC5jb20+IHdyb3RlOgo+Cj4gT24gVGh1LCBNYXkgMTgsIDIwMjMgYXQgMDM6MzM6NTJQ
TSArMDgwMCwgWHVhbiBaaHVvIHdyb3RlOgo+ID4gT24gVGh1LCAxOCBNYXkgMjAyMyAwMzoxMToy
NSAtMDQwMCwgIk1pY2hhZWwgUy4gVHNpcmtpbiIgPG1zdEByZWRoYXQuY29tPiB3cm90ZToKPiA+
ID4gT24gVGh1LCBNYXkgMTgsIDIwMjMgYXQgMDI6NTE6NTdQTSArMDgwMCwgSmFzb24gV2FuZyB3
cm90ZToKPiA+ID4gPiBPbiBXZWQsIE1heSAxNywgMjAyMyBhdCAxMDoyM+KAr0FNIFh1YW4gWmh1
byA8eHVhbnpodW9AbGludXguYWxpYmFiYS5jb20+IHdyb3RlOgo+ID4gPiA+ID4KPiA+ID4gPiA+
IHZpcnRxdWV1ZV9hZGRfc3BsaXQoKSBvbmx5IHN1cHBvcnRzIHZpcnR1YWwgYWRkcmVzc2VzLCBk
bWEgaXMgY29tcGxldGVkCj4gPiA+ID4gPiBpbiB2aXJ0cXVldWVfYWRkX3NwbGl0KCkuCj4gPiA+
ID4gPgo+ID4gPiA+ID4gSW4gc29tZSBzY2VuYXJpb3MgKHN1Y2ggYXMgdGhlIEFGX1hEUCBzY2Vu
YXJpbyksIHRoZSBtZW1vcnkgaXMgYWxsb2NhdGVkCj4gPiA+ID4gPiBhbmQgRE1BIGlzIGNvbXBs
ZXRlZCBpbiBhZHZhbmNlLCBzbyBpdCBpcyBuZWNlc3NhcnkgZm9yIHVzIHRvIHN1cHBvcnQKPiA+
ID4gPiA+IHBhc3NpbmcgdGhlIERNQSBhZGRyZXNzIHRvIHZpcnRxdWV1ZV9hZGRfc3BsaXQoKS4K
PiA+ID4gPiA+Cj4gPiA+ID4gPiBSZWNvcmQgdGhpcyBpbmZvcm1hdGlvbiBpbiBkZXNjX3N0YXRl
LCB3ZSBjYW4gc2tpcCB1bm1hcCBiYXNlZCBvbiB0aGlzCj4gPiA+ID4gPiB3aGVuIGV4ZWN1dGlu
ZyBkbWEgdW5tYXAuCj4gPiA+ID4KPiA+ID4gPiBJIHdvdWxkIGFsc28gc3VnZ2VzdCBkb2N1bWVu
dGluZyB3aHkgYSBwZXIgZGVzY3JpcHRvciBtZXRhZGF0YSBpcwo+ID4gPiA+IG5lZWRlZCBpbnN0
ZWFkIG9mIGEgcGVyIHZpcnRxdWV1ZSBvbmUuCj4gPiA+Cj4gPiA+IEkgdGhpbmsgd2UgY291bGQg
bWFrZSBpdCBwZXIgdmlydHF1ZXVlLiBUaGF0IHdvdWxkIG1lYW4gYWxsIGNvZGUgaW4KPiA+ID4g
dmlydGlvIG5ldCB3b3VsZCBoYXZlIHRvIGNoYW5nZSB0byBkbyBkbWEgbWFwcGluZyBpdHNlbGYg
aW5zdGVhZCBvZgo+ID4gPiByZWx5aW5nIG9uIHZpcnRpbyBjb3JlIHRob3VnaC4gIFdoaWNoIGlz
IG1heWJlIGEgZ29vZCBpZGVhPyBEZWZpbml0ZWx5IGEKPiA+ID4gdmVyeSBpbnRydXNpdmUgY2hh
bmdlIHRob3VnaCwgd2lsbCBuZWVkIGEgbG90IG9mIHBlcmZvcm1hbmNlIHRlc3RpbmcKPiA+ID4g
dG8gbWFrZSBzdXJlIHdlIGRvbid0IGJyZWFrIGFueXRoaW5nLgo+ID4KPiA+IEluIGZhY3QsIHdl
IGhhdmUgdHJpZWQgdGhpcyBpZGVhLgo+ID4KPiA+IFRoZSBwcm9ibGVtIGlzIHRoZSBkZXRhY2gg
YW5kIHVubWFwLgo+ID4KPiA+IFdlIG5lZWQgdG8gZ2V0IGFsbCBETUEgQWRkcmVzc2VzIGZyb20g
dmlydGlvLXJpbmcgdG8gdW5tYXAuIEN1cnJlbnRseSwgaXQgZG9lcwo+ID4gbm90IHN1cHBvcnQg
dG8gcmV0dXJuIHRoZSBETUEgQWRkcmVzcywgYW5kIGZvciBTS0IsIHdlIG5lZWQgdG8gZ2V0IG11
bHRpcGxlIERNQQo+ID4gQWRkcmVzc2VzIGF0IG9uZSB0aW1lLgo+ID4KPiA+IFRoaXMgbmVlZCB0
byBtb2RpZnkgdGhlIGxvZ2ljIG9mIFZpcnRpby1SaW5nIGRldGFjaC4gQmVzaWRlcyB0aGlzLCBJ
IGFsc28gYWdyZWUKPiA+IHdpdGggdGhpcyBpZGVhLgo+ID4KPiA+IFRoYW5rcy4KPgo+IFdlbGwg
eW91IGNhbiBoYXZlIGEgdmVyc2lvbiBvZiBnZXRfYnVmIHRoYXQgcmV0dXJucyB0aGVtIC4uLiBi
dXQKPiBpdCBpcyBub3QgY2xlYXIgdG8gbWUgYWxsIHRoaXMgaXMgd29ydGggaXQgdW5sZXNzIHlv
dSB3YW50Cj4gdG8gZG8gdW5zYWZlIHRyaWNrcyBsaWtlIGxlYXZpbmcgdGhlbSBtYXBwZWQuCgpT
b21lIGhpZ2ggc3BlZWQgTklDIGRyaXZlcnMgdXNlIHRoaXMgdHJpY2sgZm9yIGJldHRlciBwZXJm
b3JtYW5jZS4KCj4gSSdkIGxlYXZlIHRoYXQKPiBmb3IgYW5vdGhlciBkYXkgbWF5YmUuCj4KPiBG
b3IgbWFya2luZyBkZXNjIGFzIHByZW1hcHBlZCBJIHRoaW5rIHdlIGNhbiB1c2UgYSBiaXQgZnJv
bQo+IGRlc2NfZXh0cmEtPmZsYWdzLCBlaXRoZXIgcmV1c2luZyBvbmUgb2YgTkVYVCxBVkFJTCxV
U0VELCBvciBzdGVhbGluZwo+IGFub3RoZXIgb25lLgoKUHJvYmFibHkuCgpUaGFua3MKCj4KPgo+
Cj4gPgo+ID4gPgo+ID4gPgo+ID4gPgo+ID4gPgo+ID4gPiA+ID4KPiA+ID4gPiA+IFNpZ25lZC1v
ZmYtYnk6IFh1YW4gWmh1byA8eHVhbnpodW9AbGludXguYWxpYmFiYS5jb20+Cj4gPiA+ID4gPiAt
LS0KPiA+ID4gPiA+ICBkcml2ZXJzL3ZpcnRpby92aXJ0aW9fcmluZy5jIHwgMzggKysrKysrKysr
KysrKysrKysrKysrKysrKysrLS0tLS0tLS0tCj4gPiA+ID4gPiAgMSBmaWxlIGNoYW5nZWQsIDI5
IGluc2VydGlvbnMoKyksIDkgZGVsZXRpb25zKC0pCj4gPiA+ID4gPgo+ID4gPiA+ID4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19yaW5nLmMgYi9kcml2ZXJzL3ZpcnRpby92aXJ0
aW9fcmluZy5jCj4gPiA+ID4gPiBpbmRleCBlMmZjNTBjMDViZWMuLmJkNWU4NGFmYWIzNyAxMDA2
NDQKPiA+ID4gPiA+IC0tLSBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19yaW5nLmMKPiA+ID4gPiA+
ICsrKyBiL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19yaW5nLmMKPiA+ID4gPiA+IEBAIC03MCw2ICs3
MCw3IEBACj4gPiA+ID4gPiAgc3RydWN0IHZyaW5nX2Rlc2Nfc3RhdGVfc3BsaXQgewo+ID4gPiA+
ID4gICAgICAgICB2b2lkICpkYXRhOyAgICAgICAgICAgICAgICAgICAgIC8qIERhdGEgZm9yIGNh
bGxiYWNrLiAqLwo+ID4gPiA+ID4gICAgICAgICBzdHJ1Y3QgdnJpbmdfZGVzYyAqaW5kaXJfZGVz
YzsgIC8qIEluZGlyZWN0IGRlc2NyaXB0b3IsIGlmIGFueS4gKi8KPiA+ID4gPiA+ICsgICAgICAg
Ym9vbCBwcmVtYXBwZWQ7ICAgICAgICAgICAgICAgICAvKiBETUEgbWFwcGluZyBpcyBkb25lIGJ5
IGRyaXZlci4gKi8KPiA+ID4gPgo+ID4gPiA+IEdvaW5nIGJhY2sgdG8gdGhlIG9yaWdpbmFsIGRp
c2N1c3Npb24gYXJvdW5kIHdoZXJlIHRoaXMgc2hvdWxkIGJlCj4gPiA+ID4gcGxhY2VkLiBJIHdv
bmRlciBpZiB3ZSBjYW4gZmluZCBhIGNvbW1vbiBwbGFjZSB0byBzdG9yZSB0aGlzIHNpbmNlIGl0
Cj4gPiA+ID4gaGFzIG5vdGhpbmcgcmVsYXRlZCB0byB2aXJ0cXVldWUgbGF5b3V0LiBNYXliZSBk
ZXNjX2V4dHJhPyBBbmQgaXQKPiA+ID4gPiB3b3VsZCBiZSBldmVuIGJldHRlciBpZiB3ZSBjYW4g
YXZvaWQgc3RyZXNzaW5nIHRoZSBjYWNoZSBsaWtlIGFib3ZlLgo+ID4gPiA+Cj4gPiA+ID4gPiAg
fTsKPiA+ID4gPiA+Cj4gPiA+ID4gPiAgc3RydWN0IHZyaW5nX2Rlc2Nfc3RhdGVfcGFja2VkIHsK
PiA+ID4gPiA+IEBAIC0zNTYsOCArMzU3LDE0IEBAIHN0YXRpYyBzdHJ1Y3QgZGV2aWNlICp2cmlu
Z19kbWFfZGV2KGNvbnN0IHN0cnVjdCB2cmluZ192aXJ0cXVldWUgKnZxKQo+ID4gPiA+ID4KPiA+
ID4gPiA+ICAvKiBNYXAgb25lIHNnIGVudHJ5LiAqLwo+ID4gPiA+ID4gIHN0YXRpYyBpbnQgdnJp
bmdfbWFwX29uZV9zZyhjb25zdCBzdHJ1Y3QgdnJpbmdfdmlydHF1ZXVlICp2cSwgc3RydWN0IHNj
YXR0ZXJsaXN0ICpzZywKPiA+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVt
IGRtYV9kYXRhX2RpcmVjdGlvbiBkaXJlY3Rpb24sIHN0YXRpYyBkbWFfYWRkcl90ICphZGRyKQo+
ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW0gZG1hX2RhdGFfZGlyZWN0
aW9uIGRpcmVjdGlvbiwKPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBib29s
IHByZW1hcHBlZCwgZG1hX2FkZHJfdCAqYWRkcikKPiA+ID4gPgo+ID4gPiA+IGhhdmluZyB0aGlu
Z3MgbGlrZToKPiA+ID4gPgo+ID4gPiA+IGludCBmdW5jKGJvb2wgZG8pCj4gPiA+ID4gewo+ID4g
PiA+IGlmICghZG8pCj4gPiA+ID4gICAgIHJldHVybjsKPiA+ID4gPiB9Cj4gPiA+ID4KPiA+ID4g
PiBpcyBhIGhpbnQgdGhhdCB0aGUgY2hlY2sgbmVlZHMgdG8gYmUgZG9uZSBieSB0aGUgY2FsbGVy
Pwo+ID4gPiA+Cj4gPiA+ID4gQW5kIHRoaXMgY2hhbmdlIHNob3VsZCB3b3JrIGZvciBib3RoIHBh
Y2tlZCBhbmQgc3BsaXQuIEkgdGhpbmsgd2UgbmVlZAo+ID4gPiA+IHRvIHNxdWFzaCB0aGUgcGFj
a2VkIGNoYW5nZXMgaGVyZS4KPiA+ID4gPgo+ID4gPiA+IExvb2tpbmcgYXQgaG93IHBhY2tlZCB2
aXJ0cXVldWUgdXNlcyB0aGlzIGluIHRoaXMgcGF0Y2gsIEkgZG9uJ3QgdGhpbmsKPiA+ID4gPiB0
aGlzIHBhdGNoIGNhbiBldmVuIGJlIGJ1aWx0LiBJIHdpbGwgd2FpdCBmb3IgYSBuZXcgdmVyc2lv
biBhbmQKPiA+ID4gPiBjb250aW51ZSB0aGUgcmV2aWV3IGZyb20gdGhlcmUuCj4gPiA+ID4KPiA+
ID4gPiBUaGFua3MKPiA+ID4gPgo+ID4gPiA+Cj4gPiA+ID4KPiA+ID4gPiA+ICB7Cj4gPiA+ID4g
PiArICAgICAgIGlmIChwcmVtYXBwZWQpIHsKPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAqYWRk
ciA9IHNnX2RtYV9hZGRyZXNzKHNnKTsKPiA+ID4gPiA+ICsgICAgICAgICAgICAgICByZXR1cm4g
MDsKPiA+ID4gPiA+ICsgICAgICAgfQo+ID4gPiA+ID4gKwo+ID4gPiA+ID4gICAgICAgICBpZiAo
IXZxLT51c2VfZG1hX2FwaSkgewo+ID4gPiA+ID4gICAgICAgICAgICAgICAgIC8qCj4gPiA+ID4g
PiAgICAgICAgICAgICAgICAgICogSWYgRE1BIGlzIG5vdCB1c2VkLCBLTVNBTiBkb2Vzbid0IGtu
b3cgdGhhdCB0aGUgc2NhdHRlcmxpc3QKPiA+ID4gPiA+IEBAIC00NDUsNyArNDUyLDcgQEAgc3Rh
dGljIHZvaWQgdnJpbmdfdW5tYXBfb25lX3NwbGl0X2luZGlyZWN0KGNvbnN0IHN0cnVjdCB2cmlu
Z192aXJ0cXVldWUgKnZxLAo+ID4gPiA+ID4gIH0KPiA+ID4gPiA+Cj4gPiA+ID4gPiAgc3RhdGlj
IHVuc2lnbmVkIGludCB2cmluZ191bm1hcF9vbmVfc3BsaXQoY29uc3Qgc3RydWN0IHZyaW5nX3Zp
cnRxdWV1ZSAqdnEsCj4gPiA+ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1bnNpZ25lZCBpbnQgaSkKPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBpLCBib29sIHByZW1hcHBlZCkKPiA+ID4g
PiA+ICB7Cj4gPiA+ID4gPiAgICAgICAgIHN0cnVjdCB2cmluZ19kZXNjX2V4dHJhICpleHRyYSA9
IHZxLT5zcGxpdC5kZXNjX2V4dHJhOwo+ID4gPiA+ID4gICAgICAgICB1MTYgZmxhZ3M7Cj4gPiA+
ID4gPiBAQCAtNDYyLDYgKzQ2OSw5IEBAIHN0YXRpYyB1bnNpZ25lZCBpbnQgdnJpbmdfdW5tYXBf
b25lX3NwbGl0KGNvbnN0IHN0cnVjdCB2cmluZ192aXJ0cXVldWUgKnZxLAo+ID4gPiA+ID4gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZsYWdzICYgVlJJTkdfREVTQ19GX1dSSVRF
KSA/Cj4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBETUFfRlJPTV9E
RVZJQ0UgOiBETUFfVE9fREVWSUNFKTsKPiA+ID4gPiA+ICAgICAgICAgfSBlbHNlIHsKPiA+ID4g
PiA+ICsgICAgICAgICAgICAgICBpZiAocHJlbWFwcGVkKQo+ID4gPiA+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgZ290byBvdXQ7Cj4gPiA+ID4gPiArCj4gPiA+ID4gPiAgICAgICAgICAgICAg
ICAgZG1hX3VubWFwX3BhZ2UodnJpbmdfZG1hX2Rldih2cSksCj4gPiA+ID4gPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZXh0cmFbaV0uYWRkciwKPiA+ID4gPiA+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBleHRyYVtpXS5sZW4sCj4gPiA+ID4gPiBAQCAtNTMyLDYgKzU0
Miw3IEBAIHN0YXRpYyBpbmxpbmUgaW50IHZpcnRxdWV1ZV9hZGRfc3BsaXQoc3RydWN0IHZpcnRx
dWV1ZSAqX3ZxLAo+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1bnNpZ25lZCBpbnQgaW5fc2dzLAo+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB2b2lkICpkYXRhLAo+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB2b2lkICpjdHgsCj4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGJvb2wgcHJlbWFwcGVkLAo+ID4gPiA+ID4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBnZnBfdCBnZnApCj4gPiA+ID4gPiAgewo+ID4gPiA+
ID4gICAgICAgICBzdHJ1Y3QgdnJpbmdfdmlydHF1ZXVlICp2cSA9IHRvX3Z2cShfdnEpOwo+ID4g
PiA+ID4gQEAgLTU5NSw3ICs2MDYsNyBAQCBzdGF0aWMgaW5saW5lIGludCB2aXJ0cXVldWVfYWRk
X3NwbGl0KHN0cnVjdCB2aXJ0cXVldWUgKl92cSwKPiA+ID4gPiA+ICAgICAgICAgICAgICAgICBm
b3IgKHNnID0gc2dzW25dOyBzZzsgc2cgPSBzZ19uZXh0KHNnKSkgewo+ID4gPiA+ID4gICAgICAg
ICAgICAgICAgICAgICAgICAgZG1hX2FkZHJfdCBhZGRyOwo+ID4gPiA+ID4KPiA+ID4gPiA+IC0g
ICAgICAgICAgICAgICAgICAgICAgIGlmICh2cmluZ19tYXBfb25lX3NnKHZxLCBzZywgRE1BX1RP
X0RFVklDRSwgJmFkZHIpKQo+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZy
aW5nX21hcF9vbmVfc2codnEsIHNnLCBETUFfVE9fREVWSUNFLCBwcmVtYXBwZWQsICZhZGRyKSkK
PiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byB1bm1hcF9yZWxl
YXNlOwo+ID4gPiA+ID4KPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYgPSBp
Owo+ID4gPiA+ID4gQEAgLTYxMSw3ICs2MjIsNyBAQCBzdGF0aWMgaW5saW5lIGludCB2aXJ0cXVl
dWVfYWRkX3NwbGl0KHN0cnVjdCB2aXJ0cXVldWUgKl92cSwKPiA+ID4gPiA+ICAgICAgICAgICAg
ICAgICBmb3IgKHNnID0gc2dzW25dOyBzZzsgc2cgPSBzZ19uZXh0KHNnKSkgewo+ID4gPiA+ID4g
ICAgICAgICAgICAgICAgICAgICAgICAgZG1hX2FkZHJfdCBhZGRyOwo+ID4gPiA+ID4KPiA+ID4g
PiA+IC0gICAgICAgICAgICAgICAgICAgICAgIGlmICh2cmluZ19tYXBfb25lX3NnKHZxLCBzZywg
RE1BX0ZST01fREVWSUNFLCAmYWRkcikpCj4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAg
ICBpZiAodnJpbmdfbWFwX29uZV9zZyh2cSwgc2csIERNQV9GUk9NX0RFVklDRSwgcHJlbWFwcGVk
LCAmYWRkcikpCj4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8g
dW5tYXBfcmVsZWFzZTsKPiA+ID4gPiA+Cj4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAg
ICBwcmV2ID0gaTsKPiA+ID4gPiA+IEBAIC02NTcsNiArNjY4LDcgQEAgc3RhdGljIGlubGluZSBp
bnQgdmlydHF1ZXVlX2FkZF9zcGxpdChzdHJ1Y3QgdmlydHF1ZXVlICpfdnEsCj4gPiA+ID4gPgo+
ID4gPiA+ID4gICAgICAgICAvKiBTdG9yZSB0b2tlbiBhbmQgaW5kaXJlY3QgYnVmZmVyIHN0YXRl
LiAqLwo+ID4gPiA+ID4gICAgICAgICB2cS0+c3BsaXQuZGVzY19zdGF0ZVtoZWFkXS5kYXRhID0g
ZGF0YTsKPiA+ID4gPiA+ICsgICAgICAgdnEtPnNwbGl0LmRlc2Nfc3RhdGVbaGVhZF0ucHJlbWFw
cGVkID0gcHJlbWFwcGVkOwo+ID4gPiA+ID4gICAgICAgICBpZiAoaW5kaXJlY3QpCj4gPiA+ID4g
PiAgICAgICAgICAgICAgICAgdnEtPnNwbGl0LmRlc2Nfc3RhdGVbaGVhZF0uaW5kaXJfZGVzYyA9
IGRlc2M7Cj4gPiA+ID4gPiAgICAgICAgIGVsc2UKPiA+ID4gPiA+IEBAIC02ODYsNiArNjk4LDE0
IEBAIHN0YXRpYyBpbmxpbmUgaW50IHZpcnRxdWV1ZV9hZGRfc3BsaXQoc3RydWN0IHZpcnRxdWV1
ZSAqX3ZxLAo+ID4gPiA+ID4gICAgICAgICByZXR1cm4gMDsKPiA+ID4gPiA+Cj4gPiA+ID4gPiAg
dW5tYXBfcmVsZWFzZToKPiA+ID4gPiA+ICsgICAgICAgaWYgKHByZW1hcHBlZCkgewo+ID4gPiA+
ID4gKyAgICAgICAgICAgICAgIGlmIChpbmRpcmVjdCkKPiA+ID4gPiA+ICsgICAgICAgICAgICAg
ICAgICAgICAgIGtmcmVlKGRlc2MpOwo+ID4gPiA+ID4gKwo+ID4gPiA+ID4gKyAgICAgICAgICAg
ICAgIEVORF9VU0UodnEpOwo+ID4gPiA+ID4gKyAgICAgICAgICAgICAgIHJldHVybiAtRU5PTUVN
Owo+ID4gPiA+ID4gKyAgICAgICB9Cj4gPiA+ID4gPiArCj4gPiA+ID4gPiAgICAgICAgIGVycl9p
ZHggPSBpOwo+ID4gPiA+ID4KPiA+ID4gPiA+ICAgICAgICAgaWYgKGluZGlyZWN0KQo+ID4gPiA+
ID4gQEAgLTcwMCw3ICs3MjAsNyBAQCBzdGF0aWMgaW5saW5lIGludCB2aXJ0cXVldWVfYWRkX3Nw
bGl0KHN0cnVjdCB2aXJ0cXVldWUgKl92cSwKPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAg
ICAgIHZyaW5nX3VubWFwX29uZV9zcGxpdF9pbmRpcmVjdCh2cSwgJmRlc2NbaV0pOwo+ID4gPiA+
ID4gICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHZpcnRpbzE2X3RvX2NwdShfdnEtPnZkZXYs
IGRlc2NbaV0ubmV4dCk7Cj4gPiA+ID4gPiAgICAgICAgICAgICAgICAgfSBlbHNlCj4gPiA+ID4g
PiAtICAgICAgICAgICAgICAgICAgICAgICBpID0gdnJpbmdfdW5tYXBfb25lX3NwbGl0KHZxLCBp
KTsKPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGkgPSB2cmluZ191bm1hcF9vbmVf
c3BsaXQodnEsIGksIGZhbHNlKTsKPiA+ID4gPiA+ICAgICAgICAgfQo+ID4gPiA+ID4KPiA+ID4g
PiA+ICAgICAgICAgaWYgKGluZGlyZWN0KQo+ID4gPiA+ID4gQEAgLTc1NywxMiArNzc3LDEyIEBA
IHN0YXRpYyB2b2lkIGRldGFjaF9idWZfc3BsaXQoc3RydWN0IHZyaW5nX3ZpcnRxdWV1ZSAqdnEs
IHVuc2lnbmVkIGludCBoZWFkLAo+ID4gPiA+ID4gICAgICAgICBpID0gaGVhZDsKPiA+ID4gPiA+
Cj4gPiA+ID4gPiAgICAgICAgIHdoaWxlICh2cS0+c3BsaXQudnJpbmcuZGVzY1tpXS5mbGFncyAm
IG5leHRmbGFnKSB7Cj4gPiA+ID4gPiAtICAgICAgICAgICAgICAgdnJpbmdfdW5tYXBfb25lX3Nw
bGl0KHZxLCBpKTsKPiA+ID4gPiA+ICsgICAgICAgICAgICAgICB2cmluZ191bm1hcF9vbmVfc3Bs
aXQodnEsIGksIHN0YXRlLT5wcmVtYXBwZWQpOwo+ID4gPiA+ID4gICAgICAgICAgICAgICAgIGkg
PSB2cS0+c3BsaXQuZGVzY19leHRyYVtpXS5uZXh0Owo+ID4gPiA+ID4gICAgICAgICAgICAgICAg
IHZxLT52cS5udW1fZnJlZSsrOwo+ID4gPiA+ID4gICAgICAgICB9Cj4gPiA+ID4gPgo+ID4gPiA+
ID4gLSAgICAgICB2cmluZ191bm1hcF9vbmVfc3BsaXQodnEsIGkpOwo+ID4gPiA+ID4gKyAgICAg
ICB2cmluZ191bm1hcF9vbmVfc3BsaXQodnEsIGksIHN0YXRlLT5wcmVtYXBwZWQpOwo+ID4gPiA+
ID4gICAgICAgICB2cS0+c3BsaXQuZGVzY19leHRyYVtpXS5uZXh0ID0gdnEtPmZyZWVfaGVhZDsK
PiA+ID4gPiA+ICAgICAgICAgdnEtPmZyZWVfaGVhZCA9IGhlYWQ7Cj4gPiA+ID4gPgo+ID4gPiA+
ID4gQEAgLTc4Myw3ICs4MDMsNyBAQCBzdGF0aWMgdm9pZCBkZXRhY2hfYnVmX3NwbGl0KHN0cnVj
dCB2cmluZ192aXJ0cXVldWUgKnZxLCB1bnNpZ25lZCBpbnQgaGVhZCwKPiA+ID4gPiA+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgVlJJTkdfREVTQ19GX0lORElSRUNUKSk7Cj4gPiA+
ID4gPiAgICAgICAgICAgICAgICAgQlVHX09OKGxlbiA9PSAwIHx8IGxlbiAlIHNpemVvZihzdHJ1
Y3QgdnJpbmdfZGVzYykpOwo+ID4gPiA+ID4KPiA+ID4gPiA+IC0gICAgICAgICAgICAgICBpZiAo
dnEtPnVzZV9kbWFfYXBpKSB7Cj4gPiA+ID4gPiArICAgICAgICAgICAgICAgaWYgKHZxLT51c2Vf
ZG1hX2FwaSAmJiAhc3RhdGUtPnByZW1hcHBlZCkgewo+ID4gPiA+ID4gICAgICAgICAgICAgICAg
ICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbiAvIHNpemVvZihzdHJ1Y3QgdnJpbmdfZGVzYyk7
IGorKykKPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnJpbmdfdW5t
YXBfb25lX3NwbGl0X2luZGlyZWN0KHZxLCAmaW5kaXJfZGVzY1tqXSk7Cj4gPiA+ID4gPiAgICAg
ICAgICAgICAgICAgfQo+ID4gPiA+ID4gQEAgLTIxNDMsNyArMjE2Myw3IEBAIHN0YXRpYyBpbmxp
bmUgaW50IHZpcnRxdWV1ZV9hZGQoc3RydWN0IHZpcnRxdWV1ZSAqX3ZxLAo+ID4gPiA+ID4gICAg
ICAgICByZXR1cm4gdnEtPnBhY2tlZF9yaW5nID8gdmlydHF1ZXVlX2FkZF9wYWNrZWQoX3ZxLCBz
Z3MsIHRvdGFsX3NnLAo+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIG91dF9zZ3MsIGluX3NncywgZGF0YSwgY3R4LCBnZnApIDoKPiA+ID4gPiA+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpcnRxdWV1ZV9hZGRfc3BsaXQoX3ZxLCBzZ3Ms
IHRvdGFsX3NnLAo+ID4gPiA+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIG91dF9zZ3MsIGluX3NncywgZGF0YSwgY3R4LCBnZnApOwo+ID4gPiA+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dF9zZ3MsIGluX3NncywgZGF0YSwgY3R4
LCBwcmVtYXBwZWQsIGdmcCk7Cj4gPiA+ID4gPiAgfQo+ID4gPiA+ID4KPiA+ID4gPiA+ICAvKioK
PiA+ID4gPiA+IC0tCj4gPiA+ID4gPiAyLjMyLjAuMy5nMDExOTVjZjlmCj4gPiA+ID4gPgo+ID4g
Pgo+CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpWaXJ0
dWFsaXphdGlvbiBtYWlsaW5nIGxpc3QKVmlydHVhbGl6YXRpb25AbGlzdHMubGludXgtZm91bmRh
dGlvbi5vcmcKaHR0cHM6Ly9saXN0cy5saW51eGZvdW5kYXRpb24ub3JnL21haWxtYW4vbGlzdGlu
Zm8vdmlydHVhbGl6YXRpb24=
