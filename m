Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [140.211.166.133])
	by mail.lfdr.de (Postfix) with ESMTPS id 2C68F357E8D
	for <lists.virtualization@lfdr.de>; Thu,  8 Apr 2021 10:59:14 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id 6F6FB400D7;
	Thu,  8 Apr 2021 08:59:12 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id auIihQ4Wn1Mp; Thu,  8 Apr 2021 08:59:11 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp2.osuosl.org (Postfix) with ESMTP id E9EA1400E5;
	Thu,  8 Apr 2021 08:59:10 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 6D13DC000A;
	Thu,  8 Apr 2021 08:59:10 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 9D1C7C000A
 for <virtualization@lists.linux-foundation.org>;
 Thu,  8 Apr 2021 08:59:08 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp3.osuosl.org (Postfix) with ESMTP id 84F3E60909
 for <virtualization@lists.linux-foundation.org>;
 Thu,  8 Apr 2021 08:59:08 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp3.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp3.osuosl.org ([127.0.0.1])
 by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 4oodJBDOrqyB
 for <virtualization@lists.linux-foundation.org>;
 Thu,  8 Apr 2021 08:59:07 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp3.osuosl.org (Postfix) with ESMTPS id 70FC960612
 for <virtualization@lists.linux-foundation.org>;
 Thu,  8 Apr 2021 08:59:07 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1617872346;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=rJd9cjluF7SSVnX1XRLoAfAtkfIwkqgYvUi/pSMmbxw=;
 b=SmwQfSAxgjLS0HEhHBxehb64P7DVyfA22/oj22dL3+reTBzTwRdgpeX9czswVPFFVYu+Lc
 DTu9nxazZ0X4lHNEDkZO7sWP/aPP1KdJsWCM+PuMB65uUs0R+DV7FULXnMSkobVYl9F9Se
 K89rsWTJWUW3jhdeaqh2+nvAyY8A2kA=
Received: from mimecast-mx01.redhat.com (mimecast-mx01.redhat.com
 [209.132.183.4]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-170-oaJCtW7ZOzmgFBdfaTqmYg-1; Thu, 08 Apr 2021 04:59:04 -0400
X-MC-Unique: oaJCtW7ZOzmgFBdfaTqmYg-1
Received: from smtp.corp.redhat.com (int-mx03.intmail.prod.int.phx2.redhat.com
 [10.5.11.13])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mimecast-mx01.redhat.com (Postfix) with ESMTPS id 363271006C84;
 Thu,  8 Apr 2021 08:59:03 +0000 (UTC)
Received: from wangxiaodeMacBook-Air.local (ovpn-13-53.pek2.redhat.com
 [10.72.13.53])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 8AC716B8DD;
 Thu,  8 Apr 2021 08:58:56 +0000 (UTC)
Subject: Re: [PATCH v2 1/3] virtio: update reset callback to return status
To: Max Gurtovoy <mgurtovoy@nvidia.com>, mst@redhat.com, kvm@vger.kernel.org, 
 virtualization@lists.linux-foundation.org
References: <20210408081109.56537-1-mgurtovoy@nvidia.com>
From: Jason Wang <jasowang@redhat.com>
Message-ID: <16fa0e31-a305-3b41-b0d3-ad76aa00177b@redhat.com>
Date: Thu, 8 Apr 2021 16:58:54 +0800
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0)
 Gecko/20100101 Thunderbird/78.9.0
MIME-Version: 1.0
In-Reply-To: <20210408081109.56537-1-mgurtovoy@nvidia.com>
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.13
Cc: nitzanc@nvidia.com, oren@nvidia.com, cohuck@redhat.com
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="gbk"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CtTaIDIwMjEvNC84IM/Czuc0OjExLCBNYXggR3VydG92b3kg0LS1wDoKPiBUaGUgcmVzZXQgZGV2
aWNlIG9wZXJhdGlvbiwgdXN1YWxseSBpcyBhbiBvcGVyYXRpb24gdGhhdCBtaWdodCBmYWlsIGZy
b20KPiB2YXJpb3VzIHJlYXNvbnMuIEZvciBleGFtcGxlLCB0aGUgY29udHJvbGxlciBtaWdodCBi
ZSBpbiBhIGJhZCBzdGF0ZSBhbmQKPiBjYW4ndCBhbnN3ZXIgdG8gYW55IHJlcXVlc3QuIFVzdWFs
bHksIHRoZSBwYXJhdmlydCBTVyBiYXNlZCB2aXJ0aW8KPiBkZXZpY2VzIGFsd2F5cyBzdWNjZWVk
IGluIHJlc2V0IG9wZXJhdGlvbiBidXQgdGhpcyBpcyBub3QgdGhlIGNhc2UgZm9yCj4gSFcgYmFz
ZWQgdmlydGlvIGRldmljZXMuCgoKSSB3b3VsZCBsaWtlIHRvIGtub3cgdW5kZXIgd2hhdCBjb25k
aXRpb24gdGhhdCB0aGUgcmVzZXQgb3BlcmF0aW9uIG1heSAKZmFpbCAoZXhjZXB0IGZvciB0aGUg
Y2FzZSBvZiBhIGJ1Z2cgZ3Vlc3QpLgoKCj4KPiBUaGlzIGNvbW1pdCBpcyBhbHNvIGEgcHJlcGFy
YXRpb24gZm9yIGFkZGluZyBhIHRpbWVvdXQgbWVjaGFuaXNtIGZvcgo+IHJlc2V0dGluZyB2aXJ0
aW8gZGV2aWNlcy4KPgo+IFNpZ25lZC1vZmYtYnk6IE1heCBHdXJ0b3ZveSA8bWd1cnRvdm95QG52
aWRpYS5jb20+Cj4gLS0tCj4KPiBjaGFuZ2VzIGZyb20gdjE6Cj4gICAtIHVwZGF0ZSB2aXJ0aW9f
Y2N3LmMgKENvcm5lbGlhKQo+ICAgLSB1cGRhdGUgdmlydGlvX3VtbC5jCj4gICAtIHVwZGF0ZSBt
bHhiZi10bWZpZm8uYwoKCk5vdGUgdGhhdCB2aXJ0aW8gZHJpdmVyIG1heSBjYWxsIHJlc2V0LCBz
byB5b3UgcHJvYmFibHkgbmVlZCB0byBjb252ZXJ0IAp0aGVtLgoKVGhhbmtzCgoKPgo+IC0tLQo+
ICAgYXJjaC91bS9kcml2ZXJzL3ZpcnRpb191bWwuYyAgICAgICAgICAgICB8ICA0ICsrKy0KPiAg
IGRyaXZlcnMvcGxhdGZvcm0vbWVsbGFub3gvbWx4YmYtdG1maWZvLmMgfCAgNCArKystCj4gICBk
cml2ZXJzL3JlbW90ZXByb2MvcmVtb3RlcHJvY192aXJ0aW8uYyAgIHwgIDQgKysrLQo+ICAgZHJp
dmVycy9zMzkwL3ZpcnRpby92aXJ0aW9fY2N3LmMgICAgICAgICB8ICA5ICsrKysrKy0tLQo+ICAg
ZHJpdmVycy92aXJ0aW8vdmlydGlvLmMgICAgICAgICAgICAgICAgICB8IDIyICsrKysrKysrKysr
KysrKy0tLS0tLS0KPiAgIGRyaXZlcnMvdmlydGlvL3ZpcnRpb19tbWlvLmMgICAgICAgICAgICAg
fCAgMyArKy0KPiAgIGRyaXZlcnMvdmlydGlvL3ZpcnRpb19wY2lfbGVnYWN5LmMgICAgICAgfCAg
NCArKystCj4gICBkcml2ZXJzL3ZpcnRpby92aXJ0aW9fcGNpX21vZGVybi5jICAgICAgIHwgIDMg
KystCj4gICBkcml2ZXJzL3ZpcnRpby92aXJ0aW9fdmRwYS5jICAgICAgICAgICAgIHwgIDQgKysr
LQo+ICAgaW5jbHVkZS9saW51eC92aXJ0aW9fY29uZmlnLmggICAgICAgICAgICB8ICA1ICsrKy0t
Cj4gICAxMCBmaWxlcyBjaGFuZ2VkLCA0MyBpbnNlcnRpb25zKCspLCAxOSBkZWxldGlvbnMoLSkK
Pgo+IGRpZmYgLS1naXQgYS9hcmNoL3VtL2RyaXZlcnMvdmlydGlvX3VtbC5jIGIvYXJjaC91bS9k
cml2ZXJzL3ZpcnRpb191bWwuYwo+IGluZGV4IDkxZGRmNzRjYTg4OC4uYjZlNjYyNjVlZDMyIDEw
MDY0NAo+IC0tLSBhL2FyY2gvdW0vZHJpdmVycy92aXJ0aW9fdW1sLmMKPiArKysgYi9hcmNoL3Vt
L2RyaXZlcnMvdmlydGlvX3VtbC5jCj4gQEAgLTgyNywxMSArODI3LDEzIEBAIHN0YXRpYyB2b2lk
IHZ1X3NldF9zdGF0dXMoc3RydWN0IHZpcnRpb19kZXZpY2UgKnZkZXYsIHU4IHN0YXR1cykKPiAg
IAl2dV9kZXYtPnN0YXR1cyA9IHN0YXR1czsKPiAgIH0KPiAgIAo+IC1zdGF0aWMgdm9pZCB2dV9y
ZXNldChzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldikKPiArc3RhdGljIGludCB2dV9yZXNldChz
dHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldikKPiAgIHsKPiAgIAlzdHJ1Y3QgdmlydGlvX3VtbF9k
ZXZpY2UgKnZ1X2RldiA9IHRvX3ZpcnRpb191bWxfZGV2aWNlKHZkZXYpOwo+ICAgCj4gICAJdnVf
ZGV2LT5zdGF0dXMgPSAwOwo+ICsKPiArCXJldHVybiAwOwo+ICAgfQo+ICAgCj4gICBzdGF0aWMg
dm9pZCB2dV9kZWxfdnEoc3RydWN0IHZpcnRxdWV1ZSAqdnEpCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvcGxhdGZvcm0vbWVsbGFub3gvbWx4YmYtdG1maWZvLmMgYi9kcml2ZXJzL3BsYXRmb3JtL21l
bGxhbm94L21seGJmLXRtZmlmby5jCj4gaW5kZXggYmJjNGU3MWExNmZmLi5jMTkyYjhhYzVkOWUg
MTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9wbGF0Zm9ybS9tZWxsYW5veC9tbHhiZi10bWZpZm8uYwo+
ICsrKyBiL2RyaXZlcnMvcGxhdGZvcm0vbWVsbGFub3gvbWx4YmYtdG1maWZvLmMKPiBAQCAtOTgw
LDExICs5ODAsMTMgQEAgc3RhdGljIHZvaWQgbWx4YmZfdG1maWZvX3ZpcnRpb19zZXRfc3RhdHVz
KHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2LAo+ICAgfQo+ICAgCj4gICAvKiBSZXNldCB0aGUg
ZGV2aWNlLiBOb3QgbXVjaCBoZXJlIGZvciBub3cuICovCj4gLXN0YXRpYyB2b2lkIG1seGJmX3Rt
Zmlmb192aXJ0aW9fcmVzZXQoc3RydWN0IHZpcnRpb19kZXZpY2UgKnZkZXYpCj4gK3N0YXRpYyBp
bnQgbWx4YmZfdG1maWZvX3ZpcnRpb19yZXNldChzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldikK
PiAgIHsKPiAgIAlzdHJ1Y3QgbWx4YmZfdG1maWZvX3ZkZXYgKnRtX3ZkZXYgPSBtbHhiZl92ZGV2
X3RvX3RtZmlmbyh2ZGV2KTsKPiAgIAo+ICAgCXRtX3ZkZXYtPnN0YXR1cyA9IDA7Cj4gKwo+ICsJ
cmV0dXJuIDA7Cj4gICB9Cj4gICAKPiAgIC8qIFJlYWQgdGhlIHZhbHVlIG9mIGEgY29uZmlndXJh
dGlvbiBmaWVsZC4gKi8KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9yZW1vdGVwcm9jL3JlbW90ZXBy
b2NfdmlydGlvLmMgYi9kcml2ZXJzL3JlbW90ZXByb2MvcmVtb3RlcHJvY192aXJ0aW8uYwo+IGlu
ZGV4IDBjYzYxN2Y3NjA2OC4uY2E5NTczYzYyYzNkIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvcmVt
b3RlcHJvYy9yZW1vdGVwcm9jX3ZpcnRpby5jCj4gKysrIGIvZHJpdmVycy9yZW1vdGVwcm9jL3Jl
bW90ZXByb2NfdmlydGlvLmMKPiBAQCAtMTkxLDcgKzE5MSw3IEBAIHN0YXRpYyB2b2lkIHJwcm9j
X3ZpcnRpb19zZXRfc3RhdHVzKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2LCB1OCBzdGF0dXMp
Cj4gICAJZGV2X2RiZygmdmRldi0+ZGV2LCAic3RhdHVzOiAlZFxuIiwgc3RhdHVzKTsKPiAgIH0K
PiAgIAo+IC1zdGF0aWMgdm9pZCBycHJvY192aXJ0aW9fcmVzZXQoc3RydWN0IHZpcnRpb19kZXZp
Y2UgKnZkZXYpCj4gK3N0YXRpYyBpbnQgcnByb2NfdmlydGlvX3Jlc2V0KHN0cnVjdCB2aXJ0aW9f
ZGV2aWNlICp2ZGV2KQo+ICAgewo+ICAgCXN0cnVjdCBycHJvY192ZGV2ICpydmRldiA9IHZkZXZf
dG9fcnZkZXYodmRldik7Cj4gICAJc3RydWN0IGZ3X3JzY192ZGV2ICpyc2M7Cj4gQEAgLTIwMCw2
ICsyMDAsOCBAQCBzdGF0aWMgdm9pZCBycHJvY192aXJ0aW9fcmVzZXQoc3RydWN0IHZpcnRpb19k
ZXZpY2UgKnZkZXYpCj4gICAKPiAgIAlyc2MtPnN0YXR1cyA9IDA7Cj4gICAJZGV2X2RiZygmdmRl
di0+ZGV2LCAicmVzZXQgIVxuIik7Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gICB9Cj4gICAKPiAgIC8q
IHByb3ZpZGUgdGhlIHZkZXYgZmVhdHVyZXMgYXMgcmV0cmlldmVkIGZyb20gdGhlIGZpcm13YXJl
ICovCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvczM5MC92aXJ0aW8vdmlydGlvX2Njdy5jIGIvZHJp
dmVycy9zMzkwL3ZpcnRpby92aXJ0aW9fY2N3LmMKPiBpbmRleCA1NGU2ODZkY2E2ZGUuLjUyYjMy
NTU1ZTc0NiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3MzOTAvdmlydGlvL3ZpcnRpb19jY3cuYwo+
ICsrKyBiL2RyaXZlcnMvczM5MC92aXJ0aW8vdmlydGlvX2Njdy5jCj4gQEAgLTczMiwxNCArNzMy
LDE1IEBAIHN0YXRpYyBpbnQgdmlydGlvX2Njd19maW5kX3ZxcyhzdHJ1Y3QgdmlydGlvX2Rldmlj
ZSAqdmRldiwgdW5zaWduZWQgbnZxcywKPiAgIAlyZXR1cm4gcmV0Owo+ICAgfQo+ICAgCj4gLXN0
YXRpYyB2b2lkIHZpcnRpb19jY3dfcmVzZXQoc3RydWN0IHZpcnRpb19kZXZpY2UgKnZkZXYpCj4g
K3N0YXRpYyBpbnQgdmlydGlvX2Njd19yZXNldChzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldikK
PiAgIHsKPiAgIAlzdHJ1Y3QgdmlydGlvX2Njd19kZXZpY2UgKnZjZGV2ID0gdG9fdmNfZGV2aWNl
KHZkZXYpOwo+ICAgCXN0cnVjdCBjY3cxICpjY3c7Cj4gKwlpbnQgcmV0Owo+ICAgCj4gICAJY2N3
ID0gY2N3X2RldmljZV9kbWFfemFsbG9jKHZjZGV2LT5jZGV2LCBzaXplb2YoKmNjdykpOwo+ICAg
CWlmICghY2N3KQo+IC0JCXJldHVybjsKPiArCQlyZXR1cm4gLUVOT01FTTsKPiAgIAo+ICAgCS8q
IFplcm8gc3RhdHVzIGJpdHMuICovCj4gICAJdmNkZXYtPmRtYV9hcmVhLT5zdGF0dXMgPSAwOwo+
IEBAIC03NDksOCArNzUwLDEwIEBAIHN0YXRpYyB2b2lkIHZpcnRpb19jY3dfcmVzZXQoc3RydWN0
IHZpcnRpb19kZXZpY2UgKnZkZXYpCj4gICAJY2N3LT5mbGFncyA9IDA7Cj4gICAJY2N3LT5jb3Vu
dCA9IDA7Cj4gICAJY2N3LT5jZGEgPSAwOwo+IC0JY2N3X2lvX2hlbHBlcih2Y2RldiwgY2N3LCBW
SVJUSU9fQ0NXX0RPSU5HX1JFU0VUKTsKPiArCXJldCA9IGNjd19pb19oZWxwZXIodmNkZXYsIGNj
dywgVklSVElPX0NDV19ET0lOR19SRVNFVCk7Cj4gICAJY2N3X2RldmljZV9kbWFfZnJlZSh2Y2Rl
di0+Y2RldiwgY2N3LCBzaXplb2YoKmNjdykpOwo+ICsKPiArCXJldHVybiByZXQ7Cj4gICB9Cj4g
ICAKPiAgIHN0YXRpYyB1NjQgdmlydGlvX2Njd19nZXRfZmVhdHVyZXMoc3RydWN0IHZpcnRpb19k
ZXZpY2UgKnZkZXYpCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpby5jIGIvZHJp
dmVycy92aXJ0aW8vdmlydGlvLmMKPiBpbmRleCA0YjE1YzAwYzBhMGEuLmRkYmZkNWI1ZjNiZCAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZpcnRpby92aXJ0aW8uYwo+ICsrKyBiL2RyaXZlcnMvdmly
dGlvL3ZpcnRpby5jCj4gQEAgLTMzOCw3ICszMzgsNyBAQCBpbnQgcmVnaXN0ZXJfdmlydGlvX2Rl
dmljZShzdHJ1Y3QgdmlydGlvX2RldmljZSAqZGV2KQo+ICAgCS8qIEFzc2lnbiBhIHVuaXF1ZSBk
ZXZpY2UgaW5kZXggYW5kIGhlbmNlIG5hbWUuICovCj4gICAJZXJyID0gaWRhX3NpbXBsZV9nZXQo
JnZpcnRpb19pbmRleF9pZGEsIDAsIDAsIEdGUF9LRVJORUwpOwo+ICAgCWlmIChlcnIgPCAwKQo+
IC0JCWdvdG8gb3V0Owo+ICsJCWdvdG8gb3V0X2VycjsKPiAgIAo+ICAgCWRldi0+aW5kZXggPSBl
cnI7Cj4gICAJZGV2X3NldF9uYW1lKCZkZXYtPmRldiwgInZpcnRpbyV1IiwgZGV2LT5pbmRleCk7
Cj4gQEAgLTM0OSw3ICszNDksOSBAQCBpbnQgcmVnaXN0ZXJfdmlydGlvX2RldmljZShzdHJ1Y3Qg
dmlydGlvX2RldmljZSAqZGV2KQo+ICAgCj4gICAJLyogV2UgYWx3YXlzIHN0YXJ0IGJ5IHJlc2V0
dGluZyB0aGUgZGV2aWNlLCBpbiBjYXNlIGEgcHJldmlvdXMKPiAgIAkgKiBkcml2ZXIgbWVzc2Vk
IGl0IHVwLiAgVGhpcyBhbHNvIHRlc3RzIHRoYXQgY29kZSBwYXRoIGEgbGl0dGxlLiAqLwo+IC0J
ZGV2LT5jb25maWctPnJlc2V0KGRldik7Cj4gKwllcnIgPSBkZXYtPmNvbmZpZy0+cmVzZXQoZGV2
KTsKPiArCWlmIChlcnIpCj4gKwkJZ290byBvdXRfaWRhOwo+ICAgCj4gICAJLyogQWNrbm93bGVk
Z2UgdGhhdCB3ZSd2ZSBzZWVuIHRoZSBkZXZpY2UuICovCj4gICAJdmlydGlvX2FkZF9zdGF0dXMo
ZGV2LCBWSVJUSU9fQ09ORklHX1NfQUNLTk9XTEVER0UpOwo+IEBAIC0zNjIsMTAgKzM2NCwxNCBA
QCBpbnQgcmVnaXN0ZXJfdmlydGlvX2RldmljZShzdHJ1Y3QgdmlydGlvX2RldmljZSAqZGV2KQo+
ICAgCSAqLwo+ICAgCWVyciA9IGRldmljZV9hZGQoJmRldi0+ZGV2KTsKPiAgIAlpZiAoZXJyKQo+
IC0JCWlkYV9zaW1wbGVfcmVtb3ZlKCZ2aXJ0aW9faW5kZXhfaWRhLCBkZXYtPmluZGV4KTsKPiAt
b3V0Ogo+IC0JaWYgKGVycikKPiAtCQl2aXJ0aW9fYWRkX3N0YXR1cyhkZXYsIFZJUlRJT19DT05G
SUdfU19GQUlMRUQpOwo+ICsJCWdvdG8gb3V0X2lkYTsKPiArCj4gKwlyZXR1cm4gMDsKPiArCj4g
K291dF9pZGE6Cj4gKwlpZGFfc2ltcGxlX3JlbW92ZSgmdmlydGlvX2luZGV4X2lkYSwgZGV2LT5p
bmRleCk7Cj4gK291dF9lcnI6Cj4gKwl2aXJ0aW9fYWRkX3N0YXR1cyhkZXYsIFZJUlRJT19DT05G
SUdfU19GQUlMRUQpOwo+ICAgCXJldHVybiBlcnI7Cj4gICB9Cj4gICBFWFBPUlRfU1lNQk9MX0dQ
TChyZWdpc3Rlcl92aXJ0aW9fZGV2aWNlKTsKPiBAQCAtNDA4LDcgKzQxNCw5IEBAIGludCB2aXJ0
aW9fZGV2aWNlX3Jlc3RvcmUoc3RydWN0IHZpcnRpb19kZXZpY2UgKmRldikKPiAgIAo+ICAgCS8q
IFdlIGFsd2F5cyBzdGFydCBieSByZXNldHRpbmcgdGhlIGRldmljZSwgaW4gY2FzZSBhIHByZXZp
b3VzCj4gICAJICogZHJpdmVyIG1lc3NlZCBpdCB1cC4gKi8KPiAtCWRldi0+Y29uZmlnLT5yZXNl
dChkZXYpOwo+ICsJcmV0ID0gZGV2LT5jb25maWctPnJlc2V0KGRldik7Cj4gKwlpZiAocmV0KQo+
ICsJCWdvdG8gZXJyOwo+ICAgCj4gICAJLyogQWNrbm93bGVkZ2UgdGhhdCB3ZSd2ZSBzZWVuIHRo
ZSBkZXZpY2UuICovCj4gICAJdmlydGlvX2FkZF9zdGF0dXMoZGV2LCBWSVJUSU9fQ09ORklHX1Nf
QUNLTk9XTEVER0UpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fbW1pby5j
IGIvZHJpdmVycy92aXJ0aW8vdmlydGlvX21taW8uYwo+IGluZGV4IDU2MTI4YjljNDZlYi4uMTJi
OGYwNDhjNDhkIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19tbWlvLmMKPiAr
KysgYi9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fbW1pby5jCj4gQEAgLTI1NiwxMiArMjU2LDEzIEBA
IHN0YXRpYyB2b2lkIHZtX3NldF9zdGF0dXMoc3RydWN0IHZpcnRpb19kZXZpY2UgKnZkZXYsIHU4
IHN0YXR1cykKPiAgIAl3cml0ZWwoc3RhdHVzLCB2bV9kZXYtPmJhc2UgKyBWSVJUSU9fTU1JT19T
VEFUVVMpOwo+ICAgfQo+ICAgCj4gLXN0YXRpYyB2b2lkIHZtX3Jlc2V0KHN0cnVjdCB2aXJ0aW9f
ZGV2aWNlICp2ZGV2KQo+ICtzdGF0aWMgaW50IHZtX3Jlc2V0KHN0cnVjdCB2aXJ0aW9fZGV2aWNl
ICp2ZGV2KQo+ICAgewo+ICAgCXN0cnVjdCB2aXJ0aW9fbW1pb19kZXZpY2UgKnZtX2RldiA9IHRv
X3ZpcnRpb19tbWlvX2RldmljZSh2ZGV2KTsKPiAgIAo+ICAgCS8qIDAgc3RhdHVzIG1lYW5zIGEg
cmVzZXQuICovCj4gICAJd3JpdGVsKDAsIHZtX2Rldi0+YmFzZSArIFZJUlRJT19NTUlPX1NUQVRV
Uyk7Cj4gKwlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+ICAgCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
dmlydGlvL3ZpcnRpb19wY2lfbGVnYWN5LmMgYi9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fcGNpX2xl
Z2FjeS5jCj4gaW5kZXggZDYyZTk4MzVhZWVjLi4wYjVkOTVlM2VmYTEgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy92aXJ0aW8vdmlydGlvX3BjaV9sZWdhY3kuYwo+ICsrKyBiL2RyaXZlcnMvdmlydGlv
L3ZpcnRpb19wY2lfbGVnYWN5LmMKPiBAQCAtODksNyArODksNyBAQCBzdGF0aWMgdm9pZCB2cF9z
ZXRfc3RhdHVzKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2LCB1OCBzdGF0dXMpCj4gICAJaW93
cml0ZTgoc3RhdHVzLCB2cF9kZXYtPmlvYWRkciArIFZJUlRJT19QQ0lfU1RBVFVTKTsKPiAgIH0K
PiAgIAo+IC1zdGF0aWMgdm9pZCB2cF9yZXNldChzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldikK
PiArc3RhdGljIGludCB2cF9yZXNldChzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldikKPiAgIHsK
PiAgIAlzdHJ1Y3QgdmlydGlvX3BjaV9kZXZpY2UgKnZwX2RldiA9IHRvX3ZwX2RldmljZSh2ZGV2
KTsKPiAgIAkvKiAwIHN0YXR1cyBtZWFucyBhIHJlc2V0LiAqLwo+IEBAIC05OSw2ICs5OSw4IEBA
IHN0YXRpYyB2b2lkIHZwX3Jlc2V0KHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2KQo+ICAgCWlv
cmVhZDgodnBfZGV2LT5pb2FkZHIgKyBWSVJUSU9fUENJX1NUQVRVUyk7Cj4gICAJLyogRmx1c2gg
cGVuZGluZyBWUS9jb25maWd1cmF0aW9uIGNhbGxiYWNrcy4gKi8KPiAgIAl2cF9zeW5jaHJvbml6
ZV92ZWN0b3JzKHZkZXYpOwo+ICsKPiArCXJldHVybiAwOwo+ICAgfQo+ICAgCj4gICBzdGF0aWMg
dTE2IHZwX2NvbmZpZ192ZWN0b3Ioc3RydWN0IHZpcnRpb19wY2lfZGV2aWNlICp2cF9kZXYsIHUx
NiB2ZWN0b3IpCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19wY2lfbW9kZXJu
LmMgYi9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fcGNpX21vZGVybi5jCj4gaW5kZXggZmJkNGViYzAw
ZWI2Li5jYzM0MTJhOTZhMTcgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92aXJ0aW8vdmlydGlvX3Bj
aV9tb2Rlcm4uYwo+ICsrKyBiL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19wY2lfbW9kZXJuLmMKPiBA
QCAtMTU4LDcgKzE1OCw3IEBAIHN0YXRpYyB2b2lkIHZwX3NldF9zdGF0dXMoc3RydWN0IHZpcnRp
b19kZXZpY2UgKnZkZXYsIHU4IHN0YXR1cykKPiAgIAl2cF9tb2Rlcm5fc2V0X3N0YXR1cygmdnBf
ZGV2LT5tZGV2LCBzdGF0dXMpOwo+ICAgfQo+ICAgCj4gLXN0YXRpYyB2b2lkIHZwX3Jlc2V0KHN0
cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2KQo+ICtzdGF0aWMgaW50IHZwX3Jlc2V0KHN0cnVjdCB2
aXJ0aW9fZGV2aWNlICp2ZGV2KQo+ICAgewo+ICAgCXN0cnVjdCB2aXJ0aW9fcGNpX2RldmljZSAq
dnBfZGV2ID0gdG9fdnBfZGV2aWNlKHZkZXYpOwo+ICAgCXN0cnVjdCB2aXJ0aW9fcGNpX21vZGVy
bl9kZXZpY2UgKm1kZXYgPSAmdnBfZGV2LT5tZGV2Owo+IEBAIC0xNzQsNiArMTc0LDcgQEAgc3Rh
dGljIHZvaWQgdnBfcmVzZXQoc3RydWN0IHZpcnRpb19kZXZpY2UgKnZkZXYpCj4gICAJCW1zbGVl
cCgxKTsKPiAgIAkvKiBGbHVzaCBwZW5kaW5nIFZRL2NvbmZpZ3VyYXRpb24gY2FsbGJhY2tzLiAq
Lwo+ICAgCXZwX3N5bmNocm9uaXplX3ZlY3RvcnModmRldik7Cj4gKwlyZXR1cm4gMDsKPiAgIH0K
PiAgIAo+ICAgc3RhdGljIHUxNiB2cF9jb25maWdfdmVjdG9yKHN0cnVjdCB2aXJ0aW9fcGNpX2Rl
dmljZSAqdnBfZGV2LCB1MTYgdmVjdG9yKQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpcnRpby92
aXJ0aW9fdmRwYS5jIGIvZHJpdmVycy92aXJ0aW8vdmlydGlvX3ZkcGEuYwo+IGluZGV4IGUyOGFj
ZjQ4MmUwYy4uNWZkNGU2MjdhOWIwIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvdmlydGlvL3ZpcnRp
b192ZHBhLmMKPiArKysgYi9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fdmRwYS5jCj4gQEAgLTk3LDEx
ICs5NywxMyBAQCBzdGF0aWMgdm9pZCB2aXJ0aW9fdmRwYV9zZXRfc3RhdHVzKHN0cnVjdCB2aXJ0
aW9fZGV2aWNlICp2ZGV2LCB1OCBzdGF0dXMpCj4gICAJcmV0dXJuIG9wcy0+c2V0X3N0YXR1cyh2
ZHBhLCBzdGF0dXMpOwo+ICAgfQo+ICAgCj4gLXN0YXRpYyB2b2lkIHZpcnRpb192ZHBhX3Jlc2V0
KHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2KQo+ICtzdGF0aWMgaW50IHZpcnRpb192ZHBhX3Jl
c2V0KHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2KQo+ICAgewo+ICAgCXN0cnVjdCB2ZHBhX2Rl
dmljZSAqdmRwYSA9IHZkX2dldF92ZHBhKHZkZXYpOwo+ICAgCj4gICAJdmRwYV9yZXNldCh2ZHBh
KTsKPiArCj4gKwlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+ICAgc3RhdGljIGJvb2wgdmlydGlvX3Zk
cGFfbm90aWZ5KHN0cnVjdCB2aXJ0cXVldWUgKnZxKQo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xp
bnV4L3ZpcnRpb19jb25maWcuaCBiL2luY2x1ZGUvbGludXgvdmlydGlvX2NvbmZpZy5oCj4gaW5k
ZXggODUxOWIzYWU1ZDUyLi5kMmIwZjE2OTlhNzUgMTAwNjQ0Cj4gLS0tIGEvaW5jbHVkZS9saW51
eC92aXJ0aW9fY29uZmlnLmgKPiArKysgYi9pbmNsdWRlL2xpbnV4L3ZpcnRpb19jb25maWcuaAo+
IEBAIC00NCw5ICs0NCwxMCBAQCBzdHJ1Y3QgdmlydGlvX3NobV9yZWdpb24gewo+ICAgICoJc3Rh
dHVzOiB0aGUgbmV3IHN0YXR1cyBieXRlCj4gICAgKiBAcmVzZXQ6IHJlc2V0IHRoZSBkZXZpY2UK
PiAgICAqCXZkZXY6IHRoZSB2aXJ0aW8gZGV2aWNlCj4gLSAqCUFmdGVyIHRoaXMsIHN0YXR1cyBh
bmQgZmVhdHVyZSBuZWdvdGlhdGlvbiBtdXN0IGJlIGRvbmUgYWdhaW4KPiArICoJVXBvbiBzdWNj
ZXNzLCBzdGF0dXMgYW5kIGZlYXR1cmUgbmVnb3RpYXRpb24gbXVzdCBiZSBkb25lIGFnYWluCj4g
ICAgKglEZXZpY2UgbXVzdCBub3QgYmUgcmVzZXQgZnJvbSBpdHMgdnEvY29uZmlnIGNhbGxiYWNr
cywgb3IgaW4KPiAgICAqCXBhcmFsbGVsIHdpdGggYmVpbmcgYWRkZWQvcmVtb3ZlZC4KPiArICoJ
UmV0dXJucyAwIG9uIHN1Y2Nlc3Mgb3IgZXJyb3Igc3RhdHVzLgo+ICAgICogQGZpbmRfdnFzOiBm
aW5kIHZpcnRxdWV1ZXMgYW5kIGluc3RhbnRpYXRlIHRoZW0uCj4gICAgKgl2ZGV2OiB0aGUgdmly
dGlvX2RldmljZQo+ICAgICoJbnZxczogdGhlIG51bWJlciBvZiB2aXJ0cXVldWVzIHRvIGZpbmQK
PiBAQCAtODIsNyArODMsNyBAQCBzdHJ1Y3QgdmlydGlvX2NvbmZpZ19vcHMgewo+ICAgCXUzMiAo
KmdlbmVyYXRpb24pKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2KTsKPiAgIAl1OCAoKmdldF9z
dGF0dXMpKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2KTsKPiAgIAl2b2lkICgqc2V0X3N0YXR1
cykoc3RydWN0IHZpcnRpb19kZXZpY2UgKnZkZXYsIHU4IHN0YXR1cyk7Cj4gLQl2b2lkICgqcmVz
ZXQpKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICp2ZGV2KTsKPiArCWludCAoKnJlc2V0KShzdHJ1Y3Qg
dmlydGlvX2RldmljZSAqdmRldik7Cj4gICAJaW50ICgqZmluZF92cXMpKHN0cnVjdCB2aXJ0aW9f
ZGV2aWNlICosIHVuc2lnbmVkIG52cXMsCj4gICAJCQlzdHJ1Y3QgdmlydHF1ZXVlICp2cXNbXSwg
dnFfY2FsbGJhY2tfdCAqY2FsbGJhY2tzW10sCj4gICAJCQljb25zdCBjaGFyICogY29uc3QgbmFt
ZXNbXSwgY29uc3QgYm9vbCAqY3R4LAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KVmlydHVhbGl6YXRpb24gbWFpbGluZyBsaXN0ClZpcnR1YWxpemF0aW9u
QGxpc3RzLmxpbnV4LWZvdW5kYXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGludXhmb3VuZGF0aW9u
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3ZpcnR1YWxpemF0aW9u
