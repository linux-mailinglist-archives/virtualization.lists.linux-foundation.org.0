Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [140.211.166.133])
	by mail.lfdr.de (Postfix) with ESMTPS id 528E04B1F86
	for <lists.virtualization@lfdr.de>; Fri, 11 Feb 2022 08:46:10 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id 8AB21400E6;
	Fri, 11 Feb 2022 07:46:08 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id NDI0EWcgfB0Z; Fri, 11 Feb 2022 07:46:07 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp2.osuosl.org (Postfix) with ESMTPS id CC4EE40124;
	Fri, 11 Feb 2022 07:46:06 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 32E90C0039;
	Fri, 11 Feb 2022 07:46:06 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp1.osuosl.org (smtp1.osuosl.org [140.211.166.138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id ABF25C000B
 for <virtualization@lists.linux-foundation.org>;
 Fri, 11 Feb 2022 07:46:04 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp1.osuosl.org (Postfix) with ESMTP id 7D12982E4C
 for <virtualization@lists.linux-foundation.org>;
 Fri, 11 Feb 2022 07:46:04 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp1.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp1.osuosl.org ([127.0.0.1])
 by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id joT0yBllMW3G
 for <virtualization@lists.linux-foundation.org>;
 Fri, 11 Feb 2022 07:46:02 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp1.osuosl.org (Postfix) with ESMTPS id 81EDC82D0C
 for <virtualization@lists.linux-foundation.org>;
 Fri, 11 Feb 2022 07:46:02 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1644565561;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=/blf6IlFCiwMIlX6anj8mtrKZzMQn5bOMuNh13XU7xI=;
 b=YnSME+1CNMabYQ+/TU3FGgAjokrqXwee1J2vne1L5FPC3V2139F2qPfrFBDNvXoMIvM8W6
 9yPGfnKby+Iqos3+Tjk43E/GQmKcvKllj4IzE381sEWjP8JTirV0XRa9nFgEd2x+xoigkk
 o2D4JTVmd0Te8GcMrgTITW2s9NW1b7E=
Received: from mail-lj1-f199.google.com (mail-lj1-f199.google.com
 [209.85.208.199]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 us-mta-324-LSRZ7JQ7Pqm6xkKYOJ83Yw-1; Fri, 11 Feb 2022 02:46:00 -0500
X-MC-Unique: LSRZ7JQ7Pqm6xkKYOJ83Yw-1
Received: by mail-lj1-f199.google.com with SMTP id
 a13-20020a2eb54d000000b0023f5f64ae4fso3748669ljn.4
 for <virtualization@lists.linux-foundation.org>;
 Thu, 10 Feb 2022 23:45:59 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=/blf6IlFCiwMIlX6anj8mtrKZzMQn5bOMuNh13XU7xI=;
 b=EENPL38ttPv5DKBnC1BE/qBvcP/43Q+RjrlPTHCnKY1/LkQDVQgWZKi46T3opoc9oO
 Ln3k2oURFwBCPcwnV7GgbmfqRTJ4LEZUUrq7QnwJSh1HZZMhAwhg9xWCX+JQPhZLj1Qz
 +TThZbpnYp3dS6Y2Doc32Vyrk0XZqq56B1qz5p4i+X4SWVwAAc64cndXMJvtH6q+c0K0
 iUcidn1gO2JxunAAfn9pbBIIiPIEBHHAmXv5OnfsGt6XUKlJwBmBRqdLA8TqXWYHiiTN
 zP7CQBuqU9mdwPBFNI2Rkn/h8he1YBJ7jR1MqBDrpHHboFUBuPqNPcG9cKXcp/azesUV
 f91A==
X-Gm-Message-State: AOAM532nPm/mbRGm2cQIRemwh2vmFNjFu3DAoAM77PwANg9X4PRUki6o
 o+LL7J2uxgkSzCQ4DqKB8MFZW2uOHS/4QFMwtc8g36gy/gPd0E1YAkzLbLt93PvK0VPxVaYITLP
 wpPKdFvbNHfHmmR30+krrPhJz8no9fNIYu6EqL8ABIkCHBCZN5D/Xw4oJNA==
X-Received: by 2002:a05:6512:3d8d:: with SMTP id
 k13mr349185lfv.481.1644565558364; 
 Thu, 10 Feb 2022 23:45:58 -0800 (PST)
X-Google-Smtp-Source: ABdhPJzZ9KCiVORJ/mE3wfXfdvwvzykLBtlN3JaCqemtEmXorgeYZA6+7UEHf0CY25mJsSLR7+52cR8cYsFhCF825VE=
X-Received: by 2002:a05:6512:3d8d:: with SMTP id
 k13mr349176lfv.481.1644565558112; 
 Thu, 10 Feb 2022 23:45:58 -0800 (PST)
MIME-Version: 1.0
References: <20220209122901.51790-1-xuanzhuo@linux.alibaba.com>
 <20220209122901.51790-15-xuanzhuo@linux.alibaba.com>
 <8b0b5f06-74eb-d6cb-07e2-38249e4cda92@redhat.com>
 <1644564073.3777697-1-xuanzhuo@linux.alibaba.com>
In-Reply-To: <1644564073.3777697-1-xuanzhuo@linux.alibaba.com>
From: Jason Wang <jasowang@redhat.com>
Date: Fri, 11 Feb 2022 15:45:46 +0800
Message-ID: <CACGkMEv4560JKv7UM6v6rADNMbhTv-86KJebAwYebFOkUndnPg@mail.gmail.com>
Subject: Re: [PATCH v4 14/14] virtio_pci: queue_reset: support
 VIRTIO_F_RING_RESET
To: Xuan Zhuo <xuanzhuo@linux.alibaba.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: virtualization <virtualization@lists.linux-foundation.org>,
 linux-kernel <linux-kernel@vger.kernel.org>,
 "Michael S. Tsirkin" <mst@redhat.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gRnJpLCBGZWIgMTEsIDIwMjIgYXQgMzoyNCBQTSBYdWFuIFpodW8gPHh1YW56aHVvQGxpbnV4
LmFsaWJhYmEuY29tPiB3cm90ZToKPgo+IE9uIEZyaSwgMTEgRmViIDIwMjIgMTU6MDU6NDAgKzA4
MDAsIEphc29uIFdhbmcgPGphc293YW5nQHJlZGhhdC5jb20+IHdyb3RlOgo+ID4KPiA+IOWcqCAy
MDIyLzIvOSDkuIvljYg4OjI5LCBYdWFuIFpodW8g5YaZ6YGTOgo+ID4gPiBUaGlzIHBhdGNoIGlt
cGxlbWVudHMgdmlydGlvIHBjaSBzdXBwb3J0IGZvciBRVUVVRSBSRVNFVC4KPiA+ID4KPiA+ID4g
UGVyZm9ybWluZyByZXNldCBvbiBhIHF1ZXVlIGlzIGRpdmlkZWQgaW50byB0aGVzZSBzdGVwczoK
PiA+ID4KPiA+ID4gMS4gcmVzZXRfdnE6IHJlc2V0IG9uZSB2cQo+ID4gPiAyLiByZWN5Y2xlIHRo
ZSBidWZmZXIgZnJvbSB2cSBieSB2aXJ0cXVldWVfZGV0YWNoX3VudXNlZF9idWYoKQo+ID4gPiAz
LiByZWxlYXNlIHRoZSByaW5nIG9mIHRoZSB2cSBieSB2cmluZ19yZWxlYXNlX3ZpcnRxdWV1ZSgp
Cj4gPiA+IDQuIGVuYWJsZV9yZXNldF92cTogcmUtZW5hYmxlIHRoZSByZXNldCBxdWV1ZQo+ID4g
Pgo+ID4gPiBUaGlzIHBhdGNoIGltcGxlbWVudHMgcmVzZXRfdnEsIGVuYWJsZV9yZXNldF92cSBp
biB0aGUgcGNpIHNjZW5hcmlvCj4gPiA+Cj4gPiA+IFNpZ25lZC1vZmYtYnk6IFh1YW4gWmh1byA8
eHVhbnpodW9AbGludXguYWxpYmFiYS5jb20+Cj4gPiA+IC0tLQo+ID4gPiAgIGRyaXZlcnMvdmly
dGlvL3ZpcnRpb19wY2lfY29tbW9uLmMgfCAgOCArLS0KPiA+ID4gICBkcml2ZXJzL3ZpcnRpby92
aXJ0aW9fcGNpX21vZGVybi5jIHwgODAgKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tCj4g
PiA+ICAgZHJpdmVycy92aXJ0aW8vdmlydGlvX3JpbmcuYyAgICAgICB8ICAyICsKPiA+ID4gICBp
bmNsdWRlL2xpbnV4L3ZpcnRpby5oICAgICAgICAgICAgIHwgIDEgKwo+ID4gPiAgIDQgZmlsZXMg
Y2hhbmdlZCwgODUgaW5zZXJ0aW9ucygrKSwgNiBkZWxldGlvbnMoLSkKPiA+ID4KPiA+ID4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19wY2lfY29tbW9uLmMgYi9kcml2ZXJzL3Zp
cnRpby92aXJ0aW9fcGNpX2NvbW1vbi5jCj4gPiA+IGluZGV4IGNiMDFlYjBjYjJlNC4uMzAzNjM3
YWM0OTE0IDEwMDY0NAo+ID4gPiAtLS0gYS9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fcGNpX2NvbW1v
bi5jCj4gPiA+ICsrKyBiL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19wY2lfY29tbW9uLmMKPiA+ID4g
QEAgLTI1NSw5ICsyNTUsMTEgQEAgc3RhdGljIHZvaWQgdnBfZGVsX3ZxKHN0cnVjdCB2aXJ0cXVl
dWUgKnZxKQo+ID4gPiAgICAgc3RydWN0IHZpcnRpb19wY2lfdnFfaW5mbyAqaW5mbyA9IHZwX2Rl
di0+dnFzW3ZxLT5pbmRleF07Cj4gPiA+ICAgICB1bnNpZ25lZCBsb25nIGZsYWdzOwo+ID4gPgo+
ID4gPiAtICAgc3Bpbl9sb2NrX2lycXNhdmUoJnZwX2Rldi0+bG9jaywgZmxhZ3MpOwo+ID4gPiAt
ICAgbGlzdF9kZWwoJmluZm8tPm5vZGUpOwo+ID4gPiAtICAgc3Bpbl91bmxvY2tfaXJxcmVzdG9y
ZSgmdnBfZGV2LT5sb2NrLCBmbGFncyk7Cj4gPiA+ICsgICBpZiAoIXZxLT5yZXNldCkgewo+ID4g
PiArICAgICAgICAgICBzcGluX2xvY2tfaXJxc2F2ZSgmdnBfZGV2LT5sb2NrLCBmbGFncyk7Cj4g
PiA+ICsgICAgICAgICAgIGxpc3RfZGVsKCZpbmZvLT5ub2RlKTsKPiA+ID4gKyAgICAgICAgICAg
c3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmdnBfZGV2LT5sb2NrLCBmbGFncyk7Cj4gPiA+ICsgICB9
Cj4gPiA+Cj4gPiA+ICAgICB2cF9kZXYtPmRlbF92cShpbmZvKTsKPiA+ID4gICAgIGtmcmVlKGlu
Zm8pOwo+ID4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92aXJ0aW8vdmlydGlvX3BjaV9tb2Rlcm4u
YyBiL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19wY2lfbW9kZXJuLmMKPiA+ID4gaW5kZXggZDI5ZDQw
YmYwYjQ1Li5jYzQ1NTE1ZWRhNTAgMTAwNjQ0Cj4gPiA+IC0tLSBhL2RyaXZlcnMvdmlydGlvL3Zp
cnRpb19wY2lfbW9kZXJuLmMKPiA+ID4gKysrIGIvZHJpdmVycy92aXJ0aW8vdmlydGlvX3BjaV9t
b2Rlcm4uYwo+ID4gPiBAQCAtMzQsNiArMzQsOSBAQCBzdGF0aWMgdm9pZCB2cF90cmFuc3BvcnRf
ZmVhdHVyZXMoc3RydWN0IHZpcnRpb19kZXZpY2UgKnZkZXYsIHU2NCBmZWF0dXJlcykKPiA+ID4g
ICAgIGlmICgoZmVhdHVyZXMgJiBCSVRfVUxMKFZJUlRJT19GX1NSX0lPVikpICYmCj4gPiA+ICAg
ICAgICAgICAgICAgICAgICAgcGNpX2ZpbmRfZXh0X2NhcGFiaWxpdHkocGNpX2RldiwgUENJX0VY
VF9DQVBfSURfU1JJT1YpKQo+ID4gPiAgICAgICAgICAgICBfX3ZpcnRpb19zZXRfYml0KHZkZXYs
IFZJUlRJT19GX1NSX0lPVik7Cj4gPiA+ICsKPiA+ID4gKyAgIGlmIChmZWF0dXJlcyAmIEJJVF9V
TEwoVklSVElPX0ZfUklOR19SRVNFVCkpCj4gPiA+ICsgICAgICAgICAgIF9fdmlydGlvX3NldF9i
aXQodmRldiwgVklSVElPX0ZfUklOR19SRVNFVCk7Cj4gPiA+ICAgfQo+ID4gPgo+ID4gPiAgIC8q
IHZpcnRpbyBjb25maWctPmZpbmFsaXplX2ZlYXR1cmVzKCkgaW1wbGVtZW50YXRpb24gKi8KPiA+
ID4gQEAgLTE3Niw2ICsxNzksNzAgQEAgc3RhdGljIHZvaWQgdnBfcmVzZXQoc3RydWN0IHZpcnRp
b19kZXZpY2UgKnZkZXYpCj4gPiA+ICAgICB2cF9kaXNhYmxlX2Nicyh2ZGV2KTsKPiA+ID4gICB9
Cj4gPiA+Cj4gPiA+ICtzdGF0aWMgaW50IHZwX21vZGVybl9yZXNldF92cShzdHJ1Y3QgdmlydHF1
ZXVlICp2cSkKPiA+ID4gK3sKPiA+ID4gKyAgIHN0cnVjdCB2aXJ0aW9fcGNpX2RldmljZSAqdnBf
ZGV2ID0gdG9fdnBfZGV2aWNlKHZxLT52ZGV2KTsKPiA+ID4gKyAgIHN0cnVjdCB2aXJ0aW9fcGNp
X21vZGVybl9kZXZpY2UgKm1kZXYgPSAmdnBfZGV2LT5tZGV2Owo+ID4gPiArICAgc3RydWN0IHZp
cnRpb19wY2lfdnFfaW5mbyAqaW5mbzsKPiA+ID4gKyAgIHVuc2lnbmVkIGxvbmcgZmxhZ3M7Cj4g
PiA+ICsgICB1MTYgbXNpeF92ZWM7Cj4gPiA+ICsKPiA+ID4gKyAgIGlmICghdmlydGlvX2hhc19m
ZWF0dXJlKHZxLT52ZGV2LCBWSVJUSU9fRl9SSU5HX1JFU0VUKSkKPiA+ID4gKyAgICAgICAgICAg
cmV0dXJuIC1FTk9FTlQ7Cj4gPiA+ICsKPiA+ID4gKyAgIHZwX21vZGVybl9zZXRfcXVldWVfcmVz
ZXQobWRldiwgdnEtPmluZGV4KTsKPiA+ID4gKwo+ID4gPiArICAgaW5mbyA9IHZwX2Rldi0+dnFz
W3ZxLT5pbmRleF07Cj4gPiA+ICsgICBtc2l4X3ZlYyA9IGluZm8tPm1zaXhfdmVjdG9yOwo+ID4g
PiArCj4gPiA+ICsgICAvKiBEaXNhYmxlIFZRIGNhbGxiYWNrLiAqLwo+ID4gPiArICAgaWYgKHZw
X2Rldi0+cGVyX3ZxX3ZlY3RvcnMgJiYgbXNpeF92ZWMgIT0gVklSVElPX01TSV9OT19WRUNUT1Ip
Cj4gPiA+ICsgICAgICAgICAgIGRpc2FibGVfaXJxKHBjaV9pcnFfdmVjdG9yKHZwX2Rldi0+cGNp
X2RldiwgbXNpeF92ZWMpKTsKPiA+Cj4gPgo+ID4gSSB0aGluayB3ZSBuZWVkIGEgY29tbWVudCB0
byBleHBsYWluIHdoeSBwZXJfdnFfbW9kZSBuZWVkcyB0byBiZSBkZWFsdAo+ID4gd2l0aCBkaWZm
ZXJlbnRseS4KPgo+IE9LLgo+Cj4gPgo+ID4KPiA+ID4gKwo+ID4gPiArICAgLyogZGVsZXRlIHZx
ICovCj4gPiA+ICsgICBzcGluX2xvY2tfaXJxc2F2ZSgmdnBfZGV2LT5sb2NrLCBmbGFncyk7Cj4g
PiA+ICsgICBsaXN0X2RlbCgmaW5mby0+bm9kZSk7Cj4gPiA+ICsgICBzcGluX3VubG9ja19pcnFy
ZXN0b3JlKCZ2cF9kZXYtPmxvY2ssIGZsYWdzKTsKPiA+Cj4gPgo+ID4gU28gSSBkb24ndCBzZWUg
d2hlcmUgdnJpbmcgaXMgZnJlZWQgYW5kIHZwX3NldHVwX3ZxKCkgbWF5IHRyeSB0bwo+ID4gYWxs
b2NhdGUgbmV3IG1lbW9yeSwgd29uJ3QgaXQgYmUgYSBtZW1vcnkgbGVhayBpbiB0aGlzIGNhc2U/
Cj4KPiAxLiByZXNldF92cTogcmVzZXQgb25lIHZxCj4gMi4gcmVjeWNsZSB0aGUgYnVmZmVyIGZy
b20gdnEgYnkgdmlydHF1ZXVlX2RldGFjaF91bnVzZWRfYnVmKCkKPiAzLiByZWxlYXNlIHRoZSBy
aW5nIG9mIHRoZSB2cSBieSB2cmluZ19yZWxlYXNlX3ZpcnRxdWV1ZSgpCj4gNC4gZW5hYmxlX3Jl
c2V0X3ZxOiByZS1lbmFibGUgdGhlIHJlc2V0IHF1ZXVlCj4KPiB2cmluZ19yZWxlYXNlX3ZpcnRx
dWV1ZSgpICgjOCBwYXRjaCkgd2lsbCByZWxlYXNlIHRoZSB2cmluZy4KPiBUaGF0IGlzIGNhbGxl
ZCBieSB0aGUgZHJpdmVyLgo+Cj4gSSB0aGluayBJIHNob3VsZCBhZGQgYSBjaGVjayB0byB2cF9t
b2Rlcm5fZW5hYmxlX3Jlc2V0X3ZxKCkgdGhhdAo+IHZyaW5nX3JlbGVhc2VfdmlydHF1ZXVlKCkg
aGFzIGFscmVhZHkgYmVlbiBjYWxsZWQuCgpJIHdvbmRlciBpZiB3ZSBjYW4gaGF2ZSBhIGJldHRl
ciBBUEkuCgpDb25zaWRlciB3ZSBrbm93IHRoZXJlJ3MgYSByZXF1aXJlbWVudCBvZiB2cmluZyBy
ZS1hbGxvY2F0aW9uLiBJCndvbmRlciBob3cgYWJvdXQgYWRkaW5nIHBlciB2cSBjb25maWcgb3Bz
IGxpa2U6CgpkZWxfdnEoKQpmaW5kX3ZxKCkKCldlIGNhbiBsaW1pdCB0aGVtIG9ubHkgYWZ0ZXIg
YSB2aXJ0cXVldWUgaXMgcmVzZXQgYmVmb3JlIGl0IGlzCmVuYWJsZWQuIFdlIGNhbiBoYXZlIGEg
ZnVsbCBhbGxvY2F0aW9uIG9uIHRoZSByZXNvdXJjZXMgZS5nIGludGVycnVwdAooaWYgc29tZSBj
b2RlcyBjb3VsZCBiZSByZXVzZWQpLgoKVGhlbiBhIGRyaXZlciBjYW4gZG8KcmVzZXRfdnEoKQpk
ZXRhY2hfdW51c2VkX2J1ZigpCmRlbF92cQpmaW5kX3ZxKCkgLyogd2l0aCBuZXcgcGFyYW1ldGVy
cyBsaWtlIHJpbmdfbnVtIGFuZCBvdGhlcnMgbGlrZSBmaW5kX3ZxcygpICovCmVuYWJsZV9yZXNl
dF92cSgpCgo/CgpUaGFua3MKCj4KPiBUaGFua3MKPgo+ID4KPiA+IFRoYW5rcwo+ID4KPiA+Cj4g
PiA+ICsKPiA+ID4gKyAgIHZxLT5yZXNldCA9IHRydWU7Cj4gPiA+ICsKPiA+ID4gKyAgIElOSVRf
TElTVF9IRUFEKCZpbmZvLT5ub2RlKTsKPiA+ID4gKwo+ID4gPiArICAgcmV0dXJuIDA7Cj4gPiA+
ICt9Cj4gPiA+ICsKPiA+ID4gK3N0YXRpYyBpbnQgdnBfbW9kZXJuX2VuYWJsZV9yZXNldF92cShz
dHJ1Y3QgdmlydHF1ZXVlICp2cSwgdTE2IHJpbmdfbnVtKQo+ID4gPiArewo+ID4gPiArICAgc3Ry
dWN0IHZpcnRpb19wY2lfZGV2aWNlICp2cF9kZXYgPSB0b192cF9kZXZpY2UodnEtPnZkZXYpOwo+
ID4gPiArICAgc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldiA9ICZ2cF9kZXYt
Pm1kZXY7Cj4gPiA+ICsgICBzdHJ1Y3QgdmlydGlvX3BjaV92cV9pbmZvICppbmZvOwo+ID4gPiAr
ICAgc3RydWN0IHZpcnRxdWV1ZSAqX3ZxOwo+ID4gPiArICAgdTE2IG1zaXhfdmVjOwo+ID4gPiAr
Cj4gPiA+ICsgICBpZiAoIXZxLT5yZXNldCkKPiA+ID4gKyAgICAgICAgICAgcmV0dXJuIC1FUEVS
TTsKPiA+ID4gKwo+ID4gPiArICAgLyogY2hlY2sgcXVldWUgcmVzZXQgc3RhdHVzICovCj4gPiA+
ICsgICBpZiAodnBfbW9kZXJuX2dldF9xdWV1ZV9yZXNldChtZGV2LCB2cS0+aW5kZXgpICE9IDEp
Cj4gPiA+ICsgICAgICAgICAgIHJldHVybiAtRUJVU1k7Cj4gPiA+ICsKPiA+ID4gKyAgIGluZm8g
PSB2cF9kZXYtPnZxc1t2cS0+aW5kZXhdOwo+ID4gPiArICAgX3ZxID0gdnBfc2V0dXBfdnEodnEt
PnZkZXYsIHZxLT5pbmRleCwgTlVMTCwgTlVMTCwgTlVMTCwKPiA+ID4gKyAgICAgICAgICAgICAg
ICAgICAgaW5mby0+bXNpeF92ZWN0b3IsIHJpbmdfbnVtKTsKPiA+ID4gKyAgIGlmIChJU19FUlIo
X3ZxKSkgewo+ID4gPiArICAgICAgICAgICB2cS0+cmVzZXQgPSB0cnVlOwo+ID4gPiArICAgICAg
ICAgICByZXR1cm4gUFRSX0VSUihfdnEpOwo+ID4gPiArICAgfQo+ID4gPiArCj4gPiA+ICsgICB2
cF9tb2Rlcm5fc2V0X3F1ZXVlX2VuYWJsZSgmdnBfZGV2LT5tZGV2LCB2cS0+aW5kZXgsIHRydWUp
Owo+ID4gPiArCj4gPiA+ICsgICBtc2l4X3ZlYyA9IHZwX2Rldi0+dnFzW3ZxLT5pbmRleF0tPm1z
aXhfdmVjdG9yOwo+ID4gPiArICAgaWYgKHZwX2Rldi0+cGVyX3ZxX3ZlY3RvcnMgJiYgbXNpeF92
ZWMgIT0gVklSVElPX01TSV9OT19WRUNUT1IpCj4gPiA+ICsgICAgICAgICAgIGVuYWJsZV9pcnEo
cGNpX2lycV92ZWN0b3IodnBfZGV2LT5wY2lfZGV2LCBtc2l4X3ZlYykpOwo+ID4gPiArCj4gPiA+
ICsgICByZXR1cm4gMDsKPiA+ID4gK30KPiA+ID4gKwo+ID4gPiAgIHN0YXRpYyB1MTYgdnBfY29u
ZmlnX3ZlY3RvcihzdHJ1Y3QgdmlydGlvX3BjaV9kZXZpY2UgKnZwX2RldiwgdTE2IHZlY3RvcikK
PiA+ID4gICB7Cj4gPiA+ICAgICByZXR1cm4gdnBfbW9kZXJuX2NvbmZpZ192ZWN0b3IoJnZwX2Rl
di0+bWRldiwgdmVjdG9yKTsKPiA+ID4gQEAgLTIzMSwxMCArMjk4LDEzIEBAIHN0YXRpYyBzdHJ1
Y3QgdmlydHF1ZXVlICpzZXR1cF92cShzdHJ1Y3QgdmlydGlvX3BjaV9kZXZpY2UgKnZwX2RldiwK
PiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpcnRxdWV1ZV9nZXRfYXZhaWxfYWRk
cih2cSksCj4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXJ0cXVldWVfZ2V0X3Vz
ZWRfYWRkcih2cSkpOwo+ID4gPgo+ID4gPiAtICAgdnEtPnByaXYgPSAodm9pZCBfX2ZvcmNlICop
dnBfbW9kZXJuX21hcF92cV9ub3RpZnkobWRldiwgaW5kZXgsIE5VTEwpOwo+ID4gPiAgICAgaWYg
KCF2cS0+cHJpdikgewo+ID4gPiAtICAgICAgICAgICBlcnIgPSAtRU5PTUVNOwo+ID4gPiAtICAg
ICAgICAgICBnb3RvIGVycl9tYXBfbm90aWZ5Owo+ID4gPiArICAgICAgICAgICB2cS0+cHJpdiA9
ICh2b2lkIF9fZm9yY2UgKil2cF9tb2Rlcm5fbWFwX3ZxX25vdGlmeShtZGV2LCBpbmRleCwKPiA+
ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgTlVMTCk7Cj4gPiA+ICsgICAgICAgICAgIGlmICghdnEtPnByaXYpIHsKPiA+ID4g
KyAgICAgICAgICAgICAgICAgICBlcnIgPSAtRU5PTUVNOwo+ID4gPiArICAgICAgICAgICAgICAg
ICAgIGdvdG8gZXJyX21hcF9ub3RpZnk7Cj4gPiA+ICsgICAgICAgICAgIH0KPiA+Cj4gPgo+ID4g
VGhpcyBzZWVtcyB1bnJlbGF0ZWQgb3IgYW4gYXJ0aWZhY3Qgb2YgcHJldmlvdXMgcGF0Y2hlcz8K
PiA+Cj4gPiBUaGFua3MKPiA+Cj4gPgo+ID4gPiAgICAgfQo+ID4gPgo+ID4gPiAgICAgaWYgKG1z
aXhfdmVjICE9IFZJUlRJT19NU0lfTk9fVkVDVE9SKSB7Cj4gPiA+IEBAIC00MDIsNiArNDcyLDgg
QEAgc3RhdGljIGNvbnN0IHN0cnVjdCB2aXJ0aW9fY29uZmlnX29wcyB2aXJ0aW9fcGNpX2NvbmZp
Z19ub2Rldl9vcHMgPSB7Cj4gPiA+ICAgICAuc2V0X3ZxX2FmZmluaXR5ID0gdnBfc2V0X3ZxX2Fm
ZmluaXR5LAo+ID4gPiAgICAgLmdldF92cV9hZmZpbml0eSA9IHZwX2dldF92cV9hZmZpbml0eSwK
PiA+ID4gICAgIC5nZXRfc2htX3JlZ2lvbiAgPSB2cF9nZXRfc2htX3JlZ2lvbiwKPiA+ID4gKyAg
IC5yZXNldF92cSAgICAgICAgPSB2cF9tb2Rlcm5fcmVzZXRfdnEsCj4gPiA+ICsgICAuZW5hYmxl
X3Jlc2V0X3ZxID0gdnBfbW9kZXJuX2VuYWJsZV9yZXNldF92cSwKPiA+ID4gICB9Owo+ID4gPgo+
ID4gPiAgIHN0YXRpYyBjb25zdCBzdHJ1Y3QgdmlydGlvX2NvbmZpZ19vcHMgdmlydGlvX3BjaV9j
b25maWdfb3BzID0gewo+ID4gPiBAQCAtNDIwLDYgKzQ5Miw4IEBAIHN0YXRpYyBjb25zdCBzdHJ1
Y3QgdmlydGlvX2NvbmZpZ19vcHMgdmlydGlvX3BjaV9jb25maWdfb3BzID0gewo+ID4gPiAgICAg
LnNldF92cV9hZmZpbml0eSA9IHZwX3NldF92cV9hZmZpbml0eSwKPiA+ID4gICAgIC5nZXRfdnFf
YWZmaW5pdHkgPSB2cF9nZXRfdnFfYWZmaW5pdHksCj4gPiA+ICAgICAuZ2V0X3NobV9yZWdpb24g
ID0gdnBfZ2V0X3NobV9yZWdpb24sCj4gPiA+ICsgICAucmVzZXRfdnEgICAgICAgID0gdnBfbW9k
ZXJuX3Jlc2V0X3ZxLAo+ID4gPiArICAgLmVuYWJsZV9yZXNldF92cSA9IHZwX21vZGVybl9lbmFi
bGVfcmVzZXRfdnEsCj4gPiA+ICAgfTsKPiA+ID4KPiA+ID4gICAvKiB0aGUgUENJIHByb2Jpbmcg
ZnVuY3Rpb24gKi8KPiA+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19yaW5n
LmMgYi9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fcmluZy5jCj4gPiA+IGluZGV4IGI4NzQ3ZGY4ZGMx
Zi4uNGY2MDI4ZTFlMmQ5IDEwMDY0NAo+ID4gPiAtLS0gYS9kcml2ZXJzL3ZpcnRpby92aXJ0aW9f
cmluZy5jCj4gPiA+ICsrKyBiL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19yaW5nLmMKPiA+ID4gQEAg
LTE3MzEsNiArMTczMSw3IEBAIHN0YXRpYyBzdHJ1Y3QgdmlydHF1ZXVlICp2cmluZ19jcmVhdGVf
dmlydHF1ZXVlX3BhY2tlZCgKPiA+ID4gICAgIHZxLT52cS52ZGV2ID0gdmRldjsKPiA+ID4gICAg
IHZxLT52cS5udW1fZnJlZSA9IG51bTsKPiA+ID4gICAgIHZxLT52cS5pbmRleCA9IGluZGV4Owo+
ID4gPiArICAgdnEtPnZxLnJlc2V0ID0gZmFsc2U7Cj4gPiA+ICAgICB2cS0+d2Vfb3duX3Jpbmcg
PSB0cnVlOwo+ID4gPiAgICAgdnEtPm5vdGlmeSA9IG5vdGlmeTsKPiA+ID4gICAgIHZxLT53ZWFr
X2JhcnJpZXJzID0gd2Vha19iYXJyaWVyczsKPiA+ID4gQEAgLTIyMjAsNiArMjIyMSw3IEBAIHN0
YXRpYyBpbnQgX192cmluZ19pbml0X3ZpcnRxdWV1ZShzdHJ1Y3QgdmlydHF1ZXVlICpfdnEsCj4g
PiA+ICAgICB2cS0+dnEudmRldiA9IHZkZXY7Cj4gPiA+ICAgICB2cS0+dnEubnVtX2ZyZWUgPSB2
cmluZy5udW07Cj4gPiA+ICAgICB2cS0+dnEuaW5kZXggPSBpbmRleDsKPiA+ID4gKyAgIHZxLT52
cS5yZXNldCA9IGZhbHNlOwo+ID4gPiAgICAgdnEtPndlX293bl9yaW5nID0gZmFsc2U7Cj4gPiA+
ICAgICB2cS0+bm90aWZ5ID0gbm90aWZ5Owo+ID4gPiAgICAgdnEtPndlYWtfYmFycmllcnMgPSB3
ZWFrX2JhcnJpZXJzOwo+ID4gPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC92aXJ0aW8uaCBi
L2luY2x1ZGUvbGludXgvdmlydGlvLmgKPiA+ID4gaW5kZXggZGQxNjU3YzNhNDg4Li41ZDQ4MTdk
NzlmM2YgMTAwNjQ0Cj4gPiA+IC0tLSBhL2luY2x1ZGUvbGludXgvdmlydGlvLmgKPiA+ID4gKysr
IGIvaW5jbHVkZS9saW51eC92aXJ0aW8uaAo+ID4gPiBAQCAtMzIsNiArMzIsNyBAQCBzdHJ1Y3Qg
dmlydHF1ZXVlIHsKPiA+ID4gICAgIHVuc2lnbmVkIGludCBpbmRleDsKPiA+ID4gICAgIHVuc2ln
bmVkIGludCBudW1fZnJlZTsKPiA+ID4gICAgIHZvaWQgKnByaXY7Cj4gPiA+ICsgICBib29sIHJl
c2V0Owo+ID4gPiAgIH07Cj4gPiA+Cj4gPiA+ICAgaW50IHZpcnRxdWV1ZV9hZGRfb3V0YnVmKHN0
cnVjdCB2aXJ0cXVldWUgKnZxLAo+ID4KPgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KVmlydHVhbGl6YXRpb24gbWFpbGluZyBsaXN0ClZpcnR1YWxpemF0
aW9uQGxpc3RzLmxpbnV4LWZvdW5kYXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGludXhmb3VuZGF0
aW9uLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3ZpcnR1YWxpemF0aW9u
