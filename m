Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from fraxinus.osuosl.org (smtp4.osuosl.org [140.211.166.137])
	by mail.lfdr.de (Postfix) with ESMTPS id 5DE7A229C72
	for <lists.virtualization@lfdr.de>; Wed, 22 Jul 2020 18:01:46 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by fraxinus.osuosl.org (Postfix) with ESMTP id 95C6486CD7;
	Wed, 22 Jul 2020 16:01:44 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from fraxinus.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id P0-bptATJHmW; Wed, 22 Jul 2020 16:01:43 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by fraxinus.osuosl.org (Postfix) with ESMTP id E675C86B96;
	Wed, 22 Jul 2020 16:01:41 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id C7F84C004C;
	Wed, 22 Jul 2020 16:01:41 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from fraxinus.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 14560C004C
 for <virtualization@lists.linux-foundation.org>;
 Wed, 22 Jul 2020 16:01:38 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by fraxinus.osuosl.org (Postfix) with ESMTP id F3E5886B08
 for <virtualization@lists.linux-foundation.org>;
 Wed, 22 Jul 2020 16:01:37 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from fraxinus.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id cZpH22FiV3eM
 for <virtualization@lists.linux-foundation.org>;
 Wed, 22 Jul 2020 16:01:35 +0000 (UTC)
X-Greylist: from auto-whitelisted by SQLgrey-1.7.6
Received: from mx01.bbu.dsd.mx.bitdefender.com
 (mx01.bbu.dsd.mx.bitdefender.com [91.199.104.161])
 by fraxinus.osuosl.org (Postfix) with ESMTPS id 5DB9686AE3
 for <virtualization@lists.linux-foundation.org>;
 Wed, 22 Jul 2020 16:01:35 +0000 (UTC)
Received: from smtp.bitdefender.com (smtp01.buh.bitdefender.com [10.17.80.75])
 by mx01.bbu.dsd.mx.bitdefender.com (Postfix) with ESMTPS id
 1BD97305D7E9; Wed, 22 Jul 2020 19:01:32 +0300 (EEST)
Received: from localhost.localdomain (unknown [91.199.104.6])
 by smtp.bitdefender.com (Postfix) with ESMTPSA id F3E583072789;
 Wed, 22 Jul 2020 19:01:31 +0300 (EEST)
From: =?UTF-8?q?Adalbert=20Laz=C4=83r?= <alazar@bitdefender.com>
To: kvm@vger.kernel.org
Subject: [RFC PATCH v1 05/34] KVM: x86: mmu: add EPT view parameter to
 kvm_mmu_get_page()
Date: Wed, 22 Jul 2020 19:00:52 +0300
Message-Id: <20200722160121.9601-6-alazar@bitdefender.com>
In-Reply-To: <20200722160121.9601-1-alazar@bitdefender.com>
References: <20200722160121.9601-1-alazar@bitdefender.com>
MIME-Version: 1.0
Cc: =?UTF-8?q?Adalbert=20Laz=C4=83r?= <alazar@bitdefender.com>,
 Paolo Bonzini <pbonzini@redhat.com>,
 =?UTF-8?q?=C8=98tefan=20=C8=98icleru?= <ssicleru@bitdefender.com>,
 virtualization@lists.linux-foundation.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

RnJvbTogyJh0ZWZhbiDImGljbGVydSA8c3NpY2xlcnVAYml0ZGVmZW5kZXIuY29tPgoKVGhpcyB3
aWxsIGJlIHVzZWQgdG8gY3JlYXRlIHJvb3RfaHBhIGZvciBhbGwgdGhlIEVQVCB2aWV3cy4KClNp
Z25lZC1vZmYtYnk6IMiYdGVmYW4gyJhpY2xlcnUgPHNzaWNsZXJ1QGJpdGRlZmVuZGVyLmNvbT4K
U2lnbmVkLW9mZi1ieTogQWRhbGJlcnQgTGF6xINyIDxhbGF6YXJAYml0ZGVmZW5kZXIuY29tPgot
LS0KIGFyY2gveDg2L2luY2x1ZGUvYXNtL2t2bV9ob3N0LmggfCAgNyArKysrKy0KIGFyY2gveDg2
L2t2bS9tbXUvbW11LmMgICAgICAgICAgfCA0MyArKysrKysrKysrKysrKysrKysrKy0tLS0tLS0t
LS0tLS0KIGFyY2gveDg2L2t2bS9tbXUvcGFnaW5nX3RtcGwuaCAgfCAgNiArKystLQogMyBmaWxl
cyBjaGFuZ2VkLCAzNiBpbnNlcnRpb25zKCspLCAyMCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQg
YS9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9rdm1faG9zdC5oIGIvYXJjaC94ODYvaW5jbHVkZS9hc20v
a3ZtX2hvc3QuaAppbmRleCAwYWNjMjEwODdjYWYuLmJkNDU3NzhlMDkwNCAxMDA2NDQKLS0tIGEv
YXJjaC94ODYvaW5jbHVkZS9hc20va3ZtX2hvc3QuaAorKysgYi9hcmNoL3g4Ni9pbmNsdWRlL2Fz
bS9rdm1faG9zdC5oCkBAIC0yNDMsNiArMjQzLDggQEAgZW51bSB4ODZfaW50ZXJjZXB0X3N0YWdl
OwogCQkJCSBQRkVSUl9XUklURV9NQVNLIHwJCVwKIAkJCQkgUEZFUlJfUFJFU0VOVF9NQVNLKQog
CisjZGVmaW5lIEtWTV9NQVhfRVBUX1ZJRVdTCTMKKwogLyogYXBpYyBhdHRlbnRpb24gYml0cyAq
LwogI2RlZmluZSBLVk1fQVBJQ19DSEVDS19WQVBJQwkwCiAvKgpAQCAtMzQ5LDYgKzM1MSw5IEBA
IHN0cnVjdCBrdm1fbW11X3BhZ2UgewogCXVuaW9uIGt2bV9tbXVfcGFnZV9yb2xlIHJvbGU7CiAJ
Z2ZuX3QgZ2ZuOwogCisJLyogVGhlIHZpZXcgdGhpcyBzaGFkb3cgcGFnZSBiZWxvbmdzIHRvICov
CisJdTE2IHZpZXc7CisKIAl1NjQgKnNwdDsKIAkvKiBob2xkIHRoZSBnZm4gb2YgZWFjaCBzcHRl
IGluc2lkZSBzcHQgKi8KIAlnZm5fdCAqZ2ZuczsKQEAgLTkzNiw3ICs5NDEsNyBAQCBzdHJ1Y3Qg
a3ZtX2FyY2ggewogCXVuc2lnbmVkIGxvbmcgbl9tYXhfbW11X3BhZ2VzOwogCXVuc2lnbmVkIGlu
dCBpbmRpcmVjdF9zaGFkb3dfcGFnZXM7CiAJdTggbW11X3ZhbGlkX2dlbjsKLQlzdHJ1Y3QgaGxp
c3RfaGVhZCBtbXVfcGFnZV9oYXNoW0tWTV9OVU1fTU1VX1BBR0VTXTsKKwlzdHJ1Y3QgaGxpc3Rf
aGVhZCBtbXVfcGFnZV9oYXNoW0tWTV9NQVhfRVBUX1ZJRVdTXVtLVk1fTlVNX01NVV9QQUdFU107
CiAJLyoKIAkgKiBIYXNoIHRhYmxlIG9mIHN0cnVjdCBrdm1fbW11X3BhZ2UuCiAJICovCmRpZmYg
LS1naXQgYS9hcmNoL3g4Ni9rdm0vbW11L21tdS5jIGIvYXJjaC94ODYva3ZtL21tdS9tbXUuYwpp
bmRleCBmM2JhNGQwNDUyYzkuLjBiNjUyN2ExZWJlNiAxMDA2NDQKLS0tIGEvYXJjaC94ODYva3Zt
L21tdS9tbXUuYworKysgYi9hcmNoL3g4Ni9rdm0vbW11L21tdS5jCkBAIC0yMzQ5LDE0ICsyMzQ5
LDE0IEBAIHN0YXRpYyB2b2lkIGt2bV9tbXVfY29tbWl0X3phcF9wYWdlKHN0cnVjdCBrdm0gKmt2
bSwKIAkJCQkgICAgc3RydWN0IGxpc3RfaGVhZCAqaW52YWxpZF9saXN0KTsKIAogCi0jZGVmaW5l
IGZvcl9lYWNoX3ZhbGlkX3NwKF9rdm0sIF9zcCwgX2dmbikJCQkJXAorI2RlZmluZSBmb3JfZWFj
aF92YWxpZF9zcChfa3ZtLCBfc3AsIF9nZm4sIHZpZXcpCQkJXAogCWhsaXN0X2Zvcl9lYWNoX2Vu
dHJ5KF9zcCwJCQkJCVwKLQkgICYoX2t2bSktPmFyY2gubW11X3BhZ2VfaGFzaFtrdm1fcGFnZV90
YWJsZV9oYXNoZm4oX2dmbildLCBoYXNoX2xpbmspIFwKKwkgICYoX2t2bSktPmFyY2gubW11X3Bh
Z2VfaGFzaFt2aWV3XVtrdm1fcGFnZV90YWJsZV9oYXNoZm4oX2dmbildLCBoYXNoX2xpbmspIFwK
IAkJaWYgKGlzX29ic29sZXRlX3NwKChfa3ZtKSwgKF9zcCkpKSB7CQkJXAogCQl9IGVsc2UKIAog
I2RlZmluZSBmb3JfZWFjaF9nZm5faW5kaXJlY3RfdmFsaWRfc3AoX2t2bSwgX3NwLCBfZ2ZuKQkJ
CVwKLQlmb3JfZWFjaF92YWxpZF9zcChfa3ZtLCBfc3AsIF9nZm4pCQkJCVwKKwlmb3JfZWFjaF92
YWxpZF9zcChfa3ZtLCBfc3AsIF9nZm4sIDApCQkJCVwKIAkJaWYgKChfc3ApLT5nZm4gIT0gKF9n
Zm4pIHx8IChfc3ApLT5yb2xlLmRpcmVjdCkge30gZWxzZQogCiBzdGF0aWMgaW5saW5lIGJvb2wg
aXNfZXB0X3NwKHN0cnVjdCBrdm1fbW11X3BhZ2UgKnNwKQpAQCAtMjU2NCw3ICsyNTY0LDggQEAg
c3RhdGljIHN0cnVjdCBrdm1fbW11X3BhZ2UgKmt2bV9tbXVfZ2V0X3BhZ2Uoc3RydWN0IGt2bV92
Y3B1ICp2Y3B1LAogCQkJCQkgICAgIGd2YV90IGdhZGRyLAogCQkJCQkgICAgIHVuc2lnbmVkIGxl
dmVsLAogCQkJCQkgICAgIGludCBkaXJlY3QsCi0JCQkJCSAgICAgdW5zaWduZWQgaW50IGFjY2Vz
cykKKwkJCQkJICAgICB1bnNpZ25lZCBpbnQgYWNjZXNzLAorCQkJCQkgICAgIHUxNiB2aWV3KQog
ewogCXVuaW9uIGt2bV9tbXVfcGFnZV9yb2xlIHJvbGU7CiAJdW5zaWduZWQgcXVhZHJhbnQ7CkBA
IC0yNTg3LDcgKzI1ODgsNyBAQCBzdGF0aWMgc3RydWN0IGt2bV9tbXVfcGFnZSAqa3ZtX21tdV9n
ZXRfcGFnZShzdHJ1Y3Qga3ZtX3ZjcHUgKnZjcHUsCiAJCXF1YWRyYW50ICY9ICgxIDw8ICgoUFQz
Ml9QVF9CSVRTIC0gUFQ2NF9QVF9CSVRTKSAqIGxldmVsKSkgLSAxOwogCQlyb2xlLnF1YWRyYW50
ID0gcXVhZHJhbnQ7CiAJfQotCWZvcl9lYWNoX3ZhbGlkX3NwKHZjcHUtPmt2bSwgc3AsIGdmbikg
eworCWZvcl9lYWNoX3ZhbGlkX3NwKHZjcHUtPmt2bSwgc3AsIGdmbiwgdmlldykgewogCQlpZiAo
c3AtPmdmbiAhPSBnZm4pIHsKIAkJCWNvbGxpc2lvbnMrKzsKIAkJCWNvbnRpbnVlOwpAQCAtMjYy
NCw5ICsyNjI1LDEwIEBAIHN0YXRpYyBzdHJ1Y3Qga3ZtX21tdV9wYWdlICprdm1fbW11X2dldF9w
YWdlKHN0cnVjdCBrdm1fdmNwdSAqdmNwdSwKIAogCXNwLT5nZm4gPSBnZm47CiAJc3AtPnJvbGUg
PSByb2xlOworCXNwLT52aWV3ID0gdmlldzsKIAlwZ19oYXNoID0ga3ZtX3BhZ2VfdGFibGVfaGFz
aGZuKGdmbik7CiAJaGxpc3RfYWRkX2hlYWQoJnNwLT5oYXNoX2xpbmssCi0JCSZ2Y3B1LT5rdm0t
PmFyY2gubW11X3BhZ2VfaGFzaFtwZ19oYXNoXSk7CisJCSZ2Y3B1LT5rdm0tPmFyY2gubW11X3Bh
Z2VfaGFzaFt2aWV3XVtwZ19oYXNoXSk7CiAJaWYgKCFkaXJlY3QpIHsKIAkJLyoKIAkJICogd2Ug
c2hvdWxkIGRvIHdyaXRlIHByb3RlY3Rpb24gYmVmb3JlIHN5bmNpbmcgcGFnZXMKQEAgLTM0NjMs
NyArMzQ2NSw4IEBAIHN0YXRpYyBpbnQgX19kaXJlY3RfbWFwKHN0cnVjdCBrdm1fdmNwdSAqdmNw
dSwgZ3BhX3QgZ3BhLCBpbnQgd3JpdGUsCiAJCWRyb3BfbGFyZ2Vfc3B0ZSh2Y3B1LCBpdC5zcHRl
cCk7CiAJCWlmICghaXNfc2hhZG93X3ByZXNlbnRfcHRlKCppdC5zcHRlcCkpIHsKIAkJCXNwID0g
a3ZtX21tdV9nZXRfcGFnZSh2Y3B1LCBiYXNlX2dmbiwgaXQuYWRkciwKLQkJCQkJICAgICAgaXQu
bGV2ZWwgLSAxLCB0cnVlLCBBQ0NfQUxMKTsKKwkJCQkJICAgICAgaXQubGV2ZWwgLSAxLCB0cnVl
LCBBQ0NfQUxMLAorCQkJCQkgICAgICBrdm1fZ2V0X2VwdF92aWV3KHZjcHUpKTsKIAogCQkJbGlu
a19zaGFkb3dfcGFnZSh2Y3B1LCBpdC5zcHRlcCwgc3ApOwogCQkJaWYgKGFjY291bnRfZGlzYWxs
b3dlZF9ueF9scGFnZSkKQEAgLTM3ODgsNyArMzc5MSw3IEBAIHN0YXRpYyBpbnQgbW11X2NoZWNr
X3Jvb3Qoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBnZm5fdCByb290X2dmbikKIH0KIAogc3RhdGlj
IGhwYV90IG1tdV9hbGxvY19yb290KHN0cnVjdCBrdm1fdmNwdSAqdmNwdSwgZ2ZuX3QgZ2ZuLCBn
dmFfdCBndmEsCi0JCQkgICAgdTggbGV2ZWwsIGJvb2wgZGlyZWN0KQorCQkJICAgIHU4IGxldmVs
LCBib29sIGRpcmVjdCwgdTE2IHZpZXcpCiB7CiAJc3RydWN0IGt2bV9tbXVfcGFnZSAqc3A7CiAK
QEAgLTM3OTgsNyArMzgwMSw3IEBAIHN0YXRpYyBocGFfdCBtbXVfYWxsb2Nfcm9vdChzdHJ1Y3Qg
a3ZtX3ZjcHUgKnZjcHUsIGdmbl90IGdmbiwgZ3ZhX3QgZ3ZhLAogCQlzcGluX3VubG9jaygmdmNw
dS0+a3ZtLT5tbXVfbG9jayk7CiAJCXJldHVybiBJTlZBTElEX1BBR0U7CiAJfQotCXNwID0ga3Zt
X21tdV9nZXRfcGFnZSh2Y3B1LCBnZm4sIGd2YSwgbGV2ZWwsIGRpcmVjdCwgQUNDX0FMTCk7CisJ
c3AgPSBrdm1fbW11X2dldF9wYWdlKHZjcHUsIGdmbiwgZ3ZhLCBsZXZlbCwgZGlyZWN0LCBBQ0Nf
QUxMLCB2aWV3KTsKIAkrK3NwLT5yb290X2NvdW50OwogCiAJc3Bpbl91bmxvY2soJnZjcHUtPmt2
bS0+bW11X2xvY2spOwpAQCAtMzgwOSwxOSArMzgxMiwyNCBAQCBzdGF0aWMgaW50IG1tdV9hbGxv
Y19kaXJlY3Rfcm9vdHMoc3RydWN0IGt2bV92Y3B1ICp2Y3B1KQogewogCXU4IHNoYWRvd19yb290
X2xldmVsID0gdmNwdS0+YXJjaC5tbXUtPnNoYWRvd19yb290X2xldmVsOwogCWhwYV90IHJvb3Q7
Ci0JdW5zaWduZWQgaTsKKworCXUxNiBpOwogCiAJaWYgKHNoYWRvd19yb290X2xldmVsID49IFBU
NjRfUk9PVF80TEVWRUwpIHsKLQkJcm9vdCA9IG1tdV9hbGxvY19yb290KHZjcHUsIDAsIDAsIHNo
YWRvd19yb290X2xldmVsLCB0cnVlKTsKLQkJaWYgKCFWQUxJRF9QQUdFKHJvb3QpKQotCQkJcmV0
dXJuIC1FTk9TUEM7Ci0JCXZjcHUtPmFyY2gubW11LT5yb290X2hwYSA9IHJvb3Q7CisJCWZvciAo
aSA9IDA7IGkgPCBLVk1fTUFYX0VQVF9WSUVXUzsgaSsrKSB7CisJCQlyb290ID0gbW11X2FsbG9j
X3Jvb3QodmNwdSwgMCwgUEFHRV9TSVpFICogaSwKKwkJCQkJICAgICAgc2hhZG93X3Jvb3RfbGV2
ZWwsIHRydWUsIGkpOworCQkJaWYgKCFWQUxJRF9QQUdFKHJvb3QpKQorCQkJCXJldHVybiAtRU5P
U1BDOworCQkJaWYgKGkgPT0gMCkKKwkJCQl2Y3B1LT5hcmNoLm1tdS0+cm9vdF9ocGEgPSByb290
OworCQl9CiAJfSBlbHNlIGlmIChzaGFkb3dfcm9vdF9sZXZlbCA9PSBQVDMyRV9ST09UX0xFVkVM
KSB7CiAJCWZvciAoaSA9IDA7IGkgPCA0OyArK2kpIHsKIAkJCU1NVV9XQVJOX09OKFZBTElEX1BB
R0UodmNwdS0+YXJjaC5tbXUtPnBhZV9yb290W2ldKSk7CiAKIAkJCXJvb3QgPSBtbXVfYWxsb2Nf
cm9vdCh2Y3B1LCBpIDw8ICgzMCAtIFBBR0VfU0hJRlQpLAotCQkJCQkgICAgICBpIDw8IDMwLCBQ
VDMyX1JPT1RfTEVWRUwsIHRydWUpOworCQkJCQkgICAgICBpIDw8IDMwLCBQVDMyX1JPT1RfTEVW
RUwsIHRydWUsIDApOwogCQkJaWYgKCFWQUxJRF9QQUdFKHJvb3QpKQogCQkJCXJldHVybiAtRU5P
U1BDOwogCQkJdmNwdS0+YXJjaC5tbXUtPnBhZV9yb290W2ldID0gcm9vdCB8IFBUX1BSRVNFTlRf
TUFTSzsKQEAgLTM4NTcsNyArMzg2NSw4IEBAIHN0YXRpYyBpbnQgbW11X2FsbG9jX3NoYWRvd19y
b290cyhzdHJ1Y3Qga3ZtX3ZjcHUgKnZjcHUpCiAJCU1NVV9XQVJOX09OKFZBTElEX1BBR0UodmNw
dS0+YXJjaC5tbXUtPnJvb3RfaHBhKSk7CiAKIAkJcm9vdCA9IG1tdV9hbGxvY19yb290KHZjcHUs
IHJvb3RfZ2ZuLCAwLAotCQkJCSAgICAgIHZjcHUtPmFyY2gubW11LT5zaGFkb3dfcm9vdF9sZXZl
bCwgZmFsc2UpOworCQkJCSAgICAgIHZjcHUtPmFyY2gubW11LT5zaGFkb3dfcm9vdF9sZXZlbCwg
ZmFsc2UsCisJCQkJICAgICAgMCk7CiAJCWlmICghVkFMSURfUEFHRShyb290KSkKIAkJCXJldHVy
biAtRU5PU1BDOwogCQl2Y3B1LT5hcmNoLm1tdS0+cm9vdF9ocGEgPSByb290OwpAQCAtMzg4Nyw3
ICszODk2LDcgQEAgc3RhdGljIGludCBtbXVfYWxsb2Nfc2hhZG93X3Jvb3RzKHN0cnVjdCBrdm1f
dmNwdSAqdmNwdSkKIAkJfQogCiAJCXJvb3QgPSBtbXVfYWxsb2Nfcm9vdCh2Y3B1LCByb290X2dm
biwgaSA8PCAzMCwKLQkJCQkgICAgICBQVDMyX1JPT1RfTEVWRUwsIGZhbHNlKTsKKwkJCQkgICAg
ICBQVDMyX1JPT1RfTEVWRUwsIGZhbHNlLCAwKTsKIAkJaWYgKCFWQUxJRF9QQUdFKHJvb3QpKQog
CQkJcmV0dXJuIC1FTk9TUEM7CiAJCXZjcHUtPmFyY2gubW11LT5wYWVfcm9vdFtpXSA9IHJvb3Qg
fCBwbV9tYXNrOwpkaWZmIC0tZ2l0IGEvYXJjaC94ODYva3ZtL21tdS9wYWdpbmdfdG1wbC5oIGIv
YXJjaC94ODYva3ZtL21tdS9wYWdpbmdfdG1wbC5oCmluZGV4IGJkNzBlY2UxZWY4Yi4uMjQ0ZTMz
OWRlZTUyIDEwMDY0NAotLS0gYS9hcmNoL3g4Ni9rdm0vbW11L3BhZ2luZ190bXBsLmgKKysrIGIv
YXJjaC94ODYva3ZtL21tdS9wYWdpbmdfdG1wbC5oCkBAIC02NjUsNyArNjY1LDggQEAgc3RhdGlj
IGludCBGTkFNRShmZXRjaCkoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFfdCBhZGRyLAogCQlp
ZiAoIWlzX3NoYWRvd19wcmVzZW50X3B0ZSgqaXQuc3B0ZXApKSB7CiAJCQl0YWJsZV9nZm4gPSBn
dy0+dGFibGVfZ2ZuW2l0LmxldmVsIC0gMl07CiAJCQlzcCA9IGt2bV9tbXVfZ2V0X3BhZ2UodmNw
dSwgdGFibGVfZ2ZuLCBhZGRyLCBpdC5sZXZlbC0xLAotCQkJCQkgICAgICBmYWxzZSwgYWNjZXNz
KTsKKwkJCQkJICAgICAgZmFsc2UsIGFjY2VzcywKKwkJCQkJICAgICAga3ZtX2dldF9lcHRfdmll
dyh2Y3B1KSk7CiAJCX0KIAogCQkvKgpAQCAtNzAyLDcgKzcwMyw4IEBAIHN0YXRpYyBpbnQgRk5B
TUUoZmV0Y2gpKHN0cnVjdCBrdm1fdmNwdSAqdmNwdSwgZ3BhX3QgYWRkciwKIAogCQlpZiAoIWlz
X3NoYWRvd19wcmVzZW50X3B0ZSgqaXQuc3B0ZXApKSB7CiAJCQlzcCA9IGt2bV9tbXVfZ2V0X3Bh
Z2UodmNwdSwgYmFzZV9nZm4sIGFkZHIsCi0JCQkJCSAgICAgIGl0LmxldmVsIC0gMSwgdHJ1ZSwg
ZGlyZWN0X2FjY2Vzcyk7CisJCQkJCSAgICAgIGl0LmxldmVsIC0gMSwgdHJ1ZSwgZGlyZWN0X2Fj
Y2VzcywKKwkJCQkJICAgICAga3ZtX2dldF9lcHRfdmlldyh2Y3B1KSk7CiAJCQlsaW5rX3NoYWRv
d19wYWdlKHZjcHUsIGl0LnNwdGVwLCBzcCk7CiAJCQlpZiAobHBhZ2VfZGlzYWxsb3dlZCkKIAkJ
CQlhY2NvdW50X2h1Z2VfbnhfcGFnZSh2Y3B1LT5rdm0sIHNwKTsKX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KVmlydHVhbGl6YXRpb24gbWFpbGluZyBsaXN0
ClZpcnR1YWxpemF0aW9uQGxpc3RzLmxpbnV4LWZvdW5kYXRpb24ub3JnCmh0dHBzOi8vbGlzdHMu
bGludXhmb3VuZGF0aW9uLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3ZpcnR1YWxpemF0aW9u
