Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [IPv6:2605:bc80:3010::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 871A86BA8AE
	for <lists.virtualization@lfdr.de>; Wed, 15 Mar 2023 08:05:45 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id 0C93740518;
	Wed, 15 Mar 2023 07:05:44 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 0C93740518
Authentication-Results: smtp2.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=Ry5l5oeo
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ZXNe3kbQ8d1A; Wed, 15 Mar 2023 07:05:42 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp2.osuosl.org (Postfix) with ESMTPS id 6413A40503;
	Wed, 15 Mar 2023 07:05:42 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 6413A40503
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 98576C007F;
	Wed, 15 Mar 2023 07:05:41 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp2.osuosl.org (smtp2.osuosl.org [IPv6:2605:bc80:3010::133])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 4CC98C0032
 for <virtualization@lists.linux-foundation.org>;
 Wed, 15 Mar 2023 07:05:40 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp2.osuosl.org (Postfix) with ESMTP id 1C10340503
 for <virtualization@lists.linux-foundation.org>;
 Wed, 15 Mar 2023 07:05:40 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 1C10340503
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
 by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id GJm_HP3svbN5
 for <virtualization@lists.linux-foundation.org>;
 Wed, 15 Mar 2023 07:05:39 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org BDAD9404F9
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp2.osuosl.org (Postfix) with ESMTPS id BDAD9404F9
 for <virtualization@lists.linux-foundation.org>;
 Wed, 15 Mar 2023 07:05:38 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1678863937;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=wtU3rInEYuF8KYF1vvIl8re+OkAcXBh1WE8QkRT/Oec=;
 b=Ry5l5oeokAxLu0EcNkWGMa9QxGJmXTqDcxrbRqeq/oj8jbg4A96cP7VrC56vqBoQD6FtEL
 k+FffltUCynR3ZqvidqwibKU4suj3UfSQFePBTy8/aArQiz6WWsOBsgbhS0Wip3JrgEP5J
 kdH3tbNRfk2ZBy1ctDz/4owRcYVunfg=
Received: from mail-oo1-f72.google.com (mail-oo1-f72.google.com
 [209.85.161.72]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-466-urldpMV0MxqLb-OIot7wrw-1; Wed, 15 Mar 2023 03:05:36 -0400
X-MC-Unique: urldpMV0MxqLb-OIot7wrw-1
Received: by mail-oo1-f72.google.com with SMTP id
 t2-20020a4ad0a2000000b00517879b32dfso4894782oor.22
 for <virtualization@lists.linux-foundation.org>;
 Wed, 15 Mar 2023 00:05:36 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112; t=1678863935;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=wtU3rInEYuF8KYF1vvIl8re+OkAcXBh1WE8QkRT/Oec=;
 b=MNtsBoyCM1TqJtGuXFeHYMXPeViYhYN6e6lW6/M4DMm/ufmwnqalAdOyOwVyWcinGW
 KsTfGXaaYHogZtvHxy3o8Oaudt6/Hr8ymzRZSm18DHiVH9+ffrrJngOXzDIPZuPfIYPv
 zF1HlOoe7ErY21bPSUoE0S75X2eYYxQ1o40uFrZgncckMV/qopkrjD9kScAtdHYtfkdG
 LNO5tj1pDeZehTruZ4oIxiSI/aygK80wMDllEB1ss0NiM7xvkw1hBfkFbre1V8JfGJQZ
 7ZMN16ETEZuyJbqdkIG+eRpTFb+YG54ub1YrfnDKIZzrxAW3FFNAcBB1i5LO8SPunor5
 Qyuw==
X-Gm-Message-State: AO0yUKXSKzbEMs/w0fBfB9xhYgy4d3Q7UHiNbJMXmSoKxp26kcWcJYmj
 N3hOab39QE0hlTyo58l/LgFKxT23UZKs0X4p9ZDJKZElGRR0FNQmg5cHE4byBw+786HXz38uip0
 1xkgKcZ4RS3BeybqqV2ModDU1fyxdgAmvuZ3VfITKUDhMAS4STjYwBQzmgQ==
X-Received: by 2002:a05:6870:1341:b0:177:ca1c:2ca8 with SMTP id
 1-20020a056870134100b00177ca1c2ca8mr2983762oac.9.1678863935131; 
 Wed, 15 Mar 2023 00:05:35 -0700 (PDT)
X-Google-Smtp-Source: AK7set8vDBJWX3Qf1j79WE91MJ7iJxU7vYD03PsIBEaB0LoKjJtRcBQcYPj82Fo5tN3mZXZCuDdjmkUdUZ50mMVxcNE=
X-Received: by 2002:a05:6870:1341:b0:177:ca1c:2ca8 with SMTP id
 1-20020a056870134100b00177ca1c2ca8mr2983751oac.9.1678863934685; Wed, 15 Mar
 2023 00:05:34 -0700 (PDT)
MIME-Version: 1.0
References: <20230309013046.23523-1-shannon.nelson@amd.com>
 <20230309013046.23523-4-shannon.nelson@amd.com>
In-Reply-To: <20230309013046.23523-4-shannon.nelson@amd.com>
From: Jason Wang <jasowang@redhat.com>
Date: Wed, 15 Mar 2023 15:05:23 +0800
Message-ID: <CACGkMEt5Jbsp=+st8aG_0kXD+OSSp+FX9vYE+gTkywp2ZN4LTw@mail.gmail.com>
Subject: Re: [PATCH RFC v2 virtio 3/7] pds_vdpa: virtio bar setup for vdpa
To: Shannon Nelson <shannon.nelson@amd.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: brett.creeley@amd.com, mst@redhat.com, netdev@vger.kernel.org,
 virtualization@lists.linux-foundation.org, kuba@kernel.org,
 drivers@pensando.io, davem@davemloft.net
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gVGh1LCBNYXIgOSwgMjAyMyBhdCA5OjMx4oCvQU0gU2hhbm5vbiBOZWxzb24gPHNoYW5ub24u
bmVsc29uQGFtZC5jb20+IHdyb3RlOgo+Cj4gVGhlIFBEUyB2RFBBIGRldmljZSBoYXMgYSB2aXJ0
aW8gQkFSIGZvciBkZXNjcmliaW5nIGl0c2VsZiwgYW5kCj4gdGhlIHBkc192ZHBhIGRyaXZlciBu
ZWVkcyB0byBhY2Nlc3MgaXQuICBIZXJlIHdlIGNvcHkgbGliZXJhbGx5Cj4gZnJvbSB0aGUgZXhp
c3RpbmcgZHJpdmVycy92aXJ0aW8vdmlydGlvX3BjaV9tb2Rlcm5fZGV2LmMgYXMgaXQKPiBoYXMg
d2hhdCB3ZSBuZWVkLCBidXQgd2UgbmVlZCB0byBtb2RpZnkgaXQgc28gdGhhdCBpdCBjYW4gd29y
awo+IHdpdGggb3VyIGRldmljZSBpZCBhbmQgc28gd2UgY2FuIHVzZSBvdXIgb3duIERNQSBtYXNr
LgoKQnkgcGFzc2luZyBhIHBvaW50ZXIgdG8gYSBjdXN0b21pemVkIGlkIHByb2Jpbmcgcm91dGlu
ZSB0byB2cF9tb2Rlcm5fcHJvYmUoKT8KClRoYW5rcwoKCj4KPiBXZSBzdXNwZWN0IHRoZXJlIGlz
IHJvb20gZm9yIGRpc2N1c3Npb24gaGVyZSBhYm91dCBtYWtpbmcgdGhlCj4gZXhpc3RpbmcgY29k
ZSBhIGxpdHRsZSBtb3JlIGZsZXhpYmxlLCBidXQgd2UgdGhvdWdodCB3ZSdkIGF0Cj4gbGVhc3Qg
c3RhcnQgdGhlIGRpc2N1c3Npb24gaGVyZS4KPgo+IFNpZ25lZC1vZmYtYnk6IFNoYW5ub24gTmVs
c29uIDxzaGFubm9uLm5lbHNvbkBhbWQuY29tPgo+IC0tLQo+ICBkcml2ZXJzL3ZkcGEvcGRzL01h
a2VmaWxlICAgICB8ICAgMSArCj4gIGRyaXZlcnMvdmRwYS9wZHMvYXV4X2Rydi5jICAgIHwgIDE0
ICsrCj4gIGRyaXZlcnMvdmRwYS9wZHMvYXV4X2Rydi5oICAgIHwgICAxICsKPiAgZHJpdmVycy92
ZHBhL3Bkcy9kZWJ1Z2ZzLmMgICAgfCAgIDEgKwo+ICBkcml2ZXJzL3ZkcGEvcGRzL3ZkcGFfZGV2
LmMgICB8ICAgMSArCj4gIGRyaXZlcnMvdmRwYS9wZHMvdmlydGlvX3BjaS5jIHwgMjgxICsrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysKPiAgZHJpdmVycy92ZHBhL3Bkcy92aXJ0aW9f
cGNpLmggfCAgIDggKwo+ICA3IGZpbGVzIGNoYW5nZWQsIDMwNyBpbnNlcnRpb25zKCspCj4gIGNy
ZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL3ZkcGEvcGRzL3ZpcnRpb19wY2kuYwo+ICBjcmVhdGUg
bW9kZSAxMDA2NDQgZHJpdmVycy92ZHBhL3Bkcy92aXJ0aW9fcGNpLmgKPgo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL3ZkcGEvcGRzL01ha2VmaWxlIGIvZHJpdmVycy92ZHBhL3Bkcy9NYWtlZmlsZQo+
IGluZGV4IDEzYjUwMzk0ZWM2NC4uY2EyZWZhOGM2ZWI1IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMv
dmRwYS9wZHMvTWFrZWZpbGUKPiArKysgYi9kcml2ZXJzL3ZkcGEvcGRzL01ha2VmaWxlCj4gQEAg
LTQsNiArNCw3IEBACj4gIG9iai0kKENPTkZJR19QRFNfVkRQQSkgOj0gcGRzX3ZkcGEubwo+Cj4g
IHBkc192ZHBhLXkgOj0gYXV4X2Rydi5vIFwKPiArICAgICAgICAgICAgIHZpcnRpb19wY2kubyBc
Cj4gICAgICAgICAgICAgICB2ZHBhX2Rldi5vCj4KPiAgcGRzX3ZkcGEtJChDT05GSUdfREVCVUdf
RlMpICs9IGRlYnVnZnMubwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEvcGRzL2F1eF9kcnYu
YyBiL2RyaXZlcnMvdmRwYS9wZHMvYXV4X2Rydi5jCj4gaW5kZXggNjNlNDBhZTY4MjExLi4yODE1
OGQwZDk4YTUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92ZHBhL3Bkcy9hdXhfZHJ2LmMKPiArKysg
Yi9kcml2ZXJzL3ZkcGEvcGRzL2F1eF9kcnYuYwo+IEBAIC00LDYgKzQsNyBAQAo+ICAjaW5jbHVk
ZSA8bGludXgvYXV4aWxpYXJ5X2J1cy5oPgo+ICAjaW5jbHVkZSA8bGludXgvcGNpLmg+Cj4gICNp
bmNsdWRlIDxsaW51eC92ZHBhLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC92aXJ0aW9fcGNpX21vZGVy
bi5oPgo+Cj4gICNpbmNsdWRlIDxsaW51eC9wZHMvcGRzX2NvcmUuaD4KPiAgI2luY2x1ZGUgPGxp
bnV4L3Bkcy9wZHNfYXV4YnVzLmg+Cj4gQEAgLTEyLDYgKzEzLDcgQEAKPiAgI2luY2x1ZGUgImF1
eF9kcnYuaCIKPiAgI2luY2x1ZGUgImRlYnVnZnMuaCIKPiAgI2luY2x1ZGUgInZkcGFfZGV2Lmgi
Cj4gKyNpbmNsdWRlICJ2aXJ0aW9fcGNpLmgiCj4KPiAgc3RhdGljIGNvbnN0IHN0cnVjdCBhdXhp
bGlhcnlfZGV2aWNlX2lkIHBkc192ZHBhX2lkX3RhYmxlW10gPSB7Cj4gICAgICAgICB7IC5uYW1l
ID0gUERTX1ZEUEFfREVWX05BTUUsIH0sCj4gQEAgLTQ5LDggKzUxLDE5IEBAIHN0YXRpYyBpbnQg
cGRzX3ZkcGFfcHJvYmUoc3RydWN0IGF1eGlsaWFyeV9kZXZpY2UgKmF1eF9kZXYsCj4gICAgICAg
ICBpZiAoZXJyKQo+ICAgICAgICAgICAgICAgICBnb3RvIGVycl9hdXhfdW5yZWc7Cj4KPiArICAg
ICAgIC8qIEZpbmQgdGhlIHZpcnRpbyBjb25maWd1cmF0aW9uICovCj4gKyAgICAgICB2ZHBhX2F1
eC0+dmRfbWRldi5wY2lfZGV2ID0gcGFkZXYtPnZmLT5wZGV2Owo+ICsgICAgICAgZXJyID0gcGRz
X3ZkcGFfcHJvYmVfdmlydGlvKCZ2ZHBhX2F1eC0+dmRfbWRldik7Cj4gKyAgICAgICBpZiAoZXJy
KSB7Cj4gKyAgICAgICAgICAgICAgIGRldl9lcnIoZGV2LCAiVW5hYmxlIHRvIHByb2JlIGZvciB2
aXJ0aW8gY29uZmlndXJhdGlvbjogJXBlXG4iLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIEVS
Ul9QVFIoZXJyKSk7Cj4gKyAgICAgICAgICAgICAgIGdvdG8gZXJyX2ZyZWVfbWdtdF9pbmZvOwo+
ICsgICAgICAgfQo+ICsKPiAgICAgICAgIHJldHVybiAwOwo+Cj4gK2Vycl9mcmVlX21nbXRfaW5m
bzoKPiArICAgICAgIHBjaV9mcmVlX2lycV92ZWN0b3JzKHBhZGV2LT52Zi0+cGRldik7Cj4gIGVy
cl9hdXhfdW5yZWc6Cj4gICAgICAgICBwYWRldi0+b3BzLT51bnJlZ2lzdGVyX2NsaWVudChwYWRl
dik7Cj4gIGVycl9mcmVlX21lbToKPiBAQCAtNjUsNiArNzgsNyBAQCBzdGF0aWMgdm9pZCBwZHNf
dmRwYV9yZW1vdmUoc3RydWN0IGF1eGlsaWFyeV9kZXZpY2UgKmF1eF9kZXYpCj4gICAgICAgICBz
dHJ1Y3QgcGRzX3ZkcGFfYXV4ICp2ZHBhX2F1eCA9IGF1eGlsaWFyeV9nZXRfZHJ2ZGF0YShhdXhf
ZGV2KTsKPiAgICAgICAgIHN0cnVjdCBkZXZpY2UgKmRldiA9ICZhdXhfZGV2LT5kZXY7Cj4KPiAr
ICAgICAgIHBkc192ZHBhX3JlbW92ZV92aXJ0aW8oJnZkcGFfYXV4LT52ZF9tZGV2KTsKPiAgICAg
ICAgIHBjaV9mcmVlX2lycV92ZWN0b3JzKHZkcGFfYXV4LT5wYWRldi0+dmYtPnBkZXYpOwo+Cj4g
ICAgICAgICB2ZHBhX2F1eC0+cGFkZXYtPm9wcy0+dW5yZWdpc3Rlcl9jbGllbnQodmRwYV9hdXgt
PnBhZGV2KTsKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92ZHBhL3Bkcy9hdXhfZHJ2LmggYi9kcml2
ZXJzL3ZkcGEvcGRzL2F1eF9kcnYuaAo+IGluZGV4IDk0YmE3YWJjYWE0My4uODdhYzNjMDFjNDc2
IDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvdmRwYS9wZHMvYXV4X2Rydi5oCj4gKysrIGIvZHJpdmVy
cy92ZHBhL3Bkcy9hdXhfZHJ2LmgKPiBAQCAtMTYsNiArMTYsNyBAQCBzdHJ1Y3QgcGRzX3ZkcGFf
YXV4IHsKPgo+ICAgICAgICAgaW50IHZmX2lkOwo+ICAgICAgICAgc3RydWN0IGRlbnRyeSAqZGVu
dHJ5Owo+ICsgICAgICAgc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSB2ZF9tZGV2Owo+
Cj4gICAgICAgICBpbnQgbmludHJzOwo+ICB9Owo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEv
cGRzL2RlYnVnZnMuYyBiL2RyaXZlcnMvdmRwYS9wZHMvZGVidWdmcy5jCj4gaW5kZXggN2I3ZTkw
ZmQ2NTc4Li5hYTVlOTY3N2ZlNzQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92ZHBhL3Bkcy9kZWJ1
Z2ZzLmMKPiArKysgYi9kcml2ZXJzL3ZkcGEvcGRzL2RlYnVnZnMuYwo+IEBAIC0xLDYgKzEsNyBA
QAo+ICAvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vbmx5Cj4gIC8qIENvcHly
aWdodChjKSAyMDIzIEFkdmFuY2VkIE1pY3JvIERldmljZXMsIEluYyAqLwo+Cj4gKyNpbmNsdWRl
IDxsaW51eC92aXJ0aW9fcGNpX21vZGVybi5oPgo+ICAjaW5jbHVkZSA8bGludXgvdmRwYS5oPgo+
Cj4gICNpbmNsdWRlIDxsaW51eC9wZHMvcGRzX2NvcmUuaD4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVy
cy92ZHBhL3Bkcy92ZHBhX2Rldi5jIGIvZHJpdmVycy92ZHBhL3Bkcy92ZHBhX2Rldi5jCj4gaW5k
ZXggYmQ4NDA2ODg1MDNjLi4xNWQ2MjMyOTcyMDMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92ZHBh
L3Bkcy92ZHBhX2Rldi5jCj4gKysrIGIvZHJpdmVycy92ZHBhL3Bkcy92ZHBhX2Rldi5jCj4gQEAg
LTQsNiArNCw3IEBACj4gICNpbmNsdWRlIDxsaW51eC9wY2kuaD4KPiAgI2luY2x1ZGUgPGxpbnV4
L3ZkcGEuaD4KPiAgI2luY2x1ZGUgPHVhcGkvbGludXgvdmRwYS5oPgo+ICsjaW5jbHVkZSA8bGlu
dXgvdmlydGlvX3BjaV9tb2Rlcm4uaD4KPgo+ICAjaW5jbHVkZSA8bGludXgvcGRzL3Bkc19jb3Jl
Lmg+Cj4gICNpbmNsdWRlIDxsaW51eC9wZHMvcGRzX2FkbWlucS5oPgo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL3ZkcGEvcGRzL3ZpcnRpb19wY2kuYyBiL2RyaXZlcnMvdmRwYS9wZHMvdmlydGlvX3Bj
aS5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLmNiODc5NjE5
ZGFjMwo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL3ZkcGEvcGRzL3ZpcnRpb19wY2ku
Ywo+IEBAIC0wLDAgKzEsMjgxIEBACj4gKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwt
Mi4wLW9yLWxhdGVyCj4gKwo+ICsvKgo+ICsgKiBhZGFwdGVkIGZyb20gZHJpdmVycy92aXJ0aW8v
dmlydGlvX3BjaV9tb2Rlcm5fZGV2LmMsIHY2LjAtcmMxCj4gKyAqLwo+ICsKPiArI2luY2x1ZGUg
PGxpbnV4L3ZpcnRpb19wY2lfbW9kZXJuLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9wY2kuaD4KPiAr
Cj4gKyNpbmNsdWRlICJ2aXJ0aW9fcGNpLmgiCj4gKwo+ICsvKgo+ICsgKiBwZHNfdmRwYV9tYXBf
Y2FwYWJpbGl0eSAtIG1hcCBhIHBhcnQgb2YgdmlydGlvIHBjaSBjYXBhYmlsaXR5Cj4gKyAqIEBt
ZGV2OiB0aGUgbW9kZXJuIHZpcnRpby1wY2kgZGV2aWNlCj4gKyAqIEBvZmY6IG9mZnNldCBvZiB0
aGUgY2FwYWJpbGl0eQo+ICsgKiBAbWlubGVuOiBtaW5pbWFsIGxlbmd0aCBvZiB0aGUgY2FwYWJp
bGl0eQo+ICsgKiBAYWxpZ246IGFsaWduIHJlcXVpcmVtZW50Cj4gKyAqIEBzdGFydDogc3RhcnQg
ZnJvbSB0aGUgY2FwYWJpbGl0eQo+ICsgKiBAc2l6ZTogbWFwIHNpemUKPiArICogQGxlbjogdGhl
IGxlbmd0aCB0aGF0IGlzIGFjdHVhbGx5IG1hcHBlZAo+ICsgKiBAcGE6IHBoeXNpY2FsIGFkZHJl
c3Mgb2YgdGhlIGNhcGFiaWxpdHkKPiArICoKPiArICogUmV0dXJucyB0aGUgaW8gYWRkcmVzcyBv
ZiBmb3IgdGhlIHBhcnQgb2YgdGhlIGNhcGFiaWxpdHkKPiArICovCj4gK3N0YXRpYyB2b2lkIF9f
aW9tZW0gKgo+ICtwZHNfdmRwYV9tYXBfY2FwYWJpbGl0eShzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rl
cm5fZGV2aWNlICptZGV2LCBpbnQgb2ZmLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIHNpemVf
dCBtaW5sZW4sIHUzMiBhbGlnbiwgdTMyIHN0YXJ0LCB1MzIgc2l6ZSwKPiArICAgICAgICAgICAg
ICAgICAgICAgICBzaXplX3QgKmxlbiwgcmVzb3VyY2Vfc2l6ZV90ICpwYSkKPiArewo+ICsgICAg
ICAgc3RydWN0IHBjaV9kZXYgKmRldiA9IG1kZXYtPnBjaV9kZXY7Cj4gKyAgICAgICB1OCBiYXI7
Cj4gKyAgICAgICB1MzIgb2Zmc2V0LCBsZW5ndGg7Cj4gKyAgICAgICB2b2lkIF9faW9tZW0gKnA7
Cj4gKwo+ICsgICAgICAgcGNpX3JlYWRfY29uZmlnX2J5dGUoZGV2LCBvZmYgKyBvZmZzZXRvZihz
dHJ1Y3QgdmlydGlvX3BjaV9jYXAsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGJhciksCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAmYmFy
KTsKPiArICAgICAgIHBjaV9yZWFkX2NvbmZpZ19kd29yZChkZXYsIG9mZiArIG9mZnNldG9mKHN0
cnVjdCB2aXJ0aW9fcGNpX2NhcCwgb2Zmc2V0KSwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAmb2Zmc2V0KTsKPiArICAgICAgIHBjaV9yZWFkX2NvbmZpZ19kd29yZChkZXYsIG9mZiAr
IG9mZnNldG9mKHN0cnVjdCB2aXJ0aW9fcGNpX2NhcCwgbGVuZ3RoKSwKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAmbGVuZ3RoKTsKPiArCj4gKyAgICAgICAvKiBDaGVjayBpZiB0aGUg
QkFSIG1heSBoYXZlIGNoYW5nZWQgc2luY2Ugd2UgcmVxdWVzdGVkIHRoZSByZWdpb24uICovCj4g
KyAgICAgICBpZiAoYmFyID49IFBDSV9TVERfTlVNX0JBUlMgfHwgIShtZGV2LT5tb2Rlcm5fYmFy
cyAmICgxIDw8IGJhcikpKSB7Cj4gKyAgICAgICAgICAgICAgIGRldl9lcnIoJmRldi0+ZGV2LAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICJ2aXJ0aW9fcGNpOiBiYXIgdW5leHBlY3RlZGx5IGNo
YW5nZWQgdG8gJXVcbiIsIGJhcik7Cj4gKyAgICAgICAgICAgICAgIHJldHVybiBOVUxMOwo+ICsg
ICAgICAgfQo+ICsKPiArICAgICAgIGlmIChsZW5ndGggPD0gc3RhcnQpIHsKPiArICAgICAgICAg
ICAgICAgZGV2X2VycigmZGV2LT5kZXYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgInZpcnRp
b19wY2k6IGJhZCBjYXBhYmlsaXR5IGxlbiAldSAoPiV1IGV4cGVjdGVkKVxuIiwKPiArICAgICAg
ICAgICAgICAgICAgICAgICBsZW5ndGgsIHN0YXJ0KTsKPiArICAgICAgICAgICAgICAgcmV0dXJu
IE5VTEw7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgaWYgKGxlbmd0aCAtIHN0YXJ0IDwgbWlu
bGVuKSB7Cj4gKyAgICAgICAgICAgICAgIGRldl9lcnIoJmRldi0+ZGV2LAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICJ2aXJ0aW9fcGNpOiBiYWQgY2FwYWJpbGl0eSBsZW4gJXUgKD49JXp1IGV4
cGVjdGVkKVxuIiwKPiArICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGgsIG1pbmxlbik7Cj4g
KyAgICAgICAgICAgICAgIHJldHVybiBOVUxMOwo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIGxl
bmd0aCAtPSBzdGFydDsKPiArCj4gKyAgICAgICBpZiAoc3RhcnQgKyBvZmZzZXQgPCBvZmZzZXQp
IHsKPiArICAgICAgICAgICAgICAgZGV2X2VycigmZGV2LT5kZXYsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgInZpcnRpb19wY2k6IG1hcCB3cmFwLWFyb3VuZCAldSsldVxuIiwKPiArICAgICAg
ICAgICAgICAgICAgICAgICBzdGFydCwgb2Zmc2V0KTsKPiArICAgICAgICAgICAgICAgcmV0dXJu
IE5VTEw7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgb2Zmc2V0ICs9IHN0YXJ0Owo+ICsKPiAr
ICAgICAgIGlmIChvZmZzZXQgJiAoYWxpZ24gLSAxKSkgewo+ICsgICAgICAgICAgICAgICBkZXZf
ZXJyKCZkZXYtPmRldiwKPiArICAgICAgICAgICAgICAgICAgICAgICAidmlydGlvX3BjaTogb2Zm
c2V0ICV1IG5vdCBhbGlnbmVkIHRvICV1XG4iLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIG9m
ZnNldCwgYWxpZ24pOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gTlVMTDsKPiArICAgICAgIH0K
PiArCj4gKyAgICAgICBpZiAobGVuZ3RoID4gc2l6ZSkKPiArICAgICAgICAgICAgICAgbGVuZ3Ro
ID0gc2l6ZTsKPiArCj4gKyAgICAgICBpZiAobGVuKQo+ICsgICAgICAgICAgICAgICAqbGVuID0g
bGVuZ3RoOwo+ICsKPiArICAgICAgIGlmIChtaW5sZW4gKyBvZmZzZXQgPCBtaW5sZW4gfHwKPiAr
ICAgICAgICAgICBtaW5sZW4gKyBvZmZzZXQgPiBwY2lfcmVzb3VyY2VfbGVuKGRldiwgYmFyKSkg
ewo+ICsgICAgICAgICAgICAgICBkZXZfZXJyKCZkZXYtPmRldiwKPiArICAgICAgICAgICAgICAg
ICAgICAgICAidmlydGlvX3BjaTogbWFwIHZpcnRpbyAlenVAJXUgb3V0IG9mIHJhbmdlIG9uIGJh
ciAlaSBsZW5ndGggJWx1XG4iLAo+ICsgICAgICAgICAgICAgICAgICAgICAgIG1pbmxlbiwgb2Zm
c2V0LAo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJhciwgKHVuc2lnbmVkIGxvbmcpcGNpX3Jl
c291cmNlX2xlbihkZXYsIGJhcikpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gTlVMTDsKPiAr
ICAgICAgIH0KPiArCj4gKyAgICAgICBwID0gcGNpX2lvbWFwX3JhbmdlKGRldiwgYmFyLCBvZmZz
ZXQsIGxlbmd0aCk7Cj4gKyAgICAgICBpZiAoIXApCj4gKyAgICAgICAgICAgICAgIGRldl9lcnIo
JmRldi0+ZGV2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICJ2aXJ0aW9fcGNpOiB1bmFibGUg
dG8gbWFwIHZpcnRpbyAldUAldSBvbiBiYXIgJWlcbiIsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgbGVuZ3RoLCBvZmZzZXQsIGJhcik7Cj4gKyAgICAgICBlbHNlIGlmIChwYSkKPiArICAgICAg
ICAgICAgICAgKnBhID0gcGNpX3Jlc291cmNlX3N0YXJ0KGRldiwgYmFyKSArIG9mZnNldDsKPiAr
Cj4gKyAgICAgICByZXR1cm4gcDsKPiArfQo+ICsKPiArLyoqCj4gKyAqIHZpcnRpb19wY2lfZmlu
ZF9jYXBhYmlsaXR5IC0gd2FsayBjYXBhYmlsaXRpZXMgdG8gZmluZCBkZXZpY2UgaW5mby4KPiAr
ICogQGRldjogdGhlIHBjaSBkZXZpY2UKPiArICogQGNmZ190eXBlOiB0aGUgVklSVElPX1BDSV9D
QVBfKiB2YWx1ZSB3ZSBzZWVrCj4gKyAqIEBpb3Jlc291cmNlX3R5cGVzOiBJT1JFU09VUkNFX01F
TSBhbmQvb3IgSU9SRVNPVVJDRV9JTy4KPiArICogQGJhcnM6IHRoZSBiaXRtYXNrIG9mIEJBUnMK
PiArICoKPiArICogUmV0dXJucyBvZmZzZXQgb2YgdGhlIGNhcGFiaWxpdHksIG9yIDAuCj4gKyAq
Lwo+ICtzdGF0aWMgaW5saW5lIGludCB2aXJ0aW9fcGNpX2ZpbmRfY2FwYWJpbGl0eShzdHJ1Y3Qg
cGNpX2RldiAqZGV2LCB1OCBjZmdfdHlwZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB1MzIgaW9yZXNvdXJjZV90eXBlcywgaW50ICpiYXJzKQo+ICt7Cj4g
KyAgICAgICBpbnQgcG9zOwo+ICsKPiArICAgICAgIGZvciAocG9zID0gcGNpX2ZpbmRfY2FwYWJp
bGl0eShkZXYsIFBDSV9DQVBfSURfVk5EUik7Cj4gKyAgICAgICAgICAgIHBvcyA+IDA7Cj4gKyAg
ICAgICAgICAgIHBvcyA9IHBjaV9maW5kX25leHRfY2FwYWJpbGl0eShkZXYsIHBvcywgUENJX0NB
UF9JRF9WTkRSKSkgewo+ICsgICAgICAgICAgICAgICB1OCB0eXBlLCBiYXI7Cj4gKwo+ICsgICAg
ICAgICAgICAgICBwY2lfcmVhZF9jb25maWdfYnl0ZShkZXYsIHBvcyArIG9mZnNldG9mKHN0cnVj
dCB2aXJ0aW9fcGNpX2NhcCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBjZmdfdHlwZSksCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICZ0eXBlKTsKPiArICAgICAgICAgICAgICAgcGNpX3JlYWRfY29uZmlnX2J5
dGUoZGV2LCBwb3MgKyBvZmZzZXRvZihzdHJ1Y3QgdmlydGlvX3BjaV9jYXAsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFyKSwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmJhcik7Cj4gKwo+ICsgICAgICAg
ICAgICAgICAvKiBJZ25vcmUgc3RydWN0dXJlcyB3aXRoIHJlc2VydmVkIEJBUiB2YWx1ZXMgKi8K
PiArICAgICAgICAgICAgICAgaWYgKGJhciA+PSBQQ0lfU1REX05VTV9CQVJTKQo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIGNvbnRpbnVlOwo+ICsKPiArICAgICAgICAgICAgICAgaWYgKHR5cGUg
PT0gY2ZnX3R5cGUpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAocGNpX3Jlc291cmNl
X2xlbihkZXYsIGJhcikgJiYKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNpX3Jlc291
cmNlX2ZsYWdzKGRldiwgYmFyKSAmIGlvcmVzb3VyY2VfdHlwZXMpIHsKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICpiYXJzIHw9ICgxIDw8IGJhcik7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICByZXR1cm4gcG9zOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIH0K
PiArICAgICAgICAgICAgICAgfQo+ICsgICAgICAgfQo+ICsgICAgICAgcmV0dXJuIDA7Cj4gK30K
PiArCj4gKy8qCj4gKyAqIHBkc192ZHBhX3Byb2JlX3ZpcnRpbzogcHJvYmUgdGhlIG1vZGVybiB2
aXJ0aW8gcGNpIGRldmljZSwgbm90ZSB0aGF0IHRoZQo+ICsgKiBjYWxsZXIgaXMgcmVxdWlyZWQg
dG8gZW5hYmxlIFBDSSBkZXZpY2UgYmVmb3JlIGNhbGxpbmcgdGhpcyBmdW5jdGlvbi4KPiArICog
QG1kZXY6IHRoZSBtb2Rlcm4gdmlydGlvLXBjaSBkZXZpY2UKPiArICoKPiArICogUmV0dXJuIDAg
b24gc3VjY2VlZCBvdGhlcndpc2UgZmFpbAo+ICsgKi8KPiAraW50IHBkc192ZHBhX3Byb2JlX3Zp
cnRpbyhzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2KQo+ICt7Cj4gKyAgICAg
ICBzdHJ1Y3QgcGNpX2RldiAqcGNpX2RldiA9IG1kZXYtPnBjaV9kZXY7Cj4gKyAgICAgICBpbnQg
ZXJyLCBjb21tb24sIGlzciwgbm90aWZ5LCBkZXZpY2U7Cj4gKyAgICAgICB1MzIgbm90aWZ5X2xl
bmd0aDsKPiArICAgICAgIHUzMiBub3RpZnlfb2Zmc2V0Owo+ICsKPiArICAgICAgIC8qIGNoZWNr
IGZvciBhIGNvbW1vbiBjb25maWc6IGlmIG5vdCwgdXNlIGxlZ2FjeSBtb2RlIChiYXIgMCkuICov
Cj4gKyAgICAgICBjb21tb24gPSB2aXJ0aW9fcGNpX2ZpbmRfY2FwYWJpbGl0eShwY2lfZGV2LCBW
SVJUSU9fUENJX0NBUF9DT01NT05fQ0ZHLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgSU9SRVNPVVJDRV9JTyB8IElPUkVTT1VSQ0VfTUVNLAo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm1kZXYtPm1vZGVybl9iYXJzKTsK
PiArICAgICAgIGlmICghY29tbW9uKSB7Cj4gKyAgICAgICAgICAgICAgIGRldl9pbmZvKCZwY2lf
ZGV2LT5kZXYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICJ2aXJ0aW9fcGNpOiBtaXNzaW5n
IGNvbW1vbiBjb25maWdcbiIpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVOT0RFVjsKPiAr
ICAgICAgIH0KPiArCj4gKyAgICAgICAvKiBJZiBjb21tb24gaXMgdGhlcmUsIHRoZXNlIHNob3Vs
ZCBiZSB0b28uLi4gKi8KPiArICAgICAgIGlzciA9IHZpcnRpb19wY2lfZmluZF9jYXBhYmlsaXR5
KHBjaV9kZXYsIFZJUlRJT19QQ0lfQ0FQX0lTUl9DRkcsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBJT1JFU09VUkNFX0lPIHwgSU9SRVNPVVJDRV9NRU0sCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbWRldi0+bW9kZXJuX2JhcnMp
Owo+ICsgICAgICAgbm90aWZ5ID0gdmlydGlvX3BjaV9maW5kX2NhcGFiaWxpdHkocGNpX2Rldiwg
VklSVElPX1BDSV9DQVBfTk9USUZZX0NGRywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIElPUkVTT1VSQ0VfSU8gfCBJT1JFU09VUkNFX01FTSwKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZtZGV2LT5tb2Rlcm5fYmFycyk7
Cj4gKyAgICAgICBpZiAoIWlzciB8fCAhbm90aWZ5KSB7Cj4gKyAgICAgICAgICAgICAgIGRldl9l
cnIoJnBjaV9kZXYtPmRldiwKPiArICAgICAgICAgICAgICAgICAgICAgICAidmlydGlvX3BjaTog
bWlzc2luZyBjYXBhYmlsaXRpZXMgJWkvJWkvJWlcbiIsCj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgY29tbW9uLCBpc3IsIG5vdGlmeSk7Cj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFM
Owo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIC8qIERldmljZSBjYXBhYmlsaXR5IGlzIG9ubHkg
bWFuZGF0b3J5IGZvciBkZXZpY2VzIHRoYXQgaGF2ZQo+ICsgICAgICAgICogZGV2aWNlLXNwZWNp
ZmljIGNvbmZpZ3VyYXRpb24uCj4gKyAgICAgICAgKi8KPiArICAgICAgIGRldmljZSA9IHZpcnRp
b19wY2lfZmluZF9jYXBhYmlsaXR5KHBjaV9kZXYsIFZJUlRJT19QQ0lfQ0FQX0RFVklDRV9DRkcs
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJT1JFU09VUkNF
X0lPIHwgSU9SRVNPVVJDRV9NRU0sCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAmbWRldi0+bW9kZXJuX2JhcnMpOwo+ICsKPiArICAgICAgIGVyciA9IHBjaV9y
ZXF1ZXN0X3NlbGVjdGVkX3JlZ2lvbnMocGNpX2RldiwgbWRldi0+bW9kZXJuX2JhcnMsCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2aXJ0aW8tcGNpLW1vZGVy
biIpOwo+ICsgICAgICAgaWYgKGVycikKPiArICAgICAgICAgICAgICAgcmV0dXJuIGVycjsKPiAr
Cj4gKyAgICAgICBlcnIgPSAtRUlOVkFMOwo+ICsgICAgICAgbWRldi0+Y29tbW9uID0gcGRzX3Zk
cGFfbWFwX2NhcGFiaWxpdHkobWRldiwgY29tbW9uLAo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKHN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9j
ZmcpLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNCwg
MCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVv
ZihzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnKSwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIE5VTEwsIE5VTEwpOwo+ICsgICAgICAgaWYgKCFtZGV2
LT5jb21tb24pCj4gKyAgICAgICAgICAgICAgIGdvdG8gZXJyX21hcF9jb21tb247Cj4gKyAgICAg
ICBtZGV2LT5pc3IgPSBwZHNfdmRwYV9tYXBfY2FwYWJpbGl0eShtZGV2LCBpc3IsIHNpemVvZih1
OCksIDEsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAx
LCBOVUxMLCBOVUxMKTsKPiArICAgICAgIGlmICghbWRldi0+aXNyKQo+ICsgICAgICAgICAgICAg
ICBnb3RvIGVycl9tYXBfaXNyOwo+ICsKPiArICAgICAgIC8qIFJlYWQgbm90aWZ5X29mZl9tdWx0
aXBsaWVyIGZyb20gY29uZmlnIHNwYWNlLiAqLwo+ICsgICAgICAgcGNpX3JlYWRfY29uZmlnX2R3
b3JkKHBjaV9kZXYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZ5ICsgb2Zm
c2V0b2Yoc3RydWN0IHZpcnRpb19wY2lfbm90aWZ5X2NhcCwKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZnlfb2ZmX211bHRpcGxpZXIpLAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICZtZGV2LT5ub3RpZnlfb2Zmc2V0X211bHRpcGxp
ZXIpOwo+ICsgICAgICAgLyogUmVhZCBub3RpZnkgbGVuZ3RoIGFuZCBvZmZzZXQgZnJvbSBjb25m
aWcgc3BhY2UuICovCj4gKyAgICAgICBwY2lfcmVhZF9jb25maWdfZHdvcmQocGNpX2RldiwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZnkgKyBvZmZzZXRvZihzdHJ1Y3Qgdmly
dGlvX3BjaV9ub3RpZnlfY2FwLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGNhcC5sZW5ndGgpLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICZub3RpZnlfbGVuZ3RoKTsKPiArCj4gKyAgICAgICBwY2lfcmVhZF9jb25maWdfZHdvcmQocGNp
X2RldiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZnkgKyBvZmZzZXRvZihz
dHJ1Y3QgdmlydGlvX3BjaV9ub3RpZnlfY2FwLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGNhcC5vZmZzZXQpLAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICZub3RpZnlfb2Zmc2V0KTsKPiArCj4gKyAgICAgICAvKiBXZSBkb24ndCBrbm93
IGhvdyBtYW55IFZRcyB3ZSdsbCBtYXAsIGFoZWFkIG9mIHRoZSB0aW1lLgo+ICsgICAgICAgICog
SWYgbm90aWZ5IGxlbmd0aCBpcyBzbWFsbCwgbWFwIGl0IGFsbCBub3cuCj4gKyAgICAgICAgKiBP
dGhlcndpc2UsIG1hcCBlYWNoIFZRIGluZGl2aWR1YWxseSBsYXRlci4KPiArICAgICAgICAqLwo+
ICsgICAgICAgaWYgKCh1NjQpbm90aWZ5X2xlbmd0aCArIChub3RpZnlfb2Zmc2V0ICUgUEFHRV9T
SVpFKSA8PSBQQUdFX1NJWkUpIHsKPiArICAgICAgICAgICAgICAgbWRldi0+bm90aWZ5X2Jhc2Ug
PSBwZHNfdmRwYV9tYXBfY2FwYWJpbGl0eShtZGV2LCBub3RpZnksCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMiwgMiwKPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAw
LCBub3RpZnlfbGVuZ3RoLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICZtZGV2LT5ub3RpZnlfbGVuLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZtZGV2LT5ub3Rp
ZnlfcGEpOwo+ICsgICAgICAgICAgICAgICBpZiAoIW1kZXYtPm5vdGlmeV9iYXNlKQo+ICsgICAg
ICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyX21hcF9ub3RpZnk7Cj4gKyAgICAgICB9IGVsc2Ug
ewo+ICsgICAgICAgICAgICAgICBtZGV2LT5ub3RpZnlfbWFwX2NhcCA9IG5vdGlmeTsKPiArICAg
ICAgIH0KPiArCj4gKyAgICAgICAvKiBBZ2Fpbiwgd2UgZG9uJ3Qga25vdyBob3cgbXVjaCB3ZSBz
aG91bGQgbWFwLCBidXQgUEFHRV9TSVpFCj4gKyAgICAgICAgKiBpcyBtb3JlIHRoYW4gZW5vdWdo
IGZvciBhbGwgZXhpc3RpbmcgZGV2aWNlcy4KPiArICAgICAgICAqLwo+ICsgICAgICAgaWYgKGRl
dmljZSkgewo+ICsgICAgICAgICAgICAgICBtZGV2LT5kZXZpY2UgPSBwZHNfdmRwYV9tYXBfY2Fw
YWJpbGl0eShtZGV2LCBkZXZpY2UsIDAsIDQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIFBBR0VfU0laRSwKPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm1kZXYtPmRldmljZV9s
ZW4sCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIE5VTEwpOwo+ICsgICAgICAgICAgICAgICBpZiAoIW1kZXYtPmRldmljZSkKPiArICAgICAg
ICAgICAgICAgICAgICAgICBnb3RvIGVycl9tYXBfZGV2aWNlOwo+ICsgICAgICAgfQo+ICsKPiAr
ICAgICAgIHJldHVybiAwOwo+ICsKPiArZXJyX21hcF9kZXZpY2U6Cj4gKyAgICAgICBpZiAobWRl
di0+bm90aWZ5X2Jhc2UpCj4gKyAgICAgICAgICAgICAgIHBjaV9pb3VubWFwKHBjaV9kZXYsIG1k
ZXYtPm5vdGlmeV9iYXNlKTsKPiArZXJyX21hcF9ub3RpZnk6Cj4gKyAgICAgICBwY2lfaW91bm1h
cChwY2lfZGV2LCBtZGV2LT5pc3IpOwo+ICtlcnJfbWFwX2lzcjoKPiArICAgICAgIHBjaV9pb3Vu
bWFwKHBjaV9kZXYsIG1kZXYtPmNvbW1vbik7Cj4gK2Vycl9tYXBfY29tbW9uOgo+ICsgICAgICAg
cGNpX3JlbGVhc2Vfc2VsZWN0ZWRfcmVnaW9ucyhwY2lfZGV2LCBtZGV2LT5tb2Rlcm5fYmFycyk7
Cj4gKyAgICAgICByZXR1cm4gZXJyOwo+ICt9Cj4gKwo+ICt2b2lkIHBkc192ZHBhX3JlbW92ZV92
aXJ0aW8oc3RydWN0IHZpcnRpb19wY2lfbW9kZXJuX2RldmljZSAqbWRldikKPiArewo+ICsgICAg
ICAgc3RydWN0IHBjaV9kZXYgKnBjaV9kZXYgPSBtZGV2LT5wY2lfZGV2Owo+ICsKPiArICAgICAg
IGlmIChtZGV2LT5kZXZpY2UpCj4gKyAgICAgICAgICAgICAgIHBjaV9pb3VubWFwKHBjaV9kZXYs
IG1kZXYtPmRldmljZSk7Cj4gKyAgICAgICBpZiAobWRldi0+bm90aWZ5X2Jhc2UpCj4gKyAgICAg
ICAgICAgICAgIHBjaV9pb3VubWFwKHBjaV9kZXYsIG1kZXYtPm5vdGlmeV9iYXNlKTsKPiArICAg
ICAgIHBjaV9pb3VubWFwKHBjaV9kZXYsIG1kZXYtPmlzcik7Cj4gKyAgICAgICBwY2lfaW91bm1h
cChwY2lfZGV2LCBtZGV2LT5jb21tb24pOwo+ICsgICAgICAgcGNpX3JlbGVhc2Vfc2VsZWN0ZWRf
cmVnaW9ucyhwY2lfZGV2LCBtZGV2LT5tb2Rlcm5fYmFycyk7Cj4gK30KPiBkaWZmIC0tZ2l0IGEv
ZHJpdmVycy92ZHBhL3Bkcy92aXJ0aW9fcGNpLmggYi9kcml2ZXJzL3ZkcGEvcGRzL3ZpcnRpb19w
Y2kuaAo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAwLi5mMDE3Y2Zh
MTE3M2MKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIvZHJpdmVycy92ZHBhL3Bkcy92aXJ0aW9fcGNp
LmgKPiBAQCAtMCwwICsxLDggQEAKPiArLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0y
LjAtb25seSAqLwo+ICsvKiBDb3B5cmlnaHQoYykgMjAyMyBBZHZhbmNlZCBNaWNybyBEZXZpY2Vz
LCBJbmMgKi8KPiArCj4gKyNpZm5kZWYgX1BEU19WSVJUSU9fUENJX0hfCj4gKyNkZWZpbmUgX1BE
U19WSVJUSU9fUENJX0hfCj4gK2ludCBwZHNfdmRwYV9wcm9iZV92aXJ0aW8oc3RydWN0IHZpcnRp
b19wY2lfbW9kZXJuX2RldmljZSAqbWRldik7Cj4gK3ZvaWQgcGRzX3ZkcGFfcmVtb3ZlX3ZpcnRp
byhzdHJ1Y3QgdmlydGlvX3BjaV9tb2Rlcm5fZGV2aWNlICptZGV2KTsKPiArI2VuZGlmIC8qIF9Q
RFNfVklSVElPX1BDSV9IXyAqLwo+IC0tCj4gMi4xNy4xCj4KCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApW
aXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxp
bnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
