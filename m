Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [IPv6:2605:bc80:3010::133])
	by mail.lfdr.de (Postfix) with ESMTPS id D88E043ABBC
	for <lists.virtualization@lfdr.de>; Tue, 26 Oct 2021 07:37:31 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id 6AE8D401D9;
	Tue, 26 Oct 2021 05:37:30 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id nmn5j71mGSdJ; Tue, 26 Oct 2021 05:37:29 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp2.osuosl.org (Postfix) with ESMTPS id 91E3B401D2;
	Tue, 26 Oct 2021 05:37:28 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 041DFC0021;
	Tue, 26 Oct 2021 05:37:28 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 58FCBC000E
 for <virtualization@lists.linux-foundation.org>;
 Tue, 26 Oct 2021 05:37:26 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id 2B36840442
 for <virtualization@lists.linux-foundation.org>;
 Tue, 26 Oct 2021 05:37:26 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp4.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id ZXirrLfasYlD
 for <virtualization@lists.linux-foundation.org>;
 Tue, 26 Oct 2021 05:37:24 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp4.osuosl.org (Postfix) with ESMTPS id CA1FD4043D
 for <virtualization@lists.linux-foundation.org>;
 Tue, 26 Oct 2021 05:37:24 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1635226643;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=Xfd3dwMAAsMHJotb8OA2R9twXclXz/4djuMCcwgH+IU=;
 b=MBLlJlipO1RJH6zVRfz+zFLO2Fc6T6tbqMwVg/6mQe+I2fvw91Hxjfz4I6ZkBc5re8l3VA
 I18TeShCy1udwQKyEsWacb7c3HVQEGL80tQx5hnb3BLFqCK1B//aD9GFE8f6TxQufGo/1g
 l/cXJoMOK4FGNEADdGfucIr0FKDCqPo=
Received: from mail-pj1-f71.google.com (mail-pj1-f71.google.com
 [209.85.216.71]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-252-e0IT_Zj0MrKLch3rgXeofQ-1; Tue, 26 Oct 2021 01:37:22 -0400
X-MC-Unique: e0IT_Zj0MrKLch3rgXeofQ-1
Received: by mail-pj1-f71.google.com with SMTP id
 nk11-20020a17090b194b00b001a22ed4a912so617223pjb.3
 for <virtualization@lists.linux-foundation.org>;
 Mon, 25 Oct 2021 22:37:22 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:subject:to:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=Xfd3dwMAAsMHJotb8OA2R9twXclXz/4djuMCcwgH+IU=;
 b=0IDVc1OCMcmZzwaGq2LKbfZAWXYOwL+LWWikt21Ruh5zAhMWTovXebiZevaj+kfHYJ
 MDKASFMfVWeUEsAKHFHBfedScbtgJVYjETEEzlKN9FzCmwTGfA7Zcla/42k6/SAcjsGN
 nP3/cKnjo+wpbiZm7MFAx4cO0AR0irDKsT8Svs91HSWN9A8KuH0LbmmQwGORLsVosgcB
 1HftNumW7y/C2DgjsIpCyiN2B8lHhlw+UZp0/WdlPVmSpvqfJiio8OVdsQ1qrE4UKT20
 6AMSUOYjy8qJqzR+RPpGCRrFwfpkZAap2wdDuVScJXSwtNiWWedp+5RQK0CVhNNbEdGo
 qvQg==
X-Gm-Message-State: AOAM533HGJciiEkODrc7ABYilEoF84R+rEnjh3HTQ391j/I/qnyJGDq2
 BXKSw7JoFUT7PeT7O3yV9C+MZ+hTYq9hAD6her5mdWyx1citFQmqip9KXUdg9swohchMvg0MVDL
 2T9SHrsymwEfMqKWfbaqhStN/76vIKAdZQ1HchO4ZH5Z+CR2+y6gzJt3wxsIzxdBI2GgEjovlsF
 jRgWIOCm1DxzsUIYHP9Q==
X-Received: by 2002:a17:903:120c:b0:13f:d043:3477 with SMTP id
 l12-20020a170903120c00b0013fd0433477mr20535903plh.89.1635226640921; 
 Mon, 25 Oct 2021 22:37:20 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJzJUJHIk88OOXYw7L7HtLYAGqE/3rfVGGxtEo8KTcV+5Pg2dL5aZ8yLIEcqirroi0BS231tRQ==
X-Received: by 2002:a17:903:120c:b0:13f:d043:3477 with SMTP id
 l12-20020a170903120c00b0013fd0433477mr20535860plh.89.1635226640394; 
 Mon, 25 Oct 2021 22:37:20 -0700 (PDT)
Received: from wangxiaodeMacBook-Air.local ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id d17sm8769526pfj.98.2021.10.25.22.37.17
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Mon, 25 Oct 2021 22:37:19 -0700 (PDT)
Subject: Re: [PATCH V3 11/11] vhost: allow userspace to create workers
To: Mike Christie <michael.christie@oracle.com>,
 target-devel@vger.kernel.org, linux-scsi@vger.kernel.org,
 stefanha@redhat.com, pbonzini@redhat.com, mst@redhat.com,
 sgarzare@redhat.com, virtualization@lists.linux-foundation.org
References: <20211022051911.108383-1-michael.christie@oracle.com>
 <20211022051911.108383-13-michael.christie@oracle.com>
From: Jason Wang <jasowang@redhat.com>
Message-ID: <8aee8f07-76bd-f111-bc5f-fc5cad46ce56@redhat.com>
Date: Tue, 26 Oct 2021 13:37:14 +0800
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0)
 Gecko/20100101 Thunderbird/78.14.0
MIME-Version: 1.0
In-Reply-To: <20211022051911.108383-13-michael.christie@oracle.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="gbk"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CtTaIDIwMjEvMTAvMjIgz8LO5zE6MTksIE1pa2UgQ2hyaXN0aWUg0LS1wDoKPiBUaGlzIHBhdGNo
IGFsbG93cyB1c2Vyc3BhY2UgdG8gY3JlYXRlIHdvcmtlcnMgYW5kIGJpbmQgdGhlbSB0byB2cXMu
IFlvdQo+IGNhbiBoYXZlIE4gd29ya2VycyBwZXIgZGV2IGFuZCBhbHNvIHNoYXJlIE4gd29ya2Vy
cyB3aXRoIE0gdnFzLgo+Cj4gU2lnbmVkLW9mZi1ieTogTWlrZSBDaHJpc3RpZSA8bWljaGFlbC5j
aHJpc3RpZUBvcmFjbGUuY29tPgoKCkEgcXVlc3Rpb24sIHdobyBpcyB0aGUgYmVzdCBvbmUgdG8g
ZGV0ZXJtaW5lIHRoZSBiaW5kaW5nPyBJcyBpdCB0aGUgVk1NIAooUWVtdSBldGMpIG9yIHRoZSBt
YW5hZ2VtZW50IHN0YWNrPyBJZiB0aGUgbGF0dGVyLCBpdCBsb29rcyB0byBtZSBpdCdzIApiZXR0
ZXIgdG8gZXhwb3NlIHRoaXMgdmlhIHN5c2ZzPwoKCj4gLS0tCj4gICBkcml2ZXJzL3Zob3N0L3Zo
b3N0LmMgICAgICAgICAgICB8IDk5ICsrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tCj4g
ICBkcml2ZXJzL3Zob3N0L3Zob3N0LmggICAgICAgICAgICB8ICAyICstCj4gICBpbmNsdWRlL3Vh
cGkvbGludXgvdmhvc3QuaCAgICAgICB8IDExICsrKysKPiAgIGluY2x1ZGUvdWFwaS9saW51eC92
aG9zdF90eXBlcy5oIHwgMTIgKysrKwo+ICAgNCBmaWxlcyBjaGFuZ2VkLCAxMTIgaW5zZXJ0aW9u
cygrKSwgMTIgZGVsZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92aG9zdC92aG9z
dC5jIGIvZHJpdmVycy92aG9zdC92aG9zdC5jCj4gaW5kZXggMDRmNDNhNjQ0NWUxLi5jODZlODhk
N2YzNWMgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92aG9zdC92aG9zdC5jCj4gKysrIGIvZHJpdmVy
cy92aG9zdC92aG9zdC5jCj4gQEAgLTQ5Myw3ICs0OTMsNiBAQCB2b2lkIHZob3N0X2Rldl9pbml0
KHN0cnVjdCB2aG9zdF9kZXYgKmRldiwKPiAgIAlkZXYtPnVtZW0gPSBOVUxMOwo+ICAgCWRldi0+
aW90bGIgPSBOVUxMOwo+ICAgCWRldi0+bW0gPSBOVUxMOwo+IC0JZGV2LT53b3JrZXIgPSBOVUxM
Owo+ICAgCWRldi0+aW92X2xpbWl0ID0gaW92X2xpbWl0Owo+ICAgCWRldi0+d2VpZ2h0ID0gd2Vp
Z2h0Owo+ICAgCWRldi0+Ynl0ZV93ZWlnaHQgPSBieXRlX3dlaWdodDsKPiBAQCAtNTc2LDIwICs1
NzUsNDAgQEAgc3RhdGljIHZvaWQgdmhvc3Rfd29ya2VyX3N0b3Aoc3RydWN0IHZob3N0X3dvcmtl
ciAqd29ya2VyKQo+ICAgCXdhaXRfZm9yX2NvbXBsZXRpb24od29ya2VyLT5leGl0X2RvbmUpOwo+
ICAgfQo+ICAgCj4gLXN0YXRpYyB2b2lkIHZob3N0X3dvcmtlcl9mcmVlKHN0cnVjdCB2aG9zdF9k
ZXYgKmRldikKPiAtewo+IC0Jc3RydWN0IHZob3N0X3dvcmtlciAqd29ya2VyID0gZGV2LT53b3Jr
ZXI7Cj4gICAKPiArc3RhdGljIHZvaWQgdmhvc3Rfd29ya2VyX3B1dChzdHJ1Y3Qgdmhvc3Rfd29y
a2VyICp3b3JrZXIpCj4gK3sKPiAgIAlpZiAoIXdvcmtlcikKPiAgIAkJcmV0dXJuOwo+ICAgCj4g
LQlkZXYtPndvcmtlciA9IE5VTEw7Cj4gKwlpZiAoIXJlZmNvdW50X2RlY19hbmRfdGVzdCgmd29y
a2VyLT5yZWZjb3VudCkpCj4gKwkJcmV0dXJuOwo+ICsKPiAgIAlXQVJOX09OKCFsbGlzdF9lbXB0
eSgmd29ya2VyLT53b3JrX2xpc3QpKTsKPiAgIAl2aG9zdF93b3JrZXJfc3RvcCh3b3JrZXIpOwo+
ICAgCWtmcmVlKHdvcmtlcik7Cj4gICB9Cj4gICAKPiAtc3RhdGljIHN0cnVjdCB2aG9zdF93b3Jr
ZXIgKnZob3N0X3dvcmtlcl9jcmVhdGUoc3RydWN0IHZob3N0X2RldiAqZGV2KQo+ICtzdGF0aWMg
dm9pZCB2aG9zdF92cV9jbGVhcl93b3JrZXIoc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEpCj4g
K3sKPiArCWlmICh2cS0+d29ya2VyKQo+ICsJCXZob3N0X3dvcmtlcl9wdXQodnEtPndvcmtlcik7
Cj4gKwl2cS0+d29ya2VyID0gTlVMTDsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgdmhvc3Rfd29y
a2Vyc19mcmVlKHN0cnVjdCB2aG9zdF9kZXYgKmRldikKPiArewo+ICsJaW50IGk7Cj4gKwo+ICsJ
aWYgKCFkZXYtPnVzZV93b3JrZXIpCj4gKwkJcmV0dXJuOwo+ICsKPiArCWZvciAoaSA9IDA7IGkg
PCBkZXYtPm52cXM7IGkrKykKPiArCQl2aG9zdF92cV9jbGVhcl93b3JrZXIoZGV2LT52cXNbaV0p
Owo+ICt9Cj4gKwo+ICtzdGF0aWMgc3RydWN0IHZob3N0X3dvcmtlciAqdmhvc3Rfd29ya2VyX2Ny
ZWF0ZShzdHJ1Y3Qgdmhvc3RfZGV2ICpkZXYsCj4gKwkJCQkJCWludCBpbml0X3ZxX21hcF9jb3Vu
dCkKPiAgIHsKPiAgIAlzdHJ1Y3Qgdmhvc3Rfd29ya2VyICp3b3JrZXI7Cj4gICAJc3RydWN0IHRh
c2tfc3RydWN0ICp0YXNrOwo+IEBAIC01OTgsOSArNjE3LDkgQEAgc3RhdGljIHN0cnVjdCB2aG9z
dF93b3JrZXIgKnZob3N0X3dvcmtlcl9jcmVhdGUoc3RydWN0IHZob3N0X2RldiAqZGV2KQo+ICAg
CWlmICghd29ya2VyKQo+ICAgCQlyZXR1cm4gTlVMTDsKPiAgIAo+IC0JZGV2LT53b3JrZXIgPSB3
b3JrZXI7Cj4gICAJd29ya2VyLT5rY292X2hhbmRsZSA9IGtjb3ZfY29tbW9uX2hhbmRsZSgpOwo+
ICAgCWluaXRfbGxpc3RfaGVhZCgmd29ya2VyLT53b3JrX2xpc3QpOwo+ICsJcmVmY291bnRfc2V0
KCZ3b3JrZXItPnJlZmNvdW50LCBpbml0X3ZxX21hcF9jb3VudCk7Cj4gICAKPiAgIAkvKgo+ICAg
CSAqIHZob3N0IHVzZWQgdG8gdXNlIHRoZSBrdGhyZWFkIEFQSSB3aGljaCBpZ25vcmVzIGFsbCBz
aWduYWxzIGJ5Cj4gQEAgLTYxNywxMCArNjM2LDU4IEBAIHN0YXRpYyBzdHJ1Y3Qgdmhvc3Rfd29y
a2VyICp2aG9zdF93b3JrZXJfY3JlYXRlKHN0cnVjdCB2aG9zdF9kZXYgKmRldikKPiAgIAo+ICAg
ZnJlZV93b3JrZXI6Cj4gICAJa2ZyZWUod29ya2VyKTsKPiAtCWRldi0+d29ya2VyID0gTlVMTDsK
PiAgIAlyZXR1cm4gTlVMTDsKPiAgIH0KPiAgIAo+ICtzdGF0aWMgc3RydWN0IHZob3N0X3dvcmtl
ciAqdmhvc3Rfd29ya2VyX2ZpbmQoc3RydWN0IHZob3N0X2RldiAqZGV2LCBwaWRfdCBwaWQpCj4g
K3sKPiArCXN0cnVjdCB2aG9zdF93b3JrZXIgKndvcmtlciA9IE5VTEw7Cj4gKwlpbnQgaTsKPiAr
Cj4gKwlmb3IgKGkgPSAwOyBpIDwgZGV2LT5udnFzOyBpKyspIHsKPiArCQlpZiAoZGV2LT52cXNb
aV0tPndvcmtlci0+dGFzay0+cGlkICE9IHBpZCkKPiArCQkJY29udGludWU7Cj4gKwo+ICsJCXdv
cmtlciA9IGRldi0+dnFzW2ldLT53b3JrZXI7Cj4gKwkJYnJlYWs7Cj4gKwl9Cj4gKwo+ICsJcmV0
dXJuIHdvcmtlcjsKPiArfQo+ICsKPiArLyogQ2FsbGVyIG11c3QgaGF2ZSBkZXZpY2UgbXV0ZXgg
Ki8KPiArc3RhdGljIGludCB2aG9zdF92cV9zZXR1cF93b3JrZXIoc3RydWN0IHZob3N0X3ZpcnRx
dWV1ZSAqdnEsCj4gKwkJCQkgc3RydWN0IHZob3N0X3ZyaW5nX3dvcmtlciAqaW5mbykKPiArewo+
ICsJc3RydWN0IHZob3N0X2RldiAqZGV2ID0gdnEtPmRldjsKPiArCXN0cnVjdCB2aG9zdF93b3Jr
ZXIgKndvcmtlcjsKPiArCj4gKwlpZiAoIWRldi0+dXNlX3dvcmtlcikKPiArCQlyZXR1cm4gLUVJ
TlZBTDsKPiArCj4gKwkvKiBXZSBkb24ndCBzdXBwb3J0IHNldHRpbmcgYSB3b3JrZXIgb24gYW4g
YWN0aXZlIHZxICovCj4gKwlpZiAodnEtPnByaXZhdGVfZGF0YSkKPiArCQlyZXR1cm4gLUVCVVNZ
OwoKCklzIGl0IHZhbHVhYmxlIHRvIGFsbG93IHRoZSB3b3JrZXIgc3dpdGNoaW5nIG9uIGFjdGl2
ZSB2cT8KCgo+ICsKPiArCWlmIChpbmZvLT5waWQgPT0gVkhPU1RfVlJJTkdfTkVXX1dPUktFUikg
ewo+ICsJCXdvcmtlciA9IHZob3N0X3dvcmtlcl9jcmVhdGUoZGV2LCAxKTsKPiArCQlpZiAoIXdv
cmtlcikKPiArCQkJcmV0dXJuIC1FTk9NRU07Cj4gKwo+ICsJCWluZm8tPnBpZCA9IHdvcmtlci0+
dGFzay0+cGlkOwo+ICsJfSBlbHNlIHsKPiArCQl3b3JrZXIgPSB2aG9zdF93b3JrZXJfZmluZChk
ZXYsIGluZm8tPnBpZCk7Cj4gKwkJaWYgKCF3b3JrZXIpCj4gKwkJCXJldHVybiAtRU5PREVWOwo+
ICsKPiArCQlyZWZjb3VudF9pbmMoJndvcmtlci0+cmVmY291bnQpOwo+ICsJfQo+ICsKPiArCXZo
b3N0X3ZxX2NsZWFyX3dvcmtlcih2cSk7Cj4gKwl2cS0+d29ya2VyID0gd29ya2VyOwo+ICsJcmV0
dXJuIDA7Cj4gK30KPiArCj4gICAvKiBDYWxsZXIgc2hvdWxkIGhhdmUgZGV2aWNlIG11dGV4ICov
Cj4gICBsb25nIHZob3N0X2Rldl9zZXRfb3duZXIoc3RydWN0IHZob3N0X2RldiAqZGV2KQo+ICAg
ewo+IEBAIC02MzYsNyArNzAzLDcgQEAgbG9uZyB2aG9zdF9kZXZfc2V0X293bmVyKHN0cnVjdCB2
aG9zdF9kZXYgKmRldikKPiAgIAl2aG9zdF9hdHRhY2hfbW0oZGV2KTsKPiAgIAo+ICAgCWlmIChk
ZXYtPnVzZV93b3JrZXIpIHsKPiAtCQl3b3JrZXIgPSB2aG9zdF93b3JrZXJfY3JlYXRlKGRldik7
Cj4gKwkJd29ya2VyID0gdmhvc3Rfd29ya2VyX2NyZWF0ZShkZXYsIGRldi0+bnZxcyk7Cj4gICAJ
CWlmICghd29ya2VyKQo+ICAgCQkJZ290byBlcnJfd29ya2VyOwo+ICAgCj4gQEAgLTY1MCw3ICs3
MTcsNyBAQCBsb25nIHZob3N0X2Rldl9zZXRfb3duZXIoc3RydWN0IHZob3N0X2RldiAqZGV2KQo+
ICAgCj4gICAJcmV0dXJuIDA7Cj4gICBlcnJfaW92ZWNzOgo+IC0Jdmhvc3Rfd29ya2VyX2ZyZWUo
ZGV2KTsKPiArCXZob3N0X3dvcmtlcnNfZnJlZShkZXYpOwo+ICAgZXJyX3dvcmtlcjoKPiAgIAl2
aG9zdF9kZXRhY2hfbW0oZGV2KTsKPiAgIGVycl9tbToKPiBAQCAtNzQyLDcgKzgwOSw3IEBAIHZv
aWQgdmhvc3RfZGV2X2NsZWFudXAoc3RydWN0IHZob3N0X2RldiAqZGV2KQo+ICAgCWRldi0+aW90
bGIgPSBOVUxMOwo+ICAgCXZob3N0X2NsZWFyX21zZyhkZXYpOwo+ICAgCXdha2VfdXBfaW50ZXJy
dXB0aWJsZV9wb2xsKCZkZXYtPndhaXQsIEVQT0xMSU4gfCBFUE9MTFJETk9STSk7Cj4gLQl2aG9z
dF93b3JrZXJfZnJlZShkZXYpOwo+ICsJdmhvc3Rfd29ya2Vyc19mcmVlKGRldik7Cj4gICAJdmhv
c3RfZGV0YWNoX21tKGRldik7Cj4gICB9Cj4gICBFWFBPUlRfU1lNQk9MX0dQTCh2aG9zdF9kZXZf
Y2xlYW51cCk7Cj4gQEAgLTE2MTIsNiArMTY3OSw3IEBAIGxvbmcgdmhvc3RfdnJpbmdfaW9jdGwo
c3RydWN0IHZob3N0X2RldiAqZCwgdW5zaWduZWQgaW50IGlvY3RsLCB2b2lkIF9fdXNlciAqYXJn
Cj4gICAJc3RydWN0IGV2ZW50ZmRfY3R4ICpjdHggPSBOVUxMOwo+ICAgCXUzMiBfX3VzZXIgKmlk
eHAgPSBhcmdwOwo+ICAgCXN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxOwo+ICsJc3RydWN0IHZo
b3N0X3ZyaW5nX3dvcmtlciB3Owo+ICAgCXN0cnVjdCB2aG9zdF92cmluZ19zdGF0ZSBzOwo+ICAg
CXN0cnVjdCB2aG9zdF92cmluZ19maWxlIGY7Cj4gICAJdTMyIGlkeDsKPiBAQCAtMTcxOSw2ICsx
Nzg3LDE1IEBAIGxvbmcgdmhvc3RfdnJpbmdfaW9jdGwoc3RydWN0IHZob3N0X2RldiAqZCwgdW5z
aWduZWQgaW50IGlvY3RsLCB2b2lkIF9fdXNlciAqYXJnCj4gICAJCWlmIChjb3B5X3RvX3VzZXIo
YXJncCwgJnMsIHNpemVvZihzKSkpCj4gICAJCQlyID0gLUVGQVVMVDsKPiAgIAkJYnJlYWs7Cj4g
KwljYXNlIFZIT1NUX1NFVF9WUklOR19XT1JLRVI6Cj4gKwkJaWYgKGNvcHlfZnJvbV91c2VyKCZ3
LCBhcmdwLCBzaXplb2YodykpKSB7Cj4gKwkJCXIgPSAtRUZBVUxUOwo+ICsJCQlicmVhazsKPiAr
CQl9Cj4gKwkJciA9IHZob3N0X3ZxX3NldHVwX3dvcmtlcih2cSwgJncpOwo+ICsJCWlmICghciAm
JiBjb3B5X3RvX3VzZXIoYXJncCwgJncsIHNpemVvZih3KSkpCj4gKwkJCXIgPSAtRUZBVUxUOwo+
ICsJCWJyZWFrOwo+ICAgCWRlZmF1bHQ6Cj4gICAJCXIgPSAtRU5PSU9DVExDTUQ7Cj4gICAJfQo+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL3Zob3N0L3Zob3N0LmggYi9kcml2ZXJzL3Zob3N0L3Zob3N0
LmgKPiBpbmRleCAzM2M2M2IyNDE4N2EuLjA5MTFkMWE5YmQzYiAxMDA2NDQKPiAtLS0gYS9kcml2
ZXJzL3Zob3N0L3Zob3N0LmgKPiArKysgYi9kcml2ZXJzL3Zob3N0L3Zob3N0LmgKPiBAQCAtMzUs
NiArMzUsNyBAQCBzdHJ1Y3Qgdmhvc3Rfd29ya2VyIHsKPiAgIAlzdHJ1Y3QgbGxpc3RfaGVhZAl3
b3JrX2xpc3Q7Cj4gICAJdTY0CQkJa2Nvdl9oYW5kbGU7Cj4gICAJdW5zaWduZWQgbG9uZwkJZmxh
Z3M7Cj4gKwlyZWZjb3VudF90CQlyZWZjb3VudDsKPiAgIH07Cj4gICAKPiAgIC8qIFBvbGwgYSBm
aWxlIChldmVudGZkIG9yIHNvY2tldCkgKi8KPiBAQCAtMTYwLDcgKzE2MSw2IEBAIHN0cnVjdCB2
aG9zdF9kZXYgewo+ICAgCXN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKip2cXM7Cj4gICAJaW50IG52
cXM7Cj4gICAJc3RydWN0IGV2ZW50ZmRfY3R4ICpsb2dfY3R4Owo+IC0Jc3RydWN0IHZob3N0X3dv
cmtlciAqd29ya2VyOwo+ICAgCXN0cnVjdCB2aG9zdF9pb3RsYiAqdW1lbTsKPiAgIAlzdHJ1Y3Qg
dmhvc3RfaW90bGIgKmlvdGxiOwo+ICAgCXNwaW5sb2NrX3QgaW90bGJfbG9jazsKPiBkaWZmIC0t
Z2l0IGEvaW5jbHVkZS91YXBpL2xpbnV4L3Zob3N0LmggYi9pbmNsdWRlL3VhcGkvbGludXgvdmhv
c3QuaAo+IGluZGV4IGM5OTg4NjBkN2JiYy4uZTVjMDY2OTQzMGU1IDEwMDY0NAo+IC0tLSBhL2lu
Y2x1ZGUvdWFwaS9saW51eC92aG9zdC5oCj4gKysrIGIvaW5jbHVkZS91YXBpL2xpbnV4L3Zob3N0
LmgKPiBAQCAtNzAsNiArNzAsMTcgQEAKPiAgICNkZWZpbmUgVkhPU1RfVlJJTkdfQklHX0VORElB
TiAxCj4gICAjZGVmaW5lIFZIT1NUX1NFVF9WUklOR19FTkRJQU4gX0lPVyhWSE9TVF9WSVJUSU8s
IDB4MTMsIHN0cnVjdCB2aG9zdF92cmluZ19zdGF0ZSkKPiAgICNkZWZpbmUgVkhPU1RfR0VUX1ZS
SU5HX0VORElBTiBfSU9XKFZIT1NUX1ZJUlRJTywgMHgxNCwgc3RydWN0IHZob3N0X3ZyaW5nX3N0
YXRlKQo+ICsvKiBCeSBkZWZhdWx0LCBhIGRldmljZSBnZXRzIG9uZSB2aG9zdF93b3JrZXIgY3Jl
YXRlZCBkdXJpbmcgVkhPU1RfU0VUX09XTkVSCj4gKyAqIHRoYXQgaXRzIHZpcnRxdWV1ZXMgc2hh
cmUuIFRoaXMgYWxsb3dzIHVzZXJzcGFjZSB0byBjcmVhdGUgYSB2aG9zdF93b3JrZXIKPiArICog
YW5kIG1hcCBhIHZpcnRxdWV1ZSB0byBpdCBvciBtYXAgYSB2aXJ0cXVldWUgdG8gYW4gZXhpc3Rp
bmcgd29ya2VyLgo+ICsgKgo+ICsgKiBJZiBwaWQgPiAwIGFuZCBpdCBtYXRjaGVzIGFuIGV4aXN0
aW5nIHZob3N0X3dvcmtlciB0aHJlYWQgaXQgd2lsbCBiZSBib3VuZAo+ICsgKiB0byB0aGUgdnEu
IElmIHBpZCBpcyBWSE9TVF9WUklOR19ORVdfV09SS0VSLCB0aGVuIGEgbmV3IHdvcmtlciB3aWxs
IGJlCj4gKyAqIGNyZWF0ZWQgYW5kIGJvdW5kIHRvIHRoZSB2cS4KPiArICoKPiArICogVGhpcyBt
dXN0IGJlIGNhbGxlZCBhZnRlciBWSE9TVF9TRVRfT1dORVIgYW5kIGJlZm9yZSB0aGUgdnEgaXMg
YWN0aXZlLgo+ICsgKi8KPiArI2RlZmluZSBWSE9TVF9TRVRfVlJJTkdfV09SS0VSIF9JT1dSKFZI
T1NUX1ZJUlRJTywgMHgxNSwgc3RydWN0IHZob3N0X3ZyaW5nX3dvcmtlcikKPiAgIAo+ICAgLyog
VGhlIGZvbGxvd2luZyBpb2N0bHMgdXNlIGV2ZW50ZmQgZmlsZSBkZXNjcmlwdG9ycyB0byBzaWdu
YWwgYW5kIHBvbGwKPiAgICAqIGZvciBldmVudHMuICovCj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUv
dWFwaS9saW51eC92aG9zdF90eXBlcy5oIGIvaW5jbHVkZS91YXBpL2xpbnV4L3Zob3N0X3R5cGVz
LmgKPiBpbmRleCBmN2Y2YTNhMjg5NzcuLmFmNjU0ZTNjZWYwZSAxMDA2NDQKPiAtLS0gYS9pbmNs
dWRlL3VhcGkvbGludXgvdmhvc3RfdHlwZXMuaAo+ICsrKyBiL2luY2x1ZGUvdWFwaS9saW51eC92
aG9zdF90eXBlcy5oCj4gQEAgLTQ3LDYgKzQ3LDE4IEBAIHN0cnVjdCB2aG9zdF92cmluZ19hZGRy
IHsKPiAgIAlfX3U2NCBsb2dfZ3Vlc3RfYWRkcjsKPiAgIH07Cj4gICAKPiArI2RlZmluZSBWSE9T
VF9WUklOR19ORVdfV09SS0VSIC0xCgoKRG8gd2UgbmVlZCBWSE9TVF9WUklOR19GUkVFX1dPUktF
Uj8gQW5kIEkgd29uZGVyIGlmIHVzaW5nIGRlZGljYXRlZCAKaW9jdGxzIGFyZSBiZXR0ZXI6CgpW
SE9TVF9WUklOR19ORVcvRlJFRV9XT1JLRVIKVkhPU1RfVlJJTkdfQVRUQUNIX1dPUktFUgoKZXRj
LgoKVGhhbmtzCgoKPiArCj4gK3N0cnVjdCB2aG9zdF92cmluZ193b3JrZXIgewo+ICsJdW5zaWdu
ZWQgaW50IGluZGV4Owo+ICsJLyoKPiArCSAqIFRoZSBwaWQgb2YgdGhlIHZob3N0IHdvcmtlciB0
aGF0IHRoZSB2cSB3aWxsIGJlIGJvdW5kIHRvLiBJZgo+ICsJICogcGlkIGlzIFZIT1NUX1ZSSU5H
X05FV19XT1JLRVIgYSBuZXcgd29ya2VyIHdpbGwgYmUgY3JlYXRlZCBhbmQgaXRzCj4gKwkgKiBw
aWQgd2lsbCBiZSByZXR1cm5lZCBpbiBwaWQuCj4gKwkgKi8KPiArCV9fa2VybmVsX3BpZF90IHBp
ZDsKPiArfTsKPiArCj4gICAvKiBubyBhbGlnbm1lbnQgcmVxdWlyZW1lbnQgKi8KPiAgIHN0cnVj
dCB2aG9zdF9pb3RsYl9tc2cgewo+ICAgCV9fdTY0IGlvdmE7CgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpWaXJ0dWFsaXphdGlvbiBtYWlsaW5nIGxpc3QK
VmlydHVhbGl6YXRpb25AbGlzdHMubGludXgtZm91bmRhdGlvbi5vcmcKaHR0cHM6Ly9saXN0cy5s
aW51eGZvdW5kYXRpb24ub3JnL21haWxtYW4vbGlzdGluZm8vdmlydHVhbGl6YXRpb24=
