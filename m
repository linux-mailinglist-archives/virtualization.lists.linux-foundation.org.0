Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp4.osuosl.org (smtp4.osuosl.org [IPv6:2605:bc80:3010::137])
	by mail.lfdr.de (Postfix) with ESMTPS id 7219A707B6A
	for <lists.virtualization@lfdr.de>; Thu, 18 May 2023 09:54:32 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp4.osuosl.org (Postfix) with ESMTP id CC0F0418FE;
	Thu, 18 May 2023 07:54:30 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org CC0F0418FE
Authentication-Results: smtp4.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=ULEhz8Qy
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
	by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LrB9hVnnMdZb; Thu, 18 May 2023 07:54:29 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp4.osuosl.org (Postfix) with ESMTPS id 0082942813;
	Thu, 18 May 2023 07:54:28 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 0082942813
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 1E092C0089;
	Thu, 18 May 2023 07:54:28 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
 by lists.linuxfoundation.org (Postfix) with ESMTP id B2CF1C002A
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 07:54:26 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp3.osuosl.org (Postfix) with ESMTP id 8017060F0C
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 07:54:26 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 8017060F0C
Authentication-Results: smtp3.osuosl.org;
 dkim=pass (1024-bit key) header.d=redhat.com header.i=@redhat.com
 header.a=rsa-sha256 header.s=mimecast20190719 header.b=ULEhz8Qy
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
 by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id Nrj-gKtU6MNB
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 07:54:25 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 6C59960E5E
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp3.osuosl.org (Postfix) with ESMTPS id 6C59960E5E
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 07:54:25 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1684396464;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=kAx4v7H+dVCxCYMZIVqjVkwe2WFfr6gnPgrYeGZ/URE=;
 b=ULEhz8QyAZrgdBYAI3GhpdnVWxEUgovt4QkpEVDZ1NfUdAneQpJLI49T2gYA/2AR47LdLR
 ivfF9Mw2v7G7o3WH1u6SQTF02d+5AchqSbkR5LSx1jk5eW4br0XEb1qWnrrAugNjMsVkE1
 5mudhQMvJsgHwNIQ4pVcHZ8bKLSjlzA=
Received: from mail-lj1-f199.google.com (mail-lj1-f199.google.com
 [209.85.208.199]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-46-ti6YIBy4NUy8a-Ijf0sYKg-1; Thu, 18 May 2023 03:54:22 -0400
X-MC-Unique: ti6YIBy4NUy8a-Ijf0sYKg-1
Received: by mail-lj1-f199.google.com with SMTP id
 38308e7fff4ca-2ac8c5e4aafso7247631fa.1
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 00:54:22 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20221208; t=1684396461; x=1686988461;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=kAx4v7H+dVCxCYMZIVqjVkwe2WFfr6gnPgrYeGZ/URE=;
 b=Rtqe9T4T/XRs2jttEp1h6nAbmCfjhrbZBLA2LKf2MdCVH/z+YCR7LflRmbm5W/3136
 Ck/1FtujsUdhAA5kZa2opCrsYoyMyQRHTk/DZtgWUc76dfChCiZIJxpkHXo2FcBtlyrF
 ZG+RliCbeVN01R0cSsuocQZWMr/DOan3fs3l6ydMr6I1XF74j/Ato/DMpF0iKb3StdYb
 Q/vTdt/CSJE0RyteKwr5v956Xj6q+F0dzbl5kv8GvXrXcZB8HT82MCdZqFAiSQlmh+m6
 oumlI/F7S4RVa/LZSdUxRq9Cc08aJzVX5Bg2GoJAcXlrhICjLTGfrgfsIDSyvNUJ2Ys6
 JVpA==
X-Gm-Message-State: AC+VfDxak4OSdY2iBMTdDmPxksZLae26dFyaqTstBj3w3+pXCFAjnZtw
 UIJ+NSNYp6imZlTFWAy2XIHQjWdkg1tR+0EG0Q3ALCdJJa5diy6nsDF4ZLll9UE91F7rhW1KUJe
 ADc+IsKuO0+PFTP1lO1Ro75prGZ+bCuKacUipc5JG1oo132jAgK/h0lib2g==
X-Received: by 2002:a2e:9b94:0:b0:295:d7a8:559b with SMTP id
 z20-20020a2e9b94000000b00295d7a8559bmr1699742lji.10.1684396460930; 
 Thu, 18 May 2023 00:54:20 -0700 (PDT)
X-Google-Smtp-Source: ACHHUZ5EcbxbYlP+DIm9H3lORPb/+O38au4I10tzmJ34OQtXZGnRW4hp6wXlplqAxq/mjxTYxIHhgYRPBYtkni1Of+A=
X-Received: by 2002:a2e:9b94:0:b0:295:d7a8:559b with SMTP id
 z20-20020a2e9b94000000b00295d7a8559bmr1699734lji.10.1684396460559; Thu, 18
 May 2023 00:54:20 -0700 (PDT)
MIME-Version: 1.0
References: <20230517022249.20790-1-xuanzhuo@linux.alibaba.com>
 <20230517022249.20790-6-xuanzhuo@linux.alibaba.com>
 <CACGkMEu7+kDPiWmULXW_saW6pb5yF=gnqXRkSWcYbZCiJmszHQ@mail.gmail.com>
 <20230518030701-mutt-send-email-mst@kernel.org>
 <1684395232.2129312-1-xuanzhuo@linux.alibaba.com>
In-Reply-To: <1684395232.2129312-1-xuanzhuo@linux.alibaba.com>
From: Jason Wang <jasowang@redhat.com>
Date: Thu, 18 May 2023 15:54:09 +0800
Message-ID: <CACGkMEsgVnwgBiUnT3UfqKji3aNFEqhCXq6zpovjgKa5joAGtQ@mail.gmail.com>
Subject: Re: [PATCH vhost v9 05/12] virtio_ring: split: virtqueue_add_split()
 support premapped
To: Xuan Zhuo <xuanzhuo@linux.alibaba.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: Christoph Hellwig <hch@infradead.org>,
 virtualization@lists.linux-foundation.org,
 "Michael S. Tsirkin" <mst@redhat.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gVGh1LCBNYXkgMTgsIDIwMjMgYXQgMzo0MeKAr1BNIFh1YW4gWmh1byA8eHVhbnpodW9AbGlu
dXguYWxpYmFiYS5jb20+IHdyb3RlOgo+Cj4gT24gVGh1LCAxOCBNYXkgMjAyMyAwMzoxMToyNSAt
MDQwMCwgIk1pY2hhZWwgUy4gVHNpcmtpbiIgPG1zdEByZWRoYXQuY29tPiB3cm90ZToKPiA+IE9u
IFRodSwgTWF5IDE4LCAyMDIzIGF0IDAyOjUxOjU3UE0gKzA4MDAsIEphc29uIFdhbmcgd3JvdGU6
Cj4gPiA+IE9uIFdlZCwgTWF5IDE3LCAyMDIzIGF0IDEwOjIz4oCvQU0gWHVhbiBaaHVvIDx4dWFu
emh1b0BsaW51eC5hbGliYWJhLmNvbT4gd3JvdGU6Cj4gPiA+ID4KPiA+ID4gPiB2aXJ0cXVldWVf
YWRkX3NwbGl0KCkgb25seSBzdXBwb3J0cyB2aXJ0dWFsIGFkZHJlc3NlcywgZG1hIGlzIGNvbXBs
ZXRlZAo+ID4gPiA+IGluIHZpcnRxdWV1ZV9hZGRfc3BsaXQoKS4KPiA+ID4gPgo+ID4gPiA+IElu
IHNvbWUgc2NlbmFyaW9zIChzdWNoIGFzIHRoZSBBRl9YRFAgc2NlbmFyaW8pLCB0aGUgbWVtb3J5
IGlzIGFsbG9jYXRlZAo+ID4gPiA+IGFuZCBETUEgaXMgY29tcGxldGVkIGluIGFkdmFuY2UsIHNv
IGl0IGlzIG5lY2Vzc2FyeSBmb3IgdXMgdG8gc3VwcG9ydAo+ID4gPiA+IHBhc3NpbmcgdGhlIERN
QSBhZGRyZXNzIHRvIHZpcnRxdWV1ZV9hZGRfc3BsaXQoKS4KPiA+ID4gPgo+ID4gPiA+IFJlY29y
ZCB0aGlzIGluZm9ybWF0aW9uIGluIGRlc2Nfc3RhdGUsIHdlIGNhbiBza2lwIHVubWFwIGJhc2Vk
IG9uIHRoaXMKPiA+ID4gPiB3aGVuIGV4ZWN1dGluZyBkbWEgdW5tYXAuCj4gPiA+Cj4gPiA+IEkg
d291bGQgYWxzbyBzdWdnZXN0IGRvY3VtZW50aW5nIHdoeSBhIHBlciBkZXNjcmlwdG9yIG1ldGFk
YXRhIGlzCj4gPiA+IG5lZWRlZCBpbnN0ZWFkIG9mIGEgcGVyIHZpcnRxdWV1ZSBvbmUuCj4gPgo+
ID4gSSB0aGluayB3ZSBjb3VsZCBtYWtlIGl0IHBlciB2aXJ0cXVldWUuIFRoYXQgd291bGQgbWVh
biBhbGwgY29kZSBpbgo+ID4gdmlydGlvIG5ldCB3b3VsZCBoYXZlIHRvIGNoYW5nZSB0byBkbyBk
bWEgbWFwcGluZyBpdHNlbGYgaW5zdGVhZCBvZgo+ID4gcmVseWluZyBvbiB2aXJ0aW8gY29yZSB0
aG91Z2guICBXaGljaCBpcyBtYXliZSBhIGdvb2QgaWRlYT8gRGVmaW5pdGVseSBhCj4gPiB2ZXJ5
IGludHJ1c2l2ZSBjaGFuZ2UgdGhvdWdoLCB3aWxsIG5lZWQgYSBsb3Qgb2YgcGVyZm9ybWFuY2Ug
dGVzdGluZwo+ID4gdG8gbWFrZSBzdXJlIHdlIGRvbid0IGJyZWFrIGFueXRoaW5nLgo+Cj4gSW4g
ZmFjdCwgd2UgaGF2ZSB0cmllZCB0aGlzIGlkZWEuCj4KPiBUaGUgcHJvYmxlbSBpcyB0aGUgZGV0
YWNoIGFuZCB1bm1hcC4KPgo+IFdlIG5lZWQgdG8gZ2V0IGFsbCBETUEgQWRkcmVzc2VzIGZyb20g
dmlydGlvLXJpbmcgdG8gdW5tYXAuIEN1cnJlbnRseSwgaXQgZG9lcwo+IG5vdCBzdXBwb3J0IHRv
IHJldHVybiB0aGUgRE1BIEFkZHJlc3MsCgpJJ20gbm90IHN1cmUgSSBnb3QgaGVyZSwgYnV0IHdl
J3ZlIGFscmVhZHkgc3RvcmVkIHRoZSBETUEgYWRkcmVzcyBpbiBkZXNjX2V4dHJhPwoKPiBhbmQg
Zm9yIFNLQiwgd2UgbmVlZCB0byBnZXQgbXVsdGlwbGUgRE1BCj4gQWRkcmVzc2VzIGF0IG9uZSB0
aW1lLgoKQ291bGQgeW91IGVsYWJvcmF0ZSBvbiB0aGlzPwoKVGhhbmtzCgo+Cj4gVGhpcyBuZWVk
IHRvIG1vZGlmeSB0aGUgbG9naWMgb2YgVmlydGlvLVJpbmcgZGV0YWNoLiBCZXNpZGVzIHRoaXMs
IEkgYWxzbyBhZ3JlZQo+IHdpdGggdGhpcyBpZGVhLgo+Cj4gVGhhbmtzLgo+Cj4KPiA+Cj4gPgo+
ID4KPiA+Cj4gPiA+ID4KPiA+ID4gPiBTaWduZWQtb2ZmLWJ5OiBYdWFuIFpodW8gPHh1YW56aHVv
QGxpbnV4LmFsaWJhYmEuY29tPgo+ID4gPiA+IC0tLQo+ID4gPiA+ICBkcml2ZXJzL3ZpcnRpby92
aXJ0aW9fcmluZy5jIHwgMzggKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tCj4g
PiA+ID4gIDEgZmlsZSBjaGFuZ2VkLCAyOSBpbnNlcnRpb25zKCspLCA5IGRlbGV0aW9ucygtKQo+
ID4gPiA+Cj4gPiA+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19yaW5nLmMg
Yi9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fcmluZy5jCj4gPiA+ID4gaW5kZXggZTJmYzUwYzA1YmVj
Li5iZDVlODRhZmFiMzcgMTAwNjQ0Cj4gPiA+ID4gLS0tIGEvZHJpdmVycy92aXJ0aW8vdmlydGlv
X3JpbmcuYwo+ID4gPiA+ICsrKyBiL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19yaW5nLmMKPiA+ID4g
PiBAQCAtNzAsNiArNzAsNyBAQAo+ID4gPiA+ICBzdHJ1Y3QgdnJpbmdfZGVzY19zdGF0ZV9zcGxp
dCB7Cj4gPiA+ID4gICAgICAgICB2b2lkICpkYXRhOyAgICAgICAgICAgICAgICAgICAgIC8qIERh
dGEgZm9yIGNhbGxiYWNrLiAqLwo+ID4gPiA+ICAgICAgICAgc3RydWN0IHZyaW5nX2Rlc2MgKmlu
ZGlyX2Rlc2M7ICAvKiBJbmRpcmVjdCBkZXNjcmlwdG9yLCBpZiBhbnkuICovCj4gPiA+ID4gKyAg
ICAgICBib29sIHByZW1hcHBlZDsgICAgICAgICAgICAgICAgIC8qIERNQSBtYXBwaW5nIGlzIGRv
bmUgYnkgZHJpdmVyLiAqLwo+ID4gPgo+ID4gPiBHb2luZyBiYWNrIHRvIHRoZSBvcmlnaW5hbCBk
aXNjdXNzaW9uIGFyb3VuZCB3aGVyZSB0aGlzIHNob3VsZCBiZQo+ID4gPiBwbGFjZWQuIEkgd29u
ZGVyIGlmIHdlIGNhbiBmaW5kIGEgY29tbW9uIHBsYWNlIHRvIHN0b3JlIHRoaXMgc2luY2UgaXQK
PiA+ID4gaGFzIG5vdGhpbmcgcmVsYXRlZCB0byB2aXJ0cXVldWUgbGF5b3V0LiBNYXliZSBkZXNj
X2V4dHJhPyBBbmQgaXQKPiA+ID4gd291bGQgYmUgZXZlbiBiZXR0ZXIgaWYgd2UgY2FuIGF2b2lk
IHN0cmVzc2luZyB0aGUgY2FjaGUgbGlrZSBhYm92ZS4KPiA+ID4KPiA+ID4gPiAgfTsKPiA+ID4g
Pgo+ID4gPiA+ICBzdHJ1Y3QgdnJpbmdfZGVzY19zdGF0ZV9wYWNrZWQgewo+ID4gPiA+IEBAIC0z
NTYsOCArMzU3LDE0IEBAIHN0YXRpYyBzdHJ1Y3QgZGV2aWNlICp2cmluZ19kbWFfZGV2KGNvbnN0
IHN0cnVjdCB2cmluZ192aXJ0cXVldWUgKnZxKQo+ID4gPiA+Cj4gPiA+ID4gIC8qIE1hcCBvbmUg
c2cgZW50cnkuICovCj4gPiA+ID4gIHN0YXRpYyBpbnQgdnJpbmdfbWFwX29uZV9zZyhjb25zdCBz
dHJ1Y3QgdnJpbmdfdmlydHF1ZXVlICp2cSwgc3RydWN0IHNjYXR0ZXJsaXN0ICpzZywKPiA+ID4g
PiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGly
ZWN0aW9uLCBzdGF0aWMgZG1hX2FkZHJfdCAqYWRkcikKPiA+ID4gPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyZWN0aW9uLAo+ID4gPiA+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHByZW1hcHBlZCwgZG1hX2FkZHJfdCAqYWRk
cikKPiA+ID4KPiA+ID4gaGF2aW5nIHRoaW5ncyBsaWtlOgo+ID4gPgo+ID4gPiBpbnQgZnVuYyhi
b29sIGRvKQo+ID4gPiB7Cj4gPiA+IGlmICghZG8pCj4gPiA+ICAgICByZXR1cm47Cj4gPiA+IH0K
PiA+ID4KPiA+ID4gaXMgYSBoaW50IHRoYXQgdGhlIGNoZWNrIG5lZWRzIHRvIGJlIGRvbmUgYnkg
dGhlIGNhbGxlcj8KPiA+ID4KPiA+ID4gQW5kIHRoaXMgY2hhbmdlIHNob3VsZCB3b3JrIGZvciBi
b3RoIHBhY2tlZCBhbmQgc3BsaXQuIEkgdGhpbmsgd2UgbmVlZAo+ID4gPiB0byBzcXVhc2ggdGhl
IHBhY2tlZCBjaGFuZ2VzIGhlcmUuCj4gPiA+Cj4gPiA+IExvb2tpbmcgYXQgaG93IHBhY2tlZCB2
aXJ0cXVldWUgdXNlcyB0aGlzIGluIHRoaXMgcGF0Y2gsIEkgZG9uJ3QgdGhpbmsKPiA+ID4gdGhp
cyBwYXRjaCBjYW4gZXZlbiBiZSBidWlsdC4gSSB3aWxsIHdhaXQgZm9yIGEgbmV3IHZlcnNpb24g
YW5kCj4gPiA+IGNvbnRpbnVlIHRoZSByZXZpZXcgZnJvbSB0aGVyZS4KPiA+ID4KPiA+ID4gVGhh
bmtzCj4gPiA+Cj4gPiA+Cj4gPiA+Cj4gPiA+ID4gIHsKPiA+ID4gPiArICAgICAgIGlmIChwcmVt
YXBwZWQpIHsKPiA+ID4gPiArICAgICAgICAgICAgICAgKmFkZHIgPSBzZ19kbWFfYWRkcmVzcyhz
Zyk7Cj4gPiA+ID4gKyAgICAgICAgICAgICAgIHJldHVybiAwOwo+ID4gPiA+ICsgICAgICAgfQo+
ID4gPiA+ICsKPiA+ID4gPiAgICAgICAgIGlmICghdnEtPnVzZV9kbWFfYXBpKSB7Cj4gPiA+ID4g
ICAgICAgICAgICAgICAgIC8qCj4gPiA+ID4gICAgICAgICAgICAgICAgICAqIElmIERNQSBpcyBu
b3QgdXNlZCwgS01TQU4gZG9lc24ndCBrbm93IHRoYXQgdGhlIHNjYXR0ZXJsaXN0Cj4gPiA+ID4g
QEAgLTQ0NSw3ICs0NTIsNyBAQCBzdGF0aWMgdm9pZCB2cmluZ191bm1hcF9vbmVfc3BsaXRfaW5k
aXJlY3QoY29uc3Qgc3RydWN0IHZyaW5nX3ZpcnRxdWV1ZSAqdnEsCj4gPiA+ID4gIH0KPiA+ID4g
Pgo+ID4gPiA+ICBzdGF0aWMgdW5zaWduZWQgaW50IHZyaW5nX3VubWFwX29uZV9zcGxpdChjb25z
dCBzdHJ1Y3QgdnJpbmdfdmlydHF1ZXVlICp2cSwKPiA+ID4gPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgaSkKPiA+ID4gPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgaSwgYm9vbCBwcmVt
YXBwZWQpCj4gPiA+ID4gIHsKPiA+ID4gPiAgICAgICAgIHN0cnVjdCB2cmluZ19kZXNjX2V4dHJh
ICpleHRyYSA9IHZxLT5zcGxpdC5kZXNjX2V4dHJhOwo+ID4gPiA+ICAgICAgICAgdTE2IGZsYWdz
Owo+ID4gPiA+IEBAIC00NjIsNiArNDY5LDkgQEAgc3RhdGljIHVuc2lnbmVkIGludCB2cmluZ191
bm1hcF9vbmVfc3BsaXQoY29uc3Qgc3RydWN0IHZyaW5nX3ZpcnRxdWV1ZSAqdnEsCj4gPiA+ID4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZsYWdzICYgVlJJTkdfREVTQ19GX1dS
SVRFKSA/Cj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRE1BX0ZST01f
REVWSUNFIDogRE1BX1RPX0RFVklDRSk7Cj4gPiA+ID4gICAgICAgICB9IGVsc2Ugewo+ID4gPiA+
ICsgICAgICAgICAgICAgICBpZiAocHJlbWFwcGVkKQo+ID4gPiA+ICsgICAgICAgICAgICAgICAg
ICAgICAgIGdvdG8gb3V0Owo+ID4gPiA+ICsKPiA+ID4gPiAgICAgICAgICAgICAgICAgZG1hX3Vu
bWFwX3BhZ2UodnJpbmdfZG1hX2Rldih2cSksCj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGV4dHJhW2ldLmFkZHIsCj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGV4dHJhW2ldLmxlbiwKPiA+ID4gPiBAQCAtNTMyLDYgKzU0Miw3IEBAIHN0YXRpYyBp
bmxpbmUgaW50IHZpcnRxdWV1ZV9hZGRfc3BsaXQoc3RydWN0IHZpcnRxdWV1ZSAqX3ZxLAo+ID4g
PiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGlu
X3NncywKPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQg
KmRhdGEsCj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lk
ICpjdHgsCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29s
IHByZW1hcHBlZCwKPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGdmcF90IGdmcCkKPiA+ID4gPiAgewo+ID4gPiA+ICAgICAgICAgc3RydWN0IHZyaW5nX3ZpcnRx
dWV1ZSAqdnEgPSB0b192dnEoX3ZxKTsKPiA+ID4gPiBAQCAtNTk1LDcgKzYwNiw3IEBAIHN0YXRp
YyBpbmxpbmUgaW50IHZpcnRxdWV1ZV9hZGRfc3BsaXQoc3RydWN0IHZpcnRxdWV1ZSAqX3ZxLAo+
ID4gPiA+ICAgICAgICAgICAgICAgICBmb3IgKHNnID0gc2dzW25dOyBzZzsgc2cgPSBzZ19uZXh0
KHNnKSkgewo+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgIGRtYV9hZGRyX3QgYWRkcjsK
PiA+ID4gPgo+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIGlmICh2cmluZ19tYXBfb25l
X3NnKHZxLCBzZywgRE1BX1RPX0RFVklDRSwgJmFkZHIpKQo+ID4gPiA+ICsgICAgICAgICAgICAg
ICAgICAgICAgIGlmICh2cmluZ19tYXBfb25lX3NnKHZxLCBzZywgRE1BX1RPX0RFVklDRSwgcHJl
bWFwcGVkLCAmYWRkcikpCj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBn
b3RvIHVubWFwX3JlbGVhc2U7Cj4gPiA+ID4KPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAg
ICBwcmV2ID0gaTsKPiA+ID4gPiBAQCAtNjExLDcgKzYyMiw3IEBAIHN0YXRpYyBpbmxpbmUgaW50
IHZpcnRxdWV1ZV9hZGRfc3BsaXQoc3RydWN0IHZpcnRxdWV1ZSAqX3ZxLAo+ID4gPiA+ICAgICAg
ICAgICAgICAgICBmb3IgKHNnID0gc2dzW25dOyBzZzsgc2cgPSBzZ19uZXh0KHNnKSkgewo+ID4g
PiA+ICAgICAgICAgICAgICAgICAgICAgICAgIGRtYV9hZGRyX3QgYWRkcjsKPiA+ID4gPgo+ID4g
PiA+IC0gICAgICAgICAgICAgICAgICAgICAgIGlmICh2cmluZ19tYXBfb25lX3NnKHZxLCBzZywg
RE1BX0ZST01fREVWSUNFLCAmYWRkcikpCj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
aWYgKHZyaW5nX21hcF9vbmVfc2codnEsIHNnLCBETUFfRlJPTV9ERVZJQ0UsIHByZW1hcHBlZCwg
JmFkZHIpKQo+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byB1bm1h
cF9yZWxlYXNlOwo+ID4gPiA+Cj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9
IGk7Cj4gPiA+ID4gQEAgLTY1Nyw2ICs2NjgsNyBAQCBzdGF0aWMgaW5saW5lIGludCB2aXJ0cXVl
dWVfYWRkX3NwbGl0KHN0cnVjdCB2aXJ0cXVldWUgKl92cSwKPiA+ID4gPgo+ID4gPiA+ICAgICAg
ICAgLyogU3RvcmUgdG9rZW4gYW5kIGluZGlyZWN0IGJ1ZmZlciBzdGF0ZS4gKi8KPiA+ID4gPiAg
ICAgICAgIHZxLT5zcGxpdC5kZXNjX3N0YXRlW2hlYWRdLmRhdGEgPSBkYXRhOwo+ID4gPiA+ICsg
ICAgICAgdnEtPnNwbGl0LmRlc2Nfc3RhdGVbaGVhZF0ucHJlbWFwcGVkID0gcHJlbWFwcGVkOwo+
ID4gPiA+ICAgICAgICAgaWYgKGluZGlyZWN0KQo+ID4gPiA+ICAgICAgICAgICAgICAgICB2cS0+
c3BsaXQuZGVzY19zdGF0ZVtoZWFkXS5pbmRpcl9kZXNjID0gZGVzYzsKPiA+ID4gPiAgICAgICAg
IGVsc2UKPiA+ID4gPiBAQCAtNjg2LDYgKzY5OCwxNCBAQCBzdGF0aWMgaW5saW5lIGludCB2aXJ0
cXVldWVfYWRkX3NwbGl0KHN0cnVjdCB2aXJ0cXVldWUgKl92cSwKPiA+ID4gPiAgICAgICAgIHJl
dHVybiAwOwo+ID4gPiA+Cj4gPiA+ID4gIHVubWFwX3JlbGVhc2U6Cj4gPiA+ID4gKyAgICAgICBp
ZiAocHJlbWFwcGVkKSB7Cj4gPiA+ID4gKyAgICAgICAgICAgICAgIGlmIChpbmRpcmVjdCkKPiA+
ID4gPiArICAgICAgICAgICAgICAgICAgICAgICBrZnJlZShkZXNjKTsKPiA+ID4gPiArCj4gPiA+
ID4gKyAgICAgICAgICAgICAgIEVORF9VU0UodnEpOwo+ID4gPiA+ICsgICAgICAgICAgICAgICBy
ZXR1cm4gLUVOT01FTTsKPiA+ID4gPiArICAgICAgIH0KPiA+ID4gPiArCj4gPiA+ID4gICAgICAg
ICBlcnJfaWR4ID0gaTsKPiA+ID4gPgo+ID4gPiA+ICAgICAgICAgaWYgKGluZGlyZWN0KQo+ID4g
PiA+IEBAIC03MDAsNyArNzIwLDcgQEAgc3RhdGljIGlubGluZSBpbnQgdmlydHF1ZXVlX2FkZF9z
cGxpdChzdHJ1Y3QgdmlydHF1ZXVlICpfdnEsCj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAg
ICAgdnJpbmdfdW5tYXBfb25lX3NwbGl0X2luZGlyZWN0KHZxLCAmZGVzY1tpXSk7Cj4gPiA+ID4g
ICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHZpcnRpbzE2X3RvX2NwdShfdnEtPnZkZXYsIGRl
c2NbaV0ubmV4dCk7Cj4gPiA+ID4gICAgICAgICAgICAgICAgIH0gZWxzZQo+ID4gPiA+IC0gICAg
ICAgICAgICAgICAgICAgICAgIGkgPSB2cmluZ191bm1hcF9vbmVfc3BsaXQodnEsIGkpOwo+ID4g
PiA+ICsgICAgICAgICAgICAgICAgICAgICAgIGkgPSB2cmluZ191bm1hcF9vbmVfc3BsaXQodnEs
IGksIGZhbHNlKTsKPiA+ID4gPiAgICAgICAgIH0KPiA+ID4gPgo+ID4gPiA+ICAgICAgICAgaWYg
KGluZGlyZWN0KQo+ID4gPiA+IEBAIC03NTcsMTIgKzc3NywxMiBAQCBzdGF0aWMgdm9pZCBkZXRh
Y2hfYnVmX3NwbGl0KHN0cnVjdCB2cmluZ192aXJ0cXVldWUgKnZxLCB1bnNpZ25lZCBpbnQgaGVh
ZCwKPiA+ID4gPiAgICAgICAgIGkgPSBoZWFkOwo+ID4gPiA+Cj4gPiA+ID4gICAgICAgICB3aGls
ZSAodnEtPnNwbGl0LnZyaW5nLmRlc2NbaV0uZmxhZ3MgJiBuZXh0ZmxhZykgewo+ID4gPiA+IC0g
ICAgICAgICAgICAgICB2cmluZ191bm1hcF9vbmVfc3BsaXQodnEsIGkpOwo+ID4gPiA+ICsgICAg
ICAgICAgICAgICB2cmluZ191bm1hcF9vbmVfc3BsaXQodnEsIGksIHN0YXRlLT5wcmVtYXBwZWQp
Owo+ID4gPiA+ICAgICAgICAgICAgICAgICBpID0gdnEtPnNwbGl0LmRlc2NfZXh0cmFbaV0ubmV4
dDsKPiA+ID4gPiAgICAgICAgICAgICAgICAgdnEtPnZxLm51bV9mcmVlKys7Cj4gPiA+ID4gICAg
ICAgICB9Cj4gPiA+ID4KPiA+ID4gPiAtICAgICAgIHZyaW5nX3VubWFwX29uZV9zcGxpdCh2cSwg
aSk7Cj4gPiA+ID4gKyAgICAgICB2cmluZ191bm1hcF9vbmVfc3BsaXQodnEsIGksIHN0YXRlLT5w
cmVtYXBwZWQpOwo+ID4gPiA+ICAgICAgICAgdnEtPnNwbGl0LmRlc2NfZXh0cmFbaV0ubmV4dCA9
IHZxLT5mcmVlX2hlYWQ7Cj4gPiA+ID4gICAgICAgICB2cS0+ZnJlZV9oZWFkID0gaGVhZDsKPiA+
ID4gPgo+ID4gPiA+IEBAIC03ODMsNyArODAzLDcgQEAgc3RhdGljIHZvaWQgZGV0YWNoX2J1Zl9z
cGxpdChzdHJ1Y3QgdnJpbmdfdmlydHF1ZXVlICp2cSwgdW5zaWduZWQgaW50IGhlYWQsCj4gPiA+
ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWUklOR19ERVNDX0ZfSU5ESVJFQ1Qp
KTsKPiA+ID4gPiAgICAgICAgICAgICAgICAgQlVHX09OKGxlbiA9PSAwIHx8IGxlbiAlIHNpemVv
ZihzdHJ1Y3QgdnJpbmdfZGVzYykpOwo+ID4gPiA+Cj4gPiA+ID4gLSAgICAgICAgICAgICAgIGlm
ICh2cS0+dXNlX2RtYV9hcGkpIHsKPiA+ID4gPiArICAgICAgICAgICAgICAgaWYgKHZxLT51c2Vf
ZG1hX2FwaSAmJiAhc3RhdGUtPnByZW1hcHBlZCkgewo+ID4gPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW4gLyBzaXplb2Yoc3RydWN0IHZyaW5nX2Rlc2MpOyBq
KyspCj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2cmluZ191bm1hcF9v
bmVfc3BsaXRfaW5kaXJlY3QodnEsICZpbmRpcl9kZXNjW2pdKTsKPiA+ID4gPiAgICAgICAgICAg
ICAgICAgfQo+ID4gPiA+IEBAIC0yMTQzLDcgKzIxNjMsNyBAQCBzdGF0aWMgaW5saW5lIGludCB2
aXJ0cXVldWVfYWRkKHN0cnVjdCB2aXJ0cXVldWUgKl92cSwKPiA+ID4gPiAgICAgICAgIHJldHVy
biB2cS0+cGFja2VkX3JpbmcgPyB2aXJ0cXVldWVfYWRkX3BhY2tlZChfdnEsIHNncywgdG90YWxf
c2csCj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dF9z
Z3MsIGluX3NncywgZGF0YSwgY3R4LCBnZnApIDoKPiA+ID4gPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB2aXJ0cXVldWVfYWRkX3NwbGl0KF92cSwgc2dzLCB0b3RhbF9zZywKPiA+
ID4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0X3NncywgaW5f
c2dzLCBkYXRhLCBjdHgsIGdmcCk7Cj4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIG91dF9zZ3MsIGluX3NncywgZGF0YSwgY3R4LCBwcmVtYXBwZWQsIGdmcCk7
Cj4gPiA+ID4gIH0KPiA+ID4gPgo+ID4gPiA+ICAvKioKPiA+ID4gPiAtLQo+ID4gPiA+IDIuMzIu
MC4zLmcwMTE5NWNmOWYKPiA+ID4gPgo+ID4KPgoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KVmlydHVhbGl6YXRpb24gbWFpbGluZyBsaXN0ClZpcnR1YWxp
emF0aW9uQGxpc3RzLmxpbnV4LWZvdW5kYXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGludXhmb3Vu
ZGF0aW9uLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3ZpcnR1YWxpemF0aW9u
