Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp3.osuosl.org (smtp3.osuosl.org [140.211.166.136])
	by mail.lfdr.de (Postfix) with ESMTPS id 666C16D3CDC
	for <lists.virtualization@lfdr.de>; Mon,  3 Apr 2023 07:25:35 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp3.osuosl.org (Postfix) with ESMTP id C12FB60DF4;
	Mon,  3 Apr 2023 05:25:33 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org C12FB60DF4
Authentication-Results: smtp3.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=cfz4sK/p
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
	by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id W4YFO-yNARek; Mon,  3 Apr 2023 05:25:32 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp3.osuosl.org (Postfix) with ESMTPS id 7CDF160E27;
	Mon,  3 Apr 2023 05:25:31 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 7CDF160E27
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id A40CFC0089;
	Mon,  3 Apr 2023 05:25:30 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp3.osuosl.org (smtp3.osuosl.org [140.211.166.136])
 by lists.linuxfoundation.org (Postfix) with ESMTP id DA566C002F
 for <virtualization@lists.linux-foundation.org>;
 Mon,  3 Apr 2023 05:25:28 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp3.osuosl.org (Postfix) with ESMTP id AEB6B60DF4
 for <virtualization@lists.linux-foundation.org>;
 Mon,  3 Apr 2023 05:25:28 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org AEB6B60DF4
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
 by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id hPVxZOtcQ7r4
 for <virtualization@lists.linux-foundation.org>;
 Mon,  3 Apr 2023 05:25:27 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 475D160DA5
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp3.osuosl.org (Postfix) with ESMTPS id 475D160DA5
 for <virtualization@lists.linux-foundation.org>;
 Mon,  3 Apr 2023 05:25:27 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1680499526;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=HTyHONi0pXv605o6c5ZY13kBmf7p2H/kt+yk2LOyX74=;
 b=cfz4sK/p8hItAGNj5hfF4MRREAL/ual+OGlW4iX9qerTUkUWobSbXIZsGWZEAQaJl/wR1m
 ooaZEbFvAcFNXysQd30AUCaodEJ5tevfMNZv/Nv4o9eGmvPFyvX5q1XYzk9kU5yQARidC6
 utBpFlJEgaC81DN3xi7mmJmV3Af5d/4=
Received: from mail-oa1-f69.google.com (mail-oa1-f69.google.com
 [209.85.160.69]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-144-Bc5PU-TqNAKbX-CDSrV8EA-1; Mon, 03 Apr 2023 01:25:24 -0400
X-MC-Unique: Bc5PU-TqNAKbX-CDSrV8EA-1
Received: by mail-oa1-f69.google.com with SMTP id
 586e51a60fabf-17e11dd9a3dso15055887fac.10
 for <virtualization@lists.linux-foundation.org>;
 Sun, 02 Apr 2023 22:25:24 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112; t=1680499524; x=1683091524;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=HTyHONi0pXv605o6c5ZY13kBmf7p2H/kt+yk2LOyX74=;
 b=gK9H5/XqOSJ/YwUH+1uV2lvXnV1mQcVSPr4xmdSE8dmL7B5eHMadcPKjehNv8tvO6q
 whz+glw9tSAwR0Vby1Ns13X1NqI8jdRHS8250NLp+zEhohGYqJzPHTunFlcvtPVVv2dw
 Rkch1RUnDJHqrKjHvhmTn0hCrds2V+jXl/n8G3yR+QMGGmWt+ZJ35/dFnr6rJJPyJvBM
 tc2pVbIh9rGLAPmc4pNS8dK8dzYrpAWgSqR84TQRu7TCEoNHwctAh2QB/dOhCN93egVD
 9IpPyM5mxjNhQXdiWZ4Wf5i17dP+VXk5V0jUXJNFE4d3JAB9SoDoxQTaej//aSumhhy/
 1QiA==
X-Gm-Message-State: AAQBX9fCKZfBSFAoEX6w2zlpyaNsH3llJGH4Ty94B+yZvEnIR0GmDUpg
 /XK2Jdy3ezN1w17EhEhVBquGo1n+s8staVgKHuN/xjyC5fhYxC/ran1D7y1df8zwOsaDb19/D+F
 lCzJduXlM1vuXrXwUoHUrxQ71ZYQ28l/f5lTTjhsZNmFhXFsTHOe49jMM6Q==
X-Received: by 2002:a05:6870:57:b0:17e:e396:cce0 with SMTP id
 23-20020a056870005700b0017ee396cce0mr11424165oaz.9.1680499523853; 
 Sun, 02 Apr 2023 22:25:23 -0700 (PDT)
X-Google-Smtp-Source: AK7set/i2GmFaqFkTbC/AEj1/uApWPnRNFCneABL4ToBc4K0hihlVJkf5105SsDe8e9xyrMbmN5OSKluYyeHoZ5x+6Q=
X-Received: by 2002:a05:6870:57:b0:17e:e396:cce0 with SMTP id
 23-20020a056870005700b0017ee396cce0mr11424161oaz.9.1680499523544; Sun, 02 Apr
 2023 22:25:23 -0700 (PDT)
MIME-Version: 1.0
References: <20230402125219.1084754-1-alvaro.karsz@solid-run.com>
 <20230402125219.1084754-2-alvaro.karsz@solid-run.com>
In-Reply-To: <20230402125219.1084754-2-alvaro.karsz@solid-run.com>
From: Jason Wang <jasowang@redhat.com>
Date: Mon, 3 Apr 2023 13:25:12 +0800
Message-ID: <CACGkMEuQpJyQNuYTs2TwCc8SmvynbVwqtcZnF2EEzPEBQnpo5w@mail.gmail.com>
Subject: Re: [PATCH resend 1/2] vdpa/snet: support getting and setting VQ state
To: Alvaro Karsz <alvaro.karsz@solid-run.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: virtualization@lists.linux-foundation.org, mst@redhat.com
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gU3VuLCBBcHIgMiwgMjAyMyBhdCA4OjUy4oCvUE0gQWx2YXJvIEthcnN6IDxhbHZhcm8ua2Fy
c3pAc29saWQtcnVuLmNvbT4gd3JvdGU6Cj4KPiBUaGlzIHBhdGNoIGFkZHMgdGhlIGdldF92cV9z
dGF0ZSBhbmQgc2V0X3ZxX3N0YXRlIHZEUEEgY2FsbGJhY2tzLgo+Cj4gSW4gb3JkZXIgdG8gZ2V0
IHRoZSBWUSBzdGF0ZSwgdGhlIHN0YXRlIG5lZWRzIHRvIGJlIHJlYWQgZnJvbSB0aGUgRFBVLgo+
IEluIG9yZGVyIHRvIGFsbG93IHRoYXQsIHRoZSBvbGQgbWVzc2FnaW5nIG1lY2hhbmlzbSBpcyBy
ZXBsYWNlZCB3aXRoIGEgbmV3LAo+IGZsZXhpYmxlIGNvbnRyb2wgbWVjaGFuaXNtLgo+IFRoaXMg
bWVjaGFuaXNtIGFsbG93cyB0byByZWFkIGRhdGEgZnJvbSB0aGUgRFBVLgo+Cj4gVGhlIG1lY2hh
bmlzbSBjYW4gYmUgdXNlZCBpZiB0aGUgbmVnb3RpYXRlZCBjb25maWcgdmVyc2lvbiBpcyAyIG9y
Cj4gaGlnaGVyLgo+Cj4gSWYgdGhlIG5ldyBtZWNoYW5pc20gaXMgdXNlZCB3aGVuIHRoZSBjb25m
aWcgdmVyc2lvbiBpcyAxLCBpdCB3aWxsIGNhbGwKPiBzbmV0X3NlbmRfY3RybF9tc2dfb2xkLCB3
aGljaCBpcyBjb25maWcgMSBjb21wYXRpYmxlLgo+Cj4gU2lnbmVkLW9mZi1ieTogQWx2YXJvIEth
cnN6IDxhbHZhcm8ua2Fyc3pAc29saWQtcnVuLmNvbT4KPiAtLS0KPiAgZHJpdmVycy92ZHBhL3Nv
bGlkcnVuL01ha2VmaWxlICAgICB8ICAgMSArCj4gIGRyaXZlcnMvdmRwYS9zb2xpZHJ1bi9zbmV0
X2N0cmwuYyAgfCAzMTggKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKPiAgZHJpdmVycy92
ZHBhL3NvbGlkcnVuL3NuZXRfaHdtb24uYyB8ICAgMiArLQo+ICBkcml2ZXJzL3ZkcGEvc29saWRy
dW4vc25ldF9tYWluLmMgIHwgMTExICsrKystLS0tLS0KPiAgZHJpdmVycy92ZHBhL3NvbGlkcnVu
L3NuZXRfdmRwYS5oICB8ICAxNyArLQo+ICA1IGZpbGVzIGNoYW5nZWQsIDM3OCBpbnNlcnRpb25z
KCspLCA3MSBkZWxldGlvbnMoLSkKPiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvdmRwYS9z
b2xpZHJ1bi9zbmV0X2N0cmwuYwo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmRwYS9zb2xpZHJ1
bi9NYWtlZmlsZSBiL2RyaXZlcnMvdmRwYS9zb2xpZHJ1bi9NYWtlZmlsZQo+IGluZGV4IGMwYWEz
NDE1YmY3Li45MTE2MjUyY2Q1ZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZkcGEvc29saWRydW4v
TWFrZWZpbGUKPiArKysgYi9kcml2ZXJzL3ZkcGEvc29saWRydW4vTWFrZWZpbGUKPiBAQCAtMSw2
ICsxLDcgQEAKPiAgIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMAo+ICBvYmotJChD
T05GSUdfU05FVF9WRFBBKSArPSBzbmV0X3ZkcGEubwo+ICBzbmV0X3ZkcGEtJChDT05GSUdfU05F
VF9WRFBBKSArPSBzbmV0X21haW4ubwo+ICtzbmV0X3ZkcGEtJChDT05GSUdfU05FVF9WRFBBKSAr
PSBzbmV0X2N0cmwubwo+ICBpZmRlZiBDT05GSUdfSFdNT04KPiAgc25ldF92ZHBhLSQoQ09ORklH
X1NORVRfVkRQQSkgKz0gc25ldF9od21vbi5vCj4gIGVuZGlmCj4gZGlmZiAtLWdpdCBhL2RyaXZl
cnMvdmRwYS9zb2xpZHJ1bi9zbmV0X2N0cmwuYyBiL2RyaXZlcnMvdmRwYS9zb2xpZHJ1bi9zbmV0
X2N0cmwuYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAuLjU0OTA5
NTQ5YTAwCj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZlcnMvdmRwYS9zb2xpZHJ1bi9zbmV0
X2N0cmwuYwo+IEBAIC0wLDAgKzEsMzE4IEBACj4gKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVy
OiBHUEwtMi4wLW9ubHkKPiArLyoKPiArICogU29saWRSdW4gRFBVIGRyaXZlciBmb3IgY29udHJv
bCBwbGFuZQo+ICsgKgo+ICsgKiBDb3B5cmlnaHQgKEMpIDIwMjItMjAyMyBTb2xpZFJ1bgo+ICsg
Kgo+ICsgKiBBdXRob3I6IEFsdmFybyBLYXJzeiA8YWx2YXJvLmthcnN6QHNvbGlkLXJ1bi5jb20+
Cj4gKyAqCj4gKyAqLwo+ICsKPiArI2luY2x1ZGUgPGxpbnV4L2lvcG9sbC5oPgo+ICsKPiArI2lu
Y2x1ZGUgInNuZXRfdmRwYS5oIgo+ICsKPiArZW51bSBzbmV0X2N0cmxfb3Bjb2RlcyB7Cj4gKyAg
ICAgICBTTkVUX0NUUkxfT1BfREVTVFJPWSA9IDEsCj4gKyAgICAgICBTTkVUX0NUUkxfT1BfUkVB
RF9WUV9TVEFURSwKPiArfTsKPiArCj4gKyNkZWZpbmUgU05FVF9DVFJMX1RJTUVPVVQgICAgICAg
ICAgICAgIDIwMDAwMDAKPiArCj4gKyNkZWZpbmUgU05FVF9DVFJMX0RBVEFfU0laRV9NQVNLICAg
ICAgIDB4MDAwMEZGRkYKPiArI2RlZmluZSBTTkVUX0NUUkxfSU5fUFJPQ0VTU19NQVNLICAgICAg
MHgwMDAxMDAwMAo+ICsjZGVmaW5lIFNORVRfQ1RSTF9DSFVOS19SRFlfTUFTSyAgICAgICAweDAw
MDIwMDAwCj4gKyNkZWZpbmUgU05FVF9DVFJMX0VSUk9SX01BU0sgICAgICAgICAgIDB4MEZGQzAw
MDAKPiArCj4gKyNkZWZpbmUgU05FVF9WQUxfVE9fRVJSKHZhbCkgICAgICAgICAgICgtKCgodmFs
KSAmIFNORVRfQ1RSTF9FUlJPUl9NQVNLKSA+PiAxOCkpCj4gKyNkZWZpbmUgU05FVF9FTVBUWV9D
VFJMKHZhbCkgICAgICAgICAgICgoKHZhbCkgJiBTTkVUX0NUUkxfRVJST1JfTUFTSykgfHwgXAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEoKHZhbCkg
JiBTTkVUX0NUUkxfSU5fUFJPQ0VTU19NQVNLKSkKPiArI2RlZmluZSBTTkVUX0RBVEFfUkVBRFko
dmFsKSAgICAgICAgICAgKCh2YWwpICYgKFNORVRfQ1RSTF9FUlJPUl9NQVNLIHwgU05FVF9DVFJM
X0NIVU5LX1JEWV9NQVNLKSkKPiArCj4gKy8qIENvbnRyb2wgcmVnaXN0ZXIgdXNlZCB0byByZWFk
IGRhdGEgZnJvbSB0aGUgRFBVICovCj4gK3N0cnVjdCBzbmV0X2N0cmxfcmVnX2N0cmwgewo+ICsg
ICAgICAgLyogQ2h1bmsgc2l6ZSBpbiA0QiB3b3JkcyAqLwo+ICsgICAgICAgdTE2IGRhdGFfc2l6
ZTsKPiArICAgICAgIC8qIFdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGEgY29tbWFuZCAqLwo+ICsg
ICAgICAgdTE2IGluX3Byb2Nlc3M6MTsKPiArICAgICAgIC8qIEEgZGF0YSBjaHVuayBpcyByZWFk
eSBhbmQgY2FuIGJlIGNvbnN1bWVkICovCj4gKyAgICAgICB1MTYgY2h1bmtfcmVhZHk6MTsKPiAr
ICAgICAgIC8qIEVycm9yIGNvZGUgKi8KPiArICAgICAgIHUxNiBlcnJvcjoxMDsKPiArICAgICAg
IC8qIFNhdmVkIGZvciBmdXR1cmUgdXNhZ2UgKi8KPiArICAgICAgIHUxNiByc3ZkOjQ7Cj4gK307
Cj4gKwo+ICsvKiBPcGNvZGUgcmVnaXN0ZXIgKi8KPiArc3RydWN0IHNuZXRfY3RybF9yZWdfb3Ag
ewo+ICsgICAgICAgdTE2IG9wY29kZTsKPiArICAgICAgIC8qIE9ubHkgaWYgVlEgaW5kZXggaXMg
cmVsZXZhbnQgZm9yIHRoZSBjb21tYW5kICovCj4gKyAgICAgICB1MTYgdnFfaWR4Owo+ICt9Owo+
ICsKPiArc3RydWN0IHNuZXRfY3RybF9yZWdzIHsKPiArICAgICAgIHN0cnVjdCBzbmV0X2N0cmxf
cmVnX29wIG9wOwo+ICsgICAgICAgc3RydWN0IHNuZXRfY3RybF9yZWdfY3RybCBjdHJsOwo+ICsg
ICAgICAgdTMyIHJzdmQ7Cj4gKyAgICAgICB1MzIgZGF0YVtdOwo+ICt9Owo+ICsKPiArc3RhdGlj
IHN0cnVjdCBzbmV0X2N0cmxfcmVncyBfX2lvbWVtICpzbmV0X2dldF9jdHJsKHN0cnVjdCBzbmV0
ICpzbmV0KQo+ICt7Cj4gKyAgICAgICByZXR1cm4gc25ldC0+YmFyICsgc25ldC0+cHNuZXQtPmNm
Zy5jdHJsX29mZjsKPiArfQo+ICsKPiArc3RhdGljIGludCBzbmV0X3dhaXRfZm9yX2VtcHR5X2N0
cmwoc3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9tZW0gKnJlZ3MpCj4gK3sKPiArICAgICAgIHUz
MiB2YWw7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHJlYWR4X3BvbGxfdGltZW91dChpb3JlYWQzMiwg
JnJlZ3MtPmN0cmwsIHZhbCwgU05FVF9FTVBUWV9DVFJMKHZhbCksIDEwLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBTTkVUX0NUUkxfVElNRU9VVCk7Cj4gK30KPiArCj4gK3N0
YXRpYyBpbnQgc25ldF93YWl0X2Zvcl9lbXB0eV9vcChzdHJ1Y3Qgc25ldF9jdHJsX3JlZ3MgX19p
b21lbSAqcmVncykKPiArewo+ICsgICAgICAgdTMyIHZhbDsKPiArCj4gKyAgICAgICByZXR1cm4g
cmVhZHhfcG9sbF90aW1lb3V0KGlvcmVhZDMyLCAmcmVncy0+b3AsIHZhbCwgIXZhbCwgMTAsIFNO
RVRfQ1RSTF9USU1FT1VUKTsKPiArfQo+ICsKPiArc3RhdGljIGludCBzbmV0X3dhaXRfZm9yX2Rh
dGEoc3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9tZW0gKnJlZ3MpCj4gK3sKPiArICAgICAgIHUz
MiB2YWw7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHJlYWR4X3BvbGxfdGltZW91dChpb3JlYWQzMiwg
JnJlZ3MtPmN0cmwsIHZhbCwgU05FVF9EQVRBX1JFQURZKHZhbCksIDEwLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBTTkVUX0NUUkxfVElNRU9VVCk7Cj4gK30KPiArCj4gK3N0
YXRpYyB1MzIgc25ldF9yZWFkMzJfd29yZChzdHJ1Y3Qgc25ldF9jdHJsX3JlZ3MgX19pb21lbSAq
Y3RybF9yZWdzLCB1MTYgd29yZF9pZHgpCj4gK3sKPiArICAgICAgIHJldHVybiBpb3JlYWQzMigm
Y3RybF9yZWdzLT5kYXRhW3dvcmRfaWR4XSk7Cj4gK30KPiArCj4gK3N0YXRpYyB1MzIgc25ldF9y
ZWFkX2N0cmwoc3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9tZW0gKmN0cmxfcmVncykKPiArewo+
ICsgICAgICAgcmV0dXJuIGlvcmVhZDMyKCZjdHJsX3JlZ3MtPmN0cmwpOwo+ICt9Cj4gKwo+ICtz
dGF0aWMgdm9pZCBzbmV0X3dyaXRlX2N0cmwoc3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9tZW0g
KmN0cmxfcmVncywgdTMyIHZhbCkKPiArewo+ICsgICAgICAgaW93cml0ZTMyKHZhbCwgJmN0cmxf
cmVncy0+Y3RybCk7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHNuZXRfd3JpdGVfb3Aoc3RydWN0
IHNuZXRfY3RybF9yZWdzIF9faW9tZW0gKmN0cmxfcmVncywgdTMyIHZhbCkKPiArewo+ICsgICAg
ICAgaW93cml0ZTMyKHZhbCwgJmN0cmxfcmVncy0+b3ApOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50
IHNuZXRfd2FpdF9mb3JfZHB1X2NvbXBsZXRpb24oc3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9t
ZW0gKmN0cmxfcmVncykKPiArewo+ICsgICAgICAgLyogV2FpdCB1bnRpbCB0aGUgRFBVIGZpbmlz
aGVzIGNvbXBsZXRlbHkuCj4gKyAgICAgICAgKiBJdCB3aWxsIGNsZWFyIHRoZSBvcGNvZGUgcmVn
aXN0ZXIuCj4gKyAgICAgICAgKi8KPiArICAgICAgIHJldHVybiBzbmV0X3dhaXRfZm9yX2VtcHR5
X29wKGN0cmxfcmVncyk7Cj4gK30KPiArCj4gKy8qIFJlYWRpbmcgY3RybCBmcm9tIHRoZSBEUFU6
Cj4gKyAqIGJ1Zl9zaXplIG11c3QgYmUgNEIgYWxpZ25lZAo+ICsgKgo+ICsgKiBTdGVwczoKPiAr
ICoKPiArICogKDEpIFZlcmlmeSB0aGF0IHRoZSBEUFUgaXMgbm90IGluIHRoZSBtaWRkbGUgb2Yg
YW5vdGhlciBvcGVyYXRpb24gYnkKPiArICogICAgIHJlYWRpbmcgdGhlIGluX3Byb2Nlc3MgYW5k
IGVycm9yIGJpdHMgaW4gdGhlIGNvbnRyb2wgcmVnaXN0ZXIuCj4gKyAqICgyKSBXcml0ZSB0aGUg
cmVxdWVzdCBvcGNvZGUgYW5kIHRoZSBWUSBpZHggaW4gdGhlIG9wY29kZSByZWdpc3Rlcgo+ICsg
KiAgICAgYW5kIHdyaXRlIHRoZSBidWZmZXIgc2l6ZSBpbiB0aGUgY29udHJvbCByZWdpc3Rlci4K
PiArICogKDMpIFN0YXJ0IHJlYWRpbmQgY2h1bmtzIG9mIGRhdGEsIGNodW5rX3JlYWR5IGJpdCBp
bmRpY2F0ZXMgdGhhdCBhCj4gKyAqICAgICBkYXRhIGNodW5rIGlzIGF2YWlsYWJsZSwgd2Ugc2ln
bmFsIHRoYXQgd2UgcmVhZCB0aGUgZGF0YSBieSBjbGVhcmluZyB0aGUgYml0Lgo+ICsgKiAoNCkg
RGV0ZWN0IHRoYXQgdGhlIHRyYW5zZmVyIGlzIGNvbXBsZXRlZCB3aGVuIHRoZSBpbl9wcm9jZXNz
IGJpdAo+ICsgKiAgICAgaW4gdGhlIGNvbnRyb2wgcmVnaXN0ZXIgaXMgY2xlYXJlZCBvciB3aGVu
IHRoZSBhbiBlcnJvciBhcHBlYXJzLgo+ICsgKi8KPiArc3RhdGljIGludCBzbmV0X2N0cmxfcmVh
ZF9mcm9tX2RwdShzdHJ1Y3Qgc25ldCAqc25ldCwgdTE2IG9wY29kZSwgdTE2IHZxX2lkeCwgdm9p
ZCAqYnVmZmVyLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdTMyIGJ1Zl9z
aXplKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IHNuZXQtPnBkZXY7Cj4g
KyAgICAgICBzdHJ1Y3Qgc25ldF9jdHJsX3JlZ3MgX19pb21lbSAqcmVncyA9IHNuZXRfZ2V0X2N0
cmwoc25ldCk7Cj4gKyAgICAgICB1MzIgKmJmcl9wdHIgPSAodTMyICopYnVmZmVyOwo+ICsgICAg
ICAgdTMyIHZhbDsKPiArICAgICAgIHUxNiBidWZfd29yZHM7Cj4gKyAgICAgICBpbnQgcmV0Owo+
ICsgICAgICAgdTE2IHdvcmRzLCBpLCB0b3Rfd29yZHMgPSAwOwo+ICsKPiArICAgICAgIC8qIFN1
cHBvcnRlZCBmb3IgY29uZmlnIDIrICovCj4gKyAgICAgICBpZiAoIVNORVRfQ0ZHX1ZFUihzbmV0
LCAyKSkKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FT1BOT1RTVVBQOwo+ICsKPiArICAgICAg
IGlmICghSVNfQUxJR05FRChidWZfc2l6ZSwgNCkpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAt
RUlOVkFMOwo+ICsKPiArICAgICAgIG11dGV4X2xvY2soJnNuZXQtPmN0cmxfbG9jayk7Cj4gKwo+
ICsgICAgICAgYnVmX3dvcmRzID0gYnVmX3NpemUgLyA0Owo+ICsKPiArICAgICAgIC8qIE1ha2Ug
c3VyZSBjb250cm9sIHJlZ2lzdGVyIGlzIGVtcHR5ICovCj4gKyAgICAgICByZXQgPSBzbmV0X3dh
aXRfZm9yX2VtcHR5X2N0cmwocmVncyk7Cj4gKyAgICAgICBpZiAocmV0KSB7Cj4gKyAgICAgICAg
ICAgICAgIFNORVRfV0FSTihwZGV2LCAiVGltZW91dCB3YWl0aW5nIGZvciBwcmV2aW91cyBjb250
cm9sIGRhdGEgdG8gYmUgY29uc3VtZWRcbiIpOwo+ICsgICAgICAgICAgICAgICBnb3RvIGV4aXQ7
Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgLyogT3ZlcndyaXRlIHRoZSBjb250cm9sIHJlZ2lz
dGVyIHdpdGggdGhlIG5ldyBidWZmZXIgc2l6ZSAoaW4gNEIgd29yZHMpICovCj4gKyAgICAgICBz
bmV0X3dyaXRlX2N0cmwocmVncywgYnVmX3dvcmRzKTsKPiArICAgICAgIC8qIFVzZSBhIG1lbW9y
eSBiYXJyaWVyLCB0aGlzIG11c3QgYmUgd3JpdHRlbiBiZWZvcmUgdGhlIG9wY29kZSByZWdpc3Rl
ci4gKi8KPiArICAgICAgIHdtYigpOwoKCkF0IGxlYXN0IHlvdSBuZWVkIHRvIHVzZSBzbXBfd21i
KCkgYnV0IGlmIHlvdSB3YW50IHRvIHNlcmlhbGl6ZSBNTUlPCndyaXRlcyB5b3UgY2FuIHNpbXBs
eSB1c2Ugc3BpbmxvY2tzIGFmdGVyIHRoZSByZW1vdmFsIG9mIG1taW93Ygp3b3JrWzFdLgoKTm90
ZSB0aGF0IERvY3VtZW50YXRpb24vbWVtb3J5LWJhcnJpZXJzLnR4dCBzYWlkOgoKICAgICAgICAx
LiBBbGwgcmVhZFgoKSBhbmQgd3JpdGVYKCkgYWNjZXNzZXMgdG8gdGhlIHNhbWUgcGVyaXBoZXJh
bCBhcmUgb3JkZXJlZAogICAgICAgICAgIHdpdGggcmVzcGVjdCB0byBlYWNoIG90aGVyLiBUaGlz
IGVuc3VyZXMgdGhhdCBNTUlPIHJlZ2lzdGVyIGFjY2Vzc2VzCiAgICAgICAgICAgYnkgdGhlIHNh
bWUgQ1BVIHRocmVhZCB0byBhIHBhcnRpY3VsYXIgZGV2aWNlIHdpbGwgYXJyaXZlIGluIHByb2dy
YW0KICAgICAgICAgICBvcmRlci4KClsxXSBodHRwczovL2x3bi5uZXQvQXJ0aWNsZXMvNzgwNzEw
LwoKCj4gKwo+ICsgICAgICAgLyogV3JpdGUgb3Bjb2RlIGFuZCBWUSBpZHggKi8KPiArICAgICAg
IHZhbCA9IG9wY29kZSB8ICh2cV9pZHggPDwgMTYpOwo+ICsgICAgICAgc25ldF93cml0ZV9vcChy
ZWdzLCB2YWwpOwo+ICsKPiArICAgICAgIHdoaWxlIChidWZfd29yZHMgIT0gdG90X3dvcmRzKSB7
Cj4gKyAgICAgICAgICAgICAgIHJldCA9IHNuZXRfd2FpdF9mb3JfZGF0YShyZWdzKTsKPiArICAg
ICAgICAgICAgICAgaWYgKHJldCkgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIFNORVRfV0FS
TihwZGV2LCAiVGltZW91dCB3YWl0aW5nIGZvciBjb250cm9sIGRhdGFcbiIpOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIGdvdG8gZXhpdDsKPiArICAgICAgICAgICAgICAgfQo+ICsKPiArICAg
ICAgICAgICAgICAgdmFsID0gc25ldF9yZWFkX2N0cmwocmVncyk7Cj4gKwo+ICsgICAgICAgICAg
ICAgICAvKiBFcnJvcj8gKi8KPiArICAgICAgICAgICAgICAgaWYgKHZhbCAmIFNORVRfQ1RSTF9F
UlJPUl9NQVNLKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gU05FVF9WQUxfVE9f
RVJSKHZhbCk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgU05FVF9XQVJOKHBkZXYsICJFcnJv
ciB3aGlsZSByZWFkaW5nIGNvbnRyb2wgZGF0YSBmcm9tIERQVSwgZXJyICVkXG4iLCByZXQpOwo+
ICsgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXhpdDsKPiArICAgICAgICAgICAgICAgfQo+
ICsKPiArICAgICAgICAgICAgICAgd29yZHMgPSBtaW5fdCh1MTYsIHZhbCAmIFNORVRfQ1RSTF9E
QVRBX1NJWkVfTUFTSywgYnVmX3dvcmRzIC0gdG90X3dvcmRzKTsKPiArCj4gKyAgICAgICAgICAg
ICAgIGZvciAoaSA9IDA7IGkgPCB3b3JkczsgaSsrKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgKmJmcl9wdHIgPSBzbmV0X3JlYWQzMl93b3JkKHJlZ3MsIGkpOwo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIGJmcl9wdHIrKzsKPiArICAgICAgICAgICAgICAgfQo+ICsKPiArICAgICAgICAg
ICAgICAgdG90X3dvcmRzICs9IHdvcmRzOwo+ICsKPiArICAgICAgICAgICAgICAgLyogSXMgdGhl
IGpvYiBjb21wbGV0ZWQ/ICovCj4gKyAgICAgICAgICAgICAgIGlmICghKHZhbCAmIFNORVRfQ1RS
TF9JTl9QUk9DRVNTX01BU0spKQo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsK
PiArICAgICAgICAgICAgICAgLyogQ2xlYXIgdGhlIGNodW5rIHJlYWR5IGJpdCBhbmQgY29udGlu
dWUgKi8KPiArICAgICAgICAgICAgICAgdmFsICY9IH5TTkVUX0NUUkxfQ0hVTktfUkRZX01BU0s7
Cj4gKyAgICAgICAgICAgICAgIHNuZXRfd3JpdGVfY3RybChyZWdzLCB2YWwpOwo+ICsgICAgICAg
fQo+ICsKPiArICAgICAgIHJldCA9IHNuZXRfd2FpdF9mb3JfZHB1X2NvbXBsZXRpb24ocmVncyk7
Cj4gKyAgICAgICBpZiAocmV0KQo+ICsgICAgICAgICAgICAgICBTTkVUX1dBUk4ocGRldiwgIlRp
bWVvdXQgd2FpdGluZyBmb3IgdGhlIERQVSB0byBjb21wbGV0ZSBhIGNvbnRyb2wgY29tbWFuZFxu
Iik7Cj4gKwo+ICtleGl0Ogo+ICsgICAgICAgbXV0ZXhfdW5sb2NrKCZzbmV0LT5jdHJsX2xvY2sp
Owo+ICsgICAgICAgcmV0dXJuIHJldDsKPiArfQo+ICsKPiArLyogU2VuZCBhIGNvbnRyb2wgbWVz
c2FnZSB0byB0aGUgRFBVIHVzaW5nIHRoZSBvbGQgbWVjaGFuaXNtCj4gKyAqIHVzZWQgd2l0aCBj
b25maWcgdmVyc2lvbiAxLgo+ICsgKi8KPiArc3RhdGljIGludCBzbmV0X3NlbmRfY3RybF9tc2df
b2xkKHN0cnVjdCBzbmV0ICpzbmV0LCB1MzIgb3Bjb2RlKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3Qg
cGNpX2RldiAqcGRldiA9IHNuZXQtPnBkZXY7Cj4gKyAgICAgICBzdHJ1Y3Qgc25ldF9jdHJsX3Jl
Z3MgX19pb21lbSAqcmVncyA9IHNuZXRfZ2V0X2N0cmwoc25ldCk7Cj4gKyAgICAgICBpbnQgcmV0
Owo+ICsKPiArICAgICAgIG11dGV4X2xvY2soJnNuZXQtPmN0cmxfbG9jayk7Cj4gKwo+ICsgICAg
ICAgLyogT2xkIG1lY2hhbmlzbSB1c2VzIGp1c3QgMSByZWdpc3RlciwgdGhlIG9wY29kZSByZWdp
c3Rlci4KPiArICAgICAgICAqIE1ha2Ugc3VyZSB0aGF0IHRoZSBvcGNvZGUgcmVnaXN0ZXIgaXMg
ZW1wdHksIGFuZCB0aGF0IHRoZSBEUFUgaXNuJ3QKPiArICAgICAgICAqIHByb2Nlc3NpbmcgYW4g
b2xkIG1lc3NhZ2UuCj4gKyAgICAgICAgKi8KPiArICAgICAgIHJldCA9IHNuZXRfd2FpdF9mb3Jf
ZW1wdHlfb3AocmVncyk7Cj4gKyAgICAgICBpZiAocmV0KSB7Cj4gKyAgICAgICAgICAgICAgIFNO
RVRfV0FSTihwZGV2LCAiVGltZW91dCB3YWl0aW5nIGZvciBwcmV2aW91cyBjb250cm9sIG1lc3Nh
Z2UgdG8gYmUgQUNLZWRcbiIpOwo+ICsgICAgICAgICAgICAgICBnb3RvIGV4aXQ7Cj4gKyAgICAg
ICB9Cj4gKwo+ICsgICAgICAgLyogV3JpdGUgdGhlIG1lc3NhZ2UgKi8KPiArICAgICAgIHNuZXRf
d3JpdGVfb3AocmVncywgb3Bjb2RlKTsKPiArCj4gKyAgICAgICAvKiBEUFUgQUNLcyB0aGUgbWVz
c2FnZSBieSBjbGVhcmluZyB0aGUgb3Bjb2RlIHJlZ2lzdGVyICovCj4gKyAgICAgICByZXQgPSBz
bmV0X3dhaXRfZm9yX2VtcHR5X29wKHJlZ3MpOwo+ICsgICAgICAgaWYgKHJldCkKPiArICAgICAg
ICAgICAgICAgU05FVF9XQVJOKHBkZXYsICJUaW1lb3V0IHdhaXRpbmcgZm9yIGEgY29udHJvbCBt
ZXNzYWdlIHRvIGJlIEFDS2VkXG4iKTsKPiArCj4gK2V4aXQ6Cj4gKyAgICAgICBtdXRleF91bmxv
Y2soJnNuZXQtPmN0cmxfbG9jayk7Cj4gKyAgICAgICByZXR1cm4gcmV0Owo+ICt9Cj4gKwo+ICsv
KiBTZW5kIGEgY29udHJvbCBtZXNzYWdlIHRvIHRoZSBEUFUuCj4gKyAqIEEgY29udHJvbCBtZXNz
YWdlIGlzIGEgbWVzc2FnZSB3aXRob3V0IHBheWxvYWQuCj4gKyAqLwo+ICtzdGF0aWMgaW50IHNu
ZXRfc2VuZF9jdHJsX21zZyhzdHJ1Y3Qgc25ldCAqc25ldCwgdTE2IG9wY29kZSwgdTE2IHZxX2lk
eCkKPiArewo+ICsgICAgICAgc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBzbmV0LT5wZGV2Owo+ICsg
ICAgICAgc3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9tZW0gKnJlZ3MgPSBzbmV0X2dldF9jdHJs
KHNuZXQpOwo+ICsgICAgICAgdTMyIHZhbDsKPiArICAgICAgIGludCByZXQ7Cj4gKwo+ICsgICAg
ICAgLyogSWYgY29uZmlnIHZlcnNpb24gaXMgbm90IDIrLCB1c2UgdGhlIG9sZCBtZWNoYW5pc20g
Ki8KPiArICAgICAgIGlmICghU05FVF9DRkdfVkVSKHNuZXQsIDIpKQo+ICsgICAgICAgICAgICAg
ICByZXR1cm4gc25ldF9zZW5kX2N0cmxfbXNnX29sZChzbmV0LCBvcGNvZGUpOwo+ICsKPiArICAg
ICAgIG11dGV4X2xvY2soJnNuZXQtPmN0cmxfbG9jayk7Cj4gKwo+ICsgICAgICAgLyogTWFrZSBz
dXJlIGNvbnRyb2wgcmVnaXN0ZXIgaXMgZW1wdHkgKi8KPiArICAgICAgIHJldCA9IHNuZXRfd2Fp
dF9mb3JfZW1wdHlfY3RybChyZWdzKTsKPiArICAgICAgIGlmIChyZXQpIHsKPiArICAgICAgICAg
ICAgICAgU05FVF9XQVJOKHBkZXYsICJUaW1lb3V0IHdhaXRpbmcgZm9yIHByZXZpb3VzIGNvbnRy
b2wgZGF0YSB0byBiZSBjb25zdW1lZFxuIik7Cj4gKyAgICAgICAgICAgICAgIGdvdG8gZXhpdDsK
PiArICAgICAgIH0KPiArCj4gKyAgICAgICAvKiBDbGVhciB0aGUgY29udHJvbCByZWdpc3RlciAt
IGNsZWFyIHRoZSBlcnJvciBjb2RlIGlmIHByZXZpb3VzIGNvbnRyb2wgb3BlcmF0aW9uIGZhaWxl
ZCAqLwo+ICsgICAgICAgc25ldF93cml0ZV9jdHJsKHJlZ3MsIDApOwo+ICsKPiArICAgICAgIC8q
IFdyaXRlIG9wY29kZSBhbmQgVlEgaWR4ICovCj4gKyAgICAgICB2YWwgPSBvcGNvZGUgfCAodnFf
aWR4IDw8IDE2KTsKPiArICAgICAgIHNuZXRfd3JpdGVfb3AocmVncywgdmFsKTsKCkkgZ3Vlc3Mg
d2UgbmVlZCB0byBzZXJpYWxpemUgdHdvIHdyaXRlcyBoZXJlIGFzIHdlbGwuCgpUaGFua3MKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0
aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9y
ZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0
dWFsaXphdGlvbg==
