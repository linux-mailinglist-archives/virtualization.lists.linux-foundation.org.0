Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [140.211.166.133])
	by mail.lfdr.de (Postfix) with ESMTPS id ADFF03C7E14
	for <lists.virtualization@lfdr.de>; Wed, 14 Jul 2021 07:46:06 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id 3202740224;
	Wed, 14 Jul 2021 05:46:05 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dbpRwmCX-pkO; Wed, 14 Jul 2021 05:46:03 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp2.osuosl.org (Postfix) with ESMTPS id A8B6D40104;
	Wed, 14 Jul 2021 05:46:02 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id D8671C001A;
	Wed, 14 Jul 2021 05:46:01 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp1.osuosl.org (smtp1.osuosl.org [140.211.166.138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 9CEF3C000E
 for <virtualization@lists.linux-foundation.org>;
 Wed, 14 Jul 2021 05:46:00 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp1.osuosl.org (Postfix) with ESMTP id 7551D83B83
 for <virtualization@lists.linux-foundation.org>;
 Wed, 14 Jul 2021 05:46:00 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp1.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp1.osuosl.org ([127.0.0.1])
 by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id rS5ndjam4YwO
 for <virtualization@lists.linux-foundation.org>;
 Wed, 14 Jul 2021 05:45:57 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp1.osuosl.org (Postfix) with ESMTPS id 82AEF83B7C
 for <virtualization@lists.linux-foundation.org>;
 Wed, 14 Jul 2021 05:45:57 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1626241556;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=oCrYGgoO9YGzqzoZPPUOKjy7vvRvHYtglXUq8PdGcyU=;
 b=TsZD2/XmC/NtkEKl8oVzmCGI2RkhUl0JCV6bfOV7xKajLNlZK5X/P6rBAwUgw4tCtFxawY
 5xozoKN0D5KxicvW4ZyMD8TD2wpFMq/P6MGvjbLNuo/3B7eYy7Ir6T2uYvAZY8/q9uTguL
 V7m53BxOq+TG8vjIOSJhjl8oq1WKi/o=
Received: from mail-pg1-f198.google.com (mail-pg1-f198.google.com
 [209.85.215.198]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-280-rXlwb8zWMlyEw0HMoJR9NQ-1; Wed, 14 Jul 2021 01:45:54 -0400
X-MC-Unique: rXlwb8zWMlyEw0HMoJR9NQ-1
Received: by mail-pg1-f198.google.com with SMTP id
 o9-20020a6561490000b0290226fc371410so719485pgv.8
 for <virtualization@lists.linux-foundation.org>;
 Tue, 13 Jul 2021 22:45:54 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=oCrYGgoO9YGzqzoZPPUOKjy7vvRvHYtglXUq8PdGcyU=;
 b=uoHekOER1Pep8FEGcCgX9s5gQMiVbvB0aiQfEB6yddV1g9WaMeFLrSlrV6TRHEYMZD
 TGVsCtET1AAvwXRB6oZbAJxgnJ7uL3gUj4hyoHJiNjeNzMDMQnStkLA+xPApRlcIgaBJ
 KhZfX+0GBtVOMlPxnWMfJPdsSLcbi9kKwl84oIczEmNP4WPKRuDxaGv+0p/nDnJb5zaH
 V+VWVe6cvIGjnJGQBJueV57YQ8gnA1mAst69VIKYyN8C99J5cs5QE/PzpQtUFxpXeQR/
 nh15QusU4ym02DBXRjV614XUrarCG/Z1hkS5AckcKvX+iooUxft3ulZ262Sh4kPOUMxB
 /A8Q==
X-Gm-Message-State: AOAM532ywKNXUB1PaRn1QPY5Qgxz7BppvMnidkAM3s84GaeCnPRd9MRD
 iteetu2ciiWXggvKKpQg3lVj2SlSF30pXymLHqC+QMfYhIVFDj/HzTkCq7fLuTTzoKwvmkQNkHl
 MZ5EMBmnXwp5FvY+XqcFE/KputbvrBFqXr0u0436/gA==
X-Received: by 2002:a17:90a:348f:: with SMTP id
 p15mr2061566pjb.170.1626241553121; 
 Tue, 13 Jul 2021 22:45:53 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJxYzfhwi9IoV7Rp+w6x9+pXXtZF4kxwM1O+wmLQ/52mTVLxnOGa8fvIp8SZcj9kcpDRPaPZ1g==
X-Received: by 2002:a17:90a:348f:: with SMTP id
 p15mr2061506pjb.170.1626241552455; 
 Tue, 13 Jul 2021 22:45:52 -0700 (PDT)
Received: from wangxiaodeMacBook-Air.local ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id w123sm1074906pfb.109.2021.07.13.22.45.44
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Tue, 13 Jul 2021 22:45:51 -0700 (PDT)
Subject: Re: [PATCH v9 16/17] vduse: Introduce VDUSE - vDPA Device in Userspace
To: Xie Yongji <xieyongji@bytedance.com>, mst@redhat.com,
 stefanha@redhat.com, sgarzare@redhat.com, parav@nvidia.com,
 hch@infradead.org, christian.brauner@canonical.com, rdunlap@infradead.org,
 willy@infradead.org, viro@zeniv.linux.org.uk, axboe@kernel.dk,
 bcrl@kvack.org, corbet@lwn.net, mika.penttila@nextfour.com,
 dan.carpenter@oracle.com, joro@8bytes.org, gregkh@linuxfoundation.org,
 zhe.he@windriver.com, xiaodong.liu@intel.com
References: <20210713084656.232-1-xieyongji@bytedance.com>
 <20210713084656.232-17-xieyongji@bytedance.com>
From: Jason Wang <jasowang@redhat.com>
Message-ID: <26116714-f485-eeab-4939-71c4c10c30de@redhat.com>
Date: Wed, 14 Jul 2021 13:45:39 +0800
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0)
 Gecko/20100101 Thunderbird/78.11.0
MIME-Version: 1.0
In-Reply-To: <20210713084656.232-17-xieyongji@bytedance.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: kvm@vger.kernel.org, netdev@vger.kernel.org, linux-kernel@vger.kernel.org,
 virtualization@lists.linux-foundation.org, iommu@lists.linux-foundation.org,
 songmuchun@bytedance.com, linux-fsdevel@vger.kernel.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="gbk"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CtTaIDIwMjEvNy8xMyDPws7nNDo0NiwgWGllIFlvbmdqaSDQtLXAOgo+IFRoaXMgVkRVU0UgZHJp
dmVyIGVuYWJsZXMgaW1wbGVtZW50aW5nIHNvZnR3YXJlLWVtdWxhdGVkIHZEUEEKPiBkZXZpY2Vz
IGluIHVzZXJzcGFjZS4gVGhlIHZEUEEgZGV2aWNlIGlzIGNyZWF0ZWQgYnkKPiBpb2N0bChWRFVT
RV9DUkVBVEVfREVWKSBvbiAvZGV2L3ZkdXNlL2NvbnRyb2wuIFRoZW4gYSBjaGFyIGRldmljZQo+
IGludGVyZmFjZSAoL2Rldi92ZHVzZS8kTkFNRSkgaXMgZXhwb3J0ZWQgdG8gdXNlcnNwYWNlIGZv
ciBkZXZpY2UKPiBlbXVsYXRpb24uCj4KPiBJbiBvcmRlciB0byBtYWtlIHRoZSBkZXZpY2UgZW11
bGF0aW9uIG1vcmUgc2VjdXJlLCB0aGUgZGV2aWNlJ3MKPiBjb250cm9sIHBhdGggaXMgaGFuZGxl
ZCBpbiBrZXJuZWwuIEEgbWVzc2FnZSBtZWNobmlzbSBpcyBpbnRyb2R1Y2VkCj4gdG8gZm9yd2Fy
ZCBzb21lIGRhdGFwbGFuZSByZWxhdGVkIGNvbnRyb2wgbWVzc2FnZXMgdG8gdXNlcnNwYWNlLgo+
Cj4gQW5kIGluIHRoZSBkYXRhIHBhdGgsIHRoZSBETUEgYnVmZmVyIHdpbGwgYmUgbWFwcGVkIGlu
dG8gdXNlcnNwYWNlCj4gYWRkcmVzcyBzcGFjZSB0aHJvdWdoIGRpZmZlcmVudCB3YXlzIGRlcGVu
ZGluZyBvbiB0aGUgdkRQQSBidXMgdG8KPiB3aGljaCB0aGUgdkRQQSBkZXZpY2UgaXMgYXR0YWNo
ZWQuIEluIHZpcnRpby12ZHBhIGNhc2UsIHRoZSBNTVUtYmFzZWQKPiBJT01NVSBkcml2ZXIgaXMg
dXNlZCB0byBhY2hpZXZlIHRoYXQuIEFuZCBpbiB2aG9zdC12ZHBhIGNhc2UsIHRoZQo+IERNQSBi
dWZmZXIgaXMgcmVzaWRlIGluIGEgdXNlcnNwYWNlIG1lbW9yeSByZWdpb24gd2hpY2ggY2FuIGJl
IHNoYXJlZAo+IHRvIHRoZSBWRFVTRSB1c2Vyc3BhY2UgcHJvY2Vzc3MgdmlhIHRyYW5zZmVycmlu
ZyB0aGUgc2htZmQuCj4KPiBGb3IgbW9yZSBkZXRhaWxzIG9uIFZEVVNFIGRlc2lnbiBhbmQgdXNh
Z2UsIHBsZWFzZSBzZWUgdGhlIGZvbGxvdy1vbgo+IERvY3VtZW50YXRpb24gY29tbWl0Lgo+Cj4g
U2lnbmVkLW9mZi1ieTogWGllIFlvbmdqaSA8eGlleW9uZ2ppQGJ5dGVkYW5jZS5jb20+Cj4gLS0t
Cj4gICBEb2N1bWVudGF0aW9uL3VzZXJzcGFjZS1hcGkvaW9jdGwvaW9jdGwtbnVtYmVyLnJzdCB8
ICAgIDEgKwo+ICAgZHJpdmVycy92ZHBhL0tjb25maWcgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgfCAgIDEwICsKPiAgIGRyaXZlcnMvdmRwYS9NYWtlZmlsZSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHwgICAgMSArCj4gICBkcml2ZXJzL3ZkcGEvdmRwYV91c2VyL01ha2VmaWxl
ICAgICAgICAgICAgICAgICAgICB8ICAgIDUgKwo+ICAgZHJpdmVycy92ZHBhL3ZkcGFfdXNlci92
ZHVzZV9kZXYuYyAgICAgICAgICAgICAgICAgfCAxNTAyICsrKysrKysrKysrKysrKysrKysrCj4g
ICBpbmNsdWRlL3VhcGkvbGludXgvdmR1c2UuaCAgICAgICAgICAgICAgICAgICAgICAgICB8ICAy
MjEgKysrCj4gICA2IGZpbGVzIGNoYW5nZWQsIDE3NDAgaW5zZXJ0aW9ucygrKQo+ICAgY3JlYXRl
IG1vZGUgMTAwNjQ0IGRyaXZlcnMvdmRwYS92ZHBhX3VzZXIvTWFrZWZpbGUKPiAgIGNyZWF0ZSBt
b2RlIDEwMDY0NCBkcml2ZXJzL3ZkcGEvdmRwYV91c2VyL3ZkdXNlX2Rldi5jCj4gICBjcmVhdGUg
bW9kZSAxMDA2NDQgaW5jbHVkZS91YXBpL2xpbnV4L3ZkdXNlLmgKPgo+IGRpZmYgLS1naXQgYS9E
b2N1bWVudGF0aW9uL3VzZXJzcGFjZS1hcGkvaW9jdGwvaW9jdGwtbnVtYmVyLnJzdCBiL0RvY3Vt
ZW50YXRpb24vdXNlcnNwYWNlLWFwaS9pb2N0bC9pb2N0bC1udW1iZXIucnN0Cj4gaW5kZXggMTQw
OWU0MGU2MzQ1Li4yOTNjYTNhZWYzNTggMTAwNjQ0Cj4gLS0tIGEvRG9jdW1lbnRhdGlvbi91c2Vy
c3BhY2UtYXBpL2lvY3RsL2lvY3RsLW51bWJlci5yc3QKPiArKysgYi9Eb2N1bWVudGF0aW9uL3Vz
ZXJzcGFjZS1hcGkvaW9jdGwvaW9jdGwtbnVtYmVyLnJzdAo+IEBAIC0zMDAsNiArMzAwLDcgQEAg
Q29kZSAgU2VxIyAgICBJbmNsdWRlIEZpbGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgQ29tbWVudHMKPiAgICd6JyAgIDEwLTRGICBkcml2ZXJzL3MzOTAvY3J5cHRv
L3pjcnlwdF9hcGkuaCAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0IQo+ICAgJ3wnICAg
MDAtN0YgIGxpbnV4L21lZGlhLmgKPiAgIDB4ODAgIDAwLTFGICBsaW51eC9mYi5oCj4gKzB4ODEg
IDAwLTFGICBsaW51eC92ZHVzZS5oCj4gICAweDg5ICAwMC0wNiAgYXJjaC94ODYvaW5jbHVkZS9h
c20vc29ja2lvcy5oCj4gICAweDg5ICAwQi1ERiAgbGludXgvc29ja2lvcy5oCj4gICAweDg5ICBF
MC1FRiAgbGludXgvc29ja2lvcy5oICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBTSU9DUFJPVE9QUklWQVRFIHJhbmdlCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmRwYS9L
Y29uZmlnIGIvZHJpdmVycy92ZHBhL0tjb25maWcKPiBpbmRleCBhNTAzYzFiMmJmZDkuLjZlMjNi
Y2U2NDMzYSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZkcGEvS2NvbmZpZwo+ICsrKyBiL2RyaXZl
cnMvdmRwYS9LY29uZmlnCj4gQEAgLTMzLDYgKzMzLDE2IEBAIGNvbmZpZyBWRFBBX1NJTV9CTE9D
Swo+ICAgCSAgdkRQQSBibG9jayBkZXZpY2Ugc2ltdWxhdG9yIHdoaWNoIHRlcm1pbmF0ZXMgSU8g
cmVxdWVzdCBpbiBhCj4gICAJICBtZW1vcnkgYnVmZmVyLgo+ICAgCj4gK2NvbmZpZyBWRFBBX1VT
RVIKPiArCXRyaXN0YXRlICJWRFVTRSAodkRQQSBEZXZpY2UgaW4gVXNlcnNwYWNlKSBzdXBwb3J0
Igo+ICsJZGVwZW5kcyBvbiBFVkVOVEZEICYmIE1NVSAmJiBIQVNfRE1BCj4gKwlzZWxlY3QgRE1B
X09QUwo+ICsJc2VsZWN0IFZIT1NUX0lPVExCCj4gKwlzZWxlY3QgSU9NTVVfSU9WQQo+ICsJaGVs
cAo+ICsJICBXaXRoIFZEVVNFIGl0IGlzIHBvc3NpYmxlIHRvIGVtdWxhdGUgYSB2RFBBIERldmlj
ZQo+ICsJICBpbiBhIHVzZXJzcGFjZSBwcm9ncmFtLgo+ICsKPiAgIGNvbmZpZyBJRkNWRgo+ICAg
CXRyaXN0YXRlICJJbnRlbCBJRkMgVkYgdkRQQSBkcml2ZXIiCj4gICAJZGVwZW5kcyBvbiBQQ0lf
TVNJCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmRwYS9NYWtlZmlsZSBiL2RyaXZlcnMvdmRwYS9N
YWtlZmlsZQo+IGluZGV4IDY3ZmU3ZjNkNjk0My4uZjAyZWJlZDMzZjE5IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvdmRwYS9NYWtlZmlsZQo+ICsrKyBiL2RyaXZlcnMvdmRwYS9NYWtlZmlsZQo+IEBA
IC0xLDYgKzEsNyBAQAo+ICAgIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMAo+ICAg
b2JqLSQoQ09ORklHX1ZEUEEpICs9IHZkcGEubwo+ICAgb2JqLSQoQ09ORklHX1ZEUEFfU0lNKSAr
PSB2ZHBhX3NpbS8KPiArb2JqLSQoQ09ORklHX1ZEUEFfVVNFUikgKz0gdmRwYV91c2VyLwo+ICAg
b2JqLSQoQ09ORklHX0lGQ1ZGKSAgICArPSBpZmN2Zi8KPiAgIG9iai0kKENPTkZJR19NTFg1X1ZE
UEEpICs9IG1seDUvCj4gICBvYmotJChDT05GSUdfVlBfVkRQQSkgICAgKz0gdmlydGlvX3BjaS8K
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92ZHBhL3ZkcGFfdXNlci9NYWtlZmlsZSBiL2RyaXZlcnMv
dmRwYS92ZHBhX3VzZXIvTWFrZWZpbGUKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAw
MDAwMDAwMDAwMC4uMjYwZTBiMjZhZjk5Cj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZlcnMv
dmRwYS92ZHBhX3VzZXIvTWFrZWZpbGUKPiBAQCAtMCwwICsxLDUgQEAKPiArIyBTUERYLUxpY2Vu
c2UtSWRlbnRpZmllcjogR1BMLTIuMAo+ICsKPiArdmR1c2UteSA6PSB2ZHVzZV9kZXYubyBpb3Zh
X2RvbWFpbi5vCj4gKwo+ICtvYmotJChDT05GSUdfVkRQQV9VU0VSKSArPSB2ZHVzZS5vCj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvdmRwYS92ZHBhX3VzZXIvdmR1c2VfZGV2LmMgYi9kcml2ZXJzL3Zk
cGEvdmRwYV91c2VyL3ZkdXNlX2Rldi5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAw
MDAwMDAwMDAwMDAuLmM5OTRhNGE0NjYwYwo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJz
L3ZkcGEvdmRwYV91c2VyL3ZkdXNlX2Rldi5jCj4gQEAgLTAsMCArMSwxNTAyIEBACj4gKy8vIFNQ
RFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9ubHkKPiArLyoKPiArICogVkRVU0U6IHZE
UEEgRGV2aWNlIGluIFVzZXJzcGFjZQo+ICsgKgo+ICsgKiBDb3B5cmlnaHQgKEMpIDIwMjAtMjAy
MSBCeXRlZGFuY2UgSW5jLiBhbmQvb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCByaWdodHMgcmVzZXJ2
ZWQuCj4gKyAqCj4gKyAqIEF1dGhvcjogWGllIFlvbmdqaSA8eGlleW9uZ2ppQGJ5dGVkYW5jZS5j
b20+Cj4gKyAqCj4gKyAqLwo+ICsKPiArI2luY2x1ZGUgPGxpbnV4L2luaXQuaD4KPiArI2luY2x1
ZGUgPGxpbnV4L21vZHVsZS5oPgo+ICsjaW5jbHVkZSA8bGludXgvY2Rldi5oPgo+ICsjaW5jbHVk
ZSA8bGludXgvZGV2aWNlLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9ldmVudGZkLmg+Cj4gKyNpbmNs
dWRlIDxsaW51eC9zbGFiLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC93YWl0Lmg+Cj4gKyNpbmNsdWRl
IDxsaW51eC9kbWEtbWFwLW9wcy5oPgo+ICsjaW5jbHVkZSA8bGludXgvcG9sbC5oPgo+ICsjaW5j
bHVkZSA8bGludXgvZmlsZS5oPgo+ICsjaW5jbHVkZSA8bGludXgvdWlvLmg+Cj4gKyNpbmNsdWRl
IDxsaW51eC92ZHBhLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC9ub3NwZWMuaD4KPiArI2luY2x1ZGUg
PHVhcGkvbGludXgvdmR1c2UuaD4KPiArI2luY2x1ZGUgPHVhcGkvbGludXgvdmRwYS5oPgo+ICsj
aW5jbHVkZSA8dWFwaS9saW51eC92aXJ0aW9fY29uZmlnLmg+Cj4gKyNpbmNsdWRlIDx1YXBpL2xp
bnV4L3ZpcnRpb19pZHMuaD4KPiArI2luY2x1ZGUgPHVhcGkvbGludXgvdmlydGlvX2Jsay5oPgo+
ICsjaW5jbHVkZSA8bGludXgvbW9kX2RldmljZXRhYmxlLmg+Cj4gKwo+ICsjaW5jbHVkZSAiaW92
YV9kb21haW4uaCIKPiArCj4gKyNkZWZpbmUgRFJWX0FVVEhPUiAgICJZb25namkgWGllIDx4aWV5
b25namlAYnl0ZWRhbmNlLmNvbT4iCj4gKyNkZWZpbmUgRFJWX0RFU0MgICAgICJ2RFBBIERldmlj
ZSBpbiBVc2Vyc3BhY2UiCj4gKyNkZWZpbmUgRFJWX0xJQ0VOU0UgICJHUEwgdjIiCj4gKwo+ICsj
ZGVmaW5lIFZEVVNFX0RFVl9NQVggKDFVIDw8IE1JTk9SQklUUykKPiArI2RlZmluZSBWRFVTRV9N
QVhfQk9VTkNFX1NJWkUgKDY0ICogMTAyNCAqIDEwMjQpCj4gKyNkZWZpbmUgVkRVU0VfSU9WQV9T
SVpFICgxMjggKiAxMDI0ICogMTAyNCkKPiArI2RlZmluZSBWRFVTRV9SRVFVRVNUX1RJTUVPVVQg
MzAKPiArCj4gK3N0cnVjdCB2ZHVzZV92aXJ0cXVldWUgewo+ICsJdTE2IGluZGV4Owo+ICsJdTE2
IG51bV9tYXg7Cj4gKwl1MzIgbnVtOwo+ICsJdTY0IGRlc2NfYWRkcjsKPiArCXU2NCBkcml2ZXJf
YWRkcjsKPiArCXU2NCBkZXZpY2VfYWRkcjsKPiArCXN0cnVjdCB2ZHBhX3ZxX3N0YXRlIHN0YXRl
Owo+ICsJYm9vbCByZWFkeTsKPiArCWJvb2wga2lja2VkOwo+ICsJc3BpbmxvY2tfdCBraWNrX2xv
Y2s7Cj4gKwlzcGlubG9ja190IGlycV9sb2NrOwo+ICsJc3RydWN0IGV2ZW50ZmRfY3R4ICpraWNr
ZmQ7Cj4gKwlzdHJ1Y3QgdmRwYV9jYWxsYmFjayBjYjsKPiArCXN0cnVjdCB3b3JrX3N0cnVjdCBp
bmplY3Q7Cj4gK307Cj4gKwo+ICtzdHJ1Y3QgdmR1c2VfZGV2Owo+ICsKPiArc3RydWN0IHZkdXNl
X3ZkcGEgewo+ICsJc3RydWN0IHZkcGFfZGV2aWNlIHZkcGE7Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2
ICpkZXY7Cj4gK307Cj4gKwo+ICtzdHJ1Y3QgdmR1c2VfZGV2IHsKPiArCXN0cnVjdCB2ZHVzZV92
ZHBhICp2ZGV2Owo+ICsJc3RydWN0IGRldmljZSAqZGV2Owo+ICsJc3RydWN0IHZkdXNlX3ZpcnRx
dWV1ZSAqdnFzOwo+ICsJc3RydWN0IHZkdXNlX2lvdmFfZG9tYWluICpkb21haW47Cj4gKwljaGFy
ICpuYW1lOwo+ICsJc3RydWN0IG11dGV4IGxvY2s7Cj4gKwlzcGlubG9ja190IG1zZ19sb2NrOwo+
ICsJdTY0IG1zZ191bmlxdWU7Cj4gKwl3YWl0X3F1ZXVlX2hlYWRfdCB3YWl0cTsKPiArCXN0cnVj
dCBsaXN0X2hlYWQgc2VuZF9saXN0Owo+ICsJc3RydWN0IGxpc3RfaGVhZCByZWN2X2xpc3Q7Cj4g
KwlzdHJ1Y3QgdmRwYV9jYWxsYmFjayBjb25maWdfY2I7Cj4gKwlzdHJ1Y3Qgd29ya19zdHJ1Y3Qg
aW5qZWN0Owo+ICsJc3BpbmxvY2tfdCBpcnFfbG9jazsKPiArCWludCBtaW5vcjsKPiArCWJvb2wg
Y29ubmVjdGVkOwo+ICsJdTY0IGFwaV92ZXJzaW9uOwo+ICsJdTY0IGRldmljZV9mZWF0dXJlczsK
PiArCXU2NCBkcml2ZXJfZmVhdHVyZXM7Cj4gKwl1MzIgZGV2aWNlX2lkOwo+ICsJdTMyIHZlbmRv
cl9pZDsKPiArCXUzMiBnZW5lcmF0aW9uOwo+ICsJdTMyIGNvbmZpZ19zaXplOwo+ICsJdm9pZCAq
Y29uZmlnOwo+ICsJdTggc3RhdHVzOwo+ICsJdTMyIHZxX251bTsKPiArCXUzMiB2cV9hbGlnbjsK
PiArfTsKPiArCj4gK3N0cnVjdCB2ZHVzZV9kZXZfbXNnIHsKPiArCXN0cnVjdCB2ZHVzZV9kZXZf
cmVxdWVzdCByZXE7Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2X3Jlc3BvbnNlIHJlc3A7Cj4gKwlzdHJ1
Y3QgbGlzdF9oZWFkIGxpc3Q7Cj4gKwl3YWl0X3F1ZXVlX2hlYWRfdCB3YWl0cTsKPiArCWJvb2wg
Y29tcGxldGVkOwo+ICt9Owo+ICsKPiArc3RydWN0IHZkdXNlX2NvbnRyb2wgewo+ICsJdTY0IGFw
aV92ZXJzaW9uOwo+ICt9Owo+ICsKPiArc3RhdGljIERFRklORV9NVVRFWCh2ZHVzZV9sb2NrKTsK
PiArc3RhdGljIERFRklORV9JRFIodmR1c2VfaWRyKTsKPiArCj4gK3N0YXRpYyBkZXZfdCB2ZHVz
ZV9tYWpvcjsKPiArc3RhdGljIHN0cnVjdCBjbGFzcyAqdmR1c2VfY2xhc3M7Cj4gK3N0YXRpYyBz
dHJ1Y3QgY2RldiB2ZHVzZV9jdHJsX2NkZXY7Cj4gK3N0YXRpYyBzdHJ1Y3QgY2RldiB2ZHVzZV9j
ZGV2Owo+ICtzdGF0aWMgc3RydWN0IHdvcmtxdWV1ZV9zdHJ1Y3QgKnZkdXNlX2lycV93cTsKPiAr
Cj4gK3N0YXRpYyB1MzIgYWxsb3dlZF9kZXZpY2VfaWRbXSA9IHsKPiArCVZJUlRJT19JRF9CTE9D
SywKPiArfTsKPiArCj4gK3N0YXRpYyBpbmxpbmUgc3RydWN0IHZkdXNlX2RldiAqdmRwYV90b192
ZHVzZShzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEpCj4gK3sKPiArCXN0cnVjdCB2ZHVzZV92ZHBh
ICp2ZGV2ID0gY29udGFpbmVyX29mKHZkcGEsIHN0cnVjdCB2ZHVzZV92ZHBhLCB2ZHBhKTsKPiAr
Cj4gKwlyZXR1cm4gdmRldi0+ZGV2Owo+ICt9Cj4gKwo+ICtzdGF0aWMgaW5saW5lIHN0cnVjdCB2
ZHVzZV9kZXYgKmRldl90b192ZHVzZShzdHJ1Y3QgZGV2aWNlICpkZXYpCj4gK3sKPiArCXN0cnVj
dCB2ZHBhX2RldmljZSAqdmRwYSA9IGRldl90b192ZHBhKGRldik7Cj4gKwo+ICsJcmV0dXJuIHZk
cGFfdG9fdmR1c2UodmRwYSk7Cj4gK30KPiArCj4gK3N0YXRpYyBzdHJ1Y3QgdmR1c2VfZGV2X21z
ZyAqdmR1c2VfZmluZF9tc2coc3RydWN0IGxpc3RfaGVhZCAqaGVhZCwKPiArCQkJCQkgICAgdWlu
dDMyX3QgcmVxdWVzdF9pZCkKPiArewo+ICsJc3RydWN0IHZkdXNlX2Rldl9tc2cgKm1zZzsKPiAr
Cj4gKwlsaXN0X2Zvcl9lYWNoX2VudHJ5KG1zZywgaGVhZCwgbGlzdCkgewo+ICsJCWlmIChtc2ct
PnJlcS5yZXF1ZXN0X2lkID09IHJlcXVlc3RfaWQpIHsKPiArCQkJbGlzdF9kZWwoJm1zZy0+bGlz
dCk7Cj4gKwkJCXJldHVybiBtc2c7Cj4gKwkJfQo+ICsJfQo+ICsKPiArCXJldHVybiBOVUxMOwo+
ICt9Cj4gKwo+ICtzdGF0aWMgc3RydWN0IHZkdXNlX2Rldl9tc2cgKnZkdXNlX2RlcXVldWVfbXNn
KHN0cnVjdCBsaXN0X2hlYWQgKmhlYWQpCj4gK3sKPiArCXN0cnVjdCB2ZHVzZV9kZXZfbXNnICpt
c2cgPSBOVUxMOwo+ICsKPiArCWlmICghbGlzdF9lbXB0eShoZWFkKSkgewo+ICsJCW1zZyA9IGxp
c3RfZmlyc3RfZW50cnkoaGVhZCwgc3RydWN0IHZkdXNlX2Rldl9tc2csIGxpc3QpOwo+ICsJCWxp
c3RfZGVsKCZtc2ctPmxpc3QpOwo+ICsJfQo+ICsKPiArCXJldHVybiBtc2c7Cj4gK30KPiArCj4g
K3N0YXRpYyB2b2lkIHZkdXNlX2VucXVldWVfbXNnKHN0cnVjdCBsaXN0X2hlYWQgKmhlYWQsCj4g
KwkJCSAgICAgIHN0cnVjdCB2ZHVzZV9kZXZfbXNnICptc2cpCj4gK3sKPiArCWxpc3RfYWRkX3Rh
aWwoJm1zZy0+bGlzdCwgaGVhZCk7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgdmR1c2VfZGV2X21z
Z19zeW5jKHN0cnVjdCB2ZHVzZV9kZXYgKmRldiwKPiArCQkJICAgICAgc3RydWN0IHZkdXNlX2Rl
dl9tc2cgKm1zZykKPiArewo+ICsJaW50IHJldDsKPiArCj4gKwlpbml0X3dhaXRxdWV1ZV9oZWFk
KCZtc2ctPndhaXRxKTsKPiArCXNwaW5fbG9jaygmZGV2LT5tc2dfbG9jayk7Cj4gKwltc2ctPnJl
cS5yZXF1ZXN0X2lkID0gZGV2LT5tc2dfdW5pcXVlKys7Cj4gKwl2ZHVzZV9lbnF1ZXVlX21zZygm
ZGV2LT5zZW5kX2xpc3QsIG1zZyk7Cj4gKwl3YWtlX3VwKCZkZXYtPndhaXRxKTsKPiArCXNwaW5f
dW5sb2NrKCZkZXYtPm1zZ19sb2NrKTsKPiArCj4gKwl3YWl0X2V2ZW50X2tpbGxhYmxlX3RpbWVv
dXQobXNnLT53YWl0cSwgbXNnLT5jb21wbGV0ZWQsCj4gKwkJCQkgICAgVkRVU0VfUkVRVUVTVF9U
SU1FT1VUICogSFopOwo+ICsJc3Bpbl9sb2NrKCZkZXYtPm1zZ19sb2NrKTsKPiArCWlmICghbXNn
LT5jb21wbGV0ZWQpIHsKPiArCQlsaXN0X2RlbCgmbXNnLT5saXN0KTsKPiArCQltc2ctPnJlc3Au
cmVzdWx0ID0gVkRVU0VfUkVRX1JFU1VMVF9GQUlMRUQ7Cj4gKwl9Cj4gKwlyZXQgPSAobXNnLT5y
ZXNwLnJlc3VsdCA9PSBWRFVTRV9SRVFfUkVTVUxUX09LKSA/IDAgOiAtRUlPOwoKCkkgdGhpbmsg
d2Ugc2hvdWxkIG1hcmsgdGhlIGRldmljZSBhcyBtYWxmdW5jdGlvbiB3aGVuIHRoZXJlIGlzIGEg
dGltZW91dCAKYW5kIGZvcmJpZCBhbnkgdXNlcnNwYWNlIG9wZXJhdGlvbnMgZXhjZXB0IGZvciB0
aGUgZGVzdHJveSBhZnR3YXJkcyBmb3IgCnNhZmV0eS4KCgo+ICsJc3Bpbl91bmxvY2soJmRldi0+
bXNnX2xvY2spOwo+ICsKPiArCXJldHVybiByZXQ7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgdmR1
c2VfZGV2X2dldF92cV9zdGF0ZV9wYWNrZWQoc3RydWN0IHZkdXNlX2RldiAqZGV2LAo+ICsJCQkJ
CSBzdHJ1Y3QgdmR1c2VfdmlydHF1ZXVlICp2cSwKPiArCQkJCQkgc3RydWN0IHZkcGFfdnFfc3Rh
dGVfcGFja2VkICpwYWNrZWQpCj4gK3sKPiArCXN0cnVjdCB2ZHVzZV9kZXZfbXNnIG1zZyA9IHsg
MCB9Owo+ICsJaW50IHJldDsKPiArCj4gKwltc2cucmVxLnR5cGUgPSBWRFVTRV9HRVRfVlFfU1RB
VEU7Cj4gKwltc2cucmVxLnZxX3N0YXRlLmluZGV4ID0gdnEtPmluZGV4Owo+ICsKPiArCXJldCA9
IHZkdXNlX2Rldl9tc2dfc3luYyhkZXYsICZtc2cpOwo+ICsJaWYgKHJldCkKPiArCQlyZXR1cm4g
cmV0Owo+ICsKPiArCXBhY2tlZC0+bGFzdF9hdmFpbF9jb3VudGVyID0KPiArCQkJbXNnLnJlc3Au
dnFfc3RhdGUucGFja2VkLmxhc3RfYXZhaWxfY291bnRlcjsKPiArCXBhY2tlZC0+bGFzdF9hdmFp
bF9pZHggPSBtc2cucmVzcC52cV9zdGF0ZS5wYWNrZWQubGFzdF9hdmFpbF9pZHg7Cj4gKwlwYWNr
ZWQtPmxhc3RfdXNlZF9jb3VudGVyID0gbXNnLnJlc3AudnFfc3RhdGUucGFja2VkLmxhc3RfdXNl
ZF9jb3VudGVyOwo+ICsJcGFja2VkLT5sYXN0X3VzZWRfaWR4ID0gbXNnLnJlc3AudnFfc3RhdGUu
cGFja2VkLmxhc3RfdXNlZF9pZHg7Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRp
YyBpbnQgdmR1c2VfZGV2X2dldF92cV9zdGF0ZV9zcGxpdChzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYs
Cj4gKwkJCQkJc3RydWN0IHZkdXNlX3ZpcnRxdWV1ZSAqdnEsCj4gKwkJCQkJc3RydWN0IHZkcGFf
dnFfc3RhdGVfc3BsaXQgKnNwbGl0KQo+ICt7Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2X21zZyBtc2cg
PSB7IDAgfTsKPiArCWludCByZXQ7Cj4gKwo+ICsJbXNnLnJlcS50eXBlID0gVkRVU0VfR0VUX1ZR
X1NUQVRFOwo+ICsJbXNnLnJlcS52cV9zdGF0ZS5pbmRleCA9IHZxLT5pbmRleDsKPiArCj4gKwly
ZXQgPSB2ZHVzZV9kZXZfbXNnX3N5bmMoZGV2LCAmbXNnKTsKPiArCWlmIChyZXQpCj4gKwkJcmV0
dXJuIHJldDsKPiArCj4gKwlzcGxpdC0+YXZhaWxfaW5kZXggPSBtc2cucmVzcC52cV9zdGF0ZS5z
cGxpdC5hdmFpbF9pbmRleDsKPiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIGlu
dCB2ZHVzZV9kZXZfc2V0X3N0YXR1cyhzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYsIHU4IHN0YXR1cykK
PiArewo+ICsJc3RydWN0IHZkdXNlX2Rldl9tc2cgbXNnID0geyAwIH07Cj4gKwo+ICsJbXNnLnJl
cS50eXBlID0gVkRVU0VfU0VUX1NUQVRVUzsKPiArCW1zZy5yZXEucy5zdGF0dXMgPSBzdGF0dXM7
Cj4gKwo+ICsJcmV0dXJuIHZkdXNlX2Rldl9tc2dfc3luYyhkZXYsICZtc2cpOwo+ICt9Cj4gKwo+
ICtzdGF0aWMgaW50IHZkdXNlX2Rldl91cGRhdGVfaW90bGIoc3RydWN0IHZkdXNlX2RldiAqZGV2
LAo+ICsJCQkJICB1NjQgc3RhcnQsIHU2NCBsYXN0KQo+ICt7Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2
X21zZyBtc2cgPSB7IDAgfTsKPiArCj4gKwlpZiAobGFzdCA8IHN0YXJ0KQo+ICsJCXJldHVybiAt
RUlOVkFMOwo+ICsKPiArCW1zZy5yZXEudHlwZSA9IFZEVVNFX1VQREFURV9JT1RMQjsKPiArCW1z
Zy5yZXEuaW92YS5zdGFydCA9IHN0YXJ0Owo+ICsJbXNnLnJlcS5pb3ZhLmxhc3QgPSBsYXN0Owo+
ICsKPiArCXJldHVybiB2ZHVzZV9kZXZfbXNnX3N5bmMoZGV2LCAmbXNnKTsKPiArfQo+ICsKPiAr
c3RhdGljIHNzaXplX3QgdmR1c2VfZGV2X3JlYWRfaXRlcihzdHJ1Y3Qga2lvY2IgKmlvY2IsIHN0
cnVjdCBpb3ZfaXRlciAqdG8pCj4gK3sKPiArCXN0cnVjdCBmaWxlICpmaWxlID0gaW9jYi0+a2lf
ZmlscDsKPiArCXN0cnVjdCB2ZHVzZV9kZXYgKmRldiA9IGZpbGUtPnByaXZhdGVfZGF0YTsKPiAr
CXN0cnVjdCB2ZHVzZV9kZXZfbXNnICptc2c7Cj4gKwlpbnQgc2l6ZSA9IHNpemVvZihzdHJ1Y3Qg
dmR1c2VfZGV2X3JlcXVlc3QpOwo+ICsJc3NpemVfdCByZXQ7Cj4gKwo+ICsJaWYgKGlvdl9pdGVy
X2NvdW50KHRvKSA8IHNpemUpCj4gKwkJcmV0dXJuIC1FSU5WQUw7Cj4gKwo+ICsJc3Bpbl9sb2Nr
KCZkZXYtPm1zZ19sb2NrKTsKPiArCXdoaWxlICgxKSB7Cj4gKwkJbXNnID0gdmR1c2VfZGVxdWV1
ZV9tc2coJmRldi0+c2VuZF9saXN0KTsKPiArCQlpZiAobXNnKQo+ICsJCQlicmVhazsKPiArCj4g
KwkJcmV0ID0gLUVBR0FJTjsKPiArCQlpZiAoZmlsZS0+Zl9mbGFncyAmIE9fTk9OQkxPQ0spCj4g
KwkJCWdvdG8gdW5sb2NrOwo+ICsKPiArCQlzcGluX3VubG9jaygmZGV2LT5tc2dfbG9jayk7Cj4g
KwkJcmV0ID0gd2FpdF9ldmVudF9pbnRlcnJ1cHRpYmxlX2V4Y2x1c2l2ZShkZXYtPndhaXRxLAo+
ICsJCQkJCSFsaXN0X2VtcHR5KCZkZXYtPnNlbmRfbGlzdCkpOwo+ICsJCWlmIChyZXQpCj4gKwkJ
CXJldHVybiByZXQ7Cj4gKwo+ICsJCXNwaW5fbG9jaygmZGV2LT5tc2dfbG9jayk7Cj4gKwl9Cj4g
KwlzcGluX3VubG9jaygmZGV2LT5tc2dfbG9jayk7Cj4gKwlyZXQgPSBjb3B5X3RvX2l0ZXIoJm1z
Zy0+cmVxLCBzaXplLCB0byk7Cj4gKwlzcGluX2xvY2soJmRldi0+bXNnX2xvY2spOwo+ICsJaWYg
KHJldCAhPSBzaXplKSB7Cj4gKwkJcmV0ID0gLUVGQVVMVDsKPiArCQl2ZHVzZV9lbnF1ZXVlX21z
ZygmZGV2LT5zZW5kX2xpc3QsIG1zZyk7Cj4gKwkJZ290byB1bmxvY2s7Cj4gKwl9Cj4gKwl2ZHVz
ZV9lbnF1ZXVlX21zZygmZGV2LT5yZWN2X2xpc3QsIG1zZyk7Cj4gK3VubG9jazoKPiArCXNwaW5f
dW5sb2NrKCZkZXYtPm1zZ19sb2NrKTsKPiArCj4gKwlyZXR1cm4gcmV0Owo+ICt9Cj4gKwo+ICtz
dGF0aWMgc3NpemVfdCB2ZHVzZV9kZXZfd3JpdGVfaXRlcihzdHJ1Y3Qga2lvY2IgKmlvY2IsIHN0
cnVjdCBpb3ZfaXRlciAqZnJvbSkKPiArewo+ICsJc3RydWN0IGZpbGUgKmZpbGUgPSBpb2NiLT5r
aV9maWxwOwo+ICsJc3RydWN0IHZkdXNlX2RldiAqZGV2ID0gZmlsZS0+cHJpdmF0ZV9kYXRhOwo+
ICsJc3RydWN0IHZkdXNlX2Rldl9yZXNwb25zZSByZXNwOwo+ICsJc3RydWN0IHZkdXNlX2Rldl9t
c2cgKm1zZzsKPiArCXNpemVfdCByZXQ7Cj4gKwo+ICsJcmV0ID0gY29weV9mcm9tX2l0ZXIoJnJl
c3AsIHNpemVvZihyZXNwKSwgZnJvbSk7Cj4gKwlpZiAocmV0ICE9IHNpemVvZihyZXNwKSkKPiAr
CQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlzcGluX2xvY2soJmRldi0+bXNnX2xvY2spOwo+ICsJ
bXNnID0gdmR1c2VfZmluZF9tc2coJmRldi0+cmVjdl9saXN0LCByZXNwLnJlcXVlc3RfaWQpOwo+
ICsJaWYgKCFtc2cpIHsKPiArCQlyZXQgPSAtRU5PRU5UOwo+ICsJCWdvdG8gdW5sb2NrOwo+ICsJ
fQo+ICsKPiArCW1lbWNweSgmbXNnLT5yZXNwLCAmcmVzcCwgc2l6ZW9mKHJlc3ApKTsKPiArCW1z
Zy0+Y29tcGxldGVkID0gMTsKPiArCXdha2VfdXAoJm1zZy0+d2FpdHEpOwo+ICt1bmxvY2s6Cj4g
KwlzcGluX3VubG9jaygmZGV2LT5tc2dfbG9jayk7Cj4gKwo+ICsJcmV0dXJuIHJldDsKPiArfQo+
ICsKPiArc3RhdGljIF9fcG9sbF90IHZkdXNlX2Rldl9wb2xsKHN0cnVjdCBmaWxlICpmaWxlLCBw
b2xsX3RhYmxlICp3YWl0KQo+ICt7Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYgPSBmaWxlLT5w
cml2YXRlX2RhdGE7Cj4gKwlfX3BvbGxfdCBtYXNrID0gMDsKPiArCj4gKwlwb2xsX3dhaXQoZmls
ZSwgJmRldi0+d2FpdHEsIHdhaXQpOwo+ICsKPiArCWlmICghbGlzdF9lbXB0eSgmZGV2LT5zZW5k
X2xpc3QpKQo+ICsJCW1hc2sgfD0gRVBPTExJTiB8IEVQT0xMUkROT1JNOwo+ICsJaWYgKCFsaXN0
X2VtcHR5KCZkZXYtPnJlY3ZfbGlzdCkpCj4gKwkJbWFzayB8PSBFUE9MTE9VVCB8IEVQT0xMV1JO
T1JNOwo+ICsKPiArCXJldHVybiBtYXNrOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2ZHVzZV9k
ZXZfcmVzZXQoc3RydWN0IHZkdXNlX2RldiAqZGV2KQo+ICt7Cj4gKwlpbnQgaTsKPiArCXN0cnVj
dCB2ZHVzZV9pb3ZhX2RvbWFpbiAqZG9tYWluID0gZGV2LT5kb21haW47Cj4gKwo+ICsJLyogVGhl
IGNvaGVyZW50IG1hcHBpbmdzIGFyZSBoYW5kbGVkIGluIHZkdXNlX2Rldl9mcmVlX2NvaGVyZW50
KCkgKi8KPiArCWlmIChkb21haW4tPmJvdW5jZV9tYXApCj4gKwkJdmR1c2VfZG9tYWluX3Jlc2V0
X2JvdW5jZV9tYXAoZG9tYWluKTsKPiArCj4gKwlkZXYtPmRyaXZlcl9mZWF0dXJlcyA9IDA7Cj4g
KwlkZXYtPmdlbmVyYXRpb24rKzsKPiArCXNwaW5fbG9jaygmZGV2LT5pcnFfbG9jayk7Cj4gKwlk
ZXYtPmNvbmZpZ19jYi5jYWxsYmFjayA9IE5VTEw7Cj4gKwlkZXYtPmNvbmZpZ19jYi5wcml2YXRl
ID0gTlVMTDsKPiArCXNwaW5fdW5sb2NrKCZkZXYtPmlycV9sb2NrKTsKPiArCWZsdXNoX3dvcmso
JmRldi0+aW5qZWN0KTsKPiArCj4gKwlmb3IgKGkgPSAwOyBpIDwgZGV2LT52cV9udW07IGkrKykg
ewo+ICsJCXN0cnVjdCB2ZHVzZV92aXJ0cXVldWUgKnZxID0gJmRldi0+dnFzW2ldOwo+ICsKPiAr
CQl2cS0+cmVhZHkgPSBmYWxzZTsKPiArCQl2cS0+ZGVzY19hZGRyID0gMDsKPiArCQl2cS0+ZHJp
dmVyX2FkZHIgPSAwOwo+ICsJCXZxLT5kZXZpY2VfYWRkciA9IDA7Cj4gKwkJdnEtPm51bSA9IDA7
Cj4gKwkJbWVtc2V0KCZ2cS0+c3RhdGUsIDAsIHNpemVvZih2cS0+c3RhdGUpKTsKPiArCj4gKwkJ
c3Bpbl9sb2NrKCZ2cS0+a2lja19sb2NrKTsKPiArCQl2cS0+a2lja2VkID0gZmFsc2U7Cj4gKwkJ
aWYgKHZxLT5raWNrZmQpCj4gKwkJCWV2ZW50ZmRfY3R4X3B1dCh2cS0+a2lja2ZkKTsKPiArCQl2
cS0+a2lja2ZkID0gTlVMTDsKPiArCQlzcGluX3VubG9jaygmdnEtPmtpY2tfbG9jayk7Cj4gKwo+
ICsJCXNwaW5fbG9jaygmdnEtPmlycV9sb2NrKTsKPiArCQl2cS0+Y2IuY2FsbGJhY2sgPSBOVUxM
Owo+ICsJCXZxLT5jYi5wcml2YXRlID0gTlVMTDsKPiArCQlzcGluX3VubG9jaygmdnEtPmlycV9s
b2NrKTsKPiArCQlmbHVzaF93b3JrKCZ2cS0+aW5qZWN0KTsKPiArCX0KPiArfQo+ICsKPiArc3Rh
dGljIGludCB2ZHVzZV92ZHBhX3NldF92cV9hZGRyZXNzKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRw
YSwgdTE2IGlkeCwKPiArCQkJCXU2NCBkZXNjX2FyZWEsIHU2NCBkcml2ZXJfYXJlYSwKPiArCQkJ
CXU2NCBkZXZpY2VfYXJlYSkKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAqZGV2ID0gdmRwYV90
b192ZHVzZSh2ZHBhKTsKPiArCXN0cnVjdCB2ZHVzZV92aXJ0cXVldWUgKnZxID0gJmRldi0+dnFz
W2lkeF07Cj4gKwo+ICsJdnEtPmRlc2NfYWRkciA9IGRlc2NfYXJlYTsKPiArCXZxLT5kcml2ZXJf
YWRkciA9IGRyaXZlcl9hcmVhOwo+ICsJdnEtPmRldmljZV9hZGRyID0gZGV2aWNlX2FyZWE7Cj4g
Kwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHZkdXNlX3ZkcGFfa2lja192
cShzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEsIHUxNiBpZHgpCj4gK3sKPiArCXN0cnVjdCB2ZHVz
ZV9kZXYgKmRldiA9IHZkcGFfdG9fdmR1c2UodmRwYSk7Cj4gKwlzdHJ1Y3QgdmR1c2VfdmlydHF1
ZXVlICp2cSA9ICZkZXYtPnZxc1tpZHhdOwo+ICsKPiArCXNwaW5fbG9jaygmdnEtPmtpY2tfbG9j
ayk7Cj4gKwlpZiAoIXZxLT5yZWFkeSkKPiArCQlnb3RvIHVubG9jazsKPiArCj4gKwlpZiAodnEt
PmtpY2tmZCkKPiArCQlldmVudGZkX3NpZ25hbCh2cS0+a2lja2ZkLCAxKTsKPiArCWVsc2UKPiAr
CQl2cS0+a2lja2VkID0gdHJ1ZTsKPiArdW5sb2NrOgo+ICsJc3Bpbl91bmxvY2soJnZxLT5raWNr
X2xvY2spOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2ZHVzZV92ZHBhX3NldF92cV9jYihzdHJ1
Y3QgdmRwYV9kZXZpY2UgKnZkcGEsIHUxNiBpZHgsCj4gKwkJCSAgICAgIHN0cnVjdCB2ZHBhX2Nh
bGxiYWNrICpjYikKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAqZGV2ID0gdmRwYV90b192ZHVz
ZSh2ZHBhKTsKPiArCXN0cnVjdCB2ZHVzZV92aXJ0cXVldWUgKnZxID0gJmRldi0+dnFzW2lkeF07
Cj4gKwo+ICsJc3Bpbl9sb2NrKCZ2cS0+aXJxX2xvY2spOwo+ICsJdnEtPmNiLmNhbGxiYWNrID0g
Y2ItPmNhbGxiYWNrOwo+ICsJdnEtPmNiLnByaXZhdGUgPSBjYi0+cHJpdmF0ZTsKPiArCXNwaW5f
dW5sb2NrKCZ2cS0+aXJxX2xvY2spOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2ZHVzZV92ZHBh
X3NldF92cV9udW0oc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhLCB1MTYgaWR4LCB1MzIgbnVtKQo+
ICt7Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYgPSB2ZHBhX3RvX3ZkdXNlKHZkcGEpOwo+ICsJ
c3RydWN0IHZkdXNlX3ZpcnRxdWV1ZSAqdnEgPSAmZGV2LT52cXNbaWR4XTsKPiArCj4gKwl2cS0+
bnVtID0gbnVtOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2ZHVzZV92ZHBhX3NldF92cV9yZWFk
eShzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEsCj4gKwkJCQkJdTE2IGlkeCwgYm9vbCByZWFkeSkK
PiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAqZGV2ID0gdmRwYV90b192ZHVzZSh2ZHBhKTsKPiAr
CXN0cnVjdCB2ZHVzZV92aXJ0cXVldWUgKnZxID0gJmRldi0+dnFzW2lkeF07Cj4gKwo+ICsJdnEt
PnJlYWR5ID0gcmVhZHk7Cj4gK30KPiArCj4gK3N0YXRpYyBib29sIHZkdXNlX3ZkcGFfZ2V0X3Zx
X3JlYWR5KHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSwgdTE2IGlkeCkKPiArewo+ICsJc3RydWN0
IHZkdXNlX2RldiAqZGV2ID0gdmRwYV90b192ZHVzZSh2ZHBhKTsKPiArCXN0cnVjdCB2ZHVzZV92
aXJ0cXVldWUgKnZxID0gJmRldi0+dnFzW2lkeF07Cj4gKwo+ICsJcmV0dXJuIHZxLT5yZWFkeTsK
PiArfQo+ICsKPiArc3RhdGljIGludCB2ZHVzZV92ZHBhX3NldF92cV9zdGF0ZShzdHJ1Y3QgdmRw
YV9kZXZpY2UgKnZkcGEsIHUxNiBpZHgsCj4gKwkJCQljb25zdCBzdHJ1Y3QgdmRwYV92cV9zdGF0
ZSAqc3RhdGUpCj4gK3sKPiArCXN0cnVjdCB2ZHVzZV9kZXYgKmRldiA9IHZkcGFfdG9fdmR1c2Uo
dmRwYSk7Cj4gKwlzdHJ1Y3QgdmR1c2VfdmlydHF1ZXVlICp2cSA9ICZkZXYtPnZxc1tpZHhdOwo+
ICsKPiArCWlmIChkZXYtPmRyaXZlcl9mZWF0dXJlcyAmIEJJVF9VTEwoVklSVElPX0ZfUklOR19Q
QUNLRUQpKSB7Cj4gKwkJdnEtPnN0YXRlLnBhY2tlZC5sYXN0X2F2YWlsX2NvdW50ZXIgPQo+ICsJ
CQkJc3RhdGUtPnBhY2tlZC5sYXN0X2F2YWlsX2NvdW50ZXI7Cj4gKwkJdnEtPnN0YXRlLnBhY2tl
ZC5sYXN0X2F2YWlsX2lkeCA9IHN0YXRlLT5wYWNrZWQubGFzdF9hdmFpbF9pZHg7Cj4gKwkJdnEt
PnN0YXRlLnBhY2tlZC5sYXN0X3VzZWRfY291bnRlciA9Cj4gKwkJCQlzdGF0ZS0+cGFja2VkLmxh
c3RfdXNlZF9jb3VudGVyOwo+ICsJCXZxLT5zdGF0ZS5wYWNrZWQubGFzdF91c2VkX2lkeCA9IHN0
YXRlLT5wYWNrZWQubGFzdF91c2VkX2lkeDsKPiArCX0gZWxzZQo+ICsJCXZxLT5zdGF0ZS5zcGxp
dC5hdmFpbF9pbmRleCA9IHN0YXRlLT5zcGxpdC5hdmFpbF9pbmRleDsKPiArCj4gKwlyZXR1cm4g
MDsKPiArfQo+ICsKPiArc3RhdGljIGludCB2ZHVzZV92ZHBhX2dldF92cV9zdGF0ZShzdHJ1Y3Qg
dmRwYV9kZXZpY2UgKnZkcGEsIHUxNiBpZHgsCj4gKwkJCQlzdHJ1Y3QgdmRwYV92cV9zdGF0ZSAq
c3RhdGUpCj4gK3sKPiArCXN0cnVjdCB2ZHVzZV9kZXYgKmRldiA9IHZkcGFfdG9fdmR1c2UodmRw
YSk7Cj4gKwlzdHJ1Y3QgdmR1c2VfdmlydHF1ZXVlICp2cSA9ICZkZXYtPnZxc1tpZHhdOwo+ICsK
PiArCWlmIChkZXYtPmRyaXZlcl9mZWF0dXJlcyAmIEJJVF9VTEwoVklSVElPX0ZfUklOR19QQUNL
RUQpKQo+ICsJCXJldHVybiB2ZHVzZV9kZXZfZ2V0X3ZxX3N0YXRlX3BhY2tlZChkZXYsIHZxLCAm
c3RhdGUtPnBhY2tlZCk7Cj4gKwo+ICsJcmV0dXJuIHZkdXNlX2Rldl9nZXRfdnFfc3RhdGVfc3Bs
aXQoZGV2LCB2cSwgJnN0YXRlLT5zcGxpdCk7Cj4gK30KPiArCj4gK3N0YXRpYyB1MzIgdmR1c2Vf
dmRwYV9nZXRfdnFfYWxpZ24oc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhKQo+ICt7Cj4gKwlzdHJ1
Y3QgdmR1c2VfZGV2ICpkZXYgPSB2ZHBhX3RvX3ZkdXNlKHZkcGEpOwo+ICsKPiArCXJldHVybiBk
ZXYtPnZxX2FsaWduOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdTY0IHZkdXNlX3ZkcGFfZ2V0X2ZlYXR1
cmVzKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSkKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAq
ZGV2ID0gdmRwYV90b192ZHVzZSh2ZHBhKTsKPiArCj4gKwlyZXR1cm4gZGV2LT5kZXZpY2VfZmVh
dHVyZXM7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgdmR1c2VfdmRwYV9zZXRfZmVhdHVyZXMoc3Ry
dWN0IHZkcGFfZGV2aWNlICp2ZHBhLCB1NjQgZmVhdHVyZXMpCj4gK3sKPiArCXN0cnVjdCB2ZHVz
ZV9kZXYgKmRldiA9IHZkcGFfdG9fdmR1c2UodmRwYSk7Cj4gKwo+ICsJZGV2LT5kcml2ZXJfZmVh
dHVyZXMgPSBmZWF0dXJlczsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2
ZHVzZV92ZHBhX3NldF9jb25maWdfY2Ioc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhLAo+ICsJCQkJ
ICBzdHJ1Y3QgdmRwYV9jYWxsYmFjayAqY2IpCj4gK3sKPiArCXN0cnVjdCB2ZHVzZV9kZXYgKmRl
diA9IHZkcGFfdG9fdmR1c2UodmRwYSk7Cj4gKwo+ICsJc3Bpbl9sb2NrKCZkZXYtPmlycV9sb2Nr
KTsKPiArCWRldi0+Y29uZmlnX2NiLmNhbGxiYWNrID0gY2ItPmNhbGxiYWNrOwo+ICsJZGV2LT5j
b25maWdfY2IucHJpdmF0ZSA9IGNiLT5wcml2YXRlOwo+ICsJc3Bpbl91bmxvY2soJmRldi0+aXJx
X2xvY2spOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdTE2IHZkdXNlX3ZkcGFfZ2V0X3ZxX251bV9tYXgo
c3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhLCB1MTYgaWR4KQo+ICt7Cj4gKwlzdHJ1Y3QgdmR1c2Vf
ZGV2ICpkZXYgPSB2ZHBhX3RvX3ZkdXNlKHZkcGEpOwo+ICsKPiArCXJldHVybiBkZXYtPnZxc1tp
ZHhdLm51bV9tYXg7Cj4gK30KPiArCj4gK3N0YXRpYyB1MzIgdmR1c2VfdmRwYV9nZXRfZGV2aWNl
X2lkKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSkKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAq
ZGV2ID0gdmRwYV90b192ZHVzZSh2ZHBhKTsKPiArCj4gKwlyZXR1cm4gZGV2LT5kZXZpY2VfaWQ7
Cj4gK30KPiArCj4gK3N0YXRpYyB1MzIgdmR1c2VfdmRwYV9nZXRfdmVuZG9yX2lkKHN0cnVjdCB2
ZHBhX2RldmljZSAqdmRwYSkKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAqZGV2ID0gdmRwYV90
b192ZHVzZSh2ZHBhKTsKPiArCj4gKwlyZXR1cm4gZGV2LT52ZW5kb3JfaWQ7Cj4gK30KPiArCj4g
K3N0YXRpYyB1OCB2ZHVzZV92ZHBhX2dldF9zdGF0dXMoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBh
KQo+ICt7Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYgPSB2ZHBhX3RvX3ZkdXNlKHZkcGEpOwo+
ICsKPiArCXJldHVybiBkZXYtPnN0YXR1czsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgdmR1c2Vf
dmRwYV9zZXRfc3RhdHVzKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSwgdTggc3RhdHVzKQo+ICt7
Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYgPSB2ZHBhX3RvX3ZkdXNlKHZkcGEpOwo+ICsKPiAr
CWlmICh2ZHVzZV9kZXZfc2V0X3N0YXR1cyhkZXYsIHN0YXR1cykpCj4gKwkJcmV0dXJuOwo+ICsK
PiArCWRldi0+c3RhdHVzID0gc3RhdHVzOwoKCkl0IGxvb2tzIHRvIG1lIHN1Y2ggZGVzaWduIGV4
Y2x1ZGUgdGhlIHBvc3NpYmlsaXR5IG9mIGxldHRpbmcgdXNlcnNwYWNlIApkZXZpY2UgdG8gc2V0
IGJpdCBsaWtlIChORUVEU19SRVNFVCkgaW4gdGhlIGZ1dHVyZS4KCkkgd29uZGVyIGlmIGl0J3Mg
YmV0dGVyIHRvIGRvIHNvbWV0aGluZyBzaW1pbGFyIHRvIGNjdzoKCjEpIHJlcXVpcmVzIHRoZSB1
c2Vyc3BhY2UgdG8gdXBkYXRlIHRoZSBzdGF0dXMgYml0IGluIHRoZSByZXNwb25zZQoyKSB1cGRh
dGUgdGhlIGRldi0+c3RhdHVzIHRvIHRoZSBzdGF0dXMgaW4gdGhlIHJlc3BvbnNlIGlmIG5vIHRp
bWVvdXQKClRoZW4gdXNlcnNwYWNlIGNvdWxkIHRoZW4gc2V0IE5FRURTX1JFU0VUIGlmIG5lY2Vz
c2FyeS4KCgo+ICsJaWYgKHN0YXR1cyA9PSAwKQo+ICsJCXZkdXNlX2Rldl9yZXNldChkZXYpOwo+
ICt9Cj4gKwo+ICtzdGF0aWMgc2l6ZV90IHZkdXNlX3ZkcGFfZ2V0X2NvbmZpZ19zaXplKHN0cnVj
dCB2ZHBhX2RldmljZSAqdmRwYSkKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAqZGV2ID0gdmRw
YV90b192ZHVzZSh2ZHBhKTsKPiArCj4gKwlyZXR1cm4gZGV2LT5jb25maWdfc2l6ZTsKPiArfQo+
ICsKPiArc3RhdGljIHZvaWQgdmR1c2VfdmRwYV9nZXRfY29uZmlnKHN0cnVjdCB2ZHBhX2Rldmlj
ZSAqdmRwYSwgdW5zaWduZWQgaW50IG9mZnNldCwKPiArCQkJCSAgdm9pZCAqYnVmLCB1bnNpZ25l
ZCBpbnQgbGVuKQo+ICt7Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYgPSB2ZHBhX3RvX3ZkdXNl
KHZkcGEpOwo+ICsKPiArCWlmIChsZW4gPiBkZXYtPmNvbmZpZ19zaXplIC0gb2Zmc2V0KQo+ICsJ
CXJldHVybjsKPiArCj4gKwltZW1jcHkoYnVmLCBkZXYtPmNvbmZpZyArIG9mZnNldCwgbGVuKTsK
PiArfQo+ICsKPiArc3RhdGljIHZvaWQgdmR1c2VfdmRwYV9zZXRfY29uZmlnKHN0cnVjdCB2ZHBh
X2RldmljZSAqdmRwYSwgdW5zaWduZWQgaW50IG9mZnNldCwKPiArCQkJY29uc3Qgdm9pZCAqYnVm
LCB1bnNpZ25lZCBpbnQgbGVuKQo+ICt7Cj4gKwkvKiBOb3cgd2Ugb25seSBzdXBwb3J0IHJlYWQt
b25seSBjb25maWd1cmF0aW9uIHNwYWNlICovCj4gK30KPiArCj4gK3N0YXRpYyB1MzIgdmR1c2Vf
dmRwYV9nZXRfZ2VuZXJhdGlvbihzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEpCj4gK3sKPiArCXN0
cnVjdCB2ZHVzZV9kZXYgKmRldiA9IHZkcGFfdG9fdmR1c2UodmRwYSk7Cj4gKwo+ICsJcmV0dXJu
IGRldi0+Z2VuZXJhdGlvbjsKPiArfQo+ICsKPiArc3RhdGljIGludCB2ZHVzZV92ZHBhX3NldF9t
YXAoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhLAo+ICsJCQkJc3RydWN0IHZob3N0X2lvdGxiICpp
b3RsYikKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAqZGV2ID0gdmRwYV90b192ZHVzZSh2ZHBh
KTsKPiArCWludCByZXQ7Cj4gKwo+ICsJcmV0ID0gdmR1c2VfZG9tYWluX3NldF9tYXAoZGV2LT5k
b21haW4sIGlvdGxiKTsKPiArCWlmIChyZXQpCj4gKwkJcmV0dXJuIHJldDsKPiArCj4gKwlyZXQg
PSB2ZHVzZV9kZXZfdXBkYXRlX2lvdGxiKGRldiwgMFVMTCwgVUxMT05HX01BWCk7Cj4gKwlpZiAo
cmV0KSB7Cj4gKwkJdmR1c2VfZG9tYWluX2NsZWFyX21hcChkZXYtPmRvbWFpbiwgaW90bGIpOwo+
ICsJCXJldHVybiByZXQ7Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRp
YyB2b2lkIHZkdXNlX3ZkcGFfZnJlZShzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGEpCj4gK3sKPiAr
CXN0cnVjdCB2ZHVzZV9kZXYgKmRldiA9IHZkcGFfdG9fdmR1c2UodmRwYSk7Cj4gKwo+ICsJZGV2
LT52ZGV2ID0gTlVMTDsKPiArfQo+ICsKPiArc3RhdGljIGNvbnN0IHN0cnVjdCB2ZHBhX2NvbmZp
Z19vcHMgdmR1c2VfdmRwYV9jb25maWdfb3BzID0gewo+ICsJLnNldF92cV9hZGRyZXNzCQk9IHZk
dXNlX3ZkcGFfc2V0X3ZxX2FkZHJlc3MsCj4gKwkua2lja192cQkJPSB2ZHVzZV92ZHBhX2tpY2tf
dnEsCj4gKwkuc2V0X3ZxX2NiCQk9IHZkdXNlX3ZkcGFfc2V0X3ZxX2NiLAo+ICsJLnNldF92cV9u
dW0gICAgICAgICAgICAgPSB2ZHVzZV92ZHBhX3NldF92cV9udW0sCj4gKwkuc2V0X3ZxX3JlYWR5
CQk9IHZkdXNlX3ZkcGFfc2V0X3ZxX3JlYWR5LAo+ICsJLmdldF92cV9yZWFkeQkJPSB2ZHVzZV92
ZHBhX2dldF92cV9yZWFkeSwKPiArCS5zZXRfdnFfc3RhdGUJCT0gdmR1c2VfdmRwYV9zZXRfdnFf
c3RhdGUsCj4gKwkuZ2V0X3ZxX3N0YXRlCQk9IHZkdXNlX3ZkcGFfZ2V0X3ZxX3N0YXRlLAo+ICsJ
LmdldF92cV9hbGlnbgkJPSB2ZHVzZV92ZHBhX2dldF92cV9hbGlnbiwKPiArCS5nZXRfZmVhdHVy
ZXMJCT0gdmR1c2VfdmRwYV9nZXRfZmVhdHVyZXMsCj4gKwkuc2V0X2ZlYXR1cmVzCQk9IHZkdXNl
X3ZkcGFfc2V0X2ZlYXR1cmVzLAo+ICsJLnNldF9jb25maWdfY2IJCT0gdmR1c2VfdmRwYV9zZXRf
Y29uZmlnX2NiLAo+ICsJLmdldF92cV9udW1fbWF4CQk9IHZkdXNlX3ZkcGFfZ2V0X3ZxX251bV9t
YXgsCj4gKwkuZ2V0X2RldmljZV9pZAkJPSB2ZHVzZV92ZHBhX2dldF9kZXZpY2VfaWQsCj4gKwku
Z2V0X3ZlbmRvcl9pZAkJPSB2ZHVzZV92ZHBhX2dldF92ZW5kb3JfaWQsCj4gKwkuZ2V0X3N0YXR1
cwkJPSB2ZHVzZV92ZHBhX2dldF9zdGF0dXMsCj4gKwkuc2V0X3N0YXR1cwkJPSB2ZHVzZV92ZHBh
X3NldF9zdGF0dXMsCj4gKwkuZ2V0X2NvbmZpZ19zaXplCT0gdmR1c2VfdmRwYV9nZXRfY29uZmln
X3NpemUsCj4gKwkuZ2V0X2NvbmZpZwkJPSB2ZHVzZV92ZHBhX2dldF9jb25maWcsCj4gKwkuc2V0
X2NvbmZpZwkJPSB2ZHVzZV92ZHBhX3NldF9jb25maWcsCj4gKwkuZ2V0X2dlbmVyYXRpb24JCT0g
dmR1c2VfdmRwYV9nZXRfZ2VuZXJhdGlvbiwKPiArCS5zZXRfbWFwCQk9IHZkdXNlX3ZkcGFfc2V0
X21hcCwKPiArCS5mcmVlCQkJPSB2ZHVzZV92ZHBhX2ZyZWUsCj4gK307Cj4gKwo+ICtzdGF0aWMg
ZG1hX2FkZHJfdCB2ZHVzZV9kZXZfbWFwX3BhZ2Uoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3Qg
cGFnZSAqcGFnZSwKPiArCQkJCSAgICAgdW5zaWduZWQgbG9uZyBvZmZzZXQsIHNpemVfdCBzaXpl
LAo+ICsJCQkJICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXIsCj4gKwkJCQkgICAgIHVu
c2lnbmVkIGxvbmcgYXR0cnMpCj4gK3sKPiArCXN0cnVjdCB2ZHVzZV9kZXYgKnZkZXYgPSBkZXZf
dG9fdmR1c2UoZGV2KTsKPiArCXN0cnVjdCB2ZHVzZV9pb3ZhX2RvbWFpbiAqZG9tYWluID0gdmRl
di0+ZG9tYWluOwo+ICsKPiArCXJldHVybiB2ZHVzZV9kb21haW5fbWFwX3BhZ2UoZG9tYWluLCBw
YWdlLCBvZmZzZXQsIHNpemUsIGRpciwgYXR0cnMpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2
ZHVzZV9kZXZfdW5tYXBfcGFnZShzdHJ1Y3QgZGV2aWNlICpkZXYsIGRtYV9hZGRyX3QgZG1hX2Fk
ZHIsCj4gKwkJCQlzaXplX3Qgc2l6ZSwgZW51bSBkbWFfZGF0YV9kaXJlY3Rpb24gZGlyLAo+ICsJ
CQkJdW5zaWduZWQgbG9uZyBhdHRycykKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAqdmRldiA9
IGRldl90b192ZHVzZShkZXYpOwo+ICsJc3RydWN0IHZkdXNlX2lvdmFfZG9tYWluICpkb21haW4g
PSB2ZGV2LT5kb21haW47Cj4gKwo+ICsJcmV0dXJuIHZkdXNlX2RvbWFpbl91bm1hcF9wYWdlKGRv
bWFpbiwgZG1hX2FkZHIsIHNpemUsIGRpciwgYXR0cnMpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9p
ZCAqdmR1c2VfZGV2X2FsbG9jX2NvaGVyZW50KHN0cnVjdCBkZXZpY2UgKmRldiwgc2l6ZV90IHNp
emUsCj4gKwkJCQkJZG1hX2FkZHJfdCAqZG1hX2FkZHIsIGdmcF90IGZsYWcsCj4gKwkJCQkJdW5z
aWduZWQgbG9uZyBhdHRycykKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAqdmRldiA9IGRldl90
b192ZHVzZShkZXYpOwo+ICsJc3RydWN0IHZkdXNlX2lvdmFfZG9tYWluICpkb21haW4gPSB2ZGV2
LT5kb21haW47Cj4gKwl1bnNpZ25lZCBsb25nIGlvdmE7Cj4gKwl2b2lkICphZGRyOwo+ICsKPiAr
CSpkbWFfYWRkciA9IERNQV9NQVBQSU5HX0VSUk9SOwo+ICsJYWRkciA9IHZkdXNlX2RvbWFpbl9h
bGxvY19jb2hlcmVudChkb21haW4sIHNpemUsCj4gKwkJCQkoZG1hX2FkZHJfdCAqKSZpb3ZhLCBm
bGFnLCBhdHRycyk7Cj4gKwlpZiAoIWFkZHIpCj4gKwkJcmV0dXJuIE5VTEw7Cj4gKwo+ICsJKmRt
YV9hZGRyID0gKGRtYV9hZGRyX3QpaW92YTsKPiArCj4gKwlyZXR1cm4gYWRkcjsKPiArfQo+ICsK
PiArc3RhdGljIHZvaWQgdmR1c2VfZGV2X2ZyZWVfY29oZXJlbnQoc3RydWN0IGRldmljZSAqZGV2
LCBzaXplX3Qgc2l6ZSwKPiArCQkJCQl2b2lkICp2YWRkciwgZG1hX2FkZHJfdCBkbWFfYWRkciwK
PiArCQkJCQl1bnNpZ25lZCBsb25nIGF0dHJzKQo+ICt7Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2ICp2
ZGV2ID0gZGV2X3RvX3ZkdXNlKGRldik7Cj4gKwlzdHJ1Y3QgdmR1c2VfaW92YV9kb21haW4gKmRv
bWFpbiA9IHZkZXYtPmRvbWFpbjsKPiArCj4gKwl2ZHVzZV9kb21haW5fZnJlZV9jb2hlcmVudChk
b21haW4sIHNpemUsIHZhZGRyLCBkbWFfYWRkciwgYXR0cnMpOwo+ICt9Cj4gKwo+ICtzdGF0aWMg
c2l6ZV90IHZkdXNlX2Rldl9tYXhfbWFwcGluZ19zaXplKHN0cnVjdCBkZXZpY2UgKmRldikKPiAr
ewo+ICsJc3RydWN0IHZkdXNlX2RldiAqdmRldiA9IGRldl90b192ZHVzZShkZXYpOwo+ICsJc3Ry
dWN0IHZkdXNlX2lvdmFfZG9tYWluICpkb21haW4gPSB2ZGV2LT5kb21haW47Cj4gKwo+ICsJcmV0
dXJuIGRvbWFpbi0+Ym91bmNlX3NpemU7Cj4gK30KPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3Qg
ZG1hX21hcF9vcHMgdmR1c2VfZGV2X2RtYV9vcHMgPSB7Cj4gKwkubWFwX3BhZ2UgPSB2ZHVzZV9k
ZXZfbWFwX3BhZ2UsCj4gKwkudW5tYXBfcGFnZSA9IHZkdXNlX2Rldl91bm1hcF9wYWdlLAo+ICsJ
LmFsbG9jID0gdmR1c2VfZGV2X2FsbG9jX2NvaGVyZW50LAo+ICsJLmZyZWUgPSB2ZHVzZV9kZXZf
ZnJlZV9jb2hlcmVudCwKPiArCS5tYXhfbWFwcGluZ19zaXplID0gdmR1c2VfZGV2X21heF9tYXBw
aW5nX3NpemUsCj4gK307Cj4gKwo+ICtzdGF0aWMgdW5zaWduZWQgaW50IHBlcm1fdG9fZmlsZV9m
bGFncyh1OCBwZXJtKQo+ICt7Cj4gKwl1bnNpZ25lZCBpbnQgZmxhZ3MgPSAwOwo+ICsKPiArCXN3
aXRjaCAocGVybSkgewo+ICsJY2FzZSBWRFVTRV9BQ0NFU1NfV086Cj4gKwkJZmxhZ3MgfD0gT19X
Uk9OTFk7Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIFZEVVNFX0FDQ0VTU19STzoKPiArCQlmbGFncyB8
PSBPX1JET05MWTsKPiArCQlicmVhazsKPiArCWNhc2UgVkRVU0VfQUNDRVNTX1JXOgo+ICsJCWZs
YWdzIHw9IE9fUkRXUjsKPiArCQlicmVhazsKPiArCWRlZmF1bHQ6Cj4gKwkJV0FSTigxLCAiaW52
YWxpZGF0ZSB2aG9zdCBJT1RMQiBwZXJtaXNzaW9uXG4iKTsKPiArCQlicmVhazsKPiArCX0KPiAr
Cj4gKwlyZXR1cm4gZmxhZ3M7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgdmR1c2Vfa2lja2ZkX3Nl
dHVwKHN0cnVjdCB2ZHVzZV9kZXYgKmRldiwKPiArCQkJc3RydWN0IHZkdXNlX3ZxX2V2ZW50ZmQg
KmV2ZW50ZmQpCj4gK3sKPiArCXN0cnVjdCBldmVudGZkX2N0eCAqY3R4ID0gTlVMTDsKPiArCXN0
cnVjdCB2ZHVzZV92aXJ0cXVldWUgKnZxOwo+ICsJdTMyIGluZGV4Owo+ICsKPiArCWlmIChldmVu
dGZkLT5pbmRleCA+PSBkZXYtPnZxX251bSkKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwlp
bmRleCA9IGFycmF5X2luZGV4X25vc3BlYyhldmVudGZkLT5pbmRleCwgZGV2LT52cV9udW0pOwo+
ICsJdnEgPSAmZGV2LT52cXNbaW5kZXhdOwo+ICsJaWYgKGV2ZW50ZmQtPmZkID49IDApIHsKPiAr
CQljdHggPSBldmVudGZkX2N0eF9mZGdldChldmVudGZkLT5mZCk7Cj4gKwkJaWYgKElTX0VSUihj
dHgpKQo+ICsJCQlyZXR1cm4gUFRSX0VSUihjdHgpOwo+ICsJfSBlbHNlIGlmIChldmVudGZkLT5m
ZCAhPSBWRFVTRV9FVkVOVEZEX0RFQVNTSUdOKQo+ICsJCXJldHVybiAwOwo+ICsKPiArCXNwaW5f
bG9jaygmdnEtPmtpY2tfbG9jayk7Cj4gKwlpZiAodnEtPmtpY2tmZCkKPiArCQlldmVudGZkX2N0
eF9wdXQodnEtPmtpY2tmZCk7Cj4gKwl2cS0+a2lja2ZkID0gY3R4Owo+ICsJaWYgKHZxLT5yZWFk
eSAmJiB2cS0+a2lja2VkICYmIHZxLT5raWNrZmQpIHsKPiArCQlldmVudGZkX3NpZ25hbCh2cS0+
a2lja2ZkLCAxKTsKPiArCQl2cS0+a2lja2VkID0gZmFsc2U7Cj4gKwl9Cj4gKwlzcGluX3VubG9j
aygmdnEtPmtpY2tfbG9jayk7Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyBi
b29sIHZkdXNlX2Rldl9pc19yZWFkeShzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYpCj4gK3sKPiArCWlu
dCBpOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCBkZXYtPnZxX251bTsgaSsrKQo+ICsJCWlmICgh
ZGV2LT52cXNbaV0ubnVtX21heCkKPiArCQkJcmV0dXJuIGZhbHNlOwo+ICsKPiArCXJldHVybiB0
cnVlOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2ZHVzZV9kZXZfaXJxX2luamVjdChzdHJ1Y3Qg
d29ya19zdHJ1Y3QgKndvcmspCj4gK3sKPiArCXN0cnVjdCB2ZHVzZV9kZXYgKmRldiA9IGNvbnRh
aW5lcl9vZih3b3JrLCBzdHJ1Y3QgdmR1c2VfZGV2LCBpbmplY3QpOwo+ICsKPiArCXNwaW5fbG9j
a19pcnEoJmRldi0+aXJxX2xvY2spOwo+ICsJaWYgKGRldi0+Y29uZmlnX2NiLmNhbGxiYWNrKQo+
ICsJCWRldi0+Y29uZmlnX2NiLmNhbGxiYWNrKGRldi0+Y29uZmlnX2NiLnByaXZhdGUpOwo+ICsJ
c3Bpbl91bmxvY2tfaXJxKCZkZXYtPmlycV9sb2NrKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQg
dmR1c2VfdnFfaXJxX2luamVjdChzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCj4gK3sKPiArCXN0
cnVjdCB2ZHVzZV92aXJ0cXVldWUgKnZxID0gY29udGFpbmVyX29mKHdvcmssCj4gKwkJCQkJc3Ry
dWN0IHZkdXNlX3ZpcnRxdWV1ZSwgaW5qZWN0KTsKPiArCj4gKwlzcGluX2xvY2tfaXJxKCZ2cS0+
aXJxX2xvY2spOwo+ICsJaWYgKHZxLT5yZWFkeSAmJiB2cS0+Y2IuY2FsbGJhY2spCj4gKwkJdnEt
PmNiLmNhbGxiYWNrKHZxLT5jYi5wcml2YXRlKTsKPiArCXNwaW5fdW5sb2NrX2lycSgmdnEtPmly
cV9sb2NrKTsKPiArfQo+ICsKPiArc3RhdGljIGxvbmcgdmR1c2VfZGV2X2lvY3RsKHN0cnVjdCBm
aWxlICpmaWxlLCB1bnNpZ25lZCBpbnQgY21kLAo+ICsJCQkgICAgdW5zaWduZWQgbG9uZyBhcmcp
Cj4gK3sKPiArCXN0cnVjdCB2ZHVzZV9kZXYgKmRldiA9IGZpbGUtPnByaXZhdGVfZGF0YTsKPiAr
CXZvaWQgX191c2VyICphcmdwID0gKHZvaWQgX191c2VyICopYXJnOwo+ICsJaW50IHJldDsKPiAr
Cj4gKwlzd2l0Y2ggKGNtZCkgewo+ICsJY2FzZSBWRFVTRV9JT1RMQl9HRVRfRkQ6IHsKPiArCQlz
dHJ1Y3QgdmR1c2VfaW90bGJfZW50cnkgZW50cnk7Cj4gKwkJc3RydWN0IHZob3N0X2lvdGxiX21h
cCAqbWFwOwo+ICsJCXN0cnVjdCB2ZHBhX21hcF9maWxlICptYXBfZmlsZTsKPiArCQlzdHJ1Y3Qg
dmR1c2VfaW92YV9kb21haW4gKmRvbWFpbiA9IGRldi0+ZG9tYWluOwo+ICsJCXN0cnVjdCBmaWxl
ICpmID0gTlVMTDsKPiArCj4gKwkJcmV0ID0gLUVGQVVMVDsKPiArCQlpZiAoY29weV9mcm9tX3Vz
ZXIoJmVudHJ5LCBhcmdwLCBzaXplb2YoZW50cnkpKSkKPiArCQkJYnJlYWs7Cj4gKwo+ICsJCXJl
dCA9IC1FSU5WQUw7Cj4gKwkJaWYgKGVudHJ5LnN0YXJ0ID4gZW50cnkubGFzdCkKPiArCQkJYnJl
YWs7Cj4gKwo+ICsJCXNwaW5fbG9jaygmZG9tYWluLT5pb3RsYl9sb2NrKTsKPiArCQltYXAgPSB2
aG9zdF9pb3RsYl9pdHJlZV9maXJzdChkb21haW4tPmlvdGxiLAo+ICsJCQkJCSAgICAgIGVudHJ5
LnN0YXJ0LCBlbnRyeS5sYXN0KTsKPiArCQlpZiAobWFwKSB7Cj4gKwkJCW1hcF9maWxlID0gKHN0
cnVjdCB2ZHBhX21hcF9maWxlICopbWFwLT5vcGFxdWU7Cj4gKwkJCWYgPSBnZXRfZmlsZShtYXBf
ZmlsZS0+ZmlsZSk7Cj4gKwkJCWVudHJ5Lm9mZnNldCA9IG1hcF9maWxlLT5vZmZzZXQ7Cj4gKwkJ
CWVudHJ5LnN0YXJ0ID0gbWFwLT5zdGFydDsKPiArCQkJZW50cnkubGFzdCA9IG1hcC0+bGFzdDsK
PiArCQkJZW50cnkucGVybSA9IG1hcC0+cGVybTsKPiArCQl9Cj4gKwkJc3Bpbl91bmxvY2soJmRv
bWFpbi0+aW90bGJfbG9jayk7Cj4gKwkJcmV0ID0gLUVJTlZBTDsKPiArCQlpZiAoIWYpCj4gKwkJ
CWJyZWFrOwo+ICsKPiArCQlyZXQgPSAtRUZBVUxUOwo+ICsJCWlmIChjb3B5X3RvX3VzZXIoYXJn
cCwgJmVudHJ5LCBzaXplb2YoZW50cnkpKSkgewo+ICsJCQlmcHV0KGYpOwo+ICsJCQlicmVhazsK
PiArCQl9Cj4gKwkJcmV0ID0gcmVjZWl2ZV9mZChmLCBwZXJtX3RvX2ZpbGVfZmxhZ3MoZW50cnku
cGVybSkpOwo+ICsJCWZwdXQoZik7Cj4gKwkJYnJlYWs7Cj4gKwl9Cj4gKwljYXNlIFZEVVNFX0RF
Vl9HRVRfRkVBVFVSRVM6CgoKTGV0J3MgYWRkIGEgY29tbWVudCB0byBleHBsYWluIGhlcmUuIEUu
ZyB3ZSBqdXN0IG1pcnJvciB3aGF0IGRyaXZlciAKd3JvdGUgYW5kIHRoZSBkcmllciBpcyBleHBl
Y3RlZCB0byBjaGVjayBGRUFUVVJFX09LLgoKCj4gKwkJcmV0ID0gcHV0X3VzZXIoZGV2LT5kcml2
ZXJfZmVhdHVyZXMsICh1NjQgX191c2VyICopYXJncCk7Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIFZE
VVNFX0RFVl9TRVRfQ09ORklHOiB7Cj4gKwkJc3RydWN0IHZkdXNlX2NvbmZpZ19kYXRhIGNvbmZp
ZzsKPiArCQl1bnNpZ25lZCBsb25nIHNpemUgPSBvZmZzZXRvZihzdHJ1Y3QgdmR1c2VfY29uZmln
X2RhdGEsCj4gKwkJCQkJICAgICAgYnVmZmVyKTsKPiArCj4gKwkJcmV0ID0gLUVGQVVMVDsKPiAr
CQlpZiAoY29weV9mcm9tX3VzZXIoJmNvbmZpZywgYXJncCwgc2l6ZSkpCj4gKwkJCWJyZWFrOwo+
ICsKPiArCQlyZXQgPSAtRUlOVkFMOwo+ICsJCWlmIChjb25maWcubGVuZ3RoID09IDAgfHwKPiAr
CQkgICAgY29uZmlnLmxlbmd0aCA+IGRldi0+Y29uZmlnX3NpemUgLSBjb25maWcub2Zmc2V0KQo+
ICsJCQlicmVhazsKPiArCj4gKwkJcmV0ID0gLUVGQVVMVDsKPiArCQlpZiAoY29weV9mcm9tX3Vz
ZXIoZGV2LT5jb25maWcgKyBjb25maWcub2Zmc2V0LCBhcmdwICsgc2l6ZSwKPiArCQkJCSAgIGNv
bmZpZy5sZW5ndGgpKQo+ICsJCQlicmVhazsKPiArCj4gKwkJcmV0ID0gMDsKPiArCQlicmVhazsK
PiArCX0KPiArCWNhc2UgVkRVU0VfREVWX0lOSkVDVF9JUlE6CgoKSXQncyBiZXR0ZXIgdG8gaGF2
ZSAiY29uZmlnIiBpbiB0aGUgbmFtZS4KCgo+ICsJCXJldCA9IDA7Cj4gKwkJcXVldWVfd29yayh2
ZHVzZV9pcnFfd3EsICZkZXYtPmluamVjdCk7Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIFZEVVNFX1ZR
X1NFVFVQOiB7Cj4gKwkJc3RydWN0IHZkdXNlX3ZxX2NvbmZpZyBjb25maWc7Cj4gKwkJdTMyIGlu
ZGV4Owo+ICsKPiArCQlyZXQgPSAtRUZBVUxUOwo+ICsJCWlmIChjb3B5X2Zyb21fdXNlcigmY29u
ZmlnLCBhcmdwLCBzaXplb2YoY29uZmlnKSkpCj4gKwkJCWJyZWFrOwo+ICsKPiArCQlyZXQgPSAt
RUlOVkFMOwo+ICsJCWlmIChjb25maWcuaW5kZXggPj0gZGV2LT52cV9udW0pCj4gKwkJCWJyZWFr
Owo+ICsKPiArCQlpbmRleCA9IGFycmF5X2luZGV4X25vc3BlYyhjb25maWcuaW5kZXgsIGRldi0+
dnFfbnVtKTsKPiArCQlkZXYtPnZxc1tpbmRleF0ubnVtX21heCA9IGNvbmZpZy5tYXhfc2l6ZTsK
PiArCQlyZXQgPSAwOwo+ICsJCWJyZWFrOwo+ICsJfQo+ICsJY2FzZSBWRFVTRV9WUV9HRVRfSU5G
Tzogewo+ICsJCXN0cnVjdCB2ZHVzZV92cV9pbmZvIHZxX2luZm87Cj4gKwkJc3RydWN0IHZkdXNl
X3ZpcnRxdWV1ZSAqdnE7Cj4gKwkJdTMyIGluZGV4Owo+ICsKPiArCQlyZXQgPSAtRUZBVUxUOwo+
ICsJCWlmIChjb3B5X2Zyb21fdXNlcigmdnFfaW5mbywgYXJncCwgc2l6ZW9mKHZxX2luZm8pKSkK
PiArCQkJYnJlYWs7Cj4gKwo+ICsJCXJldCA9IC1FSU5WQUw7Cj4gKwkJaWYgKHZxX2luZm8uaW5k
ZXggPj0gZGV2LT52cV9udW0pCj4gKwkJCWJyZWFrOwo+ICsKPiArCQlpbmRleCA9IGFycmF5X2lu
ZGV4X25vc3BlYyh2cV9pbmZvLmluZGV4LCBkZXYtPnZxX251bSk7Cj4gKwkJdnEgPSAmZGV2LT52
cXNbaW5kZXhdOwo+ICsJCXZxX2luZm8uZGVzY19hZGRyID0gdnEtPmRlc2NfYWRkcjsKPiArCQl2
cV9pbmZvLmRyaXZlcl9hZGRyID0gdnEtPmRyaXZlcl9hZGRyOwo+ICsJCXZxX2luZm8uZGV2aWNl
X2FkZHIgPSB2cS0+ZGV2aWNlX2FkZHI7Cj4gKwkJdnFfaW5mby5udW0gPSB2cS0+bnVtOwo+ICsK
PiArCQlpZiAoZGV2LT5kcml2ZXJfZmVhdHVyZXMgJiBCSVRfVUxMKFZJUlRJT19GX1JJTkdfUEFD
S0VEKSkgewo+ICsJCQl2cV9pbmZvLnBhY2tlZC5sYXN0X2F2YWlsX2NvdW50ZXIgPQo+ICsJCQkJ
dnEtPnN0YXRlLnBhY2tlZC5sYXN0X2F2YWlsX2NvdW50ZXI7Cj4gKwkJCXZxX2luZm8ucGFja2Vk
Lmxhc3RfYXZhaWxfaWR4ID0KPiArCQkJCXZxLT5zdGF0ZS5wYWNrZWQubGFzdF9hdmFpbF9pZHg7
Cj4gKwkJCXZxX2luZm8ucGFja2VkLmxhc3RfdXNlZF9jb3VudGVyID0KPiArCQkJCXZxLT5zdGF0
ZS5wYWNrZWQubGFzdF91c2VkX2NvdW50ZXI7Cj4gKwkJCXZxX2luZm8ucGFja2VkLmxhc3RfdXNl
ZF9pZHggPQo+ICsJCQkJdnEtPnN0YXRlLnBhY2tlZC5sYXN0X3VzZWRfaWR4Owo+ICsJCX0gZWxz
ZQo+ICsJCQl2cV9pbmZvLnNwbGl0LmF2YWlsX2luZGV4ID0KPiArCQkJCXZxLT5zdGF0ZS5zcGxp
dC5hdmFpbF9pbmRleDsKPiArCj4gKwkJdnFfaW5mby5yZWFkeSA9IHZxLT5yZWFkeTsKPiArCj4g
KwkJcmV0ID0gLUVGQVVMVDsKPiArCQlpZiAoY29weV90b191c2VyKGFyZ3AsICZ2cV9pbmZvLCBz
aXplb2YodnFfaW5mbykpKQo+ICsJCQlicmVhazsKPiArCj4gKwkJcmV0ID0gMDsKPiArCQlicmVh
azsKPiArCX0KPiArCWNhc2UgVkRVU0VfVlFfU0VUVVBfS0lDS0ZEOiB7Cj4gKwkJc3RydWN0IHZk
dXNlX3ZxX2V2ZW50ZmQgZXZlbnRmZDsKPiArCj4gKwkJcmV0ID0gLUVGQVVMVDsKPiArCQlpZiAo
Y29weV9mcm9tX3VzZXIoJmV2ZW50ZmQsIGFyZ3AsIHNpemVvZihldmVudGZkKSkpCj4gKwkJCWJy
ZWFrOwo+ICsKPiArCQlyZXQgPSB2ZHVzZV9raWNrZmRfc2V0dXAoZGV2LCAmZXZlbnRmZCk7Cj4g
KwkJYnJlYWs7Cj4gKwl9Cj4gKwljYXNlIFZEVVNFX1ZRX0lOSkVDVF9JUlE6IHsKPiArCQl1MzIg
aW5kZXg7Cj4gKwo+ICsJCXJldCA9IC1FRkFVTFQ7Cj4gKwkJaWYgKGdldF91c2VyKGluZGV4LCAo
dTMyIF9fdXNlciAqKWFyZ3ApKQo+ICsJCQlicmVhazsKPiArCj4gKwkJcmV0ID0gLUVJTlZBTDsK
PiArCQlpZiAoaW5kZXggPj0gZGV2LT52cV9udW0pCj4gKwkJCWJyZWFrOwo+ICsKPiArCQlyZXQg
PSAwOwo+ICsJCWluZGV4ID0gYXJyYXlfaW5kZXhfbm9zcGVjKGluZGV4LCBkZXYtPnZxX251bSk7
Cj4gKwkJcXVldWVfd29yayh2ZHVzZV9pcnFfd3EsICZkZXYtPnZxc1tpbmRleF0uaW5qZWN0KTsK
PiArCQlicmVhazsKPiArCX0KPiArCWRlZmF1bHQ6Cj4gKwkJcmV0ID0gLUVOT0lPQ1RMQ01EOwo+
ICsJCWJyZWFrOwo+ICsJfQo+ICsKPiArCXJldHVybiByZXQ7Cj4gK30KPiArCj4gK3N0YXRpYyBp
bnQgdmR1c2VfZGV2X3JlbGVhc2Uoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZpbGUgKmZp
bGUpCj4gK3sKPiArCXN0cnVjdCB2ZHVzZV9kZXYgKmRldiA9IGZpbGUtPnByaXZhdGVfZGF0YTsK
PiArCj4gKwlzcGluX2xvY2soJmRldi0+bXNnX2xvY2spOwo+ICsJLyogTWFrZSBzdXJlIHRoZSBp
bmZsaWdodCBtZXNzYWdlcyBjYW4gcHJvY2Vzc2VkIGFmdGVyIHJlY29ubmNlY3Rpb24gKi8KPiAr
CWxpc3Rfc3BsaWNlX2luaXQoJmRldi0+cmVjdl9saXN0LCAmZGV2LT5zZW5kX2xpc3QpOwo+ICsJ
c3Bpbl91bmxvY2soJmRldi0+bXNnX2xvY2spOwo+ICsJZGV2LT5jb25uZWN0ZWQgPSBmYWxzZTsK
PiArCj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIHN0cnVjdCB2ZHVzZV9kZXYgKnZk
dXNlX2Rldl9nZXRfZnJvbV9taW5vcihpbnQgbWlub3IpCj4gK3sKPiArCXN0cnVjdCB2ZHVzZV9k
ZXYgKmRldjsKPiArCj4gKwltdXRleF9sb2NrKCZ2ZHVzZV9sb2NrKTsKPiArCWRldiA9IGlkcl9m
aW5kKCZ2ZHVzZV9pZHIsIG1pbm9yKTsKPiArCW11dGV4X3VubG9jaygmdmR1c2VfbG9jayk7Cj4g
Kwo+ICsJcmV0dXJuIGRldjsKPiArfQo+ICsKPiArc3RhdGljIGludCB2ZHVzZV9kZXZfb3Blbihz
dHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlsZSkKPiArewo+ICsJaW50IHJldDsK
PiArCXN0cnVjdCB2ZHVzZV9kZXYgKmRldiA9IHZkdXNlX2Rldl9nZXRfZnJvbV9taW5vcihpbWlu
b3IoaW5vZGUpKTsKPiArCj4gKwlpZiAoIWRldikKPiArCQlyZXR1cm4gLUVOT0RFVjsKPiArCj4g
KwlyZXQgPSAtRUJVU1k7Cj4gKwltdXRleF9sb2NrKCZkZXYtPmxvY2spOwo+ICsJaWYgKGRldi0+
Y29ubmVjdGVkKQo+ICsJCWdvdG8gdW5sb2NrOwo+ICsKPiArCXJldCA9IDA7Cj4gKwlkZXYtPmNv
bm5lY3RlZCA9IHRydWU7Cj4gKwlmaWxlLT5wcml2YXRlX2RhdGEgPSBkZXY7Cj4gK3VubG9jazoK
PiArCW11dGV4X3VubG9jaygmZGV2LT5sb2NrKTsKPiArCj4gKwlyZXR1cm4gcmV0Owo+ICt9Cj4g
Kwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGZpbGVfb3BlcmF0aW9ucyB2ZHVzZV9kZXZfZm9wcyA9
IHsKPiArCS5vd25lcgkJPSBUSElTX01PRFVMRSwKPiArCS5vcGVuCQk9IHZkdXNlX2Rldl9vcGVu
LAo+ICsJLnJlbGVhc2UJPSB2ZHVzZV9kZXZfcmVsZWFzZSwKPiArCS5yZWFkX2l0ZXIJPSB2ZHVz
ZV9kZXZfcmVhZF9pdGVyLAo+ICsJLndyaXRlX2l0ZXIJPSB2ZHVzZV9kZXZfd3JpdGVfaXRlciwK
PiArCS5wb2xsCQk9IHZkdXNlX2Rldl9wb2xsLAo+ICsJLnVubG9ja2VkX2lvY3RsCT0gdmR1c2Vf
ZGV2X2lvY3RsLAo+ICsJLmNvbXBhdF9pb2N0bAk9IGNvbXBhdF9wdHJfaW9jdGwsCj4gKwkubGxz
ZWVrCQk9IG5vb3BfbGxzZWVrLAo+ICt9Owo+ICsKPiArc3RhdGljIHN0cnVjdCB2ZHVzZV9kZXYg
KnZkdXNlX2Rldl9jcmVhdGUodm9pZCkKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAqZGV2ID0g
a3phbGxvYyhzaXplb2YoKmRldiksIEdGUF9LRVJORUwpOwo+ICsKPiArCWlmICghZGV2KQo+ICsJ
CXJldHVybiBOVUxMOwo+ICsKPiArCW11dGV4X2luaXQoJmRldi0+bG9jayk7Cj4gKwlzcGluX2xv
Y2tfaW5pdCgmZGV2LT5tc2dfbG9jayk7Cj4gKwlJTklUX0xJU1RfSEVBRCgmZGV2LT5zZW5kX2xp
c3QpOwo+ICsJSU5JVF9MSVNUX0hFQUQoJmRldi0+cmVjdl9saXN0KTsKPiArCXNwaW5fbG9ja19p
bml0KCZkZXYtPmlycV9sb2NrKTsKPiArCj4gKwlJTklUX1dPUksoJmRldi0+aW5qZWN0LCB2ZHVz
ZV9kZXZfaXJxX2luamVjdCk7Cj4gKwlpbml0X3dhaXRxdWV1ZV9oZWFkKCZkZXYtPndhaXRxKTsK
PiArCj4gKwlyZXR1cm4gZGV2Owo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCB2ZHVzZV9kZXZfZGVz
dHJveShzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYpCj4gK3sKPiArCWtmcmVlKGRldik7Cj4gK30KPiAr
Cj4gK3N0YXRpYyBzdHJ1Y3QgdmR1c2VfZGV2ICp2ZHVzZV9maW5kX2Rldihjb25zdCBjaGFyICpu
YW1lKQo+ICt7Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2ICpkZXY7Cj4gKwlpbnQgaWQ7Cj4gKwo+ICsJ
aWRyX2Zvcl9lYWNoX2VudHJ5KCZ2ZHVzZV9pZHIsIGRldiwgaWQpCj4gKwkJaWYgKCFzdHJjbXAo
ZGV2LT5uYW1lLCBuYW1lKSkKPiArCQkJcmV0dXJuIGRldjsKPiArCj4gKwlyZXR1cm4gTlVMTDsK
PiArfQo+ICsKPiArc3RhdGljIGludCB2ZHVzZV9kZXN0cm95X2RldihjaGFyICpuYW1lKQo+ICt7
Cj4gKwlzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYgPSB2ZHVzZV9maW5kX2RldihuYW1lKTsKPiArCj4g
KwlpZiAoIWRldikKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiArCj4gKwltdXRleF9sb2NrKCZkZXYt
PmxvY2spOwo+ICsJaWYgKGRldi0+dmRldiB8fCBkZXYtPmNvbm5lY3RlZCkgewo+ICsJCW11dGV4
X3VubG9jaygmZGV2LT5sb2NrKTsKPiArCQlyZXR1cm4gLUVCVVNZOwo+ICsJfQo+ICsJZGV2LT5j
b25uZWN0ZWQgPSB0cnVlOwo+ICsJbXV0ZXhfdW5sb2NrKCZkZXYtPmxvY2spOwo+ICsKPiArCXZk
dXNlX2Rldl9yZXNldChkZXYpOwo+ICsJZGV2aWNlX2Rlc3Ryb3kodmR1c2VfY2xhc3MsIE1LREVW
KE1BSk9SKHZkdXNlX21ham9yKSwgZGV2LT5taW5vcikpOwo+ICsJaWRyX3JlbW92ZSgmdmR1c2Vf
aWRyLCBkZXYtPm1pbm9yKTsKPiArCWt2ZnJlZShkZXYtPmNvbmZpZyk7Cj4gKwlrZnJlZShkZXYt
PnZxcyk7Cj4gKwl2ZHVzZV9kb21haW5fZGVzdHJveShkZXYtPmRvbWFpbik7Cj4gKwlrZnJlZShk
ZXYtPm5hbWUpOwo+ICsJdmR1c2VfZGV2X2Rlc3Ryb3koZGV2KTsKPiArCW1vZHVsZV9wdXQoVEhJ
U19NT0RVTEUpOwo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtzdGF0aWMgYm9vbCBkZXZp
Y2VfaXNfYWxsb3dlZCh1MzIgZGV2aWNlX2lkKQo+ICt7Cj4gKwlpbnQgaTsKPiArCj4gKwlmb3Ig
KGkgPSAwOyBpIDwgQVJSQVlfU0laRShhbGxvd2VkX2RldmljZV9pZCk7IGkrKykKPiArCQlpZiAo
YWxsb3dlZF9kZXZpY2VfaWRbaV0gPT0gZGV2aWNlX2lkKQo+ICsJCQlyZXR1cm4gdHJ1ZTsKPiAr
Cj4gKwlyZXR1cm4gZmFsc2U7Cj4gK30KPiArCj4gK3N0YXRpYyBib29sIGZlYXR1cmVzX2lzX3Zh
bGlkKHU2NCBmZWF0dXJlcykKPiArewo+ICsJaWYgKCEoZmVhdHVyZXMgJiAoMVVMTCA8PCBWSVJU
SU9fRl9BQ0NFU1NfUExBVEZPUk0pKSkKPiArCQlyZXR1cm4gZmFsc2U7Cj4gKwo+ICsJLyogTm93
IHdlIG9ubHkgc3VwcG9ydCByZWFkLW9ubHkgY29uZmlndXJhdGlvbiBzcGFjZSAqLwo+ICsJaWYg
KGZlYXR1cmVzICYgKDFVTEwgPDwgVklSVElPX0JMS19GX0NPTkZJR19XQ0UpKQo+ICsJCXJldHVy
biBmYWxzZTsKPiArCj4gKwlyZXR1cm4gdHJ1ZTsKPiArfQo+ICsKPiArc3RhdGljIGJvb2wgdmR1
c2VfdmFsaWRhdGVfY29uZmlnKHN0cnVjdCB2ZHVzZV9kZXZfY29uZmlnICpjb25maWcpCj4gK3sK
PiArCWlmIChjb25maWctPmJvdW5jZV9zaXplID4gVkRVU0VfTUFYX0JPVU5DRV9TSVpFKQo+ICsJ
CXJldHVybiBmYWxzZTsKPiArCj4gKwlpZiAoY29uZmlnLT52cV9hbGlnbiA+IFBBR0VfU0laRSkK
PiArCQlyZXR1cm4gZmFsc2U7Cj4gKwo+ICsJaWYgKGNvbmZpZy0+Y29uZmlnX3NpemUgPiBQQUdF
X1NJWkUpCj4gKwkJcmV0dXJuIGZhbHNlOwoKCkFueSByZWFzb24gZm9yIHRoaXMgY2hlY2s/CgoK
PiArCj4gKwlpZiAoIWRldmljZV9pc19hbGxvd2VkKGNvbmZpZy0+ZGV2aWNlX2lkKSkKPiArCQly
ZXR1cm4gZmFsc2U7Cj4gKwo+ICsJaWYgKCFmZWF0dXJlc19pc192YWxpZChjb25maWctPmZlYXR1
cmVzKSkKPiArCQlyZXR1cm4gZmFsc2U7Cj4gKwo+ICsJcmV0dXJuIHRydWU7Cj4gK30KPiArCj4g
K3N0YXRpYyBpbnQgdmR1c2VfY3JlYXRlX2RldihzdHJ1Y3QgdmR1c2VfZGV2X2NvbmZpZyAqY29u
ZmlnLAo+ICsJCQkgICAgdm9pZCAqY29uZmlnX2J1ZiwgdTY0IGFwaV92ZXJzaW9uKQo+ICt7Cj4g
KwlpbnQgaSwgcmV0Owo+ICsJc3RydWN0IHZkdXNlX2RldiAqZGV2Owo+ICsKPiArCXJldCA9IC1F
RVhJU1Q7Cj4gKwlpZiAodmR1c2VfZmluZF9kZXYoY29uZmlnLT5uYW1lKSkKPiArCQlnb3RvIGVy
cjsKPiArCj4gKwlyZXQgPSAtRU5PTUVNOwo+ICsJZGV2ID0gdmR1c2VfZGV2X2NyZWF0ZSgpOwo+
ICsJaWYgKCFkZXYpCj4gKwkJZ290byBlcnI7Cj4gKwo+ICsJZGV2LT5hcGlfdmVyc2lvbiA9IGFw
aV92ZXJzaW9uOwo+ICsJZGV2LT5kZXZpY2VfZmVhdHVyZXMgPSBjb25maWctPmZlYXR1cmVzOwo+
ICsJZGV2LT5kZXZpY2VfaWQgPSBjb25maWctPmRldmljZV9pZDsKPiArCWRldi0+dmVuZG9yX2lk
ID0gY29uZmlnLT52ZW5kb3JfaWQ7Cj4gKwlkZXYtPm5hbWUgPSBrc3RyZHVwKGNvbmZpZy0+bmFt
ZSwgR0ZQX0tFUk5FTCk7Cj4gKwlpZiAoIWRldi0+bmFtZSkKPiArCQlnb3RvIGVycl9zdHI7Cj4g
Kwo+ICsJZGV2LT5kb21haW4gPSB2ZHVzZV9kb21haW5fY3JlYXRlKFZEVVNFX0lPVkFfU0laRSAt
IDEsCj4gKwkJCQkJICBjb25maWctPmJvdW5jZV9zaXplKTsKPiArCWlmICghZGV2LT5kb21haW4p
Cj4gKwkJZ290byBlcnJfZG9tYWluOwo+ICsKPiArCWRldi0+Y29uZmlnID0gY29uZmlnX2J1ZjsK
PiArCWRldi0+Y29uZmlnX3NpemUgPSBjb25maWctPmNvbmZpZ19zaXplOwo+ICsJZGV2LT52cV9h
bGlnbiA9IGNvbmZpZy0+dnFfYWxpZ247Cj4gKwlkZXYtPnZxX251bSA9IGNvbmZpZy0+dnFfbnVt
Owo+ICsJZGV2LT52cXMgPSBrY2FsbG9jKGRldi0+dnFfbnVtLCBzaXplb2YoKmRldi0+dnFzKSwg
R0ZQX0tFUk5FTCk7Cj4gKwlpZiAoIWRldi0+dnFzKQo+ICsJCWdvdG8gZXJyX3ZxczsKPiArCj4g
Kwlmb3IgKGkgPSAwOyBpIDwgZGV2LT52cV9udW07IGkrKykgewo+ICsJCWRldi0+dnFzW2ldLmlu
ZGV4ID0gaTsKPiArCQlJTklUX1dPUksoJmRldi0+dnFzW2ldLmluamVjdCwgdmR1c2VfdnFfaXJx
X2luamVjdCk7Cj4gKwkJc3Bpbl9sb2NrX2luaXQoJmRldi0+dnFzW2ldLmtpY2tfbG9jayk7Cj4g
KwkJc3Bpbl9sb2NrX2luaXQoJmRldi0+dnFzW2ldLmlycV9sb2NrKTsKPiArCX0KPiArCj4gKwly
ZXQgPSBpZHJfYWxsb2MoJnZkdXNlX2lkciwgZGV2LCAxLCBWRFVTRV9ERVZfTUFYLCBHRlBfS0VS
TkVMKTsKPiArCWlmIChyZXQgPCAwKQo+ICsJCWdvdG8gZXJyX2lkcjsKPiArCj4gKwlkZXYtPm1p
bm9yID0gcmV0Owo+ICsJZGV2LT5kZXYgPSBkZXZpY2VfY3JlYXRlKHZkdXNlX2NsYXNzLCBOVUxM
LAo+ICsJCQkJIE1LREVWKE1BSk9SKHZkdXNlX21ham9yKSwgZGV2LT5taW5vciksCj4gKwkJCQkg
TlVMTCwgIiVzIiwgY29uZmlnLT5uYW1lKTsKPiArCWlmIChJU19FUlIoZGV2LT5kZXYpKSB7Cj4g
KwkJcmV0ID0gUFRSX0VSUihkZXYtPmRldik7Cj4gKwkJZ290byBlcnJfZGV2Owo+ICsJfQo+ICsJ
X19tb2R1bGVfZ2V0KFRISVNfTU9EVUxFKTsKPiArCj4gKwlyZXR1cm4gMDsKPiArZXJyX2RldjoK
PiArCWlkcl9yZW1vdmUoJnZkdXNlX2lkciwgZGV2LT5taW5vcik7Cj4gK2Vycl9pZHI6Cj4gKwlr
ZnJlZShkZXYtPnZxcyk7Cj4gK2Vycl92cXM6Cj4gKwl2ZHVzZV9kb21haW5fZGVzdHJveShkZXYt
PmRvbWFpbik7Cj4gK2Vycl9kb21haW46Cj4gKwlrZnJlZShkZXYtPm5hbWUpOwo+ICtlcnJfc3Ry
Ogo+ICsJdmR1c2VfZGV2X2Rlc3Ryb3koZGV2KTsKPiArZXJyOgo+ICsJa3ZmcmVlKGNvbmZpZ19i
dWYpOwo+ICsJcmV0dXJuIHJldDsKPiArfQo+ICsKPiArc3RhdGljIGxvbmcgdmR1c2VfaW9jdGwo
c3RydWN0IGZpbGUgKmZpbGUsIHVuc2lnbmVkIGludCBjbWQsCj4gKwkJCXVuc2lnbmVkIGxvbmcg
YXJnKQo+ICt7Cj4gKwlpbnQgcmV0Owo+ICsJdm9pZCBfX3VzZXIgKmFyZ3AgPSAodm9pZCBfX3Vz
ZXIgKilhcmc7Cj4gKwlzdHJ1Y3QgdmR1c2VfY29udHJvbCAqY29udHJvbCA9IGZpbGUtPnByaXZh
dGVfZGF0YTsKPiArCj4gKwltdXRleF9sb2NrKCZ2ZHVzZV9sb2NrKTsKPiArCXN3aXRjaCAoY21k
KSB7Cj4gKwljYXNlIFZEVVNFX0dFVF9BUElfVkVSU0lPTjoKPiArCQlyZXQgPSBwdXRfdXNlcihj
b250cm9sLT5hcGlfdmVyc2lvbiwgKHU2NCBfX3VzZXIgKilhcmdwKTsKPiArCQlicmVhazsKPiAr
CWNhc2UgVkRVU0VfU0VUX0FQSV9WRVJTSU9OOiB7Cj4gKwkJdTY0IGFwaV92ZXJzaW9uOwo+ICsK
PiArCQlyZXQgPSAtRUZBVUxUOwo+ICsJCWlmIChnZXRfdXNlcihhcGlfdmVyc2lvbiwgKHU2NCBf
X3VzZXIgKilhcmdwKSkKPiArCQkJYnJlYWs7Cj4gKwo+ICsJCXJldCA9IC1FSU5WQUw7Cj4gKwkJ
aWYgKGFwaV92ZXJzaW9uID4gVkRVU0VfQVBJX1ZFUlNJT04pCj4gKwkJCWJyZWFrOwo+ICsKPiAr
CQlyZXQgPSAwOwo+ICsJCWNvbnRyb2wtPmFwaV92ZXJzaW9uID0gYXBpX3ZlcnNpb247Cj4gKwkJ
YnJlYWs7Cj4gKwl9Cj4gKwljYXNlIFZEVVNFX0NSRUFURV9ERVY6IHsKPiArCQlzdHJ1Y3QgdmR1
c2VfZGV2X2NvbmZpZyBjb25maWc7Cj4gKwkJdW5zaWduZWQgbG9uZyBzaXplID0gb2Zmc2V0b2Yo
c3RydWN0IHZkdXNlX2Rldl9jb25maWcsIGNvbmZpZyk7Cj4gKwkJdm9pZCAqYnVmOwo+ICsKPiAr
CQlyZXQgPSAtRUZBVUxUOwo+ICsJCWlmIChjb3B5X2Zyb21fdXNlcigmY29uZmlnLCBhcmdwLCBz
aXplKSkKPiArCQkJYnJlYWs7Cj4gKwo+ICsJCXJldCA9IC1FSU5WQUw7Cj4gKwkJaWYgKHZkdXNl
X3ZhbGlkYXRlX2NvbmZpZygmY29uZmlnKSA9PSBmYWxzZSkKPiArCQkJYnJlYWs7Cj4gKwo+ICsJ
CWJ1ZiA9IHZtZW1kdXBfdXNlcihhcmdwICsgc2l6ZSwgY29uZmlnLmNvbmZpZ19zaXplKTsKPiAr
CQlpZiAoSVNfRVJSKGJ1ZikpIHsKPiArCQkJcmV0ID0gUFRSX0VSUihidWYpOwo+ICsJCQlicmVh
azsKPiArCQl9Cj4gKwkJY29uZmlnLm5hbWVbVkRVU0VfTkFNRV9NQVggLSAxXSA9ICdcMCc7Cj4g
KwkJcmV0ID0gdmR1c2VfY3JlYXRlX2RldigmY29uZmlnLCBidWYsIGNvbnRyb2wtPmFwaV92ZXJz
aW9uKTsKPiArCQlicmVhazsKPiArCX0KPiArCWNhc2UgVkRVU0VfREVTVFJPWV9ERVY6IHsKPiAr
CQljaGFyIG5hbWVbVkRVU0VfTkFNRV9NQVhdOwo+ICsKPiArCQlyZXQgPSAtRUZBVUxUOwo+ICsJ
CWlmIChjb3B5X2Zyb21fdXNlcihuYW1lLCBhcmdwLCBWRFVTRV9OQU1FX01BWCkpCj4gKwkJCWJy
ZWFrOwo+ICsKPiArCQluYW1lW1ZEVVNFX05BTUVfTUFYIC0gMV0gPSAnXDAnOwo+ICsJCXJldCA9
IHZkdXNlX2Rlc3Ryb3lfZGV2KG5hbWUpOwo+ICsJCWJyZWFrOwo+ICsJfQo+ICsJZGVmYXVsdDoK
PiArCQlyZXQgPSAtRUlOVkFMOwo+ICsJCWJyZWFrOwo+ICsJfQo+ICsJbXV0ZXhfdW5sb2NrKCZ2
ZHVzZV9sb2NrKTsKPiArCj4gKwlyZXR1cm4gcmV0Owo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHZk
dXNlX3JlbGVhc2Uoc3RydWN0IGlub2RlICppbm9kZSwgc3RydWN0IGZpbGUgKmZpbGUpCj4gK3sK
PiArCXN0cnVjdCB2ZHVzZV9jb250cm9sICpjb250cm9sID0gZmlsZS0+cHJpdmF0ZV9kYXRhOwo+
ICsKPiArCWtmcmVlKGNvbnRyb2wpOwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyBp
bnQgdmR1c2Vfb3BlbihzdHJ1Y3QgaW5vZGUgKmlub2RlLCBzdHJ1Y3QgZmlsZSAqZmlsZSkKPiAr
ewo+ICsJc3RydWN0IHZkdXNlX2NvbnRyb2wgKmNvbnRyb2w7Cj4gKwo+ICsJY29udHJvbCA9IGtt
YWxsb2Moc2l6ZW9mKHN0cnVjdCB2ZHVzZV9jb250cm9sKSwgR0ZQX0tFUk5FTCk7Cj4gKwlpZiAo
IWNvbnRyb2wpCj4gKwkJcmV0dXJuIC1FTk9NRU07Cj4gKwo+ICsJY29udHJvbC0+YXBpX3ZlcnNp
b24gPSBWRFVTRV9BUElfVkVSU0lPTjsKPiArCWZpbGUtPnByaXZhdGVfZGF0YSA9IGNvbnRyb2w7
Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZmlsZV9v
cGVyYXRpb25zIHZkdXNlX2N0cmxfZm9wcyA9IHsKPiArCS5vd25lcgkJPSBUSElTX01PRFVMRSwK
PiArCS5vcGVuCQk9IHZkdXNlX29wZW4sCj4gKwkucmVsZWFzZQk9IHZkdXNlX3JlbGVhc2UsCj4g
KwkudW5sb2NrZWRfaW9jdGwJPSB2ZHVzZV9pb2N0bCwKPiArCS5jb21wYXRfaW9jdGwJPSBjb21w
YXRfcHRyX2lvY3RsLAo+ICsJLmxsc2VlawkJPSBub29wX2xsc2VlaywKPiArfTsKPiArCj4gK3N0
YXRpYyBjaGFyICp2ZHVzZV9kZXZub2RlKHN0cnVjdCBkZXZpY2UgKmRldiwgdW1vZGVfdCAqbW9k
ZSkKPiArewo+ICsJcmV0dXJuIGthc3ByaW50ZihHRlBfS0VSTkVMLCAidmR1c2UvJXMiLCBkZXZf
bmFtZShkZXYpKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgdmR1c2VfbWdtdGRldl9yZWxlYXNl
KHN0cnVjdCBkZXZpY2UgKmRldikKPiArewo+ICt9Cj4gKwo+ICtzdGF0aWMgc3RydWN0IGRldmlj
ZSB2ZHVzZV9tZ210ZGV2ID0gewo+ICsJLmluaXRfbmFtZSA9ICJ2ZHVzZSIsCj4gKwkucmVsZWFz
ZSA9IHZkdXNlX21nbXRkZXZfcmVsZWFzZSwKPiArfTsKPiArCj4gK3N0YXRpYyBzdHJ1Y3QgdmRw
YV9tZ210X2RldiBtZ210X2RldjsKPiArCj4gK3N0YXRpYyBpbnQgdmR1c2VfZGV2X2luaXRfdmRw
YShzdHJ1Y3QgdmR1c2VfZGV2ICpkZXYsIGNvbnN0IGNoYXIgKm5hbWUpCj4gK3sKPiArCXN0cnVj
dCB2ZHVzZV92ZHBhICp2ZGV2Owo+ICsJaW50IHJldDsKPiArCj4gKwlpZiAoZGV2LT52ZGV2KQo+
ICsJCXJldHVybiAtRUVYSVNUOwo+ICsKPiArCXZkZXYgPSB2ZHBhX2FsbG9jX2RldmljZShzdHJ1
Y3QgdmR1c2VfdmRwYSwgdmRwYSwgZGV2LT5kZXYsCj4gKwkJCQkgJnZkdXNlX3ZkcGFfY29uZmln
X29wcywgbmFtZSwgdHJ1ZSk7Cj4gKwlpZiAoIXZkZXYpCj4gKwkJcmV0dXJuIC1FTk9NRU07Cj4g
Kwo+ICsJZGV2LT52ZGV2ID0gdmRldjsKPiArCXZkZXYtPmRldiA9IGRldjsKPiArCXZkZXYtPnZk
cGEuZGV2LmRtYV9tYXNrID0gJnZkZXYtPnZkcGEuZGV2LmNvaGVyZW50X2RtYV9tYXNrOwo+ICsJ
cmV0ID0gZG1hX3NldF9tYXNrX2FuZF9jb2hlcmVudCgmdmRldi0+dmRwYS5kZXYsIERNQV9CSVRf
TUFTSyg2NCkpOwo+ICsJaWYgKHJldCkgewo+ICsJCXB1dF9kZXZpY2UoJnZkZXYtPnZkcGEuZGV2
KTsKPiArCQlyZXR1cm4gcmV0Owo+ICsJfQo+ICsJc2V0X2RtYV9vcHMoJnZkZXYtPnZkcGEuZGV2
LCAmdmR1c2VfZGV2X2RtYV9vcHMpOwo+ICsJdmRldi0+dmRwYS5kbWFfZGV2ID0gJnZkZXYtPnZk
cGEuZGV2Owo+ICsJdmRldi0+dmRwYS5tZGV2ID0gJm1nbXRfZGV2Owo+ICsKPiArCXJldHVybiAw
Owo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHZkcGFfZGV2X2FkZChzdHJ1Y3QgdmRwYV9tZ210X2Rl
diAqbWRldiwgY29uc3QgY2hhciAqbmFtZSkKPiArewo+ICsJc3RydWN0IHZkdXNlX2RldiAqZGV2
Owo+ICsJaW50IHJldDsKPiArCj4gKwltdXRleF9sb2NrKCZ2ZHVzZV9sb2NrKTsKPiArCWRldiA9
IHZkdXNlX2ZpbmRfZGV2KG5hbWUpOwo+ICsJaWYgKCFkZXYgfHwgIXZkdXNlX2Rldl9pc19yZWFk
eShkZXYpKSB7Cj4gKwkJbXV0ZXhfdW5sb2NrKCZ2ZHVzZV9sb2NrKTsKPiArCQlyZXR1cm4gLUVJ
TlZBTDsKPiArCX0KPiArCXJldCA9IHZkdXNlX2Rldl9pbml0X3ZkcGEoZGV2LCBuYW1lKTsKPiAr
CW11dGV4X3VubG9jaygmdmR1c2VfbG9jayk7Cj4gKwlpZiAocmV0KQo+ICsJCXJldHVybiByZXQ7
Cj4gKwo+ICsJcmV0ID0gX3ZkcGFfcmVnaXN0ZXJfZGV2aWNlKCZkZXYtPnZkZXYtPnZkcGEsIGRl
di0+dnFfbnVtKTsKPiArCWlmIChyZXQpIHsKPiArCQlwdXRfZGV2aWNlKCZkZXYtPnZkZXYtPnZk
cGEuZGV2KTsKPiArCQlyZXR1cm4gcmV0Owo+ICsJfQo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4g
Kwo+ICtzdGF0aWMgdm9pZCB2ZHBhX2Rldl9kZWwoc3RydWN0IHZkcGFfbWdtdF9kZXYgKm1kZXYs
IHN0cnVjdCB2ZHBhX2RldmljZSAqZGV2KQo+ICt7Cj4gKwlfdmRwYV91bnJlZ2lzdGVyX2Rldmlj
ZShkZXYpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IHZkcGFfbWdtdGRldl9vcHMg
dmRwYV9kZXZfbWdtdGRldl9vcHMgPSB7Cj4gKwkuZGV2X2FkZCA9IHZkcGFfZGV2X2FkZCwKPiAr
CS5kZXZfZGVsID0gdmRwYV9kZXZfZGVsLAo+ICt9Owo+ICsKPiArc3RhdGljIHN0cnVjdCB2aXJ0
aW9fZGV2aWNlX2lkIGlkX3RhYmxlW10gPSB7Cj4gKwl7IFZJUlRJT19JRF9CTE9DSywgVklSVElP
X0RFVl9BTllfSUQgfSwKPiArCXsgMCB9LAo+ICt9Owo+ICsKPiArc3RhdGljIHN0cnVjdCB2ZHBh
X21nbXRfZGV2IG1nbXRfZGV2ID0gewo+ICsJLmRldmljZSA9ICZ2ZHVzZV9tZ210ZGV2LAo+ICsJ
LmlkX3RhYmxlID0gaWRfdGFibGUsCj4gKwkub3BzID0gJnZkcGFfZGV2X21nbXRkZXZfb3BzLAo+
ICt9Owo+ICsKPiArc3RhdGljIGludCB2ZHVzZV9tZ210ZGV2X2luaXQodm9pZCkKPiArewo+ICsJ
aW50IHJldDsKPiArCj4gKwlyZXQgPSBkZXZpY2VfcmVnaXN0ZXIoJnZkdXNlX21nbXRkZXYpOwo+
ICsJaWYgKHJldCkKPiArCQlyZXR1cm4gcmV0Owo+ICsKPiArCXJldCA9IHZkcGFfbWdtdGRldl9y
ZWdpc3RlcigmbWdtdF9kZXYpOwo+ICsJaWYgKHJldCkKPiArCQlnb3RvIGVycjsKPiArCj4gKwly
ZXR1cm4gMDsKPiArZXJyOgo+ICsJZGV2aWNlX3VucmVnaXN0ZXIoJnZkdXNlX21nbXRkZXYpOwo+
ICsJcmV0dXJuIHJldDsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgdmR1c2VfbWdtdGRldl9leGl0
KHZvaWQpCj4gK3sKPiArCXZkcGFfbWdtdGRldl91bnJlZ2lzdGVyKCZtZ210X2Rldik7Cj4gKwlk
ZXZpY2VfdW5yZWdpc3RlcigmdmR1c2VfbWdtdGRldik7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQg
dmR1c2VfaW5pdCh2b2lkKQo+ICt7Cj4gKwlpbnQgcmV0Owo+ICsJc3RydWN0IGRldmljZSAqZGV2
Owo+ICsKPiArCXZkdXNlX2NsYXNzID0gY2xhc3NfY3JlYXRlKFRISVNfTU9EVUxFLCAidmR1c2Ui
KTsKPiArCWlmIChJU19FUlIodmR1c2VfY2xhc3MpKQo+ICsJCXJldHVybiBQVFJfRVJSKHZkdXNl
X2NsYXNzKTsKPiArCj4gKwl2ZHVzZV9jbGFzcy0+ZGV2bm9kZSA9IHZkdXNlX2Rldm5vZGU7Cj4g
Kwo+ICsJcmV0ID0gYWxsb2NfY2hyZGV2X3JlZ2lvbigmdmR1c2VfbWFqb3IsIDAsIFZEVVNFX0RF
Vl9NQVgsICJ2ZHVzZSIpOwo+ICsJaWYgKHJldCkKPiArCQlnb3RvIGVycl9jaGFyZGV2X3JlZ2lv
bjsKPiArCj4gKwkvKiAvZGV2L3ZkdXNlL2NvbnRyb2wgKi8KPiArCWNkZXZfaW5pdCgmdmR1c2Vf
Y3RybF9jZGV2LCAmdmR1c2VfY3RybF9mb3BzKTsKPiArCXZkdXNlX2N0cmxfY2Rldi5vd25lciA9
IFRISVNfTU9EVUxFOwo+ICsJcmV0ID0gY2Rldl9hZGQoJnZkdXNlX2N0cmxfY2RldiwgdmR1c2Vf
bWFqb3IsIDEpOwo+ICsJaWYgKHJldCkKPiArCQlnb3RvIGVycl9jdHJsX2NkZXY7Cj4gKwo+ICsJ
ZGV2ID0gZGV2aWNlX2NyZWF0ZSh2ZHVzZV9jbGFzcywgTlVMTCwgdmR1c2VfbWFqb3IsIE5VTEws
ICJjb250cm9sIik7Cj4gKwlpZiAoSVNfRVJSKGRldikpIHsKPiArCQlyZXQgPSBQVFJfRVJSKGRl
dik7Cj4gKwkJZ290byBlcnJfZGV2aWNlOwo+ICsJfQo+ICsKPiArCS8qIC9kZXYvdmR1c2UvJERF
VklDRSAqLwo+ICsJY2Rldl9pbml0KCZ2ZHVzZV9jZGV2LCAmdmR1c2VfZGV2X2ZvcHMpOwo+ICsJ
dmR1c2VfY2Rldi5vd25lciA9IFRISVNfTU9EVUxFOwo+ICsJcmV0ID0gY2Rldl9hZGQoJnZkdXNl
X2NkZXYsIE1LREVWKE1BSk9SKHZkdXNlX21ham9yKSwgMSksCj4gKwkJICAgICAgIFZEVVNFX0RF
Vl9NQVggLSAxKTsKPiArCWlmIChyZXQpCj4gKwkJZ290byBlcnJfY2RldjsKPiArCj4gKwl2ZHVz
ZV9pcnFfd3EgPSBhbGxvY193b3JrcXVldWUoInZkdXNlLWlycSIsCj4gKwkJCQlXUV9ISUdIUFJJ
IHwgV1FfU1lTRlMgfCBXUV9VTkJPVU5ELCAwKTsKPiArCWlmICghdmR1c2VfaXJxX3dxKQo+ICsJ
CWdvdG8gZXJyX3dxOwo+ICsKPiArCXJldCA9IHZkdXNlX2RvbWFpbl9pbml0KCk7Cj4gKwlpZiAo
cmV0KQo+ICsJCWdvdG8gZXJyX2RvbWFpbjsKPiArCj4gKwlyZXQgPSB2ZHVzZV9tZ210ZGV2X2lu
aXQoKTsKPiArCWlmIChyZXQpCj4gKwkJZ290byBlcnJfbWdtdGRldjsKPiArCj4gKwlyZXR1cm4g
MDsKPiArZXJyX21nbXRkZXY6Cj4gKwl2ZHVzZV9kb21haW5fZXhpdCgpOwo+ICtlcnJfZG9tYWlu
Ogo+ICsJZGVzdHJveV93b3JrcXVldWUodmR1c2VfaXJxX3dxKTsKPiArZXJyX3dxOgo+ICsJY2Rl
dl9kZWwoJnZkdXNlX2NkZXYpOwo+ICtlcnJfY2RldjoKPiArCWRldmljZV9kZXN0cm95KHZkdXNl
X2NsYXNzLCB2ZHVzZV9tYWpvcik7Cj4gK2Vycl9kZXZpY2U6Cj4gKwljZGV2X2RlbCgmdmR1c2Vf
Y3RybF9jZGV2KTsKPiArZXJyX2N0cmxfY2RldjoKPiArCXVucmVnaXN0ZXJfY2hyZGV2X3JlZ2lv
bih2ZHVzZV9tYWpvciwgVkRVU0VfREVWX01BWCk7Cj4gK2Vycl9jaGFyZGV2X3JlZ2lvbjoKPiAr
CWNsYXNzX2Rlc3Ryb3kodmR1c2VfY2xhc3MpOwo+ICsJcmV0dXJuIHJldDsKPiArfQo+ICttb2R1
bGVfaW5pdCh2ZHVzZV9pbml0KTsKPiArCj4gK3N0YXRpYyB2b2lkIHZkdXNlX2V4aXQodm9pZCkK
PiArewo+ICsJdmR1c2VfbWdtdGRldl9leGl0KCk7Cj4gKwl2ZHVzZV9kb21haW5fZXhpdCgpOwo+
ICsJZGVzdHJveV93b3JrcXVldWUodmR1c2VfaXJxX3dxKTsKPiArCWNkZXZfZGVsKCZ2ZHVzZV9j
ZGV2KTsKPiArCWRldmljZV9kZXN0cm95KHZkdXNlX2NsYXNzLCB2ZHVzZV9tYWpvcik7Cj4gKwlj
ZGV2X2RlbCgmdmR1c2VfY3RybF9jZGV2KTsKPiArCXVucmVnaXN0ZXJfY2hyZGV2X3JlZ2lvbih2
ZHVzZV9tYWpvciwgVkRVU0VfREVWX01BWCk7Cj4gKwljbGFzc19kZXN0cm95KHZkdXNlX2NsYXNz
KTsKPiArfQo+ICttb2R1bGVfZXhpdCh2ZHVzZV9leGl0KTsKPiArCj4gK01PRFVMRV9MSUNFTlNF
KERSVl9MSUNFTlNFKTsKPiArTU9EVUxFX0FVVEhPUihEUlZfQVVUSE9SKTsKPiArTU9EVUxFX0RF
U0NSSVBUSU9OKERSVl9ERVNDKTsKPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS91YXBpL2xpbnV4L3Zk
dXNlLmggYi9pbmNsdWRlL3VhcGkvbGludXgvdmR1c2UuaAo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0
Cj4gaW5kZXggMDAwMDAwMDAwMDAwLi41ODVmY2NlMzk4YWYKPiAtLS0gL2Rldi9udWxsCj4gKysr
IGIvaW5jbHVkZS91YXBpL2xpbnV4L3ZkdXNlLmgKPiBAQCAtMCwwICsxLDIyMSBAQAo+ICsvKiBT
UERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCBXSVRIIExpbnV4LXN5c2NhbGwtbm90ZSAq
Lwo+ICsjaWZuZGVmIF9VQVBJX1ZEVVNFX0hfCj4gKyNkZWZpbmUgX1VBUElfVkRVU0VfSF8KPiAr
Cj4gKyNpbmNsdWRlIDxsaW51eC90eXBlcy5oPgo+ICsKPiArI2RlZmluZSBWRFVTRV9CQVNFCTB4
ODEKPiArCj4gKy8qIFRoZSBpb2N0bHMgZm9yIGNvbnRyb2wgZGV2aWNlICgvZGV2L3ZkdXNlL2Nv
bnRyb2wpICovCj4gKwo+ICsjZGVmaW5lIFZEVVNFX0FQSV9WRVJTSU9OCTAKPiArCj4gKy8qCj4g
KyAqIEdldCB0aGUgdmVyc2lvbiBvZiBWRFVTRSBBUEkgdGhhdCBrZXJuZWwgc3VwcG9ydGVkIChW
RFVTRV9BUElfVkVSU0lPTikuCj4gKyAqIFRoaXMgaXMgdXNlZCBmb3IgZnV0dXJlIGV4dGVuc2lv
bi4KPiArICovCj4gKyNkZWZpbmUgVkRVU0VfR0VUX0FQSV9WRVJTSU9OCV9JT1IoVkRVU0VfQkFT
RSwgMHgwMCwgX191NjQpCj4gKwo+ICsvKiBTZXQgdGhlIHZlcnNpb24gb2YgVkRVU0UgQVBJIHRo
YXQgdXNlcnNwYWNlIHN1cHBvcnRlZC4gKi8KPiArI2RlZmluZSBWRFVTRV9TRVRfQVBJX1ZFUlNJ
T04JX0lPVyhWRFVTRV9CQVNFLCAweDAxLCBfX3U2NCkKPiArCj4gKy8qCj4gKyAqIFRoZSBiYXNp
YyBjb25maWd1cmF0aW9uIG9mIGEgVkRVU0UgZGV2aWNlLCB3aGljaCBpcyB1c2VkIGJ5Cj4gKyAq
IFZEVVNFX0NSRUFURV9ERVYgaW9jdGwgdG8gY3JlYXRlIGEgVkRVU0UgZGV2aWNlLgo+ICsgKi8K
PiArc3RydWN0IHZkdXNlX2Rldl9jb25maWcgewo+ICsjZGVmaW5lIFZEVVNFX05BTUVfTUFYCTI1
Ngo+ICsJY2hhciBuYW1lW1ZEVVNFX05BTUVfTUFYXTsgLyogdmR1c2UgZGV2aWNlIG5hbWUsIG5l
ZWRzIHRvIGJlIE5VTCB0ZXJtaW5hdGVkICovCj4gKwlfX3UzMiB2ZW5kb3JfaWQ7IC8qIHZpcnRp
byB2ZW5kb3IgaWQgKi8KPiArCV9fdTMyIGRldmljZV9pZDsgLyogdmlydGlvIGRldmljZSBpZCAq
Lwo+ICsJX191NjQgZmVhdHVyZXM7IC8qIHZpcnRpbyBmZWF0dXJlcyAqLwo+ICsJX191NjQgYm91
bmNlX3NpemU7IC8qIHRoZSBzaXplIG9mIGJvdW5jZSBidWZmZXIgZm9yIGRhdGEgdHJhbnNmZXIg
Ki8KPiArCV9fdTMyIHZxX251bTsgLyogdGhlIG51bWJlciBvZiB2aXJ0cXVldWVzICovCj4gKwlf
X3UzMiB2cV9hbGlnbjsgLyogdGhlIGFsbG9jYXRpb24gYWxpZ25tZW50IG9mIHZpcnRxdWV1ZSdz
IG1ldGFkYXRhICovCj4gKwlfX3UzMiByZXNlcnZlZFsxNV07IC8qIGZvciBmdXR1cmUgdXNlICov
Cj4gKwlfX3UzMiBjb25maWdfc2l6ZTsgLyogdGhlIHNpemUgb2YgdGhlIGNvbmZpZ3VyYXRpb24g
c3BhY2UgKi8KPiArCV9fdTggY29uZmlnWzBdOyAvKiB0aGUgYnVmZmVyIG9mIHRoZSBjb25maWd1
cmF0aW9uIHNwYWNlICovCj4gK307Cj4gKwo+ICsvKiBDcmVhdGUgYSBWRFVTRSBkZXZpY2Ugd2hp
Y2ggaXMgcmVwcmVzZW50ZWQgYnkgYSBjaGFyIGRldmljZSAoL2Rldi92ZHVzZS8kTkFNRSkgKi8K
PiArI2RlZmluZSBWRFVTRV9DUkVBVEVfREVWCV9JT1coVkRVU0VfQkFTRSwgMHgwMiwgc3RydWN0
IHZkdXNlX2Rldl9jb25maWcpCj4gKwo+ICsvKgo+ICsgKiBEZXN0cm95IGEgVkRVU0UgZGV2aWNl
LiBNYWtlIHN1cmUgdGhlcmUgYXJlIG5vIG1vcmUgcmVmZXJlbmNlcwo+ICsgKiB0byB0aGUgY2hh
ciBkZXZpY2UgKC9kZXYvdmR1c2UvJE5BTUUpLgo+ICsgKi8KPiArI2RlZmluZSBWRFVTRV9ERVNU
Uk9ZX0RFVglfSU9XKFZEVVNFX0JBU0UsIDB4MDMsIGNoYXJbVkRVU0VfTkFNRV9NQVhdKQo+ICsK
PiArLyogVGhlIGlvY3RscyBmb3IgVkRVU0UgZGV2aWNlICgvZGV2L3ZkdXNlLyROQU1FKSAqLwo+
ICsKPiArLyoKPiArICogVGhlIGluZm9ybWF0aW9uIG9mIG9uZSBJT1ZBIHJlZ2lvbiwgd2hpY2gg
aXMgcmV0cmlldmVkIGZyb20KPiArICogVkRVU0VfSU9UTEJfR0VUX0ZEIGlvY3RsLgo+ICsgKi8K
PiArc3RydWN0IHZkdXNlX2lvdGxiX2VudHJ5IHsKPiArCV9fdTY0IG9mZnNldDsgLyogdGhlIG1t
YXAgb2Zmc2V0IG9uIHJldHVybmVkIGZpbGUgZGVzY3JpcHRvciAqLwo+ICsJX191NjQgc3RhcnQ7
IC8qIHN0YXJ0IG9mIHRoZSBJT1ZBIHJhbmdlOiBbc3RhcnQsIGxhc3RdICovCj4gKwlfX3U2NCBs
YXN0OyAvKiBsYXN0IG9mIHRoZSBJT1ZBIHJhbmdlOiBbc3RhcnQsIGxhc3RdICovCj4gKyNkZWZp
bmUgVkRVU0VfQUNDRVNTX1JPIDB4MQo+ICsjZGVmaW5lIFZEVVNFX0FDQ0VTU19XTyAweDIKPiAr
I2RlZmluZSBWRFVTRV9BQ0NFU1NfUlcgMHgzCj4gKwlfX3U4IHBlcm07IC8qIGFjY2VzcyBwZXJt
aXNzaW9uIG9mIHRoaXMgcmVnaW9uICovCj4gK307Cj4gKwo+ICsvKgo+ICsgKiBGaW5kIHRoZSBm
aXJzdCBJT1ZBIHJlZ2lvbiB0aGF0IG92ZXJsYXBzIHdpdGggdGhlIHJhbmdlIFtzdGFydCwgbGFz
dF0KPiArICogYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyBmaWxlIGRlc2NyaXB0b3IuIFJl
dHVybiAtRUlOVkFMIG1lYW5zIHRoZQo+ICsgKiBJT1ZBIHJlZ2lvbiBkb2Vzbid0IGV4aXN0LiBD
YWxsZXIgc2hvdWxkIHNldCBzdGFydCBhbmQgbGFzdCBmaWVsZHMuCj4gKyAqLwo+ICsjZGVmaW5l
IFZEVVNFX0lPVExCX0dFVF9GRAlfSU9XUihWRFVTRV9CQVNFLCAweDEwLCBzdHJ1Y3QgdmR1c2Vf
aW90bGJfZW50cnkpCj4gKwo+ICsvKgo+ICsgKiBHZXQgdGhlIG5lZ290aWF0ZWQgdmlydGlvIGZl
YXR1cmVzLiBJdCdzIGEgc3Vic2V0IG9mIHRoZSBmZWF0dXJlcyBpbgo+ICsgKiBzdHJ1Y3QgdmR1
c2VfZGV2X2NvbmZpZyB3aGljaCBjYW4gYmUgYWNjZXB0ZWQgYnkgdmlydGlvIGRyaXZlci4gSXQn
cwo+ICsgKiBvbmx5IHZhbGlkIGFmdGVyIEZFQVRVUkVTX09LIHN0YXR1cyBiaXQgaXMgc2V0Lgo+
ICsgKi8KPiArI2RlZmluZSBWRFVTRV9ERVZfR0VUX0ZFQVRVUkVTCV9JT1IoVkRVU0VfQkFTRSwg
MHgxMSwgX191NjQpCj4gKwo+ICsvKgo+ICsgKiBUaGUgaW5mb3JtYXRpb24gdGhhdCBpcyB1c2Vk
IGJ5IFZEVVNFX0RFVl9TRVRfQ09ORklHIGlvY3RsIHRvIHVwZGF0ZQo+ICsgKiBkZXZpY2UgY29u
ZmlndXJhdGlvbiBzcGFjZS4KPiArICovCj4gK3N0cnVjdCB2ZHVzZV9jb25maWdfZGF0YSB7Cj4g
KwlfX3UzMiBvZmZzZXQ7IC8qIG9mZnNldCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgY29uZmlndXJh
dGlvbiBzcGFjZSAqLwo+ICsJX191MzIgbGVuZ3RoOyAvKiB0aGUgbGVuZ3RoIHRvIHdyaXRlIHRv
IGNvbmZpZ3VyYXRpb24gc3BhY2UgKi8KPiArCV9fdTggYnVmZmVyWzBdOyAvKiBidWZmZXIgdXNl
ZCB0byB3cml0ZSBmcm9tICovCj4gK307Cj4gKwo+ICsvKiBTZXQgZGV2aWNlIGNvbmZpZ3VyYXRp
b24gc3BhY2UgKi8KPiArI2RlZmluZSBWRFVTRV9ERVZfU0VUX0NPTkZJRwlfSU9XKFZEVVNFX0JB
U0UsIDB4MTIsIHN0cnVjdCB2ZHVzZV9jb25maWdfZGF0YSkKPiArCj4gKy8qCj4gKyAqIEluamVj
dCBhIGNvbmZpZyBpbnRlcnJ1cHQuIEl0J3MgdXN1YWxseSB1c2VkIHRvIG5vdGlmeSB2aXJ0aW8g
ZHJpdmVyCj4gKyAqIHRoYXQgZGV2aWNlIGNvbmZpZ3VyYXRpb24gc3BhY2UgaGFzIGNoYW5nZWQu
Cj4gKyAqLwo+ICsjZGVmaW5lIFZEVVNFX0RFVl9JTkpFQ1RfSVJRCV9JTyhWRFVTRV9CQVNFLCAw
eDEzKQo+ICsKPiArLyoKPiArICogVGhlIGJhc2ljIGNvbmZpZ3VyYXRpb24gb2YgYSB2aXJ0cXVl
dWUsIHdoaWNoIGlzIHVzZWQgYnkKPiArICogVkRVU0VfVlFfU0VUVVAgaW9jdGwgdG8gc2V0dXAg
YSB2aXJ0cXVldWUuCj4gKyAqLwo+ICtzdHJ1Y3QgdmR1c2VfdnFfY29uZmlnIHsKPiArCV9fdTMy
IGluZGV4OyAvKiB2aXJ0cXVldWUgaW5kZXggKi8KPiArCV9fdTE2IG1heF9zaXplOyAvKiB0aGUg
bWF4IHNpemUgb2YgdmlydHF1ZXVlICovCj4gK307Cj4gKwo+ICsvKgo+ICsgKiBTZXR1cCB0aGUg
c3BlY2lmaWVkIHZpcnRxdWV1ZS4gTWFrZSBzdXJlIGFsbCB2aXJ0cXVldWVzIGhhdmUgYmVlbgo+
ICsgKiBjb25maWd1cmVkIGJlZm9yZSB0aGUgZGV2aWNlIGlzIGF0dGFjaGVkIHRvIHZEUEEgYnVz
Lgo+ICsgKi8KPiArI2RlZmluZSBWRFVTRV9WUV9TRVRVUAkJX0lPVyhWRFVTRV9CQVNFLCAweDE0
LCBzdHJ1Y3QgdmR1c2VfdnFfY29uZmlnKQo+ICsKPiArc3RydWN0IHZkdXNlX3ZxX3N0YXRlX3Nw
bGl0IHsKPiArCV9fdTE2IGF2YWlsX2luZGV4OyAvKiBhdmFpbGFibGUgaW5kZXggKi8KPiArfTsK
PiArCj4gK3N0cnVjdCB2ZHVzZV92cV9zdGF0ZV9wYWNrZWQgewo+ICsJX191MTYgbGFzdF9hdmFp
bF9jb3VudGVyOjE7IC8qIGxhc3QgZHJpdmVyIHJpbmcgd3JhcCBjb3VudGVyIG9ic2VydmVkIGJ5
IGRldmljZSAqLwo+ICsJX191MTYgbGFzdF9hdmFpbF9pZHg6MTU7IC8qIGRldmljZSBhdmFpbGFi
bGUgaW5kZXggKi8KPiArCV9fdTE2IGxhc3RfdXNlZF9jb3VudGVyOjE7IC8qIGRldmljZSByaW5n
IHdyYXAgY291bnRlciAqLwo+ICsJX191MTYgbGFzdF91c2VkX2lkeDoxNTsgLyogdXNlZCBpbmRl
eCAqLwo+ICt9Owo+ICsKPiArLyoKPiArICogVGhlIGluZm9ybWF0aW9uIG9mIGEgdmlydHF1ZXVl
LCB3aGljaCBpcyByZXRyaWV2ZWQgZnJvbQo+ICsgKiBWRFVTRV9WUV9HRVRfSU5GTyBpb2N0bC4K
PiArICovCj4gK3N0cnVjdCB2ZHVzZV92cV9pbmZvIHsKPiArCV9fdTMyIGluZGV4OyAvKiB2aXJ0
cXVldWUgaW5kZXggKi8KPiArCV9fdTMyIG51bTsgLyogdGhlIHNpemUgb2YgdmlydHF1ZXVlICov
Cj4gKwlfX3U2NCBkZXNjX2FkZHI7IC8qIGFkZHJlc3Mgb2YgZGVzYyBhcmVhICovCj4gKwlfX3U2
NCBkcml2ZXJfYWRkcjsgLyogYWRkcmVzcyBvZiBkcml2ZXIgYXJlYSAqLwo+ICsJX191NjQgZGV2
aWNlX2FkZHI7IC8qIGFkZHJlc3Mgb2YgZGV2aWNlIGFyZWEgKi8KPiArCXVuaW9uIHsKPiArCQlz
dHJ1Y3QgdmR1c2VfdnFfc3RhdGVfc3BsaXQgc3BsaXQ7IC8qIHNwbGl0IHZpcnRxdWV1ZSBzdGF0
ZSAqLwo+ICsJCXN0cnVjdCB2ZHVzZV92cV9zdGF0ZV9wYWNrZWQgcGFja2VkOyAvKiBwYWNrZWQg
dmlydHF1ZXVlIHN0YXRlICovCj4gKwl9Owo+ICsJX191OCByZWFkeTsgLyogcmVhZHkgc3RhdHVz
IG9mIHZpcnRxdWV1ZSAqLwo+ICt9Owo+ICsKPiArLyogR2V0IHRoZSBzcGVjaWZpZWQgdmlydHF1
ZXVlJ3MgaW5mb3JtYXRpb24uIENhbGxlciBzaG91bGQgc2V0IGluZGV4IGZpZWxkLiAqLwo+ICsj
ZGVmaW5lIFZEVVNFX1ZRX0dFVF9JTkZPCV9JT1dSKFZEVVNFX0JBU0UsIDB4MTUsIHN0cnVjdCB2
ZHVzZV92cV9pbmZvKQo+ICsKPiArLyoKPiArICogVGhlIGV2ZW50ZmQgY29uZmlndXJhdGlvbiBm
b3IgdGhlIHNwZWNpZmllZCB2aXJ0cXVldWUuIEl0J3MgdXNlZCBieQo+ICsgKiBWRFVTRV9WUV9T
RVRVUF9LSUNLRkQgaW9jdGwgdG8gc2V0dXAga2ljayBldmVudGZkLgo+ICsgKi8KPiArc3RydWN0
IHZkdXNlX3ZxX2V2ZW50ZmQgewo+ICsJX191MzIgaW5kZXg7IC8qIHZpcnRxdWV1ZSBpbmRleCAq
Lwo+ICsjZGVmaW5lIFZEVVNFX0VWRU5URkRfREVBU1NJR04gLTEKPiArCWludCBmZDsgLyogZXZl
bnRmZCwgLTEgbWVhbnMgZGUtYXNzaWduaW5nIHRoZSBldmVudGZkICovCj4gK307Cj4gKwo+ICsv
Kgo+ICsgKiBTZXR1cCBraWNrIGV2ZW50ZmQgZm9yIHNwZWNpZmllZCB2aXJ0cXVldWUuIFRoZSBr
aWNrIGV2ZW50ZmQgaXMgdXNlZAo+ICsgKiBieSBWRFVTRSBrZXJuZWwgbW9kdWxlIHRvIG5vdGlm
eSB1c2Vyc3BhY2UgdG8gY29uc3VtZSB0aGUgYXZhaWwgdnJpbmcuCj4gKyAqLwo+ICsjZGVmaW5l
IFZEVVNFX1ZRX1NFVFVQX0tJQ0tGRAlfSU9XKFZEVVNFX0JBU0UsIDB4MTYsIHN0cnVjdCB2ZHVz
ZV92cV9ldmVudGZkKQo+ICsKPiArLyoKPiArICogSW5qZWN0IGFuIGludGVycnVwdCBmb3Igc3Bl
Y2lmaWMgdmlydHF1ZXVlLiBJdCdzIHVzZWQgdG8gbm90aWZ5IHZpcnRpbyBkcml2ZXIKPiArICog
dG8gY29uc3VtZSB0aGUgdXNlZCB2cmluZy4KPiArICovCj4gKyNkZWZpbmUgVkRVU0VfVlFfSU5K
RUNUX0lSUQlfSU9XKFZEVVNFX0JBU0UsIDB4MTcsIF9fdTMyKQo+ICsKPiArLyogVGhlIGNvbnRy
b2wgbWVzc2FnZXMgZGVmaW5pdGlvbiBmb3IgcmVhZC93cml0ZSBvbiAvZGV2L3ZkdXNlLyROQU1F
ICovCj4gKwo+ICtlbnVtIHZkdXNlX3JlcV90eXBlIHsKPiArCS8qIEdldCB0aGUgc3RhdGUgZm9y
IHNwZWNpZmllZCB2aXJ0cXVldWUgZnJvbSB1c2Vyc3BhY2UgKi8KPiArCVZEVVNFX0dFVF9WUV9T
VEFURSwKPiArCS8qIFNldCB0aGUgZGV2aWNlIHN0YXR1cyAqLwo+ICsJVkRVU0VfU0VUX1NUQVRV
UywKPiArCS8qCj4gKwkgKiBOb3RpZnkgdXNlcnNwYWNlIHRvIHVwZGF0ZSB0aGUgbWVtb3J5IG1h
cHBpbmcgZm9yIHNwZWNpZmllZAo+ICsJICogSU9WQSByYW5nZSB2aWEgVkRVU0VfSU9UTEJfR0VU
X0ZEIGlvY3RsCj4gKwkgKi8KPiArCVZEVVNFX1VQREFURV9JT1RMQiwKPiArfTsKPiArCj4gK3N0
cnVjdCB2ZHVzZV92cV9zdGF0ZSB7Cj4gKwlfX3UzMiBpbmRleDsgLyogdmlydHF1ZXVlIGluZGV4
ICovCj4gKwl1bmlvbiB7Cj4gKwkJc3RydWN0IHZkdXNlX3ZxX3N0YXRlX3NwbGl0IHNwbGl0OyAv
KiBzcGxpdCB2aXJ0cXVldWUgc3RhdGUgKi8KPiArCQlzdHJ1Y3QgdmR1c2VfdnFfc3RhdGVfcGFj
a2VkIHBhY2tlZDsgLyogcGFja2VkIHZpcnRxdWV1ZSBzdGF0ZSAqLwo+ICsJfTsKPiArfTsKPiAr
Cj4gK3N0cnVjdCB2ZHVzZV9kZXZfc3RhdHVzIHsKPiArCV9fdTggc3RhdHVzOyAvKiBkZXZpY2Ug
c3RhdHVzICovCj4gK307Cj4gKwo+ICtzdHJ1Y3QgdmR1c2VfaW92YV9yYW5nZSB7Cj4gKwlfX3U2
NCBzdGFydDsgLyogc3RhcnQgb2YgdGhlIElPVkEgcmFuZ2U6IFtzdGFydCwgZW5kXSAqLwo+ICsJ
X191NjQgbGFzdDsgLyogbGFzdCBvZiB0aGUgSU9WQSByYW5nZTogW3N0YXJ0LCBlbmRdICovCj4g
K307Cj4gKwo+ICtzdHJ1Y3QgdmR1c2VfZGV2X3JlcXVlc3Qgewo+ICsJX191MzIgdHlwZTsgLyog
cmVxdWVzdCB0eXBlICovCj4gKwlfX3UzMiByZXF1ZXN0X2lkOyAvKiByZXF1ZXN0IGlkICovCj4g
KwlfX3UzMiByZXNlcnZlZFsyXTsgLyogZm9yIGZ1dHVyZSB1c2UgKi8KPiArCXVuaW9uIHsKPiAr
CQlzdHJ1Y3QgdmR1c2VfdnFfc3RhdGUgdnFfc3RhdGU7IC8qIHZpcnRxdWV1ZSBzdGF0ZSwgb25s
eSB1c2UgaW5kZXggKi8KPiArCQlzdHJ1Y3QgdmR1c2VfZGV2X3N0YXR1cyBzOyAvKiBkZXZpY2Ug
c3RhdHVzICovCj4gKwkJc3RydWN0IHZkdXNlX2lvdmFfcmFuZ2UgaW92YTsgLyogSU9WQSByYW5n
ZSBmb3IgdXBkYXRpbmcgKi8KPiArCQlfX3UzMiBwYWRkaW5nWzE2XTsgLyogcGFkZGluZyAqLwo+
ICsJfTsKPiArfTsKPiArCj4gK3N0cnVjdCB2ZHVzZV9kZXZfcmVzcG9uc2Ugewo+ICsJX191MzIg
cmVxdWVzdF9pZDsgLyogY29ycmVzcG9uZGluZyByZXF1ZXN0IGlkICovCj4gKyNkZWZpbmUgVkRV
U0VfUkVRX1JFU1VMVF9PSwkweDAwCj4gKyNkZWZpbmUgVkRVU0VfUkVRX1JFU1VMVF9GQUlMRUQJ
MHgwMQo+ICsJX191MzIgcmVzdWx0OyAvKiB0aGUgcmVzdWx0IG9mIHJlcXVlc3QgKi8KPiArCV9f
dTMyIHJlc2VydmVkWzJdOyAvKiBmb3IgZnV0dXJlIHVzZSAqLwo+ICsJdW5pb24gewo+ICsJCXN0
cnVjdCB2ZHVzZV92cV9zdGF0ZSB2cV9zdGF0ZTsgLyogdmlydHF1ZXVlIHN0YXRlICovCj4gKwkJ
X191MzIgcGFkZGluZ1sxNl07IC8qIHBhZGRpbmcgKi8KPiArCX07Cj4gK307Cj4gKwo+ICsjZW5k
aWYgLyogX1VBUElfVkRVU0VfSF8gKi8KCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlv
bkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlv
bi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
