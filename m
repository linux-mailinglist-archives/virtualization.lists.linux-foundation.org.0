Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from mail.linuxfoundation.org (mail.linuxfoundation.org [140.211.169.12])
	by mail.lfdr.de (Postfix) with ESMTPS id 43EB51BBD0
	for <lists.virtualization@lfdr.de>; Mon, 13 May 2019 19:23:33 +0200 (CEST)
Received: from mail.linux-foundation.org (localhost [127.0.0.1])
	by mail.linuxfoundation.org (Postfix) with ESMTP id A2B9BF1F;
	Mon, 13 May 2019 17:23:28 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@mail.linuxfoundation.org
Received: from smtp1.linuxfoundation.org (smtp1.linux-foundation.org
	[172.17.192.35])
	by mail.linuxfoundation.org (Postfix) with ESMTPS id 63443EFF
	for <virtualization@lists.linux-foundation.org>;
	Mon, 13 May 2019 17:23:27 +0000 (UTC)
X-Greylist: whitelisted by SQLgrey-1.7.6
Received: from mail-wr1-f66.google.com (mail-wr1-f66.google.com
	[209.85.221.66])
	by smtp1.linuxfoundation.org (Postfix) with ESMTPS id 9FCED83A
	for <virtualization@lists.linux-foundation.org>;
	Mon, 13 May 2019 17:23:26 +0000 (UTC)
Received: by mail-wr1-f66.google.com with SMTP id l2so16183609wrb.9
	for <virtualization@lists.linux-foundation.org>;
	Mon, 13 May 2019 10:23:26 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=1e100.net; s=20161025;
	h=x-gm-message-state:date:from:to:cc:subject:message-id:references
	:mime-version:content-disposition:content-transfer-encoding
	:in-reply-to:user-agent;
	bh=aOc6CBKw+RVeeMdGwIxa6uCL3lFsOT0Lwgti+Fi6e58=;
	b=esELyuEnNxuIRjlsE3sJayzFc57TIg4KksirxDaOHueTvJeKMH+jE8kg2TEj5y9i2a
	2IqEYip3I9LaYFgSxijeXtNmlQNFPl8qLMuB9NiS96CQFG5ypzC/7ALJ08Bg27u1fW6Q
	9HUJRQZqzW3aIb/K2wLMxz8CvPfAhxi8ktl5kkdJj1VIWYOihZtHqWTDtLpSZo1Esa9z
	eefD4UkF3yecBHKjDsOov87q0RSJ5l/1VIbqZJDHe7ExRLRtN8WaJTsMksNQ9wkfHBDh
	GyhqDbM7BCXGPBPmcX4lhWw+DkHryWc+HgHALelwcnb76+KPkOteJKCD38oybrWZIu/0
	hs0g==
X-Gm-Message-State: APjAAAXzSoBKHOnJaXT1XEQT1AB63OKpQET9Qy6Hc+eTbC9BGmkOABx8
	IbjljNJ5mbvEZWhNMvOw0ZRhTg==
X-Google-Smtp-Source: APXvYqyGLQfQ9qgYBMhBOROA3KDzQZd+2RzOsjvMydbObvwkA2lyVoOmT5x005cmHKCzFX+X+nkBqQ==
X-Received: by 2002:adf:b35e:: with SMTP id k30mr2281815wrd.178.1557768205296; 
	Mon, 13 May 2019 10:23:25 -0700 (PDT)
Received: from steredhat (host151-251-static.12-87-b.business.telecomitalia.it.
	[87.12.251.151]) by smtp.gmail.com with ESMTPSA id
	s7sm13859054wrn.84.2019.05.13.10.23.24
	(version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
	Mon, 13 May 2019 10:23:24 -0700 (PDT)
Date: Mon, 13 May 2019 19:23:22 +0200
From: Stefano Garzarella <sgarzare@redhat.com>
To: Jason Wang <jasowang@redhat.com>
Subject: Re: [PATCH v2 1/8] vsock/virtio: limit the memory used per-socket
Message-ID: <20190513172322.vcgenx7xk4v6r2ay@steredhat>
References: <20190510125843.95587-1-sgarzare@redhat.com>
	<20190510125843.95587-2-sgarzare@redhat.com>
	<3b275b52-63d9-d260-1652-8e8bf7dd679f@redhat.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <3b275b52-63d9-d260-1652-8e8bf7dd679f@redhat.com>
User-Agent: NeoMutt/20180716
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	smtp1.linux-foundation.org
Cc: kvm@vger.kernel.org, "Michael S. Tsirkin" <mst@redhat.com>,
	netdev@vger.kernel.org, linux-kernel@vger.kernel.org,
	virtualization@lists.linux-foundation.org,
	Stefan Hajnoczi <stefanha@redhat.com>,
	"David S. Miller" <davem@davemloft.net>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.12
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: virtualization-bounces@lists.linux-foundation.org
Errors-To: virtualization-bounces@lists.linux-foundation.org

T24gTW9uLCBNYXkgMTMsIDIwMTkgYXQgMDU6NTg6NTNQTSArMDgwMCwgSmFzb24gV2FuZyB3cm90
ZToKPiAKPiBPbiAyMDE5LzUvMTAg5LiL5Y2IODo1OCwgU3RlZmFubyBHYXJ6YXJlbGxhIHdyb3Rl
Ogo+ID4gU2luY2UgdmlydGlvLXZzb2NrIHdhcyBpbnRyb2R1Y2VkLCB0aGUgYnVmZmVycyBmaWxs
ZWQgYnkgdGhlIGhvc3QKPiA+IGFuZCBwdXNoZWQgdG8gdGhlIGd1ZXN0IHVzaW5nIHRoZSB2cmlu
ZywgYXJlIGRpcmVjdGx5IHF1ZXVlZCBpbgo+ID4gYSBwZXItc29ja2V0IGxpc3QgYXZvaWRpbmcg
dG8gY29weSBpdC4KPiA+IFRoZXNlIGJ1ZmZlcnMgYXJlIHByZWFsbG9jYXRlZCBieSB0aGUgZ3Vl
c3Qgd2l0aCBhIGZpeGVkCj4gPiBzaXplICg0IEtCKS4KPiA+IAo+ID4gVGhlIG1heGltdW0gYW1v
dW50IG9mIG1lbW9yeSB1c2VkIGJ5IGVhY2ggc29ja2V0IHNob3VsZCBiZQo+ID4gY29udHJvbGxl
ZCBieSB0aGUgY3JlZGl0IG1lY2hhbmlzbS4KPiA+IFRoZSBkZWZhdWx0IGNyZWRpdCBhdmFpbGFi
bGUgcGVyLXNvY2tldCBpcyAyNTYgS0IsIGJ1dCBpZiB3ZSB1c2UKPiA+IG9ubHkgMSBieXRlIHBl
ciBwYWNrZXQsIHRoZSBndWVzdCBjYW4gcXVldWUgdXAgdG8gMjYyMTQ0IG9mIDQgS0IKPiA+IGJ1
ZmZlcnMsIHVzaW5nIHVwIHRvIDEgR0Igb2YgbWVtb3J5IHBlci1zb2NrZXQuIEluIGFkZGl0aW9u
LCB0aGUKPiA+IGd1ZXN0IHdpbGwgY29udGludWUgdG8gZmlsbCB0aGUgdnJpbmcgd2l0aCBuZXcg
NCBLQiBmcmVlIGJ1ZmZlcnMKPiA+IHRvIGF2b2lkIHN0YXJ2YXRpb24gb2Ygb3RoZXIgc29ja2V0
cy4KPiA+IAo+ID4gVGhpcyBwYXRjaCBzb2x2ZXMgdGhpcyBpc3N1ZSBjb3B5aW5nIHRoZSBwYXls
b2FkIGluIGEgbmV3IGJ1ZmZlci4KPiA+IFRoZW4gaXQgaXMgcXVldWVkIGluIHRoZSBwZXItc29j
a2V0IGxpc3QsIGFuZCB0aGUgNEtCIGJ1ZmZlciB1c2VkCj4gPiBieSB0aGUgaG9zdCBpcyBmcmVl
ZC4KPiA+IAo+ID4gSW4gdGhpcyB3YXksIHRoZSBtZW1vcnkgdXNlZCBieSBlYWNoIHNvY2tldCBy
ZXNwZWN0cyB0aGUgY3JlZGl0Cj4gPiBhdmFpbGFibGUsIGFuZCB3ZSBzdGlsbCBhdm9pZCBzdGFy
dmF0aW9uLCBwYXlpbmcgdGhlIGNvc3Qgb2YgYW4KPiA+IGV4dHJhIG1lbW9yeSBjb3B5LiBXaGVu
IHRoZSBidWZmZXIgaXMgY29tcGxldGVseSBmdWxsIHdlIGRvIGEKPiA+ICJ6ZXJvLWNvcHkiLCBt
b3ZpbmcgdGhlIGJ1ZmZlciBkaXJlY3RseSBpbiB0aGUgcGVyLXNvY2tldCBsaXN0Lgo+IAo+IAo+
IEkgd29uZGVyIGluIHRoZSBsb25nIHJ1biB3ZSBzaG91bGQgdXNlIGdlbmVyaWMgc29ja2V0IGFj
Y291dGluZyBtZWNoYW5pc20KPiBwcm92aWRlZCBieSBrZXJuZWwgKGUuZyBzb2NrZXQsIHNrYiwg
c25kYnVmLCByZWN2YnVnLCB0cnVlc2l6ZSkgaW5zdGVhZCBvZgo+IHZzb2NrIHNwZWNpZmljIHRo
aW5nIHRvIGF2b2lkIGR1cGxpY2F0aW5nIGVmZm9ydHMuCgpJIGFncmVlLCB0aGUgaWRlYSBpcyB0
byBzd2l0Y2ggdG8gc2tfYnVmZiBidXQgdGhpcyBzaG91bGQgcmVxdWlyZSBhbiBodWdlCmNoYW5n
ZS4gSWYgd2Ugd2lsbCB1c2UgdGhlIHZpcnRpby1uZXQgZGF0YXBhdGgsIGl0IHdpbGwgYmVjb21l
IHNpbXBsZXIuCgo+IAo+IAo+ID4gCj4gPiBTaWduZWQtb2ZmLWJ5OiBTdGVmYW5vIEdhcnphcmVs
bGEgPHNnYXJ6YXJlQHJlZGhhdC5jb20+Cj4gPiAtLS0KPiA+ICAgZHJpdmVycy92aG9zdC92c29j
ay5jICAgICAgICAgICAgICAgICAgIHwgIDIgKwo+ID4gICBpbmNsdWRlL2xpbnV4L3ZpcnRpb192
c29jay5oICAgICAgICAgICAgfCAgOCArKysKPiA+ICAgbmV0L3Ztd192c29jay92aXJ0aW9fdHJh
bnNwb3J0LmMgICAgICAgIHwgIDEgKwo+ID4gICBuZXQvdm13X3Zzb2NrL3ZpcnRpb190cmFuc3Bv
cnRfY29tbW9uLmMgfCA5NSArKysrKysrKysrKysrKysrKystLS0tLS0tCj4gPiAgIDQgZmlsZXMg
Y2hhbmdlZCwgODEgaW5zZXJ0aW9ucygrKSwgMjUgZGVsZXRpb25zKC0pCj4gPiAKPiA+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL3Zob3N0L3Zzb2NrLmMgYi9kcml2ZXJzL3Zob3N0L3Zzb2NrLmMKPiA+
IGluZGV4IGJiNWZjMGU5ZmJjMi4uNzk2NGUyZGFlZTA5IDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVy
cy92aG9zdC92c29jay5jCj4gPiArKysgYi9kcml2ZXJzL3Zob3N0L3Zzb2NrLmMKPiA+IEBAIC0z
MjAsNiArMzIwLDggQEAgdmhvc3RfdnNvY2tfYWxsb2NfcGt0KHN0cnVjdCB2aG9zdF92aXJ0cXVl
dWUgKnZxLAo+ID4gICAJCXJldHVybiBOVUxMOwo+ID4gICAJfQo+ID4gKwlwa3QtPmJ1Zl9sZW4g
PSBwa3QtPmxlbjsKPiA+ICsKPiA+ICAgCW5ieXRlcyA9IGNvcHlfZnJvbV9pdGVyKHBrdC0+YnVm
LCBwa3QtPmxlbiwgJmlvdl9pdGVyKTsKPiA+ICAgCWlmIChuYnl0ZXMgIT0gcGt0LT5sZW4pIHsK
PiA+ICAgCQl2cV9lcnIodnEsICJFeHBlY3RlZCAldSBieXRlIHBheWxvYWQsIGdvdCAlenUgYnl0
ZXNcbiIsCj4gPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC92aXJ0aW9fdnNvY2suaCBiL2lu
Y2x1ZGUvbGludXgvdmlydGlvX3Zzb2NrLmgKPiA+IGluZGV4IGUyMjNlMjYzMmVkZC4uMzQ1ZjA0
ZWU5MTkzIDEwMDY0NAo+ID4gLS0tIGEvaW5jbHVkZS9saW51eC92aXJ0aW9fdnNvY2suaAo+ID4g
KysrIGIvaW5jbHVkZS9saW51eC92aXJ0aW9fdnNvY2suaAo+ID4gQEAgLTU0LDkgKzU0LDE3IEBA
IHN0cnVjdCB2aXJ0aW9fdnNvY2tfcGt0IHsKPiA+ICAgCXZvaWQgKmJ1ZjsKPiA+ICAgCXUzMiBs
ZW47Cj4gPiAgIAl1MzIgb2ZmOwo+ID4gKwl1MzIgYnVmX2xlbjsKPiA+ICAgCWJvb2wgcmVwbHk7
Cj4gPiAgIH07Cj4gPiArc3RydWN0IHZpcnRpb192c29ja19idWYgewo+ID4gKwlzdHJ1Y3QgbGlz
dF9oZWFkIGxpc3Q7Cj4gPiArCXZvaWQgKmFkZHI7Cj4gPiArCXUzMiBsZW47Cj4gPiArCXUzMiBv
ZmY7Cj4gPiArfTsKPiA+ICsKPiA+ICAgc3RydWN0IHZpcnRpb192c29ja19wa3RfaW5mbyB7Cj4g
PiAgIAl1MzIgcmVtb3RlX2NpZCwgcmVtb3RlX3BvcnQ7Cj4gPiAgIAlzdHJ1Y3QgdnNvY2tfc29j
ayAqdnNrOwo+ID4gZGlmZiAtLWdpdCBhL25ldC92bXdfdnNvY2svdmlydGlvX3RyYW5zcG9ydC5j
IGIvbmV0L3Ztd192c29jay92aXJ0aW9fdHJhbnNwb3J0LmMKPiA+IGluZGV4IDE1ZWI1ZDNkNDc1
MC4uYWYxZDJjZTEyZjU0IDEwMDY0NAo+ID4gLS0tIGEvbmV0L3Ztd192c29jay92aXJ0aW9fdHJh
bnNwb3J0LmMKPiA+ICsrKyBiL25ldC92bXdfdnNvY2svdmlydGlvX3RyYW5zcG9ydC5jCj4gPiBA
QCAtMjgwLDYgKzI4MCw3IEBAIHN0YXRpYyB2b2lkIHZpcnRpb192c29ja19yeF9maWxsKHN0cnVj
dCB2aXJ0aW9fdnNvY2sgKnZzb2NrKQo+ID4gICAJCQlicmVhazsKPiA+ICAgCQl9Cj4gPiArCQlw
a3QtPmJ1Zl9sZW4gPSBidWZfbGVuOwo+ID4gICAJCXBrdC0+bGVuID0gYnVmX2xlbjsKPiA+ICAg
CQlzZ19pbml0X29uZSgmaGRyLCAmcGt0LT5oZHIsIHNpemVvZihwa3QtPmhkcikpOwo+ID4gZGlm
ZiAtLWdpdCBhL25ldC92bXdfdnNvY2svdmlydGlvX3RyYW5zcG9ydF9jb21tb24uYyBiL25ldC92
bXdfdnNvY2svdmlydGlvX3RyYW5zcG9ydF9jb21tb24uYwo+ID4gaW5kZXggNjAyNzE1ZmM5YTc1
Li4wMjQ4ZDY4MDg3NTUgMTAwNjQ0Cj4gPiAtLS0gYS9uZXQvdm13X3Zzb2NrL3ZpcnRpb190cmFu
c3BvcnRfY29tbW9uLmMKPiA+ICsrKyBiL25ldC92bXdfdnNvY2svdmlydGlvX3RyYW5zcG9ydF9j
b21tb24uYwo+ID4gQEAgLTY1LDYgKzY1LDkgQEAgdmlydGlvX3RyYW5zcG9ydF9hbGxvY19wa3Qo
c3RydWN0IHZpcnRpb192c29ja19wa3RfaW5mbyAqaW5mbywKPiA+ICAgCQlwa3QtPmJ1ZiA9IGtt
YWxsb2MobGVuLCBHRlBfS0VSTkVMKTsKPiA+ICAgCQlpZiAoIXBrdC0+YnVmKQo+ID4gICAJCQln
b3RvIG91dF9wa3Q7Cj4gPiArCj4gPiArCQlwa3QtPmJ1Zl9sZW4gPSBsZW47Cj4gPiArCj4gPiAg
IAkJZXJyID0gbWVtY3B5X2Zyb21fbXNnKHBrdC0+YnVmLCBpbmZvLT5tc2csIGxlbik7Cj4gPiAg
IAkJaWYgKGVycikKPiA+ICAgCQkJZ290byBvdXQ7Cj4gPiBAQCAtODYsNiArODksNDYgQEAgdmly
dGlvX3RyYW5zcG9ydF9hbGxvY19wa3Qoc3RydWN0IHZpcnRpb192c29ja19wa3RfaW5mbyAqaW5m
bywKPiA+ICAgCXJldHVybiBOVUxMOwo+ID4gICB9Cj4gPiArc3RhdGljIHN0cnVjdCB2aXJ0aW9f
dnNvY2tfYnVmICoKPiA+ICt2aXJ0aW9fdHJhbnNwb3J0X2FsbG9jX2J1ZihzdHJ1Y3QgdmlydGlv
X3Zzb2NrX3BrdCAqcGt0LCBib29sIHplcm9fY29weSkKPiA+ICt7Cj4gPiArCXN0cnVjdCB2aXJ0
aW9fdnNvY2tfYnVmICpidWY7Cj4gPiArCj4gPiArCWlmIChwa3QtPmxlbiA9PSAwKQo+ID4gKwkJ
cmV0dXJuIE5VTEw7Cj4gPiArCj4gPiArCWJ1ZiA9IGt6YWxsb2Moc2l6ZW9mKCpidWYpLCBHRlBf
S0VSTkVMKTsKPiA+ICsJaWYgKCFidWYpCj4gPiArCQlyZXR1cm4gTlVMTDsKPiA+ICsKPiA+ICsJ
LyogSWYgdGhlIGJ1ZmZlciBpbiB0aGUgdmlydGlvX3Zzb2NrX3BrdCBpcyBmdWxsLCB3ZSBjYW4g
bW92ZSBpdCB0bwo+ID4gKwkgKiB0aGUgbmV3IHZpcnRpb192c29ja19idWYgYXZvaWRpbmcgdGhl
IGNvcHksIGJlY2F1c2Ugd2UgYXJlIHN1cmUgdGhhdAo+ID4gKwkgKiB3ZSBhcmUgbm90IHVzZSBt
b3JlIG1lbW9yeSB0aGFuIHRoYXQgY291bnRlZCBieSB0aGUgY3JlZGl0IG1lY2hhbmlzbS4KPiA+
ICsJICovCj4gPiArCWlmICh6ZXJvX2NvcHkgJiYgcGt0LT5sZW4gPT0gcGt0LT5idWZfbGVuKSB7
Cj4gPiArCQlidWYtPmFkZHIgPSBwa3QtPmJ1ZjsKPiA+ICsJCXBrdC0+YnVmID0gTlVMTDsKPiA+
ICsJfSBlbHNlIHsKPiAKPiAKPiBJcyB0aGUgY29weSBzdGlsbCBuZWVkZWQgaWYgd2UncmUganVz
dCBmZXcgYnl0ZXMgbGVzcz8gV2UgbWVldCBzaW1pbGFyIGlzc3VlCj4gZm9yIHZpcml0by1uZXQs
IGFuZCB2aXJ0aW8tbmV0IHNvbHZlIHRoaXMgYnkgYWx3YXlzIGNvcHkgZmlyc3QgMTI4Ynl0ZXMg
Zm9yCj4gYmlnIHBhY2tldHMuCj4gCj4gU2VlIHJlY2VpdmVfYmlnKCkKCkknbSBzZWVpbmcsIEl0
IGlzIG1vcmUgc29waGlzdGljYXRlZC4KSUlVQywgdmlydGlvLW5ldCBhbGxvY2F0ZXMgYSBza19i
dWZmIHdpdGggMTI4IGJ5dGVzIG9mIGJ1ZmZlciwgdGhlbiBjb3BpZXMgdGhlCmZpcnN0IDEyOCBi
eXRlcywgdGhlbiBhZGRzIHRoZSBidWZmZXIgdXNlZCB0byByZWNlaXZlIHRoZSBwYWNrZXQgYXMg
YSBmcmFnIHRvCnRoZSBza2IuCgpEbyB5b3Ugc3VnZ2VzdCB0byBpbXBsZW1lbnQgc29tZXRoaW5n
IHNpbWlsYXIsIG9yIGZvciBub3cgd2UgY2FuIHVzZSBteQphcHByb2FjaCBhbmQgaWYgd2Ugd2ls
bCBtZXJnZSB0aGUgZGF0YXBhdGggd2UgY2FuIHJldXNlIHRoZSB2aXJ0aW8tbmV0CmFwcHJvYWNo
PwoKVGhhbmtzLApTdGVmYW5vCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0
cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcv
bWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
