Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
	by mail.lfdr.de (Postfix) with ESMTPS id F0F2E4CF09F
	for <lists.virtualization@lfdr.de>; Mon,  7 Mar 2022 05:24:45 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp3.osuosl.org (Postfix) with ESMTP id 5D4F160D8E;
	Mon,  7 Mar 2022 04:24:44 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
	by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OtjUxbovYB6o; Mon,  7 Mar 2022 04:24:42 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp3.osuosl.org (Postfix) with ESMTPS id 52C5B60D91;
	Mon,  7 Mar 2022 04:24:42 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id BE6E2C0084;
	Mon,  7 Mar 2022 04:24:41 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id EB44AC000B
 for <virtualization@lists.linux-foundation.org>;
 Mon,  7 Mar 2022 04:24:40 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id D401640338
 for <virtualization@lists.linux-foundation.org>;
 Mon,  7 Mar 2022 04:24:40 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp4.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 1dyqBY_kTgDx
 for <virtualization@lists.linux-foundation.org>;
 Mon,  7 Mar 2022 04:24:39 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.129.124])
 by smtp4.osuosl.org (Postfix) with ESMTPS id 3B93E40322
 for <virtualization@lists.linux-foundation.org>;
 Mon,  7 Mar 2022 04:24:39 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1646627078;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=p92MWnPfBJ4r6AJ6Z6cvdgfG2f1xwun9L500tcPEi5c=;
 b=cA6V8SDuTc/lcTouwP7eASEQfcBUJdqgUMBP4w4xwOnS4iy5dqN/HKmZVUQSLxIaSuu04g
 /vNbva0tAlVlhPK30SUt8ikH7gb2GlHgL6qlurakNmAYgqziKjPO1pSg9nIXH6slOayvKu
 sjGKHuHgBASPnWCsvSUIG1thXcDBQjA=
Received: from mail-pl1-f200.google.com (mail-pl1-f200.google.com
 [209.85.214.200]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 us-mta-649-fVMxotW7MtKqg626EMZd7g-1; Sun, 06 Mar 2022 23:24:37 -0500
X-MC-Unique: fVMxotW7MtKqg626EMZd7g-1
Received: by mail-pl1-f200.google.com with SMTP id
 w13-20020a1709027b8d00b0014fb4f012d3so6754469pll.12
 for <virtualization@lists.linux-foundation.org>;
 Sun, 06 Mar 2022 20:24:36 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:message-id:date:mime-version:user-agent:subject
 :content-language:to:cc:references:from:in-reply-to
 :content-transfer-encoding;
 bh=p92MWnPfBJ4r6AJ6Z6cvdgfG2f1xwun9L500tcPEi5c=;
 b=4G5ndI7SnPYQGvN1ukygpXeuX9gqWlL9xIqvZcDznKWRIIeC8s7nwnnxiJFMGmXlqw
 Z5hm/kkVDEDfesfkc6as5CfWGAG6ESqT6eTPBx4EalOOFBOMzXvTgqUlq0M+e/d6J+gu
 ObAdhVCEadCIAkCY9dhY1Tt4QCIwHdPkurX0mRfMygaYYAehdhTXyOtJBpv853V93vq/
 8s1OXJJWtGBkDKeEKn3FGVgsAzkE5Y7eQDDoQqRpZXLari7SvDnZDPkwDaXl8lZffo6G
 t8CFz/Y4O/jUhafby20K5Mwff1NAvJFbp+NUyr6x7rWKKmnKmaOTmIOn4T06HCWLeH0Q
 jHXA==
X-Gm-Message-State: AOAM530+KmUrVmNaJ9dMOY86pJazpzN+PI7n10kRPogw80ubIxPwGxke
 fqnhjeXRZGlkMm/8F+GQ67RgtJ5rjD82TtT6hifLJhYByyM0YVZVVu9j69ViTphzlIR7duvotGR
 Sha+QhPks4YpxglTkuVm1qtpZcLKZFl1i3f8OhXKoIg==
X-Received: by 2002:a63:4d60:0:b0:36c:8803:b92d with SMTP id
 n32-20020a634d60000000b0036c8803b92dmr8256334pgl.179.1646627075687; 
 Sun, 06 Mar 2022 20:24:35 -0800 (PST)
X-Google-Smtp-Source: ABdhPJwqf+cHapaVRqSj2kTmUrENqbo7louE9xtAE4GLSRSaNKF+kmdh3Aqz4FkcJ182SbnyWcrllA==
X-Received: by 2002:a63:4d60:0:b0:36c:8803:b92d with SMTP id
 n32-20020a634d60000000b0036c8803b92dmr8256296pgl.179.1646627075124; 
 Sun, 06 Mar 2022 20:24:35 -0800 (PST)
Received: from [10.72.14.16] ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id
 h3-20020a056a00170300b004f104c635e4sm14093917pfc.99.2022.03.06.20.24.27
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Sun, 06 Mar 2022 20:24:34 -0800 (PST)
Message-ID: <f678338a-8a37-8163-c200-6bccf02f1009@redhat.com>
Date: Mon, 7 Mar 2022 12:24:22 +0800
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0)
 Gecko/20100101 Thunderbird/91.6.1
Subject: Re: [PATCH v2 10/14] vdpa: Add custom IOTLB translations to SVQ
To: Eugenio Perez Martin <eperezma@redhat.com>
References: <20220227134111.3254066-1-eperezma@redhat.com>
 <20220227134111.3254066-11-eperezma@redhat.com>
 <af6d14b3-6bdf-8717-90b5-bc685896cc8a@redhat.com>
 <CAJaqyWf9c=OOKt7sB=kMY7FzNGG+YfPF=qNbu6A0UVkhzxmHZA@mail.gmail.com>
 <cc5e53a9-4b83-ce44-f32b-cb8d758b2cf2@redhat.com>
 <CAJaqyWfwDjuVsX_ELpad0-8EQJJhK79tz5Yi18Ye1xksM_1snQ@mail.gmail.com>
From: Jason Wang <jasowang@redhat.com>
In-Reply-To: <CAJaqyWfwDjuVsX_ELpad0-8EQJJhK79tz5Yi18Ye1xksM_1snQ@mail.gmail.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: "Michael S. Tsirkin" <mst@redhat.com>, qemu-level <qemu-devel@nongnu.org>,
 virtualization <virtualization@lists.linux-foundation.org>,
 Eli Cohen <eli@mellanox.com>, Eric Blake <eblake@redhat.com>,
 Parav Pandit <parav@mellanox.com>, Cindy Lu <lulu@redhat.com>,
 "Fangyi \(Eric\)" <eric.fangyi@huawei.com>,
 Markus Armbruster <armbru@redhat.com>, yebiaoxiang@huawei.com,
 Liuxiangdong <liuxiangdong5@huawei.com>, Laurent Vivier <lvivier@redhat.com>,
 Eduardo Habkost <ehabkost@redhat.com>,
 Richard Henderson <richard.henderson@linaro.org>,
 Gautam Dawar <gdawar@xilinx.com>, Xiao W Wang <xiao.w.wang@intel.com>,
 Stefan Hajnoczi <stefanha@redhat.com>,
 Harpreet Singh Anand <hanand@xilinx.com>, Paolo Bonzini <pbonzini@redhat.com>,
 Lingshan <lingshan.zhu@intel.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CuWcqCAyMDIyLzMvMyDkuIvljYg3OjM1LCBFdWdlbmlvIFBlcmV6IE1hcnRpbiDlhpnpgZM6Cj4g
T24gVGh1LCBNYXIgMywgMjAyMiBhdCA4OjMzIEFNIEphc29uIFdhbmcgPGphc293YW5nQHJlZGhh
dC5jb20+IHdyb3RlOgo+Pgo+PiDlnKggMjAyMi8zLzEg5LiL5Y2INDo1MCwgRXVnZW5pbyBQZXJl
eiBNYXJ0aW4g5YaZ6YGTOgo+Pj4gT24gTW9uLCBGZWIgMjgsIDIwMjIgYXQgODozNyBBTSBKYXNv
biBXYW5nIDxqYXNvd2FuZ0ByZWRoYXQuY29tPiB3cm90ZToKPj4+PiDlnKggMjAyMi8yLzI3IOS4
i+WNiDk6NDEsIEV1Z2VuaW8gUMOpcmV6IOWGmemBkzoKPj4+Pj4gVXNlIHRyYW5zbGF0aW9ucyBh
ZGRlZCBpbiBWaG9zdElPVkFUcmVlIGluIFNWUS4KPj4+Pj4KPj4+Pj4gT25seSBpbnRyb2R1Y2Ug
dXNhZ2UgaGVyZSwgbm90IGFsbG9jYXRpb24gYW5kIGRlYWxsb2NhdGlvbi4gQXMgd2l0aAo+Pj4+
PiBwcmV2aW91cyBwYXRjaGVzLCB3ZSB1c2UgdGhlIGRlYWQgY29kZSBwYXRocyBvZiBzaGFkb3df
dnFzX2VuYWJsZWQgdG8KPj4+Pj4gYXZvaWQgY29tbWl0aW5nIHRvbyBtYW55IGNoYW5nZXMgYXQg
b25jZS4gVGhlc2UgYXJlIGltcG9zc2libGUgdG8gdGFrZQo+Pj4+PiBhdCB0aGUgbW9tZW50Lgo+
Pj4+Pgo+Pj4+PiBTaWduZWQtb2ZmLWJ5OiBFdWdlbmlvIFDDqXJleiA8ZXBlcmV6bWFAcmVkaGF0
LmNvbT4KPj4+Pj4gLS0tCj4+Pj4+ICAgICBody92aXJ0aW8vdmhvc3Qtc2hhZG93LXZpcnRxdWV1
ZS5oIHwgICA2ICstCj4+Pj4+ICAgICBpbmNsdWRlL2h3L3ZpcnRpby92aG9zdC12ZHBhLmggICAg
IHwgICAzICsKPj4+Pj4gICAgIGh3L3ZpcnRpby92aG9zdC1zaGFkb3ctdmlydHF1ZXVlLmMgfCAg
NzYgKysrKysrKysrKysrKysrKy0KPj4+Pj4gICAgIGh3L3ZpcnRpby92aG9zdC12ZHBhLmMgICAg
ICAgICAgICAgfCAxMjggKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0KPj4+Pj4gICAgIDQg
ZmlsZXMgY2hhbmdlZCwgMTg3IGluc2VydGlvbnMoKyksIDI2IGRlbGV0aW9ucygtKQo+Pj4+Pgo+
Pj4+PiBkaWZmIC0tZ2l0IGEvaHcvdmlydGlvL3Zob3N0LXNoYWRvdy12aXJ0cXVldWUuaCBiL2h3
L3ZpcnRpby92aG9zdC1zaGFkb3ctdmlydHF1ZXVlLmgKPj4+Pj4gaW5kZXggMDRjNjc2ODVmZC4u
YjJmNzIyZDEwMSAxMDA2NDQKPj4+Pj4gLS0tIGEvaHcvdmlydGlvL3Zob3N0LXNoYWRvdy12aXJ0
cXVldWUuaAo+Pj4+PiArKysgYi9ody92aXJ0aW8vdmhvc3Qtc2hhZG93LXZpcnRxdWV1ZS5oCj4+
Pj4+IEBAIC0xMyw2ICsxMyw3IEBACj4+Pj4+ICAgICAjaW5jbHVkZSAicWVtdS9ldmVudF9ub3Rp
Zmllci5oIgo+Pj4+PiAgICAgI2luY2x1ZGUgImh3L3ZpcnRpby92aXJ0aW8uaCIKPj4+Pj4gICAg
ICNpbmNsdWRlICJzdGFuZGFyZC1oZWFkZXJzL2xpbnV4L3Zob3N0X3R5cGVzLmgiCj4+Pj4+ICsj
aW5jbHVkZSAiaHcvdmlydGlvL3Zob3N0LWlvdmEtdHJlZS5oIgo+Pj4+Pgo+Pj4+PiAgICAgLyog
U2hhZG93IHZpcnRxdWV1ZSB0byByZWxheSBub3RpZmljYXRpb25zICovCj4+Pj4+ICAgICB0eXBl
ZGVmIHN0cnVjdCBWaG9zdFNoYWRvd1ZpcnRxdWV1ZSB7Cj4+Pj4+IEBAIC00Myw2ICs0NCw5IEBA
IHR5cGVkZWYgc3RydWN0IFZob3N0U2hhZG93VmlydHF1ZXVlIHsKPj4+Pj4gICAgICAgICAvKiBW
aXJ0aW8gZGV2aWNlICovCj4+Pj4+ICAgICAgICAgVmlydElPRGV2aWNlICp2ZGV2Owo+Pj4+Pgo+
Pj4+PiArICAgIC8qIElPVkEgbWFwcGluZyAqLwo+Pj4+PiArICAgIFZob3N0SU9WQVRyZWUgKmlv
dmFfdHJlZTsKPj4+Pj4gKwo+Pj4+PiAgICAgICAgIC8qIE1hcCBmb3IgdXNlIHRoZSBndWVzdCdz
IGRlc2NyaXB0b3JzICovCj4+Pj4+ICAgICAgICAgVmlydFF1ZXVlRWxlbWVudCAqKnJpbmdfaWRf
bWFwczsKPj4+Pj4KPj4+Pj4gQEAgLTc4LDcgKzgyLDcgQEAgdm9pZCB2aG9zdF9zdnFfc3RhcnQo
Vmhvc3RTaGFkb3dWaXJ0cXVldWUgKnN2cSwgVmlydElPRGV2aWNlICp2ZGV2LAo+Pj4+PiAgICAg
ICAgICAgICAgICAgICAgICAgICAgVmlydFF1ZXVlICp2cSk7Cj4+Pj4+ICAgICB2b2lkIHZob3N0
X3N2cV9zdG9wKFZob3N0U2hhZG93VmlydHF1ZXVlICpzdnEpOwo+Pj4+Pgo+Pj4+PiAtVmhvc3RT
aGFkb3dWaXJ0cXVldWUgKnZob3N0X3N2cV9uZXcodm9pZCk7Cj4+Pj4+ICtWaG9zdFNoYWRvd1Zp
cnRxdWV1ZSAqdmhvc3Rfc3ZxX25ldyhWaG9zdElPVkFUcmVlICppb3ZhX3RyZWUpOwo+Pj4+Pgo+
Pj4+PiAgICAgdm9pZCB2aG9zdF9zdnFfZnJlZShncG9pbnRlciB2cSk7Cj4+Pj4+ICAgICBHX0RF
RklORV9BVVRPUFRSX0NMRUFOVVBfRlVOQyhWaG9zdFNoYWRvd1ZpcnRxdWV1ZSwgdmhvc3Rfc3Zx
X2ZyZWUpOwo+Pj4+PiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9ody92aXJ0aW8vdmhvc3QtdmRwYS5o
IGIvaW5jbHVkZS9ody92aXJ0aW8vdmhvc3QtdmRwYS5oCj4+Pj4+IGluZGV4IDAwOWE5ZjNiNmIu
LmVlOGU5MzlhZDAgMTAwNjQ0Cj4+Pj4+IC0tLSBhL2luY2x1ZGUvaHcvdmlydGlvL3Zob3N0LXZk
cGEuaAo+Pj4+PiArKysgYi9pbmNsdWRlL2h3L3ZpcnRpby92aG9zdC12ZHBhLmgKPj4+Pj4gQEAg
LTE0LDYgKzE0LDcgQEAKPj4+Pj4KPj4+Pj4gICAgICNpbmNsdWRlIDxnbW9kdWxlLmg+Cj4+Pj4+
Cj4+Pj4+ICsjaW5jbHVkZSAiaHcvdmlydGlvL3Zob3N0LWlvdmEtdHJlZS5oIgo+Pj4+PiAgICAg
I2luY2x1ZGUgImh3L3ZpcnRpby92aXJ0aW8uaCIKPj4+Pj4gICAgICNpbmNsdWRlICJzdGFuZGFy
ZC1oZWFkZXJzL2xpbnV4L3Zob3N0X3R5cGVzLmgiCj4+Pj4+Cj4+Pj4+IEBAIC0zMCw2ICszMSw4
IEBAIHR5cGVkZWYgc3RydWN0IHZob3N0X3ZkcGEgewo+Pj4+PiAgICAgICAgIE1lbW9yeUxpc3Rl
bmVyIGxpc3RlbmVyOwo+Pj4+PiAgICAgICAgIHN0cnVjdCB2aG9zdF92ZHBhX2lvdmFfcmFuZ2Ug
aW92YV9yYW5nZTsKPj4+Pj4gICAgICAgICBib29sIHNoYWRvd192cXNfZW5hYmxlZDsKPj4+Pj4g
KyAgICAvKiBJT1ZBIG1hcHBpbmcgdXNlZCBieSB0aGUgU2hhZG93IFZpcnRxdWV1ZSAqLwo+Pj4+
PiArICAgIFZob3N0SU9WQVRyZWUgKmlvdmFfdHJlZTsKPj4+Pj4gICAgICAgICBHUHRyQXJyYXkg
KnNoYWRvd192cXM7Cj4+Pj4+ICAgICAgICAgc3RydWN0IHZob3N0X2RldiAqZGV2Owo+Pj4+PiAg
ICAgICAgIFZob3N0VkRQQUhvc3ROb3RpZmllciBub3RpZmllcltWSVJUSU9fUVVFVUVfTUFYXTsK
Pj4+Pj4gZGlmZiAtLWdpdCBhL2h3L3ZpcnRpby92aG9zdC1zaGFkb3ctdmlydHF1ZXVlLmMgYi9o
dy92aXJ0aW8vdmhvc3Qtc2hhZG93LXZpcnRxdWV1ZS5jCj4+Pj4+IGluZGV4IGEzOGQzMTM3NTUu
LjdlMDczNzczZDEgMTAwNjQ0Cj4+Pj4+IC0tLSBhL2h3L3ZpcnRpby92aG9zdC1zaGFkb3ctdmly
dHF1ZXVlLmMKPj4+Pj4gKysrIGIvaHcvdmlydGlvL3Zob3N0LXNoYWRvdy12aXJ0cXVldWUuYwo+
Pj4+PiBAQCAtMTEsNiArMTEsNyBAQAo+Pj4+PiAgICAgI2luY2x1ZGUgImh3L3ZpcnRpby92aG9z
dC1zaGFkb3ctdmlydHF1ZXVlLmgiCj4+Pj4+Cj4+Pj4+ICAgICAjaW5jbHVkZSAicWVtdS9lcnJv
ci1yZXBvcnQuaCIKPj4+Pj4gKyNpbmNsdWRlICJxZW11L2xvZy5oIgo+Pj4+PiAgICAgI2luY2x1
ZGUgInFlbXUvbWFpbi1sb29wLmgiCj4+Pj4+ICAgICAjaW5jbHVkZSAicWVtdS9sb2cuaCIKPj4+
Pj4gICAgICNpbmNsdWRlICJsaW51eC1oZWFkZXJzL2xpbnV4L3Zob3N0LmgiCj4+Pj4+IEBAIC04
NCw3ICs4NSw1OCBAQCBzdGF0aWMgdm9pZCB2aG9zdF9zdnFfc2V0X25vdGlmaWNhdGlvbihWaG9z
dFNoYWRvd1ZpcnRxdWV1ZSAqc3ZxLCBib29sIGVuYWJsZSkKPj4+Pj4gICAgICAgICB9Cj4+Pj4+
ICAgICB9Cj4+Pj4+Cj4+Pj4+ICsvKioKPj4+Pj4gKyAqIFRyYW5zbGF0ZSBhZGRyZXNzZXMgYmV0
d2VlbiB0aGUgcWVtdSdzIHZpcnR1YWwgYWRkcmVzcyBhbmQgdGhlIFNWUSBJT1ZBCj4+Pj4+ICsg
Kgo+Pj4+PiArICogQHN2cSAgICBTaGFkb3cgVmlydFF1ZXVlCj4+Pj4+ICsgKiBAdmFkZHIgIFRy
YW5zbGF0ZWQgSU9WQSBhZGRyZXNzZXMKPj4+Pj4gKyAqIEBpb3ZlYyAgU291cmNlIHFlbXUncyBW
QSBhZGRyZXNzZXMKPj4+Pj4gKyAqIEBudW0gICAgTGVuZ3RoIG9mIGlvdmVjIGFuZCBtaW5pbXVt
IGxlbmd0aCBvZiB2YWRkcgo+Pj4+PiArICovCj4+Pj4+ICtzdGF0aWMgYm9vbCB2aG9zdF9zdnFf
dHJhbnNsYXRlX2FkZHIoY29uc3QgVmhvc3RTaGFkb3dWaXJ0cXVldWUgKnN2cSwKPj4+Pj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkICoqYWRkcnMsIGNvbnN0IHN0
cnVjdCBpb3ZlYyAqaW92ZWMsCj4+Pj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc2l6ZV90IG51bSkKPj4+Pj4gK3sKPj4+Pj4gKyAgICBpZiAobnVtID09IDApIHsKPj4+
Pj4gKyAgICAgICAgcmV0dXJuIHRydWU7Cj4+Pj4+ICsgICAgfQo+Pj4+PiArCj4+Pj4+ICsgICAg
Zm9yIChzaXplX3QgaSA9IDA7IGkgPCBudW07ICsraSkgewo+Pj4+PiArICAgICAgICBETUFNYXAg
bmVlZGxlID0gewo+Pj4+PiArICAgICAgICAgICAgLnRyYW5zbGF0ZWRfYWRkciA9IChod2FkZHIp
aW92ZWNbaV0uaW92X2Jhc2UsCj4+Pj4+ICsgICAgICAgICAgICAuc2l6ZSA9IGlvdmVjW2ldLmlv
dl9sZW4sCj4+Pj4+ICsgICAgICAgIH07Cj4+Pj4+ICsgICAgICAgIHNpemVfdCBvZmY7Cj4+Pj4+
ICsKPj4+Pj4gKyAgICAgICAgY29uc3QgRE1BTWFwICptYXAgPSB2aG9zdF9pb3ZhX3RyZWVfZmlu
ZF9pb3ZhKHN2cS0+aW92YV90cmVlLCAmbmVlZGxlKTsKPj4+Pj4gKyAgICAgICAgLyoKPj4+Pj4g
KyAgICAgICAgICogTWFwIGNhbm5vdCBiZSBOVUxMIHNpbmNlIGlvdmEgbWFwIGNvbnRhaW5zIGFs
bCBndWVzdCBzcGFjZSBhbmQKPj4+Pj4gKyAgICAgICAgICogcWVtdSBhbHJlYWR5IGhhcyBhIHBo
eXNpY2FsIGFkZHJlc3MgbWFwcGVkCj4+Pj4+ICsgICAgICAgICAqLwo+Pj4+PiArICAgICAgICBp
ZiAodW5saWtlbHkoIW1hcCkpIHsKPj4+Pj4gKyAgICAgICAgICAgIHFlbXVfbG9nX21hc2soTE9H
X0dVRVNUX0VSUk9SLAo+Pj4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAiSW52YWxpZCBh
ZGRyZXNzIDB4JSJIV0FERFJfUFJJeCIgZ2l2ZW4gYnkgZ3Vlc3QiLAo+Pj4+PiArICAgICAgICAg
ICAgICAgICAgICAgICAgICBuZWVkbGUudHJhbnNsYXRlZF9hZGRyKTsKPj4+Pj4gKyAgICAgICAg
ICAgIHJldHVybiBmYWxzZTsKPj4+Pj4gKyAgICAgICAgfQo+Pj4+PiArCj4+Pj4+ICsgICAgICAg
IG9mZiA9IG5lZWRsZS50cmFuc2xhdGVkX2FkZHIgLSBtYXAtPnRyYW5zbGF0ZWRfYWRkcjsKPj4+
Pj4gKyAgICAgICAgYWRkcnNbaV0gPSAodm9pZCAqKShtYXAtPmlvdmEgKyBvZmYpOwo+Pj4+PiAr
Cj4+Pj4+ICsgICAgICAgIGlmICh1bmxpa2VseShpbnQxMjhfZ3QoaW50MTI4X2FkZChuZWVkbGUu
dHJhbnNsYXRlZF9hZGRyLAo+Pj4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaW92ZWNbaV0uaW92X2xlbiksCj4+Pj4+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgbWFwLT50cmFuc2xhdGVkX2FkZHIgKyBtYXAtPnNpemUpKSkgewo+Pj4+PiArICAg
ICAgICAgICAgcWVtdV9sb2dfbWFzayhMT0dfR1VFU1RfRVJST1IsCj4+Pj4+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICJHdWVzdCBidWZmZXIgZXhwYW5kcyBvdmVyIGlvdmEgcmFuZ2UiKTsK
Pj4+Pj4gKyAgICAgICAgICAgIHJldHVybiBmYWxzZTsKPj4+Pj4gKyAgICAgICAgfQo+Pj4+PiAr
ICAgIH0KPj4+Pj4gKwo+Pj4+PiArICAgIHJldHVybiB0cnVlOwo+Pj4+PiArfQo+Pj4+PiArCj4+
Pj4+ICAgICBzdGF0aWMgdm9pZCB2aG9zdF92cmluZ193cml0ZV9kZXNjcyhWaG9zdFNoYWRvd1Zp
cnRxdWV1ZSAqc3ZxLAo+Pj4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dm9pZCAqIGNvbnN0ICp2YWRkcl9zZywKPj4+PiBOaXQ6IGl0IGxvb2tzIHRvIG1lIHdlIGFyZSBu
b3QgcGFzc2luZyB2YWRkciBidXQgaW92YSBoZXJlLCBzbyBpdCBtaWdodAo+Pj4+IGJlIGJldHRl
ciB0byB1c2UgInNnIj8KPj4+Pgo+Pj4gU3VyZSwgdGhpcyBpcyBhIGxlZnRvdmVyIG9mIHByZS1J
T1ZBIHRyYW5zbGF0aW9ucy4gSSBzZWUgYmV0dGVyIHRvCj4+PiB3cml0ZSBhcyB5b3Ugc2F5Lgo+
Pj4KPj4+Pj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0
cnVjdCBpb3ZlYyAqaW92ZWMsCj4+Pj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzaXplX3QgbnVtLCBib29sIG1vcmVfZGVzY3MsIGJvb2wgd3JpdGUpCj4+Pj4+ICAg
ICB7Cj4+Pj4+IEBAIC0xMDMsNyArMTU1LDcgQEAgc3RhdGljIHZvaWQgdmhvc3RfdnJpbmdfd3Jp
dGVfZGVzY3MoVmhvc3RTaGFkb3dWaXJ0cXVldWUgKnN2cSwKPj4+Pj4gICAgICAgICAgICAgfSBl
bHNlIHsKPj4+Pj4gICAgICAgICAgICAgICAgIGRlc2NzW2ldLmZsYWdzID0gZmxhZ3M7Cj4+Pj4+
ICAgICAgICAgICAgIH0KPj4+Pj4gLSAgICAgICAgZGVzY3NbaV0uYWRkciA9IGNwdV90b19sZTY0
KChod2FkZHIpaW92ZWNbbl0uaW92X2Jhc2UpOwo+Pj4+PiArICAgICAgICBkZXNjc1tpXS5hZGRy
ID0gY3B1X3RvX2xlNjQoKGh3YWRkcil2YWRkcl9zZ1tuXSk7Cj4+Pj4+ICAgICAgICAgICAgIGRl
c2NzW2ldLmxlbiA9IGNwdV90b19sZTMyKGlvdmVjW25dLmlvdl9sZW4pOwo+Pj4+Pgo+Pj4+PiAg
ICAgICAgICAgICBsYXN0ID0gaTsKPj4+Pj4gQEAgLTExOSw2ICsxNzEsOCBAQCBzdGF0aWMgYm9v
bCB2aG9zdF9zdnFfYWRkX3NwbGl0KFZob3N0U2hhZG93VmlydHF1ZXVlICpzdnEsCj4+Pj4+ICAg
ICB7Cj4+Pj4+ICAgICAgICAgdW5zaWduZWQgYXZhaWxfaWR4Owo+Pj4+PiAgICAgICAgIHZyaW5n
X2F2YWlsX3QgKmF2YWlsID0gc3ZxLT52cmluZy5hdmFpbDsKPj4+Pj4gKyAgICBib29sIG9rOwo+
Pj4+PiArICAgIGdfYXV0b2ZyZWUgdm9pZCAqKnNncyA9IGdfbmV3KHZvaWQgKiwgTUFYKGVsZW0t
Pm91dF9udW0sIGVsZW0tPmluX251bSkpOwo+Pj4+Pgo+Pj4+PiAgICAgICAgICpoZWFkID0gc3Zx
LT5mcmVlX2hlYWQ7Cj4+Pj4+Cj4+Pj4+IEBAIC0xMjksOSArMTgzLDIwIEBAIHN0YXRpYyBib29s
IHZob3N0X3N2cV9hZGRfc3BsaXQoVmhvc3RTaGFkb3dWaXJ0cXVldWUgKnN2cSwKPj4+Pj4gICAg
ICAgICAgICAgcmV0dXJuIGZhbHNlOwo+Pj4+PiAgICAgICAgIH0KPj4+Pj4KPj4+Pj4gLSAgICB2
aG9zdF92cmluZ193cml0ZV9kZXNjcyhzdnEsIGVsZW0tPm91dF9zZywgZWxlbS0+b3V0X251bSwK
Pj4+Pj4gKyAgICBvayA9IHZob3N0X3N2cV90cmFuc2xhdGVfYWRkcihzdnEsIHNncywgZWxlbS0+
b3V0X3NnLCBlbGVtLT5vdXRfbnVtKTsKPj4+Pj4gKyAgICBpZiAodW5saWtlbHkoIW9rKSkgewo+
Pj4+PiArICAgICAgICByZXR1cm4gZmFsc2U7Cj4+Pj4+ICsgICAgfQo+Pj4+PiArICAgIHZob3N0
X3ZyaW5nX3dyaXRlX2Rlc2NzKHN2cSwgc2dzLCBlbGVtLT5vdXRfc2csIGVsZW0tPm91dF9udW0s
Cj4+Pj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS0+aW5fbnVtID4gMCwg
ZmFsc2UpOwo+Pj4+PiAtICAgIHZob3N0X3ZyaW5nX3dyaXRlX2Rlc2NzKHN2cSwgZWxlbS0+aW5f
c2csIGVsZW0tPmluX251bSwgZmFsc2UsIHRydWUpOwo+Pj4+PiArCj4+Pj4+ICsKPj4+Pj4gKyAg
ICBvayA9IHZob3N0X3N2cV90cmFuc2xhdGVfYWRkcihzdnEsIHNncywgZWxlbS0+aW5fc2csIGVs
ZW0tPmluX251bSk7Cj4+Pj4+ICsgICAgaWYgKHVubGlrZWx5KCFvaykpIHsKPj4+Pj4gKyAgICAg
ICAgcmV0dXJuIGZhbHNlOwo+Pj4+PiArICAgIH0KPj4+Pj4gKwo+Pj4+PiArICAgIHZob3N0X3Zy
aW5nX3dyaXRlX2Rlc2NzKHN2cSwgc2dzLCBlbGVtLT5pbl9zZywgZWxlbS0+aW5fbnVtLCBmYWxz
ZSwgdHJ1ZSk7Cj4+Pj4+Cj4+Pj4+ICAgICAgICAgLyoKPj4+Pj4gICAgICAgICAgKiBQdXQgdGhl
IGVudHJ5IGluIHRoZSBhdmFpbGFibGUgYXJyYXkgKGJ1dCBkb24ndCB1cGRhdGUgYXZhaWwtPmlk
eCB1bnRpbAo+Pj4+PiBAQCAtNTE0LDExICs1NzksMTMgQEAgdm9pZCB2aG9zdF9zdnFfc3RvcChW
aG9zdFNoYWRvd1ZpcnRxdWV1ZSAqc3ZxKQo+Pj4+PiAgICAgICogQ3JlYXRlcyB2aG9zdCBzaGFk
b3cgdmlydHF1ZXVlLCBhbmQgaW5zdHJ1Y3RzIHRoZSB2aG9zdCBkZXZpY2UgdG8gdXNlIHRoZQo+
Pj4+PiAgICAgICogc2hhZG93IG1ldGhvZHMgYW5kIGZpbGUgZGVzY3JpcHRvcnMuCj4+Pj4+ICAg
ICAgKgo+Pj4+PiArICogQGlvdmFfdHJlZSBUcmVlIHRvIHBlcmZvcm0gZGVzY3JpcHRvcnMgdHJh
bnNsYXRpb25zCj4+Pj4+ICsgKgo+Pj4+PiAgICAgICogUmV0dXJucyB0aGUgbmV3IHZpcnRxdWV1
ZSBvciBOVUxMLgo+Pj4+PiAgICAgICoKPj4+Pj4gICAgICAqIEluIGNhc2Ugb2YgZXJyb3IsIHJl
YXNvbiBpcyByZXBvcnRlZCB0aHJvdWdoIGVycm9yX3JlcG9ydC4KPj4+Pj4gICAgICAqLwo+Pj4+
PiAtVmhvc3RTaGFkb3dWaXJ0cXVldWUgKnZob3N0X3N2cV9uZXcodm9pZCkKPj4+Pj4gK1Zob3N0
U2hhZG93VmlydHF1ZXVlICp2aG9zdF9zdnFfbmV3KFZob3N0SU9WQVRyZWUgKmlvdmFfdHJlZSkK
Pj4+Pj4gICAgIHsKPj4+Pj4gICAgICAgICBnX2F1dG9mcmVlIFZob3N0U2hhZG93VmlydHF1ZXVl
ICpzdnEgPSBnX25ldzAoVmhvc3RTaGFkb3dWaXJ0cXVldWUsIDEpOwo+Pj4+PiAgICAgICAgIGlu
dCByOwo+Pj4+PiBAQCAtNTM5LDYgKzYwNiw3IEBAIFZob3N0U2hhZG93VmlydHF1ZXVlICp2aG9z
dF9zdnFfbmV3KHZvaWQpCj4+Pj4+Cj4+Pj4+ICAgICAgICAgZXZlbnRfbm90aWZpZXJfaW5pdF9m
ZCgmc3ZxLT5zdnFfa2ljaywgVkhPU1RfRklMRV9VTkJJTkQpOwo+Pj4+PiAgICAgICAgIGV2ZW50
X25vdGlmaWVyX3NldF9oYW5kbGVyKCZzdnEtPmhkZXZfY2FsbCwgdmhvc3Rfc3ZxX2hhbmRsZV9j
YWxsKTsKPj4+Pj4gKyAgICBzdnEtPmlvdmFfdHJlZSA9IGlvdmFfdHJlZTsKPj4+Pj4gICAgICAg
ICByZXR1cm4gZ19zdGVhbF9wb2ludGVyKCZzdnEpOwo+Pj4+Pgo+Pj4+PiAgICAgZXJyX2luaXRf
aGRldl9jYWxsOgo+Pj4+PiBkaWZmIC0tZ2l0IGEvaHcvdmlydGlvL3Zob3N0LXZkcGEuYyBiL2h3
L3ZpcnRpby92aG9zdC12ZHBhLmMKPj4+Pj4gaW5kZXggNDM1YjljMmU5ZS4uNTZmOWYxMjVjZCAx
MDA2NDQKPj4+Pj4gLS0tIGEvaHcvdmlydGlvL3Zob3N0LXZkcGEuYwo+Pj4+PiArKysgYi9ody92
aXJ0aW8vdmhvc3QtdmRwYS5jCj4+Pj4+IEBAIC0yMDksNiArMjA5LDIxIEBAIHN0YXRpYyB2b2lk
IHZob3N0X3ZkcGFfbGlzdGVuZXJfcmVnaW9uX2FkZChNZW1vcnlMaXN0ZW5lciAqbGlzdGVuZXIs
Cj4+Pj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhZGRy
LCBzZWN0aW9uLT5yZWFkb25seSk7Cj4+Pj4+Cj4+Pj4+ICAgICAgICAgbGxzaXplID0gaW50MTI4
X3N1YihsbGVuZCwgaW50MTI4X21ha2U2NChpb3ZhKSk7Cj4+Pj4+ICsgICAgaWYgKHYtPnNoYWRv
d192cXNfZW5hYmxlZCkgewo+Pj4+PiArICAgICAgICBETUFNYXAgbWVtX3JlZ2lvbiA9IHsKPj4+
Pj4gKyAgICAgICAgICAgIC50cmFuc2xhdGVkX2FkZHIgPSAoaHdhZGRyKXZhZGRyLAo+Pj4+PiAr
ICAgICAgICAgICAgLnNpemUgPSBpbnQxMjhfZ2V0NjQobGxzaXplKSAtIDEsCj4+Pj4+ICsgICAg
ICAgICAgICAucGVybSA9IElPTU1VX0FDQ0VTU19GTEFHKHRydWUsIHNlY3Rpb24tPnJlYWRvbmx5
KSwKPj4+Pj4gKyAgICAgICAgfTsKPj4+Pj4gKwo+Pj4+PiArICAgICAgICBpbnQgciA9IHZob3N0
X2lvdmFfdHJlZV9tYXBfYWxsb2Modi0+aW92YV90cmVlLCAmbWVtX3JlZ2lvbik7Cj4+Pj4+ICsg
ICAgICAgIGlmICh1bmxpa2VseShyICE9IElPVkFfT0spKSB7Cj4+Pj4+ICsgICAgICAgICAgICBl
cnJvcl9yZXBvcnQoIkNhbid0IGFsbG9jYXRlIGEgbWFwcGluZyAoJWQpIiwgcik7Cj4+Pj4+ICsg
ICAgICAgICAgICBnb3RvIGZhaWw7Cj4+Pj4+ICsgICAgICAgIH0KPj4+Pj4gKwo+Pj4+PiArICAg
ICAgICBpb3ZhID0gbWVtX3JlZ2lvbi5pb3ZhOwo+Pj4+PiArICAgIH0KPj4+Pj4KPj4+Pj4gICAg
ICAgICB2aG9zdF92ZHBhX2lvdGxiX2JhdGNoX2JlZ2luX29uY2Uodik7Cj4+Pj4+ICAgICAgICAg
cmV0ID0gdmhvc3RfdmRwYV9kbWFfbWFwKHYsIGlvdmEsIGludDEyOF9nZXQ2NChsbHNpemUpLAo+
Pj4+PiBAQCAtMjYxLDYgKzI3NiwyMCBAQCBzdGF0aWMgdm9pZCB2aG9zdF92ZHBhX2xpc3RlbmVy
X3JlZ2lvbl9kZWwoTWVtb3J5TGlzdGVuZXIgKmxpc3RlbmVyLAo+Pj4+Pgo+Pj4+PiAgICAgICAg
IGxsc2l6ZSA9IGludDEyOF9zdWIobGxlbmQsIGludDEyOF9tYWtlNjQoaW92YSkpOwo+Pj4+Pgo+
Pj4+PiArICAgIGlmICh2LT5zaGFkb3dfdnFzX2VuYWJsZWQpIHsKPj4+Pj4gKyAgICAgICAgY29u
c3QgRE1BTWFwICpyZXN1bHQ7Cj4+Pj4+ICsgICAgICAgIGNvbnN0IHZvaWQgKnZhZGRyID0gbWVt
b3J5X3JlZ2lvbl9nZXRfcmFtX3B0cihzZWN0aW9uLT5tcikgKwo+Pj4+PiArICAgICAgICAgICAg
c2VjdGlvbi0+b2Zmc2V0X3dpdGhpbl9yZWdpb24gKwo+Pj4+PiArICAgICAgICAgICAgKGlvdmEg
LSBzZWN0aW9uLT5vZmZzZXRfd2l0aGluX2FkZHJlc3Nfc3BhY2UpOwo+Pj4+PiArICAgICAgICBE
TUFNYXAgbWVtX3JlZ2lvbiA9IHsKPj4+Pj4gKyAgICAgICAgICAgIC50cmFuc2xhdGVkX2FkZHIg
PSAoaHdhZGRyKXZhZGRyLAo+Pj4+PiArICAgICAgICAgICAgLnNpemUgPSBpbnQxMjhfZ2V0NjQo
bGxzaXplKSAtIDEsCj4+Pj4+ICsgICAgICAgIH07Cj4+Pj4+ICsKPj4+Pj4gKyAgICAgICAgcmVz
dWx0ID0gdmhvc3RfaW92YV90cmVlX2ZpbmRfaW92YSh2LT5pb3ZhX3RyZWUsICZtZW1fcmVnaW9u
KTsKPj4+Pj4gKyAgICAgICAgaW92YSA9IHJlc3VsdC0+aW92YTsKPj4+Pj4gKyAgICAgICAgdmhv
c3RfaW92YV90cmVlX3JlbW92ZSh2LT5pb3ZhX3RyZWUsICZtZW1fcmVnaW9uKTsKPj4+Pj4gKyAg
ICB9Cj4+Pj4+ICAgICAgICAgdmhvc3RfdmRwYV9pb3RsYl9iYXRjaF9iZWdpbl9vbmNlKHYpOwo+
Pj4+PiAgICAgICAgIHJldCA9IHZob3N0X3ZkcGFfZG1hX3VubWFwKHYsIGlvdmEsIGludDEyOF9n
ZXQ2NChsbHNpemUpKTsKPj4+Pj4gICAgICAgICBpZiAocmV0KSB7Cj4+Pj4+IEBAIC0zODMsNyAr
NDEyLDcgQEAgc3RhdGljIGludCB2aG9zdF92ZHBhX2luaXRfc3ZxKHN0cnVjdCB2aG9zdF9kZXYg
KmhkZXYsIHN0cnVjdCB2aG9zdF92ZHBhICp2LAo+Pj4+Pgo+Pj4+PiAgICAgICAgIHNoYWRvd192
cXMgPSBnX3B0cl9hcnJheV9uZXdfZnVsbChoZGV2LT5udnFzLCB2aG9zdF9zdnFfZnJlZSk7Cj4+
Pj4+ICAgICAgICAgZm9yICh1bnNpZ25lZCBuID0gMDsgbiA8IGhkZXYtPm52cXM7ICsrbikgewo+
Pj4+PiAtICAgICAgICBnX2F1dG9wdHIoVmhvc3RTaGFkb3dWaXJ0cXVldWUpIHN2cSA9IHZob3N0
X3N2cV9uZXcoKTsKPj4+Pj4gKyAgICAgICAgZ19hdXRvcHRyKFZob3N0U2hhZG93VmlydHF1ZXVl
KSBzdnEgPSB2aG9zdF9zdnFfbmV3KHYtPmlvdmFfdHJlZSk7Cj4+Pj4+Cj4+Pj4+ICAgICAgICAg
ICAgIGlmICh1bmxpa2VseSghc3ZxKSkgewo+Pj4+PiAgICAgICAgICAgICAgICAgZXJyb3Jfc2V0
ZyhlcnJwLCAiQ2Fubm90IGNyZWF0ZSBzdnEgJXUiLCBuKTsKPj4+Pj4gQEAgLTgzNCwzNyArODYz
LDc4IEBAIHN0YXRpYyBpbnQgdmhvc3RfdmRwYV9zdnFfc2V0X2ZkcyhzdHJ1Y3Qgdmhvc3RfZGV2
ICpkZXYsCj4+Pj4+ICAgICAvKioKPj4+Pj4gICAgICAqIFVubWFwIGEgU1ZRIGFyZWEgaW4gdGhl
IGRldmljZQo+Pj4+PiAgICAgICovCj4+Pj4+IC1zdGF0aWMgYm9vbCB2aG9zdF92ZHBhX3N2cV91
bm1hcF9yaW5nKHN0cnVjdCB2aG9zdF92ZHBhICp2LCBod2FkZHIgaW92YSwKPj4+Pj4gLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHdhZGRyIHNpemUpCj4+Pj4+ICtzdGF0
aWMgYm9vbCB2aG9zdF92ZHBhX3N2cV91bm1hcF9yaW5nKHN0cnVjdCB2aG9zdF92ZHBhICp2LAo+
Pj4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBETUFNYXAg
Km5lZWRsZSkKPj4+Pj4gICAgIHsKPj4+Pj4gKyAgICBjb25zdCBETUFNYXAgKnJlc3VsdCA9IHZo
b3N0X2lvdmFfdHJlZV9maW5kX2lvdmEodi0+aW92YV90cmVlLCBuZWVkbGUpOwo+Pj4+PiArICAg
IGh3YWRkciBzaXplOwo+Pj4+PiAgICAgICAgIGludCByOwo+Pj4+Pgo+Pj4+PiAtICAgIHNpemUg
PSBST1VORF9VUChzaXplLCBxZW11X3JlYWxfaG9zdF9wYWdlX3NpemUpOwo+Pj4+PiAtICAgIHIg
PSB2aG9zdF92ZHBhX2RtYV91bm1hcCh2LCBpb3ZhLCBzaXplKTsKPj4+Pj4gKyAgICBpZiAodW5s
aWtlbHkoIXJlc3VsdCkpIHsKPj4+Pj4gKyAgICAgICAgZXJyb3JfcmVwb3J0KCJVbmFibGUgdG8g
ZmluZCBTVlEgYWRkcmVzcyB0byB1bm1hcCIpOwo+Pj4+PiArICAgICAgICByZXR1cm4gZmFsc2U7
Cj4+Pj4+ICsgICAgfQo+Pj4+PiArCj4+Pj4+ICsgICAgc2l6ZSA9IFJPVU5EX1VQKHJlc3VsdC0+
c2l6ZSwgcWVtdV9yZWFsX2hvc3RfcGFnZV9zaXplKTsKPj4+Pj4gKyAgICByID0gdmhvc3RfdmRw
YV9kbWFfdW5tYXAodiwgcmVzdWx0LT5pb3ZhLCBzaXplKTsKPj4+Pj4gICAgICAgICByZXR1cm4g
ciA9PSAwOwo+Pj4+PiAgICAgfQo+Pj4+Pgo+Pj4+PiAgICAgc3RhdGljIGJvb2wgdmhvc3RfdmRw
YV9zdnFfdW5tYXBfcmluZ3Moc3RydWN0IHZob3N0X2RldiAqZGV2LAo+Pj4+PiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgVmhvc3RTaGFkb3dWaXJ0cXVl
dWUgKnN2cSkKPj4+Pj4gICAgIHsKPj4+Pj4gKyAgICBETUFNYXAgbmVlZGxlOwo+Pj4+PiAgICAg
ICAgIHN0cnVjdCB2aG9zdF92ZHBhICp2ID0gZGV2LT5vcGFxdWU7Cj4+Pj4+ICAgICAgICAgc3Ry
dWN0IHZob3N0X3ZyaW5nX2FkZHIgc3ZxX2FkZHI7Cj4+Pj4+IC0gICAgc2l6ZV90IGRldmljZV9z
aXplID0gdmhvc3Rfc3ZxX2RldmljZV9hcmVhX3NpemUoc3ZxKTsKPj4+Pj4gLSAgICBzaXplX3Qg
ZHJpdmVyX3NpemUgPSB2aG9zdF9zdnFfZHJpdmVyX2FyZWFfc2l6ZShzdnEpOwo+Pj4+PiAgICAg
ICAgIGJvb2wgb2s7Cj4+Pj4+Cj4+Pj4+ICAgICAgICAgdmhvc3Rfc3ZxX2dldF92cmluZ19hZGRy
KHN2cSwgJnN2cV9hZGRyKTsKPj4+Pj4KPj4+Pj4gLSAgICBvayA9IHZob3N0X3ZkcGFfc3ZxX3Vu
bWFwX3Jpbmcodiwgc3ZxX2FkZHIuZGVzY191c2VyX2FkZHIsIGRyaXZlcl9zaXplKTsKPj4+Pj4g
KyAgICBuZWVkbGUgPSAoRE1BTWFwKSB7Cj4+Pj4+ICsgICAgICAgIC50cmFuc2xhdGVkX2FkZHIg
PSBzdnFfYWRkci5kZXNjX3VzZXJfYWRkciwKPj4+Pj4gKyAgICB9Owo+Pj4+IExldCdzIHNpbXBs
eSBpbml0aWFsaXplIHRoZSBtZW1iZXIgdG8gemVybyBkdXJpbmcgc3RhcnQgb2YgdGhpcyBmdW5j
dGlvbgo+Pj4+IHRoZW4gd2UgY2FuIHVzZSBuZWVkbGUtPnRyYW5zYWx0ZWRfYWRkciA9IFhYWCBo
ZXJlLgo+Pj4+Cj4+PiBTdXJlCj4+Pgo+Pj4+PiArICAgIG9rID0gdmhvc3RfdmRwYV9zdnFfdW5t
YXBfcmluZyh2LCAmbmVlZGxlKTsKPj4+Pj4gICAgICAgICBpZiAodW5saWtlbHkoIW9rKSkgewo+
Pj4+PiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7Cj4+Pj4+ICAgICAgICAgfQo+Pj4+Pgo+Pj4+
PiAtICAgIHJldHVybiB2aG9zdF92ZHBhX3N2cV91bm1hcF9yaW5nKHYsIHN2cV9hZGRyLnVzZWRf
dXNlcl9hZGRyLCBkZXZpY2Vfc2l6ZSk7Cj4+Pj4+ICsgICAgbmVlZGxlID0gKERNQU1hcCkgewo+
Pj4+PiArICAgICAgICAudHJhbnNsYXRlZF9hZGRyID0gc3ZxX2FkZHIudXNlZF91c2VyX2FkZHIs
Cj4+Pj4+ICsgICAgfTsKPj4+Pj4gKyAgICByZXR1cm4gdmhvc3RfdmRwYV9zdnFfdW5tYXBfcmlu
Zyh2LCAmbmVlZGxlKTsKPj4+Pj4gK30KPj4+Pj4gKwo+Pj4+PiArLyoqCj4+Pj4+ICsgKiBNYXAg
dGhlIFNWUSBhcmVhIGluIHRoZSBkZXZpY2UKPj4+Pj4gKyAqCj4+Pj4+ICsgKiBAdiAgICAgICAg
ICBWaG9zdC12ZHBhIGRldmljZQo+Pj4+PiArICogQG5lZWRsZSAgICAgVGhlIGFyZWEgdG8gc2Vh
cmNoIGlvdmEKPj4+Pj4gKyAqIEBlcnJvcnAgICAgIEVycm9yIHBvaW50ZXIKPj4+Pj4gKyAqLwo+
Pj4+PiArc3RhdGljIGJvb2wgdmhvc3RfdmRwYV9zdnFfbWFwX3Jpbmcoc3RydWN0IHZob3N0X3Zk
cGEgKnYsIERNQU1hcCAqbmVlZGxlLAo+Pj4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgRXJyb3IgKiplcnJwKQo+Pj4+PiArewo+Pj4+PiArICAgIGludCByOwo+Pj4+PiAr
Cj4+Pj4+ICsgICAgciA9IHZob3N0X2lvdmFfdHJlZV9tYXBfYWxsb2Modi0+aW92YV90cmVlLCBu
ZWVkbGUpOwo+Pj4+PiArICAgIGlmICh1bmxpa2VseShyICE9IElPVkFfT0spKSB7Cj4+Pj4+ICsg
ICAgICAgIGVycm9yX3NldGcoZXJycCwgIkNhbm5vdCBhbGxvY2F0ZSBpb3ZhICglZCkiLCByKTsK
Pj4+Pj4gKyAgICAgICAgcmV0dXJuIGZhbHNlOwo+Pj4+PiArICAgIH0KPj4+Pj4gKwo+Pj4+PiAr
ICAgIHIgPSB2aG9zdF92ZHBhX2RtYV9tYXAodiwgbmVlZGxlLT5pb3ZhLCBuZWVkbGUtPnNpemUs
Cj4+Pj4+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAodm9pZCAqKW5lZWRsZS0+dHJhbnNs
YXRlZF9hZGRyLAo+Pj4+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgIShuZWVkbGUtPnBl
cm0gJiBJT01NVV9BQ0NFU1NfRkxBRygwLCAxKSkpOwo+Pj4+IExldCdzIHNpbXBseSB1c2UgbmVl
ZGxlLT5wZXJtID09IElPTU1VX1JPIGhlcmU/Cj4+Pj4KPj4+IFRoZSBtb3RpdmF0aW9uIHRvIHVz
ZSB0aGlzIHdheSBpcyB0byBiZSBtb3JlIHJlc2lsaWVudCB0byB0aGUgZnV0dXJlLgo+Pj4gRm9y
IGV4YW1wbGUsIGlmIGEgbmV3IGZsYWcgaXMgYWRkZWQuCj4+Pgo+Pj4gQnV0IEknbSB0b3RhbGx5
IG9rIHdpdGggY29tcGFyaW5nIHdpdGggSU9NTVVfUk8sIEkgc2VlIHRoYXQgc2NlbmFyaW8KPj4+
IHVubGlrZWx5IGF0IHRoZSBtb21lbnQuCj4+Pgo+Pj4+PiArICAgIGlmICh1bmxpa2VseShyICE9
IDApKSB7Cj4+Pj4+ICsgICAgICAgIGVycm9yX3NldGdfZXJybm8oZXJycCwgLXIsICJDYW5ub3Qg
bWFwIHJlZ2lvbiB0byBkZXZpY2UiKTsKPj4+Pj4gKyAgICAgICAgdmhvc3RfaW92YV90cmVlX3Jl
bW92ZSh2LT5pb3ZhX3RyZWUsIG5lZWRsZSk7Cj4+Pj4+ICsgICAgfQo+Pj4+PiArCj4+Pj4+ICsg
ICAgcmV0dXJuIHIgPT0gMDsKPj4+Pj4gICAgIH0KPj4+Pj4KPj4+Pj4gICAgIC8qKgo+Pj4+PiAt
ICogTWFwIHNoYWRvdyB2aXJ0cXVldWUgcmluZ3MgaW4gZGV2aWNlCj4+Pj4+ICsgKiBNYXAgdGhl
IHNoYWRvdyB2aXJ0cXVldWUgcmluZ3MgaW4gdGhlIGRldmljZQo+Pj4+PiAgICAgICoKPj4+Pj4g
ICAgICAqIEBkZXYgICBUaGUgdmhvc3QgZGV2aWNlCj4+Pj4+ICAgICAgKiBAc3ZxICAgVGhlIHNo
YWRvdyB2aXJ0cXVldWUKPj4+Pj4gQEAgLTg3NiwyOCArOTQ2LDQ0IEBAIHN0YXRpYyBib29sIHZo
b3N0X3ZkcGFfc3ZxX21hcF9yaW5ncyhzdHJ1Y3Qgdmhvc3RfZGV2ICpkZXYsCj4+Pj4+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZob3N0X3ZyaW5nX2Fk
ZHIgKmFkZHIsCj4+Pj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
RXJyb3IgKiplcnJwKQo+Pj4+PiAgICAgewo+Pj4+PiArICAgIERNQU1hcCBkZXZpY2VfcmVnaW9u
LCBkcml2ZXJfcmVnaW9uOwo+Pj4+PiArICAgIHN0cnVjdCB2aG9zdF92cmluZ19hZGRyIHN2cV9h
ZGRyOwo+Pj4+PiAgICAgICAgIHN0cnVjdCB2aG9zdF92ZHBhICp2ID0gZGV2LT5vcGFxdWU7Cj4+
Pj4+ICAgICAgICAgc2l6ZV90IGRldmljZV9zaXplID0gdmhvc3Rfc3ZxX2RldmljZV9hcmVhX3Np
emUoc3ZxKTsKPj4+Pj4gICAgICAgICBzaXplX3QgZHJpdmVyX3NpemUgPSB2aG9zdF9zdnFfZHJp
dmVyX2FyZWFfc2l6ZShzdnEpOwo+Pj4+PiAtICAgIGludCByOwo+Pj4+PiArICAgIHNpemVfdCBh
dmFpbF9vZmZzZXQ7Cj4+Pj4+ICsgICAgYm9vbCBvazsKPj4+Pj4KPj4+Pj4gICAgICAgICBFUlJQ
X0dVQVJEKCk7Cj4+Pj4+IC0gICAgdmhvc3Rfc3ZxX2dldF92cmluZ19hZGRyKHN2cSwgYWRkcik7
Cj4+Pj4+ICsgICAgdmhvc3Rfc3ZxX2dldF92cmluZ19hZGRyKHN2cSwgJnN2cV9hZGRyKTsKPj4+
Pj4KPj4+Pj4gLSAgICByID0gdmhvc3RfdmRwYV9kbWFfbWFwKHYsIGFkZHItPmRlc2NfdXNlcl9h
ZGRyLCBkcml2ZXJfc2l6ZSwKPj4+Pj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICh2b2lk
ICopYWRkci0+ZGVzY191c2VyX2FkZHIsIHRydWUpOwo+Pj4+PiAtICAgIGlmICh1bmxpa2VseShy
ICE9IDApKSB7Cj4+Pj4+IC0gICAgICAgIGVycm9yX3NldGdfZXJybm8oZXJycCwgLXIsICJDYW5u
b3QgY3JlYXRlIHZxIGRyaXZlciByZWdpb246ICIpOwo+Pj4+PiArICAgIGRyaXZlcl9yZWdpb24g
PSAoRE1BTWFwKSB7Cj4+Pj4+ICsgICAgICAgIC50cmFuc2xhdGVkX2FkZHIgPSBzdnFfYWRkci5k
ZXNjX3VzZXJfYWRkciwKPj4+Pj4gKyAgICAgICAgLnNpemUgPSBkcml2ZXJfc2l6ZSAtIDEsCj4+
Pj4gQW55IHJlYXNvbiBmb3IgdGhlICItMSIgaGVyZT8gSSBzZWUgc2V2ZXJhbCBwbGFjZXMgZG8g
dGhpbmdzIGxpa2UgdGhhdCwKPj4+PiBpdCdzIHByb2JhYmx5IGhpbnQgb2Ygd3JvbmcgQVBJIHNv
bWVod2VyZS4KPj4+Pgo+Pj4gVGhlICJwcm9ibGVtIiBpcyB0aGUgYXBpIG1pc21hdGNoIGJldHdl
ZW4gX2VuZCBhbmQgX2xhc3QsIHRvIGluY2x1ZGUKPj4+IHRoZSBsYXN0IG1lbWJlciBpbiB0aGUg
c2l6ZSBvciBub3QuCj4+Pgo+Pj4gSU9WQSB0cmVlIG5lZWRzIHRvIHVzZSBfZW5kIHNvIHdlIGNh
biBhbGxvY2F0ZSB0aGUgbGFzdCBwYWdlIGluIGNhc2UKPj4+IG9mIGF2YWlsYWJsZSByYW5nZSBl
bmRpbmcgaW4gKHVpbnQ2NF90KS0xIFsxXS4gQnV0IElmIHdlIGNoYW5nZQo+Pj4gdmhvc3Rfc3Zx
X3tkZXZpY2UsZHJpdmVyfV9hcmVhX3NpemUgdG8gbWFrZSBpdCBpbmNsdXNpdmUsCj4+Cj4+IFRo
ZXNlIGZ1bmN0aW9ucyBsb29rcyBzYW5lIHNpbmNlIGl0IGRvZXNuJ3QgcmV0dXJuIGEgcmFuZ2Uu
IEl0J3MgdXAgdG8KPj4gdGhlIGNhbGxlciB0byBkZWNpZGUgaG93IHRvIHVzZSB0aGUgc2l6ZS4K
Pj4KPiBPayBJIHRoaW5rIEkgZGlkbid0IGdldCB5b3VyIGNvbW1lbnQgdGhlIGZpcnN0IHRpbWUs
IHNvIHRoZXJlIGlzIGEgYnVnCj4gaGVyZS4gQnV0IEknbSBub3Qgc3VyZSBpZiB3ZSBhcmUgb24g
dGhlIHNhbWUgcGFnZSByZWdhcmRpbmcgdGhlIGlvdmEKPiB0cmVlLgo+Cj4gUmVnYXJkaW5nIHRo
ZSBhbGlnbm1lbnQsIGl0J3MgdXAgdG8gdGhlIGNhbGxlciBob3cgdG8gdXNlIHRoZSBzaXplLgo+
IEJ1dCBpZiB5b3UgaW50cm9kdWNlIGEgbWFwcGluZyBvZiAoaW92YV8xLCB0cmFuc2xhdGVkX2Fk
ZHJfMSwgc2l6ZV8xKSwKPiB0aGUgaW92YSBhZGRyZXNzIGlvdmFfMStzaXplXzEgYmVsb25ncyB0
byB0aGF0IG1hcHBpbmcuCgoKVGhpcyBzZWVtcyBjb250cmFkaWN0IHRvIHRoZSBkZWZpbml0aW9u
IG9mIHNpemVfMT8gRS5nIGlmIHdlIGdldCBhIGlvdmEgCnJhbmdlIHN0YXJ0IGZyb20gMCBhbmQg
aXQncyBzaXplIGlzIDEsIDEgaXMgbm90IGluY2x1ZGVkIGluIHRoYXQgbWFwcGluZy4KCgo+IElm
IHlvdSB3YW50IHRvCj4gaW50cm9kdWNlIGEgbmV3IG1hcHBpbmcgKGlvdmFfMiA9IGlvdmFfMSAr
IHNpemVfMSwgdHJhbnNsYXRlZF9hZGRyXzIsCj4gc2l6ZV8yKSBpdCB3aWxsIGJlIHJlamVjdGVk
LCBzaW5jZSBpdCBvdmVybGFwcyB3aXRoIHRoZSBmaXJzdCBvbmUuCj4gVGhhdCBwYXJ0IGlzIG5v
dCB1cCB0byB0aGUgY2FsbGVyLgo+Cj4gQXQgdGhpcyBtb21lbnQsIHZob3N0X3N2cV9kcml2ZXJf
YXJlYV9zaXplIGFuZAo+IHZob3N0X3N2cV9kZXZpY2VfYXJlYV9zaXplIHJldHVybnMgaW4gdGhl
IHNhbWUgdGVybXMgYXMgc2l6ZW9mKHgpLiBJbgo+IG90aGVyIHdvcmRzLCBzaXplIGlzIG5vdCBp
bmNsdXNpdmUuIEFzIG1lbXNldCgpIG9yIFZIT1NUX0lPVExCX1VQREFURQo+IGV4cGVjdHMsIGZv
ciBleGFtcGxlLiBXZSBjb3VsZCBtb3ZlIHRoZSAtMSBpbnNpZGUgb2YgdGhlc2UgZnVuY3Rpb25z
LAo+IGFuZCB0aGVuIHdlIG5lZWQgdG8gYWRhcHQgcWVtdV9tZW1hbGlnbiBjYWxscyBvbiB2aG9z
dF9zdnFfc3RhcnQgb3IKPiB2aG9zdF92ZHBhIGRtYV9tYXAvdW5tYXAuCj4KPj4+ICAgIHdlIG5l
ZWQgdG8KPj4+IHVzZSAiKzEiIGluIGNhbGxzIGxpa2UgcWVtdV9tZW1hbGlnbiBhbmQgbWVtc2V0
IGF0IHZob3N0X3N2cV9zdGFydC4KPj4+IFByb2JhYmx5IGluIG1vcmUgcGxhY2VzIHRvbwo+Pgo+
PiBJJ20gbm90IHN1cmUgSSBnZXQgaGVyZS4gTWF5YmUgeW91IGNhbiBzaG93IHdoaWNoIGNvZGUg
bWF5IHN1ZmZlcnMgaWYgd2UKPj4gZG9uJ3QgZGVjcmVhc2UgaXQgYnkgb25lIGhlcmUuCj4+Cj4g
TGVzcyB0aGFuIEkgZXhwZWN0ZWQgSSBoYXZlIHRvIHNheToKPgo+IGRpZmYgLS1naXQgYS9ody92
aXJ0aW8vdmhvc3Qtc2hhZG93LXZpcnRxdWV1ZS5jCj4gYi9ody92aXJ0aW8vdmhvc3Qtc2hhZG93
LXZpcnRxdWV1ZS5jCj4gaW5kZXggNDk3MjM3ZGNiYi4uYjQyYmE1YTNjMCAxMDA2NDQKPiAtLS0g
YS9ody92aXJ0aW8vdmhvc3Qtc2hhZG93LXZpcnRxdWV1ZS5jCj4gKysrIGIvaHcvdmlydGlvL3Zo
b3N0LXNoYWRvdy12aXJ0cXVldWUuYwo+IEBAIC00NzksNyArNDc5LDcgQEAgc2l6ZV90IHZob3N0
X3N2cV9kZXZpY2VfYXJlYV9zaXplKGNvbnN0Cj4gVmhvc3RTaGFkb3dWaXJ0cXVldWUgKnN2cSkK
PiAgIHsKPiAgICAgICBzaXplX3QgdXNlZF9zaXplID0gb2Zmc2V0b2YodnJpbmdfdXNlZF90LCBy
aW5nKSArCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YodnJp
bmdfdXNlZF9lbGVtX3QpICogc3ZxLT52cmluZy5udW07Cj4gLSAgICByZXR1cm4gUk9VTkRfVVAo
dXNlZF9zaXplLCBxZW11X3JlYWxfaG9zdF9wYWdlX3NpemUpOwo+ICsgICAgcmV0dXJuIFJPVU5E
X1VQKHVzZWRfc2l6ZSwgcWVtdV9yZWFsX2hvc3RfcGFnZV9zaXplKSAtIDE7Cj4gICB9Cj4KPiAg
IC8qKgo+IEBAIC01MzIsOCArNTMyLDggQEAgdm9pZCB2aG9zdF9zdnFfc3RhcnQoVmhvc3RTaGFk
b3dWaXJ0cXVldWUgKnN2cSwKPiBWaXJ0SU9EZXZpY2UgKnZkZXYsCj4gICAgICAgc3ZxLT52cSA9
IHZxOwo+Cj4gICAgICAgc3ZxLT52cmluZy5udW0gPSB2aXJ0aW9fcXVldWVfZ2V0X251bSh2ZGV2
LCB2aXJ0aW9fZ2V0X3F1ZXVlX2luZGV4KHZxKSk7Cj4gLSAgICBkcml2ZXJfc2l6ZSA9IHZob3N0
X3N2cV9kcml2ZXJfYXJlYV9zaXplKHN2cSk7Cj4gLSAgICBkZXZpY2Vfc2l6ZSA9IHZob3N0X3N2
cV9kZXZpY2VfYXJlYV9zaXplKHN2cSk7Cj4gKyAgICBkcml2ZXJfc2l6ZSA9IHZob3N0X3N2cV9k
cml2ZXJfYXJlYV9zaXplKHN2cSkgKyAxOwo+ICsgICAgZGV2aWNlX3NpemUgPSB2aG9zdF9zdnFf
ZGV2aWNlX2FyZWFfc2l6ZShzdnEpICsgMTsKPiAgICAgICBzdnEtPnZyaW5nLmRlc2MgPSBxZW11
X21lbWFsaWduKHFlbXVfcmVhbF9ob3N0X3BhZ2Vfc2l6ZSwgZHJpdmVyX3NpemUpOwo+ICAgICAg
IGRlc2Nfc2l6ZSA9IHNpemVvZih2cmluZ19kZXNjX3QpICogc3ZxLT52cmluZy5udW07Cj4gICAg
ICAgc3ZxLT52cmluZy5hdmFpbCA9ICh2b2lkICopKChjaGFyICopc3ZxLT52cmluZy5kZXNjICsg
ZGVzY19zaXplKTsKPiBkaWZmIC0tZ2l0IGEvaHcvdmlydGlvL3Zob3N0LXZkcGEuYyBiL2h3L3Zp
cnRpby92aG9zdC12ZHBhLmMKPiBpbmRleCA1ZWVmYzU5MTFhLi4yYmY2NDhkZTRhIDEwMDY0NAo+
IC0tLSBhL2h3L3ZpcnRpby92aG9zdC12ZHBhLmMKPiArKysgYi9ody92aXJ0aW8vdmhvc3QtdmRw
YS5jCj4gQEAgLTk1NSw3ICs5NTUsNyBAQCBzdGF0aWMgYm9vbCB2aG9zdF92ZHBhX3N2cV9tYXBf
cmluZ3Moc3RydWN0IHZob3N0X2RldiAqZGV2LAo+Cj4gICAgICAgZHJpdmVyX3JlZ2lvbiA9IChE
TUFNYXApIHsKPiAgICAgICAgICAgLnRyYW5zbGF0ZWRfYWRkciA9IHN2cV9hZGRyLmRlc2NfdXNl
cl9hZGRyLAo+IC0gICAgICAgIC5zaXplID0gZHJpdmVyX3NpemUgLSAxLAo+ICsgICAgICAgIC5z
aXplID0gZHJpdmVyX3NpemUsCj4gICAgICAgICAgIC5wZXJtID0gSU9NTVVfUk8sCj4gICAgICAg
fTsKPiAgICAgICBvayA9IHZob3N0X3ZkcGFfc3ZxX21hcF9yaW5nKHYsICZkcml2ZXJfcmVnaW9u
LCBlcnJwKTsKPiBAQCAtOTY5LDcgKzk2OSw3IEBAIHN0YXRpYyBib29sIHZob3N0X3ZkcGFfc3Zx
X21hcF9yaW5ncyhzdHJ1Y3Qgdmhvc3RfZGV2ICpkZXYsCj4KPiAgICAgICBkZXZpY2VfcmVnaW9u
ID0gKERNQU1hcCkgewo+ICAgICAgICAgICAudHJhbnNsYXRlZF9hZGRyID0gc3ZxX2FkZHIudXNl
ZF91c2VyX2FkZHIsCj4gLSAgICAgICAgLnNpemUgPSBkZXZpY2Vfc2l6ZSAtIDEsCj4gKyAgICAg
ICAgLnNpemUgPSBkZXZpY2Vfc2l6ZSwKPiAgICAgICAgICAgLnBlcm0gPSBJT01NVV9SVywKPiAg
ICAgICB9Owo+ICAgICAgIG9rID0gdmhvc3RfdmRwYV9zdnFfbWFwX3JpbmcodiwgJmRldmljZV9y
ZWdpb24sIGVycnApOwo+IGRpZmYgLS1naXQgYS9ody92aXJ0aW8vdmhvc3Qtc2hhZG93LXZpcnRx
dWV1ZS5jCj4gYi9ody92aXJ0aW8vdmhvc3Qtc2hhZG93LXZpcnRxdWV1ZS5jCj4gaW5kZXggNDk3
MjM3ZGNiYi4uYjQyYmE1YTNjMCAxMDA2NDQKPiAtLS0gYS9ody92aXJ0aW8vdmhvc3Qtc2hhZG93
LXZpcnRxdWV1ZS5jCj4gKysrIGIvaHcvdmlydGlvL3Zob3N0LXNoYWRvdy12aXJ0cXVldWUuYwo+
IEBAIC00NzksNyArNDc5LDcgQEAgc2l6ZV90IHZob3N0X3N2cV9kZXZpY2VfYXJlYV9zaXplKGNv
bnN0Cj4gVmhvc3RTaGFkb3dWaXJ0cXVldWUgKnN2cSkKPiAgIHsKPiAgICAgICBzaXplX3QgdXNl
ZF9zaXplID0gb2Zmc2V0b2YodnJpbmdfdXNlZF90LCByaW5nKSArCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YodnJpbmdfdXNlZF9lbGVtX3QpICogc3ZxLT52
cmluZy5udW07Cj4gLSAgICByZXR1cm4gUk9VTkRfVVAodXNlZF9zaXplLCBxZW11X3JlYWxfaG9z
dF9wYWdlX3NpemUpOwo+ICsgICAgcmV0dXJuIFJPVU5EX1VQKHVzZWRfc2l6ZSwgcWVtdV9yZWFs
X2hvc3RfcGFnZV9zaXplKSAtIDE7Cj4gICB9Cj4KPiAgIC8qKgo+IEBAIC01MzIsOCArNTMyLDgg
QEAgdm9pZCB2aG9zdF9zdnFfc3RhcnQoVmhvc3RTaGFkb3dWaXJ0cXVldWUgKnN2cSwKPiBWaXJ0
SU9EZXZpY2UgKnZkZXYsCj4gICAgICAgc3ZxLT52cSA9IHZxOwo+Cj4gICAgICAgc3ZxLT52cmlu
Zy5udW0gPSB2aXJ0aW9fcXVldWVfZ2V0X251bSh2ZGV2LCB2aXJ0aW9fZ2V0X3F1ZXVlX2luZGV4
KHZxKSk7Cj4gLSAgICBkcml2ZXJfc2l6ZSA9IHZob3N0X3N2cV9kcml2ZXJfYXJlYV9zaXplKHN2
cSk7Cj4gLSAgICBkZXZpY2Vfc2l6ZSA9IHZob3N0X3N2cV9kZXZpY2VfYXJlYV9zaXplKHN2cSk7
Cj4gKyAgICBkcml2ZXJfc2l6ZSA9IHZob3N0X3N2cV9kcml2ZXJfYXJlYV9zaXplKHN2cSkgKyAx
Owo+ICsgICAgZGV2aWNlX3NpemUgPSB2aG9zdF9zdnFfZGV2aWNlX2FyZWFfc2l6ZShzdnEpICsg
MTsKPiAgICAgICBzdnEtPnZyaW5nLmRlc2MgPSBxZW11X21lbWFsaWduKHFlbXVfcmVhbF9ob3N0
X3BhZ2Vfc2l6ZSwgZHJpdmVyX3NpemUpOwo+ICAgICAgIGRlc2Nfc2l6ZSA9IHNpemVvZih2cmlu
Z19kZXNjX3QpICogc3ZxLT52cmluZy5udW07Cj4gICAgICAgc3ZxLT52cmluZy5hdmFpbCA9ICh2
b2lkICopKChjaGFyICopc3ZxLT52cmluZy5kZXNjICsgZGVzY19zaXplKTsKPiBkaWZmIC0tZ2l0
IGEvaHcvdmlydGlvL3Zob3N0LXZkcGEuYyBiL2h3L3ZpcnRpby92aG9zdC12ZHBhLmMKPiBpbmRl
eCA1ZWVmYzU5MTFhLi4yYmY2NDhkZTRhIDEwMDY0NAo+IC0tLSBhL2h3L3ZpcnRpby92aG9zdC12
ZHBhLmMKPiArKysgYi9ody92aXJ0aW8vdmhvc3QtdmRwYS5jCj4gQEAgLTkxOCw3ICs5MTgsNyBA
QCBzdGF0aWMgYm9vbCB2aG9zdF92ZHBhX3N2cV9tYXBfcmluZyhzdHJ1Y3QKPiB2aG9zdF92ZHBh
ICp2LCBETUFNYXAgKm5lZWRsZSwKPiAgICAgICAgICAgcmV0dXJuIGZhbHNlOwo+ICAgICAgIH0K
Pgo+IC0gICAgciA9IHZob3N0X3ZkcGFfZG1hX21hcCh2LCBuZWVkbGUtPmlvdmEsIG5lZWRsZS0+
c2l6ZSwKPiArICAgIHIgPSB2aG9zdF92ZHBhX2RtYV9tYXAodiwgbmVlZGxlLT5pb3ZhLCBuZWVk
bGUtPnNpemUgKyAxLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZvaWQgKiluZWVk
bGUtPnRyYW5zbGF0ZWRfYWRkciwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRs
ZS0+cGVybSA9PSBJT01NVV9STyk7Cj4gICAgICAgaWYgKHVubGlrZWx5KHIgIT0gMCkpIHsKPiBA
QCAtOTU1LDcgKzk1NSw3IEBAIHN0YXRpYyBib29sIHZob3N0X3ZkcGFfc3ZxX21hcF9yaW5ncyhz
dHJ1Y3Qgdmhvc3RfZGV2ICpkZXYsCj4KPiAgICAgICBkcml2ZXJfcmVnaW9uID0gKERNQU1hcCkg
ewo+ICAgICAgICAgICAudHJhbnNsYXRlZF9hZGRyID0gc3ZxX2FkZHIuZGVzY191c2VyX2FkZHIs
Cj4gLSAgICAgICAgLnNpemUgPSBkcml2ZXJfc2l6ZSAtIDEsCj4gKyAgICAgICAgLnNpemUgPSBk
cml2ZXJfc2l6ZSwKPiAgICAgICAgICAgLnBlcm0gPSBJT01NVV9STywKPiAgICAgICB9Owo+ICAg
ICAgIG9rID0gdmhvc3RfdmRwYV9zdnFfbWFwX3JpbmcodiwgJmRyaXZlcl9yZWdpb24sIGVycnAp
Owo+IEBAIC05NjksNyArOTY5LDcgQEAgc3RhdGljIGJvb2wgdmhvc3RfdmRwYV9zdnFfbWFwX3Jp
bmdzKHN0cnVjdCB2aG9zdF9kZXYgKmRldiwKPgo+ICAgICAgIGRldmljZV9yZWdpb24gPSAoRE1B
TWFwKSB7Cj4gICAgICAgICAgIC50cmFuc2xhdGVkX2FkZHIgPSBzdnFfYWRkci51c2VkX3VzZXJf
YWRkciwKPiAtICAgICAgICAuc2l6ZSA9IGRldmljZV9zaXplIC0gMSwKPiArICAgICAgICAuc2l6
ZSA9IGRldmljZV9zaXplLAo+ICAgICAgICAgICAucGVybSA9IElPTU1VX1JXLAo+ICAgICAgIH07
Cj4gICAgICAgb2sgPSB2aG9zdF92ZHBhX3N2cV9tYXBfcmluZyh2LCAmZGV2aWNlX3JlZ2lvbiwg
ZXJycCk7Cj4gLS0tCgoKU29ycnksIEkgc3RpbGwgZG9uJ3QgZ2V0IHdoeSAtMS8rMSBpcyByZXF1
aXJlZC4gTWF5YmUgeW91IGNhbiBzaG93IG1lIAp3aGF0IGhhcHBlbnMgaWYgd2UgZG9uJ3QgZG8g
dGhlc2UuCgpUaGFua3MKCgo+Cj4+IEJ1dCBjdXJyZW50IGNvZGUgbWF5IGVuZHVwIHRvIHBhc3Np
bmcgcWVtdV9yZWFsX2hvc3RfcGFnZV9zaXplIC0gMSB0bwo+PiB2aG9zdC1WRFBBIHdoaWNoIHNl
ZW1zIHdyb25nPwo+Pgo+PiBFLmcgdmhvc3Rfc3ZxX2RldmljZV9hcmVhX3NpemUoKSByZXR1cm4g
cWVtdV9yZWFsX2hvc3RfcGFnZV9zaXplLCBidXQgaXQKPj4gd2FzIGRlY3JlYXNlZCBieSAxIGhl
cmUgZm9yIHNpemUsIHRoZW4gd2UgcGFzcyBzaXplIHRvIHZob3N0X3ZkcGFfZG1hX21hcCgpLgo+
Pgo+IFRoYXQgcGFydCBuZWVkcyBmaXhpbmcsIGJ1dCB0aGUgcmlnaHQgc29sdXRpb24gaXMgbm90
IHRvIHNraXAgdGhlIC0xCj4gYnV0IGluY3JlbWVudCB0byBwYXNzIHRvIHRoZSB2aG9zdF92ZHBh
X2RtYV9tYXAuIERvaW5nIG90aGVyd2lzZSB3b3VsZAo+IGJyaW5nIHByb2JsZW1zIHdpdGggaG93
IGlvdmEtdHJlZSB3b3Jrcy4gSXQgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUKPiBuZXh0IHNlcmll
cy4KPgo+IFRoYW5rcyEKPgo+PiBUaGFua3MKPj4KPj4KPj4+IFFFTVUncyBlbXVsYXRlZCBJbnRl
bCBpb21tdSBjb2RlIHNvbHZlcyBpdCB1c2luZyB0aGUgYWRkcmVzcyBtYXNrIGFzCj4+PiB0aGUg
c2l6ZSwgc29tZXRoaW5nIHRoYXQgZG9lcyBub3QgZml0IDEwMCUgd2l0aCB2aG9zdCBkZXZpY2Vz
IHNpbmNlCj4+PiB0aGV5IGNhbiBhbGxvY2F0ZSBhbiBhcmJpdHJhcnkgYWRkcmVzcyBvZiBhcmJp
dHJhcnkgc2l6ZSB3aGVuIHVzaW5nCj4+PiB2SU9NTVUuIEl0J3Mgbm90IGEgcHJvYmxlbSBmb3Ig
dmhvc3QtdmRwYSBhdCB0aGlzIG1vbWVudCBzaW5jZSB3ZSBtYWtlCj4+PiBzdXJlIHdlIGV4cG9z
ZSB1bmFsaWduZWQgYW5kIHdob2xlIHBhZ2VzIHdpdGggdnJpbmdzLCBidXQgSSBmZWVsIGl0Cj4+
PiB3b3VsZCBvbmx5IGJlIHRvIG1vdmUgdGhlIHByb2JsZW0gc29tZXdoZXJlIGVsc2UuCj4+Pgo+
Pj4gVGhhbmtzIQo+Pj4KPj4+IFsxXSBUaGVyZSBhcmUgYWx0ZXJuYXRpdmVzOiB0byB1c2UgSW50
MTI4X3QsIGV0Yy4gQnV0IEkgdGhpbmsgaXQncwo+Pj4gYmV0dGVyIG5vdCB0byBjaGFuZ2UgdGhh
dCBpbiB0aGlzIHBhdGNoIHNlcmllcy4KPj4+Cj4+Pj4gVGhhbmtzCj4+Pj4KPj4+Pgo+Pj4+PiAr
ICAgICAgICAucGVybSA9IElPTU1VX1JPLAo+Pj4+PiArICAgIH07Cj4+Pj4+ICsgICAgb2sgPSB2
aG9zdF92ZHBhX3N2cV9tYXBfcmluZyh2LCAmZHJpdmVyX3JlZ2lvbiwgZXJycCk7Cj4+Pj4+ICsg
ICAgaWYgKHVubGlrZWx5KCFvaykpIHsKPj4+Pj4gKyAgICAgICAgZXJyb3JfcHJlcGVuZChlcnJw
LCAiQ2Fubm90IGNyZWF0ZSB2cSBkcml2ZXIgcmVnaW9uOiAiKTsKPj4+Pj4gICAgICAgICAgICAg
cmV0dXJuIGZhbHNlOwo+Pj4+PiAgICAgICAgIH0KPj4+Pj4gKyAgICBhZGRyLT5kZXNjX3VzZXJf
YWRkciA9IGRyaXZlcl9yZWdpb24uaW92YTsKPj4+Pj4gKyAgICBhdmFpbF9vZmZzZXQgPSBzdnFf
YWRkci5hdmFpbF91c2VyX2FkZHIgLSBzdnFfYWRkci5kZXNjX3VzZXJfYWRkcjsKPj4+Pj4gKyAg
ICBhZGRyLT5hdmFpbF91c2VyX2FkZHIgPSBkcml2ZXJfcmVnaW9uLmlvdmEgKyBhdmFpbF9vZmZz
ZXQ7Cj4+Pj4+Cj4+Pj4+IC0gICAgciA9IHZob3N0X3ZkcGFfZG1hX21hcCh2LCBhZGRyLT51c2Vk
X3VzZXJfYWRkciwgZGV2aWNlX3NpemUsCj4+Pj4+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAodm9pZCAqKWFkZHItPnVzZWRfdXNlcl9hZGRyLCBmYWxzZSk7Cj4+Pj4+IC0gICAgaWYgKHVu
bGlrZWx5KHIgIT0gMCkpIHsKPj4+Pj4gLSAgICAgICAgZXJyb3Jfc2V0Z19lcnJubyhlcnJwLCAt
ciwgIkNhbm5vdCBjcmVhdGUgdnEgZGV2aWNlIHJlZ2lvbjogIik7Cj4+Pj4+ICsgICAgZGV2aWNl
X3JlZ2lvbiA9IChETUFNYXApIHsKPj4+Pj4gKyAgICAgICAgLnRyYW5zbGF0ZWRfYWRkciA9IHN2
cV9hZGRyLnVzZWRfdXNlcl9hZGRyLAo+Pj4+PiArICAgICAgICAuc2l6ZSA9IGRldmljZV9zaXpl
IC0gMSwKPj4+Pj4gKyAgICAgICAgLnBlcm0gPSBJT01NVV9SVywKPj4+Pj4gKyAgICB9Owo+Pj4+
PiArICAgIG9rID0gdmhvc3RfdmRwYV9zdnFfbWFwX3JpbmcodiwgJmRldmljZV9yZWdpb24sIGVy
cnApOwo+Pj4+PiArICAgIGlmICh1bmxpa2VseSghb2spKSB7Cj4+Pj4+ICsgICAgICAgIGVycm9y
X3ByZXBlbmQoZXJycCwgIkNhbm5vdCBjcmVhdGUgdnEgZGV2aWNlIHJlZ2lvbjogIik7Cj4+Pj4+
ICsgICAgICAgIHZob3N0X3ZkcGFfc3ZxX3VubWFwX3JpbmcodiwgJmRyaXZlcl9yZWdpb24pOwo+
Pj4+PiAgICAgICAgIH0KPj4+Pj4gKyAgICBhZGRyLT51c2VkX3VzZXJfYWRkciA9IGRldmljZV9y
ZWdpb24uaW92YTsKPj4+Pj4KPj4+Pj4gLSAgICByZXR1cm4gciA9PSAwOwo+Pj4+PiArICAgIHJl
dHVybiBvazsKPj4+Pj4gICAgIH0KPj4+Pj4KPj4+Pj4gICAgIHN0YXRpYyBib29sIHZob3N0X3Zk
cGFfc3ZxX3NldHVwKHN0cnVjdCB2aG9zdF9kZXYgKmRldiwKCl9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApW
aXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxp
bnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
