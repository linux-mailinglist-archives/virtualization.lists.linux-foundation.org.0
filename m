Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp1.osuosl.org (smtp1.osuosl.org [IPv6:2605:bc80:3010::138])
	by mail.lfdr.de (Postfix) with ESMTPS id 6F4A0707CA7
	for <lists.virtualization@lfdr.de>; Thu, 18 May 2023 11:19:00 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp1.osuosl.org (Postfix) with ESMTP id DF29E81E59;
	Thu, 18 May 2023 09:18:58 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org DF29E81E59
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
	by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id nZ9mWLUTMCgz; Thu, 18 May 2023 09:18:57 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp1.osuosl.org (Postfix) with ESMTPS id 5640881EF0;
	Thu, 18 May 2023 09:18:57 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org 5640881EF0
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 9843DC007A;
	Thu, 18 May 2023 09:18:56 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp2.osuosl.org (smtp2.osuosl.org [IPv6:2605:bc80:3010::133])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 3B657C002A
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 09:18:54 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp2.osuosl.org (Postfix) with ESMTP id 238F240530
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 09:18:54 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 238F240530
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
 by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 5nPdOWGY7fp5
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 09:18:53 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 7319140363
Received: from out30-132.freemail.mail.aliyun.com
 (out30-132.freemail.mail.aliyun.com [115.124.30.132])
 by smtp2.osuosl.org (Postfix) with ESMTPS id 7319140363
 for <virtualization@lists.linux-foundation.org>;
 Thu, 18 May 2023 09:18:52 +0000 (UTC)
X-Alimail-AntiSpam: AC=PASS; BC=-1|-1; BR=01201311R671e4; CH=green; DM=||false|;
 DS=||; FP=0|-1|-1|-1|0|-1|-1|-1; HT=ay29a033018046056;
 MF=xuanzhuo@linux.alibaba.com; NM=1; PH=DS; RN=4; SR=0;
 TI=SMTPD_---0ViwDzRz_1684401527; 
Received: from localhost(mailfrom:xuanzhuo@linux.alibaba.com
 fp:SMTPD_---0ViwDzRz_1684401527) by smtp.aliyun-inc.com;
 Thu, 18 May 2023 17:18:47 +0800
Message-ID: <1684401507.2259183-3-xuanzhuo@linux.alibaba.com>
Subject: Re: [PATCH vhost v9 05/12] virtio_ring: split: virtqueue_add_split()
 support premapped
Date: Thu, 18 May 2023 17:18:27 +0800
From: Xuan Zhuo <xuanzhuo@linux.alibaba.com>
To: Jason Wang <jasowang@redhat.com>
References: <20230517022249.20790-1-xuanzhuo@linux.alibaba.com>
 <20230517022249.20790-6-xuanzhuo@linux.alibaba.com>
 <CACGkMEu7+kDPiWmULXW_saW6pb5yF=gnqXRkSWcYbZCiJmszHQ@mail.gmail.com>
 <20230518030701-mutt-send-email-mst@kernel.org>
 <1684395232.2129312-1-xuanzhuo@linux.alibaba.com>
 <CACGkMEsgVnwgBiUnT3UfqKji3aNFEqhCXq6zpovjgKa5joAGtQ@mail.gmail.com>
 <1684396589.894549-2-xuanzhuo@linux.alibaba.com>
 <CACGkMEsX0DG=zOvVkhkxy_ivEyK2T8Ouhh+QUmdwVOUVpc_ivA@mail.gmail.com>
In-Reply-To: <CACGkMEsX0DG=zOvVkhkxy_ivEyK2T8Ouhh+QUmdwVOUVpc_ivA@mail.gmail.com>
Cc: Christoph Hellwig <hch@infradead.org>,
 virtualization@lists.linux-foundation.org,
 "Michael S. Tsirkin" <mst@redhat.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gVGh1LCAxOCBNYXkgMjAyMyAxNjo1NzoxMiArMDgwMCwgSmFzb24gV2FuZyA8amFzb3dhbmdA
cmVkaGF0LmNvbT4gd3JvdGU6Cj4gT24gVGh1LCBNYXkgMTgsIDIwMjMgYXQgMzo1N+KAr1BNIFh1
YW4gWmh1byA8eHVhbnpodW9AbGludXguYWxpYmFiYS5jb20+IHdyb3RlOgo+ID4KPiA+IE9uIFRo
dSwgMTggTWF5IDIwMjMgMTU6NTQ6MDkgKzA4MDAsIEphc29uIFdhbmcgPGphc293YW5nQHJlZGhh
dC5jb20+IHdyb3RlOgo+ID4gPiBPbiBUaHUsIE1heSAxOCwgMjAyMyBhdCAzOjQx4oCvUE0gWHVh
biBaaHVvIDx4dWFuemh1b0BsaW51eC5hbGliYWJhLmNvbT4gd3JvdGU6Cj4gPiA+ID4KPiA+ID4g
PiBPbiBUaHUsIDE4IE1heSAyMDIzIDAzOjExOjI1IC0wNDAwLCAiTWljaGFlbCBTLiBUc2lya2lu
IiA8bXN0QHJlZGhhdC5jb20+IHdyb3RlOgo+ID4gPiA+ID4gT24gVGh1LCBNYXkgMTgsIDIwMjMg
YXQgMDI6NTE6NTdQTSArMDgwMCwgSmFzb24gV2FuZyB3cm90ZToKPiA+ID4gPiA+ID4gT24gV2Vk
LCBNYXkgMTcsIDIwMjMgYXQgMTA6MjPigK9BTSBYdWFuIFpodW8gPHh1YW56aHVvQGxpbnV4LmFs
aWJhYmEuY29tPiB3cm90ZToKPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+IHZpcnRxdWV1ZV9h
ZGRfc3BsaXQoKSBvbmx5IHN1cHBvcnRzIHZpcnR1YWwgYWRkcmVzc2VzLCBkbWEgaXMgY29tcGxl
dGVkCj4gPiA+ID4gPiA+ID4gaW4gdmlydHF1ZXVlX2FkZF9zcGxpdCgpLgo+ID4gPiA+ID4gPiA+
Cj4gPiA+ID4gPiA+ID4gSW4gc29tZSBzY2VuYXJpb3MgKHN1Y2ggYXMgdGhlIEFGX1hEUCBzY2Vu
YXJpbyksIHRoZSBtZW1vcnkgaXMgYWxsb2NhdGVkCj4gPiA+ID4gPiA+ID4gYW5kIERNQSBpcyBj
b21wbGV0ZWQgaW4gYWR2YW5jZSwgc28gaXQgaXMgbmVjZXNzYXJ5IGZvciB1cyB0byBzdXBwb3J0
Cj4gPiA+ID4gPiA+ID4gcGFzc2luZyB0aGUgRE1BIGFkZHJlc3MgdG8gdmlydHF1ZXVlX2FkZF9z
cGxpdCgpLgo+ID4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ID4gUmVjb3JkIHRoaXMgaW5mb3JtYXRp
b24gaW4gZGVzY19zdGF0ZSwgd2UgY2FuIHNraXAgdW5tYXAgYmFzZWQgb24gdGhpcwo+ID4gPiA+
ID4gPiA+IHdoZW4gZXhlY3V0aW5nIGRtYSB1bm1hcC4KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4g
SSB3b3VsZCBhbHNvIHN1Z2dlc3QgZG9jdW1lbnRpbmcgd2h5IGEgcGVyIGRlc2NyaXB0b3IgbWV0
YWRhdGEgaXMKPiA+ID4gPiA+ID4gbmVlZGVkIGluc3RlYWQgb2YgYSBwZXIgdmlydHF1ZXVlIG9u
ZS4KPiA+ID4gPiA+Cj4gPiA+ID4gPiBJIHRoaW5rIHdlIGNvdWxkIG1ha2UgaXQgcGVyIHZpcnRx
dWV1ZS4gVGhhdCB3b3VsZCBtZWFuIGFsbCBjb2RlIGluCj4gPiA+ID4gPiB2aXJ0aW8gbmV0IHdv
dWxkIGhhdmUgdG8gY2hhbmdlIHRvIGRvIGRtYSBtYXBwaW5nIGl0c2VsZiBpbnN0ZWFkIG9mCj4g
PiA+ID4gPiByZWx5aW5nIG9uIHZpcnRpbyBjb3JlIHRob3VnaC4gIFdoaWNoIGlzIG1heWJlIGEg
Z29vZCBpZGVhPyBEZWZpbml0ZWx5IGEKPiA+ID4gPiA+IHZlcnkgaW50cnVzaXZlIGNoYW5nZSB0
aG91Z2gsIHdpbGwgbmVlZCBhIGxvdCBvZiBwZXJmb3JtYW5jZSB0ZXN0aW5nCj4gPiA+ID4gPiB0
byBtYWtlIHN1cmUgd2UgZG9uJ3QgYnJlYWsgYW55dGhpbmcuCj4gPiA+ID4KPiA+ID4gPiBJbiBm
YWN0LCB3ZSBoYXZlIHRyaWVkIHRoaXMgaWRlYS4KPiA+ID4gPgo+ID4gPiA+IFRoZSBwcm9ibGVt
IGlzIHRoZSBkZXRhY2ggYW5kIHVubWFwLgo+ID4gPiA+Cj4gPiA+ID4gV2UgbmVlZCB0byBnZXQg
YWxsIERNQSBBZGRyZXNzZXMgZnJvbSB2aXJ0aW8tcmluZyB0byB1bm1hcC4gQ3VycmVudGx5LCBp
dCBkb2VzCj4gPiA+ID4gbm90IHN1cHBvcnQgdG8gcmV0dXJuIHRoZSBETUEgQWRkcmVzcywKPiA+
ID4KPiA+ID4gSSdtIG5vdCBzdXJlIEkgZ290IGhlcmUsIGJ1dCB3ZSd2ZSBhbHJlYWR5IHN0b3Jl
ZCB0aGUgRE1BIGFkZHJlc3MgaW4gZGVzY19leHRyYT8KPiA+Cj4gPgo+ID4gSSBtZWFuIHdlIG5l
ZWQgdG8gZ2V0IHRoZSBkbWEgYWRkcmVzcyBmcm9tIHRoZSB2aXJ0aW8tY29yZSB0byB2aXJ0aW8t
bmV0Lgo+ID4KPgo+IEl0IHByb2JhYmx5IGp1c3QgcmVxdWlyZXMgYSBuZXcgaGVscGVyLgoKWWVz
CgpUaGFua3MKCgo+Cj4gVGhhbmtzCj4KPiA+IFRoYW5rcy4KPiA+Cj4gPgo+ID4gPgo+ID4gPiA+
IGFuZCBmb3IgU0tCLCB3ZSBuZWVkIHRvIGdldCBtdWx0aXBsZSBETUEKPiA+ID4gPiBBZGRyZXNz
ZXMgYXQgb25lIHRpbWUuCj4gPiA+Cj4gPiA+IENvdWxkIHlvdSBlbGFib3JhdGUgb24gdGhpcz8K
PiA+ID4KPiA+ID4gVGhhbmtzCj4gPiA+Cj4gPiA+ID4KPiA+ID4gPiBUaGlzIG5lZWQgdG8gbW9k
aWZ5IHRoZSBsb2dpYyBvZiBWaXJ0aW8tUmluZyBkZXRhY2guIEJlc2lkZXMgdGhpcywgSSBhbHNv
IGFncmVlCj4gPiA+ID4gd2l0aCB0aGlzIGlkZWEuCj4gPiA+ID4KPiA+ID4gPiBUaGFua3MuCj4g
PiA+ID4KPiA+ID4gPgo+ID4gPiA+ID4KPiA+ID4gPiA+Cj4gPiA+ID4gPgo+ID4gPiA+ID4KPiA+
ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+IFNpZ25lZC1vZmYtYnk6IFh1YW4gWmh1byA8eHVhbnpo
dW9AbGludXguYWxpYmFiYS5jb20+Cj4gPiA+ID4gPiA+ID4gLS0tCj4gPiA+ID4gPiA+ID4gIGRy
aXZlcnMvdmlydGlvL3ZpcnRpb19yaW5nLmMgfCAzOCArKysrKysrKysrKysrKysrKysrKysrKysr
KystLS0tLS0tLS0KPiA+ID4gPiA+ID4gPiAgMSBmaWxlIGNoYW5nZWQsIDI5IGluc2VydGlvbnMo
KyksIDkgZGVsZXRpb25zKC0pCj4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy92aXJ0aW8vdmlydGlvX3JpbmcuYyBiL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19y
aW5nLmMKPiA+ID4gPiA+ID4gPiBpbmRleCBlMmZjNTBjMDViZWMuLmJkNWU4NGFmYWIzNyAxMDA2
NDQKPiA+ID4gPiA+ID4gPiAtLS0gYS9kcml2ZXJzL3ZpcnRpby92aXJ0aW9fcmluZy5jCj4gPiA+
ID4gPiA+ID4gKysrIGIvZHJpdmVycy92aXJ0aW8vdmlydGlvX3JpbmcuYwo+ID4gPiA+ID4gPiA+
IEBAIC03MCw2ICs3MCw3IEBACj4gPiA+ID4gPiA+ID4gIHN0cnVjdCB2cmluZ19kZXNjX3N0YXRl
X3NwbGl0IHsKPiA+ID4gPiA+ID4gPiAgICAgICAgIHZvaWQgKmRhdGE7ICAgICAgICAgICAgICAg
ICAgICAgLyogRGF0YSBmb3IgY2FsbGJhY2suICovCj4gPiA+ID4gPiA+ID4gICAgICAgICBzdHJ1
Y3QgdnJpbmdfZGVzYyAqaW5kaXJfZGVzYzsgIC8qIEluZGlyZWN0IGRlc2NyaXB0b3IsIGlmIGFu
eS4gKi8KPiA+ID4gPiA+ID4gPiArICAgICAgIGJvb2wgcHJlbWFwcGVkOyAgICAgICAgICAgICAg
ICAgLyogRE1BIG1hcHBpbmcgaXMgZG9uZSBieSBkcml2ZXIuICovCj4gPiA+ID4gPiA+Cj4gPiA+
ID4gPiA+IEdvaW5nIGJhY2sgdG8gdGhlIG9yaWdpbmFsIGRpc2N1c3Npb24gYXJvdW5kIHdoZXJl
IHRoaXMgc2hvdWxkIGJlCj4gPiA+ID4gPiA+IHBsYWNlZC4gSSB3b25kZXIgaWYgd2UgY2FuIGZp
bmQgYSBjb21tb24gcGxhY2UgdG8gc3RvcmUgdGhpcyBzaW5jZSBpdAo+ID4gPiA+ID4gPiBoYXMg
bm90aGluZyByZWxhdGVkIHRvIHZpcnRxdWV1ZSBsYXlvdXQuIE1heWJlIGRlc2NfZXh0cmE/IEFu
ZCBpdAo+ID4gPiA+ID4gPiB3b3VsZCBiZSBldmVuIGJldHRlciBpZiB3ZSBjYW4gYXZvaWQgc3Ry
ZXNzaW5nIHRoZSBjYWNoZSBsaWtlIGFib3ZlLgo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+ICB9
Owo+ID4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ID4gIHN0cnVjdCB2cmluZ19kZXNjX3N0YXRlX3Bh
Y2tlZCB7Cj4gPiA+ID4gPiA+ID4gQEAgLTM1Niw4ICszNTcsMTQgQEAgc3RhdGljIHN0cnVjdCBk
ZXZpY2UgKnZyaW5nX2RtYV9kZXYoY29uc3Qgc3RydWN0IHZyaW5nX3ZpcnRxdWV1ZSAqdnEpCj4g
PiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiAgLyogTWFwIG9uZSBzZyBlbnRyeS4gKi8KPiA+ID4g
PiA+ID4gPiAgc3RhdGljIGludCB2cmluZ19tYXBfb25lX3NnKGNvbnN0IHN0cnVjdCB2cmluZ192
aXJ0cXVldWUgKnZxLCBzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNnLAo+ID4gPiA+ID4gPiA+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXJlY3Rpb24s
IHN0YXRpYyBkbWFfYWRkcl90ICphZGRyKQo+ID4gPiA+ID4gPiA+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICBlbnVtIGRtYV9kYXRhX2RpcmVjdGlvbiBkaXJlY3Rpb24sCj4gPiA+ID4gPiA+
ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgcHJlbWFwcGVkLCBkbWFfYWRkcl90
ICphZGRyKQo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiBoYXZpbmcgdGhpbmdzIGxpa2U6Cj4gPiA+
ID4gPiA+Cj4gPiA+ID4gPiA+IGludCBmdW5jKGJvb2wgZG8pCj4gPiA+ID4gPiA+IHsKPiA+ID4g
PiA+ID4gaWYgKCFkbykKPiA+ID4gPiA+ID4gICAgIHJldHVybjsKPiA+ID4gPiA+ID4gfQo+ID4g
PiA+ID4gPgo+ID4gPiA+ID4gPiBpcyBhIGhpbnQgdGhhdCB0aGUgY2hlY2sgbmVlZHMgdG8gYmUg
ZG9uZSBieSB0aGUgY2FsbGVyPwo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiBBbmQgdGhpcyBjaGFu
Z2Ugc2hvdWxkIHdvcmsgZm9yIGJvdGggcGFja2VkIGFuZCBzcGxpdC4gSSB0aGluayB3ZSBuZWVk
Cj4gPiA+ID4gPiA+IHRvIHNxdWFzaCB0aGUgcGFja2VkIGNoYW5nZXMgaGVyZS4KPiA+ID4gPiA+
ID4KPiA+ID4gPiA+ID4gTG9va2luZyBhdCBob3cgcGFja2VkIHZpcnRxdWV1ZSB1c2VzIHRoaXMg
aW4gdGhpcyBwYXRjaCwgSSBkb24ndCB0aGluawo+ID4gPiA+ID4gPiB0aGlzIHBhdGNoIGNhbiBl
dmVuIGJlIGJ1aWx0LiBJIHdpbGwgd2FpdCBmb3IgYSBuZXcgdmVyc2lvbiBhbmQKPiA+ID4gPiA+
ID4gY29udGludWUgdGhlIHJldmlldyBmcm9tIHRoZXJlLgo+ID4gPiA+ID4gPgo+ID4gPiA+ID4g
PiBUaGFua3MKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4g
PiAgewo+ID4gPiA+ID4gPiA+ICsgICAgICAgaWYgKHByZW1hcHBlZCkgewo+ID4gPiA+ID4gPiA+
ICsgICAgICAgICAgICAgICAqYWRkciA9IHNnX2RtYV9hZGRyZXNzKHNnKTsKPiA+ID4gPiA+ID4g
PiArICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gPiA+ID4gPiA+ID4gKyAgICAgICB9Cj4gPiA+
ID4gPiA+ID4gKwo+ID4gPiA+ID4gPiA+ICAgICAgICAgaWYgKCF2cS0+dXNlX2RtYV9hcGkpIHsK
PiA+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgLyoKPiA+ID4gPiA+ID4gPiAgICAgICAgICAg
ICAgICAgICogSWYgRE1BIGlzIG5vdCB1c2VkLCBLTVNBTiBkb2Vzbid0IGtub3cgdGhhdCB0aGUg
c2NhdHRlcmxpc3QKPiA+ID4gPiA+ID4gPiBAQCAtNDQ1LDcgKzQ1Miw3IEBAIHN0YXRpYyB2b2lk
IHZyaW5nX3VubWFwX29uZV9zcGxpdF9pbmRpcmVjdChjb25zdCBzdHJ1Y3QgdnJpbmdfdmlydHF1
ZXVlICp2cSwKPiA+ID4gPiA+ID4gPiAgfQo+ID4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ID4gIHN0
YXRpYyB1bnNpZ25lZCBpbnQgdnJpbmdfdW5tYXBfb25lX3NwbGl0KGNvbnN0IHN0cnVjdCB2cmlu
Z192aXJ0cXVldWUgKnZxLAo+ID4gPiA+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBpKQo+ID4gPiA+ID4gPiA+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBpLCBib29sIHByZW1h
cHBlZCkKPiA+ID4gPiA+ID4gPiAgewo+ID4gPiA+ID4gPiA+ICAgICAgICAgc3RydWN0IHZyaW5n
X2Rlc2NfZXh0cmEgKmV4dHJhID0gdnEtPnNwbGl0LmRlc2NfZXh0cmE7Cj4gPiA+ID4gPiA+ID4g
ICAgICAgICB1MTYgZmxhZ3M7Cj4gPiA+ID4gPiA+ID4gQEAgLTQ2Miw2ICs0NjksOSBAQCBzdGF0
aWMgdW5zaWduZWQgaW50IHZyaW5nX3VubWFwX29uZV9zcGxpdChjb25zdCBzdHJ1Y3QgdnJpbmdf
dmlydHF1ZXVlICp2cSwKPiA+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAoZmxhZ3MgJiBWUklOR19ERVNDX0ZfV1JJVEUpID8KPiA+ID4gPiA+ID4gPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBETUFfRlJPTV9ERVZJQ0UgOiBETUFfVE9fREVWSUNF
KTsKPiA+ID4gPiA+ID4gPiAgICAgICAgIH0gZWxzZSB7Cj4gPiA+ID4gPiA+ID4gKyAgICAgICAg
ICAgICAgIGlmIChwcmVtYXBwZWQpCj4gPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAg
ICAgZ290byBvdXQ7Cj4gPiA+ID4gPiA+ID4gKwo+ID4gPiA+ID4gPiA+ICAgICAgICAgICAgICAg
ICBkbWFfdW5tYXBfcGFnZSh2cmluZ19kbWFfZGV2KHZxKSwKPiA+ID4gPiA+ID4gPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFbaV0uYWRkciwKPiA+ID4gPiA+ID4gPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFbaV0ubGVuLAo+ID4gPiA+ID4gPiA+IEBA
IC01MzIsNiArNTQyLDcgQEAgc3RhdGljIGlubGluZSBpbnQgdmlydHF1ZXVlX2FkZF9zcGxpdChz
dHJ1Y3QgdmlydHF1ZXVlICpfdnEsCj4gPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgaW5fc2dzLAo+ID4gPiA+ID4gPiA+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAqZGF0YSwKPiA+ID4gPiA+ID4g
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKmN0eCwKPiA+ID4g
PiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgcHJlbWFw
cGVkLAo+ID4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
Z2ZwX3QgZ2ZwKQo+ID4gPiA+ID4gPiA+ICB7Cj4gPiA+ID4gPiA+ID4gICAgICAgICBzdHJ1Y3Qg
dnJpbmdfdmlydHF1ZXVlICp2cSA9IHRvX3Z2cShfdnEpOwo+ID4gPiA+ID4gPiA+IEBAIC01OTUs
NyArNjA2LDcgQEAgc3RhdGljIGlubGluZSBpbnQgdmlydHF1ZXVlX2FkZF9zcGxpdChzdHJ1Y3Qg
dmlydHF1ZXVlICpfdnEsCj4gPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIGZvciAoc2cgPSBz
Z3Nbbl07IHNnOyBzZyA9IHNnX25leHQoc2cpKSB7Cj4gPiA+ID4gPiA+ID4gICAgICAgICAgICAg
ICAgICAgICAgICAgZG1hX2FkZHJfdCBhZGRyOwo+ID4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ID4g
LSAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZyaW5nX21hcF9vbmVfc2codnEsIHNnLCBETUFf
VE9fREVWSUNFLCAmYWRkcikpCj4gPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
aWYgKHZyaW5nX21hcF9vbmVfc2codnEsIHNnLCBETUFfVE9fREVWSUNFLCBwcmVtYXBwZWQsICZh
ZGRyKSkKPiA+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8g
dW5tYXBfcmVsZWFzZTsKPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+ICAgICAgICAgICAgICAg
ICAgICAgICAgIHByZXYgPSBpOwo+ID4gPiA+ID4gPiA+IEBAIC02MTEsNyArNjIyLDcgQEAgc3Rh
dGljIGlubGluZSBpbnQgdmlydHF1ZXVlX2FkZF9zcGxpdChzdHJ1Y3QgdmlydHF1ZXVlICpfdnEs
Cj4gPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIGZvciAoc2cgPSBzZ3Nbbl07IHNnOyBzZyA9
IHNnX25leHQoc2cpKSB7Cj4gPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgZG1h
X2FkZHJfdCBhZGRyOwo+ID4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ID4gLSAgICAgICAgICAgICAg
ICAgICAgICAgaWYgKHZyaW5nX21hcF9vbmVfc2codnEsIHNnLCBETUFfRlJPTV9ERVZJQ0UsICZh
ZGRyKSkKPiA+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAodnJpbmdfbWFw
X29uZV9zZyh2cSwgc2csIERNQV9GUk9NX0RFVklDRSwgcHJlbWFwcGVkLCAmYWRkcikpCj4gPiA+
ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHVubWFwX3JlbGVh
c2U7Cj4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICBw
cmV2ID0gaTsKPiA+ID4gPiA+ID4gPiBAQCAtNjU3LDYgKzY2OCw3IEBAIHN0YXRpYyBpbmxpbmUg
aW50IHZpcnRxdWV1ZV9hZGRfc3BsaXQoc3RydWN0IHZpcnRxdWV1ZSAqX3ZxLAo+ID4gPiA+ID4g
PiA+Cj4gPiA+ID4gPiA+ID4gICAgICAgICAvKiBTdG9yZSB0b2tlbiBhbmQgaW5kaXJlY3QgYnVm
ZmVyIHN0YXRlLiAqLwo+ID4gPiA+ID4gPiA+ICAgICAgICAgdnEtPnNwbGl0LmRlc2Nfc3RhdGVb
aGVhZF0uZGF0YSA9IGRhdGE7Cj4gPiA+ID4gPiA+ID4gKyAgICAgICB2cS0+c3BsaXQuZGVzY19z
dGF0ZVtoZWFkXS5wcmVtYXBwZWQgPSBwcmVtYXBwZWQ7Cj4gPiA+ID4gPiA+ID4gICAgICAgICBp
ZiAoaW5kaXJlY3QpCj4gPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIHZxLT5zcGxpdC5kZXNj
X3N0YXRlW2hlYWRdLmluZGlyX2Rlc2MgPSBkZXNjOwo+ID4gPiA+ID4gPiA+ICAgICAgICAgZWxz
ZQo+ID4gPiA+ID4gPiA+IEBAIC02ODYsNiArNjk4LDE0IEBAIHN0YXRpYyBpbmxpbmUgaW50IHZp
cnRxdWV1ZV9hZGRfc3BsaXQoc3RydWN0IHZpcnRxdWV1ZSAqX3ZxLAo+ID4gPiA+ID4gPiA+ICAg
ICAgICAgcmV0dXJuIDA7Cj4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiAgdW5tYXBfcmVsZWFz
ZToKPiA+ID4gPiA+ID4gPiArICAgICAgIGlmIChwcmVtYXBwZWQpIHsKPiA+ID4gPiA+ID4gPiAr
ICAgICAgICAgICAgICAgaWYgKGluZGlyZWN0KQo+ID4gPiA+ID4gPiA+ICsgICAgICAgICAgICAg
ICAgICAgICAgIGtmcmVlKGRlc2MpOwo+ID4gPiA+ID4gPiA+ICsKPiA+ID4gPiA+ID4gPiArICAg
ICAgICAgICAgICAgRU5EX1VTRSh2cSk7Cj4gPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgIHJl
dHVybiAtRU5PTUVNOwo+ID4gPiA+ID4gPiA+ICsgICAgICAgfQo+ID4gPiA+ID4gPiA+ICsKPiA+
ID4gPiA+ID4gPiAgICAgICAgIGVycl9pZHggPSBpOwo+ID4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+
ID4gICAgICAgICBpZiAoaW5kaXJlY3QpCj4gPiA+ID4gPiA+ID4gQEAgLTcwMCw3ICs3MjAsNyBA
QCBzdGF0aWMgaW5saW5lIGludCB2aXJ0cXVldWVfYWRkX3NwbGl0KHN0cnVjdCB2aXJ0cXVldWUg
Kl92cSwKPiA+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICB2cmluZ191bm1hcF9v
bmVfc3BsaXRfaW5kaXJlY3QodnEsICZkZXNjW2ldKTsKPiA+ID4gPiA+ID4gPiAgICAgICAgICAg
ICAgICAgICAgICAgICBpID0gdmlydGlvMTZfdG9fY3B1KF92cS0+dmRldiwgZGVzY1tpXS5uZXh0
KTsKPiA+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgfSBlbHNlCj4gPiA+ID4gPiA+ID4gLSAg
ICAgICAgICAgICAgICAgICAgICAgaSA9IHZyaW5nX3VubWFwX29uZV9zcGxpdCh2cSwgaSk7Cj4g
PiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgaSA9IHZyaW5nX3VubWFwX29uZV9z
cGxpdCh2cSwgaSwgZmFsc2UpOwo+ID4gPiA+ID4gPiA+ICAgICAgICAgfQo+ID4gPiA+ID4gPiA+
Cj4gPiA+ID4gPiA+ID4gICAgICAgICBpZiAoaW5kaXJlY3QpCj4gPiA+ID4gPiA+ID4gQEAgLTc1
NywxMiArNzc3LDEyIEBAIHN0YXRpYyB2b2lkIGRldGFjaF9idWZfc3BsaXQoc3RydWN0IHZyaW5n
X3ZpcnRxdWV1ZSAqdnEsIHVuc2lnbmVkIGludCBoZWFkLAo+ID4gPiA+ID4gPiA+ICAgICAgICAg
aSA9IGhlYWQ7Cj4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiAgICAgICAgIHdoaWxlICh2cS0+
c3BsaXQudnJpbmcuZGVzY1tpXS5mbGFncyAmIG5leHRmbGFnKSB7Cj4gPiA+ID4gPiA+ID4gLSAg
ICAgICAgICAgICAgIHZyaW5nX3VubWFwX29uZV9zcGxpdCh2cSwgaSk7Cj4gPiA+ID4gPiA+ID4g
KyAgICAgICAgICAgICAgIHZyaW5nX3VubWFwX29uZV9zcGxpdCh2cSwgaSwgc3RhdGUtPnByZW1h
cHBlZCk7Cj4gPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIGkgPSB2cS0+c3BsaXQuZGVzY19l
eHRyYVtpXS5uZXh0Owo+ID4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICB2cS0+dnEubnVtX2Zy
ZWUrKzsKPiA+ID4gPiA+ID4gPiAgICAgICAgIH0KPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+
IC0gICAgICAgdnJpbmdfdW5tYXBfb25lX3NwbGl0KHZxLCBpKTsKPiA+ID4gPiA+ID4gPiArICAg
ICAgIHZyaW5nX3VubWFwX29uZV9zcGxpdCh2cSwgaSwgc3RhdGUtPnByZW1hcHBlZCk7Cj4gPiA+
ID4gPiA+ID4gICAgICAgICB2cS0+c3BsaXQuZGVzY19leHRyYVtpXS5uZXh0ID0gdnEtPmZyZWVf
aGVhZDsKPiA+ID4gPiA+ID4gPiAgICAgICAgIHZxLT5mcmVlX2hlYWQgPSBoZWFkOwo+ID4gPiA+
ID4gPiA+Cj4gPiA+ID4gPiA+ID4gQEAgLTc4Myw3ICs4MDMsNyBAQCBzdGF0aWMgdm9pZCBkZXRh
Y2hfYnVmX3NwbGl0KHN0cnVjdCB2cmluZ192aXJ0cXVldWUgKnZxLCB1bnNpZ25lZCBpbnQgaGVh
ZCwKPiA+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZSSU5HX0RF
U0NfRl9JTkRJUkVDVCkpOwo+ID4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICBCVUdfT04obGVu
ID09IDAgfHwgbGVuICUgc2l6ZW9mKHN0cnVjdCB2cmluZ19kZXNjKSk7Cj4gPiA+ID4gPiA+ID4K
PiA+ID4gPiA+ID4gPiAtICAgICAgICAgICAgICAgaWYgKHZxLT51c2VfZG1hX2FwaSkgewo+ID4g
PiA+ID4gPiA+ICsgICAgICAgICAgICAgICBpZiAodnEtPnVzZV9kbWFfYXBpICYmICFzdGF0ZS0+
cHJlbWFwcGVkKSB7Cj4gPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChq
ID0gMDsgaiA8IGxlbiAvIHNpemVvZihzdHJ1Y3QgdnJpbmdfZGVzYyk7IGorKykKPiA+ID4gPiA+
ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZyaW5nX3VubWFwX29uZV9zcGxp
dF9pbmRpcmVjdCh2cSwgJmluZGlyX2Rlc2Nbal0pOwo+ID4gPiA+ID4gPiA+ICAgICAgICAgICAg
ICAgICB9Cj4gPiA+ID4gPiA+ID4gQEAgLTIxNDMsNyArMjE2Myw3IEBAIHN0YXRpYyBpbmxpbmUg
aW50IHZpcnRxdWV1ZV9hZGQoc3RydWN0IHZpcnRxdWV1ZSAqX3ZxLAo+ID4gPiA+ID4gPiA+ICAg
ICAgICAgcmV0dXJuIHZxLT5wYWNrZWRfcmluZyA/IHZpcnRxdWV1ZV9hZGRfcGFja2VkKF92cSwg
c2dzLCB0b3RhbF9zZywKPiA+ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgb3V0X3NncywgaW5fc2dzLCBkYXRhLCBjdHgsIGdmcCkgOgo+ID4gPiA+ID4g
PiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpcnRxdWV1ZV9hZGRfc3BsaXQo
X3ZxLCBzZ3MsIHRvdGFsX3NnLAo+ID4gPiA+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBvdXRfc2dzLCBpbl9zZ3MsIGRhdGEsIGN0eCwgZ2ZwKTsKPiA+ID4g
PiA+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0X3Nncywg
aW5fc2dzLCBkYXRhLCBjdHgsIHByZW1hcHBlZCwgZ2ZwKTsKPiA+ID4gPiA+ID4gPiAgfQo+ID4g
PiA+ID4gPiA+Cj4gPiA+ID4gPiA+ID4gIC8qKgo+ID4gPiA+ID4gPiA+IC0tCj4gPiA+ID4gPiA+
ID4gMi4zMi4wLjMuZzAxMTk1Y2Y5Zgo+ID4gPiA+ID4gPiA+Cj4gPiA+ID4gPgo+ID4gPiA+Cj4g
PiA+Cj4gPgo+Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
ClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1m
b3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9s
aXN0aW5mby92aXJ0dWFsaXphdGlvbg==
