Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
	by mail.lfdr.de (Postfix) with ESMTPS id 1B762702326
	for <lists.virtualization@lfdr.de>; Mon, 15 May 2023 07:05:59 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp4.osuosl.org (Postfix) with ESMTP id A808B41EE3;
	Mon, 15 May 2023 05:05:57 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org A808B41EE3
Authentication-Results: smtp4.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=MwpUMThR
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
	by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Zf9Vu4uPmpva; Mon, 15 May 2023 05:05:55 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp4.osuosl.org (Postfix) with ESMTPS id ACF1941F08;
	Mon, 15 May 2023 05:05:54 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org ACF1941F08
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id EB7F9C0089;
	Mon, 15 May 2023 05:05:53 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
 by lists.linuxfoundation.org (Postfix) with ESMTP id E041DC002A
 for <virtualization@lists.linux-foundation.org>;
 Mon, 15 May 2023 05:05:51 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp3.osuosl.org (Postfix) with ESMTP id AC8BB60AE9
 for <virtualization@lists.linux-foundation.org>;
 Mon, 15 May 2023 05:05:51 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org AC8BB60AE9
Authentication-Results: smtp3.osuosl.org;
 dkim=pass (1024-bit key) header.d=redhat.com header.i=@redhat.com
 header.a=rsa-sha256 header.s=mimecast20190719 header.b=MwpUMThR
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
 by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 9XxyYhuNQA_r
 for <virtualization@lists.linux-foundation.org>;
 Mon, 15 May 2023 05:05:50 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org CBA7A614DE
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.129.124])
 by smtp3.osuosl.org (Postfix) with ESMTPS id CBA7A614DE
 for <virtualization@lists.linux-foundation.org>;
 Mon, 15 May 2023 05:05:49 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1684127148;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=lDiXudi8M1vl1vdK+6CJbBUSUoTidw+tV4pvRMXZNNk=;
 b=MwpUMThRwH063jxdJEEudho0llZHL5y0tsLhTcrVL/P5HykMEs7vskvsaN4KsBMVPEoPDl
 rTREVuJ2AQnDHEWeUhDU2JK37OvLyGKlmFfTyKN/Kles7sI1EtWzUcBYPc/L4JRbLVNJuS
 jNNhtyCtyzuBDyT8+flZV6q5zYMmrSs=
Received: from mail-lf1-f70.google.com (mail-lf1-f70.google.com
 [209.85.167.70]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-221-LANxlT5fMQKYsGy1BFlhVA-1; Mon, 15 May 2023 01:05:47 -0400
X-MC-Unique: LANxlT5fMQKYsGy1BFlhVA-1
Received: by mail-lf1-f70.google.com with SMTP id
 2adb3069b0e04-4ef455ba61cso6941391e87.0
 for <virtualization@lists.linux-foundation.org>;
 Sun, 14 May 2023 22:05:47 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20221208; t=1684127144; x=1686719144;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=lDiXudi8M1vl1vdK+6CJbBUSUoTidw+tV4pvRMXZNNk=;
 b=iTLhHr0Na3X0VaZ8QN6wg+PT5JwLRm9/7zdc4N3Lj2VpjUDQLmKZ5R4yFxLoErI/+2
 7t1eFLynxovLx0oe18D+GBWDrrSYSaf9HlDxRrLsixAMELCyTqZB8ool2Pn7HXMyomPT
 ZP6W6Y4P6qS+/NtaN60vmwx+ckmYcDJ+FFdzDAb0+tPBaIvzj03Acdyc8lPvw7JZgzSm
 d+oPfZLMg/7R6xJ5Ofv/Zat23yrUNK9mtyhM/lg8pUv8pZ98/hxtJl0FRu11ka0g/NzO
 uqe7GKekTrm6smBJ3KqjCKm3GZPKIjGGfCexfXEYfADmvzDxtz8FUJDn5ScQ3FAuU6sm
 a/6w==
X-Gm-Message-State: AC+VfDzZdy4dPyMHG9bxv6k0MaIC1jAYhGBfWM8vq008ao0MxJ9fE9Ts
 d6WxOIiIXweHn0it2cJqNS83bKkhJi3rFWr7kKWhUf+rGOjvDBmYKRCVcHkn7YtkUufIpOoVGL8
 wTL4ug9NBFUNtIcydHuEBjsCFz7VWMWne9Q8H9ZKC71cl5AbfHWETKQvA7A==
X-Received: by 2002:a05:6512:390c:b0:4db:2ab7:43e6 with SMTP id
 a12-20020a056512390c00b004db2ab743e6mr6566399lfu.44.1684127144227; 
 Sun, 14 May 2023 22:05:44 -0700 (PDT)
X-Google-Smtp-Source: ACHHUZ435JROXkWy2eZPWYPNtPK6m0sYcb5EyUaP4NeVXdTLw2H/tBo20Blaek3WomxjaM3FzBhbxXUpnowlxdN1pco=
X-Received: by 2002:a05:6512:390c:b0:4db:2ab7:43e6 with SMTP id
 a12-20020a056512390c00b004db2ab743e6mr6566388lfu.44.1684127143792; Sun, 14
 May 2023 22:05:43 -0700 (PDT)
MIME-Version: 1.0
References: <20230503181240.14009-1-shannon.nelson@amd.com>
 <20230503181240.14009-10-shannon.nelson@amd.com>
In-Reply-To: <20230503181240.14009-10-shannon.nelson@amd.com>
From: Jason Wang <jasowang@redhat.com>
Date: Mon, 15 May 2023 13:05:32 +0800
Message-ID: <CACGkMEsbm6VZANE9LfvVVmyye5b2PqBvFFfsvxkkELkg=qoWbg@mail.gmail.com>
Subject: Re: [PATCH v5 virtio 09/11] pds_vdpa: add support for vdpa and
 vdpamgmt interfaces
To: Shannon Nelson <shannon.nelson@amd.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: brett.creeley@amd.com, mst@redhat.com, simon.horman@corigine.com,
 virtualization@lists.linux-foundation.org, netdev@vger.kernel.org,
 drivers@pensando.io
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gVGh1LCBNYXkgNCwgMjAyMyBhdCAyOjEz4oCvQU0gU2hhbm5vbiBOZWxzb24gPHNoYW5ub24u
bmVsc29uQGFtZC5jb20+IHdyb3RlOgo+Cj4gVGhpcyBpcyB0aGUgdkRQQSBkZXZpY2Ugc3VwcG9y
dCwgd2hlcmUgd2UgYWR2ZXJ0aXNlIHRoYXQgd2UgY2FuCj4gc3VwcG9ydCB0aGUgdmlydGlvIHF1
ZXVlcyBhbmQgZGVhbCB3aXRoIHRoZSBjb25maWd1cmF0aW9uIHdvcmsKPiB0aHJvdWdoIHRoZSBw
ZHNfY29yZSdzIGFkbWlucS4KPgo+IFNpZ25lZC1vZmYtYnk6IFNoYW5ub24gTmVsc29uIDxzaGFu
bm9uLm5lbHNvbkBhbWQuY29tPgoKQWNrZWQtYnk6IEphc29uIFdhbmcgPGphc293YW5nQHJlZGhh
dC5jb20+CgpUaGFua3MKCj4gLS0tCj4gIGRyaXZlcnMvdmRwYS9wZHMvYXV4X2Rydi5jICB8ICAx
NSArCj4gIGRyaXZlcnMvdmRwYS9wZHMvYXV4X2Rydi5oICB8ICAgMSArCj4gIGRyaXZlcnMvdmRw
YS9wZHMvZGVidWdmcy5jICB8IDI2MSArKysrKysrKysrKysrKysrKysKPiAgZHJpdmVycy92ZHBh
L3Bkcy9kZWJ1Z2ZzLmggIHwgICA1ICsKPiAgZHJpdmVycy92ZHBhL3Bkcy92ZHBhX2Rldi5jIHwg
NTMyICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLQo+ICA1IGZpbGVzIGNoYW5n
ZWQsIDgxMyBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy92ZHBhL3Bkcy9hdXhfZHJ2LmMgYi9kcml2ZXJzL3ZkcGEvcGRzL2F1eF9kcnYuYwo+IGlu
ZGV4IDBjNGExMzViMTQ4NC4uMTg2ZTllZTIyZWIxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvdmRw
YS9wZHMvYXV4X2Rydi5jCj4gKysrIGIvZHJpdmVycy92ZHBhL3Bkcy9hdXhfZHJ2LmMKPiBAQCAt
NjMsOCArNjMsMjEgQEAgc3RhdGljIGludCBwZHNfdmRwYV9wcm9iZShzdHJ1Y3QgYXV4aWxpYXJ5
X2RldmljZSAqYXV4X2RldiwKPiAgICAgICAgICAgICAgICAgZ290byBlcnJfZnJlZV9tZ210X2lu
Zm87Cj4gICAgICAgICB9Cj4KPiArICAgICAgIC8qIExldCB2ZHBhIGtub3cgdGhhdCB3ZSBjYW4g
cHJvdmlkZSBkZXZpY2VzICovCj4gKyAgICAgICBlcnIgPSB2ZHBhX21nbXRkZXZfcmVnaXN0ZXIo
JnZkcGFfYXV4LT52ZHBhX21kZXYpOwo+ICsgICAgICAgaWYgKGVycikgewo+ICsgICAgICAgICAg
ICAgICBkZXZfZXJyKGRldiwgIiVzOiBGYWlsZWQgdG8gaW5pdGlhbGl6ZSB2ZHBhX21nbXQgaW50
ZXJmYWNlOiAlcGVcbiIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgX19mdW5jX18sIEVSUl9Q
VFIoZXJyKSk7Cj4gKyAgICAgICAgICAgICAgIGdvdG8gZXJyX2ZyZWVfdmlydGlvOwo+ICsgICAg
ICAgfQo+ICsKPiArICAgICAgIHBkc192ZHBhX2RlYnVnZnNfYWRkX3BjaWRldih2ZHBhX2F1eCk7
Cj4gKyAgICAgICBwZHNfdmRwYV9kZWJ1Z2ZzX2FkZF9pZGVudCh2ZHBhX2F1eCk7Cj4gKwo+ICAg
ICAgICAgcmV0dXJuIDA7Cj4KPiArZXJyX2ZyZWVfdmlydGlvOgo+ICsgICAgICAgdnBfbW9kZXJu
X3JlbW92ZSgmdmRwYV9hdXgtPnZkX21kZXYpOwo+ICBlcnJfZnJlZV9tZ210X2luZm86Cj4gICAg
ICAgICBwY2lfZnJlZV9pcnFfdmVjdG9ycyhwYWRldi0+dmZfcGRldik7Cj4gIGVycl9mcmVlX21l
bToKPiBAQCAtNzksOSArOTIsMTEgQEAgc3RhdGljIHZvaWQgcGRzX3ZkcGFfcmVtb3ZlKHN0cnVj
dCBhdXhpbGlhcnlfZGV2aWNlICphdXhfZGV2KQo+ICAgICAgICAgc3RydWN0IHBkc192ZHBhX2F1
eCAqdmRwYV9hdXggPSBhdXhpbGlhcnlfZ2V0X2RydmRhdGEoYXV4X2Rldik7Cj4gICAgICAgICBz
dHJ1Y3QgZGV2aWNlICpkZXYgPSAmYXV4X2Rldi0+ZGV2Owo+Cj4gKyAgICAgICB2ZHBhX21nbXRk
ZXZfdW5yZWdpc3RlcigmdmRwYV9hdXgtPnZkcGFfbWRldik7Cj4gICAgICAgICB2cF9tb2Rlcm5f
cmVtb3ZlKCZ2ZHBhX2F1eC0+dmRfbWRldik7Cj4gICAgICAgICBwY2lfZnJlZV9pcnFfdmVjdG9y
cyh2ZHBhX2F1eC0+cGFkZXYtPnZmX3BkZXYpOwo+Cj4gKyAgICAgICBwZHNfdmRwYV9kZWJ1Z2Zz
X2RlbF92ZHBhZGV2KHZkcGFfYXV4KTsKPiAgICAgICAgIGtmcmVlKHZkcGFfYXV4KTsKPiAgICAg
ICAgIGF1eGlsaWFyeV9zZXRfZHJ2ZGF0YShhdXhfZGV2LCBOVUxMKTsKPgo+IGRpZmYgLS1naXQg
YS9kcml2ZXJzL3ZkcGEvcGRzL2F1eF9kcnYuaCBiL2RyaXZlcnMvdmRwYS9wZHMvYXV4X2Rydi5o
Cj4gaW5kZXggOTllMGZmMzQwYmZhLi4yNmI3NTM0NDE1NmUgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy92ZHBhL3Bkcy9hdXhfZHJ2LmgKPiArKysgYi9kcml2ZXJzL3ZkcGEvcGRzL2F1eF9kcnYuaAo+
IEBAIC0xMyw2ICsxMyw3IEBAIHN0cnVjdCBwZHNfdmRwYV9hdXggewo+ICAgICAgICAgc3RydWN0
IHBkc19hdXhpbGlhcnlfZGV2ICpwYWRldjsKPgo+ICAgICAgICAgc3RydWN0IHZkcGFfbWdtdF9k
ZXYgdmRwYV9tZGV2Owo+ICsgICAgICAgc3RydWN0IHBkc192ZHBhX2RldmljZSAqcGRzdjsKPgo+
ICAgICAgICAgc3RydWN0IHBkc192ZHBhX2lkZW50IGlkZW50Owo+Cj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvdmRwYS9wZHMvZGVidWdmcy5jIGIvZHJpdmVycy92ZHBhL3Bkcy9kZWJ1Z2ZzLmMKPiBp
bmRleCBkOTFkY2ViMDczODAuLjBlY2QwZTJlYzZiOSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3Zk
cGEvcGRzL2RlYnVnZnMuYwo+ICsrKyBiL2RyaXZlcnMvdmRwYS9wZHMvZGVidWdmcy5jCj4gQEAg
LTEwLDYgKzEwLDcgQEAKPiAgI2luY2x1ZGUgPGxpbnV4L3Bkcy9wZHNfYXV4YnVzLmg+Cj4KPiAg
I2luY2x1ZGUgImF1eF9kcnYuaCIKPiArI2luY2x1ZGUgInZkcGFfZGV2LmgiCj4gICNpbmNsdWRl
ICJkZWJ1Z2ZzLmgiCj4KPiAgc3RhdGljIHN0cnVjdCBkZW50cnkgKmRiZnNfZGlyOwo+IEBAIC0y
NCwzICsyNSwyNjMgQEAgdm9pZCBwZHNfdmRwYV9kZWJ1Z2ZzX2Rlc3Ryb3kodm9pZCkKPiAgICAg
ICAgIGRlYnVnZnNfcmVtb3ZlX3JlY3Vyc2l2ZShkYmZzX2Rpcik7Cj4gICAgICAgICBkYmZzX2Rp
ciA9IE5VTEw7Cj4gIH0KPiArCj4gKyNkZWZpbmUgUFJJTlRfU0JJVF9OQU1FKF9fc2VxLCBfX2Ys
IF9fbmFtZSkgICAgICAgICAgICAgICAgICAgICBcCj4gKyAgICAgICBkbyB7ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKPiArICAgICAgICAgICAg
ICAgaWYgKChfX2YpICYgKF9fbmFtZSkpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwK
PiArICAgICAgICAgICAgICAgICAgICAgICBzZXFfcHJpbnRmKF9fc2VxLCAiICVzIiwgJiNfX25h
bWVbMTZdKTsgXAo+ICsgICAgICAgfSB3aGlsZSAoMCkKPiArCj4gK3N0YXRpYyB2b2lkIHByaW50
X3N0YXR1c19iaXRzKHN0cnVjdCBzZXFfZmlsZSAqc2VxLCB1OCBzdGF0dXMpCj4gK3sKPiArICAg
ICAgIHNlcV9wdXRzKHNlcSwgInN0YXR1czoiKTsKPiArICAgICAgIFBSSU5UX1NCSVRfTkFNRShz
ZXEsIHN0YXR1cywgVklSVElPX0NPTkZJR19TX0FDS05PV0xFREdFKTsKPiArICAgICAgIFBSSU5U
X1NCSVRfTkFNRShzZXEsIHN0YXR1cywgVklSVElPX0NPTkZJR19TX0RSSVZFUik7Cj4gKyAgICAg
ICBQUklOVF9TQklUX05BTUUoc2VxLCBzdGF0dXMsIFZJUlRJT19DT05GSUdfU19EUklWRVJfT0sp
Owo+ICsgICAgICAgUFJJTlRfU0JJVF9OQU1FKHNlcSwgc3RhdHVzLCBWSVJUSU9fQ09ORklHX1Nf
RkVBVFVSRVNfT0spOwo+ICsgICAgICAgUFJJTlRfU0JJVF9OQU1FKHNlcSwgc3RhdHVzLCBWSVJU
SU9fQ09ORklHX1NfTkVFRFNfUkVTRVQpOwo+ICsgICAgICAgUFJJTlRfU0JJVF9OQU1FKHNlcSwg
c3RhdHVzLCBWSVJUSU9fQ09ORklHX1NfRkFJTEVEKTsKPiArICAgICAgIHNlcV9wdXRzKHNlcSwg
IlxuIik7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHByaW50X2ZlYXR1cmVfYml0c19hbGwoc3Ry
dWN0IHNlcV9maWxlICpzZXEsIHU2NCBmZWF0dXJlcykKPiArewo+ICsgICAgICAgaW50IGk7Cj4g
Kwo+ICsgICAgICAgc2VxX3B1dHMoc2VxLCAiZmVhdHVyZXM6Iik7Cj4gKwo+ICsgICAgICAgZm9y
IChpID0gMDsgaSA8IChzaXplb2YodTY0KSAqIDgpOyBpKyspIHsKPiArICAgICAgICAgICAgICAg
dTY0IG1hc2sgPSBCSVRfVUxMKGkpOwo+ICsKPiArICAgICAgICAgICAgICAgc3dpdGNoIChmZWF0
dXJlcyAmIG1hc2spIHsKPiArICAgICAgICAgICAgICAgY2FzZSBCSVRfVUxMKFZJUlRJT19ORVRf
Rl9DU1VNKToKPiArICAgICAgICAgICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEsICIgVklSVElP
X05FVF9GX0NTVU0iKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAg
ICAgICAgICAgY2FzZSBCSVRfVUxMKFZJUlRJT19ORVRfRl9HVUVTVF9DU1VNKToKPiArICAgICAg
ICAgICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEsICIgVklSVElPX05FVF9GX0dVRVNUX0NTVU0i
KTsKPiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgICAgICAgICAgY2Fz
ZSBCSVRfVUxMKFZJUlRJT19ORVRfRl9DVFJMX0dVRVNUX09GRkxPQURTKToKPiArICAgICAgICAg
ICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEsICIgVklSVElPX05FVF9GX0NUUkxfR1VFU1RfT0ZG
TE9BRFMiKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgICAgICAg
ICAgY2FzZSBCSVRfVUxMKFZJUlRJT19ORVRfRl9NVFUpOgo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIHNlcV9wdXRzKHNlcSwgIiBWSVJUSU9fTkVUX0ZfTVRVIik7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICAgICAgICAgIGNhc2UgQklUX1VMTChWSVJUSU9fTkVU
X0ZfTUFDKToKPiArICAgICAgICAgICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEsICIgVklSVElP
X05FVF9GX01BQyIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAg
ICAgICAgICBjYXNlIEJJVF9VTEwoVklSVElPX05FVF9GX0dVRVNUX1RTTzQpOgo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIHNlcV9wdXRzKHNlcSwgIiBWSVJUSU9fTkVUX0ZfR1VFU1RfVFNPNCIp
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICBjYXNl
IEJJVF9VTEwoVklSVElPX05FVF9GX0dVRVNUX1RTTzYpOgo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIHNlcV9wdXRzKHNlcSwgIiBWSVJUSU9fTkVUX0ZfR1VFU1RfVFNPNiIpOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICBjYXNlIEJJVF9VTEwoVklS
VElPX05FVF9GX0dVRVNUX0VDTik6Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgc2VxX3B1dHMo
c2VxLCAiIFZJUlRJT19ORVRfRl9HVUVTVF9FQ04iKTsKPiArICAgICAgICAgICAgICAgICAgICAg
ICBicmVhazsKPiArICAgICAgICAgICAgICAgY2FzZSBCSVRfVUxMKFZJUlRJT19ORVRfRl9HVUVT
VF9VRk8pOgo+ICsgICAgICAgICAgICAgICAgICAgICAgIHNlcV9wdXRzKHNlcSwgIiBWSVJUSU9f
TkVUX0ZfR1VFU1RfVUZPIik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyAg
ICAgICAgICAgICAgIGNhc2UgQklUX1VMTChWSVJUSU9fTkVUX0ZfSE9TVF9UU080KToKPiArICAg
ICAgICAgICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEsICIgVklSVElPX05FVF9GX0hPU1RfVFNP
NCIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICBj
YXNlIEJJVF9VTEwoVklSVElPX05FVF9GX0hPU1RfVFNPNik6Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgc2VxX3B1dHMoc2VxLCAiIFZJUlRJT19ORVRfRl9IT1NUX1RTTzYiKTsKPiArICAgICAg
ICAgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgICAgICAgICAgY2FzZSBCSVRfVUxMKFZJ
UlRJT19ORVRfRl9IT1NUX0VDTik6Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgc2VxX3B1dHMo
c2VxLCAiIFZJUlRJT19ORVRfRl9IT1NUX0VDTiIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGJyZWFrOwo+ICsgICAgICAgICAgICAgICBjYXNlIEJJVF9VTEwoVklSVElPX05FVF9GX0hPU1Rf
VUZPKToKPiArICAgICAgICAgICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEsICIgVklSVElPX05F
VF9GX0hPU1RfVUZPIik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyAgICAg
ICAgICAgICAgIGNhc2UgQklUX1VMTChWSVJUSU9fTkVUX0ZfTVJHX1JYQlVGKToKPiArICAgICAg
ICAgICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEsICIgVklSVElPX05FVF9GX01SR19SWEJVRiIp
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICBjYXNl
IEJJVF9VTEwoVklSVElPX05FVF9GX1NUQVRVUyk6Cj4gKyAgICAgICAgICAgICAgICAgICAgICAg
c2VxX3B1dHMoc2VxLCAiIFZJUlRJT19ORVRfRl9TVEFUVVMiKTsKPiArICAgICAgICAgICAgICAg
ICAgICAgICBicmVhazsKPiArICAgICAgICAgICAgICAgY2FzZSBCSVRfVUxMKFZJUlRJT19ORVRf
Rl9DVFJMX1ZRKToKPiArICAgICAgICAgICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEsICIgVklS
VElPX05FVF9GX0NUUkxfVlEiKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiAr
ICAgICAgICAgICAgICAgY2FzZSBCSVRfVUxMKFZJUlRJT19ORVRfRl9DVFJMX1JYKToKPiArICAg
ICAgICAgICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEsICIgVklSVElPX05FVF9GX0NUUkxfUlgi
KTsKPiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgICAgICAgICAgY2Fz
ZSBCSVRfVUxMKFZJUlRJT19ORVRfRl9DVFJMX1ZMQU4pOgo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIHNlcV9wdXRzKHNlcSwgIiBWSVJUSU9fTkVUX0ZfQ1RSTF9WTEFOIik7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICAgICAgICAgIGNhc2UgQklUX1VMTChWSVJU
SU9fTkVUX0ZfQ1RSTF9SWF9FWFRSQSk6Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgc2VxX3B1
dHMoc2VxLCAiIFZJUlRJT19ORVRfRl9DVFJMX1JYX0VYVFJBIik7Cj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICAgICAgICAgIGNhc2UgQklUX1VMTChWSVJUSU9fTkVU
X0ZfR1VFU1RfQU5OT1VOQ0UpOgo+ICsgICAgICAgICAgICAgICAgICAgICAgIHNlcV9wdXRzKHNl
cSwgIiBWSVJUSU9fTkVUX0ZfR1VFU1RfQU5OT1VOQ0UiKTsKPiArICAgICAgICAgICAgICAgICAg
ICAgICBicmVhazsKPiArICAgICAgICAgICAgICAgY2FzZSBCSVRfVUxMKFZJUlRJT19ORVRfRl9N
USk6Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgc2VxX3B1dHMoc2VxLCAiIFZJUlRJT19ORVRf
Rl9NUSIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAg
ICBjYXNlIEJJVF9VTEwoVklSVElPX05FVF9GX0NUUkxfTUFDX0FERFIpOgo+ICsgICAgICAgICAg
ICAgICAgICAgICAgIHNlcV9wdXRzKHNlcSwgIiBWSVJUSU9fTkVUX0ZfQ1RSTF9NQUNfQUREUiIp
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICBjYXNl
IEJJVF9VTEwoVklSVElPX05FVF9GX0hBU0hfUkVQT1JUKToKPiArICAgICAgICAgICAgICAgICAg
ICAgICBzZXFfcHV0cyhzZXEsICIgVklSVElPX05FVF9GX0hBU0hfUkVQT1JUIik7Cj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICAgICAgICAgIGNhc2UgQklUX1VMTChW
SVJUSU9fTkVUX0ZfUlNTKToKPiArICAgICAgICAgICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEs
ICIgVklSVElPX05FVF9GX1JTUyIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+
ICsgICAgICAgICAgICAgICBjYXNlIEJJVF9VTEwoVklSVElPX05FVF9GX1JTQ19FWFQpOgo+ICsg
ICAgICAgICAgICAgICAgICAgICAgIHNlcV9wdXRzKHNlcSwgIiBWSVJUSU9fTkVUX0ZfUlNDX0VY
VCIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICBj
YXNlIEJJVF9VTEwoVklSVElPX05FVF9GX1NUQU5EQlkpOgo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIHNlcV9wdXRzKHNlcSwgIiBWSVJUSU9fTkVUX0ZfU1RBTkRCWSIpOwo+ICsgICAgICAgICAg
ICAgICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICBjYXNlIEJJVF9VTEwoVklSVElP
X05FVF9GX1NQRUVEX0RVUExFWCk6Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgc2VxX3B1dHMo
c2VxLCAiIFZJUlRJT19ORVRfRl9TUEVFRF9EVVBMRVgiKTsKPiArICAgICAgICAgICAgICAgICAg
ICAgICBicmVhazsKPiArICAgICAgICAgICAgICAgY2FzZSBCSVRfVUxMKFZJUlRJT19GX05PVElG
WV9PTl9FTVBUWSk6Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgc2VxX3B1dHMoc2VxLCAiIFZJ
UlRJT19GX05PVElGWV9PTl9FTVBUWSIpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGJyZWFr
Owo+ICsgICAgICAgICAgICAgICBjYXNlIEJJVF9VTEwoVklSVElPX0ZfQU5ZX0xBWU9VVCk6Cj4g
KyAgICAgICAgICAgICAgICAgICAgICAgc2VxX3B1dHMoc2VxLCAiIFZJUlRJT19GX0FOWV9MQVlP
VVQiKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKPiArICAgICAgICAgICAgICAg
Y2FzZSBCSVRfVUxMKFZJUlRJT19GX1ZFUlNJT05fMSk6Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgc2VxX3B1dHMoc2VxLCAiIFZJUlRJT19GX1ZFUlNJT05fMSIpOwo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICBjYXNlIEJJVF9VTEwoVklSVElPX0Zf
QUNDRVNTX1BMQVRGT1JNKToKPiArICAgICAgICAgICAgICAgICAgICAgICBzZXFfcHV0cyhzZXEs
ICIgVklSVElPX0ZfQUNDRVNTX1BMQVRGT1JNIik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAg
YnJlYWs7Cj4gKyAgICAgICAgICAgICAgIGNhc2UgQklUX1VMTChWSVJUSU9fRl9SSU5HX1BBQ0tF
RCk6Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgc2VxX3B1dHMoc2VxLCAiIFZJUlRJT19GX1JJ
TkdfUEFDS0VEIik7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICAg
ICAgICAgIGNhc2UgQklUX1VMTChWSVJUSU9fRl9PUkRFUl9QTEFURk9STSk6Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgc2VxX3B1dHMoc2VxLCAiIFZJUlRJT19GX09SREVSX1BMQVRGT1JNIik7
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4gKyAgICAgICAgICAgICAgIGNhc2Ug
QklUX1VMTChWSVJUSU9fRl9TUl9JT1YpOgo+ICsgICAgICAgICAgICAgICAgICAgICAgIHNlcV9w
dXRzKHNlcSwgIiBWSVJUSU9fRl9TUl9JT1YiKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBi
cmVhazsKPiArICAgICAgICAgICAgICAgY2FzZSAwOgo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGJyZWFrOwo+ICsgICAgICAgICAgICAgICBkZWZhdWx0Ogo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIHNlcV9wcmludGYoc2VxLCAiIGJpdF8lZCIsIGkpOwo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIGJyZWFrOwo+ICsgICAgICAgICAgICAgICB9Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAg
c2VxX3B1dHMoc2VxLCAiXG4iKTsKPiArfQo+ICsKPiArdm9pZCBwZHNfdmRwYV9kZWJ1Z2ZzX2Fk
ZF9wY2lkZXYoc3RydWN0IHBkc192ZHBhX2F1eCAqdmRwYV9hdXgpCj4gK3sKPiArICAgICAgIHZk
cGFfYXV4LT5kZW50cnkgPSBkZWJ1Z2ZzX2NyZWF0ZV9kaXIocGNpX25hbWUodmRwYV9hdXgtPnBh
ZGV2LT52Zl9wZGV2KSwgZGJmc19kaXIpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGlkZW50aXR5
X3Nob3coc3RydWN0IHNlcV9maWxlICpzZXEsIHZvaWQgKnYpCj4gK3sKPiArICAgICAgIHN0cnVj
dCBwZHNfdmRwYV9hdXggKnZkcGFfYXV4ID0gc2VxLT5wcml2YXRlOwo+ICsgICAgICAgc3RydWN0
IHZkcGFfbWdtdF9kZXYgKm1nbXQ7Cj4gKwo+ICsgICAgICAgc2VxX3ByaW50ZihzZXEsICJhdXhf
ZGV2OiAgICAgICAgICAgICVzXG4iLAo+ICsgICAgICAgICAgICAgICAgICBkZXZfbmFtZSgmdmRw
YV9hdXgtPnBhZGV2LT5hdXhfZGV2LmRldikpOwo+ICsKPiArICAgICAgIG1nbXQgPSAmdmRwYV9h
dXgtPnZkcGFfbWRldjsKPiArICAgICAgIHNlcV9wcmludGYoc2VxLCAibWF4X3ZxczogICAgICAg
ICAgICAlZFxuIiwgbWdtdC0+bWF4X3N1cHBvcnRlZF92cXMpOwo+ICsgICAgICAgc2VxX3ByaW50
ZihzZXEsICJjb25maWdfYXR0cl9tYXNrOiAgICUjbGx4XG4iLCBtZ210LT5jb25maWdfYXR0cl9t
YXNrKTsKPiArICAgICAgIHNlcV9wcmludGYoc2VxLCAic3VwcG9ydGVkX2ZlYXR1cmVzOiAlI2xs
eFxuIiwgbWdtdC0+c3VwcG9ydGVkX2ZlYXR1cmVzKTsKPiArICAgICAgIHByaW50X2ZlYXR1cmVf
Yml0c19hbGwoc2VxLCBtZ210LT5zdXBwb3J0ZWRfZmVhdHVyZXMpOwo+ICsKPiArICAgICAgIHJl
dHVybiAwOwo+ICt9Cj4gK0RFRklORV9TSE9XX0FUVFJJQlVURShpZGVudGl0eSk7Cj4gKwo+ICt2
b2lkIHBkc192ZHBhX2RlYnVnZnNfYWRkX2lkZW50KHN0cnVjdCBwZHNfdmRwYV9hdXggKnZkcGFf
YXV4KQo+ICt7Cj4gKyAgICAgICBkZWJ1Z2ZzX2NyZWF0ZV9maWxlKCJpZGVudGl0eSIsIDA0MDAs
IHZkcGFfYXV4LT5kZW50cnksCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgIHZkcGFfYXV4
LCAmaWRlbnRpdHlfZm9wcyk7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgY29uZmlnX3Nob3coc3Ry
dWN0IHNlcV9maWxlICpzZXEsIHZvaWQgKnYpCj4gK3sKPiArICAgICAgIHN0cnVjdCBwZHNfdmRw
YV9kZXZpY2UgKnBkc3YgPSBzZXEtPnByaXZhdGU7Cj4gKyAgICAgICBzdHJ1Y3QgdmlydGlvX25l
dF9jb25maWcgdmM7Cj4gKyAgICAgICB1OCBzdGF0dXM7Cj4gKwo+ICsgICAgICAgbWVtY3B5X2Zy
b21pbygmdmMsIHBkc3YtPnZkcGFfYXV4LT52ZF9tZGV2LmRldmljZSwKPiArICAgICAgICAgICAg
ICAgICAgICAgc2l6ZW9mKHN0cnVjdCB2aXJ0aW9fbmV0X2NvbmZpZykpOwo+ICsKPiArICAgICAg
IHNlcV9wcmludGYoc2VxLCAibWFjOiAgICAgICAgICAgICAgICAgICVwTVxuIiwgdmMubWFjKTsK
PiArICAgICAgIHNlcV9wcmludGYoc2VxLCAibWF4X3ZpcnRxdWV1ZV9wYWlyczogICVkXG4iLAo+
ICsgICAgICAgICAgICAgICAgICBfX3ZpcnRpbzE2X3RvX2NwdSh0cnVlLCB2Yy5tYXhfdmlydHF1
ZXVlX3BhaXJzKSk7Cj4gKyAgICAgICBzZXFfcHJpbnRmKHNlcSwgIm10dTogICAgICAgICAgICAg
ICAgICAlZFxuIiwgX192aXJ0aW8xNl90b19jcHUodHJ1ZSwgdmMubXR1KSk7Cj4gKyAgICAgICBz
ZXFfcHJpbnRmKHNlcSwgInNwZWVkOiAgICAgICAgICAgICAgICAlZFxuIiwgbGUzMl90b19jcHUo
dmMuc3BlZWQpKTsKPiArICAgICAgIHNlcV9wcmludGYoc2VxLCAiZHVwbGV4OiAgICAgICAgICAg
ICAgICVkXG4iLCB2Yy5kdXBsZXgpOwo+ICsgICAgICAgc2VxX3ByaW50ZihzZXEsICJyc3NfbWF4
X2tleV9zaXplOiAgICAgJWRcbiIsIHZjLnJzc19tYXhfa2V5X3NpemUpOwo+ICsgICAgICAgc2Vx
X3ByaW50ZihzZXEsICJyc3NfbWF4X2luZGlyZWN0aW9uX3RhYmxlX2xlbmd0aDogJWRcbiIsCj4g
KyAgICAgICAgICAgICAgICAgIGxlMTZfdG9fY3B1KHZjLnJzc19tYXhfaW5kaXJlY3Rpb25fdGFi
bGVfbGVuZ3RoKSk7Cj4gKyAgICAgICBzZXFfcHJpbnRmKHNlcSwgInN1cHBvcnRlZF9oYXNoX3R5
cGVzOiAlI3hcbiIsCj4gKyAgICAgICAgICAgICAgICAgIGxlMzJfdG9fY3B1KHZjLnN1cHBvcnRl
ZF9oYXNoX3R5cGVzKSk7Cj4gKyAgICAgICBzZXFfcHJpbnRmKHNlcSwgInZuX3N0YXR1czogICAg
ICAgICAgICAlI3hcbiIsCj4gKyAgICAgICAgICAgICAgICAgIF9fdmlydGlvMTZfdG9fY3B1KHRy
dWUsIHZjLnN0YXR1cykpOwo+ICsKPiArICAgICAgIHN0YXR1cyA9IHZwX21vZGVybl9nZXRfc3Rh
dHVzKCZwZHN2LT52ZHBhX2F1eC0+dmRfbWRldik7Cj4gKyAgICAgICBzZXFfcHJpbnRmKHNlcSwg
ImRldl9zdGF0dXM6ICAgICAgICAgICAlI3hcbiIsIHN0YXR1cyk7Cj4gKyAgICAgICBwcmludF9z
dGF0dXNfYml0cyhzZXEsIHN0YXR1cyk7Cj4gKwo+ICsgICAgICAgc2VxX3ByaW50ZihzZXEsICJy
ZXFfZmVhdHVyZXM6ICAgICAgICAgJSNsbHhcbiIsIHBkc3YtPnJlcV9mZWF0dXJlcyk7Cj4gKyAg
ICAgICBwcmludF9mZWF0dXJlX2JpdHNfYWxsKHNlcSwgcGRzdi0+cmVxX2ZlYXR1cmVzKTsKPiAr
ICAgICAgIHNlcV9wcmludGYoc2VxLCAiYWN0dWFsX2ZlYXR1cmVzOiAgICAgICUjbGx4XG4iLCBw
ZHN2LT5hY3R1YWxfZmVhdHVyZXMpOwo+ICsgICAgICAgcHJpbnRfZmVhdHVyZV9iaXRzX2FsbChz
ZXEsIHBkc3YtPmFjdHVhbF9mZWF0dXJlcyk7Cj4gKyAgICAgICBzZXFfcHJpbnRmKHNlcSwgInZk
cGFfaW5kZXg6ICAgICAgICAgICAlZFxuIiwgcGRzdi0+dmRwYV9pbmRleCk7Cj4gKyAgICAgICBz
ZXFfcHJpbnRmKHNlcSwgIm51bV92cXM6ICAgICAgICAgICAgICAlZFxuIiwgcGRzdi0+bnVtX3Zx
cyk7Cj4gKwo+ICsgICAgICAgcmV0dXJuIDA7Cj4gK30KPiArREVGSU5FX1NIT1dfQVRUUklCVVRF
KGNvbmZpZyk7Cj4gKwo+ICtzdGF0aWMgaW50IHZxX3Nob3coc3RydWN0IHNlcV9maWxlICpzZXEs
IHZvaWQgKnYpCj4gK3sKPiArICAgICAgIHN0cnVjdCBwZHNfdmRwYV92cV9pbmZvICp2cSA9IHNl
cS0+cHJpdmF0ZTsKPiArCj4gKyAgICAgICBzZXFfcHJpbnRmKHNlcSwgInJlYWR5OiAgICAgICVk
XG4iLCB2cS0+cmVhZHkpOwo+ICsgICAgICAgc2VxX3ByaW50ZihzZXEsICJkZXNjX2FkZHI6ICAl
I2xseFxuIiwgdnEtPmRlc2NfYWRkcik7Cj4gKyAgICAgICBzZXFfcHJpbnRmKHNlcSwgImF2YWls
X2FkZHI6ICUjbGx4XG4iLCB2cS0+YXZhaWxfYWRkcik7Cj4gKyAgICAgICBzZXFfcHJpbnRmKHNl
cSwgInVzZWRfYWRkcjogICUjbGx4XG4iLCB2cS0+dXNlZF9hZGRyKTsKPiArICAgICAgIHNlcV9w
cmludGYoc2VxLCAicV9sZW46ICAgICAgJWRcbiIsIHZxLT5xX2xlbik7Cj4gKyAgICAgICBzZXFf
cHJpbnRmKHNlcSwgInFpZDogICAgICAgICVkXG4iLCB2cS0+cWlkKTsKPiArCj4gKyAgICAgICBz
ZXFfcHJpbnRmKHNlcSwgImRvb3JiZWxsOiAgICUjbGx4XG4iLCB2cS0+ZG9vcmJlbGwpOwo+ICsg
ICAgICAgc2VxX3ByaW50ZihzZXEsICJhdmFpbF9pZHg6ICAlZFxuIiwgdnEtPmF2YWlsX2lkeCk7
Cj4gKyAgICAgICBzZXFfcHJpbnRmKHNlcSwgInVzZWRfaWR4OiAgICVkXG4iLCB2cS0+dXNlZF9p
ZHgpOwo+ICsgICAgICAgc2VxX3ByaW50ZihzZXEsICJpcnE6ICAgICAgICAlZFxuIiwgdnEtPmly
cSk7Cj4gKyAgICAgICBzZXFfcHJpbnRmKHNlcSwgImlycS1uYW1lOiAgICVzXG4iLCB2cS0+aXJx
X25hbWUpOwo+ICsKPiArICAgICAgIHJldHVybiAwOwo+ICt9Cj4gK0RFRklORV9TSE9XX0FUVFJJ
QlVURSh2cSk7Cj4gKwo+ICt2b2lkIHBkc192ZHBhX2RlYnVnZnNfYWRkX3ZkcGFkZXYoc3RydWN0
IHBkc192ZHBhX2F1eCAqdmRwYV9hdXgpCj4gK3sKPiArICAgICAgIGludCBpOwo+ICsKPiArICAg
ICAgIGRlYnVnZnNfY3JlYXRlX2ZpbGUoImNvbmZpZyIsIDA0MDAsIHZkcGFfYXV4LT5kZW50cnks
IHZkcGFfYXV4LT5wZHN2LCAmY29uZmlnX2ZvcHMpOwo+ICsKPiArICAgICAgIGZvciAoaSA9IDA7
IGkgPCB2ZHBhX2F1eC0+cGRzdi0+bnVtX3ZxczsgaSsrKSB7Cj4gKyAgICAgICAgICAgICAgIGNo
YXIgbmFtZVs4XTsKPiArCj4gKyAgICAgICAgICAgICAgIHNucHJpbnRmKG5hbWUsIHNpemVvZihu
YW1lKSwgInZxJTAyZCIsIGkpOwo+ICsgICAgICAgICAgICAgICBkZWJ1Z2ZzX2NyZWF0ZV9maWxl
KG5hbWUsIDA0MDAsIHZkcGFfYXV4LT5kZW50cnksCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgJnZkcGFfYXV4LT5wZHN2LT52cXNbaV0sICZ2cV9mb3BzKTsKPiArICAgICAg
IH0KPiArfQo+ICsKPiArdm9pZCBwZHNfdmRwYV9kZWJ1Z2ZzX2RlbF92ZHBhZGV2KHN0cnVjdCBw
ZHNfdmRwYV9hdXggKnZkcGFfYXV4KQo+ICt7Cj4gKyAgICAgICBkZWJ1Z2ZzX3JlbW92ZV9yZWN1
cnNpdmUodmRwYV9hdXgtPmRlbnRyeSk7Cj4gKyAgICAgICB2ZHBhX2F1eC0+ZGVudHJ5ID0gTlVM
TDsKPiArfQo+ICsKPiArdm9pZCBwZHNfdmRwYV9kZWJ1Z2ZzX3Jlc2V0X3ZkcGFkZXYoc3RydWN0
IHBkc192ZHBhX2F1eCAqdmRwYV9hdXgpCj4gK3sKPiArICAgICAgIC8qIHdlIGRvbid0IGtlZXAg
dHJhY2sgb2YgdGhlIGVudHJpZXMsIHNvIHJlbW92ZSBpdCBhbGwKPiArICAgICAgICAqIHRoZW4g
cmVidWlsZCB0aGUgYmFzaWNzCj4gKyAgICAgICAgKi8KPiArICAgICAgIHBkc192ZHBhX2RlYnVn
ZnNfZGVsX3ZkcGFkZXYodmRwYV9hdXgpOwo+ICsgICAgICAgcGRzX3ZkcGFfZGVidWdmc19hZGRf
cGNpZGV2KHZkcGFfYXV4KTsKPiArICAgICAgIHBkc192ZHBhX2RlYnVnZnNfYWRkX2lkZW50KHZk
cGFfYXV4KTsKPiArfQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEvcGRzL2RlYnVnZnMuaCBi
L2RyaXZlcnMvdmRwYS9wZHMvZGVidWdmcy5oCj4gaW5kZXggNjU4ODQ5NTkxYTk5Li5jMDg4YTRl
OGYxZTkgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92ZHBhL3Bkcy9kZWJ1Z2ZzLmgKPiArKysgYi9k
cml2ZXJzL3ZkcGEvcGRzL2RlYnVnZnMuaAo+IEBAIC04LDUgKzgsMTAgQEAKPgo+ICB2b2lkIHBk
c192ZHBhX2RlYnVnZnNfY3JlYXRlKHZvaWQpOwo+ICB2b2lkIHBkc192ZHBhX2RlYnVnZnNfZGVz
dHJveSh2b2lkKTsKPiArdm9pZCBwZHNfdmRwYV9kZWJ1Z2ZzX2FkZF9wY2lkZXYoc3RydWN0IHBk
c192ZHBhX2F1eCAqdmRwYV9hdXgpOwo+ICt2b2lkIHBkc192ZHBhX2RlYnVnZnNfYWRkX2lkZW50
KHN0cnVjdCBwZHNfdmRwYV9hdXggKnZkcGFfYXV4KTsKPiArdm9pZCBwZHNfdmRwYV9kZWJ1Z2Zz
X2FkZF92ZHBhZGV2KHN0cnVjdCBwZHNfdmRwYV9hdXggKnZkcGFfYXV4KTsKPiArdm9pZCBwZHNf
dmRwYV9kZWJ1Z2ZzX2RlbF92ZHBhZGV2KHN0cnVjdCBwZHNfdmRwYV9hdXggKnZkcGFfYXV4KTsK
PiArdm9pZCBwZHNfdmRwYV9kZWJ1Z2ZzX3Jlc2V0X3ZkcGFkZXYoc3RydWN0IHBkc192ZHBhX2F1
eCAqdmRwYV9hdXgpOwo+Cj4gICNlbmRpZiAvKiBfUERTX1ZEUEFfREVCVUdGU19IXyAqLwo+IGRp
ZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEvcGRzL3ZkcGFfZGV2LmMgYi9kcml2ZXJzL3ZkcGEvcGRz
L3ZkcGFfZGV2LmMKPiBpbmRleCAwZjBmMGFiOGI4MTEuLjk5NzA2NTdjZGIzZCAxMDA2NDQKPiAt
LS0gYS9kcml2ZXJzL3ZkcGEvcGRzL3ZkcGFfZGV2LmMKPiArKysgYi9kcml2ZXJzL3ZkcGEvcGRz
L3ZkcGFfZGV2LmMKPiBAQCAtNCw2ICs0LDcgQEAKPiAgI2luY2x1ZGUgPGxpbnV4L3BjaS5oPgo+
ICAjaW5jbHVkZSA8bGludXgvdmRwYS5oPgo+ICAjaW5jbHVkZSA8dWFwaS9saW51eC92ZHBhLmg+
Cj4gKyNpbmNsdWRlIDxsaW51eC92aXJ0aW9fcGNpX21vZGVybi5oPgo+Cj4gICNpbmNsdWRlIDxs
aW51eC9wZHMvcGRzX2NvbW1vbi5oPgo+ICAjaW5jbHVkZSA8bGludXgvcGRzL3Bkc19jb3JlX2lm
Lmg+Cj4gQEAgLTEyLDcgKzEzLDQwNiBAQAo+Cj4gICNpbmNsdWRlICJ2ZHBhX2Rldi5oIgo+ICAj
aW5jbHVkZSAiYXV4X2Rydi5oIgo+ICsjaW5jbHVkZSAiY21kcy5oIgo+ICsjaW5jbHVkZSAiZGVi
dWdmcy5oIgo+Cj4gK3N0YXRpYyBzdHJ1Y3QgcGRzX3ZkcGFfZGV2aWNlICp2ZHBhX3RvX3Bkc3Yo
c3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhX2RldikKPiArewo+ICsgICAgICAgcmV0dXJuIGNvbnRh
aW5lcl9vZih2ZHBhX2Rldiwgc3RydWN0IHBkc192ZHBhX2RldmljZSwgdmRwYV9kZXYpOwo+ICt9
Cj4gKwo+ICtzdGF0aWMgaW50IHBkc192ZHBhX3NldF92cV9hZGRyZXNzKHN0cnVjdCB2ZHBhX2Rl
dmljZSAqdmRwYV9kZXYsIHUxNiBxaWQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB1NjQgZGVzY19hZGRyLCB1NjQgZHJpdmVyX2FkZHIsIHU2NCBkZXZpY2VfYWRkcikKPiAr
ewo+ICsgICAgICAgc3RydWN0IHBkc192ZHBhX2RldmljZSAqcGRzdiA9IHZkcGFfdG9fcGRzdih2
ZHBhX2Rldik7Cj4gKwo+ICsgICAgICAgcGRzdi0+dnFzW3FpZF0uZGVzY19hZGRyID0gZGVzY19h
ZGRyOwo+ICsgICAgICAgcGRzdi0+dnFzW3FpZF0uYXZhaWxfYWRkciA9IGRyaXZlcl9hZGRyOwo+
ICsgICAgICAgcGRzdi0+dnFzW3FpZF0udXNlZF9hZGRyID0gZGV2aWNlX2FkZHI7Cj4gKwo+ICsg
ICAgICAgcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHBkc192ZHBhX3NldF92cV9u
dW0oc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhX2RldiwgdTE2IHFpZCwgdTMyIG51bSkKPiArewo+
ICsgICAgICAgc3RydWN0IHBkc192ZHBhX2RldmljZSAqcGRzdiA9IHZkcGFfdG9fcGRzdih2ZHBh
X2Rldik7Cj4gKwo+ICsgICAgICAgcGRzdi0+dnFzW3FpZF0ucV9sZW4gPSBudW07Cj4gK30KPiAr
Cj4gK3N0YXRpYyB2b2lkIHBkc192ZHBhX2tpY2tfdnEoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBh
X2RldiwgdTE2IHFpZCkKPiArewo+ICsgICAgICAgc3RydWN0IHBkc192ZHBhX2RldmljZSAqcGRz
diA9IHZkcGFfdG9fcGRzdih2ZHBhX2Rldik7Cj4gKwo+ICsgICAgICAgaW93cml0ZTE2KHFpZCwg
cGRzdi0+dnFzW3FpZF0ubm90aWZ5KTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgcGRzX3ZkcGFf
c2V0X3ZxX2NiKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYV9kZXYsIHUxNiBxaWQsCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2ZHBhX2NhbGxiYWNrICpjYikKPiArewo+
ICsgICAgICAgc3RydWN0IHBkc192ZHBhX2RldmljZSAqcGRzdiA9IHZkcGFfdG9fcGRzdih2ZHBh
X2Rldik7Cj4gKwo+ICsgICAgICAgcGRzdi0+dnFzW3FpZF0uZXZlbnRfY2IgPSAqY2I7Cj4gK30K
PiArCj4gK3N0YXRpYyBpcnFyZXR1cm5fdCBwZHNfdmRwYV9pc3IoaW50IGlycSwgdm9pZCAqZGF0
YSkKPiArewo+ICsgICAgICAgc3RydWN0IHBkc192ZHBhX3ZxX2luZm8gKnZxOwo+ICsKPiArICAg
ICAgIHZxID0gZGF0YTsKPiArICAgICAgIGlmICh2cS0+ZXZlbnRfY2IuY2FsbGJhY2spCj4gKyAg
ICAgICAgICAgICAgIHZxLT5ldmVudF9jYi5jYWxsYmFjayh2cS0+ZXZlbnRfY2IucHJpdmF0ZSk7
Cj4gKwo+ICsgICAgICAgcmV0dXJuIElSUV9IQU5ETEVEOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9p
ZCBwZHNfdmRwYV9yZWxlYXNlX2lycShzdHJ1Y3QgcGRzX3ZkcGFfZGV2aWNlICpwZHN2LCBpbnQg
cWlkKQo+ICt7Cj4gKyAgICAgICBpZiAocGRzdi0+dnFzW3FpZF0uaXJxID09IFZJUlRJT19NU0lf
Tk9fVkVDVE9SKQo+ICsgICAgICAgICAgICAgICByZXR1cm47Cj4gKwo+ICsgICAgICAgZnJlZV9p
cnEocGRzdi0+dnFzW3FpZF0uaXJxLCAmcGRzdi0+dnFzW3FpZF0pOwo+ICsgICAgICAgcGRzdi0+
dnFzW3FpZF0uaXJxID0gVklSVElPX01TSV9OT19WRUNUT1I7Cj4gK30KPiArCj4gK3N0YXRpYyB2
b2lkIHBkc192ZHBhX3NldF92cV9yZWFkeShzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGFfZGV2LCB1
MTYgcWlkLCBib29sIHJlYWR5KQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgcGRzX3ZkcGFfZGV2aWNl
ICpwZHN2ID0gdmRwYV90b19wZHN2KHZkcGFfZGV2KTsKPiArICAgICAgIHN0cnVjdCBwY2lfZGV2
ICpwZGV2ID0gcGRzdi0+dmRwYV9hdXgtPnBhZGV2LT52Zl9wZGV2Owo+ICsgICAgICAgc3RydWN0
IGRldmljZSAqZGV2ID0gJnBkc3YtPnZkcGFfZGV2LmRldjsKPiArICAgICAgIGludCBpcnE7Cj4g
KyAgICAgICBpbnQgZXJyOwo+ICsKPiArICAgICAgIGRldl9kYmcoZGV2LCAiJXM6IHFpZCAlZCBy
ZWFkeSAlZCA9PiAlZFxuIiwKPiArICAgICAgICAgICAgICAgX19mdW5jX18sIHFpZCwgcGRzdi0+
dnFzW3FpZF0ucmVhZHksIHJlYWR5KTsKPiArICAgICAgIGlmIChyZWFkeSA9PSBwZHN2LT52cXNb
cWlkXS5yZWFkeSkKPiArICAgICAgICAgICAgICAgcmV0dXJuOwo+ICsKPiArICAgICAgIGlmIChy
ZWFkeSkgewo+ICsgICAgICAgICAgICAgICBpcnEgPSBwY2lfaXJxX3ZlY3RvcihwZGV2LCBxaWQp
Owo+ICsgICAgICAgICAgICAgICBzbnByaW50ZihwZHN2LT52cXNbcWlkXS5pcnFfbmFtZSwgc2l6
ZW9mKHBkc3YtPnZxc1txaWRdLmlycV9uYW1lKSwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
InZkcGEtJXMtJWQiLCBkZXZfbmFtZShkZXYpLCBxaWQpOwo+ICsKPiArICAgICAgICAgICAgICAg
ZXJyID0gcmVxdWVzdF9pcnEoaXJxLCBwZHNfdmRwYV9pc3IsIDAsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHBkc3YtPnZxc1txaWRdLmlycV9uYW1lLCAmcGRzdi0+dnFzW3Fp
ZF0pOwo+ICsgICAgICAgICAgICAgICBpZiAoZXJyKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgZGV2X2VycihkZXYsICIlczogbm8gaXJxIGZvciBxaWQgJWQ6ICVwZVxuIiwKPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIF9fZnVuY19fLCBxaWQsIEVSUl9QVFIoZXJyKSk7Cj4g
KyAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwo+ICsgICAgICAgICAgICAgICB9Cj4gKyAg
ICAgICAgICAgICAgIHBkc3YtPnZxc1txaWRdLmlycSA9IGlycTsKPiArCj4gKyAgICAgICAgICAg
ICAgIC8qIFBhc3MgdnEgc2V0dXAgaW5mbyB0byBEU0MgdXNpbmcgYWRtaW5xIHRvIGdhdGhlciB1
cCBhbmQKPiArICAgICAgICAgICAgICAgICogc2VuZCBhbGwgaW5mbyBhdCBvbmNlIHNvIEZXIGNh
biBkbyBpdHMgZnVsbCBzZXQgdXAgaW4KPiArICAgICAgICAgICAgICAgICogb25lIGVhc3kgb3Bl
cmF0aW9uCj4gKyAgICAgICAgICAgICAgICAqLwo+ICsgICAgICAgICAgICAgICBlcnIgPSBwZHNf
dmRwYV9jbWRfaW5pdF92cShwZHN2LCBxaWQsICZwZHN2LT52cXNbcWlkXSk7Cj4gKyAgICAgICAg
ICAgICAgIGlmIChlcnIpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBkZXZfZXJyKGRldiwg
IkZhaWxlZCB0byBpbml0IHZxICVkOiAlcGVcbiIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBxaWQsIEVSUl9QVFIoZXJyKSk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcGRz
X3ZkcGFfcmVsZWFzZV9pcnEocGRzdiwgcWlkKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBy
ZWFkeSA9IGZhbHNlOwo+ICsgICAgICAgICAgICAgICB9Cj4gKyAgICAgICB9IGVsc2Ugewo+ICsg
ICAgICAgICAgICAgICBlcnIgPSBwZHNfdmRwYV9jbWRfcmVzZXRfdnEocGRzdiwgcWlkKTsKPiAr
ICAgICAgICAgICAgICAgaWYgKGVycikKPiArICAgICAgICAgICAgICAgICAgICAgICBkZXZfZXJy
KGRldiwgIiVzOiByZXNldF92cSBmYWlsZWQgcWlkICVkOiAlcGVcbiIsCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBfX2Z1bmNfXywgcWlkLCBFUlJfUFRSKGVycikpOwo+ICsgICAg
ICAgICAgICAgICBwZHNfdmRwYV9yZWxlYXNlX2lycShwZHN2LCBxaWQpOwo+ICsgICAgICAgfQo+
ICsKPiArICAgICAgIHBkc3YtPnZxc1txaWRdLnJlYWR5ID0gcmVhZHk7Cj4gK30KPiArCj4gK3N0
YXRpYyBib29sIHBkc192ZHBhX2dldF92cV9yZWFkeShzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGFf
ZGV2LCB1MTYgcWlkKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgcGRzX3ZkcGFfZGV2aWNlICpwZHN2
ID0gdmRwYV90b19wZHN2KHZkcGFfZGV2KTsKPiArCj4gKyAgICAgICByZXR1cm4gcGRzdi0+dnFz
W3FpZF0ucmVhZHk7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgcGRzX3ZkcGFfc2V0X3ZxX3N0YXRl
KHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYV9kZXYsIHUxNiBxaWQsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IHZkcGFfdnFfc3RhdGUgKnN0YXRlKQo+ICt7
Cj4gKyAgICAgICBzdHJ1Y3QgcGRzX3ZkcGFfZGV2aWNlICpwZHN2ID0gdmRwYV90b19wZHN2KHZk
cGFfZGV2KTsKPiArICAgICAgIHN0cnVjdCBwZHNfYXV4aWxpYXJ5X2RldiAqcGFkZXYgPSBwZHN2
LT52ZHBhX2F1eC0+cGFkZXY7Cj4gKyAgICAgICBzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmcGFkZXYt
PmF1eF9kZXYuZGV2Owo+ICsgICAgICAgdTE2IGF2YWlsOwo+ICsgICAgICAgdTE2IHVzZWQ7Cj4g
Kwo+ICsgICAgICAgZGV2X2RiZyhkZXYsICIlczogcWlkICVkIGF2YWlsICUjeFxuIiwKPiArICAg
ICAgICAgICAgICAgX19mdW5jX18sIHFpZCwgc3RhdGUtPnBhY2tlZC5sYXN0X2F2YWlsX2lkeCk7
Cj4gKwo+ICsgICAgICAgaWYgKHBkc3YtPmFjdHVhbF9mZWF0dXJlcyAmIEJJVF9VTEwoVklSVElP
X0ZfUklOR19QQUNLRUQpKSB7Cj4gKyAgICAgICAgICAgICAgIGF2YWlsID0gc3RhdGUtPnBhY2tl
ZC5sYXN0X2F2YWlsX2lkeCB8Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgKHN0YXRlLT5wYWNr
ZWQubGFzdF9hdmFpbF9jb3VudGVyIDw8IDE1KTsKPiArICAgICAgICAgICAgICAgdXNlZCA9IHN0
YXRlLT5wYWNrZWQubGFzdF91c2VkX2lkeCB8Cj4gKyAgICAgICAgICAgICAgICAgICAgICAoc3Rh
dGUtPnBhY2tlZC5sYXN0X3VzZWRfY291bnRlciA8PCAxNSk7Cj4gKyAgICAgICB9IGVsc2Ugewo+
ICsgICAgICAgICAgICAgICBhdmFpbCA9IHN0YXRlLT5zcGxpdC5hdmFpbF9pbmRleDsKPiArICAg
ICAgICAgICAgICAgLyogc3RhdGUtPnNwbGl0IGRvZXMgbm90IHByb3ZpZGUgYSB1c2VkX2luZGV4
Ogo+ICsgICAgICAgICAgICAgICAgKiB0aGUgdnEgd2lsbCBiZSBzZXQgdG8gImVtcHR5IiBoZXJl
LCBhbmQgdGhlIHZxIHdpbGwgcmVhZAo+ICsgICAgICAgICAgICAgICAgKiB0aGUgY3VycmVudCB1
c2VkIGluZGV4IHRoZSBuZXh0IHRpbWUgdGhlIHZxIGlzIGtpY2tlZC4KPiArICAgICAgICAgICAg
ICAgICovCj4gKyAgICAgICAgICAgICAgIHVzZWQgPSBzdGF0ZS0+c3BsaXQuYXZhaWxfaW5kZXg7
Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgcmV0dXJuIHBkc192ZHBhX2NtZF9zZXRfdnFfc3Rh
dGUocGRzdiwgcWlkLCBhdmFpbCwgdXNlZCk7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgcGRzX3Zk
cGFfZ2V0X3ZxX3N0YXRlKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYV9kZXYsIHUxNiBxaWQsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZkcGFfdnFfc3RhdGUgKnN0
YXRlKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgcGRzX3ZkcGFfZGV2aWNlICpwZHN2ID0gdmRwYV90
b19wZHN2KHZkcGFfZGV2KTsKPiArICAgICAgIHN0cnVjdCBwZHNfYXV4aWxpYXJ5X2RldiAqcGFk
ZXYgPSBwZHN2LT52ZHBhX2F1eC0+cGFkZXY7Cj4gKyAgICAgICBzdHJ1Y3QgZGV2aWNlICpkZXYg
PSAmcGFkZXYtPmF1eF9kZXYuZGV2Owo+ICsgICAgICAgdTE2IGF2YWlsOwo+ICsgICAgICAgdTE2
IHVzZWQ7Cj4gKyAgICAgICBpbnQgZXJyOwo+ICsKPiArICAgICAgIGRldl9kYmcoZGV2LCAiJXM6
IHFpZCAlZFxuIiwgX19mdW5jX18sIHFpZCk7Cj4gKwo+ICsgICAgICAgZXJyID0gcGRzX3ZkcGFf
Y21kX2dldF92cV9zdGF0ZShwZHN2LCBxaWQsICZhdmFpbCwgJnVzZWQpOwo+ICsgICAgICAgaWYg
KGVycikKPiArICAgICAgICAgICAgICAgcmV0dXJuIGVycjsKPiArCj4gKyAgICAgICBpZiAocGRz
di0+YWN0dWFsX2ZlYXR1cmVzICYgQklUX1VMTChWSVJUSU9fRl9SSU5HX1BBQ0tFRCkpIHsKPiAr
ICAgICAgICAgICAgICAgc3RhdGUtPnBhY2tlZC5sYXN0X2F2YWlsX2lkeCA9IGF2YWlsICYgMHg3
ZmZmOwo+ICsgICAgICAgICAgICAgICBzdGF0ZS0+cGFja2VkLmxhc3RfYXZhaWxfY291bnRlciA9
IGF2YWlsID4+IDE1Owo+ICsgICAgICAgfSBlbHNlIHsKPiArICAgICAgICAgICAgICAgc3RhdGUt
PnNwbGl0LmF2YWlsX2luZGV4ID0gYXZhaWw7Cj4gKyAgICAgICAgICAgICAgIC8qIHN0YXRlLT5z
cGxpdCBkb2VzIG5vdCBwcm92aWRlIGEgdXNlZF9pbmRleC4gKi8KPiArICAgICAgIH0KPiArCj4g
KyAgICAgICByZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIHN0cnVjdCB2ZHBhX25vdGlmaWNh
dGlvbl9hcmVhCj4gK3Bkc192ZHBhX2dldF92cV9ub3RpZmljYXRpb24oc3RydWN0IHZkcGFfZGV2
aWNlICp2ZHBhX2RldiwgdTE2IHFpZCkKPiArewo+ICsgICAgICAgc3RydWN0IHBkc192ZHBhX2Rl
dmljZSAqcGRzdiA9IHZkcGFfdG9fcGRzdih2ZHBhX2Rldik7Cj4gKyAgICAgICBzdHJ1Y3Qgdmly
dGlvX3BjaV9tb2Rlcm5fZGV2aWNlICp2ZF9tZGV2Owo+ICsgICAgICAgc3RydWN0IHZkcGFfbm90
aWZpY2F0aW9uX2FyZWEgYXJlYTsKPiArCj4gKyAgICAgICBhcmVhLmFkZHIgPSBwZHN2LT52cXNb
cWlkXS5ub3RpZnlfcGE7Cj4gKwo+ICsgICAgICAgdmRfbWRldiA9ICZwZHN2LT52ZHBhX2F1eC0+
dmRfbWRldjsKPiArICAgICAgIGlmICghdmRfbWRldi0+bm90aWZ5X29mZnNldF9tdWx0aXBsaWVy
KQo+ICsgICAgICAgICAgICAgICBhcmVhLnNpemUgPSBQRFNfUEFHRV9TSVpFOwo+ICsgICAgICAg
ZWxzZQo+ICsgICAgICAgICAgICAgICBhcmVhLnNpemUgPSB2ZF9tZGV2LT5ub3RpZnlfb2Zmc2V0
X211bHRpcGxpZXI7Cj4gKwo+ICsgICAgICAgcmV0dXJuIGFyZWE7Cj4gK30KPiArCj4gK3N0YXRp
YyBpbnQgcGRzX3ZkcGFfZ2V0X3ZxX2lycShzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGFfZGV2LCB1
MTYgcWlkKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgcGRzX3ZkcGFfZGV2aWNlICpwZHN2ID0gdmRw
YV90b19wZHN2KHZkcGFfZGV2KTsKPiArCj4gKyAgICAgICByZXR1cm4gcGRzdi0+dnFzW3FpZF0u
aXJxOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdTMyIHBkc192ZHBhX2dldF92cV9hbGlnbihzdHJ1Y3Qg
dmRwYV9kZXZpY2UgKnZkcGFfZGV2KQo+ICt7Cj4gKyAgICAgICByZXR1cm4gUERTX1BBR0VfU0la
RTsKPiArfQo+ICsKPiArc3RhdGljIHUzMiBwZHNfdmRwYV9nZXRfdnFfZ3JvdXAoc3RydWN0IHZk
cGFfZGV2aWNlICp2ZHBhX2RldiwgdTE2IGlkeCkKPiArewo+ICsgICAgICAgcmV0dXJuIDA7Cj4g
K30KPiArCj4gK3N0YXRpYyB1NjQgcGRzX3ZkcGFfZ2V0X2RldmljZV9mZWF0dXJlcyhzdHJ1Y3Qg
dmRwYV9kZXZpY2UgKnZkcGFfZGV2KQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgcGRzX3ZkcGFfZGV2
aWNlICpwZHN2ID0gdmRwYV90b19wZHN2KHZkcGFfZGV2KTsKPiArCj4gKyAgICAgICByZXR1cm4g
bGU2NF90b19jcHUocGRzdi0+dmRwYV9hdXgtPmlkZW50Lmh3X2ZlYXR1cmVzKTsKPiArfQo+ICsK
PiArc3RhdGljIGludCBwZHNfdmRwYV9zZXRfZHJpdmVyX2ZlYXR1cmVzKHN0cnVjdCB2ZHBhX2Rl
dmljZSAqdmRwYV9kZXYsIHU2NCBmZWF0dXJlcykKPiArewo+ICsgICAgICAgc3RydWN0IHBkc192
ZHBhX2RldmljZSAqcGRzdiA9IHZkcGFfdG9fcGRzdih2ZHBhX2Rldik7Cj4gKyAgICAgICBzdHJ1
Y3QgZGV2aWNlICpkZXYgPSAmcGRzdi0+dmRwYV9kZXYuZGV2Owo+ICsgICAgICAgdTY0IG5lZ29f
ZmVhdHVyZXM7Cj4gKyAgICAgICB1NjQgbWlzc2luZzsKPiArCj4gKyAgICAgICBpZiAoIShmZWF0
dXJlcyAmIEJJVF9VTEwoVklSVElPX0ZfQUNDRVNTX1BMQVRGT1JNKSkgJiYgZmVhdHVyZXMpIHsK
PiArICAgICAgICAgICAgICAgZGV2X2VycihkZXYsICJWSVJUSU9fRl9BQ0NFU1NfUExBVEZPUk0g
aXMgbm90IG5lZ290aWF0ZWRcbiIpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVPUE5PVFNV
UFA7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgcGRzdi0+cmVxX2ZlYXR1cmVzID0gZmVhdHVy
ZXM7Cj4gKwo+ICsgICAgICAgLyogQ2hlY2sgZm9yIHZhbGlkIGZlYXR1cmUgYml0cyAqLwo+ICsg
ICAgICAgbmVnb19mZWF0dXJlcyA9IGZlYXR1cmVzICYgbGU2NF90b19jcHUocGRzdi0+dmRwYV9h
dXgtPmlkZW50Lmh3X2ZlYXR1cmVzKTsKPiArICAgICAgIG1pc3NpbmcgPSBwZHN2LT5yZXFfZmVh
dHVyZXMgJiB+bmVnb19mZWF0dXJlczsKPiArICAgICAgIGlmIChtaXNzaW5nKSB7Cj4gKyAgICAg
ICAgICAgICAgIGRldl9lcnIoZGV2LCAiQ2FuJ3Qgc3VwcG9ydCBhbGwgcmVxdWVzdGVkIGZlYXR1
cmVzIGluICUjbGx4LCBtaXNzaW5nICUjbGx4IGZlYXR1cmVzXG4iLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIHBkc3YtPnJlcV9mZWF0dXJlcywgbWlzc2luZyk7Cj4gKyAgICAgICAgICAgICAg
IHJldHVybiAtRU9QTk9UU1VQUDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBkZXZfZGJnKGRl
diwgIiVzOiAlI2xseCA9PiAlI2xseFxuIiwKPiArICAgICAgICAgICAgICAgX19mdW5jX18sIHBk
c3YtPmFjdHVhbF9mZWF0dXJlcywgbmVnb19mZWF0dXJlcyk7Cj4gKwo+ICsgICAgICAgaWYgKHBk
c3YtPmFjdHVhbF9mZWF0dXJlcyA9PSBuZWdvX2ZlYXR1cmVzKQo+ICsgICAgICAgICAgICAgICBy
ZXR1cm4gMDsKPiArCj4gKyAgICAgICB2cF9tb2Rlcm5fc2V0X2ZlYXR1cmVzKCZwZHN2LT52ZHBh
X2F1eC0+dmRfbWRldiwgbmVnb19mZWF0dXJlcyk7Cj4gKyAgICAgICBwZHN2LT5hY3R1YWxfZmVh
dHVyZXMgPSBuZWdvX2ZlYXR1cmVzOwo+ICsKPiArICAgICAgIHJldHVybiAwOwo+ICt9Cj4gKwo+
ICtzdGF0aWMgdTY0IHBkc192ZHBhX2dldF9kcml2ZXJfZmVhdHVyZXMoc3RydWN0IHZkcGFfZGV2
aWNlICp2ZHBhX2RldikKPiArewo+ICsgICAgICAgc3RydWN0IHBkc192ZHBhX2RldmljZSAqcGRz
diA9IHZkcGFfdG9fcGRzdih2ZHBhX2Rldik7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHBkc3YtPmFj
dHVhbF9mZWF0dXJlczsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgcGRzX3ZkcGFfc2V0X2NvbmZp
Z19jYihzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGFfZGV2LAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc3RydWN0IHZkcGFfY2FsbGJhY2sgKmNiKQo+ICt7Cj4gKyAgICAgICBz
dHJ1Y3QgcGRzX3ZkcGFfZGV2aWNlICpwZHN2ID0gdmRwYV90b19wZHN2KHZkcGFfZGV2KTsKPiAr
Cj4gKyAgICAgICBwZHN2LT5jb25maWdfY2IuY2FsbGJhY2sgPSBjYi0+Y2FsbGJhY2s7Cj4gKyAg
ICAgICBwZHN2LT5jb25maWdfY2IucHJpdmF0ZSA9IGNiLT5wcml2YXRlOwo+ICt9Cj4gKwo+ICtz
dGF0aWMgdTE2IHBkc192ZHBhX2dldF92cV9udW1fbWF4KHN0cnVjdCB2ZHBhX2RldmljZSAqdmRw
YV9kZXYpCj4gK3sKPiArICAgICAgIHN0cnVjdCBwZHNfdmRwYV9kZXZpY2UgKnBkc3YgPSB2ZHBh
X3RvX3Bkc3YodmRwYV9kZXYpOwo+ICsKPiArICAgICAgIC8qIHFlbXUgaGFzIGFzc2VydCgpIHRo
YXQgdnFfbnVtX21heCA8PSBWSVJUUVVFVUVfTUFYX1NJWkUgKDEwMjQpICovCj4gKyAgICAgICBy
ZXR1cm4gbWluX3QodTE2LCAxMDI0LCBCSVQobGUxNl90b19jcHUocGRzdi0+dmRwYV9hdXgtPmlk
ZW50Lm1heF9xbGVuKSkpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdTMyIHBkc192ZHBhX2dldF9kZXZp
Y2VfaWQoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhX2RldikKPiArewo+ICsgICAgICAgcmV0dXJu
IFZJUlRJT19JRF9ORVQ7Cj4gK30KPiArCj4gK3N0YXRpYyB1MzIgcGRzX3ZkcGFfZ2V0X3ZlbmRv
cl9pZChzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGFfZGV2KQo+ICt7Cj4gKyAgICAgICByZXR1cm4g
UENJX1ZFTkRPUl9JRF9QRU5TQU5ETzsKPiArfQo+ICsKPiArc3RhdGljIHU4IHBkc192ZHBhX2dl
dF9zdGF0dXMoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhX2RldikKPiArewo+ICsgICAgICAgc3Ry
dWN0IHBkc192ZHBhX2RldmljZSAqcGRzdiA9IHZkcGFfdG9fcGRzdih2ZHBhX2Rldik7Cj4gKwo+
ICsgICAgICAgcmV0dXJuIHZwX21vZGVybl9nZXRfc3RhdHVzKCZwZHN2LT52ZHBhX2F1eC0+dmRf
bWRldik7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHBkc192ZHBhX3NldF9zdGF0dXMoc3RydWN0
IHZkcGFfZGV2aWNlICp2ZHBhX2RldiwgdTggc3RhdHVzKQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3Qg
cGRzX3ZkcGFfZGV2aWNlICpwZHN2ID0gdmRwYV90b19wZHN2KHZkcGFfZGV2KTsKPiArCj4gKyAg
ICAgICB2cF9tb2Rlcm5fc2V0X3N0YXR1cygmcGRzdi0+dmRwYV9hdXgtPnZkX21kZXYsIHN0YXR1
cyk7Cj4gKwo+ICsgICAgICAgLyogTm90ZTogc3RpbGwgd29ya2luZyB3aXRoIEZXIG9uIHRoZSBu
ZWVkIGZvciB0aGlzIHJlc2V0IGNtZCAqLwo+ICsgICAgICAgaWYgKHN0YXR1cyA9PSAwKQo+ICsg
ICAgICAgICAgICAgICBwZHNfdmRwYV9jbWRfcmVzZXQocGRzdik7Cj4gK30KPiArCj4gK3N0YXRp
YyBpbnQgcGRzX3ZkcGFfcmVzZXQoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhX2RldikKPiArewo+
ICsgICAgICAgc3RydWN0IHBkc192ZHBhX2RldmljZSAqcGRzdiA9IHZkcGFfdG9fcGRzdih2ZHBh
X2Rldik7Cj4gKyAgICAgICBzdHJ1Y3QgZGV2aWNlICpkZXY7Cj4gKyAgICAgICBpbnQgZXJyID0g
MDsKPiArICAgICAgIHU4IHN0YXR1czsKPiArICAgICAgIGludCBpOwo+ICsKPiArICAgICAgIGRl
diA9ICZwZHN2LT52ZHBhX2F1eC0+cGFkZXYtPmF1eF9kZXYuZGV2Owo+ICsgICAgICAgc3RhdHVz
ID0gcGRzX3ZkcGFfZ2V0X3N0YXR1cyh2ZHBhX2Rldik7Cj4gKwo+ICsgICAgICAgaWYgKHN0YXR1
cyA9PSAwKQo+ICsgICAgICAgICAgICAgICByZXR1cm4gMDsKPiArCj4gKyAgICAgICBpZiAoc3Rh
dHVzICYgVklSVElPX0NPTkZJR19TX0RSSVZFUl9PSykgewo+ICsgICAgICAgICAgICAgICAvKiBS
ZXNldCB0aGUgdnFzICovCj4gKyAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBwZHN2LT5u
dW1fdnFzICYmICFlcnI7IGkrKykgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IHBk
c192ZHBhX2NtZF9yZXNldF92cShwZHN2LCBpKTsKPiArICAgICAgICAgICAgICAgICAgICAgICBp
ZiAoZXJyKQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2X2VycihkZXYsICIl
czogcmVzZXRfdnEgZmFpbGVkIHFpZCAlZDogJXBlXG4iLAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBfX2Z1bmNfXywgaSwgRVJSX1BUUihlcnIpKTsKPiArICAgICAg
ICAgICAgICAgICAgICAgICBwZHNfdmRwYV9yZWxlYXNlX2lycShwZHN2LCBpKTsKPiArICAgICAg
ICAgICAgICAgICAgICAgICBtZW1zZXQoJnBkc3YtPnZxc1tpXSwgMCwgc2l6ZW9mKHBkc3YtPnZx
c1swXSkpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIHBkc3YtPnZxc1tpXS5yZWFkeSA9IGZh
bHNlOwo+ICsgICAgICAgICAgICAgICB9Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgcGRzX3Zk
cGFfc2V0X3N0YXR1cyh2ZHBhX2RldiwgMCk7Cj4gKwo+ICsgICAgICAgcmV0dXJuIDA7Cj4gK30K
PiArCj4gK3N0YXRpYyBzaXplX3QgcGRzX3ZkcGFfZ2V0X2NvbmZpZ19zaXplKHN0cnVjdCB2ZHBh
X2RldmljZSAqdmRwYV9kZXYpCj4gK3sKPiArICAgICAgIHJldHVybiBzaXplb2Yoc3RydWN0IHZp
cnRpb19uZXRfY29uZmlnKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgcGRzX3ZkcGFfZ2V0X2Nv
bmZpZyhzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGFfZGV2LAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdW5zaWduZWQgaW50IG9mZnNldCwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHZvaWQgKmJ1ZiwgdW5zaWduZWQgaW50IGxlbikKPiArewo+ICsgICAgICAgc3Ry
dWN0IHBkc192ZHBhX2RldmljZSAqcGRzdiA9IHZkcGFfdG9fcGRzdih2ZHBhX2Rldik7Cj4gKyAg
ICAgICB2b2lkIF9faW9tZW0gKmRldmljZTsKPiArCj4gKyAgICAgICBpZiAob2Zmc2V0ICsgbGVu
ID4gc2l6ZW9mKHN0cnVjdCB2aXJ0aW9fbmV0X2NvbmZpZykpIHsKPiArICAgICAgICAgICAgICAg
V0FSTih0cnVlLCAiJXM6IGJhZCByZWFkLCBvZmZzZXQgJWQgbGVuICVkXG4iLCBfX2Z1bmNfXywg
b2Zmc2V0LCBsZW4pOwo+ICsgICAgICAgICAgICAgICByZXR1cm47Cj4gKyAgICAgICB9Cj4gKwo+
ICsgICAgICAgZGV2aWNlID0gcGRzdi0+dmRwYV9hdXgtPnZkX21kZXYuZGV2aWNlOwo+ICsgICAg
ICAgbWVtY3B5X2Zyb21pbyhidWYsIGRldmljZSArIG9mZnNldCwgbGVuKTsKPiArfQo+ICsKPiAr
c3RhdGljIHZvaWQgcGRzX3ZkcGFfc2V0X2NvbmZpZyhzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZkcGFf
ZGV2LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IG9mZnNl
dCwgY29uc3Qgdm9pZCAqYnVmLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5z
aWduZWQgaW50IGxlbikKPiArewo+ICsgICAgICAgc3RydWN0IHBkc192ZHBhX2RldmljZSAqcGRz
diA9IHZkcGFfdG9fcGRzdih2ZHBhX2Rldik7Cj4gKyAgICAgICB2b2lkIF9faW9tZW0gKmRldmlj
ZTsKPiArCj4gKyAgICAgICBpZiAob2Zmc2V0ICsgbGVuID4gc2l6ZW9mKHN0cnVjdCB2aXJ0aW9f
bmV0X2NvbmZpZykpIHsKPiArICAgICAgICAgICAgICAgV0FSTih0cnVlLCAiJXM6IGJhZCByZWFk
LCBvZmZzZXQgJWQgbGVuICVkXG4iLCBfX2Z1bmNfXywgb2Zmc2V0LCBsZW4pOwo+ICsgICAgICAg
ICAgICAgICByZXR1cm47Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgZGV2aWNlID0gcGRzdi0+
dmRwYV9hdXgtPnZkX21kZXYuZGV2aWNlOwo+ICsgICAgICAgbWVtY3B5X3RvaW8oZGV2aWNlICsg
b2Zmc2V0LCBidWYsIGxlbik7Cj4gK30KPiArCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3QgdmRwYV9j
b25maWdfb3BzIHBkc192ZHBhX29wcyA9IHsKPiArICAgICAgIC5zZXRfdnFfYWRkcmVzcyAgICAg
ICAgID0gcGRzX3ZkcGFfc2V0X3ZxX2FkZHJlc3MsCj4gKyAgICAgICAuc2V0X3ZxX251bSAgICAg
ICAgICAgICA9IHBkc192ZHBhX3NldF92cV9udW0sCj4gKyAgICAgICAua2lja192cSAgICAgICAg
ICAgICAgICA9IHBkc192ZHBhX2tpY2tfdnEsCj4gKyAgICAgICAuc2V0X3ZxX2NiICAgICAgICAg
ICAgICA9IHBkc192ZHBhX3NldF92cV9jYiwKPiArICAgICAgIC5zZXRfdnFfcmVhZHkgICAgICAg
ICAgID0gcGRzX3ZkcGFfc2V0X3ZxX3JlYWR5LAo+ICsgICAgICAgLmdldF92cV9yZWFkeSAgICAg
ICAgICAgPSBwZHNfdmRwYV9nZXRfdnFfcmVhZHksCj4gKyAgICAgICAuc2V0X3ZxX3N0YXRlICAg
ICAgICAgICA9IHBkc192ZHBhX3NldF92cV9zdGF0ZSwKPiArICAgICAgIC5nZXRfdnFfc3RhdGUg
ICAgICAgICAgID0gcGRzX3ZkcGFfZ2V0X3ZxX3N0YXRlLAo+ICsgICAgICAgLmdldF92cV9ub3Rp
ZmljYXRpb24gICAgPSBwZHNfdmRwYV9nZXRfdnFfbm90aWZpY2F0aW9uLAo+ICsgICAgICAgLmdl
dF92cV9pcnEgICAgICAgICAgICAgPSBwZHNfdmRwYV9nZXRfdnFfaXJxLAo+ICsgICAgICAgLmdl
dF92cV9hbGlnbiAgICAgICAgICAgPSBwZHNfdmRwYV9nZXRfdnFfYWxpZ24sCj4gKyAgICAgICAu
Z2V0X3ZxX2dyb3VwICAgICAgICAgICA9IHBkc192ZHBhX2dldF92cV9ncm91cCwKPiArCj4gKyAg
ICAgICAuZ2V0X2RldmljZV9mZWF0dXJlcyAgICA9IHBkc192ZHBhX2dldF9kZXZpY2VfZmVhdHVy
ZXMsCj4gKyAgICAgICAuc2V0X2RyaXZlcl9mZWF0dXJlcyAgICA9IHBkc192ZHBhX3NldF9kcml2
ZXJfZmVhdHVyZXMsCj4gKyAgICAgICAuZ2V0X2RyaXZlcl9mZWF0dXJlcyAgICA9IHBkc192ZHBh
X2dldF9kcml2ZXJfZmVhdHVyZXMsCj4gKyAgICAgICAuc2V0X2NvbmZpZ19jYiAgICAgICAgICA9
IHBkc192ZHBhX3NldF9jb25maWdfY2IsCj4gKyAgICAgICAuZ2V0X3ZxX251bV9tYXggICAgICAg
ICA9IHBkc192ZHBhX2dldF92cV9udW1fbWF4LAo+ICsgICAgICAgLmdldF9kZXZpY2VfaWQgICAg
ICAgICAgPSBwZHNfdmRwYV9nZXRfZGV2aWNlX2lkLAo+ICsgICAgICAgLmdldF92ZW5kb3JfaWQg
ICAgICAgICAgPSBwZHNfdmRwYV9nZXRfdmVuZG9yX2lkLAo+ICsgICAgICAgLmdldF9zdGF0dXMg
ICAgICAgICAgICAgPSBwZHNfdmRwYV9nZXRfc3RhdHVzLAo+ICsgICAgICAgLnNldF9zdGF0dXMg
ICAgICAgICAgICAgPSBwZHNfdmRwYV9zZXRfc3RhdHVzLAo+ICsgICAgICAgLnJlc2V0ICAgICAg
ICAgICAgICAgICAgPSBwZHNfdmRwYV9yZXNldCwKPiArICAgICAgIC5nZXRfY29uZmlnX3NpemUg
ICAgICAgID0gcGRzX3ZkcGFfZ2V0X2NvbmZpZ19zaXplLAo+ICsgICAgICAgLmdldF9jb25maWcg
ICAgICAgICAgICAgPSBwZHNfdmRwYV9nZXRfY29uZmlnLAo+ICsgICAgICAgLnNldF9jb25maWcg
ICAgICAgICAgICAgPSBwZHNfdmRwYV9zZXRfY29uZmlnLAo+ICt9Owo+ICBzdGF0aWMgc3RydWN0
IHZpcnRpb19kZXZpY2VfaWQgcGRzX3ZkcGFfaWRfdGFibGVbXSA9IHsKPiAgICAgICAgIHtWSVJU
SU9fSURfTkVULCBWSVJUSU9fREVWX0FOWV9JRH0sCj4gICAgICAgICB7MH0sCj4gQEAgLTIxLDEy
ICs0MjEsMTQyIEBAIHN0YXRpYyBzdHJ1Y3QgdmlydGlvX2RldmljZV9pZCBwZHNfdmRwYV9pZF90
YWJsZVtdID0gewo+ICBzdGF0aWMgaW50IHBkc192ZHBhX2Rldl9hZGQoc3RydWN0IHZkcGFfbWdt
dF9kZXYgKm1kZXYsIGNvbnN0IGNoYXIgKm5hbWUsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGNvbnN0IHN0cnVjdCB2ZHBhX2Rldl9zZXRfY29uZmlnICphZGRfY29uZmlnKQo+ICB7Cj4g
LSAgICAgICByZXR1cm4gLUVPUE5PVFNVUFA7Cj4gKyAgICAgICBzdHJ1Y3QgcGRzX3ZkcGFfYXV4
ICp2ZHBhX2F1eDsKPiArICAgICAgIHN0cnVjdCBwZHNfdmRwYV9kZXZpY2UgKnBkc3Y7Cj4gKyAg
ICAgICBzdHJ1Y3QgdmRwYV9tZ210X2RldiAqbWdtdDsKPiArICAgICAgIHUxNiBmd19tYXhfdnFz
LCB2cV9wYWlyczsKPiArICAgICAgIHN0cnVjdCBkZXZpY2UgKmRtYV9kZXY7Cj4gKyAgICAgICBz
dHJ1Y3QgcGNpX2RldiAqcGRldjsKPiArICAgICAgIHN0cnVjdCBkZXZpY2UgKmRldjsKPiArICAg
ICAgIHU4IG1hY1tFVEhfQUxFTl07Cj4gKyAgICAgICBpbnQgZXJyOwo+ICsgICAgICAgaW50IGk7
Cj4gKwo+ICsgICAgICAgdmRwYV9hdXggPSBjb250YWluZXJfb2YobWRldiwgc3RydWN0IHBkc192
ZHBhX2F1eCwgdmRwYV9tZGV2KTsKPiArICAgICAgIGRldiA9ICZ2ZHBhX2F1eC0+cGFkZXYtPmF1
eF9kZXYuZGV2Owo+ICsgICAgICAgbWdtdCA9ICZ2ZHBhX2F1eC0+dmRwYV9tZGV2Owo+ICsKPiAr
ICAgICAgIGlmICh2ZHBhX2F1eC0+cGRzdikgewo+ICsgICAgICAgICAgICAgICBkZXZfd2Fybihk
ZXYsICJNdWx0aXBsZSB2RFBBIGRldmljZXMgb24gYSBWRiBpcyBub3Qgc3VwcG9ydGVkLlxuIik7
Cj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRU9QTk9UU1VQUDsKPiArICAgICAgIH0KPiArCj4g
KyAgICAgICBwZHN2ID0gdmRwYV9hbGxvY19kZXZpY2Uoc3RydWN0IHBkc192ZHBhX2RldmljZSwg
dmRwYV9kZXYsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2LCAmcGRzX3Zk
cGFfb3BzLCAxLCAxLCBuYW1lLCBmYWxzZSk7Cj4gKyAgICAgICBpZiAoSVNfRVJSKHBkc3YpKSB7
Cj4gKyAgICAgICAgICAgICAgIGRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIGFsbG9jYXRlIHZEUEEg
c3RydWN0dXJlOiAlcGVcbiIsIHBkc3YpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gUFRSX0VS
UihwZHN2KTsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICB2ZHBhX2F1eC0+cGRzdiA9IHBkc3Y7
Cj4gKyAgICAgICBwZHN2LT52ZHBhX2F1eCA9IHZkcGFfYXV4Owo+ICsKPiArICAgICAgIHBkZXYg
PSB2ZHBhX2F1eC0+cGFkZXYtPnZmX3BkZXY7Cj4gKyAgICAgICBkbWFfZGV2ID0gJnBkZXYtPmRl
djsKPiArICAgICAgIHBkc3YtPnZkcGFfZGV2LmRtYV9kZXYgPSBkbWFfZGV2Owo+ICsKPiArICAg
ICAgIGVyciA9IHBkc192ZHBhX2NtZF9yZXNldChwZHN2KTsKPiArICAgICAgIGlmIChlcnIpIHsK
PiArICAgICAgICAgICAgICAgZGV2X2VycihkZXYsICJGYWlsZWQgdG8gcmVzZXQgaHc6ICVwZVxu
IiwgRVJSX1BUUihlcnIpKTsKPiArICAgICAgICAgICAgICAgZ290byBlcnJfdW5tYXA7Cj4gKyAg
ICAgICB9Cj4gKwo+ICsgICAgICAgZXJyID0gcGRzX3ZkcGFfaW5pdF9odyhwZHN2KTsKPiArICAg
ICAgIGlmIChlcnIpIHsKPiArICAgICAgICAgICAgICAgZGV2X2VycihkZXYsICJGYWlsZWQgdG8g
aW5pdCBodzogJXBlXG4iLCBFUlJfUFRSKGVycikpOwo+ICsgICAgICAgICAgICAgICBnb3RvIGVy
cl91bm1hcDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBmd19tYXhfdnFzID0gbGUxNl90b19j
cHUocGRzdi0+dmRwYV9hdXgtPmlkZW50Lm1heF92cXMpOwo+ICsgICAgICAgdnFfcGFpcnMgPSBm
d19tYXhfdnFzIC8gMjsKPiArCj4gKyAgICAgICAvKiBNYWtlIHN1cmUgd2UgaGF2ZSB0aGUgcXVl
dWVzIGJlaW5nIHJlcXVlc3RlZCAqLwo+ICsgICAgICAgaWYgKGFkZF9jb25maWctPm1hc2sgJiAo
MSA8PCBWRFBBX0FUVFJfREVWX05FVF9DRkdfTUFYX1ZRUCkpCj4gKyAgICAgICAgICAgICAgIHZx
X3BhaXJzID0gYWRkX2NvbmZpZy0+bmV0Lm1heF92cV9wYWlyczsKPiArCj4gKyAgICAgICBwZHN2
LT5udW1fdnFzID0gMiAqIHZxX3BhaXJzOwo+ICsgICAgICAgaWYgKG1nbXQtPnN1cHBvcnRlZF9m
ZWF0dXJlcyAmIEJJVF9VTEwoVklSVElPX05FVF9GX0NUUkxfVlEpKQo+ICsgICAgICAgICAgICAg
ICBwZHN2LT5udW1fdnFzKys7Cj4gKwo+ICsgICAgICAgaWYgKHBkc3YtPm51bV92cXMgPiBmd19t
YXhfdnFzKSB7Cj4gKyAgICAgICAgICAgICAgIGRldl9lcnIoZGV2LCAiJXM6IHF1ZXVlIGNvdW50
IHJlcXVlc3RlZCAldSBncmVhdGVyIHRoYW4gbWF4ICV1XG4iLAo+ICsgICAgICAgICAgICAgICAg
ICAgICAgIF9fZnVuY19fLCBwZHN2LT5udW1fdnFzLCBmd19tYXhfdnFzKTsKPiArICAgICAgICAg
ICAgICAgZXJyID0gLUVOT1NQQzsKPiArICAgICAgICAgICAgICAgZ290byBlcnJfdW5tYXA7Cj4g
KyAgICAgICB9Cj4gKwo+ICsgICAgICAgaWYgKHBkc3YtPm51bV92cXMgIT0gZndfbWF4X3Zxcykg
ewo+ICsgICAgICAgICAgICAgICBlcnIgPSBwZHNfdmRwYV9jbWRfc2V0X21heF92cV9wYWlycyhw
ZHN2LCB2cV9wYWlycyk7Cj4gKyAgICAgICAgICAgICAgIGlmIChlcnIpIHsKPiArICAgICAgICAg
ICAgICAgICAgICAgICBkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBzZXQgbWF4X3ZxX3BhaXJzOiAl
cGVcbiIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFUlJfUFRSKGVycikpOwo+
ICsgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyX3VubWFwOwo+ICsgICAgICAgICAgICAg
ICB9Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgLyogU2V0IGEgbWFjLCBlaXRoZXIgZnJvbSB0
aGUgdXNlciBjb25maWcgaWYgcHJvdmlkZWQKPiArICAgICAgICAqIG9yIHNldCBhIHJhbmRvbSBt
YWMgaWYgZGVmYXVsdCBpcyAwMDouLjowMAo+ICsgICAgICAgICovCj4gKyAgICAgICBpZiAoYWRk
X2NvbmZpZy0+bWFzayAmIEJJVF9VTEwoVkRQQV9BVFRSX0RFVl9ORVRfQ0ZHX01BQ0FERFIpKSB7
Cj4gKyAgICAgICAgICAgICAgIGV0aGVyX2FkZHJfY29weShtYWMsIGFkZF9jb25maWctPm5ldC5t
YWMpOwo+ICsgICAgICAgICAgICAgICBwZHNfdmRwYV9jbWRfc2V0X21hYyhwZHN2LCBtYWMpOwo+
ICsgICAgICAgfSBlbHNlIHsKPiArICAgICAgICAgICAgICAgc3RydWN0IHZpcnRpb19uZXRfY29u
ZmlnIF9faW9tZW0gKnZjOwo+ICsKPiArICAgICAgICAgICAgICAgdmMgPSBwZHN2LT52ZHBhX2F1
eC0+dmRfbWRldi5kZXZpY2U7Cj4gKyAgICAgICAgICAgICAgIG1lbWNweV9mcm9taW8obWFjLCB2
Yy0+bWFjLCBzaXplb2YobWFjKSk7Cj4gKyAgICAgICAgICAgICAgIGlmIChpc196ZXJvX2V0aGVy
X2FkZHIobWFjKSkgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIGV0aF9yYW5kb21fYWRkciht
YWMpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIGRldl9pbmZvKGRldiwgInNldHRpbmcgcmFu
ZG9tIG1hYyAlcE1cbiIsIG1hYyk7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgcGRzX3ZkcGFf
Y21kX3NldF9tYWMocGRzdiwgbWFjKTsKPiArICAgICAgICAgICAgICAgfQo+ICsgICAgICAgfQo+
ICsKPiArICAgICAgIGZvciAoaSA9IDA7IGkgPCBwZHN2LT5udW1fdnFzOyBpKyspIHsKPiArICAg
ICAgICAgICAgICAgcGRzdi0+dnFzW2ldLnFpZCA9IGk7Cj4gKyAgICAgICAgICAgICAgIHBkc3Yt
PnZxc1tpXS5wZHN2ID0gcGRzdjsKPiArICAgICAgICAgICAgICAgcGRzdi0+dnFzW2ldLmlycSA9
IFZJUlRJT19NU0lfTk9fVkVDVE9SOwo+ICsgICAgICAgICAgICAgICBwZHN2LT52cXNbaV0ubm90
aWZ5ID0gdnBfbW9kZXJuX21hcF92cV9ub3RpZnkoJnBkc3YtPnZkcGFfYXV4LT52ZF9tZGV2LAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgaSwgJnBkc3YtPnZxc1tpXS5ub3RpZnlfcGEpOwo+ICsgICAgICAgfQo+ICsKPiArICAg
ICAgIHBkc3YtPnZkcGFfZGV2Lm1kZXYgPSAmdmRwYV9hdXgtPnZkcGFfbWRldjsKPiArCj4gKyAg
ICAgICAvKiBXZSB1c2UgdGhlIF92ZHBhX3JlZ2lzdGVyX2RldmljZSgpIGNhbGwgcmF0aGVyIHRo
YW4gdGhlCj4gKyAgICAgICAgKiB2ZHBhX3JlZ2lzdGVyX2RldmljZSgpIHRvIGF2b2lkIGEgZGVh
ZGxvY2sgYmVjYXVzZSBvdXIKPiArICAgICAgICAqIGRldl9hZGQoKSBpcyBjYWxsZWQgd2l0aCB0
aGUgdmRwYV9kZXZfbG9jayBhbHJlYWR5IHNldAo+ICsgICAgICAgICogYnkgdmRwYV9ubF9jbWRf
ZGV2X2FkZF9zZXRfZG9pdCgpCj4gKyAgICAgICAgKi8KPiArICAgICAgIGVyciA9IF92ZHBhX3Jl
Z2lzdGVyX2RldmljZSgmcGRzdi0+dmRwYV9kZXYsIHBkc3YtPm51bV92cXMpOwo+ICsgICAgICAg
aWYgKGVycikgewo+ICsgICAgICAgICAgICAgICBkZXZfZXJyKGRldiwgIkZhaWxlZCB0byByZWdp
c3RlciB0byB2RFBBIGJ1czogJXBlXG4iLCBFUlJfUFRSKGVycikpOwo+ICsgICAgICAgICAgICAg
ICBnb3RvIGVycl91bm1hcDsKPiArICAgICAgIH0KPiArCj4gKyAgICAgICBwZHNfdmRwYV9kZWJ1
Z2ZzX2FkZF92ZHBhZGV2KHZkcGFfYXV4KTsKPiArCj4gKyAgICAgICByZXR1cm4gMDsKPiArCj4g
K2Vycl91bm1hcDoKPiArICAgICAgIHB1dF9kZXZpY2UoJnBkc3YtPnZkcGFfZGV2LmRldik7Cj4g
KyAgICAgICB2ZHBhX2F1eC0+cGRzdiA9IE5VTEw7Cj4gKyAgICAgICByZXR1cm4gZXJyOwo+ICB9
Cj4KPiAgc3RhdGljIHZvaWQgcGRzX3ZkcGFfZGV2X2RlbChzdHJ1Y3QgdmRwYV9tZ210X2RldiAq
bWRldiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2ZHBhX2RldmljZSAq
dmRwYV9kZXYpCj4gIHsKPiArICAgICAgIHN0cnVjdCBwZHNfdmRwYV9hdXggKnZkcGFfYXV4Owo+
ICsKPiArICAgICAgIHZkcGFfYXV4ID0gY29udGFpbmVyX29mKG1kZXYsIHN0cnVjdCBwZHNfdmRw
YV9hdXgsIHZkcGFfbWRldik7Cj4gKyAgICAgICBfdmRwYV91bnJlZ2lzdGVyX2RldmljZSh2ZHBh
X2Rldik7Cj4gKwo+ICsgICAgICAgcGRzX3ZkcGFfY21kX3Jlc2V0KHZkcGFfYXV4LT5wZHN2KTsK
PiArICAgICAgIHBkc192ZHBhX2RlYnVnZnNfcmVzZXRfdmRwYWRldih2ZHBhX2F1eCk7Cj4gKwo+
ICsgICAgICAgdmRwYV9hdXgtPnBkc3YgPSBOVUxMOwo+ICsKPiArICAgICAgIGRldl9pbmZvKCZ2
ZHBhX2F1eC0+cGFkZXYtPmF1eF9kZXYuZGV2LCAiUmVtb3ZlZCB2ZHBhIGRldmljZVxuIik7Cj4g
IH0KPgo+ICBzdGF0aWMgY29uc3Qgc3RydWN0IHZkcGFfbWdtdGRldl9vcHMgcGRzX3ZkcGFfbWdt
dF9kZXZfb3BzID0gewo+IC0tCj4gMi4xNy4xCj4KCgpfX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXwpWaXJ0dWFsaXphdGlvbiBtYWlsaW5nIGxpc3QKVmlydHVh
bGl6YXRpb25AbGlzdHMubGludXgtZm91bmRhdGlvbi5vcmcKaHR0cHM6Ly9saXN0cy5saW51eGZv
dW5kYXRpb24ub3JnL21haWxtYW4vbGlzdGluZm8vdmlydHVhbGl6YXRpb24=

