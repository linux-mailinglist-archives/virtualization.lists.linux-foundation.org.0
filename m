Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp4.osuosl.org (smtp4.osuosl.org [IPv6:2605:bc80:3010::137])
	by mail.lfdr.de (Postfix) with ESMTPS id B09427D08CB
	for <lists.virtualization@lfdr.de>; Fri, 20 Oct 2023 08:51:37 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp4.osuosl.org (Postfix) with ESMTP id A7C4D4BB06;
	Fri, 20 Oct 2023 06:51:35 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org A7C4D4BB06
Authentication-Results: smtp4.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=hS7YSZgG
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
	by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id saSqi19sSRpa; Fri, 20 Oct 2023 06:51:34 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp4.osuosl.org (Postfix) with ESMTPS id 133514BE77;
	Fri, 20 Oct 2023 06:51:34 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 133514BE77
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 4A4F0C008C;
	Fri, 20 Oct 2023 06:51:33 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 8141AC0032
 for <virtualization@lists.linux-foundation.org>;
 Fri, 20 Oct 2023 06:51:31 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id 5B66B4BA7C
 for <virtualization@lists.linux-foundation.org>;
 Fri, 20 Oct 2023 06:51:31 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 5B66B4BA7C
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id IZ_Uo9WDOSph
 for <virtualization@lists.linux-foundation.org>;
 Fri, 20 Oct 2023 06:51:30 +0000 (UTC)
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp4.osuosl.org (Postfix) with ESMTPS id 26E104BE77
 for <virtualization@lists.linux-foundation.org>;
 Fri, 20 Oct 2023 06:51:30 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 26E104BE77
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1697784689;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=jy9ts7HKnjoFz7fQ778FA+/tkscazdJPl/wCGXjdUow=;
 b=hS7YSZgGfdpM1St4Ou6evZ46HvCkLBQ8nCEN3797FHJLg32sbYmcIQ6XuktSZObpGceX5h
 5lU+jAbYL1QcgjLzEiJg5cRyjo4P97t8wU4pYvuXVeVOlQFyDdMV1ZlBTyq7oG0cwvfP/C
 K4S6lp8X8dItOA6t/aJ/lb6FjNhrNuI=
Received: from mail-lf1-f71.google.com (mail-lf1-f71.google.com
 [209.85.167.71]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-498-xth6mLXuOaWtZHdfpq3saQ-1; Fri, 20 Oct 2023 02:51:27 -0400
X-MC-Unique: xth6mLXuOaWtZHdfpq3saQ-1
Received: by mail-lf1-f71.google.com with SMTP id
 2adb3069b0e04-5079fd9754cso466579e87.0
 for <virtualization@lists.linux-foundation.org>;
 Thu, 19 Oct 2023 23:51:27 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1697784686; x=1698389486;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=jy9ts7HKnjoFz7fQ778FA+/tkscazdJPl/wCGXjdUow=;
 b=fVWnE7Zoex4d3Ru7eHIryrrhZbnG4w329Jo0UDP9gf+2GAZ7voc5/8QEW/hqSxJrov
 XlMgZ/Jg80X/FdnMKWgSrNCiuZyjt5o2bELXc0FOQofo/a+/cP940G2KqiMdUvZQjFaS
 xLG+QP6coLgqvtwk2N4dZi2f3xyN1159tis7/HxTkJpkAMWn2OGVhP9Y//6yQAVGC21+
 a7SKTAtjUEPToRFUbI16MeQZ6MO2taHrUxftoVHArUsGN8Q5oB0EuA8skExh7tZrPH0Z
 h0WSRKXvutaw0JxcBwJDCpx+vSgbtJ6i/2D0YFupc+BfiPgzeJVlBTEqVvcLkPrWvfkd
 wuGg==
X-Gm-Message-State: AOJu0YwM1SNtChj4WbBwlsT+SSGYBX8ldhu/MAd9EwgKjR9Yb9IUgqNx
 Lm0lLimtON7TgEgoNFW/NHFlNF6X3E68rlL8n+rhx9A1nJysjHlO0ZdaE3JckyXy96IbrrN71UG
 4FnFPyUn/x6VqcRUIxxBkxj31x9ojKVibwAcvfxzKQGWqjLspi9qmlgEEGA==
X-Received: by 2002:a19:7411:0:b0:502:a4f4:ced9 with SMTP id
 v17-20020a197411000000b00502a4f4ced9mr581270lfe.62.1697784686229; 
 Thu, 19 Oct 2023 23:51:26 -0700 (PDT)
X-Google-Smtp-Source: AGHT+IEHLoFKQYUFzAfSKu+SNiTuWJlECMqPfiv9geD75cR3oqj1Hu33zdL1TA6rkswu8ps3SOVJErytNJzdIFTNvwI=
X-Received: by 2002:a19:7411:0:b0:502:a4f4:ced9 with SMTP id
 v17-20020a197411000000b00502a4f4ced9mr581247lfe.62.1697784685836; Thu, 19 Oct
 2023 23:51:25 -0700 (PDT)
MIME-Version: 1.0
References: <20231016120033.26933-1-xuanzhuo@linux.alibaba.com>
 <20231016120033.26933-10-xuanzhuo@linux.alibaba.com>
In-Reply-To: <20231016120033.26933-10-xuanzhuo@linux.alibaba.com>
From: Jason Wang <jasowang@redhat.com>
Date: Fri, 20 Oct 2023 14:51:15 +0800
Message-ID: <CACGkMEstVnDZ03E0s_+kOAkHy1wdTxG716gFGfR2mwNEFrpiKQ@mail.gmail.com>
Subject: Re: [PATCH net-next v1 09/19] virtio_net: xsk: bind/unbind xsk
To: Xuan Zhuo <xuanzhuo@linux.alibaba.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: Jesper Dangaard Brouer <hawk@kernel.org>,
 Daniel Borkmann <daniel@iogearbox.net>, "Michael S. Tsirkin" <mst@redhat.com>,
 netdev@vger.kernel.org, John Fastabend <john.fastabend@gmail.com>,
 Alexei Starovoitov <ast@kernel.org>, virtualization@lists.linux-foundation.org,
 Eric Dumazet <edumazet@google.com>, Jakub Kicinski <kuba@kernel.org>,
 bpf@vger.kernel.org, Paolo Abeni <pabeni@redhat.com>,
 "David S. Miller" <davem@davemloft.net>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gTW9uLCBPY3QgMTYsIDIwMjMgYXQgODowMeKAr1BNIFh1YW4gWmh1byA8eHVhbnpodW9AbGlu
dXguYWxpYmFiYS5jb20+IHdyb3RlOgo+Cj4gVGhpcyBwYXRjaCBpbXBsZW1lbnQgdGhlIGxvZ2lj
IG9mIGJpbmQvdW5iaW5kIHhzayBwb29sIHRvIHNxIGFuZCBycS4KPgo+IFNpZ25lZC1vZmYtYnk6
IFh1YW4gWmh1byA8eHVhbnpodW9AbGludXguYWxpYmFiYS5jb20+Cj4gLS0tCj4gIGRyaXZlcnMv
bmV0L3ZpcnRpby9NYWtlZmlsZSAgICAgfCAgIDIgKy0KPiAgZHJpdmVycy9uZXQvdmlydGlvL21h
aW4uYyAgICAgICB8ICAxMCArLQo+ICBkcml2ZXJzL25ldC92aXJ0aW8vdmlydGlvX25ldC5oIHwg
IDE4ICsrKysKPiAgZHJpdmVycy9uZXQvdmlydGlvL3hzay5jICAgICAgICB8IDE4NiArKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKwo+ICBkcml2ZXJzL25ldC92aXJ0aW8veHNrLmggICAg
ICAgIHwgICA3ICsrCj4gIDUgZmlsZXMgY2hhbmdlZCwgMjE2IGluc2VydGlvbnMoKyksIDcgZGVs
ZXRpb25zKC0pCj4gIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL25ldC92aXJ0aW8veHNrLmMK
PiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvbmV0L3ZpcnRpby94c2suaAo+Cj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvbmV0L3ZpcnRpby9NYWtlZmlsZSBiL2RyaXZlcnMvbmV0L3ZpcnRpby9N
YWtlZmlsZQo+IGluZGV4IDE1ZWQ3Yzk3ZmQ0Zi4uOGMyYTg4NGQyZGJhIDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvbmV0L3ZpcnRpby9NYWtlZmlsZQo+ICsrKyBiL2RyaXZlcnMvbmV0L3ZpcnRpby9N
YWtlZmlsZQo+IEBAIC01LDQgKzUsNCBAQAo+Cj4gIG9iai0kKENPTkZJR19WSVJUSU9fTkVUKSAr
PSB2aXJ0aW9fbmV0Lm8KPgo+IC12aXJ0aW9fbmV0LXkgOj0gbWFpbi5vCj4gK3ZpcnRpb19uZXQt
eSA6PSBtYWluLm8geHNrLm8KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvdmlydGlvL21haW4u
YyBiL2RyaXZlcnMvbmV0L3ZpcnRpby9tYWluLmMKPiBpbmRleCAwMmQyNzEwMWZlZjEuLjM4NzMz
YTc4MmYxMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC92aXJ0aW8vbWFpbi5jCj4gKysrIGIv
ZHJpdmVycy9uZXQvdmlydGlvL21haW4uYwo+IEBAIC04LDcgKzgsNiBAQAo+ICAjaW5jbHVkZSA8
bGludXgvZXRoZXJkZXZpY2UuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgo+ICAjaW5j
bHVkZSA8bGludXgvdmlydGlvLmg+Cj4gLSNpbmNsdWRlIDxsaW51eC92aXJ0aW9fbmV0Lmg+Cj4g
ICNpbmNsdWRlIDxsaW51eC9icGYuaD4KPiAgI2luY2x1ZGUgPGxpbnV4L2JwZl90cmFjZS5oPgo+
ICAjaW5jbHVkZSA8bGludXgvc2NhdHRlcmxpc3QuaD4KPiBAQCAtMTM5LDkgKzEzOCw2IEBAIHN0
cnVjdCB2aXJ0aW9fbmV0X2NvbW1vbl9oZHIgewo+ICAgICAgICAgfTsKPiAgfTsKPgo+IC1zdGF0
aWMgdm9pZCB2aXJ0bmV0X3JxX2ZyZWVfdW51c2VkX2J1ZihzdHJ1Y3QgdmlydHF1ZXVlICp2cSwg
dm9pZCAqYnVmKTsKPiAtc3RhdGljIHZvaWQgdmlydG5ldF9zcV9mcmVlX3VudXNlZF9idWYoc3Ry
dWN0IHZpcnRxdWV1ZSAqdnEsIHZvaWQgKmJ1Zik7Cj4gLQo+ICBzdGF0aWMgdm9pZCAqeGRwX3Rv
X3B0cihzdHJ1Y3QgeGRwX2ZyYW1lICpwdHIpCj4gIHsKPiAgICAgICAgIHJldHVybiAodm9pZCAq
KSgodW5zaWduZWQgbG9uZylwdHIgfCBWSVJUSU9fWERQX0ZMQUcpOwo+IEBAIC0zNjY0LDYgKzM2
NjAsOCBAQCBzdGF0aWMgaW50IHZpcnRuZXRfeGRwKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsIHN0
cnVjdCBuZXRkZXZfYnBmICp4ZHApCj4gICAgICAgICBzd2l0Y2ggKHhkcC0+Y29tbWFuZCkgewo+
ICAgICAgICAgY2FzZSBYRFBfU0VUVVBfUFJPRzoKPiAgICAgICAgICAgICAgICAgcmV0dXJuIHZp
cnRuZXRfeGRwX3NldChkZXYsIHhkcC0+cHJvZywgeGRwLT5leHRhY2spOwo+ICsgICAgICAgY2Fz
ZSBYRFBfU0VUVVBfWFNLX1BPT0w6Cj4gKyAgICAgICAgICAgICAgIHJldHVybiB2aXJ0bmV0X3hz
a19wb29sX3NldHVwKGRldiwgeGRwKTsKPiAgICAgICAgIGRlZmF1bHQ6Cj4gICAgICAgICAgICAg
ICAgIHJldHVybiAtRUlOVkFMOwo+ICAgICAgICAgfQo+IEBAIC0zODQ5LDcgKzM4NDcsNyBAQCBz
dGF0aWMgdm9pZCBmcmVlX3JlY2VpdmVfcGFnZV9mcmFncyhzdHJ1Y3QgdmlydG5ldF9pbmZvICp2
aSkKPiAgICAgICAgICAgICAgICAgfQo+ICB9Cj4KPiAtc3RhdGljIHZvaWQgdmlydG5ldF9zcV9m
cmVlX3VudXNlZF9idWYoc3RydWN0IHZpcnRxdWV1ZSAqdnEsIHZvaWQgKmJ1ZikKPiArdm9pZCB2
aXJ0bmV0X3NxX2ZyZWVfdW51c2VkX2J1ZihzdHJ1Y3QgdmlydHF1ZXVlICp2cSwgdm9pZCAqYnVm
KQo+ICB7Cj4gICAgICAgICBpZiAoIXZpcnRuZXRfaXNfeGRwX2ZyYW1lKGJ1ZikpCj4gICAgICAg
ICAgICAgICAgIGRldl9rZnJlZV9za2IoYnVmKTsKPiBAQCAtMzg1Nyw3ICszODU1LDcgQEAgc3Rh
dGljIHZvaWQgdmlydG5ldF9zcV9mcmVlX3VudXNlZF9idWYoc3RydWN0IHZpcnRxdWV1ZSAqdnEs
IHZvaWQgKmJ1ZikKPiAgICAgICAgICAgICAgICAgeGRwX3JldHVybl9mcmFtZSh2aXJ0bmV0X3B0
cl90b194ZHAoYnVmKSk7Cj4gIH0KPgo+IC1zdGF0aWMgdm9pZCB2aXJ0bmV0X3JxX2ZyZWVfdW51
c2VkX2J1ZihzdHJ1Y3QgdmlydHF1ZXVlICp2cSwgdm9pZCAqYnVmKQo+ICt2b2lkIHZpcnRuZXRf
cnFfZnJlZV91bnVzZWRfYnVmKHN0cnVjdCB2aXJ0cXVldWUgKnZxLCB2b2lkICpidWYpCj4gIHsK
PiAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpID0gdnEtPnZkZXYtPnByaXY7Cj4gICAg
ICAgICBpbnQgaSA9IHZxMnJ4cSh2cSk7Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L3ZpcnRp
by92aXJ0aW9fbmV0LmggYi9kcml2ZXJzL25ldC92aXJ0aW8vdmlydGlvX25ldC5oCj4gaW5kZXgg
Y2M3NDI3NTZlMTlhLi45ZTY5YjZjNTkyMWIgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9uZXQvdmly
dGlvL3ZpcnRpb19uZXQuaAo+ICsrKyBiL2RyaXZlcnMvbmV0L3ZpcnRpby92aXJ0aW9fbmV0LmgK
PiBAQCAtNSw2ICs1LDggQEAKPgo+ICAjaW5jbHVkZSA8bGludXgvZXRodG9vbC5oPgo+ICAjaW5j
bHVkZSA8bGludXgvYXZlcmFnZS5oPgo+ICsjaW5jbHVkZSA8bGludXgvdmlydGlvX25ldC5oPgo+
ICsjaW5jbHVkZSA8bmV0L3hkcF9zb2NrX2Rydi5oPgo+Cj4gICNkZWZpbmUgVklSVElPX1hEUF9G
TEFHICAgICAgICBCSVQoMCkKPiAgI2RlZmluZSBWSVJUSU9fWE1JVF9EQVRBX01BU0sgKFZJUlRJ
T19YRFBfRkxBRykKPiBAQCAtOTQsNiArOTYsMTEgQEAgc3RydWN0IHZpcnRuZXRfc3Egewo+ICAg
ICAgICAgYm9vbCBkb19kbWE7Cj4KPiAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X3NxX2RtYV9oZWFk
IGRtYWluZm87Cj4gKyAgICAgICBzdHJ1Y3Qgewo+ICsgICAgICAgICAgICAgICBzdHJ1Y3QgeHNr
X2J1ZmZfcG9vbCBfX3JjdSAqcG9vbDsKPiArCj4gKyAgICAgICAgICAgICAgIGRtYV9hZGRyX3Qg
aGRyX2RtYV9hZGRyZXNzOwo+ICsgICAgICAgfSB4c2s7Cj4gIH07Cj4KPiAgLyogSW50ZXJuYWwg
cmVwcmVzZW50YXRpb24gb2YgYSByZWNlaXZlIHZpcnRxdWV1ZSAqLwo+IEBAIC0xMzQsNiArMTQx
LDEzIEBAIHN0cnVjdCB2aXJ0bmV0X3JxIHsKPgo+ICAgICAgICAgLyogRG8gZG1hIGJ5IHNlbGYg
Ki8KPiAgICAgICAgIGJvb2wgZG9fZG1hOwo+ICsKPiArICAgICAgIHN0cnVjdCB7Cj4gKyAgICAg
ICAgICAgICAgIHN0cnVjdCB4c2tfYnVmZl9wb29sIF9fcmN1ICpwb29sOwo+ICsKPiArICAgICAg
ICAgICAgICAgLyogeGRwIHJ4cSB1c2VkIGJ5IHhzayAqLwo+ICsgICAgICAgICAgICAgICBzdHJ1
Y3QgeGRwX3J4cV9pbmZvIHhkcF9yeHE7Cj4gKyAgICAgICB9IHhzazsKPiAgfTsKPgo+ICBzdHJ1
Y3QgdmlydG5ldF9pbmZvIHsKPiBAQCAtMjE4LDYgKzIzMiw4IEBAIHN0cnVjdCB2aXJ0bmV0X2lu
Zm8gewo+ICAgICAgICAgc3RydWN0IGZhaWxvdmVyICpmYWlsb3ZlcjsKPiAgfTsKPgo+ICsjaW5j
bHVkZSAieHNrLmgiCj4gKwoKQW55IHJlYXNvbiB3ZSBkb24ndCBkbyBpdCB3aXRoIG90aGVyIGhl
YWRlcnM/Cgo+ICBzdGF0aWMgaW5saW5lIGJvb2wgdmlydG5ldF9pc194ZHBfZnJhbWUodm9pZCAq
cHRyKQo+ICB7Cj4gICAgICAgICByZXR1cm4gKHVuc2lnbmVkIGxvbmcpcHRyICYgVklSVElPX1hE
UF9GTEFHOwo+IEBAIC0zMDgsNCArMzI0LDYgQEAgdm9pZCB2aXJ0bmV0X3J4X3BhdXNlKHN0cnVj
dCB2aXJ0bmV0X2luZm8gKnZpLCBzdHJ1Y3QgdmlydG5ldF9ycSAqcnEpOwo+ICB2b2lkIHZpcnRu
ZXRfcnhfcmVzdW1lKHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLCBzdHJ1Y3QgdmlydG5ldF9ycSAq
cnEpOwo+ICB2b2lkIHZpcnRuZXRfdHhfcGF1c2Uoc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksIHN0
cnVjdCB2aXJ0bmV0X3NxICpzcSk7Cj4gIHZvaWQgdmlydG5ldF90eF9yZXN1bWUoc3RydWN0IHZp
cnRuZXRfaW5mbyAqdmksIHN0cnVjdCB2aXJ0bmV0X3NxICpzcSk7Cj4gK3ZvaWQgdmlydG5ldF9z
cV9mcmVlX3VudXNlZF9idWYoc3RydWN0IHZpcnRxdWV1ZSAqdnEsIHZvaWQgKmJ1Zik7Cj4gK3Zv
aWQgdmlydG5ldF9ycV9mcmVlX3VudXNlZF9idWYoc3RydWN0IHZpcnRxdWV1ZSAqdnEsIHZvaWQg
KmJ1Zik7Cj4gICNlbmRpZgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC92aXJ0aW8veHNrLmMg
Yi9kcml2ZXJzL25ldC92aXJ0aW8veHNrLmMKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4
IDAwMDAwMDAwMDAwMC4uZGRkZDAxOTYyYTNmCj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZl
cnMvbmV0L3ZpcnRpby94c2suYwo+IEBAIC0wLDAgKzEsMTg2IEBACj4gKy8vIFNQRFgtTGljZW5z
ZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCj4gKy8qCj4gKyAqIHZpcnRpby1uZXQgeHNr
Cj4gKyAqLwo+ICsKPiArI2luY2x1ZGUgInZpcnRpb19uZXQuaCIKPiArCj4gK3N0YXRpYyBzdHJ1
Y3QgdmlydGlvX25ldF9oZHJfbXJnX3J4YnVmIHhza19oZHI7Cj4gKwo+ICtzdGF0aWMgaW50IHZp
cnRuZXRfcnFfYmluZF94c2tfcG9vbChzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwgc3RydWN0IHZp
cnRuZXRfcnEgKnJxLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVj
dCB4c2tfYnVmZl9wb29sICpwb29sKQo+ICt7Cj4gKyAgICAgICBpbnQgZXJyLCBxaW5kZXg7Cj4g
Kwo+ICsgICAgICAgcWluZGV4ID0gcnEgLSB2aS0+cnE7Cj4gKwo+ICsgICAgICAgaWYgKHBvb2wp
IHsKPiArICAgICAgICAgICAgICAgZXJyID0geGRwX3J4cV9pbmZvX3JlZygmcnEtPnhzay54ZHBf
cnhxLCB2aS0+ZGV2LCBxaW5kZXgsIHJxLT5uYXBpLm5hcGlfaWQpOwo+ICsgICAgICAgICAgICAg
ICBpZiAoZXJyIDwgMCkKPiArICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyOwo+ICsK
PiArICAgICAgICAgICAgICAgZXJyID0geGRwX3J4cV9pbmZvX3JlZ19tZW1fbW9kZWwoJnJxLT54
c2sueGRwX3J4cSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgTUVNX1RZUEVfWFNLX0JVRkZfUE9PTCwgTlVMTCk7Cj4gKyAgICAgICAgICAgICAgIGlm
IChlcnIgPCAwKSB7Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgeGRwX3J4cV9pbmZvX3VucmVn
KCZycS0+eHNrLnhkcF9yeHEpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnI7
Cj4gKyAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgICAgIHhza19wb29sX3NldF9y
eHFfaW5mbyhwb29sLCAmcnEtPnhzay54ZHBfcnhxKTsKPiArICAgICAgIH0gZWxzZSB7Cj4gKyAg
ICAgICAgICAgICAgIHhkcF9yeHFfaW5mb191bnJlZygmcnEtPnhzay54ZHBfcnhxKTsKPiArICAg
ICAgIH0KPiArCj4gKyAgICAgICB2aXJ0bmV0X3J4X3BhdXNlKHZpLCBycSk7Cj4gKwo+ICsgICAg
ICAgZXJyID0gdmlydHF1ZXVlX3Jlc2V0KHJxLT52cSwgdmlydG5ldF9ycV9mcmVlX3VudXNlZF9i
dWYpOwo+ICsgICAgICAgaWYgKGVycikKPiArICAgICAgICAgICAgICAgbmV0ZGV2X2Vycih2aS0+
ZGV2LCAicmVzZXQgcnggZmFpbDogcnggcXVldWUgaW5kZXg6ICVkIGVycjogJWRcbiIsIHFpbmRl
eCwgZXJyKTsKPiArCj4gKyAgICAgICBpZiAocG9vbCAmJiBlcnIpCj4gKyAgICAgICAgICAgICAg
IHhkcF9yeHFfaW5mb191bnJlZygmcnEtPnhzay54ZHBfcnhxKTsKPiArICAgICAgIGVsc2UKPiAr
ICAgICAgICAgICAgICAgcmN1X2Fzc2lnbl9wb2ludGVyKHJxLT54c2sucG9vbCwgcG9vbCk7Cj4g
Kwo+ICsgICAgICAgdmlydG5ldF9yeF9yZXN1bWUodmksIHJxKTsKPiArCj4gKyAgICAgICByZXR1
cm4gZXJyOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHZpcnRuZXRfc3FfYmluZF94c2tfcG9vbChz
dHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzdHJ1Y3QgdmlydG5ldF9zcSAqc3EsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc3RydWN0IHhza19idWZmX3Bvb2wgKnBvb2wpCj4gK3sKPiArICAgICAgIGludCBl
cnIsIHFpbmRleDsKPiArCj4gKyAgICAgICBxaW5kZXggPSBzcSAtIHZpLT5zcTsKPiArCj4gKyAg
ICAgICB2aXJ0bmV0X3R4X3BhdXNlKHZpLCBzcSk7Cj4gKwo+ICsgICAgICAgZXJyID0gdmlydHF1
ZXVlX3Jlc2V0KHNxLT52cSwgdmlydG5ldF9zcV9mcmVlX3VudXNlZF9idWYpOwo+ICsgICAgICAg
aWYgKGVycikKPiArICAgICAgICAgICAgICAgbmV0ZGV2X2Vycih2aS0+ZGV2LCAicmVzZXQgdHgg
ZmFpbDogdHggcXVldWUgaW5kZXg6ICVkIGVycjogJWRcbiIsIHFpbmRleCwgZXJyKTsKPiArCj4g
KyAgICAgICBpZiAocG9vbCkgewo+ICsgICAgICAgICAgICAgICBpZiAoIWVycikKPiArICAgICAg
ICAgICAgICAgICAgICAgICByY3VfYXNzaWduX3BvaW50ZXIoc3EtPnhzay5wb29sLCBwb29sKTsK
PiArICAgICAgIH0gZWxzZSB7Cj4gKyAgICAgICAgICAgICAgIHJjdV9hc3NpZ25fcG9pbnRlcihz
cS0+eHNrLnBvb2wsIE5VTEwpOwo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIHZpcnRuZXRfdHhf
cmVzdW1lKHZpLCBzcSk7Cj4gKwo+ICsgICAgICAgcmV0dXJuIGVycjsKPiArfQo+ICsKPiArc3Rh
dGljIGludCB2aXJ0bmV0X3hza19wb29sX2VuYWJsZShzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHhza19idWZmX3Bvb2wg
KnBvb2wsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1MTYgcWlkKQo+ICt7
Cj4gKyAgICAgICBzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSA9IG5ldGRldl9wcml2KGRldik7Cj4g
KyAgICAgICBzdHJ1Y3QgdmlydG5ldF9ycSAqcnE7Cj4gKyAgICAgICBzdHJ1Y3QgdmlydG5ldF9z
cSAqc3E7Cj4gKyAgICAgICBzdHJ1Y3QgZGV2aWNlICpkbWFfZGV2Owo+ICsgICAgICAgZG1hX2Fk
ZHJfdCBoZHJfZG1hOwo+ICsgICAgICAgaW50IGVycjsKPiArCj4gKyAgICAgICAvKiBJbiBiaWdf
cGFja2V0cyBtb2RlLCB4ZHAgY2Fubm90IHdvcmssIHNvIHRoZXJlIGlzIG5vIG5lZWQgdG8KPiAr
ICAgICAgICAqIGluaXRpYWxpemUgeHNrIG9mIHJxLgo+ICsgICAgICAgICovCj4gKyAgICAgICBp
ZiAodmktPmJpZ19wYWNrZXRzICYmICF2aS0+bWVyZ2VhYmxlX3J4X2J1ZnMpCj4gKyAgICAgICAg
ICAgICAgIHJldHVybiAtRU5PRU5UOwo+ICsKPiArICAgICAgIGlmIChxaWQgPj0gdmktPmN1cnJf
cXVldWVfcGFpcnMpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ICsKPiArICAg
ICAgIHNxID0gJnZpLT5zcVtxaWRdOwo+ICsgICAgICAgcnEgPSAmdmktPnJxW3FpZF07Cj4gKwo+
ICsgICAgICAgLyogeHNrIHR4IHplcm9jb3B5IGRlcGVuZCBvbiB0aGUgdHggbmFwaS4KPiArICAg
ICAgICAqCj4gKyAgICAgICAgKiBBbGwgeHNrIHBhY2tldHMgYXJlIGFjdHVhbGx5IGNvbnN1bWVk
IGFuZCBzZW50IG91dCBmcm9tIHRoZSB4c2sgdHgKPiArICAgICAgICAqIHF1ZXVlIHVuZGVyIHRo
ZSB0eCBuYXBpIG1lY2hhbmlzbS4KPiArICAgICAgICAqLwo+ICsgICAgICAgaWYgKCFzcS0+bmFw
aS53ZWlnaHQpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRVBFUk07Cj4gKwo+ICsgICAgICAg
aWYgKCFycS0+ZG9fZG1hIHx8ICFzcS0+ZG9fZG1hKQo+ICsgICAgICAgICAgICAgICByZXR1cm4g
LUVQRVJNOwo+ICsKPiArICAgICAgIGlmICh2aXJ0cXVldWVfZG1hX2RldihycS0+dnEpICE9IHZp
cnRxdWV1ZV9kbWFfZGV2KHNxLT52cSkpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRVBFUk07
CgpBbnkgcmVhc29uIHdlIG5lZWQgdGhpcyBjaGVjaz8gSXMgdGhlcmUgYW55IGNvZGUgdGhhdCBo
YXMgdGhpcwphc3N1bXB0aW9uPyBFLmcgZG1hIHN5bmMgaW4gWERQX1RYPwoKPiArCj4gKyAgICAg
ICBkbWFfZGV2ID0gdmlydHF1ZXVlX2RtYV9kZXYocnEtPnZxKTsKPiArICAgICAgIGlmICghZG1h
X2RldikKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FUEVSTTsKPiArCj4gKyAgICAgICBoZHJf
ZG1hID0gZG1hX21hcF9zaW5nbGUoZG1hX2RldiwgJnhza19oZHIsIHZpLT5oZHJfbGVuLCBETUFf
VE9fREVWSUNFKTsKPiArICAgICAgIGlmIChkbWFfbWFwcGluZ19lcnJvcihkbWFfZGV2LCBoZHJf
ZG1hKSkKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07Cj4gKwo+ICsgICAgICAgZXJy
ID0geHNrX3Bvb2xfZG1hX21hcChwb29sLCBkbWFfZGV2LCAwKTsKPiArICAgICAgIGlmIChlcnIp
Cj4gKyAgICAgICAgICAgICAgIGdvdG8gZXJyX3hza19tYXA7Cj4gKwo+ICsgICAgICAgZXJyID0g
dmlydG5ldF9ycV9iaW5kX3hza19wb29sKHZpLCBycSwgcG9vbCk7Cj4gKyAgICAgICBpZiAoZXJy
KQo+ICsgICAgICAgICAgICAgICBnb3RvIGVycl9ycTsKPiArCj4gKyAgICAgICBlcnIgPSB2aXJ0
bmV0X3NxX2JpbmRfeHNrX3Bvb2wodmksIHNxLCBwb29sKTsKPiArICAgICAgIGlmIChlcnIpCj4g
KyAgICAgICAgICAgICAgIGdvdG8gZXJyX3NxOwo+ICsKPiArICAgICAgIHNxLT54c2suaGRyX2Rt
YV9hZGRyZXNzID0gaGRyX2RtYTsKCkkgdGhpbmsgd2UgcHJvYmFibHkgbmVlZCBzb21lIGNvbW1l
bnRzIHRvIGV4cGxhaW4gd2h5IGEgc2luZ2xlIGhkciBjYW4Kd29yay4gTGlrZSBpdCBtZWFucyB3
ZSB1c2UgdGhlIHNhbWUgaGRyIGZvciBhbGwgWFNLIHBhY2tldHM/Cgo+ICsKPiArICAgICAgIHJl
dHVybiAwOwo+ICsKPiArZXJyX3NxOgo+ICsgICAgICAgdmlydG5ldF9ycV9iaW5kX3hza19wb29s
KHZpLCBycSwgTlVMTCk7Cj4gK2Vycl9ycToKPiArICAgICAgIHhza19wb29sX2RtYV91bm1hcChw
b29sLCAwKTsKPiArZXJyX3hza19tYXA6Cj4gKyAgICAgICBkbWFfdW5tYXBfc2luZ2xlKGRtYV9k
ZXYsIGhkcl9kbWEsIHZpLT5oZHJfbGVuLCBETUFfVE9fREVWSUNFKTsKPiArICAgICAgIHJldHVy
biBlcnI7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgdmlydG5ldF94c2tfcG9vbF9kaXNhYmxlKHN0
cnVjdCBuZXRfZGV2aWNlICpkZXYsIHUxNiBxaWQpCj4gK3sKPiArICAgICAgIHN0cnVjdCB2aXJ0
bmV0X2luZm8gKnZpID0gbmV0ZGV2X3ByaXYoZGV2KTsKPiArICAgICAgIHN0cnVjdCB4c2tfYnVm
Zl9wb29sICpwb29sOwo+ICsgICAgICAgc3RydWN0IGRldmljZSAqZG1hX2RldjsKPiArICAgICAg
IHN0cnVjdCB2aXJ0bmV0X3JxICpycTsKPiArICAgICAgIHN0cnVjdCB2aXJ0bmV0X3NxICpzcTsK
PiArICAgICAgIGludCBlcnIxLCBlcnIyOwo+ICsKPiArICAgICAgIGlmIChxaWQgPj0gdmktPmN1
cnJfcXVldWVfcGFpcnMpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ICsKPiAr
ICAgICAgIHNxID0gJnZpLT5zcVtxaWRdOwo+ICsgICAgICAgcnEgPSAmdmktPnJxW3FpZF07Cj4g
Kwo+ICsgICAgICAgZG1hX2RldiA9IHZpcnRxdWV1ZV9kbWFfZGV2KHJxLT52cSk7Cj4gKwo+ICsg
ICAgICAgLyogU3luYyB3aXRoIHRoZSBYU0sgd2FrZXVwIGFuZCBOQVBJLiAqLwo+ICsgICAgICAg
c3luY2hyb25pemVfbmV0KCk7CgpBbnkgcmVhc29uIHdlIGNvdWxkbid0IGRvIGJpbmRfeHNrX3Bv
b2woTlVMTCkgaGVyZT8gSXQgc2VlbXMgZWFzaWVyLgoKVGhhbmtzCgoKPiArCj4gKyAgICAgICBk
bWFfdW5tYXBfc2luZ2xlKGRtYV9kZXYsIHNxLT54c2suaGRyX2RtYV9hZGRyZXNzLCB2aS0+aGRy
X2xlbiwgRE1BX1RPX0RFVklDRSk7Cj4gKwo+ICsgICAgICAgcmN1X3JlYWRfbG9jaygpOwo+ICsg
ICAgICAgcG9vbCA9IHJjdV9kZXJlZmVyZW5jZShzcS0+eHNrLnBvb2wpOwo+ICsgICAgICAgeHNr
X3Bvb2xfZG1hX3VubWFwKHBvb2wsIDApOwo+ICsgICAgICAgcmN1X3JlYWRfdW5sb2NrKCk7Cj4g
Kwo+ICsgICAgICAgZXJyMSA9IHZpcnRuZXRfc3FfYmluZF94c2tfcG9vbCh2aSwgc3EsIE5VTEwp
Owo+ICsgICAgICAgZXJyMiA9IHZpcnRuZXRfcnFfYmluZF94c2tfcG9vbCh2aSwgcnEsIE5VTEwp
Owo+ICsKPiArICAgICAgIHJldHVybiBlcnIxIHwgZXJyMjsKPiArfQo+ICsKPiAraW50IHZpcnRu
ZXRfeHNrX3Bvb2xfc2V0dXAoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwgc3RydWN0IG5ldGRldl9i
cGYgKnhkcCkKPiArewo+ICsgICAgICAgaWYgKHhkcC0+eHNrLnBvb2wpCj4gKyAgICAgICAgICAg
ICAgIHJldHVybiB2aXJ0bmV0X3hza19wb29sX2VuYWJsZShkZXYsIHhkcC0+eHNrLnBvb2wsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ZHAtPnhzay5x
dWV1ZV9pZCk7Cj4gKyAgICAgICBlbHNlCj4gKyAgICAgICAgICAgICAgIHJldHVybiB2aXJ0bmV0
X3hza19wb29sX2Rpc2FibGUoZGV2LCB4ZHAtPnhzay5xdWV1ZV9pZCk7Cj4gK30KPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9uZXQvdmlydGlvL3hzay5oIGIvZHJpdmVycy9uZXQvdmlydGlvL3hzay5o
Cj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwMDAwMDAuLjE5MTgyODVjMzEw
Ywo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2ZXJzL25ldC92aXJ0aW8veHNrLmgKPiBAQCAt
MCwwICsxLDcgQEAKPiArLyogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0
ZXIgKi8KPiArCj4gKyNpZm5kZWYgX19YU0tfSF9fCj4gKyNkZWZpbmUgX19YU0tfSF9fCj4gKwo+
ICtpbnQgdmlydG5ldF94c2tfcG9vbF9zZXR1cChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCBzdHJ1
Y3QgbmV0ZGV2X2JwZiAqeGRwKTsKPiArI2VuZGlmCj4gLS0KPiAyLjMyLjAuMy5nMDExOTVjZjlm
Cj4KCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1
YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0
aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5m
by92aXJ0dWFsaXphdGlvbg==
