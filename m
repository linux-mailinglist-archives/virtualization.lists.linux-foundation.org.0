Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from mail.linuxfoundation.org (mail.linuxfoundation.org [140.211.169.12])
	by mail.lfdr.de (Postfix) with ESMTPS id B1E8FBFE55
	for <lists.virtualization@lfdr.de>; Fri, 27 Sep 2019 06:57:40 +0200 (CEST)
Received: from mail.linux-foundation.org (localhost [127.0.0.1])
	by mail.linuxfoundation.org (Postfix) with ESMTP id 259EBF2A;
	Fri, 27 Sep 2019 04:57:34 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@mail.linuxfoundation.org
Received: from smtp1.linuxfoundation.org (smtp1.linux-foundation.org
	[172.17.192.35])
	by mail.linuxfoundation.org (Postfix) with ESMTPS id 0F6B0D9D
	for <virtualization@lists.linux-foundation.org>;
	Fri, 27 Sep 2019 04:57:32 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mga03.intel.com (mga03.intel.com [134.134.136.65])
	by smtp1.linuxfoundation.org (Postfix) with ESMTPS id 6CFBF108
	for <virtualization@lists.linux-foundation.org>;
	Fri, 27 Sep 2019 04:57:31 +0000 (UTC)
X-Amp-Result: UNKNOWN
X-Amp-Original-Verdict: FILE UNKNOWN
X-Amp-File-Uploaded: False
Received: from orsmga004.jf.intel.com ([10.7.209.38])
	by orsmga103.jf.intel.com with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384;
	26 Sep 2019 21:57:29 -0700
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.64,554,1559545200"; d="scan'208";a="341687563"
Received: from dpdk-virtio-tbie-2.sh.intel.com (HELO ___) ([10.67.104.73])
	by orsmga004.jf.intel.com with ESMTP; 26 Sep 2019 21:57:26 -0700
Date: Fri, 27 Sep 2019 12:54:39 +0800
From: Tiwei Bie <tiwei.bie@intel.com>
To: Jason Wang <jasowang@redhat.com>
Subject: Re: [PATCH] vhost: introduce mdev based hardware backend
Message-ID: <20190927045438.GA17152@___>
References: <20190926045427.4973-1-tiwei.bie@intel.com>
	<1b4b8891-8c14-1c85-1d6a-2eed1c90bcde@redhat.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <1b4b8891-8c14-1c85-1d6a-2eed1c90bcde@redhat.com>
User-Agent: Mutt/1.9.4 (2018-02-28)
X-Spam-Status: No, score=-6.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_HI
	autolearn=ham version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	smtp1.linux-foundation.org
Cc: kvm@vger.kernel.org, mst@redhat.com, netdev@vger.kernel.org,
	linux-kernel@vger.kernel.org, virtualization@lists.linux-foundation.org,
	zhihong.wang@intel.com, maxime.coquelin@redhat.com, lingshan.zhu@intel.com
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.12
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: virtualization-bounces@lists.linux-foundation.org
Errors-To: virtualization-bounces@lists.linux-foundation.org

T24gRnJpLCBTZXAgMjcsIDIwMTkgYXQgMTE6NDY6MDZBTSArMDgwMCwgSmFzb24gV2FuZyB3cm90
ZToKPiBPbiAyMDE5LzkvMjYg5LiL5Y2IMTI6NTQsIFRpd2VpIEJpZSB3cm90ZToKPiA+ICsKPiA+
ICtzdGF0aWMgbG9uZyB2aG9zdF9tZGV2X3N0YXJ0KHN0cnVjdCB2aG9zdF9tZGV2ICptKQo+ID4g
K3sKPiA+ICsJc3RydWN0IG1kZXZfZGV2aWNlICptZGV2ID0gbS0+bWRldjsKPiA+ICsJY29uc3Qg
c3RydWN0IHZpcnRpb19tZGV2X2RldmljZV9vcHMgKm9wcyA9IG1kZXZfZ2V0X2Rldl9vcHMobWRl
dik7Cj4gPiArCXN0cnVjdCB2aXJ0aW9fbWRldl9jYWxsYmFjayBjYjsKPiA+ICsJc3RydWN0IHZo
b3N0X3ZpcnRxdWV1ZSAqdnE7Cj4gPiArCWludCBpZHg7Cj4gPiArCj4gPiArCW9wcy0+c2V0X2Zl
YXR1cmVzKG1kZXYsIG0tPmFja2VkX2ZlYXR1cmVzKTsKPiA+ICsKPiA+ICsJbWRldl9hZGRfc3Rh
dHVzKG1kZXYsIFZJUlRJT19DT05GSUdfU19GRUFUVVJFU19PSyk7Cj4gPiArCWlmICghKG1kZXZf
Z2V0X3N0YXR1cyhtZGV2KSAmIFZJUlRJT19DT05GSUdfU19GRUFUVVJFU19PSykpCj4gPiArCQln
b3RvIHJlc2V0Owo+ID4gKwo+ID4gKwlmb3IgKGlkeCA9IDA7IGlkeCA8IG0tPm52cXM7IGlkeCsr
KSB7Cj4gPiArCQl2cSA9ICZtLT52cXNbaWR4XTsKPiA+ICsKPiA+ICsJCWlmICghdnEtPmRlc2Mg
fHwgIXZxLT5hdmFpbCB8fCAhdnEtPnVzZWQpCj4gPiArCQkJYnJlYWs7Cj4gPiArCj4gPiArCQlp
ZiAob3BzLT5zZXRfdnFfc3RhdGUobWRldiwgaWR4LCB2cS0+bGFzdF9hdmFpbF9pZHgpKQo+ID4g
KwkJCWdvdG8gcmVzZXQ7Cj4gCj4gCj4gSWYgd2UgZG8gc2V0X3ZxX3N0YXRlKCkgaW4gU0VUX1ZS
SU5HX0JBU0UsIHdlIHdvbid0IG5lZWQgdGhpcyBzdGVwIGhlcmUuCgpZZWFoLCBJIHBsYW4gdG8g
ZG8gaXQgaW4gdGhlIG5leHQgdmVyc2lvbi4KCj4gCj4gCj4gPiArCj4gPiArCQkvKgo+ID4gKwkJ
ICogSW4gdmhvc3QtbWRldiwgdXNlcnNwYWNlIHNob3VsZCBwYXNzIHJpbmcgYWRkcmVzc2VzCj4g
PiArCQkgKiBpbiBndWVzdCBwaHlzaWNhbCBhZGRyZXNzZXMgd2hlbiBJT01NVSBpcyBkaXNhYmxl
ZCBvcgo+ID4gKwkJICogSU9WQXMgd2hlbiBJT01NVSBpcyBlbmFibGVkLgo+ID4gKwkJICovCj4g
Cj4gCj4gQSBxdWVzdGlvbiBoZXJlLCBjb25zaWRlciB3ZSdyZSB1c2luZyBub2lvbW11IG1vZGUu
IElmIGd1ZXN0IHBoeXNpY2FsCj4gYWRkcmVzcyBpcyBwYXNzZWQgaGVyZSwgaG93IGNhbiBhIGRl
dmljZSB1c2UgdGhhdD8KPiAKPiBJIGJlbGlldmUgeW91IG1lYW50ICJob3N0IHBoeXNpY2FsIGFk
ZHJlc3MiIGhlcmU/IEFuZCBpdCBhbHNvIGhhdmUgdGhlCj4gaW1wbGljYXRpb24gdGhhdCB0aGUg
SFBBIHNob3VsZCBiZSBjb250aW51b3VzIChlLmcgdXNpbmcgaHVnZXRsYmZzKS4KClRoZSBjb21t
ZW50IGlzIHRhbGtpbmcgYWJvdXQgdGhlIHZpcnR1YWwgSU9NTVUgKGkuZS4gaW90bGIgaW4gdmhv
c3QpLgpJdCBzaG91bGQgYmUgcmVwaHJhc2VkIHRvIGNvdmVyIHRoZSBub2lvbW11IGNhc2UgYXMg
d2VsbC4gVGhhbmtzIGZvcgpzcG90dGluZyB0aGlzLgoKCj4gPiArCj4gPiArCXN3aXRjaCAoY21k
KSB7Cj4gPiArCWNhc2UgVkhPU1RfTURFVl9TRVRfU1RBVEU6Cj4gPiArCQlyID0gdmhvc3Rfc2V0
X3N0YXRlKG0sIGFyZ3ApOwo+ID4gKwkJYnJlYWs7Cj4gPiArCWNhc2UgVkhPU1RfR0VUX0ZFQVRV
UkVTOgo+ID4gKwkJciA9IHZob3N0X2dldF9mZWF0dXJlcyhtLCBhcmdwKTsKPiA+ICsJCWJyZWFr
Owo+ID4gKwljYXNlIFZIT1NUX1NFVF9GRUFUVVJFUzoKPiA+ICsJCXIgPSB2aG9zdF9zZXRfZmVh
dHVyZXMobSwgYXJncCk7Cj4gPiArCQlicmVhazsKPiA+ICsJY2FzZSBWSE9TVF9HRVRfVlJJTkdf
QkFTRToKPiA+ICsJCXIgPSB2aG9zdF9nZXRfdnJpbmdfYmFzZShtLCBhcmdwKTsKPiA+ICsJCWJy
ZWFrOwo+IAo+IAo+IERvZXMgaXQgbWVhbiB0aGUgU0VUX1ZSSU5HX0JBU0UgbWF5IG9ubHkgdGFr
ZSBhZmZlY3QgYWZ0ZXIKPiBWSE9TVF9NRVZfU0VUX1NUQVRFPwoKWWVhaCwgaW4gdGhpcyB2ZXJz
aW9uLCBTRVRfVlJJTkdfQkFTRSB3b24ndCBzZXQgdGhlIGJhc2UgdG8gdGhlCmRldmljZSBkaXJl
Y3RseS4gQnV0IEkgcGxhbiB0byBub3QgZGVsYXkgdGhpcyBhbnltb3JlIGluIHRoZSBuZXh0CnZl
cnNpb24gdG8gc3VwcG9ydCB0aGUgU0VUX1NUQVRVUy4KCj4gCj4gCj4gPiArCWRlZmF1bHQ6Cj4g
PiArCQlyID0gdmhvc3RfZGV2X2lvY3RsKCZtLT5kZXYsIGNtZCwgYXJncCk7Cj4gPiArCQlpZiAo
ciA9PSAtRU5PSU9DVExDTUQpCj4gPiArCQkJciA9IHZob3N0X3ZyaW5nX2lvY3RsKCZtLT5kZXYs
IGNtZCwgYXJncCk7Cj4gPiArCX0KPiA+ICsKPiA+ICsJbXV0ZXhfdW5sb2NrKCZtLT5tdXRleCk7
Cj4gPiArCXJldHVybiByOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgY29uc3Qgc3RydWN0IHZm
aW9fZGV2aWNlX29wcyB2ZmlvX3Zob3N0X21kZXZfZGV2X29wcyA9IHsKPiA+ICsJLm5hbWUJCT0g
InZmaW8tdmhvc3QtbWRldiIsCj4gPiArCS5vcGVuCQk9IHZob3N0X21kZXZfb3BlbiwKPiA+ICsJ
LnJlbGVhc2UJPSB2aG9zdF9tZGV2X3JlbGVhc2UsCj4gPiArCS5pb2N0bAkJPSB2aG9zdF9tZGV2
X3VubG9ja2VkX2lvY3RsLAo+ID4gK307Cj4gPiArCj4gPiArc3RhdGljIGludCB2aG9zdF9tZGV2
X3Byb2JlKHN0cnVjdCBkZXZpY2UgKmRldikKPiA+ICt7Cj4gPiArCXN0cnVjdCBtZGV2X2Rldmlj
ZSAqbWRldiA9IG1kZXZfZnJvbV9kZXYoZGV2KTsKPiA+ICsJY29uc3Qgc3RydWN0IHZpcnRpb19t
ZGV2X2RldmljZV9vcHMgKm9wcyA9IG1kZXZfZ2V0X2Rldl9vcHMobWRldik7Cj4gPiArCXN0cnVj
dCB2aG9zdF9tZGV2ICptOwo+ID4gKwlpbnQgbnZxcywgcjsKPiA+ICsKPiA+ICsJbSA9IGt6YWxs
b2Moc2l6ZW9mKCptKSwgR0ZQX0tFUk5FTCB8IF9fR0ZQX1JFVFJZX01BWUZBSUwpOwo+ID4gKwlp
ZiAoIW0pCj4gPiArCQlyZXR1cm4gLUVOT01FTTsKPiA+ICsKPiA+ICsJbXV0ZXhfaW5pdCgmbS0+
bXV0ZXgpOwo+ID4gKwo+ID4gKwludnFzID0gb3BzLT5nZXRfcXVldWVfbWF4KG1kZXYpOwo+ID4g
KwltLT5udnFzID0gbnZxczsKPiAKPiAKPiBUaGUgbmFtZSBjb3VsZCBiZSBjb25mdXNpbmcsIGdl
dF9xdWV1ZV9tYXgoKSBpcyB0byBnZXQgdGhlIG1heGltdW0gbnVtYmVyIG9mCj4gZW50cmllcyBm
b3IgYSB2aXJ0cXVldWUgc3VwcG9ydGVkIGJ5IHRoaXMgZGV2aWNlLgoKT0suIEl0IG1pZ2h0IGJl
IGJldHRlciB0byByZW5hbWUgaXQgdG8gc29tZXRoaW5nIGxpa2U6CgoJZ2V0X3ZxX251bV9tYXgo
KQoKd2hpY2ggaXMgbW9yZSBjb25zaXN0ZW50IHdpdGggdGhlIHNldF92cV9udW0oKS4KCj4gCj4g
SXQgbG9va3MgdG8gbWUgdGhhdCB3ZSBuZWVkIGFub3RoZXIgQVBJIHRvIHF1ZXJ5IHRoZSBtYXhp
bXVtIG51bWJlciBvZgo+IHZpcnRxdWV1ZXMgc3VwcG9ydGVkIGJ5IHRoZSBkZXZpY2UuCgpZZWFo
LgoKVGhhbmtzLApUaXdlaQoKCj4gCj4gVGhhbmtzCj4gCj4gCj4gPiArCj4gPiArCW0tPnZxcyA9
IGttYWxsb2NfYXJyYXkobnZxcywgc2l6ZW9mKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUpLAo+ID4g
KwkJCSAgICAgICBHRlBfS0VSTkVMKTsKPiA+ICsJaWYgKCFtLT52cXMpIHsKPiA+ICsJCXIgPSAt
RU5PTUVNOwo+ID4gKwkJZ290byBlcnI7Cj4gPiArCX0KPiA+ICsKPiA+ICsJciA9IHZmaW9fYWRk
X2dyb3VwX2RldihkZXYsICZ2ZmlvX3Zob3N0X21kZXZfZGV2X29wcywgbSk7Cj4gPiArCWlmIChy
KQo+ID4gKwkJZ290byBlcnI7Cj4gPiArCj4gPiArCW0tPmZlYXR1cmVzID0gb3BzLT5nZXRfZmVh
dHVyZXMobWRldik7Cj4gPiArCW0tPm1kZXYgPSBtZGV2Owo+ID4gKwlyZXR1cm4gMDsKPiA+ICsK
PiA+ICtlcnI6Cj4gPiArCWtmcmVlKG0tPnZxcyk7Cj4gPiArCWtmcmVlKG0pOwo+ID4gKwlyZXR1
cm4gcjsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIHZvaWQgdmhvc3RfbWRldl9yZW1vdmUoc3Ry
dWN0IGRldmljZSAqZGV2KQo+ID4gK3sKPiA+ICsJc3RydWN0IHZob3N0X21kZXYgKm07Cj4gPiAr
Cj4gPiArCW0gPSB2ZmlvX2RlbF9ncm91cF9kZXYoZGV2KTsKPiA+ICsJbXV0ZXhfZGVzdHJveSgm
bS0+bXV0ZXgpOwo+ID4gKwlrZnJlZShtLT52cXMpOwo+ID4gKwlrZnJlZShtKTsKPiA+ICt9Cj4g
PiArCj4gPiArc3RhdGljIHN0cnVjdCBtZGV2X2NsYXNzX2lkIGlkX3RhYmxlW10gPSB7Cj4gPiAr
CXsgTURFVl9JRF9WSE9TVCB9LAo+ID4gKwl7IDAgfSwKPiA+ICt9Owo+ID4gKwo+ID4gK3N0YXRp
YyBzdHJ1Y3QgbWRldl9kcml2ZXIgdmhvc3RfbWRldl9kcml2ZXIgPSB7Cj4gPiArCS5uYW1lCT0g
InZob3N0X21kZXYiLAo+ID4gKwkucHJvYmUJPSB2aG9zdF9tZGV2X3Byb2JlLAo+ID4gKwkucmVt
b3ZlCT0gdmhvc3RfbWRldl9yZW1vdmUsCj4gPiArCS5pZF90YWJsZSA9IGlkX3RhYmxlLAo+ID4g
K307Cj4gPiArCj4gPiArc3RhdGljIGludCBfX2luaXQgdmhvc3RfbWRldl9pbml0KHZvaWQpCj4g
PiArewo+ID4gKwlyZXR1cm4gbWRldl9yZWdpc3Rlcl9kcml2ZXIoJnZob3N0X21kZXZfZHJpdmVy
LCBUSElTX01PRFVMRSk7Cj4gPiArfQo+ID4gK21vZHVsZV9pbml0KHZob3N0X21kZXZfaW5pdCk7
Cj4gPiArCj4gPiArc3RhdGljIHZvaWQgX19leGl0IHZob3N0X21kZXZfZXhpdCh2b2lkKQo+ID4g
K3sKPiA+ICsJbWRldl91bnJlZ2lzdGVyX2RyaXZlcigmdmhvc3RfbWRldl9kcml2ZXIpOwo+ID4g
K30KPiA+ICttb2R1bGVfZXhpdCh2aG9zdF9tZGV2X2V4aXQpOwo+ID4gKwo+ID4gK01PRFVMRV9W
RVJTSU9OKCIwLjAuMSIpOwo+ID4gK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsKPiA+ICtNT0RV
TEVfREVTQ1JJUFRJT04oIk1lZGlhdGVkIGRldmljZSBiYXNlZCBhY2NlbGVyYXRvciBmb3Igdmly
dGlvIik7Cj4gPiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS91YXBpL2xpbnV4L3Zob3N0LmggYi9pbmNs
dWRlL3VhcGkvbGludXgvdmhvc3QuaAo+ID4gaW5kZXggNDBkMDI4ZWVkNjQ1Li41YWZiYzJmMDhm
YTMgMTAwNjQ0Cj4gPiAtLS0gYS9pbmNsdWRlL3VhcGkvbGludXgvdmhvc3QuaAo+ID4gKysrIGIv
aW5jbHVkZS91YXBpL2xpbnV4L3Zob3N0LmgKPiA+IEBAIC0xMTYsNCArMTE2LDEyIEBACj4gPiAg
ICNkZWZpbmUgVkhPU1RfVlNPQ0tfU0VUX0dVRVNUX0NJRAlfSU9XKFZIT1NUX1ZJUlRJTywgMHg2
MCwgX191NjQpCj4gPiAgICNkZWZpbmUgVkhPU1RfVlNPQ0tfU0VUX1JVTk5JTkcJCV9JT1coVkhP
U1RfVklSVElPLCAweDYxLCBpbnQpCj4gPiArLyogVkhPU1RfTURFViBzcGVjaWZpYyBkZWZpbmVz
ICovCj4gPiArCj4gPiArI2RlZmluZSBWSE9TVF9NREVWX1NFVF9TVEFURQlfSU9XKFZIT1NUX1ZJ
UlRJTywgMHg3MCwgX191NjQpCj4gPiArCj4gPiArI2RlZmluZSBWSE9TVF9NREVWX1NfU1RPUFBF
RAkwCj4gPiArI2RlZmluZSBWSE9TVF9NREVWX1NfUlVOTklORwkxCj4gPiArI2RlZmluZSBWSE9T
VF9NREVWX1NfTUFYCTIKPiA+ICsKPiA+ICAgI2VuZGlmCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0
dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4
Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
