Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [140.211.166.133])
	by mail.lfdr.de (Postfix) with ESMTPS id 079AA4B42B6
	for <lists.virtualization@lfdr.de>; Mon, 14 Feb 2022 08:19:46 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id 11D2C400EA;
	Mon, 14 Feb 2022 07:19:44 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id m-WqO0BuBTCx; Mon, 14 Feb 2022 07:19:42 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp2.osuosl.org (Postfix) with ESMTPS id BAB30400F6;
	Mon, 14 Feb 2022 07:19:41 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 24A17C0073;
	Mon, 14 Feb 2022 07:19:41 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp2.osuosl.org (smtp2.osuosl.org [140.211.166.133])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 344E8C000B
 for <virtualization@lists.linux-foundation.org>;
 Mon, 14 Feb 2022 07:19:40 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp2.osuosl.org (Postfix) with ESMTP id 14759400F6
 for <virtualization@lists.linux-foundation.org>;
 Mon, 14 Feb 2022 07:19:40 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
 by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id yf-F6DRasYFH
 for <virtualization@lists.linux-foundation.org>;
 Mon, 14 Feb 2022 07:19:38 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.129.124])
 by smtp2.osuosl.org (Postfix) with ESMTPS id F2483400EA
 for <virtualization@lists.linux-foundation.org>;
 Mon, 14 Feb 2022 07:19:37 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1644823176;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=v2IJTyYpEq4GvP9K+Pwjpy55XvGY+QnDDIBg+Xv7R58=;
 b=C8TAlVas4BmgEh5HsgsHjTj0EIf6wkTy70grmSp09qBqwpb3BuYY9c+cqvuEGN8urn117R
 ObYd/qb7nxVVbIUmtQM/5GwMFeNBbCndFS96GkxnfBBK6c+WKuzTR1VAxKxtAjrDApZSSL
 BsLnzK+AhzyAaaXvoFuN5h4qwK+QBQI=
Received: from mail-pl1-f198.google.com (mail-pl1-f198.google.com
 [209.85.214.198]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 us-mta-587-Rvj5pBFGPten2_k2j_iJkw-1; Mon, 14 Feb 2022 02:19:35 -0500
X-MC-Unique: Rvj5pBFGPten2_k2j_iJkw-1
Received: by mail-pl1-f198.google.com with SMTP id
 p16-20020a170902a41000b0014992c5d56bso5787558plq.19
 for <virtualization@lists.linux-foundation.org>;
 Sun, 13 Feb 2022 23:19:34 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:message-id:date:mime-version:user-agent:subject
 :content-language:to:cc:references:from:in-reply-to
 :content-transfer-encoding;
 bh=v2IJTyYpEq4GvP9K+Pwjpy55XvGY+QnDDIBg+Xv7R58=;
 b=wZwqw/b7VBskv6R3Ov5QhnKrFxiaO8iWRL6oEpRmRqnxXR2njjX9tjfEku16iCL1Et
 qB+oYkBDNGCiVz/dDreRnArc9SQ95WQKLrSW1rFvbz5gPyXwqpMSE7pLIbdwhamverqC
 nkb0vOi9WxlaEbyi31c2mg1SSv8T+rVVhhJchx87ZropwT/wy/KuTZy/P7jHESMTjJQ0
 hgZKx7fI5bsu66WmKMVBpXzAAeZ4qZr1liwG7lD7I1Mkqts3ocS3PNBvqAdRZkkfKdQJ
 UVBUws07SKbi5PFywrTF8z1ZME9XN3ktXkfZW2mKUA9NddC1x1OqERqZDVm/eUIwDgfQ
 VxdQ==
X-Gm-Message-State: AOAM532MGOfltoMZPz3ECrw+dRIZD43c7UNixuDXbMYlPNxIpH637NCM
 pKU4Bh2TgOzLTdtBqc830INh+8SN9EfXsIMuv9NgLPGBKoECpll9s/yX+web/Ww/irCjr7j2khn
 95Pr6ZS7oPkstYgt3Zyh9SzEOzY/mcpltzcl8nVF9ZA==
X-Received: by 2002:a05:6a00:1914:: with SMTP id
 y20mr12874071pfi.41.1644823173858; 
 Sun, 13 Feb 2022 23:19:33 -0800 (PST)
X-Google-Smtp-Source: ABdhPJyANrRdOcJ5U8RTCOVyJhg1Pn7O2lJX0Zi45RNszMqHW4CGmsCCGTjMGuK/EdP1bJ3SLnyWZQ==
X-Received: by 2002:a05:6a00:1914:: with SMTP id
 y20mr12874053pfi.41.1644823173441; 
 Sun, 13 Feb 2022 23:19:33 -0800 (PST)
Received: from [10.72.12.239] ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id lp10sm4602191pjb.44.2022.02.13.23.19.31
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Sun, 13 Feb 2022 23:19:32 -0800 (PST)
Message-ID: <c2036174-22ae-0882-1783-53a5d20a03ad@redhat.com>
Date: Mon, 14 Feb 2022 15:19:25 +0800
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0)
 Gecko/20100101 Thunderbird/91.6.0
Subject: Re: [PATCH V4 4/4] vDPA/ifcvf: implement shared IRQ feature
To: Zhu Lingshan <lingshan.zhu@intel.com>, mst@redhat.com
References: <20220203072735.189716-1-lingshan.zhu@intel.com>
 <20220203072735.189716-5-lingshan.zhu@intel.com>
From: Jason Wang <jasowang@redhat.com>
In-Reply-To: <20220203072735.189716-5-lingshan.zhu@intel.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: netdev@vger.kernel.org, virtualization@lists.linux-foundation.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CuWcqCAyMDIyLzIvMyDkuIvljYgzOjI3LCBaaHUgTGluZ3NoYW4g5YaZ6YGTOgo+IE9uIHNvbWUg
cGxhdGZvcm1zL2RldmljZXMsIHRoZXJlIG1heSBub3QgYmUgZW5vdWdoIE1TSSB2ZWN0b3IKPiBz
bG90cyBhbGxvY2F0ZWQgZm9yIHZpcnRxdWV1ZXMgYW5kIGNvbmZpZyBjaGFuZ2VzLiBJbiBzdWNo
IGEgY2FzZSwKPiB0aGUgaW50ZXJydXB0IHNvdXJjZXModmlydHF1ZXVlcywgY29uZmlnIGNoYW5n
ZXMpIG11c3Qgc2hhcmUKPiBhbiBJUlEvdmVjdG9yLCB0byBhdm9pZCBpbml0aWFsaXphdGlvbiBm
YWlsdXJlcywga2VlcAo+IHRoZSBkZXZpY2UgZnVuY3Rpb25hbC4KPgo+IFRoaXMgY29tbWl0IGhh
bmRsZXMgdGhyZWUgY2FzZXM6Cj4gKDEpIG51bWJlciBvZiB0aGUgYWxsb2NhdGVkIHZlY3RvcnMg
PT0gdGhlIG51bWJlciBvZiB2aXJ0cXVldWVzICsgMQo+IChjb25maWcgY2hhbmdlcyksIGV2ZXJ5
IHZpcnRxdWV1ZSBhbmQgdGhlIGNvbmZpZyBpbnRlcnJ1cHQgaGFzCj4gYSBzZXBhcmF0ZWQgdmVj
dG9yL0lSUSwgdGhlIGJlc3QgYW5kIHRoZSBtb3N0IGxpa2VseSBjYXNlLgo+ICgyKSBudW1iZXIg
b2YgdGhlIGFsbG9jYXRlZCB2ZWN0b3JzIGlzIGxlc3MgdGhhbiB0aGUgYmVzdCBjYXNlLCBidXQK
PiBncmVhdGVyIHRoYW4gMS4gSW4gdGhpcyBjYXNlLCBhbGwgdmlydHF1ZXVlcyBzaGFyZSBhIHZl
Y3Rvci9JUlEsCj4gdGhlIGNvbmZpZyBpbnRlcnJ1cHQgaGFzIGEgc2VwYXJhdGVkIHZlY3Rvci9J
UlEKPiAoMykgb25seSBvbmUgdmVjdG9yIGlzIGFsbG9jYXRlZCwgaW4gdGhpcyBjYXNlLCB0aGUg
dmlydHF1ZXVlcyBhbmQKPiB0aGUgY29uZmlnIGludGVycnVwdCBzaGFyZSBhIHZlY3Rvci9JUlEu
IFRoZSB3b3JzdCBhbmQgbW9zdAo+IHVubGlrZWx5IGNhc2UuCj4KPiBPdGhlcndpc2UsIGl0IG5l
ZWRzIHRvIGZhaWwuCj4KPiBUaGlzIGNvbW1pdCBpbnRyb2R1Y2VzIHNvbWUgaGVscGVyIGZ1bmN0
aW9uczoKPiBpZmN2Zl9zZXRfdnFfdmVjdG9yKCkgYW5kIGlmY3ZmX3NldF9jb25maWdfdmVjdG9y
KCkgc2V0cyB2aXJ0cXVldWUKPiB2ZWN0b3IgYW5kIGNvbmZpZyB2ZWN0b3IgaW4gdGhlIGRldmlj
ZSBjb25maWcgc3BhY2UsIHNvIHRoYXQKPiB0aGUgZGV2aWNlIGNhbiBzZW5kIGludGVycnVwdCBE
TUEuCj4KPiBUaGlzIGNvbW1pdCBhZGRzIHNvbWUgZmllbGRzIGluIHN0cnVjdCBpZmN2Zl9odyBh
bmQgcmUtcGxhY2VkCj4gdGhlIGV4aXN0ZWQgZmllbGRzIHRvIGJlIGFsaWduZWQgd2l0aCB0aGUg
Y2FjaGVsaW5lLgo+Cj4gU2lnbmVkLW9mZi1ieTogWmh1IExpbmdzaGFuIDxsaW5nc2hhbi56aHVA
aW50ZWwuY29tPgo+IC0tLQo+ICAgZHJpdmVycy92ZHBhL2lmY3ZmL2lmY3ZmX2Jhc2UuYyB8ICA0
NyArKysrLS0KPiAgIGRyaXZlcnMvdmRwYS9pZmN2Zi9pZmN2Zl9iYXNlLmggfCAgMjMgKystCj4g
ICBkcml2ZXJzL3ZkcGEvaWZjdmYvaWZjdmZfbWFpbi5jIHwgMjQzICsrKysrKysrKysrKysrKysr
KysrKysrKysrKy0tLS0tCj4gICAzIGZpbGVzIGNoYW5nZWQsIDI1NiBpbnNlcnRpb25zKCspLCA1
NyBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEvaWZjdmYvaWZjdmZf
YmFzZS5jIGIvZHJpdmVycy92ZHBhL2lmY3ZmL2lmY3ZmX2Jhc2UuYwo+IGluZGV4IDM5NzY5MmFl
NjcxYy4uMThkY2I2M2FiMWUzIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvdmRwYS9pZmN2Zi9pZmN2
Zl9iYXNlLmMKPiArKysgYi9kcml2ZXJzL3ZkcGEvaWZjdmYvaWZjdmZfYmFzZS5jCj4gQEAgLTE1
LDYgKzE1LDM2IEBAIHN0cnVjdCBpZmN2Zl9hZGFwdGVyICp2Zl90b19hZGFwdGVyKHN0cnVjdCBp
ZmN2Zl9odyAqaHcpCj4gICAJcmV0dXJuIGNvbnRhaW5lcl9vZihodywgc3RydWN0IGlmY3ZmX2Fk
YXB0ZXIsIHZmKTsKPiAgIH0KPiAgIAo+ICtpbnQgaWZjdmZfc2V0X3ZxX3ZlY3RvcihzdHJ1Y3Qg
aWZjdmZfaHcgKmh3LCB1MTYgcWlkLCBpbnQgdmVjdG9yKQo+ICt7Cj4gKwlzdHJ1Y3QgdmlydGlv
X3BjaV9jb21tb25fY2ZnIF9faW9tZW0gKmNmZyA9IGh3LT5jb21tb25fY2ZnOwo+ICsJc3RydWN0
IGlmY3ZmX2FkYXB0ZXIgKmlmY3ZmID0gdmZfdG9fYWRhcHRlcihodyk7Cj4gKwo+ICsJaWZjX2lv
d3JpdGUxNihxaWQsICZjZmctPnF1ZXVlX3NlbGVjdCk7Cj4gKwlpZmNfaW93cml0ZTE2KHZlY3Rv
ciwgJmNmZy0+cXVldWVfbXNpeF92ZWN0b3IpOwo+ICsJaWYgKGlmY19pb3JlYWQxNigmY2ZnLT5x
dWV1ZV9tc2l4X3ZlY3RvcikgPT0gVklSVElPX01TSV9OT19WRUNUT1IpIHsKPiArCQlJRkNWRl9F
UlIoaWZjdmYtPnBkZXYsICJObyBtc2l4IHZlY3RvciBmb3IgcXVldWUgJXVcbiIsIHFpZCk7Cj4g
KwkJCXJldHVybiAtRUlOVkFMOwo+ICsJfQoKCkxldCdzIGxlYXZlIHRoaXMgY2hlY2sgZm9yIHRo
ZSBjYWxsZXIsIEUuZyBjYW4gY2FsbGVyIHRyeSB0byBhc3NpZ24gCk5PX1ZFQ1RPUiBkdXJpbmcg
dW5pLW5pdD8KCgo+ICsKPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtpbnQgaWZjdmZfc2V0X2Nv
bmZpZ192ZWN0b3Ioc3RydWN0IGlmY3ZmX2h3ICpodywgaW50IHZlY3RvcikKPiArewo+ICsJc3Ry
dWN0IHZpcnRpb19wY2lfY29tbW9uX2NmZyBfX2lvbWVtICpjZmcgPSBody0+Y29tbW9uX2NmZzsK
PiArCXN0cnVjdCBpZmN2Zl9hZGFwdGVyICppZmN2ZiA9IHZmX3RvX2FkYXB0ZXIoaHcpOwo+ICsK
PiArCWNmZyA9IGh3LT5jb21tb25fY2ZnOwo+ICsJaWZjX2lvd3JpdGUxNih2ZWN0b3IsICAmY2Zn
LT5tc2l4X2NvbmZpZyk7Cj4gKwlpZiAoaWZjX2lvcmVhZDE2KCZjZmctPm1zaXhfY29uZmlnKSA9
PSBWSVJUSU9fTVNJX05PX1ZFQ1RPUikgewo+ICsJCUlGQ1ZGX0VSUihpZmN2Zi0+cGRldiwgIk5v
IG1zaXggdmVjdG9yIGZvciBkZXZpY2UgY29uZmlnXG4iKTsKPiArCQlyZXR1cm4gLUVJTlZBTDsK
PiArCX0KCgpTaW1pbGFyIHF1ZXN0aW9uIGFzIGFib3ZlLgoKCj4gKwo+ICsJcmV0dXJuIDA7Cj4g
K30KPiArCj4gICBzdGF0aWMgdm9pZCBfX2lvbWVtICpnZXRfY2FwX2FkZHIoc3RydWN0IGlmY3Zm
X2h3ICpodywKPiAgIAkJCQkgIHN0cnVjdCB2aXJ0aW9fcGNpX2NhcCAqY2FwKQo+ICAgewo+IEBA
IC0xNDAsNiArMTcwLDggQEAgaW50IGlmY3ZmX2luaXRfaHcoc3RydWN0IGlmY3ZmX2h3ICpodywg
c3RydWN0IHBjaV9kZXYgKnBkZXYpCj4gICAJCSAgaHctPmNvbW1vbl9jZmcsIGh3LT5ub3RpZnlf
YmFzZSwgaHctPmlzciwKPiAgIAkJICBody0+ZGV2X2NmZywgaHctPm5vdGlmeV9vZmZfbXVsdGlw
bGllcik7Cj4gICAKPiArCWh3LT52cXNfc2hhcmVkX2lycSA9IC1FSU5WQUw7Cj4gKwo+ICAgCXJl
dHVybiAwOwo+ICAgfQo+ICAgCj4gQEAgLTMyMSwxMiArMzUzLDYgQEAgc3RhdGljIGludCBpZmN2
Zl9od19lbmFibGUoc3RydWN0IGlmY3ZmX2h3ICpodykKPiAgIAo+ICAgCWlmY3ZmID0gdmZfdG9f
YWRhcHRlcihodyk7Cj4gICAJY2ZnID0gaHctPmNvbW1vbl9jZmc7Cj4gLQlpZmNfaW93cml0ZTE2
KElGQ1ZGX01TSV9DT05GSUdfT0ZGLCAmY2ZnLT5tc2l4X2NvbmZpZyk7Cj4gLQo+IC0JaWYgKGlm
Y19pb3JlYWQxNigmY2ZnLT5tc2l4X2NvbmZpZykgPT0gVklSVElPX01TSV9OT19WRUNUT1IpIHsK
PiAtCQlJRkNWRl9FUlIoaWZjdmYtPnBkZXYsICJObyBtc2l4IHZlY3RvciBmb3IgZGV2aWNlIGNv
bmZpZ1xuIik7Cj4gLQkJcmV0dXJuIC1FSU5WQUw7Cj4gLQl9Cj4gICAKPiAgIAlmb3IgKGkgPSAw
OyBpIDwgaHctPm5yX3ZyaW5nOyBpKyspIHsKPiAgIAkJaWYgKCFody0+dnJpbmdbaV0ucmVhZHkp
Cj4gQEAgLTM0MCwxNSArMzY2LDYgQEAgc3RhdGljIGludCBpZmN2Zl9od19lbmFibGUoc3RydWN0
IGlmY3ZmX2h3ICpodykKPiAgIAkJaWZjX2lvd3JpdGU2NF90d29wYXJ0KGh3LT52cmluZ1tpXS51
c2VkLCAmY2ZnLT5xdWV1ZV91c2VkX2xvLAo+ICAgCQkJCSAgICAgJmNmZy0+cXVldWVfdXNlZF9o
aSk7Cj4gICAJCWlmY19pb3dyaXRlMTYoaHctPnZyaW5nW2ldLnNpemUsICZjZmctPnF1ZXVlX3Np
emUpOwo+IC0JCWlmY19pb3dyaXRlMTYoaSArIElGQ1ZGX01TSV9RVUVVRV9PRkYsICZjZmctPnF1
ZXVlX21zaXhfdmVjdG9yKTsKPiAtCj4gLQkJaWYgKGlmY19pb3JlYWQxNigmY2ZnLT5xdWV1ZV9t
c2l4X3ZlY3RvcikgPT0KPiAtCQkgICAgVklSVElPX01TSV9OT19WRUNUT1IpIHsKPiAtCQkJSUZD
VkZfRVJSKGlmY3ZmLT5wZGV2LAo+IC0JCQkJICAiTm8gbXNpeCB2ZWN0b3IgZm9yIHF1ZXVlICV1
XG4iLCBpKTsKPiAtCQkJcmV0dXJuIC1FSU5WQUw7Cj4gLQkJfQo+IC0KPiAgIAkJaWZjdmZfc2V0
X3ZxX3N0YXRlKGh3LCBpLCBody0+dnJpbmdbaV0ubGFzdF9hdmFpbF9pZHgpOwo+ICAgCQlpZmNf
aW93cml0ZTE2KDEsICZjZmctPnF1ZXVlX2VuYWJsZSk7Cj4gICAJfQo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL3ZkcGEvaWZjdmYvaWZjdmZfYmFzZS5oIGIvZHJpdmVycy92ZHBhL2lmY3ZmL2lmY3Zm
X2Jhc2UuaAo+IGluZGV4IDk0OWI0ZmI5ZDU1NC4uOWNmZTA4OGM4MmU5IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvdmRwYS9pZmN2Zi9pZmN2Zl9iYXNlLmgKPiArKysgYi9kcml2ZXJzL3ZkcGEvaWZj
dmYvaWZjdmZfYmFzZS5oCj4gQEAgLTI3LDggKzI3LDYgQEAKPiAgIAo+ICAgI2RlZmluZSBJRkNW
Rl9RVUVVRV9BTElHTk1FTlQJUEFHRV9TSVpFCj4gICAjZGVmaW5lIElGQ1ZGX1FVRVVFX01BWAkJ
MzI3NjgKPiAtI2RlZmluZSBJRkNWRl9NU0lfQ09ORklHX09GRgkwCj4gLSNkZWZpbmUgSUZDVkZf
TVNJX1FVRVVFX09GRgkxCj4gICAjZGVmaW5lIElGQ1ZGX1BDSV9NQVhfUkVTT1VSQ0UJNgo+ICAg
Cj4gICAjZGVmaW5lIElGQ1ZGX0xNX0NGR19TSVpFCQkweDQwCj4gQEAgLTQyLDYgKzQwLDEzIEBA
Cj4gICAjZGVmaW5lIGlmY3ZmX3ByaXZhdGVfdG9fdmYoYWRhcHRlcikgXAo+ICAgCSgmKChzdHJ1
Y3QgaWZjdmZfYWRhcHRlciAqKWFkYXB0ZXIpLT52ZikKPiAgIAo+ICsvKiBhbGwgdnFzIGFuZCBj
b25maWcgaW50ZXJydXB0IGhhcyBpdHMgb3duIHZlY3RvciAqLwo+ICsjZGVmaW5lIE1TSVhfVkVD
VE9SX1BFUl9WUV9BTkRfQ09ORklHCQkxCj4gKy8qIGFsbCB2cXMgc2hhcmUgYSB2ZWN0b3IsIGFu
ZCBjb25maWcgaW50ZXJydXB0IGhhcyBhIHNlcGFyYXRlIHZlY3RvciAqLwo+ICsjZGVmaW5lIE1T
SVhfVkVDVE9SX1NIQVJFRF9WUV9BTkRfQ09ORklHCTIKPiArLyogYWxsIHZxcyBhbmQgY29uZmln
IGludGVycnVwdCBzaGFyZSBhIHZlY3RvciAqLwo+ICsjZGVmaW5lIE1TSVhfVkVDVE9SX0RFVl9T
SEFSRUQJCQkzCgoKSSB0aGluayB0aGVyZSdzIG5vIG11Y2ggdmFsdWUgdG8gZGlmZmVyIDIgZnJv
bSAzIGNvbnNpZGVyIGNvbmZpZyAKaW50ZXJydXB0IHNob3VsZCBiZSByYXJlLgoKCj4gKwo+ICAg
c3RhdGljIGlubGluZSB1OCBpZmNfaW9yZWFkOCh1OCBfX2lvbWVtICphZGRyKQo+ICAgewo+ICAg
CXJldHVybiBpb3JlYWQ4KGFkZHIpOwo+IEBAIC05NywyNSArMTAyLDI3IEBAIHN0cnVjdCBpZmN2
Zl9odyB7Cj4gICAJdTggX19pb21lbSAqaXNyOwo+ICAgCS8qIExpdmUgbWlncmF0aW9uICovCj4g
ICAJdTggX19pb21lbSAqbG1fY2ZnOwo+IC0JdTE2IG5yX3ZyaW5nOwoKCkFueSByZWFzb24gZm9y
IG1vdmluZyBudl92cmluZywgY29uZmlnX3NpemUsIGFuZCBvdGhlciBzdHVmZnM/CgoKPiAgIAkv
KiBOb3RpZmljYXRpb24gYmFyIG51bWJlciAqLwo+ICAgCXU4IG5vdGlmeV9iYXI7Cj4gKwl1OCBt
c2l4X3ZlY3Rvcl9zdGF0dXM7Cj4gKwkvKiB2aXJ0aW8tbmV0IG9yIHZpcnRpby1ibGsgZGV2aWNl
IGNvbmZpZyBzaXplICovCj4gKwl1MzIgY29uZmlnX3NpemU7Cj4gICAJLyogTm90aWZpY2FpdG9u
IGJhciBhZGRyZXNzICovCj4gICAJdm9pZCBfX2lvbWVtICpub3RpZnlfYmFzZTsKPiAgIAlwaHlz
X2FkZHJfdCBub3RpZnlfYmFzZV9wYTsKPiAgIAl1MzIgbm90aWZ5X29mZl9tdWx0aXBsaWVyOwo+
ICsJdTMyIGRldl90eXBlOwo+ICAgCXU2NCByZXFfZmVhdHVyZXM7Cj4gICAJdTY0IGh3X2ZlYXR1
cmVzOwo+IC0JdTMyIGRldl90eXBlOwo+ICAgCXN0cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcg
X19pb21lbSAqY29tbW9uX2NmZzsKPiAgIAl2b2lkIF9faW9tZW0gKmRldl9jZmc7Cj4gICAJc3Ry
dWN0IHZyaW5nX2luZm8gdnJpbmdbSUZDVkZfTUFYX1FVRVVFU107Cj4gICAJdm9pZCBfX2lvbWVt
ICogY29uc3QgKmJhc2U7Cj4gICAJY2hhciBjb25maWdfbXNpeF9uYW1lWzI1Nl07Cj4gICAJc3Ry
dWN0IHZkcGFfY2FsbGJhY2sgY29uZmlnX2NiOwo+IC0JdW5zaWduZWQgaW50IGNvbmZpZ19pcnE7
Cj4gLQkvKiB2aXJ0aW8tbmV0IG9yIHZpcnRpby1ibGsgZGV2aWNlIGNvbmZpZyBzaXplICovCj4g
LQl1MzIgY29uZmlnX3NpemU7Cj4gKwlpbnQgY29uZmlnX2lycTsKPiArCWludCB2cXNfc2hhcmVk
X2lycTsKPiArCXUxNiBucl92cmluZzsKPiAgIH07Cj4gICAKPiAgIHN0cnVjdCBpZmN2Zl9hZGFw
dGVyIHsKPiBAQCAtMTYwLDQgKzE2Nyw2IEBAIGludCBpZmN2Zl9zZXRfdnFfc3RhdGUoc3RydWN0
IGlmY3ZmX2h3ICpodywgdTE2IHFpZCwgdTE2IG51bSk7Cj4gICBzdHJ1Y3QgaWZjdmZfYWRhcHRl
ciAqdmZfdG9fYWRhcHRlcihzdHJ1Y3QgaWZjdmZfaHcgKmh3KTsKPiAgIGludCBpZmN2Zl9wcm9i
ZWRfdmlydGlvX25ldChzdHJ1Y3QgaWZjdmZfaHcgKmh3KTsKPiAgIHUzMiBpZmN2Zl9nZXRfY29u
ZmlnX3NpemUoc3RydWN0IGlmY3ZmX2h3ICpodyk7Cj4gK2ludCBpZmN2Zl9zZXRfdnFfdmVjdG9y
KHN0cnVjdCBpZmN2Zl9odyAqaHcsIHUxNiBxaWQsIGludCB2ZWN0b3IpOwo+ICtpbnQgaWZjdmZf
c2V0X2NvbmZpZ192ZWN0b3Ioc3RydWN0IGlmY3ZmX2h3ICpodywgaW50IHZlY3Rvcik7Cj4gICAj
ZW5kaWYgLyogX0lGQ1ZGX0hfICovCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmRwYS9pZmN2Zi9p
ZmN2Zl9tYWluLmMgYi9kcml2ZXJzL3ZkcGEvaWZjdmYvaWZjdmZfbWFpbi5jCj4gaW5kZXggNDRj
ODlhYjBiNmRhLi5jYTQxNDM5OWYwNDAgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92ZHBhL2lmY3Zm
L2lmY3ZmX21haW4uYwo+ICsrKyBiL2RyaXZlcnMvdmRwYS9pZmN2Zi9pZmN2Zl9tYWluLmMKPiBA
QCAtMTcsNiArMTcsNyBAQAo+ICAgI2RlZmluZSBEUklWRVJfQVVUSE9SICAgIkludGVsIENvcnBv
cmF0aW9uIgo+ICAgI2RlZmluZSBJRkNWRl9EUklWRVJfTkFNRSAgICAgICAiaWZjdmYiCj4gICAK
PiArLyogaGFuZGxlcyBjb25maWcgaW50ZXJydXB0ICovCgoKVGhpcyBzZWVtcyB1bnJlbGF0ZWQg
dG8gdGhlIHNoYXJlZCBJUlEgbG9naWMgYW5kIGl0IGxvb2tzIHVzZWxlc3Mgc2luY2UgCml0J3Mg
ZWFzaWx5IHRvIGRlZHVjZSBpdCBmcm9tIHRoZSBmdW5jdGlvbiBuYW1lIGJlbG93LgoKCj4gICBz
dGF0aWMgaXJxcmV0dXJuX3QgaWZjdmZfY29uZmlnX2NoYW5nZWQoaW50IGlycSwgdm9pZCAqYXJn
KQo+ICAgewo+ICAgCXN0cnVjdCBpZmN2Zl9odyAqdmYgPSBhcmc7Cj4gQEAgLTI3LDYgKzI4LDcg
QEAgc3RhdGljIGlycXJldHVybl90IGlmY3ZmX2NvbmZpZ19jaGFuZ2VkKGludCBpcnEsIHZvaWQg
KmFyZykKPiAgIAlyZXR1cm4gSVJRX0hBTkRMRUQ7Cj4gICB9Cj4gICAKPiArLyogaGFuZGxlcyB2
cXMgaW50ZXJydXB0ICovCgoKU28gZGlkIHRoaXMuCgoKPiAgIHN0YXRpYyBpcnFyZXR1cm5fdCBp
ZmN2Zl9pbnRyX2hhbmRsZXIoaW50IGlycSwgdm9pZCAqYXJnKQo+ICAgewo+ICAgCXN0cnVjdCB2
cmluZ19pbmZvICp2cmluZyA9IGFyZzsKPiBAQCAtMzcsMjQgKzM5LDc4IEBAIHN0YXRpYyBpcnFy
ZXR1cm5fdCBpZmN2Zl9pbnRyX2hhbmRsZXIoaW50IGlycSwgdm9pZCAqYXJnKQo+ICAgCXJldHVy
biBJUlFfSEFORExFRDsKPiAgIH0KPiAgIAo+ICsvKiBoYW5kbHMgdnFzIHNoYXJlZCBpbnRlcnJ1
cHQgKi8KPiArc3RhdGljIGlycXJldHVybl90IGlmY3ZmX3ZxX3NoYXJlZF9pbnRyX2hhbmRsZXIo
aW50IGlycSwgdm9pZCAqYXJnKQo+ICt7Cj4gKwlzdHJ1Y3QgaWZjdmZfaHcgKnZmID0gYXJnOwo+
ICsJc3RydWN0IHZyaW5nX2luZm8gKnZyaW5nOwo+ICsJaW50IGk7Cj4gKwo+ICsJZm9yIChpID0g
MDsgaSA8IHZmLT5ucl92cmluZzsgaSsrKSB7Cj4gKwkJdnJpbmcgPSAmdmYtPnZyaW5nW2ldOwo+
ICsJCWlmICh2cmluZy0+Y2IuY2FsbGJhY2spCj4gKwkJCXZmLT52cmluZy0+Y2IuY2FsbGJhY2so
dnJpbmctPmNiLnByaXZhdGUpOwo+ICsJfQo+ICsKPiArCXJldHVybiBJUlFfSEFORExFRDsKPiAr
fQo+ICsKPiArLyogaGFuZGxlcyBhIHNoYXJlZCBpbnRlcnJ1cHQgZm9yIHZxcyBhbmQgY29uZmln
ICovCj4gK3N0YXRpYyBpcnFyZXR1cm5fdCBpZmN2Zl9kZXZfc2hhcmVkX2ludHJfaGFuZGxlcihp
bnQgaXJxLCB2b2lkICphcmcpCj4gK3sKPiArCXN0cnVjdCBpZmN2Zl9odyAqdmYgPSBhcmc7Cj4g
Kwl1OCBpc3I7Cj4gKwo+ICsJaXNyID0gaWZjX2lvcmVhZDgodmYtPmlzcik7CgoKV2UgbmVlZCB0
byBleGFjdGx5IHdoYXQgdnBfaW50ZXJydXB0IGRvIGhlcmUuIENoZWNraW5nIGFnYWluc3QgdmYt
PmlzciAKZmlyc3QgYW5kIHJldHVybiBJUlFfTk9ORSBpZiBpdCBpcyBub3Qgc2V0LgoKQWx3YXlz
IHJldHVybiBJUlFfSEFORExFRCB3aWxsIGJyZWFrIHRoZSBkZXZpY2Ugd2hvIHNoYXJlcyBhbiBp
cnEgd2l0aCAKSUZDVkYuCgoKPiArCWlmIChpc3IgJiBWSVJUSU9fUENJX0lTUl9DT05GSUcpCj4g
KwkJaWZjdmZfY29uZmlnX2NoYW5nZWQoaXJxLCBhcmcpOwo+ICsKPiArCXJldHVybiBpZmN2Zl92
cV9zaGFyZWRfaW50cl9oYW5kbGVyKGlycSwgYXJnKTsKPiArfQo+ICsKPiAgIHN0YXRpYyB2b2lk
IGlmY3ZmX2ZyZWVfaXJxX3ZlY3RvcnModm9pZCAqZGF0YSkKPiAgIHsKPiAgIAlwY2lfZnJlZV9p
cnFfdmVjdG9ycyhkYXRhKTsKPiAgIH0KPiAgIAo+IC1zdGF0aWMgdm9pZCBpZmN2Zl9mcmVlX2ly
cShzdHJ1Y3QgaWZjdmZfYWRhcHRlciAqYWRhcHRlciwgaW50IHF1ZXVlcykKPiArc3RhdGljIHZv
aWQgaWZjdmZfZnJlZV92cV9pcnEoc3RydWN0IGlmY3ZmX2FkYXB0ZXIgKmFkYXB0ZXIsIGludCBx
dWV1ZXMpCj4gICB7Cj4gICAJc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBhZGFwdGVyLT5wZGV2Owo+
ICAgCXN0cnVjdCBpZmN2Zl9odyAqdmYgPSAmYWRhcHRlci0+dmY7Cj4gICAJaW50IGk7Cj4gICAK
PiArCWlmICh2Zi0+bXNpeF92ZWN0b3Jfc3RhdHVzID09IE1TSVhfVkVDVE9SX1BFUl9WUV9BTkRf
Q09ORklHKSB7Cj4gKwkJZm9yIChpID0gMDsgaSA8IHF1ZXVlczsgaSsrKSB7Cj4gKwkJCWRldm1f
ZnJlZV9pcnEoJnBkZXYtPmRldiwgdmYtPnZyaW5nW2ldLmlycSwgJnZmLT52cmluZ1tpXSk7Cj4g
KwkJCXZmLT52cmluZ1tpXS5pcnEgPSAtRUlOVkFMOwo+ICsJCX0KPiArCX0gZWxzZSB7Cj4gKwkJ
ZGV2bV9mcmVlX2lycSgmcGRldi0+ZGV2LCB2Zi0+dnFzX3NoYXJlZF9pcnEsIHZmKTsKPiArCQl2
Zi0+dnFzX3NoYXJlZF9pcnEgPSAtRUlOVkFMOwo+ICsJfQo+ICt9Cj4gICAKPiAtCWZvciAoaSA9
IDA7IGkgPCBxdWV1ZXM7IGkrKykgewo+IC0JCWRldm1fZnJlZV9pcnEoJnBkZXYtPmRldiwgdmYt
PnZyaW5nW2ldLmlycSwgJnZmLT52cmluZ1tpXSk7Cj4gLQkJdmYtPnZyaW5nW2ldLmlycSA9IC1F
SU5WQUw7Cj4gK3N0YXRpYyB2b2lkIGlmY3ZmX2ZyZWVfY29uZmlnX2lycShzdHJ1Y3QgaWZjdmZf
YWRhcHRlciAqYWRhcHRlcikKPiArewo+ICsJc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBhZGFwdGVy
LT5wZGV2Owo+ICsJc3RydWN0IGlmY3ZmX2h3ICp2ZiA9ICZhZGFwdGVyLT52ZjsKPiArCj4gKwkv
KiBJZiB0aGUgaXJxIGlzIHNoYXJlZCBieSBhbGwgdnFzIGFuZCB0aGUgY29uZmlnIGludGVycnVw
dCwKPiArCSAqIGl0IGlzIGFscmVhZHkgZnJlZWQgaW4gaWZjdmZfZnJlZV92cV9pcnEsIHNvIGhl
cmUgb25seQo+ICsJICogbmVlZCB0byBmcmVlIGNvbmZpZyBpcnEgd2hlbiBtc2l4X3ZlY3Rvcl9z
dGF0dXMgIT0gTVNJWF9WRUNUT1JfREVWX1NIQVJFRAo+ICsJICovCj4gKwlpZiAodmYtPm1zaXhf
dmVjdG9yX3N0YXR1cyAhPSBNU0lYX1ZFQ1RPUl9ERVZfU0hBUkVEKSB7Cj4gKwkJZGV2bV9mcmVl
X2lycSgmcGRldi0+ZGV2LCB2Zi0+Y29uZmlnX2lycSwgdmYpOwo+ICsJCXZmLT5jb25maWdfaXJx
ID0gLUVJTlZBTDsKPiAgIAl9Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGlmY3ZmX2ZyZWVfaXJx
KHN0cnVjdCBpZmN2Zl9hZGFwdGVyICphZGFwdGVyLCBpbnQgcXVldWVzKQo+ICt7Cj4gKwlzdHJ1
Y3QgcGNpX2RldiAqcGRldiA9IGFkYXB0ZXItPnBkZXY7Cj4gICAKPiAtCWRldm1fZnJlZV9pcnEo
JnBkZXYtPmRldiwgdmYtPmNvbmZpZ19pcnEsIHZmKTsKPiArCWlmY3ZmX2ZyZWVfdnFfaXJxKGFk
YXB0ZXIsIHF1ZXVlcyk7Cj4gKwlpZmN2Zl9mcmVlX2NvbmZpZ19pcnEoYWRhcHRlcik7Cj4gICAJ
aWZjdmZfZnJlZV9pcnFfdmVjdG9ycyhwZGV2KTsKPiAgIH0KPiAgIAo+IEBAIC04Niw1OCArMTQy
LDE3MiBAQCBzdGF0aWMgaW50IGlmY3ZmX2FsbG9jX3ZlY3RvcnMoc3RydWN0IGlmY3ZmX2FkYXB0
ZXIgKmFkYXB0ZXIpCj4gICAJcmV0dXJuIHJldDsKPiAgIH0KPiAgIAo+IC1zdGF0aWMgaW50IGlm
Y3ZmX3JlcXVlc3RfaXJxKHN0cnVjdCBpZmN2Zl9hZGFwdGVyICphZGFwdGVyKQo+ICtzdGF0aWMg
aW50IGlmY3ZmX3JlcXVlc3RfcGVyX3ZxX2lycShzdHJ1Y3QgaWZjdmZfYWRhcHRlciAqYWRhcHRl
cikKPiAgIHsKPiAgIAlzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IGFkYXB0ZXItPnBkZXY7Cj4gICAJ
c3RydWN0IGlmY3ZmX2h3ICp2ZiA9ICZhZGFwdGVyLT52ZjsKPiAtCWludCB2ZWN0b3IsIG52ZWN0
b3JzLCBpLCByZXQsIGlycTsKPiAtCXUxNiBtYXhfaW50cjsKPiArCWludCBpLCB2ZWN0b3IsIHJl
dCwgaXJxOwo+ICAgCj4gLQludmVjdG9ycyA9IGlmY3ZmX2FsbG9jX3ZlY3RvcnMoYWRhcHRlcik7
Cj4gLQlpZiAoIShudmVjdG9ycyA+IDApKQo+IC0JCXJldHVybiBudmVjdG9yczsKPiArCWZvciAo
aSA9IDA7IGkgPCB2Zi0+bnJfdnJpbmc7IGkrKykgewo+ICsJCXNucHJpbnRmKHZmLT52cmluZ1tp
XS5tc2l4X25hbWUsIDI1NiwgImlmY3ZmWyVzXS0lZFxuIiwgcGNpX25hbWUocGRldiksIGkpOwo+
ICsJCXZlY3RvciA9IGk7Cj4gKwkJaXJxID0gcGNpX2lycV92ZWN0b3IocGRldiwgdmVjdG9yKTsK
PiArCQlyZXQgPSBkZXZtX3JlcXVlc3RfaXJxKCZwZGV2LT5kZXYsIGlycSwKPiArCQkJCSAgICAg
ICBpZmN2Zl9pbnRyX2hhbmRsZXIsIDAsCj4gKwkJCQkgICAgICAgdmYtPnZyaW5nW2ldLm1zaXhf
bmFtZSwKPiArCQkJCSAgICAgICAmdmYtPnZyaW5nW2ldKTsKPiArCQlpZiAocmV0KSB7Cj4gKwkJ
CUlGQ1ZGX0VSUihwZGV2LCAiRmFpbGVkIHRvIHJlcXVlc3QgaXJxIGZvciB2cSAlZFxuIiwgaSk7
Cj4gKwkJCWlmY3ZmX2ZyZWVfdnFfaXJxKGFkYXB0ZXIsIGkpOwo+ICsJCX0gZWxzZSB7Cj4gKwkJ
CXZmLT52cmluZ1tpXS5pcnEgPSBpcnE7Cj4gKwkJCWlmY3ZmX3NldF92cV92ZWN0b3IodmYsIGks
IHZlY3Rvcik7Cj4gKwkJfQo+ICsJfQo+ICAgCj4gLQltYXhfaW50ciA9IHZmLT5ucl92cmluZyAr
IDE7Cj4gKwl2Zi0+dnFzX3NoYXJlZF9pcnEgPSAtRUlOVkFMOwo+ICsKPiArCXJldHVybiAwOwo+
ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGlmY3ZmX3JlcXVlc3Rfc2hhcmVkX3ZxX2lycShzdHJ1Y3Qg
aWZjdmZfYWRhcHRlciAqYWRhcHRlcikKPiArewo+ICsJc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBh
ZGFwdGVyLT5wZGV2Owo+ICsJc3RydWN0IGlmY3ZmX2h3ICp2ZiA9ICZhZGFwdGVyLT52ZjsKPiAr
CWludCBpLCB2ZWN0b3IsIHJldCwgaXJxOwo+ICsKPiArCXZlY3RvciA9IDA7Cj4gKwkvKiByZXVz
ZSBtc2l4X25hbWVbMjU2XSBzcGFjZSBvZiB2cmluZzAgdG8gc3RvcmUgc2hhcmVkIHZxcyBpbnRl
cnJ1cHQgbmFtZSAqLwoKCkkgdGhpbmsgd2UgY2FuIHJlbW92ZSB0aGlzIGNvbW1lbnQgc2luY2Ug
dGhlIGNvZGUgaXMgc3RyYWlnaHRmb3J3YXJkLgoKCj4gKwlzbnByaW50Zih2Zi0+dnJpbmdbMF0u
bXNpeF9uYW1lLCAyNTYsICJpZmN2Zlslc10tdnFzLXNoYXJlZC1pcnFcbiIsIHBjaV9uYW1lKHBk
ZXYpKTsKPiArCWlycSA9IHBjaV9pcnFfdmVjdG9yKHBkZXYsIHZlY3Rvcik7Cj4gKwlyZXQgPSBk
ZXZtX3JlcXVlc3RfaXJxKCZwZGV2LT5kZXYsIGlycSwKPiArCQkJICAgICAgIGlmY3ZmX3ZxX3No
YXJlZF9pbnRyX2hhbmRsZXIsIDAsCj4gKwkJCSAgICAgICB2Zi0+dnJpbmdbMF0ubXNpeF9uYW1l
LCB2Zik7Cj4gKwlpZiAocmV0KSB7Cj4gKwkJSUZDVkZfRVJSKHBkZXYsICJGYWlsZWQgdG8gcmVx
dWVzdCBzaGFyZWQgaXJxIGZvciB2ZlxuIik7Cj4gKwo+ICsJCXJldHVybiByZXQ7Cj4gKwl9Cj4g
Kwo+ICsJdmYtPnZxc19zaGFyZWRfaXJxID0gaXJxOwo+ICsJZm9yIChpID0gMDsgaSA8IHZmLT5u
cl92cmluZzsgaSsrKSB7Cj4gKwkJdmYtPnZyaW5nW2ldLmlycSA9IC1FSU5WQUw7Cj4gKwkJaWZj
dmZfc2V0X3ZxX3ZlY3Rvcih2ZiwgaSwgdmVjdG9yKTsKPiArCX0KPiArCj4gKwlyZXR1cm4gMDsK
PiArCj4gK30KPiArCj4gK3N0YXRpYyBpbnQgaWZjdmZfcmVxdWVzdF9kZXZfc2hhcmVkX2lycShz
dHJ1Y3QgaWZjdmZfYWRhcHRlciAqYWRhcHRlcikKPiArewo+ICsJc3RydWN0IHBjaV9kZXYgKnBk
ZXYgPSBhZGFwdGVyLT5wZGV2Owo+ICsJc3RydWN0IGlmY3ZmX2h3ICp2ZiA9ICZhZGFwdGVyLT52
ZjsKPiArCWludCBpLCB2ZWN0b3IsIHJldCwgaXJxOwo+ICsKPiArCXZlY3RvciA9IDA7Cj4gKwkv
KiByZXVzZSBtc2l4X25hbWVbMjU2XSBzcGFjZSBvZiB2cmluZzAgdG8gc3RvcmUgc2hhcmVkIGRl
dmljZSBpbnRlcnJ1cHQgbmFtZSAqLwo+ICsJc25wcmludGYodmYtPnZyaW5nWzBdLm1zaXhfbmFt
ZSwgMjU2LCAiaWZjdmZbJXNdLWRldi1zaGFyZWQtaXJxXG4iLCBwY2lfbmFtZShwZGV2KSk7Cj4g
KwlpcnEgPSBwY2lfaXJxX3ZlY3RvcihwZGV2LCB2ZWN0b3IpOwo+ICsJcmV0ID0gZGV2bV9yZXF1
ZXN0X2lycSgmcGRldi0+ZGV2LCBpcnEsCj4gKwkJCSAgICAgICBpZmN2Zl9kZXZfc2hhcmVkX2lu
dHJfaGFuZGxlciwgMCwKPiArCQkJICAgICAgIHZmLT52cmluZ1swXS5tc2l4X25hbWUsIHZmKTsK
PiArCWlmIChyZXQpIHsKPiArCQlJRkNWRl9FUlIocGRldiwgIkZhaWxlZCB0byByZXF1ZXN0IHNo
YXJlZCBpcnEgZm9yIHZmXG4iKTsKPiAgIAo+IC0JcmV0ID0gcGNpX2FsbG9jX2lycV92ZWN0b3Jz
KHBkZXYsIG1heF9pbnRyLAo+IC0JCQkJICAgIG1heF9pbnRyLCBQQ0lfSVJRX01TSVgpOwo+IC0J
aWYgKHJldCA8IDApIHsKPiAtCQlJRkNWRl9FUlIocGRldiwgIkZhaWxlZCB0byBhbGxvYyBJUlEg
dmVjdG9yc1xuIik7Cj4gICAJCXJldHVybiByZXQ7Cj4gICAJfQo+ICAgCj4gKwl2Zi0+dnFzX3No
YXJlZF9pcnEgPSBpcnE7Cj4gKwlmb3IgKGkgPSAwOyBpIDwgdmYtPm5yX3ZyaW5nOyBpKyspIHsK
PiArCQl2Zi0+dnJpbmdbaV0uaXJxID0gLUVJTlZBTDsKPiArCQlpZmN2Zl9zZXRfdnFfdmVjdG9y
KHZmLCBpLCB2ZWN0b3IpOwo+ICsJfQo+ICsKPiArCXZmLT5jb25maWdfaXJxID0gaXJxOwo+ICsJ
aWZjdmZfc2V0X2NvbmZpZ192ZWN0b3IodmYsIHZlY3Rvcik7Cj4gKwo+ICsJcmV0dXJuIDA7Cj4g
Kwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IGlmY3ZmX3JlcXVlc3RfdnFfaXJxKHN0cnVjdCBpZmN2
Zl9hZGFwdGVyICphZGFwdGVyKQo+ICt7Cj4gKwlzdHJ1Y3QgaWZjdmZfaHcgKnZmID0gJmFkYXB0
ZXItPnZmOwo+ICsJaW50IHJldDsKPiArCj4gKwlpZiAodmYtPm1zaXhfdmVjdG9yX3N0YXR1cyA9
PSBNU0lYX1ZFQ1RPUl9QRVJfVlFfQU5EX0NPTkZJRykKPiArCQlyZXQgPSBpZmN2Zl9yZXF1ZXN0
X3Blcl92cV9pcnEoYWRhcHRlcik7Cj4gKwllbHNlCj4gKwkJcmV0ID0gaWZjdmZfcmVxdWVzdF9z
aGFyZWRfdnFfaXJxKGFkYXB0ZXIpOwo+ICsKPiArCXJldHVybiByZXQ7Cj4gK30KPiArCj4gK3N0
YXRpYyBpbnQgaWZjdmZfcmVxdWVzdF9jb25maWdfaXJxKHN0cnVjdCBpZmN2Zl9hZGFwdGVyICph
ZGFwdGVyKQo+ICt7Cj4gKwlzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IGFkYXB0ZXItPnBkZXY7Cj4g
KwlzdHJ1Y3QgaWZjdmZfaHcgKnZmID0gJmFkYXB0ZXItPnZmOwo+ICsJaW50IGNvbmZpZ192ZWN0
b3IsIHJldDsKPiArCj4gKwlpZiAodmYtPm1zaXhfdmVjdG9yX3N0YXR1cyA9PSBNU0lYX1ZFQ1RP
Ul9ERVZfU0hBUkVEKQo+ICsJCXJldHVybiAwOwo+ICsKPiArCWlmICh2Zi0+bXNpeF92ZWN0b3Jf
c3RhdHVzID09IE1TSVhfVkVDVE9SX1BFUl9WUV9BTkRfQ09ORklHKQo+ICsJCS8qIHZlY3RvciAw
IH4gdmYtPm5yX3ZyaW5nIGZvciB2cXMsIG51bSB2Zi0+bnJfdnJpbmcgdmVjdG9yIGZvciBjb25m
aWcgaW50ZXJydXB0ICovCj4gKwkJY29uZmlnX3ZlY3RvciA9IHZmLT5ucl92cmluZzsKPiArCj4g
KwlpZiAodmYtPm1zaXhfdmVjdG9yX3N0YXR1cyA9PSAgTVNJWF9WRUNUT1JfU0hBUkVEX1ZRX0FO
RF9DT05GSUcpCj4gKwkJLyogdmVjdG9yIDAgZm9yIHZxcyBhbmQgMSBmb3IgY29uZmlnIGludGVy
cnVwdCAqLwo+ICsJCWNvbmZpZ192ZWN0b3IgPSAxOwo+ICsKPiAgIAlzbnByaW50Zih2Zi0+Y29u
ZmlnX21zaXhfbmFtZSwgMjU2LCAiaWZjdmZbJXNdLWNvbmZpZ1xuIiwKPiAgIAkJIHBjaV9uYW1l
KHBkZXYpKTsKPiAtCXZlY3RvciA9IDA7Cj4gLQl2Zi0+Y29uZmlnX2lycSA9IHBjaV9pcnFfdmVj
dG9yKHBkZXYsIHZlY3Rvcik7Cj4gKwl2Zi0+Y29uZmlnX2lycSA9IHBjaV9pcnFfdmVjdG9yKHBk
ZXYsIGNvbmZpZ192ZWN0b3IpOwo+ICAgCXJldCA9IGRldm1fcmVxdWVzdF9pcnEoJnBkZXYtPmRl
diwgdmYtPmNvbmZpZ19pcnEsCj4gICAJCQkgICAgICAgaWZjdmZfY29uZmlnX2NoYW5nZWQsIDAs
Cj4gICAJCQkgICAgICAgdmYtPmNvbmZpZ19tc2l4X25hbWUsIHZmKTsKPiAgIAlpZiAocmV0KSB7
Cj4gICAJCUlGQ1ZGX0VSUihwZGV2LCAiRmFpbGVkIHRvIHJlcXVlc3QgY29uZmlnIGlycVxuIik7
Cj4gKwkJaWZjdmZfZnJlZV92cV9pcnEoYWRhcHRlciwgdmYtPm5yX3ZyaW5nKTsKPiAgIAkJcmV0
dXJuIHJldDsKPiAgIAl9Cj4gICAKPiAtCWZvciAoaSA9IDA7IGkgPCB2Zi0+bnJfdnJpbmc7IGkr
Kykgewo+IC0JCXNucHJpbnRmKHZmLT52cmluZ1tpXS5tc2l4X25hbWUsIDI1NiwgImlmY3ZmWyVz
XS0lZFxuIiwKPiAtCQkJIHBjaV9uYW1lKHBkZXYpLCBpKTsKPiAtCQl2ZWN0b3IgPSBpICsgSUZD
VkZfTVNJX1FVRVVFX09GRjsKPiAtCQlpcnEgPSBwY2lfaXJxX3ZlY3RvcihwZGV2LCB2ZWN0b3Ip
Owo+IC0JCXJldCA9IGRldm1fcmVxdWVzdF9pcnEoJnBkZXYtPmRldiwgaXJxLAo+IC0JCQkJICAg
ICAgIGlmY3ZmX2ludHJfaGFuZGxlciwgMCwKPiAtCQkJCSAgICAgICB2Zi0+dnJpbmdbaV0ubXNp
eF9uYW1lLAo+IC0JCQkJICAgICAgICZ2Zi0+dnJpbmdbaV0pOwo+IC0JCWlmIChyZXQpIHsKPiAt
CQkJSUZDVkZfRVJSKHBkZXYsCj4gLQkJCQkgICJGYWlsZWQgdG8gcmVxdWVzdCBpcnEgZm9yIHZx
ICVkXG4iLCBpKTsKPiAtCQkJaWZjdmZfZnJlZV9pcnEoYWRhcHRlciwgaSk7Cj4gKwlpZmN2Zl9z
ZXRfY29uZmlnX3ZlY3Rvcih2ZiwgY29uZmlnX3ZlY3Rvcik7Cj4gICAKPiAtCQkJcmV0dXJuIHJl
dDsKPiAtCQl9Cj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIGludCBpZmN2Zl9yZXF1
ZXN0X2lycShzdHJ1Y3QgaWZjdmZfYWRhcHRlciAqYWRhcHRlcikKPiArewoKCkFzIHJlcGxpZWQg
YWJvdmUsIEkgdGhpbmsgaGF2aW5nIHR3byBtb2RlcyBzaG91bGQgYmUgc3VmZmljaWVudCBhbmQg
dGhlIApjb2RlIGNvdWxkIGJlIGdyZWF0bHkgc2ltcGxpZmllZC4KClRoYW5rcwoKCj4gKwlzdHJ1
Y3QgaWZjdmZfaHcgKnZmID0gJmFkYXB0ZXItPnZmOwo+ICsJaW50IG52ZWN0b3JzLCByZXQsIG1h
eF9pbnRyOwo+ICAgCj4gLQkJdmYtPnZyaW5nW2ldLmlycSA9IGlycTsKPiArCW52ZWN0b3JzID0g
aWZjdmZfYWxsb2NfdmVjdG9ycyhhZGFwdGVyKTsKPiArCWlmICghKG52ZWN0b3JzID4gMCkpCj4g
KwkJcmV0dXJuIG52ZWN0b3JzOwo+ICsKPiArCXZmLT5tc2l4X3ZlY3Rvcl9zdGF0dXMgPSBNU0lY
X1ZFQ1RPUl9QRVJfVlFfQU5EX0NPTkZJRzsKPiArCW1heF9pbnRyID0gdmYtPm5yX3ZyaW5nICsg
MTsKPiArCWlmIChudmVjdG9ycyA8IG1heF9pbnRyKQo+ICsJCXZmLT5tc2l4X3ZlY3Rvcl9zdGF0
dXMgPSBNU0lYX1ZFQ1RPUl9TSEFSRURfVlFfQU5EX0NPTkZJRzsKPiArCj4gKwlpZiAobnZlY3Rv
cnMgPT0gMSkgewo+ICsJCXZmLT5tc2l4X3ZlY3Rvcl9zdGF0dXMgPSBNU0lYX1ZFQ1RPUl9ERVZf
U0hBUkVEOwo+ICsJCXJldCA9IGlmY3ZmX3JlcXVlc3RfZGV2X3NoYXJlZF9pcnEoYWRhcHRlcik7
Cj4gKwo+ICsJCXJldHVybiByZXQ7Cj4gICAJfQo+ICAgCj4gKwlyZXQgPSBpZmN2Zl9yZXF1ZXN0
X3ZxX2lycShhZGFwdGVyKTsKPiArCWlmIChyZXQpCj4gKwkJcmV0dXJuIHJldDsKPiArCj4gKwly
ZXQgPSBpZmN2Zl9yZXF1ZXN0X2NvbmZpZ19pcnEoYWRhcHRlcik7Cj4gKwo+ICsJaWYgKHJldCkK
PiArCQlyZXR1cm4gcmV0Owo+ICsKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+IEBAIC00NDEs
NyArNjExLDEwIEBAIHN0YXRpYyBpbnQgaWZjdmZfdmRwYV9nZXRfdnFfaXJxKHN0cnVjdCB2ZHBh
X2RldmljZSAqdmRwYV9kZXYsCj4gICB7Cj4gICAJc3RydWN0IGlmY3ZmX2h3ICp2ZiA9IHZkcGFf
dG9fdmYodmRwYV9kZXYpOwo+ICAgCj4gLQlyZXR1cm4gdmYtPnZyaW5nW3FpZF0uaXJxOwo+ICsJ
aWYgKHZmLT52cXNfc2hhcmVkX2lycSA8IDApCj4gKwkJcmV0dXJuIHZmLT52cmluZ1txaWRdLmly
cTsKPiArCWVsc2UKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiAgIH0KPiAgIAo+ICAgc3RhdGljIHN0
cnVjdCB2ZHBhX25vdGlmaWNhdGlvbl9hcmVhIGlmY3ZmX2dldF92cV9ub3RpZmljYXRpb24oc3Ry
dWN0IHZkcGFfZGV2aWNlICp2ZHBhX2RldiwKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXph
dGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRh
dGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
