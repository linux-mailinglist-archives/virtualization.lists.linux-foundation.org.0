Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from mail.linuxfoundation.org (mail.linuxfoundation.org [140.211.169.12])
	by mail.lfdr.de (Postfix) with ESMTPS id A2870D5971
	for <lists.virtualization@lfdr.de>; Mon, 14 Oct 2019 03:56:44 +0200 (CEST)
Received: from mail.linux-foundation.org (localhost [127.0.0.1])
	by mail.linuxfoundation.org (Postfix) with ESMTP id 7475B24F5;
	Mon, 14 Oct 2019 01:56:28 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@mail.linuxfoundation.org
Received: from smtp1.linuxfoundation.org (smtp1.linux-foundation.org
	[172.17.192.35])
	by mail.linuxfoundation.org (Postfix) with ESMTPS id 313F224DB
	for <virtualization@lists.linux-foundation.org>;
	Mon, 14 Oct 2019 01:47:26 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by smtp1.linuxfoundation.org (Postfix) with ESMTPS id 7F1FD6CE
	for <virtualization@lists.linux-foundation.org>;
	Mon, 14 Oct 2019 01:47:25 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx08.intmail.prod.int.phx2.redhat.com
	[10.5.11.23])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mx1.redhat.com (Postfix) with ESMTPS id 16D675945E;
	Mon, 14 Oct 2019 01:47:25 +0000 (UTC)
Received: from [10.72.12.117] (ovpn-12-117.pek2.redhat.com [10.72.12.117])
	by smtp.corp.redhat.com (Postfix) with ESMTP id D0B1219C58;
	Mon, 14 Oct 2019 01:47:19 +0000 (UTC)
Subject: Re: [PATCH RFC v1 2/2] vhost: batching fetches
To: "Michael S. Tsirkin" <mst@redhat.com>
References: <20191011134358.16912-1-mst@redhat.com>
	<20191011134358.16912-3-mst@redhat.com>
	<3be186d8-cde6-aa08-0446-1ec7fec0efe0@redhat.com>
	<20191012162759-mutt-send-email-mst@kernel.org>
From: Jason Wang <jasowang@redhat.com>
Message-ID: <b6f24555-aaf8-b470-ab16-099055364cfc@redhat.com>
Date: Mon, 14 Oct 2019 09:47:18 +0800
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
	Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20191012162759-mutt-send-email-mst@kernel.org>
Content-Language: en-US
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.23
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
	(mx1.redhat.com [10.5.110.39]);
	Mon, 14 Oct 2019 01:47:25 +0000 (UTC)
X-Spam-Status: No, score=-6.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_HI
	autolearn=ham version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	smtp1.linux-foundation.org
Cc: netdev@vger.kernel.org, linux-kernel@vger.kernel.org, kvm@vger.kernel.org,
	virtualization@lists.linux-foundation.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.12
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Sender: virtualization-bounces@lists.linux-foundation.org
Errors-To: virtualization-bounces@lists.linux-foundation.org

Ck9uIDIwMTkvMTAvMTMg5LiK5Y2INDozNiwgTWljaGFlbCBTLiBUc2lya2luIHdyb3RlOgo+IE9u
IFNhdCwgT2N0IDEyLCAyMDE5IGF0IDAzOjMwOjUyUE0gKzA4MDAsIEphc29uIFdhbmcgd3JvdGU6
Cj4+IE9uIDIwMTkvMTAvMTEg5LiL5Y2IOTo0NiwgTWljaGFlbCBTLiBUc2lya2luIHdyb3RlOgo+
Pj4gV2l0aCB0aGlzIHBhdGNoIGFwcGxpZWQsIG5ldyBhbmQgb2xkIGNvZGUgcGVyZm9ybSBpZGVu
dGljYWxseS4KPj4+Cj4+PiBMb3RzIG9mIGV4dHJhIG9wdGltaXphdGlvbnMgYXJlIG5vdyBwb3Nz
aWJsZSwgZS5nLgo+Pj4gd2UgY2FuIGZldGNoIG11bHRpcGxlIGhlYWRzIHdpdGggY29weV9mcm9t
L3RvX3VzZXIgbm93Lgo+Pj4gV2UgY2FuIGdldCByaWQgb2YgbWFpbnRhaW5pbmcgdGhlIGxvZyBh
cnJheS4gIEV0YyBldGMuCj4+Pgo+Pj4gU2lnbmVkLW9mZi1ieTogTWljaGFlbCBTLiBUc2lya2lu
IDxtc3RAcmVkaGF0LmNvbT4KPj4+IC0tLQo+Pj4gICAgZHJpdmVycy92aG9zdC90ZXN0LmMgIHwg
IDIgKy0KPj4+ICAgIGRyaXZlcnMvdmhvc3Qvdmhvc3QuYyB8IDUwICsrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKy0tLS0tLS0KPj4+ICAgIGRyaXZlcnMvdmhvc3Qvdmhvc3QuaCB8
ICA0ICsrKy0KPj4+ICAgIDMgZmlsZXMgY2hhbmdlZCwgNDYgaW5zZXJ0aW9ucygrKSwgMTAgZGVs
ZXRpb25zKC0pCj4+Pgo+Pj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmhvc3QvdGVzdC5jIGIvZHJp
dmVycy92aG9zdC90ZXN0LmMKPj4+IGluZGV4IDM5YTAxOGE3YWYyZC4uZTNhOGU5ZGIyMmNkIDEw
MDY0NAo+Pj4gLS0tIGEvZHJpdmVycy92aG9zdC90ZXN0LmMKPj4+ICsrKyBiL2RyaXZlcnMvdmhv
c3QvdGVzdC5jCj4+PiBAQCAtMTI4LDcgKzEyOCw3IEBAIHN0YXRpYyBpbnQgdmhvc3RfdGVzdF9v
cGVuKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBmaWxlICpmKQo+Pj4gICAgCWRldiA9ICZu
LT5kZXY7Cj4+PiAgICAJdnFzW1ZIT1NUX1RFU1RfVlFdID0gJm4tPnZxc1tWSE9TVF9URVNUX1ZR
XTsKPj4+ICAgIAluLT52cXNbVkhPU1RfVEVTVF9WUV0uaGFuZGxlX2tpY2sgPSBoYW5kbGVfdnFf
a2ljazsKPj4+IC0Jdmhvc3RfZGV2X2luaXQoZGV2LCB2cXMsIFZIT1NUX1RFU1RfVlFfTUFYLCBV
SU9fTUFYSU9WLAo+Pj4gKwl2aG9zdF9kZXZfaW5pdChkZXYsIHZxcywgVkhPU1RfVEVTVF9WUV9N
QVgsIFVJT19NQVhJT1YgKyA2NCwKPj4+ICAgIAkJICAgICAgIFZIT1NUX1RFU1RfUEtUX1dFSUdI
VCwgVkhPU1RfVEVTVF9XRUlHSFQpOwo+Pj4gICAgCWYtPnByaXZhdGVfZGF0YSA9IG47Cj4+PiBk
aWZmIC0tZ2l0IGEvZHJpdmVycy92aG9zdC92aG9zdC5jIGIvZHJpdmVycy92aG9zdC92aG9zdC5j
Cj4+PiBpbmRleCAzNjY2MWQ2Y2I1MWYuLmFhMzgzZTg0Nzg2NSAxMDA2NDQKPj4+IC0tLSBhL2Ry
aXZlcnMvdmhvc3Qvdmhvc3QuYwo+Pj4gKysrIGIvZHJpdmVycy92aG9zdC92aG9zdC5jCj4+PiBA
QCAtMzAyLDYgKzMwMiw3IEBAIHN0YXRpYyB2b2lkIHZob3N0X3ZxX3Jlc2V0KHN0cnVjdCB2aG9z
dF9kZXYgKmRldiwKPj4+ICAgIHsKPj4+ICAgIAl2cS0+bnVtID0gMTsKPj4+ICAgIAl2cS0+bmRl
c2NzID0gMDsKPj4+ICsJdnEtPmZpcnN0X2Rlc2MgPSAwOwo+Pj4gICAgCXZxLT5kZXNjID0gTlVM
TDsKPj4+ICAgIAl2cS0+YXZhaWwgPSBOVUxMOwo+Pj4gICAgCXZxLT51c2VkID0gTlVMTDsKPj4+
IEBAIC0zOTAsNiArMzkxLDcgQEAgc3RhdGljIGxvbmcgdmhvc3RfZGV2X2FsbG9jX2lvdmVjcyhz
dHJ1Y3Qgdmhvc3RfZGV2ICpkZXYpCj4+PiAgICAJZm9yIChpID0gMDsgaSA8IGRldi0+bnZxczsg
KytpKSB7Cj4+PiAgICAJCXZxID0gZGV2LT52cXNbaV07Cj4+PiAgICAJCXZxLT5tYXhfZGVzY3Mg
PSBkZXYtPmlvdl9saW1pdDsKPj4+ICsJCXZxLT5iYXRjaF9kZXNjcyA9IGRldi0+aW92X2xpbWl0
IC0gVUlPX01BWElPVjsKPj4+ICAgIAkJdnEtPmRlc2NzID0ga21hbGxvY19hcnJheSh2cS0+bWF4
X2Rlc2NzLAo+Pj4gICAgCQkJCQkgIHNpemVvZigqdnEtPmRlc2NzKSwKPj4+ICAgIAkJCQkJICBH
RlBfS0VSTkVMKTsKPj4+IEBAIC0yMzY2LDYgKzIzNjgsOCBAQCBzdGF0aWMgdm9pZCBwb3Bfc3Bs
aXRfZGVzYyhzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSkKPj4+ICAgIAktLXZxLT5uZGVzY3M7
Cj4+PiAgICB9Cj4+PiArI2RlZmluZSBWSE9TVF9ERVNDX0ZMQUdTIChWUklOR19ERVNDX0ZfSU5E
SVJFQ1QgfCBWUklOR19ERVNDX0ZfV1JJVEUgfCBcCj4+PiArCQkJICBWUklOR19ERVNDX0ZfTkVY
VCkKPj4+ICAgIHN0YXRpYyBpbnQgcHVzaF9zcGxpdF9kZXNjKHN0cnVjdCB2aG9zdF92aXJ0cXVl
dWUgKnZxLCBzdHJ1Y3QgdnJpbmdfZGVzYyAqZGVzYywgdTE2IGlkKQo+Pj4gICAgewo+Pj4gICAg
CXN0cnVjdCB2aG9zdF9kZXNjICpoOwo+Pj4gQEAgLTIzNzUsNyArMjM3OSw3IEBAIHN0YXRpYyBp
bnQgcHVzaF9zcGxpdF9kZXNjKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxLCBzdHJ1Y3QgdnJp
bmdfZGVzYyAqZGVzYywKPj4+ICAgIAloID0gJnZxLT5kZXNjc1t2cS0+bmRlc2NzKytdOwo+Pj4g
ICAgCWgtPmFkZHIgPSB2aG9zdDY0X3RvX2NwdSh2cSwgZGVzYy0+YWRkcik7Cj4+PiAgICAJaC0+
bGVuID0gdmhvc3QzMl90b19jcHUodnEsIGRlc2MtPmxlbik7Cj4+PiAtCWgtPmZsYWdzID0gdmhv
c3QxNl90b19jcHUodnEsIGRlc2MtPmZsYWdzKTsKPj4+ICsJaC0+ZmxhZ3MgPSB2aG9zdDE2X3Rv
X2NwdSh2cSwgZGVzYy0+ZmxhZ3MpICYgVkhPU1RfREVTQ19GTEFHUzsKPj4+ICAgIAloLT5pZCA9
IGlkOwo+Pj4gICAgCXJldHVybiAwOwo+Pj4gQEAgLTI0NTAsNyArMjQ1NCw3IEBAIHN0YXRpYyBp
bnQgZmV0Y2hfaW5kaXJlY3RfZGVzY3Moc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEsCj4+PiAg
ICAJcmV0dXJuIDA7Cj4+PiAgICB9Cj4+PiAtc3RhdGljIGludCBmZXRjaF9kZXNjcyhzdHJ1Y3Qg
dmhvc3RfdmlydHF1ZXVlICp2cSkKPj4+ICtzdGF0aWMgaW50IGZldGNoX2J1ZihzdHJ1Y3Qgdmhv
c3RfdmlydHF1ZXVlICp2cSkKPj4+ICAgIHsKPj4+ICAgIAlzdHJ1Y3QgdnJpbmdfZGVzYyBkZXNj
Owo+Pj4gICAgCXVuc2lnbmVkIGludCBpLCBoZWFkLCBmb3VuZCA9IDA7Cj4+PiBAQCAtMjQ2Miw3
ICsyNDY2LDExIEBAIHN0YXRpYyBpbnQgZmV0Y2hfZGVzY3Moc3RydWN0IHZob3N0X3ZpcnRxdWV1
ZSAqdnEpCj4+PiAgICAJLyogQ2hlY2sgaXQgaXNuJ3QgZG9pbmcgdmVyeSBzdHJhbmdlIHRoaW5n
cyB3aXRoIGRlc2NyaXB0b3IgbnVtYmVycy4gKi8KPj4+ICAgIAlsYXN0X2F2YWlsX2lkeCA9IHZx
LT5sYXN0X2F2YWlsX2lkeDsKPj4+IC0JaWYgKHZxLT5hdmFpbF9pZHggPT0gdnEtPmxhc3RfYXZh
aWxfaWR4KSB7Cj4+PiArCWlmICh1bmxpa2VseSh2cS0+YXZhaWxfaWR4ID09IHZxLT5sYXN0X2F2
YWlsX2lkeCkpIHsKPj4+ICsJCS8qIElmIHdlIGFscmVhZHkgaGF2ZSB3b3JrIHRvIGRvLCBkb24n
dCBib3RoZXIgcmUtY2hlY2tpbmcuICovCj4+PiArCQlpZiAobGlrZWx5KHZxLT5uZGVzY3MpKQo+
Pj4gKwkJCXJldHVybiB2cS0+bnVtOwo+Pj4gKwo+Pj4gICAgCQlpZiAodW5saWtlbHkodmhvc3Rf
Z2V0X2F2YWlsX2lkeCh2cSwgJmF2YWlsX2lkeCkpKSB7Cj4+PiAgICAJCQl2cV9lcnIodnEsICJG
YWlsZWQgdG8gYWNjZXNzIGF2YWlsIGlkeCBhdCAlcFxuIiwKPj4+ICAgIAkJCQkmdnEtPmF2YWls
LT5pZHgpOwo+Pj4gQEAgLTI1NDEsNiArMjU0OSwyNCBAQCBzdGF0aWMgaW50IGZldGNoX2Rlc2Nz
KHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxKQo+Pj4gICAgCXJldHVybiAwOwo+Pj4gICAgfQo+
Pj4gK3N0YXRpYyBpbnQgZmV0Y2hfZGVzY3Moc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEpCj4+
PiArewo+Pj4gKwlpbnQgcmV0ID0gMDsKPj4+ICsKPj4+ICsJaWYgKHVubGlrZWx5KHZxLT5maXJz
dF9kZXNjID49IHZxLT5uZGVzY3MpKSB7Cj4+PiArCQl2cS0+Zmlyc3RfZGVzYyA9IDA7Cj4+PiAr
CQl2cS0+bmRlc2NzID0gMDsKPj4+ICsJfQo+Pj4gKwo+Pj4gKwlpZiAodnEtPm5kZXNjcykKPj4+
ICsJCXJldHVybiAwOwo+Pj4gKwo+Pj4gKwl3aGlsZSAoIXJldCAmJiB2cS0+bmRlc2NzIDw9IHZx
LT5iYXRjaF9kZXNjcykKPj4+ICsJCXJldCA9IGZldGNoX2J1Zih2cSk7Cj4+Cj4+IEl0IGxvb2tz
IHRvIG1lIGRlc2NyaXB0b3IgY2hhaW5pbmcgbWlnaHQgYmUgYnJva2VuIGhlcmUuCj4gSXQgc2hv
dWxkIHdvcmsgYmVjYXVzZSBmZXRjaF9idWYgZmV0Y2hlcyBhIHdob2xlIGJ1ZiwgZm9sbG93aW5n
Cj4gdGhlIGNoYWluLiBTZWVtcyB0byB3b3JrIGluIGEgc21hbGwgdGVzdCAuLi4gd2hhdCBpc3N1
ZXMgZG8geW91IHNlZT8KCgpDb25zaWRlciB0aGUgY2FzZSB3aGVuIGZldGNoX2J1ZiByZXR1cm4g
LUVJTlZBTCB3aGVuIHB1c2hfc3BsaXRfZGVzYygpIApmYWlsLiBUaGlzIG1lYW5zIHdlIG9ubHkg
aGF2ZSBwYXJ0aWFsIGRlc2NyaXB0b3JzLgoKRG8gd2UgbmVlZCBkZWNyZWFzaW5nIGxhc3RfYXZh
aWxfaWR4IGFuZCB2cS0+bmRlc2NzIGhlcmU/IE9yIGhhdmluZyBhIApoZWFkLHRhaWwgaW5zdGVh
ZCBvZiBmaXJzdF9kZXNjPwoKVGhhbmtzCgoKPgo+Pj4gKwo+Pj4gKwlyZXR1cm4gdnEtPm5kZXNj
cyA/IDAgOiByZXQ7Cj4+PiArfQo+Pj4gKwo+Pj4gICAgLyogVGhpcyBsb29rcyBpbiB0aGUgdmly
dHF1ZXVlIGFuZCBmb3IgdGhlIGZpcnN0IGF2YWlsYWJsZSBidWZmZXIsIGFuZCBjb252ZXJ0cwo+
Pj4gICAgICogaXQgdG8gYW4gaW92ZWMgZm9yIGNvbnZlbmllbnQgYWNjZXNzLiAgU2luY2UgZGVz
Y3JpcHRvcnMgY29uc2lzdCBvZiBzb21lCj4+PiAgICAgKiBudW1iZXIgb2Ygb3V0cHV0IHRoZW4g
c29tZSBudW1iZXIgb2YgaW5wdXQgZGVzY3JpcHRvcnMsIGl0J3MgYWN0dWFsbHkgdHdvCj4+PiBA
QCAtMjU2Miw2ICsyNTg4LDggQEAgaW50IHZob3N0X2dldF92cV9kZXNjX2JhdGNoKHN0cnVjdCB2
aG9zdF92aXJ0cXVldWUgKnZxLAo+Pj4gICAgCWlmIChyZXQpCj4+PiAgICAJCXJldHVybiByZXQ7
Cj4+PiArCS8qIE5vdGU6IGluZGlyZWN0IGRlc2NyaXB0b3JzIGFyZSBub3QgYmF0Y2hlZCAqLwo+
Pj4gKwkvKiBUT0RPOiBiYXRjaCB1cCB0byBhIGxpbWl0ICovCj4+PiAgICAJbGFzdCA9IHBlZWtf
c3BsaXRfZGVzYyh2cSk7Cj4+PiAgICAJaWQgPSBsYXN0LT5pZDsKPj4+IEBAIC0yNTg0LDEyICsy
NjEyLDEyIEBAIGludCB2aG9zdF9nZXRfdnFfZGVzY19iYXRjaChzdHJ1Y3Qgdmhvc3RfdmlydHF1
ZXVlICp2cSwKPj4+ICAgIAlpZiAodW5saWtlbHkobG9nKSkKPj4+ICAgIAkJKmxvZ19udW0gPSAw
Owo+Pj4gLQlmb3IgKGkgPSAwOyBpIDwgdnEtPm5kZXNjczsgKytpKSB7Cj4+PiArCWZvciAoaSA9
IHZxLT5maXJzdF9kZXNjOyBpIDwgdnEtPm5kZXNjczsgKytpKSB7Cj4+PiAgICAJCXVuc2lnbmVk
IGlvdl9jb3VudCA9ICppbl9udW0gKyAqb3V0X251bTsKPj4+ICAgIAkJc3RydWN0IHZob3N0X2Rl
c2MgKmRlc2MgPSAmdnEtPmRlc2NzW2ldOwo+Pj4gICAgCQlpbnQgYWNjZXNzOwo+Pj4gLQkJaWYg
KGRlc2MtPmZsYWdzICYgfihWUklOR19ERVNDX0ZfSU5ESVJFQ1QgfCBWUklOR19ERVNDX0ZfV1JJ
VEUpKSB7Cj4+PiArCQlpZiAoZGVzYy0+ZmxhZ3MgJiB+VkhPU1RfREVTQ19GTEFHUykgewo+Pj4g
ICAgCQkJdnFfZXJyKHZxLCAiVW5leHBlY3RlZCBmbGFnczogMHgleCBhdCBkZXNjcmlwdG9yIGlk
IDB4JXhcbiIsCj4+PiAgICAJCQkgICAgICAgZGVzYy0+ZmxhZ3MsIGRlc2MtPmlkKTsKPj4+ICAg
IAkJCXJldCA9IC1FSU5WQUw7Cj4+PiBAQCAtMjYyOCwxNSArMjY1NiwyMSBAQCBpbnQgdmhvc3Rf
Z2V0X3ZxX2Rlc2NfYmF0Y2goc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEsCj4+PiAgICAJCQl9
Cj4+PiAgICAJCQkqb3V0X251bSArPSByZXQ7Cj4+PiAgICAJCX0KPj4+ICsKPj4+ICsJCXJldCA9
IGRlc2MtPmlkOwo+Pj4gKwo+Pj4gKwkJaWYgKCEoZGVzYy0+ZmxhZ3MgJiBWUklOR19ERVNDX0Zf
TkVYVCkpCj4+PiArCQkJYnJlYWs7Cj4+PiAgICAJfQo+Pgo+PiBXaGF0IGhhcHBlbnMgaWYgd2Ug
cmVhY2ggdnEtPm5kZXNjcyBidXQgVlJJTkdfREVTQ19GX05FWFQgaXMgc3RpbGwgc2V0Pwo+Pgo+
PiBUaGFua3MKPiBUaGlzIGNhbid0IGhhcHBlbjogZGVzY3JpcHRvcnMgYXJlIHB1c2hlZCBieSBw
dXNoX3NwbGl0X2Rlc2MgZWFjaCB0aW1lCj4gd2UgZ28gdGhyb3VnaCBhIGxvb3AgaW4gZmV0Y2hf
YnVmLiBUaGUgb25seSB3YXkgdG8gZXhpdCB0aGUgbG9vcAo+IHdpdGggcmV0dXJuIGNvZGUgMCBp
cyBpZiBuZXh0X2Rlc2MgcmV0dXJuIC0xIHRoYXQgaXMgd2hlbiBWUklOR19ERVNDX0ZfTkVYVAo+
IGlzIGNsZWFyLgo+Cj4gQnV0IGl0J3MgYSBnb29kIGlkZWEgdG8gYWRkIGEgQlVHX09OIGhlcmUs
IEknbGwgZG8gaXQgaW4gdGhlIG5leHQgdmVyc2lvbi4KPgo+Cj4+PiAtCXJldCA9IGlkOwo+Pj4g
LQl2cS0+bmRlc2NzID0gMDsKPj4+ICsJdnEtPmZpcnN0X2Rlc2MgPSBpICsgMTsKPj4+ICAgIAly
ZXR1cm4gcmV0Owo+Pj4gICAgZXJyOgo+Pj4gLQl2aG9zdF9kaXNjYXJkX3ZxX2Rlc2ModnEsIDEp
Owo+Pj4gKwlmb3IgKGkgPSB2cS0+Zmlyc3RfZGVzYzsgaSA8IHZxLT5uZGVzY3M7ICsraSkKPj4+
ICsJCWlmICghKGRlc2MtPmZsYWdzICYgVlJJTkdfREVTQ19GX05FWFQpKQo+Pj4gKwkJCXZob3N0
X2Rpc2NhcmRfdnFfZGVzYyh2cSwgMSk7Cj4+PiAgICAJdnEtPm5kZXNjcyA9IDA7Cj4+PiAgICAJ
cmV0dXJuIHJldDsKPj4+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3Zob3N0L3Zob3N0LmggYi9kcml2
ZXJzL3Zob3N0L3Zob3N0LmgKPj4+IGluZGV4IDE3MjRmNjFiNmMyZC4uOGI4OGUwYzkwM2RhIDEw
MDY0NAo+Pj4gLS0tIGEvZHJpdmVycy92aG9zdC92aG9zdC5oCj4+PiArKysgYi9kcml2ZXJzL3Zo
b3N0L3Zob3N0LmgKPj4+IEBAIC0xMDAsNyArMTAwLDkgQEAgc3RydWN0IHZob3N0X3ZpcnRxdWV1
ZSB7Cj4+PiAgICAJc3RydWN0IHZob3N0X2Rlc2MgKmRlc2NzOwo+Pj4gICAgCWludCBuZGVzY3M7
Cj4+PiArCWludCBmaXJzdF9kZXNjOwo+Pj4gICAgCWludCBtYXhfZGVzY3M7Cj4+PiArCWludCBi
YXRjaF9kZXNjczsKPj4+ICAgIAljb25zdCBzdHJ1Y3Qgdmhvc3RfdW1lbV9ub2RlICptZXRhX2lv
dGxiW1ZIT1NUX05VTV9BRERSU107Cj4+PiAgICAJc3RydWN0IGZpbGUgKmtpY2s7Cj4+PiBAQCAt
MjQ1LDcgKzI0Nyw3IEBAIHNzaXplX3Qgdmhvc3RfY2hyX3dyaXRlX2l0ZXIoc3RydWN0IHZob3N0
X2RldiAqZGV2LAo+Pj4gICAgaW50IHZob3N0X2luaXRfZGV2aWNlX2lvdGxiKHN0cnVjdCB2aG9z
dF9kZXYgKmQsIGJvb2wgZW5hYmxlZCk7Cj4+PiAgICAjZGVmaW5lIHZxX2Vycih2cSwgZm10LCAu
Li4pIGRvIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAo+Pj4gLQkJcHJfZGVi
dWcocHJfZm10KGZtdCksICMjX19WQV9BUkdTX18pOyAgICAgICBcCj4+PiArCQlwcl9lcnIocHJf
Zm10KGZtdCksICMjX19WQV9BUkdTX18pOyAgICAgICBcCj4+PiAgICAJCWlmICgodnEpLT5lcnJv
cl9jdHgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKPj4+ICAgIAkJCQlldmVudGZk
X3NpZ25hbCgodnEpLT5lcnJvcl9jdHgsIDEpO1wKPj4+ICAgIAl9IHdoaWxlICgwKQpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpWaXJ0dWFsaXphdGlvbiBt
YWlsaW5nIGxpc3QKVmlydHVhbGl6YXRpb25AbGlzdHMubGludXgtZm91bmRhdGlvbi5vcmcKaHR0
cHM6Ly9saXN0cy5saW51eGZvdW5kYXRpb24ub3JnL21haWxtYW4vbGlzdGluZm8vdmlydHVhbGl6
YXRpb24=
