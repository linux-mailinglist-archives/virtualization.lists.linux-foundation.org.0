Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp3.osuosl.org (smtp3.osuosl.org [140.211.166.136])
	by mail.lfdr.de (Postfix) with ESMTPS id 9A101424541
	for <lists.virtualization@lfdr.de>; Wed,  6 Oct 2021 19:51:01 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp3.osuosl.org (Postfix) with ESMTP id D611760EFF;
	Wed,  6 Oct 2021 17:50:53 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
	by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id C3EgQVuQoawN; Wed,  6 Oct 2021 17:50:53 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp3.osuosl.org (Postfix) with ESMTPS id 7648360F0C;
	Wed,  6 Oct 2021 17:50:52 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 8DD3DC0024;
	Wed,  6 Oct 2021 17:50:51 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 198FDC0030
 for <virtualization@lists.linux-foundation.org>;
 Wed,  6 Oct 2021 17:50:47 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id 883D1405D5
 for <virtualization@lists.linux-foundation.org>;
 Wed,  6 Oct 2021 17:50:45 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 3LyTAb01wS5g
 for <virtualization@lists.linux-foundation.org>;
 Wed,  6 Oct 2021 17:50:44 +0000 (UTC)
X-Greylist: from auto-whitelisted by SQLgrey-1.8.0
Received: from mx01.bbu.dsd.mx.bitdefender.com
 (mx01.bbu.dsd.mx.bitdefender.com [91.199.104.161])
 by smtp4.osuosl.org (Postfix) with ESMTPS id 66F6D40637
 for <virtualization@lists.linux-foundation.org>;
 Wed,  6 Oct 2021 17:50:44 +0000 (UTC)
Received: from smtp.bitdefender.com (smtp01.buh.bitdefender.com [10.17.80.75])
 by mx01.bbu.dsd.mx.bitdefender.com (Postfix) with ESMTPS id
 403503082885; Wed,  6 Oct 2021 20:31:21 +0300 (EEST)
Received: from localhost (unknown [91.199.104.28])
 by smtp.bitdefender.com (Postfix) with ESMTPSA id 271FB3064495;
 Wed,  6 Oct 2021 20:31:21 +0300 (EEST)
X-Is-Junk-Enabled: fGZTSsP0qEJE2AIKtlSuFiRRwg9xyHmJ
From: =?UTF-8?q?Adalbert=20Laz=C4=83r?= <alazar@bitdefender.com>
To: kvm@vger.kernel.org
Subject: [PATCH v12 65/77] KVM: introspection: add KVMI_VCPU_GET_MTRR_TYPE
Date: Wed,  6 Oct 2021 20:31:01 +0300
Message-Id: <20211006173113.26445-66-alazar@bitdefender.com>
In-Reply-To: <20211006173113.26445-1-alazar@bitdefender.com>
References: <20211006173113.26445-1-alazar@bitdefender.com>
MIME-Version: 1.0
Cc: Tamas K Lengyel <tamas@tklengyel.com>, Wanpeng Li <wanpengli@tencent.com>,
 =?UTF-8?q?Nicu=C8=99or=20C=C3=AE=C8=9Bu?= <nicu.citu@icloud.com>,
 Sean Christopherson <seanjc@google.com>, Joerg Roedel <joro@8bytes.org>,
 virtualization@lists.linux-foundation.org,
 =?UTF-8?q?Adalbert=20Laz=C4=83r?= <alazar@bitdefender.com>,
 Mathieu Tarral <mathieu.tarral@protonmail.com>,
 Paolo Bonzini <pbonzini@redhat.com>,
 =?UTF-8?q?Mihai=20Don=C8=9Bu?= <mdontu@bitdefender.com>,
 Jim Mattson <jmattson@google.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

RnJvbTogTWloYWkgRG9uyJt1IDxtZG9udHVAYml0ZGVmZW5kZXIuY29tPgoKVGhpcyBjb21tYW5k
IHJldHVybnMgdGhlIG1lbW9yeSB0eXBlIGZvciBhIGd1ZXN0IHBoeXNpY2FsIGFkZHJlc3MuCgpT
aWduZWQtb2ZmLWJ5OiBNaWhhaSBEb27Im3UgPG1kb250dUBiaXRkZWZlbmRlci5jb20+CkNvLWRl
dmVsb3BlZC1ieTogTmljdciZb3IgQ8OuyJt1IDxuaWN1LmNpdHVAaWNsb3VkLmNvbT4KU2lnbmVk
LW9mZi1ieTogTmljdciZb3IgQ8OuyJt1IDxuaWN1LmNpdHVAaWNsb3VkLmNvbT4KU2lnbmVkLW9m
Zi1ieTogQWRhbGJlcnQgTGF6xINyIDxhbGF6YXJAYml0ZGVmZW5kZXIuY29tPgotLS0KIERvY3Vt
ZW50YXRpb24vdmlydC9rdm0va3ZtaS5yc3QgICAgICAgICAgICAgICB8IDMyICsrKysrKysrKysr
KysrKysrKysKIGFyY2gveDg2L2luY2x1ZGUvdWFwaS9hc20va3ZtaS5oICAgICAgICAgICAgICB8
ICA5ICsrKysrKwogYXJjaC94ODYva3ZtL2t2bWlfbXNnLmMgICAgICAgICAgICAgICAgICAgICAg
IHwgMTcgKysrKysrKysrKwogaW5jbHVkZS91YXBpL2xpbnV4L2t2bWkuaCAgICAgICAgICAgICAg
ICAgICAgIHwgIDEgKwogLi4uL3Rlc3Rpbmcvc2VsZnRlc3RzL2t2bS94ODZfNjQva3ZtaV90ZXN0
LmMgIHwgMTggKysrKysrKysrKysKIDUgZmlsZXMgY2hhbmdlZCwgNzcgaW5zZXJ0aW9ucygrKQoK
ZGlmZiAtLWdpdCBhL0RvY3VtZW50YXRpb24vdmlydC9rdm0va3ZtaS5yc3QgYi9Eb2N1bWVudGF0
aW9uL3ZpcnQva3ZtL2t2bWkucnN0CmluZGV4IGVlZGNhZTM5MDBjNS4uZDYwYTY5ZTAwZTBmIDEw
MDY0NAotLS0gYS9Eb2N1bWVudGF0aW9uL3ZpcnQva3ZtL2t2bWkucnN0CisrKyBiL0RvY3VtZW50
YXRpb24vdmlydC9rdm0va3ZtaS5yc3QKQEAgLTg2OCw2ICs4NjgsMzggQEAgTW9kaWZpZXMgdGhl
IFhTQVZFIGFyZWEuCiAqIC1LVk1fRUlOVkFMIC0gdGhlIHBhZGRpbmcgaXMgbm90IHplcm8KICog
LUtWTV9FQUdBSU4gLSB0aGUgc2VsZWN0ZWQgdkNQVSBjYW4ndCBiZSBpbnRyb3NwZWN0ZWQgeWV0
CiAKKzIwLiBLVk1JX1ZDUFVfR0VUX01UUlJfVFlQRQorLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCisKKzpBcmNoaXRlY3R1cmVzOiB4ODYKKzpWZXJzaW9uczogPj0gMQorOlBhcmFtZXRlcnM6
CisKKzo6CisKKwlzdHJ1Y3Qga3ZtaV92Y3B1X2hkcjsKKwlzdHJ1Y3Qga3ZtaV92Y3B1X2dldF9t
dHJyX3R5cGUgeworCQlfX3U2NCBncGE7CisJfTsKKworOlJldHVybnM6CisKKzo6CisKKwlzdHJ1
Y3Qga3ZtaV9lcnJvcl9jb2RlOworCXN0cnVjdCBrdm1pX3ZjcHVfZ2V0X210cnJfdHlwZV9yZXBs
eSB7CisJCV9fdTggdHlwZTsKKwkJX191OCBwYWRkaW5nWzddOworCX07CisKK1JldHVybnMgdGhl
IGd1ZXN0IG1lbW9yeSB0eXBlIGZvciBhIHNwZWNpZmljIGd1ZXN0IHBoeXNpY2FsIGFkZHJlc3Mg
KGBgZ3BhYGApLgorCis6RXJyb3JzOgorCisqIC1LVk1fRUlOVkFMIC0gdGhlIHNlbGVjdGVkIHZD
UFUgaXMgaW52YWxpZAorKiAtS1ZNX0VJTlZBTCAtIHRoZSBwYWRkaW5nIGlzIG5vdCB6ZXJvCisq
IC1LVk1fRUFHQUlOIC0gdGhlIHNlbGVjdGVkIHZDUFUgY2FuJ3QgYmUgaW50cm9zcGVjdGVkIHll
dAorCiBFdmVudHMKID09PT09PQogCmRpZmYgLS1naXQgYS9hcmNoL3g4Ni9pbmNsdWRlL3VhcGkv
YXNtL2t2bWkuaCBiL2FyY2gveDg2L2luY2x1ZGUvdWFwaS9hc20va3ZtaS5oCmluZGV4IDg5ZjNk
YzkyNjljMS4uN2I5MzQ1MGQwZDYyIDEwMDY0NAotLS0gYS9hcmNoL3g4Ni9pbmNsdWRlL3VhcGkv
YXNtL2t2bWkuaAorKysgYi9hcmNoL3g4Ni9pbmNsdWRlL3VhcGkvYXNtL2t2bWkuaApAQCAtMTE5
LDQgKzExOSwxMyBAQCBzdHJ1Y3Qga3ZtaV92Y3B1X3NldF94c2F2ZSB7CiAJc3RydWN0IGt2bV94
c2F2ZSB4c2F2ZTsKIH07CiAKK3N0cnVjdCBrdm1pX3ZjcHVfZ2V0X210cnJfdHlwZSB7CisJX191
NjQgZ3BhOworfTsKKworc3RydWN0IGt2bWlfdmNwdV9nZXRfbXRycl90eXBlX3JlcGx5IHsKKwlf
X3U4IHR5cGU7CisJX191OCBwYWRkaW5nWzddOworfTsKKwogI2VuZGlmIC8qIF9VQVBJX0FTTV9Y
ODZfS1ZNSV9IICovCmRpZmYgLS1naXQgYS9hcmNoL3g4Ni9rdm0va3ZtaV9tc2cuYyBiL2FyY2gv
eDg2L2t2bS9rdm1pX21zZy5jCmluZGV4IGVjYWQxODgyY2RkOC4uYzg5MGMyMzk2ZmJjIDEwMDY0
NAotLS0gYS9hcmNoL3g4Ni9rdm0va3ZtaV9tc2cuYworKysgYi9hcmNoL3g4Ni9rdm0va3ZtaV9t
c2cuYwpAQCAtMjMyLDEwICsyMzIsMjcgQEAgc3RhdGljIGludCBoYW5kbGVfdmNwdV9zZXRfeHNh
dmUoY29uc3Qgc3RydWN0IGt2bWlfdmNwdV9tc2dfam9iICpqb2IsCiAJcmV0dXJuIGt2bWlfbXNn
X3ZjcHVfcmVwbHkoam9iLCBtc2csIGVjLCBOVUxMLCAwKTsKIH0KIAorc3RhdGljIGludCBoYW5k
bGVfdmNwdV9nZXRfbXRycl90eXBlKGNvbnN0IHN0cnVjdCBrdm1pX3ZjcHVfbXNnX2pvYiAqam9i
LAorCQkJCSAgICAgY29uc3Qgc3RydWN0IGt2bWlfbXNnX2hkciAqbXNnLAorCQkJCSAgICAgY29u
c3Qgdm9pZCAqX3JlcSkKK3sKKwljb25zdCBzdHJ1Y3Qga3ZtaV92Y3B1X2dldF9tdHJyX3R5cGUg
KnJlcSA9IF9yZXE7CisJc3RydWN0IGt2bWlfdmNwdV9nZXRfbXRycl90eXBlX3JlcGx5IHJwbDsK
KwlnZm5fdCBnZm47CisKKwlnZm4gPSBncGFfdG9fZ2ZuKHJlcS0+Z3BhKTsKKworCW1lbXNldCgm
cnBsLCAwLCBzaXplb2YocnBsKSk7CisJcnBsLnR5cGUgPSBrdm1fbXRycl9nZXRfZ3Vlc3RfbWVt
b3J5X3R5cGUoam9iLT52Y3B1LCBnZm4pOworCisJcmV0dXJuIGt2bWlfbXNnX3ZjcHVfcmVwbHko
am9iLCBtc2csIDAsICZycGwsIHNpemVvZihycGwpKTsKK30KKwogc3RhdGljIGNvbnN0IGt2bWlf
dmNwdV9tc2dfam9iX2ZjdCBtc2dfdmNwdVtdID0gewogCVtLVk1JX1ZDUFVfQ09OVFJPTF9DUl0g
ICAgICAgPSBoYW5kbGVfdmNwdV9jb250cm9sX2NyLAogCVtLVk1JX1ZDUFVfR0VUX0NQVUlEXSAg
ICAgICAgPSBoYW5kbGVfdmNwdV9nZXRfY3B1aWQsCiAJW0tWTUlfVkNQVV9HRVRfSU5GT10gICAg
ICAgICA9IGhhbmRsZV92Y3B1X2dldF9pbmZvLAorCVtLVk1JX1ZDUFVfR0VUX01UUlJfVFlQRV0g
ICAgPSBoYW5kbGVfdmNwdV9nZXRfbXRycl90eXBlLAogCVtLVk1JX1ZDUFVfR0VUX1JFR0lTVEVS
U10gICAgPSBoYW5kbGVfdmNwdV9nZXRfcmVnaXN0ZXJzLAogCVtLVk1JX1ZDUFVfR0VUX1hDUl0g
ICAgICAgICAgPSBoYW5kbGVfdmNwdV9nZXRfeGNyLAogCVtLVk1JX1ZDUFVfR0VUX1hTQVZFXSAg
ICAgICAgPSBoYW5kbGVfdmNwdV9nZXRfeHNhdmUsCmRpZmYgLS1naXQgYS9pbmNsdWRlL3VhcGkv
bGludXgva3ZtaS5oIGIvaW5jbHVkZS91YXBpL2xpbnV4L2t2bWkuaAppbmRleCA0NjcxZTBlM2Ni
NDUuLmE0OGNmMmMxZjlhNyAxMDA2NDQKLS0tIGEvaW5jbHVkZS91YXBpL2xpbnV4L2t2bWkuaAor
KysgYi9pbmNsdWRlL3VhcGkvbGludXgva3ZtaS5oCkBAIC00Niw2ICs0Niw3IEBAIGVudW0gewog
CUtWTUlfVkNQVV9HRVRfWENSICAgICAgICAgID0gS1ZNSV9WQ1BVX01FU1NBR0VfSUQoOCksCiAJ
S1ZNSV9WQ1BVX0dFVF9YU0FWRSAgICAgICAgPSBLVk1JX1ZDUFVfTUVTU0FHRV9JRCg5KSwKIAlL
Vk1JX1ZDUFVfU0VUX1hTQVZFICAgICAgICA9IEtWTUlfVkNQVV9NRVNTQUdFX0lEKDEwKSwKKwlL
Vk1JX1ZDUFVfR0VUX01UUlJfVFlQRSAgICA9IEtWTUlfVkNQVV9NRVNTQUdFX0lEKDExKSwKIAog
CUtWTUlfTkVYVF9WQ1BVX01FU1NBR0UKIH07CmRpZmYgLS1naXQgYS90b29scy90ZXN0aW5nL3Nl
bGZ0ZXN0cy9rdm0veDg2XzY0L2t2bWlfdGVzdC5jIGIvdG9vbHMvdGVzdGluZy9zZWxmdGVzdHMv
a3ZtL3g4Nl82NC9rdm1pX3Rlc3QuYwppbmRleCBhZGFjMGVkZGRjNTAuLjIzMWQ1NzRlZDU5MiAx
MDA2NDQKLS0tIGEvdG9vbHMvdGVzdGluZy9zZWxmdGVzdHMva3ZtL3g4Nl82NC9rdm1pX3Rlc3Qu
YworKysgYi90b29scy90ZXN0aW5nL3NlbGZ0ZXN0cy9rdm0veDg2XzY0L2t2bWlfdGVzdC5jCkBA
IC0xNDc3LDYgKzE0NzcsMjMgQEAgc3RhdGljIHZvaWQgdGVzdF9jbWRfdmNwdV94c2F2ZShzdHJ1
Y3Qga3ZtX3ZtICp2bSkKIAljbWRfdmNwdV9zZXRfeHNhdmUodm0sICZ4c2F2ZSk7CiB9CiAKK3N0
YXRpYyB2b2lkIHRlc3RfY21kX3ZjcHVfZ2V0X210cnJfdHlwZShzdHJ1Y3Qga3ZtX3ZtICp2bSkK
K3sKKwlzdHJ1Y3QgeworCQlzdHJ1Y3Qga3ZtaV9tc2dfaGRyIGhkcjsKKwkJc3RydWN0IGt2bWlf
dmNwdV9oZHIgdmNwdV9oZHI7CisJCXN0cnVjdCBrdm1pX3ZjcHVfZ2V0X210cnJfdHlwZSBjbWQ7
CisJfSByZXEgPSB7fTsKKwlzdHJ1Y3Qga3ZtaV92Y3B1X2dldF9tdHJyX3R5cGVfcmVwbHkgcnBs
OworCisJcmVxLmNtZC5ncGEgPSB0ZXN0X2dwYTsKKworCXRlc3RfdmNwdTBfY29tbWFuZCh2bSwg
S1ZNSV9WQ1BVX0dFVF9NVFJSX1RZUEUsCisJCQkgICAmcmVxLmhkciwgc2l6ZW9mKHJlcSksICZy
cGwsIHNpemVvZihycGwpLCAwKTsKKworCXByX2RlYnVnKCJtdHJyX3R5cGU6IGdwYSAweCVseCB0
eXBlIDB4JXhcbiIsIHRlc3RfZ3BhLCBycGwudHlwZSk7Cit9CisKIHN0YXRpYyB2b2lkIHRlc3Rf
aW50cm9zcGVjdGlvbihzdHJ1Y3Qga3ZtX3ZtICp2bSkKIHsKIAlzcmFuZG9tKHRpbWUoMCkpOwpA
QCAtMTUwNSw2ICsxNTIyLDcgQEAgc3RhdGljIHZvaWQgdGVzdF9pbnRyb3NwZWN0aW9uKHN0cnVj
dCBrdm1fdm0gKnZtKQogCXRlc3RfZXZlbnRfeHNldGJ2KHZtKTsKIAl0ZXN0X2NtZF92Y3B1X2dl
dF94Y3Iodm0pOwogCXRlc3RfY21kX3ZjcHVfeHNhdmUodm0pOworCXRlc3RfY21kX3ZjcHVfZ2V0
X210cnJfdHlwZSh2bSk7CiAKIAl1bmhvb2tfaW50cm9zcGVjdGlvbih2bSk7CiB9Cl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1h
aWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRw
czovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXph
dGlvbg==
