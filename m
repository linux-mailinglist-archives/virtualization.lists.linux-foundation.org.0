Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
	by mail.lfdr.de (Postfix) with ESMTPS id 99FBD228B97
	for <lists.virtualization@lfdr.de>; Tue, 21 Jul 2020 23:46:01 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by whitealder.osuosl.org (Postfix) with ESMTP id 48CD78824F;
	Tue, 21 Jul 2020 21:46:00 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YbcIAiry52Jg; Tue, 21 Jul 2020 21:45:57 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by whitealder.osuosl.org (Postfix) with ESMTP id 348AA882C3;
	Tue, 21 Jul 2020 21:45:56 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 1DB46C016F;
	Tue, 21 Jul 2020 21:45:56 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id C9793C016F
 for <virtualization@lists.linux-foundation.org>;
 Tue, 21 Jul 2020 21:45:54 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by whitealder.osuosl.org (Postfix) with ESMTP id B8E598803B
 for <virtualization@lists.linux-foundation.org>;
 Tue, 21 Jul 2020 21:45:54 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 5yykD71nhmdl
 for <virtualization@lists.linux-foundation.org>;
 Tue, 21 Jul 2020 21:45:53 +0000 (UTC)
X-Greylist: from auto-whitelisted by SQLgrey-1.7.6
Received: from mx01.bbu.dsd.mx.bitdefender.com
 (mx01.bbu.dsd.mx.bitdefender.com [91.199.104.161])
 by whitealder.osuosl.org (Postfix) with ESMTPS id E99F5881AD
 for <virtualization@lists.linux-foundation.org>;
 Tue, 21 Jul 2020 21:45:52 +0000 (UTC)
Received: from smtp.bitdefender.com (smtp02.buh.bitdefender.net [10.17.80.76])
 by mx01.bbu.dsd.mx.bitdefender.com (Postfix) with ESMTPS id
 B32333031FCB; Wed, 22 Jul 2020 00:09:23 +0300 (EEST)
Received: from localhost.localdomain (unknown [91.199.104.27])
 by smtp.bitdefender.com (Postfix) with ESMTPSA id 92A3F304FA15;
 Wed, 22 Jul 2020 00:09:23 +0300 (EEST)
From: =?UTF-8?q?Adalbert=20Laz=C4=83r?= <alazar@bitdefender.com>
To: kvm@vger.kernel.org
Subject: [PATCH v9 32/84] KVM: x86: page track: provide all callbacks with the
 guest virtual address
Date: Wed, 22 Jul 2020 00:08:30 +0300
Message-Id: <20200721210922.7646-33-alazar@bitdefender.com>
In-Reply-To: <20200721210922.7646-1-alazar@bitdefender.com>
References: <20200721210922.7646-1-alazar@bitdefender.com>
MIME-Version: 1.0
Cc: =?UTF-8?q?Adalbert=20Laz=C4=83r?= <alazar@bitdefender.com>,
 Paolo Bonzini <pbonzini@redhat.com>,
 =?UTF-8?q?Mihai=20Don=C8=9Bu?= <mdontu@bitdefender.com>,
 virtualization@lists.linux-foundation.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

RnJvbTogTWloYWkgRG9uyJt1IDxtZG9udHVAYml0ZGVmZW5kZXIuY29tPgoKVGhpcyBpcyBuZWVk
ZWQgYmVjYXVzZSB0aGUgZW11bGF0b3IgY2FsbHMgdGhlIHBhZ2UgdHJhY2tpbmcgY29kZQppcnJl
c3BlY3RpdmUgb2YgdGhlIGN1cnJlbnQgVk0tZXhpdCByZWFzb24gb3IgYXZhaWxhYmxlIGluZm9y
bWF0aW9uLgoKU2lnbmVkLW9mZi1ieTogTWloYWkgRG9uyJt1IDxtZG9udHVAYml0ZGVmZW5kZXIu
Y29tPgpTaWduZWQtb2ZmLWJ5OiBBZGFsYmVydCBMYXrEg3IgPGFsYXphckBiaXRkZWZlbmRlci5j
b20+Ci0tLQogYXJjaC94ODYvaW5jbHVkZS9hc20va3ZtX2hvc3QuaCAgICAgICB8ICAyICstCiBh
cmNoL3g4Ni9pbmNsdWRlL2FzbS9rdm1fcGFnZV90cmFjay5oIHwgMTAgKysrKysrLS0tLQogYXJj
aC94ODYva3ZtL21tdS9tbXUuYyAgICAgICAgICAgICAgICB8ICAyICstCiBhcmNoL3g4Ni9rdm0v
bW11L3BhZ2VfdHJhY2suYyAgICAgICAgIHwgIDYgKysrLS0tCiBhcmNoL3g4Ni9rdm0veDg2LmMg
ICAgICAgICAgICAgICAgICAgIHwgMTYgKysrKysrKystLS0tLS0tLQogZHJpdmVycy9ncHUvZHJt
L2k5MTUvZ3Z0L2t2bWd0LmMgICAgICB8ICAyICstCiA2IGZpbGVzIGNoYW5nZWQsIDIwIGluc2Vy
dGlvbnMoKyksIDE4IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2FyY2gveDg2L2luY2x1ZGUv
YXNtL2t2bV9ob3N0LmggYi9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9rdm1faG9zdC5oCmluZGV4IDQ5
OTJhZmMxOWNmNi4uYjZhMTcwNGUwZjg5IDEwMDY0NAotLS0gYS9hcmNoL3g4Ni9pbmNsdWRlL2Fz
bS9rdm1faG9zdC5oCisrKyBiL2FyY2gveDg2L2luY2x1ZGUvYXNtL2t2bV9ob3N0LmgKQEAgLTEz
ODQsNyArMTM4NCw3IEBAIHZvaWQga3ZtX21tdV9jaGFuZ2VfbW11X3BhZ2VzKHN0cnVjdCBrdm0g
Kmt2bSwgdW5zaWduZWQgbG9uZyBrdm1fbnJfbW11X3BhZ2VzKTsKIGludCBsb2FkX3BkcHRycyhz
dHJ1Y3Qga3ZtX3ZjcHUgKnZjcHUsIHN0cnVjdCBrdm1fbW11ICptbXUsIHVuc2lnbmVkIGxvbmcg
Y3IzKTsKIGJvb2wgcGRwdHJzX2NoYW5nZWQoc3RydWN0IGt2bV92Y3B1ICp2Y3B1KTsKIAotaW50
IGVtdWxhdG9yX3dyaXRlX3BoeXMoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFfdCBncGEsCitp
bnQgZW11bGF0b3Jfd3JpdGVfcGh5cyhzdHJ1Y3Qga3ZtX3ZjcHUgKnZjcHUsIGdwYV90IGdwYSwg
Z3ZhX3QgZ3ZhLAogCQkJICBjb25zdCB2b2lkICp2YWwsIGludCBieXRlcyk7CiAKIHN0cnVjdCBr
dm1faXJxX21hc2tfbm90aWZpZXIgewpkaWZmIC0tZ2l0IGEvYXJjaC94ODYvaW5jbHVkZS9hc20v
a3ZtX3BhZ2VfdHJhY2suaCBiL2FyY2gveDg2L2luY2x1ZGUvYXNtL2t2bV9wYWdlX3RyYWNrLmgK
aW5kZXggODdiZDYwMjVkOTFkLi45YTI2MWU0NjNlYjMgMTAwNjQ0Ci0tLSBhL2FyY2gveDg2L2lu
Y2x1ZGUvYXNtL2t2bV9wYWdlX3RyYWNrLmgKKysrIGIvYXJjaC94ODYvaW5jbHVkZS9hc20va3Zt
X3BhZ2VfdHJhY2suaApAQCAtMjgsMTIgKzI4LDE0IEBAIHN0cnVjdCBrdm1fcGFnZV90cmFja19u
b3RpZmllcl9ub2RlIHsKIAkgKgogCSAqIEB2Y3B1OiB0aGUgdmNwdSB3aGVyZSB0aGUgd3JpdGUg
YWNjZXNzIGhhcHBlbmVkLgogCSAqIEBncGE6IHRoZSBwaHlzaWNhbCBhZGRyZXNzIHdyaXR0ZW4g
YnkgZ3Vlc3QuCisJICogQGd2YTogdGhlIHZpcnR1YWwgYWRkcmVzcyB3cml0dGVuIGJ5IGd1ZXN0
LgogCSAqIEBuZXc6IHRoZSBkYXRhIHdhcyB3cml0dGVuIHRvIHRoZSBhZGRyZXNzLgogCSAqIEBi
eXRlczogdGhlIHdyaXR0ZW4gbGVuZ3RoLgogCSAqIEBub2RlOiB0aGlzIG5vZGUKIAkgKi8KLQl2
b2lkICgqdHJhY2tfd3JpdGUpKHN0cnVjdCBrdm1fdmNwdSAqdmNwdSwgZ3BhX3QgZ3BhLCBjb25z
dCB1OCAqbmV3LAotCQkJICAgIGludCBieXRlcywgc3RydWN0IGt2bV9wYWdlX3RyYWNrX25vdGlm
aWVyX25vZGUgKm5vZGUpOworCXZvaWQgKCp0cmFja193cml0ZSkoc3RydWN0IGt2bV92Y3B1ICp2
Y3B1LCBncGFfdCBncGEsIGd2YV90IGd2YSwKKwkJCSAgICBjb25zdCB1OCAqbmV3LCBpbnQgYnl0
ZXMsCisJCQkgICAgc3RydWN0IGt2bV9wYWdlX3RyYWNrX25vdGlmaWVyX25vZGUgKm5vZGUpOwog
CS8qCiAJICogSXQgaXMgY2FsbGVkIHdoZW4gbWVtb3J5IHNsb3QgaXMgYmVpbmcgbW92ZWQgb3Ig
cmVtb3ZlZAogCSAqIHVzZXJzIGNhbiBkcm9wIHdyaXRlLXByb3RlY3Rpb24gZm9yIHRoZSBwYWdl
cyBpbiB0aGF0IG1lbW9yeSBzbG90CkBAIC02OCw3ICs3MCw3IEBAIGt2bV9wYWdlX3RyYWNrX3Jl
Z2lzdGVyX25vdGlmaWVyKHN0cnVjdCBrdm0gKmt2bSwKIHZvaWQKIGt2bV9wYWdlX3RyYWNrX3Vu
cmVnaXN0ZXJfbm90aWZpZXIoc3RydWN0IGt2bSAqa3ZtLAogCQkJCSAgIHN0cnVjdCBrdm1fcGFn
ZV90cmFja19ub3RpZmllcl9ub2RlICpuKTsKLXZvaWQga3ZtX3BhZ2VfdHJhY2tfd3JpdGUoc3Ry
dWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFfdCBncGEsIGNvbnN0IHU4ICpuZXcsCi0JCQkgIGludCBi
eXRlcyk7Cit2b2lkIGt2bV9wYWdlX3RyYWNrX3dyaXRlKHN0cnVjdCBrdm1fdmNwdSAqdmNwdSwg
Z3BhX3QgZ3BhLCBndmFfdCBndmEsCisJCQkgIGNvbnN0IHU4ICpuZXcsIGludCBieXRlcyk7CiB2
b2lkIGt2bV9wYWdlX3RyYWNrX2ZsdXNoX3Nsb3Qoc3RydWN0IGt2bSAqa3ZtLCBzdHJ1Y3Qga3Zt
X21lbW9yeV9zbG90ICpzbG90KTsKICNlbmRpZgpkaWZmIC0tZ2l0IGEvYXJjaC94ODYva3ZtL21t
dS9tbXUuYyBiL2FyY2gveDg2L2t2bS9tbXUvbW11LmMKaW5kZXggNmQ2YTBhZTc4MDBjLi4wMzhh
MGUwMjhlNzcgMTAwNjQ0Ci0tLSBhL2FyY2gveDg2L2t2bS9tbXUvbW11LmMKKysrIGIvYXJjaC94
ODYva3ZtL21tdS9tbXUuYwpAQCAtNTMxOCw3ICs1MzE4LDcgQEAgc3RhdGljIGNvbnN0IHVuaW9u
IGt2bV9tbXVfcGFnZV9yb2xlIHJvbGVfaWduID0gewogCS5pbnZhbGlkID0gMHgxLAogfTsKIAot
c3RhdGljIHZvaWQga3ZtX21tdV9wdGVfd3JpdGUoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFf
dCBncGEsCitzdGF0aWMgdm9pZCBrdm1fbW11X3B0ZV93cml0ZShzdHJ1Y3Qga3ZtX3ZjcHUgKnZj
cHUsIGdwYV90IGdwYSwgZ3ZhX3QgZ3ZhLAogCQkJICAgICAgY29uc3QgdTggKm5ldywgaW50IGJ5
dGVzLAogCQkJICAgICAgc3RydWN0IGt2bV9wYWdlX3RyYWNrX25vdGlmaWVyX25vZGUgKm5vZGUp
CiB7CmRpZmYgLS1naXQgYS9hcmNoL3g4Ni9rdm0vbW11L3BhZ2VfdHJhY2suYyBiL2FyY2gveDg2
L2t2bS9tbXUvcGFnZV90cmFjay5jCmluZGV4IGE3YmNkZTM0ZDFmMi4uOTY0MmFmMWIyYzIxIDEw
MDY0NAotLS0gYS9hcmNoL3g4Ni9rdm0vbW11L3BhZ2VfdHJhY2suYworKysgYi9hcmNoL3g4Ni9r
dm0vbW11L3BhZ2VfdHJhY2suYwpAQCAtMjE2LDggKzIxNiw4IEBAIEVYUE9SVF9TWU1CT0xfR1BM
KGt2bV9wYWdlX3RyYWNrX3VucmVnaXN0ZXJfbm90aWZpZXIpOwogICogVGhlIG5vZGUgc2hvdWxk
IGZpZ3VyZSBvdXQgaWYgdGhlIHdyaXR0ZW4gcGFnZSBpcyB0aGUgb25lIHRoYXQgbm9kZSBpcwog
ICogaW50ZXJlc3RlZCBpbiBieSBpdHNlbGYuCiAgKi8KLXZvaWQga3ZtX3BhZ2VfdHJhY2tfd3Jp
dGUoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFfdCBncGEsIGNvbnN0IHU4ICpuZXcsCi0JCQkg
IGludCBieXRlcykKK3ZvaWQga3ZtX3BhZ2VfdHJhY2tfd3JpdGUoc3RydWN0IGt2bV92Y3B1ICp2
Y3B1LCBncGFfdCBncGEsIGd2YV90IGd2YSwKKwkJCSAgY29uc3QgdTggKm5ldywgaW50IGJ5dGVz
KQogewogCXN0cnVjdCBrdm1fcGFnZV90cmFja19ub3RpZmllcl9oZWFkICpoZWFkOwogCXN0cnVj
dCBrdm1fcGFnZV90cmFja19ub3RpZmllcl9ub2RlICpuOwpAQCAtMjMxLDcgKzIzMSw3IEBAIHZv
aWQga3ZtX3BhZ2VfdHJhY2tfd3JpdGUoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFfdCBncGEs
IGNvbnN0IHU4ICpuZXcsCiAJaWR4ID0gc3JjdV9yZWFkX2xvY2soJmhlYWQtPnRyYWNrX3NyY3Up
OwogCWhsaXN0X2Zvcl9lYWNoX2VudHJ5X3JjdShuLCAmaGVhZC0+dHJhY2tfbm90aWZpZXJfbGlz
dCwgbm9kZSkKIAkJaWYgKG4tPnRyYWNrX3dyaXRlKQotCQkJbi0+dHJhY2tfd3JpdGUodmNwdSwg
Z3BhLCBuZXcsIGJ5dGVzLCBuKTsKKwkJCW4tPnRyYWNrX3dyaXRlKHZjcHUsIGdwYSwgZ3ZhLCBu
ZXcsIGJ5dGVzLCBuKTsKIAlzcmN1X3JlYWRfdW5sb2NrKCZoZWFkLT50cmFja19zcmN1LCBpZHgp
OwogfQogCmRpZmYgLS1naXQgYS9hcmNoL3g4Ni9rdm0veDg2LmMgYi9hcmNoL3g4Ni9rdm0veDg2
LmMKaW5kZXggYjdlYjIyM2RjMWFhLi5hNTljOTM1ZjRiYmUgMTAwNjQ0Ci0tLSBhL2FyY2gveDg2
L2t2bS94ODYuYworKysgYi9hcmNoL3g4Ni9rdm0veDg2LmMKQEAgLTU3MjAsNyArNTcyMCw3IEBA
IHN0YXRpYyBpbnQgdmNwdV9tbWlvX2d2YV90b19ncGEoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCB1
bnNpZ25lZCBsb25nIGd2YSwKIAlyZXR1cm4gdmNwdV9pc19tbWlvX2dwYSh2Y3B1LCBndmEsICpn
cGEsIHdyaXRlKTsKIH0KIAotaW50IGVtdWxhdG9yX3dyaXRlX3BoeXMoc3RydWN0IGt2bV92Y3B1
ICp2Y3B1LCBncGFfdCBncGEsCitpbnQgZW11bGF0b3Jfd3JpdGVfcGh5cyhzdHJ1Y3Qga3ZtX3Zj
cHUgKnZjcHUsIGdwYV90IGdwYSwgZ3ZhX3QgZ3ZhLAogCQkJY29uc3Qgdm9pZCAqdmFsLCBpbnQg
Ynl0ZXMpCiB7CiAJaW50IHJldDsKQEAgLTU3MjgsMTQgKzU3MjgsMTQgQEAgaW50IGVtdWxhdG9y
X3dyaXRlX3BoeXMoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFfdCBncGEsCiAJcmV0ID0ga3Zt
X3ZjcHVfd3JpdGVfZ3Vlc3QodmNwdSwgZ3BhLCB2YWwsIGJ5dGVzKTsKIAlpZiAocmV0IDwgMCkK
IAkJcmV0dXJuIDA7Ci0Ja3ZtX3BhZ2VfdHJhY2tfd3JpdGUodmNwdSwgZ3BhLCB2YWwsIGJ5dGVz
KTsKKwlrdm1fcGFnZV90cmFja193cml0ZSh2Y3B1LCBncGEsIGd2YSwgdmFsLCBieXRlcyk7CiAJ
cmV0dXJuIDE7CiB9CiAKIHN0cnVjdCByZWFkX3dyaXRlX2VtdWxhdG9yX29wcyB7CiAJaW50ICgq
cmVhZF93cml0ZV9wcmVwYXJlKShzdHJ1Y3Qga3ZtX3ZjcHUgKnZjcHUsIHZvaWQgKnZhbCwKIAkJ
CQkgIGludCBieXRlcyk7Ci0JaW50ICgqcmVhZF93cml0ZV9lbXVsYXRlKShzdHJ1Y3Qga3ZtX3Zj
cHUgKnZjcHUsIGdwYV90IGdwYSwKKwlpbnQgKCpyZWFkX3dyaXRlX2VtdWxhdGUpKHN0cnVjdCBr
dm1fdmNwdSAqdmNwdSwgZ3BhX3QgZ3BhLCBndmFfdCBndmEsCiAJCQkJICB2b2lkICp2YWwsIGlu
dCBieXRlcyk7CiAJaW50ICgqcmVhZF93cml0ZV9tbWlvKShzdHJ1Y3Qga3ZtX3ZjcHUgKnZjcHUs
IGdwYV90IGdwYSwKIAkJCSAgICAgICBpbnQgYnl0ZXMsIHZvaWQgKnZhbCk7CkBAIC01NzU2LDE2
ICs1NzU2LDE2IEBAIHN0YXRpYyBpbnQgcmVhZF9wcmVwYXJlKHN0cnVjdCBrdm1fdmNwdSAqdmNw
dSwgdm9pZCAqdmFsLCBpbnQgYnl0ZXMpCiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyBpbnQgcmVh
ZF9lbXVsYXRlKHN0cnVjdCBrdm1fdmNwdSAqdmNwdSwgZ3BhX3QgZ3BhLAorc3RhdGljIGludCBy
ZWFkX2VtdWxhdGUoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFfdCBncGEsIGd2YV90IGd2YSwK
IAkJCXZvaWQgKnZhbCwgaW50IGJ5dGVzKQogewogCXJldHVybiAha3ZtX3ZjcHVfcmVhZF9ndWVz
dCh2Y3B1LCBncGEsIHZhbCwgYnl0ZXMpOwogfQogCi1zdGF0aWMgaW50IHdyaXRlX2VtdWxhdGUo
c3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFfdCBncGEsCitzdGF0aWMgaW50IHdyaXRlX2VtdWxh
dGUoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFfdCBncGEsIGd2YV90IGd2YSwKIAkJCSB2b2lk
ICp2YWwsIGludCBieXRlcykKIHsKLQlyZXR1cm4gZW11bGF0b3Jfd3JpdGVfcGh5cyh2Y3B1LCBn
cGEsIHZhbCwgYnl0ZXMpOworCXJldHVybiBlbXVsYXRvcl93cml0ZV9waHlzKHZjcHUsIGdwYSwg
Z3ZhLCB2YWwsIGJ5dGVzKTsKIH0KIAogc3RhdGljIGludCB3cml0ZV9tbWlvKHN0cnVjdCBrdm1f
dmNwdSAqdmNwdSwgZ3BhX3QgZ3BhLCBpbnQgYnl0ZXMsIHZvaWQgKnZhbCkKQEAgLTU4MzMsNyAr
NTgzMyw3IEBAIHN0YXRpYyBpbnQgZW11bGF0b3JfcmVhZF93cml0ZV9vbmVwYWdlKHVuc2lnbmVk
IGxvbmcgYWRkciwgdm9pZCAqdmFsLAogCQkJcmV0dXJuIFg4NkVNVUxfUFJPUEFHQVRFX0ZBVUxU
OwogCX0KIAotCWlmICghcmV0ICYmIG9wcy0+cmVhZF93cml0ZV9lbXVsYXRlKHZjcHUsIGdwYSwg
dmFsLCBieXRlcykpCisJaWYgKCFyZXQgJiYgb3BzLT5yZWFkX3dyaXRlX2VtdWxhdGUodmNwdSwg
Z3BhLCBhZGRyLCB2YWwsIGJ5dGVzKSkKIAkJcmV0dXJuIFg4NkVNVUxfQ09OVElOVUU7CiAKIAkv
KgpAQCAtNjAwMiw3ICs2MDAyLDcgQEAgc3RhdGljIGludCBlbXVsYXRvcl9jbXB4Y2hnX2VtdWxh
dGVkKHN0cnVjdCB4ODZfZW11bGF0ZV9jdHh0ICpjdHh0LAogCWlmICghZXhjaGFuZ2VkKQogCQly
ZXR1cm4gWDg2RU1VTF9DTVBYQ0hHX0ZBSUxFRDsKIAotCWt2bV9wYWdlX3RyYWNrX3dyaXRlKHZj
cHUsIGdwYSwgbmV3LCBieXRlcyk7CisJa3ZtX3BhZ2VfdHJhY2tfd3JpdGUodmNwdSwgZ3BhLCBh
ZGRyLCBuZXcsIGJ5dGVzKTsKIAogCXJldHVybiBYODZFTVVMX0NPTlRJTlVFOwogCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3QuYyBiL2RyaXZlcnMvZ3B1L2RybS9p
OTE1L2d2dC9rdm1ndC5jCmluZGV4IGFkOGE5ZGY0OWYyOS4uNGUzNzBiMjE2MzY1IDEwMDY0NAot
LS0gYS9kcml2ZXJzL2dwdS9kcm0vaTkxNS9ndnQva3ZtZ3QuYworKysgYi9kcml2ZXJzL2dwdS9k
cm0vaTkxNS9ndnQva3ZtZ3QuYwpAQCAtMTc0OSw3ICsxNzQ5LDcgQEAgc3RhdGljIGludCBrdm1n
dF9wYWdlX3RyYWNrX3JlbW92ZSh1bnNpZ25lZCBsb25nIGhhbmRsZSwgdTY0IGdmbikKIAlyZXR1
cm4gMDsKIH0KIAotc3RhdGljIHZvaWQga3ZtZ3RfcGFnZV90cmFja193cml0ZShzdHJ1Y3Qga3Zt
X3ZjcHUgKnZjcHUsIGdwYV90IGdwYSwKK3N0YXRpYyB2b2lkIGt2bWd0X3BhZ2VfdHJhY2tfd3Jp
dGUoc3RydWN0IGt2bV92Y3B1ICp2Y3B1LCBncGFfdCBncGEsIGd2YV90IGd2YSwKIAkJY29uc3Qg
dTggKnZhbCwgaW50IGxlbiwKIAkJc3RydWN0IGt2bV9wYWdlX3RyYWNrX25vdGlmaWVyX25vZGUg
Km5vZGUpCiB7Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
ClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1m
b3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9s
aXN0aW5mby92aXJ0dWFsaXphdGlvbg==
