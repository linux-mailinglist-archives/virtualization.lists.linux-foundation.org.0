Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp1.osuosl.org (smtp1.osuosl.org [140.211.166.138])
	by mail.lfdr.de (Postfix) with ESMTPS id 4E4523E523C
	for <lists.virtualization@lfdr.de>; Tue, 10 Aug 2021 06:32:48 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp1.osuosl.org (Postfix) with ESMTP id 65E87833C6;
	Tue, 10 Aug 2021 04:32:46 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
	by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id iILif3AmP8rp; Tue, 10 Aug 2021 04:32:42 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp1.osuosl.org (Postfix) with ESMTPS id 44271833CD;
	Tue, 10 Aug 2021 04:32:42 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id B9EFCC000E;
	Tue, 10 Aug 2021 04:32:41 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 4193FC000E
 for <virtualization@lists.linux-foundation.org>;
 Tue, 10 Aug 2021 04:32:39 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp3.osuosl.org (Postfix) with ESMTP id 2326C60624
 for <virtualization@lists.linux-foundation.org>;
 Tue, 10 Aug 2021 04:32:39 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp3.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp3.osuosl.org ([127.0.0.1])
 by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id LnIDavir42vN
 for <virtualization@lists.linux-foundation.org>;
 Tue, 10 Aug 2021 04:32:37 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [216.205.24.124])
 by smtp3.osuosl.org (Postfix) with ESMTPS id ED34E60612
 for <virtualization@lists.linux-foundation.org>;
 Tue, 10 Aug 2021 04:32:36 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1628569955;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=ht3dxfkHWEKQF4SuFqG+mpxW08YJZxVs8iuBlR8ItKo=;
 b=HL6nwn5MBwSHx/4VI5ym25+71LPsRBLdYsIYuBh8XchEmA9MVIjiGQ9w/+PgSpE6GbKMXK
 1UnabqACEPEaRAqUxpwt+aTFBZ1jMhhQRqDGLToofZ7JjFnga1HWOTOaGxEI7LskNFLB3C
 bW8rfTpvzdNzeaaPYGdgO4K0P2pnF/M=
Received: from mail-pl1-f199.google.com (mail-pl1-f199.google.com
 [209.85.214.199]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-429-olOow6iTOL22J8QeLP9b4w-1; Tue, 10 Aug 2021 00:32:34 -0400
X-MC-Unique: olOow6iTOL22J8QeLP9b4w-1
Received: by mail-pl1-f199.google.com with SMTP id
 j5-20020a170902da85b029012c4287ea54so9716277plx.22
 for <virtualization@lists.linux-foundation.org>;
 Mon, 09 Aug 2021 21:32:33 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=ht3dxfkHWEKQF4SuFqG+mpxW08YJZxVs8iuBlR8ItKo=;
 b=djv+UEgYN9SZ34Hnn6BkoI6AIApShGn7fD77wfmgG6s8sMQAxDjtkIpCLGGBLSISfi
 3rVsZOD+tDJyR0ro7USirHk3NATixTc0QvVhWY6rK4I2uf5EzIXTuutX/kS6HfJs0m6s
 5ID2IZkLRCEqY23NkVET1+x11dadO3sXnOk5QTWHkUaF+3jhE3Q7oqVEe7/IApDIejj1
 0S+dUJ/4e9rk3aeB5oiz+iazRximDWmGphxtHB8JY47IzfGvskZb1QSEZ3WkQFLlBWKd
 0qS2i2snQj6FuXIXjlFzh56cVtpounLkNZ/rFM9y2ud8opV9RwYX2ENSAa0DXz+mkVQT
 k69g==
X-Gm-Message-State: AOAM533TQY/cJk8jNMUfJIweN5Q2rRixmi5r1x9vZxvvgQzcZ6PzEdIq
 wIySqVyJGsct/cnnyqqElQlsU/EkFA4rbSP9DoSrmCw7ma8ZFU+5l+6TmgmX+l+NEAdH1a7hWXe
 dh7mkcASz/gnDAnXclTTII8iZlqFrVdSbTAOSzQEysw==
X-Received: by 2002:a63:2541:: with SMTP id l62mr54156pgl.183.1628569952963;
 Mon, 09 Aug 2021 21:32:32 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJyX11zMMTqVIitonbOuTeJGJ5Sp0dpgY2xl9pafa1tyAC7Han1cwqasObuEY+0I0wtdp1pC1w==
X-Received: by 2002:a63:2541:: with SMTP id l62mr54122pgl.183.1628569952463;
 Mon, 09 Aug 2021 21:32:32 -0700 (PDT)
Received: from wangxiaodeMacBook-Air.local ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id y4sm1157261pjg.9.2021.08.09.21.32.29
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Mon, 09 Aug 2021 21:32:32 -0700 (PDT)
Subject: Re: [Patch v1 2/3] vdpa/mlx5: Add support for control VQ and MAC
 setting
To: Eli Cohen <elic@nvidia.com>, mst@redhat.com,
 virtualization@lists.linux-foundation.org
References: <20210809140800.97835-1-elic@nvidia.com>
 <20210809140800.97835-3-elic@nvidia.com>
From: Jason Wang <jasowang@redhat.com>
Message-ID: <1c58e6ff-fe9f-4d67-dcbc-a2b990557150@redhat.com>
Date: Tue, 10 Aug 2021 12:32:23 +0800
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0)
 Gecko/20100101 Thunderbird/78.12.0
MIME-Version: 1.0
In-Reply-To: <20210809140800.97835-3-elic@nvidia.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: eperezma@redhat.com
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CuWcqCAyMDIxLzgvOSDkuIvljYgxMDowNywgRWxpIENvaGVuIOWGmemBkzoKPiBBZGQgc3VwcG9y
dCB0byBoYW5kbGUgY29udHJvbCB2aXJ0cXVldWUgY29uZmlndXJhdGlvbnMgcGVyIHZpcnRpbwo+
IHNwZWNpZmljYXRpb24uIFRoZSBjb250cm9sIHZpcnRxdWV1ZSBpcyBpbXBsZW1lbnRlZCBpbiBz
b2Z0d2FyZSBhbmQgbm8KPiBoYXJkd2FyZSBvZmZsb2FkaW5nIGlzIGludm9sdmVkLgo+Cj4gQ29u
dHJvbCBWUSBjb25maWd1cmF0aW9uIG5lZWQgdGFzayBjb250ZXh0LCB0aGVyZWZvcmUgYWxsIGNv
bmZpZ3VyYXRpb25zCj4gYXJlIGhhbmRsZWQgaW4gYSB3b3JrcXVldWUgY3JlYXRlZCBmb3IgdGhl
IHB1cnBvc2UuCj4KPiBNb2RpZmljYXRpb25zIGFyZSBtYWRlIHRvIHRoZSBtZW1vcnkgcmVnaXN0
cmF0aW9uIGNvZGUgdG8gYWxsb3cgZm9yCj4gc2F2aW5nIGEgY29weSBvZiBpdG9sYiB0byBiZSB1
c2VkIGJ5IHRoZSBjb250cm9sIFZRIHRvIGFjY2VzcyB0aGUgdnJpbmcuCj4KPiBUaGUgbWF4IG51
bWJlciBvZiBkYXRhIHZpcnRxdWV1cyBzdXBwb3J0ZWQgYnkgdGhlIGRyaXZlciBoYXMgYmVlbgo+
IHVwZGF0ZWQgdG8gMiBzaW5jZSBtdWx0aXF1ZXVlIGlzIG5vdCBzdXBwb3J0ZWQgYXQgdGhpcyBz
dGFnZSBhbmQgd2UgbmVlZAo+IHRvIGVuc3VyZSBjb25zaXN0ZW5jeSBvZiBWUSBpbmRpY2VzIG1h
cHBpbmcgdG8gZWl0aGVyIGRhdGEgb3IgY29udHJvbAo+IFZRLgo+Cj4gdjAgLS0+IHYxOgo+IGNs
ZWFudXAgc29tZSBsZWZ0b3ZlciBjb2RlCj4KPiBTaWduZWQtb2ZmLWJ5OiBFbGkgQ29oZW4gPGVs
aWNAbnZpZGlhLmNvbT4KPiAtLS0KPiAgIGRyaXZlcnMvdmRwYS9tbHg1L2NvcmUvbWx4NV92ZHBh
LmggfCAgMjMgKysrCj4gICBkcml2ZXJzL3ZkcGEvbWx4NS9jb3JlL21yLmMgICAgICAgIHwgIDg3
ICsrKysrKy0tCj4gICBkcml2ZXJzL3ZkcGEvbWx4NS9jb3JlL3Jlc291cmNlcy5jIHwgIDMxICsr
Kwo+ICAgZHJpdmVycy92ZHBhL21seDUvbmV0L21seDVfdm5ldC5jICB8IDMwNyArKysrKysrKysr
KysrKysrKysrKysrKysrLS0tLQo+ICAgNCBmaWxlcyBjaGFuZ2VkLCAzOTEgaW5zZXJ0aW9ucygr
KSwgNTcgZGVsZXRpb25zKC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92ZHBhL21seDUvY29y
ZS9tbHg1X3ZkcGEuaCBiL2RyaXZlcnMvdmRwYS9tbHg1L2NvcmUvbWx4NV92ZHBhLmgKPiBpbmRl
eCA4ZDBhNmYyY2IzZjAuLjcxYmIyOWZjZjRjYSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZkcGEv
bWx4NS9jb3JlL21seDVfdmRwYS5oCj4gKysrIGIvZHJpdmVycy92ZHBhL21seDUvY29yZS9tbHg1
X3ZkcGEuaAo+IEBAIC01LDYgKzUsNyBAQAo+ICAgI2RlZmluZSBfX01MWDVfVkRQQV9IX18KPiAg
IAo+ICAgI2luY2x1ZGUgPGxpbnV4L2V0aGVyZGV2aWNlLmg+Cj4gKyNpbmNsdWRlIDxsaW51eC92
cmluZ2guaD4KPiAgICNpbmNsdWRlIDxsaW51eC92ZHBhLmg+Cj4gICAjaW5jbHVkZSA8bGludXgv
bWx4NS9kcml2ZXIuaD4KPiAgIAo+IEBAIC00Nyw2ICs0OCwyNiBAQCBzdHJ1Y3QgbWx4NV92ZHBh
X3Jlc291cmNlcyB7Cj4gICAJYm9vbCB2YWxpZDsKPiAgIH07Cj4gICAKPiArc3RydWN0IG1seDVf
Y29udHJvbF92cSB7Cj4gKwlzdHJ1Y3Qgdmhvc3RfaW90bGIgKmlvdGxiOwo+ICsJLyogc3Bpbmxv
Y2sgdG8gc3luY2hyb25pemUgaW9tbXUgdGFibGUgKi8KPiArCXNwaW5sb2NrX3QgaW9tbXVfbG9j
azsKPiArCXN0cnVjdCB2cmluZ2ggdnJpbmc7Cj4gKwlib29sIHJlYWR5Owo+ICsJdTY0IGRlc2Nf
YWRkcjsKPiArCXU2NCBkZXZpY2VfYWRkcjsKPiArCXU2NCBkcml2ZXJfYWRkcjsKPiArCXN0cnVj
dCB2ZHBhX2NhbGxiYWNrIGV2ZW50X2NiOwo+ICsJc3RydWN0IHZyaW5naF9raW92IHJpb3Y7Cj4g
KwlzdHJ1Y3QgdnJpbmdoX2tpb3Ygd2lvdjsKPiArCXVuc2lnbmVkIHNob3J0IGhlYWQ7Cj4gK307
Cj4gKwo+ICtzdHJ1Y3QgbWx4NV9jdHJsX3dxX2VudCB7Cj4gKwlzdHJ1Y3Qgd29ya19zdHJ1Y3Qg
d29yazsKPiArCXN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldjsKPiArfTsKPiArCj4gICBzdHJ1
Y3QgbWx4NV92ZHBhX2RldiB7Cj4gICAJc3RydWN0IHZkcGFfZGV2aWNlIHZkZXY7Cj4gICAJc3Ry
dWN0IG1seDVfY29yZV9kZXYgKm1kZXY7Cj4gQEAgLTU5LDYgKzgwLDggQEAgc3RydWN0IG1seDVf
dmRwYV9kZXYgewo+ICAgCXUzMiBnZW5lcmF0aW9uOwo+ICAgCj4gICAJc3RydWN0IG1seDVfdmRw
YV9tciBtcjsKPiArCXN0cnVjdCBtbHg1X2NvbnRyb2xfdnEgY3ZxOwo+ICsJc3RydWN0IHdvcmtx
dWV1ZV9zdHJ1Y3QgKndxOwo+ICAgfTsKPiAgIAo+ICAgaW50IG1seDVfdmRwYV9hbGxvY19wZChz
dHJ1Y3QgbWx4NV92ZHBhX2RldiAqZGV2LCB1MzIgKnBkbiwgdTE2IHVpZCk7Cj4gZGlmZiAtLWdp
dCBhL2RyaXZlcnMvdmRwYS9tbHg1L2NvcmUvbXIuYyBiL2RyaXZlcnMvdmRwYS9tbHg1L2NvcmUv
bXIuYwo+IGluZGV4IGRjZWU2MDM5ZTk2Ni4uNDZhNjU3ZWJiMWRmIDEwMDY0NAo+IC0tLSBhL2Ry
aXZlcnMvdmRwYS9tbHg1L2NvcmUvbXIuYwo+ICsrKyBiL2RyaXZlcnMvdmRwYS9tbHg1L2NvcmUv
bXIuYwo+IEBAIC0xLDYgKzEsNyBAQAo+ICAgLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQ
TC0yLjAgT1IgTGludXgtT3BlbklCCj4gICAvKiBDb3B5cmlnaHQgKGMpIDIwMjAgTWVsbGFub3gg
VGVjaG5vbG9naWVzIEx0ZC4gKi8KPiAgIAo+ICsjaW5jbHVkZSA8bGludXgvdmhvc3RfdHlwZXMu
aD4KPiAgICNpbmNsdWRlIDxsaW51eC92ZHBhLmg+Cj4gICAjaW5jbHVkZSA8bGludXgvZ2NkLmg+
Cj4gICAjaW5jbHVkZSA8bGludXgvc3RyaW5nLmg+Cj4gQEAgLTQ1MSwzMyArNDUyLDM4IEBAIHN0
YXRpYyB2b2lkIGRlc3Ryb3lfZG1hX21yKHN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldiwgc3Ry
dWN0IG1seDVfdmRwYV9tciAqbXIpCj4gICAJbWx4NV92ZHBhX2Rlc3Ryb3lfbWtleShtdmRldiwg
Jm1yLT5ta2V5KTsKPiAgIH0KPiAgIAo+IC1zdGF0aWMgaW50IF9tbHg1X3ZkcGFfY3JlYXRlX21y
KHN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldiwgc3RydWN0IHZob3N0X2lvdGxiICppb3RsYikK
PiArc3RhdGljIGludCBkdXBfaW90bGIoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2LCBzdHJ1
Y3Qgdmhvc3RfaW90bGIgKnNyYykKPiAgIHsKPiAtCXN0cnVjdCBtbHg1X3ZkcGFfbXIgKm1yID0g
Jm12ZGV2LT5tcjsKPiArCXN0cnVjdCB2aG9zdF9pb3RsYl9tYXAgKm1hcDsKPiArCXU2NCBzdGFy
dCA9IDBVTEwsIGxhc3QgPSAwVUxMIC0gMTsKPiAgIAlpbnQgZXJyOwo+ICAgCj4gLQlpZiAobXIt
PmluaXRpYWxpemVkKQo+IC0JCXJldHVybiAwOwo+IC0KPiAtCWlmIChpb3RsYikKPiAtCQllcnIg
PSBjcmVhdGVfdXNlcl9tcihtdmRldiwgaW90bGIpOwo+IC0JZWxzZQo+IC0JCWVyciA9IGNyZWF0
ZV9kbWFfbXIobXZkZXYsIG1yKTsKPiAtCj4gLQlpZiAoIWVycikKPiAtCQltci0+aW5pdGlhbGl6
ZWQgPSB0cnVlOwo+ICsJaWYgKCFzcmMpIHsKPiArCQllcnIgPSB2aG9zdF9pb3RsYl9hZGRfcmFu
Z2UobXZkZXYtPmN2cS5pb3RsYiwgc3RhcnQsIGxhc3QsIHN0YXJ0LCBWSE9TVF9BQ0NFU1NfUlcp
Owo+ICsJCXJldHVybiBlcnI7Cj4gKwl9Cj4gICAKPiAtCXJldHVybiBlcnI7Cj4gKwlmb3IgKG1h
cCA9IHZob3N0X2lvdGxiX2l0cmVlX2ZpcnN0KHNyYywgc3RhcnQsIGxhc3QpOyBtYXA7Cj4gKwkJ
bWFwID0gdmhvc3RfaW90bGJfaXRyZWVfbmV4dChtYXAsIHN0YXJ0LCBsYXN0KSkgewo+ICsJCWVy
ciA9IHZob3N0X2lvdGxiX2FkZF9yYW5nZShtdmRldi0+Y3ZxLmlvdGxiLCBtYXAtPnN0YXJ0LCBt
YXAtPmxhc3QsCj4gKwkJCQkJICAgIG1hcC0+YWRkciwgbWFwLT5wZXJtKTsKPiArCQlpZiAoZXJy
KQo+ICsJCQlyZXR1cm4gZXJyOwo+ICsJfQo+ICsJcmV0dXJuIDA7Cj4gICB9Cj4gICAKPiAtaW50
IG1seDVfdmRwYV9jcmVhdGVfbXIoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2LCBzdHJ1Y3Qg
dmhvc3RfaW90bGIgKmlvdGxiKQo+ICtzdGF0aWMgdm9pZCBwcnVuZV9pb3RsYihzdHJ1Y3QgbWx4
NV92ZHBhX2RldiAqbXZkZXYpCj4gICB7Cj4gLQlpbnQgZXJyOwo+ICsJc3RydWN0IG1seDVfdmRw
YV9tciAqbXIgPSAmbXZkZXYtPm1yOwo+ICsJdTY0IHN0YXJ0ID0gMFVMTCwgbGFzdCA9IDBVTEwg
LSAxOwo+ICAgCj4gLQltdXRleF9sb2NrKCZtdmRldi0+bXIubWtleV9tdHgpOwo+IC0JZXJyID0g
X21seDVfdmRwYV9jcmVhdGVfbXIobXZkZXYsIGlvdGxiKTsKPiAtCW11dGV4X3VubG9jaygmbXZk
ZXYtPm1yLm1rZXlfbXR4KTsKPiAtCXJldHVybiBlcnI7Cj4gKwlpZiAoIW1yLT51c2VyX21yKSB7
Cj4gKwkJdmhvc3RfaW90bGJfZGVsX3JhbmdlKG12ZGV2LT5jdnEuaW90bGIsIHN0YXJ0LCBsYXN0
KTsKPiArCQlyZXR1cm47Cj4gKwl9Cj4gKwo+ICsJdmhvc3RfaW90bGJfZGVsX3JhbmdlKG12ZGV2
LT5jdnEuaW90bGIsIHN0YXJ0LCBsYXN0KTsKCgpJdCBsb29rcyB0byBtZSB3ZSBkb24ndCBuZWVk
IGNoZWNrIG9mIGlmICghbXItPnVzZXJfbXIpIGhlcmUuCgoKPiAgIH0KPiAgIAo+ICAgc3RhdGlj
IHZvaWQgZGVzdHJveV91c2VyX21yKHN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldiwgc3RydWN0
IG1seDVfdmRwYV9tciAqbXIpCj4gQEAgLTUwMSw2ICs1MDcsNyBAQCB2b2lkIG1seDVfdmRwYV9k
ZXN0cm95X21yKHN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldikKPiAgIAlpZiAoIW1yLT5pbml0
aWFsaXplZCkKPiAgIAkJZ290byBvdXQ7Cj4gICAKPiArCXBydW5lX2lvdGxiKG12ZGV2KTsKPiAg
IAlpZiAobXItPnVzZXJfbXIpCj4gICAJCWRlc3Ryb3lfdXNlcl9tcihtdmRldiwgbXIpOwo+ICAg
CWVsc2UKPiBAQCAtNTEyLDYgKzUxOSw0OCBAQCB2b2lkIG1seDVfdmRwYV9kZXN0cm95X21yKHN0
cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldikKPiAgIAltdXRleF91bmxvY2soJm1yLT5ta2V5X210
eCk7Cj4gICB9Cj4gICAKPiArc3RhdGljIGludCBfbWx4NV92ZHBhX2NyZWF0ZV9tcihzdHJ1Y3Qg
bWx4NV92ZHBhX2RldiAqbXZkZXYsIHN0cnVjdCB2aG9zdF9pb3RsYiAqaW90bGIpCj4gK3sKPiAr
CXN0cnVjdCBtbHg1X3ZkcGFfbXIgKm1yID0gJm12ZGV2LT5tcjsKPiArCWludCBlcnI7Cj4gKwo+
ICsJaWYgKG1yLT5pbml0aWFsaXplZCkKPiArCQlyZXR1cm4gMDsKPiArCj4gKwlpZiAoaW90bGIp
Cj4gKwkJZXJyID0gY3JlYXRlX3VzZXJfbXIobXZkZXYsIGlvdGxiKTsKPiArCWVsc2UKPiArCQll
cnIgPSBjcmVhdGVfZG1hX21yKG12ZGV2LCBtcik7Cj4gKwo+ICsJaWYgKGVycikKPiArCQlyZXR1
cm4gZXJyOwo+ICsKPiArCWVyciA9IGR1cF9pb3RsYihtdmRldiwgaW90bGIpOwo+ICsJaWYgKGVy
cikKPiArCQlnb3RvIG91dF9lcnI7Cj4gKwo+ICsJbXItPmluaXRpYWxpemVkID0gdHJ1ZTsKPiAr
CXJldHVybiAwOwo+ICsKPiArb3V0X2VycjoKPiArCWlmIChpb3RsYikKPiArCQlkZXN0cm95X3Vz
ZXJfbXIobXZkZXYsIG1yKTsKPiArCWVsc2UKPiArCQlkZXN0cm95X2RtYV9tcihtdmRldiwgbXIp
Owo+ICsKPiArCXJldHVybiBlcnI7Cj4gK30KPiArCj4gK2ludCBtbHg1X3ZkcGFfY3JlYXRlX21y
KHN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldiwgc3RydWN0IHZob3N0X2lvdGxiICppb3RsYikK
PiArewo+ICsJaW50IGVycjsKPiArCj4gKwltdXRleF9sb2NrKCZtdmRldi0+bXIubWtleV9tdHgp
Owo+ICsJZXJyID0gX21seDVfdmRwYV9jcmVhdGVfbXIobXZkZXYsIGlvdGxiKTsKPiArCW11dGV4
X3VubG9jaygmbXZkZXYtPm1yLm1rZXlfbXR4KTsKPiArCXJldHVybiBlcnI7Cj4gK30KPiArCj4g
ICBzdGF0aWMgYm9vbCBtYXBfZW1wdHkoc3RydWN0IHZob3N0X2lvdGxiICppb3RsYikKPiAgIHsK
PiAgIAlyZXR1cm4gIXZob3N0X2lvdGxiX2l0cmVlX2ZpcnN0KGlvdGxiLCAwLCBVNjRfTUFYKTsK
PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92ZHBhL21seDUvY29yZS9yZXNvdXJjZXMuYyBiL2RyaXZl
cnMvdmRwYS9tbHg1L2NvcmUvcmVzb3VyY2VzLmMKPiBpbmRleCBkNDYwNjIxM2Y4OGEuLmQyNGFl
MWE4NTE1OSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZkcGEvbWx4NS9jb3JlL3Jlc291cmNlcy5j
Cj4gKysrIGIvZHJpdmVycy92ZHBhL21seDUvY29yZS9yZXNvdXJjZXMuYwo+IEBAIC0xLDYgKzEs
NyBAQAo+ICAgLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAgT1IgTGludXgtT3Bl
bklCCj4gICAvKiBDb3B5cmlnaHQgKGMpIDIwMjAgTWVsbGFub3ggVGVjaG5vbG9naWVzIEx0ZC4g
Ki8KPiAgIAo+ICsjaW5jbHVkZSA8bGludXgvaW92YS5oPgo+ICAgI2luY2x1ZGUgPGxpbnV4L21s
eDUvZHJpdmVyLmg+Cj4gICAjaW5jbHVkZSAibWx4NV92ZHBhLmgiCj4gICAKPiBAQCAtMjIxLDYg
KzIyMiwyOCBAQCBpbnQgbWx4NV92ZHBhX2Rlc3Ryb3lfbWtleShzdHJ1Y3QgbWx4NV92ZHBhX2Rl
diAqbXZkZXYsIHN0cnVjdCBtbHg1X2NvcmVfbWtleSAqbQo+ICAgCXJldHVybiBtbHg1X2NtZF9l
eGVjX2luKG12ZGV2LT5tZGV2LCBkZXN0cm95X21rZXksIGluKTsKPiAgIH0KPiAgIAo+ICtzdGF0
aWMgaW50IGluaXRfY3RybF92cShzdHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYpCj4gK3sKPiAr
CWludCBlcnI7Cj4gKwo+ICsJbXZkZXYtPmN2cS5pb3RsYiA9IHZob3N0X2lvdGxiX2FsbG9jKDAs
IDApOwo+ICsJaWYgKCFtdmRldi0+Y3ZxLmlvdGxiKQo+ICsJCXJldHVybiAtRU5PTUVNOwo+ICsK
PiArCXZyaW5naF9zZXRfaW90bGIoJm12ZGV2LT5jdnEudnJpbmcsIG12ZGV2LT5jdnEuaW90bGIs
ICZtdmRldi0+Y3ZxLmlvbW11X2xvY2spOwo+ICsJZXJyID0gaW92YV9jYWNoZV9nZXQoKTsKPiAr
CWlmIChlcnIpCj4gKwkJdmhvc3RfaW90bGJfZnJlZShtdmRldi0+Y3ZxLmlvdGxiKTsKPiArCj4g
KwlyZXR1cm4gZXJyOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBjbGVhbnVwX2N0cmxfdnEoc3Ry
dWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2KQo+ICt7Cj4gKwlpb3ZhX2NhY2hlX3B1dCgpOwo+ICsJ
dmhvc3RfaW90bGJfZnJlZShtdmRldi0+Y3ZxLmlvdGxiKTsKPiArfQo+ICsKPiAgIGludCBtbHg1
X3ZkcGFfYWxsb2NfcmVzb3VyY2VzKHN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldikKPiAgIHsK
PiAgIAl1NjQgb2Zmc2V0ID0gTUxYNV9DQVA2NF9ERVZfVkRQQV9FTVVMQVRJT04obXZkZXYtPm1k
ZXYsIGRvb3JiZWxsX2Jhcl9vZmZzZXQpOwo+IEBAIC0yNjAsMTAgKzI4MywxNyBAQCBpbnQgbWx4
NV92ZHBhX2FsbG9jX3Jlc291cmNlcyhzdHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYpCj4gICAJ
CWVyciA9IC1FTk9NRU07Cj4gICAJCWdvdG8gZXJyX2tleTsKPiAgIAl9Cj4gKwo+ICsJZXJyID0g
aW5pdF9jdHJsX3ZxKG12ZGV2KTsKPiArCWlmIChlcnIpCj4gKwkJZ290byBlcnJfY3RybDsKPiAr
Cj4gICAJcmVzLT52YWxpZCA9IHRydWU7Cj4gICAKPiAgIAlyZXR1cm4gMDsKPiAgIAo+ICtlcnJf
Y3RybDoKPiArCWlvdW5tYXAocmVzLT5raWNrX2FkZHIpOwo+ICAgZXJyX2tleToKPiAgIAlkZWFs
bG9jX3BkKG12ZGV2LCByZXMtPnBkbiwgcmVzLT51aWQpOwo+ICAgZXJyX3BkOgo+IEBAIC0yODIs
NiArMzEyLDcgQEAgdm9pZCBtbHg1X3ZkcGFfZnJlZV9yZXNvdXJjZXMoc3RydWN0IG1seDVfdmRw
YV9kZXYgKm12ZGV2KQo+ICAgCWlmICghcmVzLT52YWxpZCkKPiAgIAkJcmV0dXJuOwo+ICAgCj4g
KwljbGVhbnVwX2N0cmxfdnEobXZkZXYpOwo+ICAgCWlvdW5tYXAocmVzLT5raWNrX2FkZHIpOwo+
ICAgCXJlcy0+a2lja19hZGRyID0gTlVMTDsKPiAgIAlkZWFsbG9jX3BkKG12ZGV2LCByZXMtPnBk
biwgcmVzLT51aWQpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEvbWx4NS9uZXQvbWx4NV92
bmV0LmMgYi9kcml2ZXJzL3ZkcGEvbWx4NS9uZXQvbWx4NV92bmV0LmMKPiBpbmRleCAyYTMxNDY3
ZjdhYzUuLjQ2NDQ4YjA3OWFjYSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZkcGEvbWx4NS9uZXQv
bWx4NV92bmV0LmMKPiArKysgYi9kcml2ZXJzL3ZkcGEvbWx4NS9uZXQvbWx4NV92bmV0LmMKPiBA
QCAtMTMzLDcgKzEzMyw3IEBAIHN0cnVjdCBtbHg1X3ZkcGFfdmlydHF1ZXVlIHsKPiAgIC8qIFdl
IHdpbGwgcmVtb3ZlIHRoaXMgbGltaXRhdGlvbiBvbmNlIG1seDVfdmRwYV9hbGxvY19yZXNvdXJj
ZXMoKQo+ICAgICogcHJvdmlkZXMgZm9yIGRyaXZlciBzcGFjZSBhbGxvY2F0aW9uCj4gICAgKi8K
PiAtI2RlZmluZSBNTFg1X01BWF9TVVBQT1JURURfVlFTIDE2Cj4gKyNkZWZpbmUgTUxYNV9NQVhf
U1VQUE9SVEVEX1ZRUyAyCj4gICAKPiAgIHN0cnVjdCBtbHg1X3ZkcGFfbmV0IHsKPiAgIAlzdHJ1
Y3QgbWx4NV92ZHBhX2RldiBtdmRldjsKPiBAQCAtMTUxLDE1ICsxNTEsMTggQEAgc3RydWN0IG1s
eDVfdmRwYV9uZXQgewo+ICAgCXN0cnVjdCBtbHg1X2Zsb3dfaGFuZGxlICpyeF9ydWxlOwo+ICAg
CWJvb2wgc2V0dXA7Cj4gICAJdTE2IG10dTsKPiArCXUzMiBjdXJfbnVtX3ZxczsKPiAgIH07Cj4g
ICAKPiAgIHN0YXRpYyB2b2lkIGZyZWVfcmVzb3VyY2VzKHN0cnVjdCBtbHg1X3ZkcGFfbmV0ICpu
ZGV2KTsKPiAgIHN0YXRpYyB2b2lkIGluaXRfbXZxcyhzdHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRl
dik7Cj4gLXN0YXRpYyBpbnQgc2V0dXBfZHJpdmVyKHN0cnVjdCBtbHg1X3ZkcGFfbmV0ICpuZGV2
KTsKPiArc3RhdGljIGludCBzZXR1cF9kcml2ZXIoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2
KTsKPiAgIHN0YXRpYyB2b2lkIHRlYXJkb3duX2RyaXZlcihzdHJ1Y3QgbWx4NV92ZHBhX25ldCAq
bmRldik7Cj4gICAKPiAgIHN0YXRpYyBib29sIG1seDVfdmRwYV9kZWJ1ZzsKPiAgIAo+ICsjZGVm
aW5lIE1MWDVfQ1ZRX01BWF9FTlQgMTYKPiArCj4gICAjZGVmaW5lIE1MWDVfTE9HX1ZJT19GTEFH
KF9mZWF0dXJlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBcCj4gICAJZG8geyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFwKPiAgIAkJaWYgKGZlYXR1cmVzICYgQklUX1VMTChfZmVhdHVyZSkpICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCj4gQEAgLTE3MiwxMSArMTc1LDMz
IEBAIHN0YXRpYyBib29sIG1seDVfdmRwYV9kZWJ1ZzsKPiAgIAkJCW1seDVfdmRwYV9pbmZvKG12
ZGV2LCAiJXNcbiIsICNfc3RhdHVzKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFwKPiAgIAl9IHdoaWxlICgwKQo+ICAgCj4gKy8qIFRPRE86IGNyb3NzLWVuZGlhbiBzdXBwb3J0
ICovCj4gK3N0YXRpYyBpbmxpbmUgYm9vbCBtbHg1X3ZkcGFfaXNfbGl0dGxlX2VuZGlhbihzdHJ1
Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYpCj4gK3sKPiArCXJldHVybiB2aXJ0aW9fbGVnYWN5X2lz
X2xpdHRsZV9lbmRpYW4oKSB8fAo+ICsJCShtdmRldi0+YWN0dWFsX2ZlYXR1cmVzICYgQklUX1VM
TChWSVJUSU9fRl9WRVJTSU9OXzEpKTsKPiArfQo+ICsKPiArc3RhdGljIF9fdmlydGlvMTYgY3B1
X3RvX21seDV2ZHBhMTYoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2LCB1MTYgdmFsKQo+ICt7
Cj4gKwlyZXR1cm4gX19jcHVfdG9fdmlydGlvMTYobWx4NV92ZHBhX2lzX2xpdHRsZV9lbmRpYW4o
bXZkZXYpLCB2YWwpOwo+ICt9Cj4gKwo+ICAgc3RhdGljIGlubGluZSB1MzIgbWx4NV92ZHBhX21h
eF9xcHMoaW50IG1heF92cXMpCj4gICB7Cj4gICAJcmV0dXJuIG1heF92cXMgLyAyOwo+ICAgfQo+
ICAgCj4gK3N0YXRpYyB1MTYgY3RybF92cV9pZHgoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2
KQo+ICt7Cj4gKwlyZXR1cm4gMiAqIG1seDVfdmRwYV9tYXhfcXBzKG12ZGV2LT5tYXhfdnFzKTsK
PiArfQo+ICsKPiArc3RhdGljIGJvb2wgaXNfY3RybF92cV9pZHgoc3RydWN0IG1seDVfdmRwYV9k
ZXYgKm12ZGV2LCB1MTYgaWR4KQo+ICt7Cj4gKwlyZXR1cm4gaWR4ID09IGN0cmxfdnFfaWR4KG12
ZGV2KTsKPiArfQo+ICsKPiAgIHN0YXRpYyB2b2lkIHByaW50X3N0YXR1cyhzdHJ1Y3QgbWx4NV92
ZHBhX2RldiAqbXZkZXYsIHU4IHN0YXR1cywgYm9vbCBzZXQpCj4gICB7Cj4gICAJaWYgKHN0YXR1
cyAmIH5WQUxJRF9TVEFUVVNfTUFTSykKPiBAQCAtMTM0NiwxMiArMTM3MSwxMzkgQEAgc3RhdGlj
IHZvaWQgcmVtb3ZlX2Z3ZF90b190aXIoc3RydWN0IG1seDVfdmRwYV9uZXQgKm5kZXYpCj4gICAJ
bmRldi0+cnhfcnVsZSA9IE5VTEw7Cj4gICB9Cj4gICAKPiArc3RhdGljIGludCB1cGRhdGVfZndk
X3RvX3RpcihzdHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRldikKPiArewo+ICsJcmVtb3ZlX2Z3ZF90
b190aXIobmRldik7Cj4gKwlyZXR1cm4gYWRkX2Z3ZF90b190aXIobmRldik7Cj4gK30KPiArCj4g
K3ZpcnRpb19uZXRfY3RybF9hY2sgaGFuZGxlX2N0cmxfbWFjKHN0cnVjdCBtbHg1X3ZkcGFfZGV2
ICptdmRldiwgdTggY21kKQo+ICt7Cj4gKwlzdHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRldiA9IHRv
X21seDVfdmRwYV9uZGV2KG12ZGV2KTsKPiArCXN0cnVjdCBtbHg1X2NvbnRyb2xfdnEgKmN2cSA9
ICZtdmRldi0+Y3ZxOwo+ICsJdmlydGlvX25ldF9jdHJsX2FjayBzdGF0dXMgPSBWSVJUSU9fTkVU
X0VSUjsKPiArCXN0cnVjdCBtbHg1X2NvcmVfZGV2ICpwZm1kZXY7Cj4gKwlzaXplX3QgcmVhZDsK
PiArCXU4IG1hY1s2XTsKPiArCj4gKwlwZm1kZXYgPSBwY2lfZ2V0X2RydmRhdGEocGNpX3BoeXNm
bihtdmRldi0+bWRldi0+cGRldikpOwo+ICsJc3dpdGNoIChjbWQpIHsKPiArCWNhc2UgVklSVElP
X05FVF9DVFJMX01BQ19BRERSX1NFVDoKPiArCQlyZWFkID0gdnJpbmdoX2lvdl9wdWxsX2lvdGxi
KCZjdnEtPnZyaW5nLCAmY3ZxLT5yaW92LCAodm9pZCAqKW1hYywgRVRIX0FMRU4pOwo+ICsJCWlm
IChyZWFkICE9IEVUSF9BTEVOKQo+ICsJCQlicmVhazsKPiArCj4gKwkJaWYgKCFtZW1jbXAobmRl
di0+Y29uZmlnLm1hYywgbWFjLCA2KSkgewo+ICsJCQlzdGF0dXMgPSBWSVJUSU9fTkVUX09LOwo+
ICsJCQlicmVhazsKPiArCQl9Cj4gKwo+ICsJCWlmICghaXNfemVyb19ldGhlcl9hZGRyKG5kZXYt
PmNvbmZpZy5tYWMpKSB7Cj4gKwkJCWlmIChtbHg1X21wZnNfZGVsX21hYyhwZm1kZXYsIG5kZXYt
PmNvbmZpZy5tYWMpKSB7Cj4gKwkJCQltbHg1X3ZkcGFfd2FybihtdmRldiwgImZhaWxlZCB0byBk
ZWxldGUgb2xkIE1BQyAlcE0gZnJvbSBNUEZTIHRhYmxlXG4iLAo+ICsJCQkJCSAgICAgICBuZGV2
LT5jb25maWcubWFjKTsKPiArCQkJCWJyZWFrOwo+ICsJCQl9Cj4gKwkJfQo+ICsKPiArCQlpZiAo
bWx4NV9tcGZzX2FkZF9tYWMocGZtZGV2LCBtYWMpKSB7Cj4gKwkJCW1seDVfdmRwYV93YXJuKG12
ZGV2LCAiZmFpbGVkIHRvIGluc2VydCBuZXcgTUFDICVwTSBpbnRvIE1QRlMgdGFibGVcbiIsCj4g
KwkJCQkgICAgICAgbWFjKTsKPiArCQkJYnJlYWs7Cj4gKwkJfQo+ICsKPiArCQltZW1jcHkobmRl
di0+Y29uZmlnLm1hYywgbWFjLCA2KTsKCgpMZXQncyB1c2UgRVRIX0FMRU4uCgoKPiArCQlpZiAo
IXVwZGF0ZV9md2RfdG9fdGlyKG5kZXYpKQo+ICsJCQlzdGF0dXMgPSBWSVJUSU9fTkVUX09LOwoK
CkkgdGhpbmsgaXQncyBiZXR0ZXIgdG8gdG8gdXBkYXRlIGNvbmZpZyBhZnRlciB0aGUgc3VjY2Vl
ZCBvZiAKdXBkYXRlX2Z3ZF90b190aXIoKS4KCgo+ICsJCWJyZWFrOwo+ICsKPiArCWRlZmF1bHQ6
Cj4gKwkJYnJlYWs7Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIHN0YXR1czsKPiArfQo+ICsKPiArc3Rh
dGljIHZvaWQgbWx4NV9jdnFfa2lja19oYW5kbGVyKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29yaykK
PiArewo+ICsJdmlydGlvX25ldF9jdHJsX2FjayBzdGF0dXMgPSBWSVJUSU9fTkVUX0VSUjsKPiAr
CXN0cnVjdCB2aXJ0aW9fbmV0X2N0cmxfaGRyIGN0cmw7Cj4gKwlzdHJ1Y3QgbWx4NV9jdHJsX3dx
X2VudCAqd3FlbnQ7Cj4gKwlzdHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXY7Cj4gKwlzdHJ1Y3Qg
bWx4NV9jb250cm9sX3ZxICpjdnE7Cj4gKwlzdHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRldjsKPiAr
CXNpemVfdCByZWFkLCB3cml0ZTsKPiArCWludCBlcnI7Cj4gKwo+ICsJd3FlbnQgPSBjb250YWlu
ZXJfb2Yod29yaywgc3RydWN0IG1seDVfY3RybF93cV9lbnQsIHdvcmspOwo+ICsJbXZkZXYgPSB3
cWVudC0+bXZkZXY7Cj4gKwluZGV2ID0gdG9fbWx4NV92ZHBhX25kZXYobXZkZXYpOwo+ICsJY3Zx
ID0gJm12ZGV2LT5jdnE7Cj4gKwlpZiAoIShuZGV2LT5tdmRldi5hY3R1YWxfZmVhdHVyZXMgJiBC
SVRfVUxMKFZJUlRJT19ORVRfRl9DVFJMX1ZRKSkpCj4gKwkJZ290byBvdXQ7Cj4gKwo+ICsJaWYg
KCFjdnEtPnJlYWR5KQo+ICsJCWdvdG8gb3V0Owo+ICsKPiArCXdoaWxlICh0cnVlKSB7Cj4gKwkJ
ZXJyID0gdnJpbmdoX2dldGRlc2NfaW90bGIoJmN2cS0+dnJpbmcsICZjdnEtPnJpb3YsICZjdnEt
Pndpb3YsICZjdnEtPmhlYWQsCj4gKwkJCQkJICAgR0ZQX0FUT01JQyk7Cj4gKwkJaWYgKGVyciA8
PSAwKQo+ICsJCQlicmVhazsKPiArCj4gKwkJcmVhZCA9IHZyaW5naF9pb3ZfcHVsbF9pb3RsYigm
Y3ZxLT52cmluZywgJmN2cS0+cmlvdiwgJmN0cmwsIHNpemVvZihjdHJsKSk7Cj4gKwkJaWYgKHJl
YWQgIT0gc2l6ZW9mKGN0cmwpKQo+ICsJCQlicmVhazsKPiArCj4gKwkJc3dpdGNoIChjdHJsLmNs
YXNzKSB7Cj4gKwkJY2FzZSBWSVJUSU9fTkVUX0NUUkxfTUFDOgo+ICsJCQlzdGF0dXMgPSBoYW5k
bGVfY3RybF9tYWMobXZkZXYsIGN0cmwuY21kKTsKPiArCQkJYnJlYWs7Cj4gKwo+ICsJCWRlZmF1
bHQ6Cj4gKwkJCWJyZWFrOwo+ICsJCX0KPiArCj4gKwkJLyogTWFrZSBzdXJlIGRhdGEgaXMgd3Jp
dHRlbiBiZWZvcmUgYWR2YW5jaW5nIGluZGV4ICovCj4gKwkJc21wX3dtYigpOwo+ICsKPiArCQl3
cml0ZSA9IHZyaW5naF9pb3ZfcHVzaF9pb3RsYigmY3ZxLT52cmluZywgJmN2cS0+d2lvdiwgJnN0
YXR1cywgc2l6ZW9mKHN0YXR1cykpOwo+ICsJCXZyaW5naF9jb21wbGV0ZV9pb3RsYigmY3ZxLT52
cmluZywgY3ZxLT5oZWFkLCB3cml0ZSk7Cj4gKwkJdnJpbmdoX2tpb3ZfY2xlYW51cCgmY3ZxLT5y
aW92KTsKPiArCQl2cmluZ2hfa2lvdl9jbGVhbnVwKCZjdnEtPndpb3YpOwo+ICsKPiArCQkvKiBN
YWtlIHN1cmUgdXNlZCBpcyB2aXNpYmxlIGJlZm9yZSByYXNpbmcgdGhlIGludGVycnVwdC4gKi8K
PiArCQlzbXBfd21iKCk7Cj4gKwo+ICsJCWxvY2FsX2JoX2Rpc2FibGUoKTsKPiArCQlpZiAoY3Zx
LT5ldmVudF9jYi5jYWxsYmFjaykKPiArCQkJY3ZxLT5ldmVudF9jYi5jYWxsYmFjayhjdnEtPmV2
ZW50X2NiLnByaXZhdGUpOwoKCkxldCdzIHVzZSB0aGUgdnJpbmdoIGhlbHBlciBpbnN0ZWFkIChp
dCBjYW4gZGVhbCB3aXRoIGUuZyBldmVudCBpbmRleCAKc3R1ZmZzKToKCmlmICh2cmluZ2hfbmVl
ZF9ub3RpZnlfaW90bGIoY3ZxKSkKIMKgwqDCoCB2cmluZ2hfbm90aWZ5KGN2cSk7CgoKPiArCj4g
KwkJbG9jYWxfYmhfZW5hYmxlKCk7Cj4gKwl9Cj4gK291dDoKPiArCWtmcmVlKHdxZW50KTsKPiAr
fQo+ICsKPiAgIHN0YXRpYyB2b2lkIG1seDVfdmRwYV9raWNrX3ZxKHN0cnVjdCB2ZHBhX2Rldmlj
ZSAqdmRldiwgdTE2IGlkeCkKPiAgIHsKPiAgIAlzdHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYg
PSB0b19tdmRldih2ZGV2KTsKPiAgIAlzdHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRldiA9IHRvX21s
eDVfdmRwYV9uZGV2KG12ZGV2KTsKPiAtCXN0cnVjdCBtbHg1X3ZkcGFfdmlydHF1ZXVlICptdnEg
PSAmbmRldi0+dnFzW2lkeF07Cj4gKwlzdHJ1Y3QgbWx4NV92ZHBhX3ZpcnRxdWV1ZSAqbXZxOwo+
ICsJc3RydWN0IG1seDVfY3RybF93cV9lbnQgKndxZW50Owo+ICsKPiArCWlmICh1bmxpa2VseShp
c19jdHJsX3ZxX2lkeChtdmRldiwgaWR4KSkpIHsKPiArCQl3cWVudCA9IGt6YWxsb2Moc2l6ZW9m
KCp3cWVudCksIEdGUF9BVE9NSUMpOwo+ICsJCWlmICghd3FlbnQpCj4gKwkJCXJldHVybjsKPiAr
Cj4gKwkJd3FlbnQtPm12ZGV2ID0gbXZkZXY7Cj4gKwkJSU5JVF9XT1JLKCZ3cWVudC0+d29yaywg
bWx4NV9jdnFfa2lja19oYW5kbGVyKTsKPiArCQlxdWV1ZV93b3JrKG12ZGV2LT53cSwgJndxZW50
LT53b3JrKTsKPiArCQlyZXR1cm47Cj4gKwl9Cj4gICAKPiArCW12cSA9ICZuZGV2LT52cXNbaWR4
XTsKPiAgIAlpZiAodW5saWtlbHkoIW12cS0+cmVhZHkpKQo+ICAgCQlyZXR1cm47Cj4gICAKPiBA
QCAtMTM2Myw4ICsxNTE1LDE2IEBAIHN0YXRpYyBpbnQgbWx4NV92ZHBhX3NldF92cV9hZGRyZXNz
KHN0cnVjdCB2ZHBhX2RldmljZSAqdmRldiwgdTE2IGlkeCwgdTY0IGRlc2NfCj4gICB7Cj4gICAJ
c3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2ID0gdG9fbXZkZXYodmRldik7Cj4gICAJc3RydWN0
IG1seDVfdmRwYV9uZXQgKm5kZXYgPSB0b19tbHg1X3ZkcGFfbmRldihtdmRldik7Cj4gLQlzdHJ1
Y3QgbWx4NV92ZHBhX3ZpcnRxdWV1ZSAqbXZxID0gJm5kZXYtPnZxc1tpZHhdOwo+ICsJc3RydWN0
IG1seDVfdmRwYV92aXJ0cXVldWUgKm12cTsKPiAgIAo+ICsJaWYgKGlzX2N0cmxfdnFfaWR4KG12
ZGV2LCBpZHgpKSB7Cj4gKwkJbXZkZXYtPmN2cS5kZXNjX2FkZHIgPSBkZXNjX2FyZWE7Cj4gKwkJ
bXZkZXYtPmN2cS5kZXZpY2VfYWRkciA9IGRldmljZV9hcmVhOwo+ICsJCW12ZGV2LT5jdnEuZHJp
dmVyX2FkZHIgPSBkcml2ZXJfYXJlYTsKPiArCQlyZXR1cm4gMDsKPiArCX0KPiArCj4gKwltdnEg
PSAmbmRldi0+dnFzW2lkeF07Cj4gICAJbXZxLT5kZXNjX2FkZHIgPSBkZXNjX2FyZWE7Cj4gICAJ
bXZxLT5kZXZpY2VfYWRkciA9IGRldmljZV9hcmVhOwo+ICAgCW12cS0+ZHJpdmVyX2FkZHIgPSBk
cml2ZXJfYXJlYTsKPiBAQCAtMTM3Nyw2ICsxNTM3LDkgQEAgc3RhdGljIHZvaWQgbWx4NV92ZHBh
X3NldF92cV9udW0oc3RydWN0IHZkcGFfZGV2aWNlICp2ZGV2LCB1MTYgaWR4LCB1MzIgbnVtKQo+
ICAgCXN0cnVjdCBtbHg1X3ZkcGFfbmV0ICpuZGV2ID0gdG9fbWx4NV92ZHBhX25kZXYobXZkZXYp
Owo+ICAgCXN0cnVjdCBtbHg1X3ZkcGFfdmlydHF1ZXVlICptdnE7Cj4gICAKPiArCWlmIChpc19j
dHJsX3ZxX2lkeChtdmRldiwgaWR4KSkKPiArCQlyZXR1cm47Cj4gKwo+ICAgCW12cSA9ICZuZGV2
LT52cXNbaWR4XTsKPiAgIAltdnEtPm51bV9lbnQgPSBudW07Cj4gICB9Cj4gQEAgLTEzODUsMTcg
KzE1NDgsNTAgQEAgc3RhdGljIHZvaWQgbWx4NV92ZHBhX3NldF92cV9jYihzdHJ1Y3QgdmRwYV9k
ZXZpY2UgKnZkZXYsIHUxNiBpZHgsIHN0cnVjdCB2ZHBhX2MKPiAgIHsKPiAgIAlzdHJ1Y3QgbWx4
NV92ZHBhX2RldiAqbXZkZXYgPSB0b19tdmRldih2ZGV2KTsKPiAgIAlzdHJ1Y3QgbWx4NV92ZHBh
X25ldCAqbmRldiA9IHRvX21seDVfdmRwYV9uZGV2KG12ZGV2KTsKPiAtCXN0cnVjdCBtbHg1X3Zk
cGFfdmlydHF1ZXVlICp2cSA9ICZuZGV2LT52cXNbaWR4XTsKPiAgIAo+IC0JdnEtPmV2ZW50X2Ni
ID0gKmNiOwo+ICsJaWYgKGlzX2N0cmxfdnFfaWR4KG12ZGV2LCBpZHgpKSB7Cj4gKwkJbXZkZXYt
PmN2cS5ldmVudF9jYiA9ICpjYjsKPiArCQlyZXR1cm47Cj4gKwl9Cj4gKwo+ICsJbmRldi0+dnFz
W2lkeF0uZXZlbnRfY2IgPSAqY2I7CgoKSSB3b25kZXIgd2hldGhlciB3ZSBjYW4gc2ltcGx5IHRy
ZWF0IGN2cSBhcyBhIG5vcm1hbCB2cSBoZXJlIGFuZCBqdXN0IAp1c2UgdGhlIG5kZXYtPnZxc1tp
ZHhdLmV2ZW50X2NiLgoKCj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIG1seDVfY3ZxX25vdGlmeShz
dHJ1Y3QgdnJpbmdoICp2cmluZykKPiArewo+ICsJc3RydWN0IG1seDVfY29udHJvbF92cSAqY3Zx
ID0gY29udGFpbmVyX29mKHZyaW5nLCBzdHJ1Y3QgbWx4NV9jb250cm9sX3ZxLCB2cmluZyk7Cj4g
Kwo+ICsJaWYgKCFjdnEtPmV2ZW50X2NiLmNhbGxiYWNrKQo+ICsJCXJldHVybjsKPiArCj4gKwlj
dnEtPmV2ZW50X2NiLmNhbGxiYWNrKGN2cS0+ZXZlbnRfY2IucHJpdmF0ZSk7Cj4gK30KPiArCj4g
K3N0YXRpYyB2b2lkIHNldF9jdnFfcmVhZHkoc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2LCBi
b29sIHJlYWR5KQo+ICt7Cj4gKwlzdHJ1Y3QgbWx4NV9jb250cm9sX3ZxICpjdnEgPSAmbXZkZXYt
PmN2cTsKPiArCj4gKwlXQVJOX09OKGN2cS0+cmVhZHkgJiYgcmVhZHkpOwo+ICsJV0FSTl9PTigh
Y3ZxLT5yZWFkeSAmJiAhcmVhZHkpOwoKCkl0IGxvb2tzIHRvIG1lIHRoaXMgaXMgdXNlcnNwYWNl
IHRyaWdnZXItYWJsZS4gRS5nIGEgYnVnZ3kgdXNlcnNwYWNlIApkcml2ZXIgY2FuIGNhdXNlIHRo
aXMuIFRoZW4gaXQncyBiZXR0ZXIgdG8gbm90IHdhcm4gaGVyZS4KCgo+ICsJY3ZxLT5yZWFkeSA9
IHJlYWR5Owo+ICsJaWYgKCFyZWFkeSkKPiArCQlyZXR1cm47Cj4gKwo+ICsJY3ZxLT52cmluZy5u
b3RpZnkgPSBtbHg1X2N2cV9ub3RpZnk7Cj4gICB9Cj4gICAKPiAgIHN0YXRpYyB2b2lkIG1seDVf
dmRwYV9zZXRfdnFfcmVhZHkoc3RydWN0IHZkcGFfZGV2aWNlICp2ZGV2LCB1MTYgaWR4LCBib29s
IHJlYWR5KQo+ICAgewo+ICAgCXN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldiA9IHRvX212ZGV2
KHZkZXYpOwo+ICAgCXN0cnVjdCBtbHg1X3ZkcGFfbmV0ICpuZGV2ID0gdG9fbWx4NV92ZHBhX25k
ZXYobXZkZXYpOwo+IC0Jc3RydWN0IG1seDVfdmRwYV92aXJ0cXVldWUgKm12cSA9ICZuZGV2LT52
cXNbaWR4XTsKPiArCXN0cnVjdCBtbHg1X3ZkcGFfdmlydHF1ZXVlICptdnE7Cj4gICAKPiArCWlm
IChpc19jdHJsX3ZxX2lkeChtdmRldiwgaWR4KSkgewo+ICsJCXNldF9jdnFfcmVhZHkobXZkZXYs
IHJlYWR5KTsKPiArCQlyZXR1cm47Cj4gKwl9Cj4gKwo+ICsJbXZxID0gJm5kZXYtPnZxc1tpZHhd
Owo+ICAgCWlmICghcmVhZHkpCj4gICAJCXN1c3BlbmRfdnEobmRldiwgbXZxKTsKPiAgIAo+IEBA
IC0xNDA2LDkgKzE2MDIsMTEgQEAgc3RhdGljIGJvb2wgbWx4NV92ZHBhX2dldF92cV9yZWFkeShz
dHJ1Y3QgdmRwYV9kZXZpY2UgKnZkZXYsIHUxNiBpZHgpCj4gICB7Cj4gICAJc3RydWN0IG1seDVf
dmRwYV9kZXYgKm12ZGV2ID0gdG9fbXZkZXYodmRldik7Cj4gICAJc3RydWN0IG1seDVfdmRwYV9u
ZXQgKm5kZXYgPSB0b19tbHg1X3ZkcGFfbmRldihtdmRldik7Cj4gLQlzdHJ1Y3QgbWx4NV92ZHBh
X3ZpcnRxdWV1ZSAqbXZxID0gJm5kZXYtPnZxc1tpZHhdOwo+ICAgCj4gLQlyZXR1cm4gbXZxLT5y
ZWFkeTsKPiArCWlmIChpc19jdHJsX3ZxX2lkeChtdmRldiwgaWR4KSkKPiArCQlyZXR1cm4gbXZk
ZXYtPmN2cS5yZWFkeTsKPiArCj4gKwlyZXR1cm4gbmRldi0+dnFzW2lkeF0ucmVhZHk7Cj4gICB9
Cj4gICAKPiAgIHN0YXRpYyBpbnQgbWx4NV92ZHBhX3NldF92cV9zdGF0ZShzdHJ1Y3QgdmRwYV9k
ZXZpY2UgKnZkZXYsIHUxNiBpZHgsCj4gQEAgLTE0MTYsOCArMTYxNCwxNCBAQCBzdGF0aWMgaW50
IG1seDVfdmRwYV9zZXRfdnFfc3RhdGUoc3RydWN0IHZkcGFfZGV2aWNlICp2ZGV2LCB1MTYgaWR4
LAo+ICAgewo+ICAgCXN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRldiA9IHRvX212ZGV2KHZkZXYp
Owo+ICAgCXN0cnVjdCBtbHg1X3ZkcGFfbmV0ICpuZGV2ID0gdG9fbWx4NV92ZHBhX25kZXYobXZk
ZXYpOwo+IC0Jc3RydWN0IG1seDVfdmRwYV92aXJ0cXVldWUgKm12cSA9ICZuZGV2LT52cXNbaWR4
XTsKPiArCXN0cnVjdCBtbHg1X3ZkcGFfdmlydHF1ZXVlICptdnE7Cj4gKwo+ICsJaWYgKGlzX2N0
cmxfdnFfaWR4KG12ZGV2LCBpZHgpKSB7Cj4gKwkJbXZkZXYtPmN2cS52cmluZy5sYXN0X2F2YWls
X2lkeCA9IHN0YXRlLT5zcGxpdC5hdmFpbF9pbmRleDsKCgpJbnRlcmVzdGluZywgY29uc2lkZXIg
dnJpbmdoIGNhbiBvbmx5IHN1cHBvcnQgc3BsaXQgcmluZy4gSSB3b25kZXIgd2UgCm5lZWQgdG8g
ZmFpbCB0aGUgZmVhdHVyZSBuZWdvdGlhdGlvbiB3aGVuIGJvdGggY3ZxIGFuZCBwYWNrZWQgaXMg
bmVnb3RpYXRlZC4KCgo+ICsJCXJldHVybiAwOwo+ICsJfQo+ICAgCj4gKwltdnEgPSAmbmRldi0+
dnFzW2lkeF07Cj4gICAJaWYgKG12cS0+Zndfc3RhdGUgPT0gTUxYNV9WSVJUSU9fTkVUX1FfT0JK
RUNUX1NUQVRFX1JEWSkgewo+ICAgCQltbHg1X3ZkcGFfd2FybihtdmRldiwgImNhbid0IG1vZGlm
eSBhdmFpbGFibGUgaW5kZXhcbiIpOwo+ICAgCQlyZXR1cm4gLUVJTlZBTDsKPiBAQCAtMTQzMiwx
MCArMTYzNiwxNiBAQCBzdGF0aWMgaW50IG1seDVfdmRwYV9nZXRfdnFfc3RhdGUoc3RydWN0IHZk
cGFfZGV2aWNlICp2ZGV2LCB1MTYgaWR4LCBzdHJ1Y3QgdmRwYQo+ICAgewo+ICAgCXN0cnVjdCBt
bHg1X3ZkcGFfZGV2ICptdmRldiA9IHRvX212ZGV2KHZkZXYpOwo+ICAgCXN0cnVjdCBtbHg1X3Zk
cGFfbmV0ICpuZGV2ID0gdG9fbWx4NV92ZHBhX25kZXYobXZkZXYpOwo+IC0Jc3RydWN0IG1seDVf
dmRwYV92aXJ0cXVldWUgKm12cSA9ICZuZGV2LT52cXNbaWR4XTsKPiArCXN0cnVjdCBtbHg1X3Zk
cGFfdmlydHF1ZXVlICptdnE7Cj4gICAJc3RydWN0IG1seDVfdmlydHFfYXR0ciBhdHRyOwo+ICAg
CWludCBlcnI7Cj4gICAKPiArCWlmIChpc19jdHJsX3ZxX2lkeChtdmRldiwgaWR4KSkgewo+ICsJ
CXN0YXRlLT5zcGxpdC5hdmFpbF9pbmRleCA9IG12ZGV2LT5jdnEudnJpbmcubGFzdF9hdmFpbF9p
ZHg7Cj4gKwkJcmV0dXJuIDA7Cj4gKwl9Cj4gKwo+ICsJbXZxID0gJm5kZXYtPnZxc1tpZHhdOwo+
ICAgCS8qIElmIHRoZSB2aXJ0cSBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgdXNlIHRoZSB2YWx1ZSBz
YXZlZCBhdAo+ICAgCSAqIHRoZSBsYXN0IG1pbnV0ZSBvZiBzdXNwZW5kX3ZxLiBUaGlzIGNhdGVy
cyBmb3IgdXNlcnNwYWNlCj4gICAJICogdGhhdCBjYXJlcyBhYm91dCBlbXVsYXRpbmcgdGhlIGlu
ZGV4IGFmdGVyIHZxIGlzIHN0b3BwZWQuCj4gQEAgLTE0OTIsMTAgKzE3MDIsMTMgQEAgc3RhdGlj
IHU2NCBtbHg1X3ZkcGFfZ2V0X2ZlYXR1cmVzKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRldikKPiAg
IAl1MTYgZGV2X2ZlYXR1cmVzOwo+ICAgCj4gICAJZGV2X2ZlYXR1cmVzID0gTUxYNV9DQVBfREVW
X1ZEUEFfRU1VTEFUSU9OKG12ZGV2LT5tZGV2LCBkZXZpY2VfZmVhdHVyZXNfYml0c19tYXNrKTsK
PiAtCW5kZXYtPm12ZGV2Lm1seF9mZWF0dXJlcyA9IG1seF90b192cml0aW9fZmVhdHVyZXMoZGV2
X2ZlYXR1cmVzKTsKPiArCW5kZXYtPm12ZGV2Lm1seF9mZWF0dXJlcyB8PSBtbHhfdG9fdnJpdGlv
X2ZlYXR1cmVzKGRldl9mZWF0dXJlcyk7Cj4gICAJaWYgKE1MWDVfQ0FQX0RFVl9WRFBBX0VNVUxB
VElPTihtdmRldi0+bWRldiwgdmlydGlvX3ZlcnNpb25fMV8wKSkKPiAgIAkJbmRldi0+bXZkZXYu
bWx4X2ZlYXR1cmVzIHw9IEJJVF9VTEwoVklSVElPX0ZfVkVSU0lPTl8xKTsKPiAgIAluZGV2LT5t
dmRldi5tbHhfZmVhdHVyZXMgfD0gQklUX1VMTChWSVJUSU9fRl9BQ0NFU1NfUExBVEZPUk0pOwo+
ICsJbmRldi0+bXZkZXYubWx4X2ZlYXR1cmVzIHw9IEJJVF9VTEwoVklSVElPX05FVF9GX0NUUkxf
VlEpOwo+ICsJbmRldi0+bXZkZXYubWx4X2ZlYXR1cmVzIHw9IEJJVF9VTEwoVklSVElPX05FVF9G
X0NUUkxfTUFDX0FERFIpOwo+ICsKPiAgIAlwcmludF9mZWF0dXJlcyhtdmRldiwgbmRldi0+bXZk
ZXYubWx4X2ZlYXR1cmVzLCBmYWxzZSk7Cj4gICAJcmV0dXJuIG5kZXYtPm12ZGV2Lm1seF9mZWF0
dXJlczsKPiAgIH0KPiBAQCAtMTUwOCw4ICsxNzIxLDEwIEBAIHN0YXRpYyBpbnQgdmVyaWZ5X21p
bl9mZWF0dXJlcyhzdHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYsIHU2NCBmZWF0dXJlcykKPiAg
IAlyZXR1cm4gMDsKPiAgIH0KPiAgIAo+IC1zdGF0aWMgaW50IHNldHVwX3ZpcnRxdWV1ZXMoc3Ry
dWN0IG1seDVfdmRwYV9uZXQgKm5kZXYpCj4gK3N0YXRpYyBpbnQgc2V0dXBfdmlydHF1ZXVlcyhz
dHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYpCj4gICB7Cj4gKwlzdHJ1Y3QgbWx4NV92ZHBhX25l
dCAqbmRldiA9IHRvX21seDVfdmRwYV9uZGV2KG12ZGV2KTsKPiArCXN0cnVjdCBtbHg1X2NvbnRy
b2xfdnEgKmN2cSA9ICZtdmRldi0+Y3ZxOwo+ICAgCWludCBlcnI7Cj4gICAJaW50IGk7Cj4gICAK
PiBAQCAtMTUxOSw2ICsxNzM0LDE2IEBAIHN0YXRpYyBpbnQgc2V0dXBfdmlydHF1ZXVlcyhzdHJ1
Y3QgbWx4NV92ZHBhX25ldCAqbmRldikKPiAgIAkJCWdvdG8gZXJyX3ZxOwo+ICAgCX0KPiAgIAo+
ICsJaWYgKG12ZGV2LT5hY3R1YWxfZmVhdHVyZXMgJiBCSVRfVUxMKFZJUlRJT19ORVRfRl9DVFJM
X1ZRKSkgewo+ICsJCWVyciA9IHZyaW5naF9pbml0X2lvdGxiKCZjdnEtPnZyaW5nLCBtdmRldi0+
YWN0dWFsX2ZlYXR1cmVzLAo+ICsJCQkJCU1MWDVfQ1ZRX01BWF9FTlQsIGZhbHNlLAo+ICsJCQkJ
CShzdHJ1Y3QgdnJpbmdfZGVzYyAqKSh1aW50cHRyX3QpY3ZxLT5kZXNjX2FkZHIsCj4gKwkJCQkJ
KHN0cnVjdCB2cmluZ19hdmFpbCAqKSh1aW50cHRyX3QpY3ZxLT5kcml2ZXJfYWRkciwKPiArCQkJ
CQkoc3RydWN0IHZyaW5nX3VzZWQgKikodWludHB0cl90KWN2cS0+ZGV2aWNlX2FkZHIpOwo+ICsJ
CWlmIChlcnIpCj4gKwkJCWdvdG8gZXJyX3ZxOwo+ICsJfQo+ICsKPiAgIAlyZXR1cm4gMDsKPiAg
IAo+ICAgZXJyX3ZxOgo+IEBAIC0xNTQyLDE4ICsxNzY3LDYgQEAgc3RhdGljIHZvaWQgdGVhcmRv
d25fdmlydHF1ZXVlcyhzdHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRldikKPiAgIAl9Cj4gICB9Cj4g
ICAKPiAtLyogVE9ETzogY3Jvc3MtZW5kaWFuIHN1cHBvcnQgKi8KPiAtc3RhdGljIGlubGluZSBi
b29sIG1seDVfdmRwYV9pc19saXR0bGVfZW5kaWFuKHN0cnVjdCBtbHg1X3ZkcGFfZGV2ICptdmRl
dikKPiAtewo+IC0JcmV0dXJuIHZpcnRpb19sZWdhY3lfaXNfbGl0dGxlX2VuZGlhbigpIHx8Cj4g
LQkJKG12ZGV2LT5hY3R1YWxfZmVhdHVyZXMgJiBCSVRfVUxMKFZJUlRJT19GX1ZFUlNJT05fMSkp
Owo+IC19Cj4gLQo+IC1zdGF0aWMgX192aXJ0aW8xNiBjcHVfdG9fbWx4NXZkcGExNihzdHJ1Y3Qg
bWx4NV92ZHBhX2RldiAqbXZkZXYsIHUxNiB2YWwpCj4gLXsKPiAtCXJldHVybiBfX2NwdV90b192
aXJ0aW8xNihtbHg1X3ZkcGFfaXNfbGl0dGxlX2VuZGlhbihtdmRldiksIHZhbCk7Cj4gLX0KPiAt
Cj4gICBzdGF0aWMgaW50IG1seDVfdmRwYV9zZXRfZmVhdHVyZXMoc3RydWN0IHZkcGFfZGV2aWNl
ICp2ZGV2LCB1NjQgZmVhdHVyZXMpCj4gICB7Cj4gICAJc3RydWN0IG1seDVfdmRwYV9kZXYgKm12
ZGV2ID0gdG9fbXZkZXYodmRldik7Cj4gQEAgLTE2NzIsOCArMTg4NSw5IEBAIHN0YXRpYyB2b2lk
IHJlc3RvcmVfY2hhbm5lbHNfaW5mbyhzdHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRldikKPiAgIAl9
Cj4gICB9Cj4gICAKPiAtc3RhdGljIGludCBtbHg1X3ZkcGFfY2hhbmdlX21hcChzdHJ1Y3QgbWx4
NV92ZHBhX25ldCAqbmRldiwgc3RydWN0IHZob3N0X2lvdGxiICppb3RsYikKPiArc3RhdGljIGlu
dCBtbHg1X3ZkcGFfY2hhbmdlX21hcChzdHJ1Y3QgbWx4NV92ZHBhX2RldiAqbXZkZXYsIHN0cnVj
dCB2aG9zdF9pb3RsYiAqaW90bGIpCj4gICB7Cj4gKwlzdHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRl
diA9IHRvX21seDVfdmRwYV9uZGV2KG12ZGV2KTsKPiAgIAlpbnQgZXJyOwo+ICAgCj4gICAJc3Vz
cGVuZF92cXMobmRldik7Cj4gQEAgLTE2OTEsNyArMTkwNSw3IEBAIHN0YXRpYyBpbnQgbWx4NV92
ZHBhX2NoYW5nZV9tYXAoc3RydWN0IG1seDVfdmRwYV9uZXQgKm5kZXYsIHN0cnVjdCB2aG9zdF9p
b3RsYiAqCj4gICAJCXJldHVybiAwOwo+ICAgCj4gICAJcmVzdG9yZV9jaGFubmVsc19pbmZvKG5k
ZXYpOwo+IC0JZXJyID0gc2V0dXBfZHJpdmVyKG5kZXYpOwo+ICsJZXJyID0gc2V0dXBfZHJpdmVy
KG12ZGV2KTsKPiAgIAlpZiAoZXJyKQo+ICAgCQlnb3RvIGVycl9zZXR1cDsKPiAgIAo+IEBAIC0x
NzAzLDM3ICsxOTE3LDM4IEBAIHN0YXRpYyBpbnQgbWx4NV92ZHBhX2NoYW5nZV9tYXAoc3RydWN0
IG1seDVfdmRwYV9uZXQgKm5kZXYsIHN0cnVjdCB2aG9zdF9pb3RsYiAqCj4gICAJcmV0dXJuIGVy
cjsKPiAgIH0KPiAgIAo+IC1zdGF0aWMgaW50IHNldHVwX2RyaXZlcihzdHJ1Y3QgbWx4NV92ZHBh
X25ldCAqbmRldikKPiArc3RhdGljIGludCBzZXR1cF9kcml2ZXIoc3RydWN0IG1seDVfdmRwYV9k
ZXYgKm12ZGV2KQo+ICAgewo+ICsJc3RydWN0IG1seDVfdmRwYV9uZXQgKm5kZXYgPSB0b19tbHg1
X3ZkcGFfbmRldihtdmRldik7Cj4gICAJaW50IGVycjsKPiAgIAo+ICAgCW11dGV4X2xvY2soJm5k
ZXYtPnJlc2xvY2spOwo+ICAgCWlmIChuZGV2LT5zZXR1cCkgewo+IC0JCW1seDVfdmRwYV93YXJu
KCZuZGV2LT5tdmRldiwgInNldHVwIGRyaXZlciBjYWxsZWQgZm9yIGFscmVhZHkgc2V0dXAgZHJp
dmVyXG4iKTsKPiArCQltbHg1X3ZkcGFfd2FybihtdmRldiwgInNldHVwIGRyaXZlciBjYWxsZWQg
Zm9yIGFscmVhZHkgc2V0dXAgZHJpdmVyXG4iKTsKCgpJdCB3b3VsZCBiZSBiZXR0ZXIgdG8gc3Bs
aXQgdGhvc2UgdHdlYWtzIGludG8gYW5vdGhlciBwYXRjaC4gKE9yIGl0J3Mgbm8gCmVhc3kgdG8g
aW5mZXIgaG93IGl0IGlzIHJlbGF0ZWQgdG8gdGhlIGNvbnRyb2wgdnEgc3VwcG9ydCkuCgpCdHcs
IEkgZG9uJ3Qgc2VlIGhvdyByZXNldCBpcyBiZWluZyBoYW5kbGVkIGZvciBjdnE/CgpUaGFua3MK
Cgo+ICAgCQllcnIgPSAwOwo+ICAgCQlnb3RvIG91dDsKPiAgIAl9Cj4gLQllcnIgPSBzZXR1cF92
aXJ0cXVldWVzKG5kZXYpOwo+ICsJZXJyID0gc2V0dXBfdmlydHF1ZXVlcyhtdmRldik7Cj4gICAJ
aWYgKGVycikgewo+IC0JCW1seDVfdmRwYV93YXJuKCZuZGV2LT5tdmRldiwgInNldHVwX3ZpcnRx
dWV1ZXNcbiIpOwo+ICsJCW1seDVfdmRwYV93YXJuKG12ZGV2LCAic2V0dXBfdmlydHF1ZXVlc1xu
Iik7Cj4gICAJCWdvdG8gb3V0Owo+ICAgCX0KPiAgIAo+ICAgCWVyciA9IGNyZWF0ZV9ycXQobmRl
dik7Cj4gICAJaWYgKGVycikgewo+IC0JCW1seDVfdmRwYV93YXJuKCZuZGV2LT5tdmRldiwgImNy
ZWF0ZV9ycXRcbiIpOwo+ICsJCW1seDVfdmRwYV93YXJuKG12ZGV2LCAiY3JlYXRlX3JxdFxuIik7
Cj4gICAJCWdvdG8gZXJyX3JxdDsKPiAgIAl9Cj4gICAKPiAgIAllcnIgPSBjcmVhdGVfdGlyKG5k
ZXYpOwo+ICAgCWlmIChlcnIpIHsKPiAtCQltbHg1X3ZkcGFfd2FybigmbmRldi0+bXZkZXYsICJj
cmVhdGVfdGlyXG4iKTsKPiArCQltbHg1X3ZkcGFfd2FybihtdmRldiwgImNyZWF0ZV90aXJcbiIp
Owo+ICAgCQlnb3RvIGVycl90aXI7Cj4gICAJfQo+ICAgCj4gICAJZXJyID0gYWRkX2Z3ZF90b190
aXIobmRldik7Cj4gICAJaWYgKGVycikgewo+IC0JCW1seDVfdmRwYV93YXJuKCZuZGV2LT5tdmRl
diwgImFkZF9md2RfdG9fdGlyXG4iKTsKPiArCQltbHg1X3ZkcGFfd2FybihtdmRldiwgImFkZF9m
d2RfdG9fdGlyXG4iKTsKPiAgIAkJZ290byBlcnJfZndkOwo+ICAgCX0KPiAgIAluZGV2LT5zZXR1
cCA9IHRydWU7Cj4gQEAgLTE3OTksNyArMjAxNCw3IEBAIHN0YXRpYyB2b2lkIG1seDVfdmRwYV9z
ZXRfc3RhdHVzKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRldiwgdTggc3RhdHVzKQo+ICAgCj4gICAJ
aWYgKChzdGF0dXMgXiBuZGV2LT5tdmRldi5zdGF0dXMpICYgVklSVElPX0NPTkZJR19TX0RSSVZF
Ul9PSykgewo+ICAgCQlpZiAoc3RhdHVzICYgVklSVElPX0NPTkZJR19TX0RSSVZFUl9PSykgewo+
IC0JCQllcnIgPSBzZXR1cF9kcml2ZXIobmRldik7Cj4gKwkJCWVyciA9IHNldHVwX2RyaXZlciht
dmRldik7Cj4gICAJCQlpZiAoZXJyKSB7Cj4gICAJCQkJbWx4NV92ZHBhX3dhcm4obXZkZXYsICJm
YWlsZWQgdG8gc2V0dXAgZHJpdmVyXG4iKTsKPiAgIAkJCQlnb3RvIGVycl9zZXR1cDsKPiBAQCAt
MTg0OSw3ICsyMDY0LDYgQEAgc3RhdGljIHUzMiBtbHg1X3ZkcGFfZ2V0X2dlbmVyYXRpb24oc3Ry
dWN0IHZkcGFfZGV2aWNlICp2ZGV2KQo+ICAgc3RhdGljIGludCBtbHg1X3ZkcGFfc2V0X21hcChz
dHJ1Y3QgdmRwYV9kZXZpY2UgKnZkZXYsIHN0cnVjdCB2aG9zdF9pb3RsYiAqaW90bGIpCj4gICB7
Cj4gICAJc3RydWN0IG1seDVfdmRwYV9kZXYgKm12ZGV2ID0gdG9fbXZkZXYodmRldik7Cj4gLQlz
dHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRldiA9IHRvX21seDVfdmRwYV9uZGV2KG12ZGV2KTsKPiAg
IAlib29sIGNoYW5nZV9tYXA7Cj4gICAJaW50IGVycjsKPiAgIAo+IEBAIC0xODYwLDcgKzIwNzQs
NyBAQCBzdGF0aWMgaW50IG1seDVfdmRwYV9zZXRfbWFwKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRl
diwgc3RydWN0IHZob3N0X2lvdGxiICppb3RsYgo+ICAgCX0KPiAgIAo+ICAgCWlmIChjaGFuZ2Vf
bWFwKQo+IC0JCXJldHVybiBtbHg1X3ZkcGFfY2hhbmdlX21hcChuZGV2LCBpb3RsYik7Cj4gKwkJ
cmV0dXJuIG1seDVfdmRwYV9jaGFuZ2VfbWFwKG12ZGV2LCBpb3RsYik7Cj4gICAKPiAgIAlyZXR1
cm4gMDsKPiAgIH0KPiBAQCAtMTg5MCw2ICsyMTA0LDkgQEAgc3RhdGljIHN0cnVjdCB2ZHBhX25v
dGlmaWNhdGlvbl9hcmVhIG1seDVfZ2V0X3ZxX25vdGlmaWNhdGlvbihzdHJ1Y3QgdmRwYV9kZXZp
Y2UKPiAgIAlzdHJ1Y3QgbWx4NV92ZHBhX25ldCAqbmRldjsKPiAgIAlwaHlzX2FkZHJfdCBhZGRy
Owo+ICAgCj4gKwlpZiAoaXNfY3RybF92cV9pZHgobXZkZXYsIGlkeCkpCj4gKwkJcmV0dXJuIHJl
dDsKPiArCj4gICAJLyogSWYgU0YgQkFSIHNpemUgaXMgc21hbGxlciB0aGFuIFBBR0VfU0laRSwg
ZG8gbm90IHVzZSBkaXJlY3QKPiAgIAkgKiBub3RpZmljYXRpb24gdG8gYXZvaWQgdGhlIHJpc2sg
b2YgbWFwcGluZyBwYWdlcyB0aGF0IGNvbnRhaW4gQkFSIG9mIG1vcmUKPiAgIAkgKiB0aGFuIG9u
ZSBTRgo+IEBAIC0yMDU4LDggKzIyNzUsMTEgQEAgc3RhdGljIGludCBtbHg1X3ZkcGFfZGV2X2Fk
ZChzdHJ1Y3QgdmRwYV9tZ210X2RldiAqdl9tZGV2LCBjb25zdCBjaGFyICpuYW1lKQo+ICAgCQll
cnIgPSBtbHg1X21wZnNfYWRkX21hYyhwZm1kZXYsIGNvbmZpZy0+bWFjKTsKPiAgIAkJaWYgKGVy
cikKPiAgIAkJCWdvdG8gZXJyX210dTsKPiArCj4gKwkJbmRldi0+bXZkZXYubWx4X2ZlYXR1cmVz
IHw9IEJJVF9VTEwoVklSVElPX05FVF9GX01BQyk7Cj4gICAJfQo+ICAgCj4gKwljb25maWctPm1h
eF92aXJ0cXVldWVfcGFpcnMgPSBjcHVfdG9fbWx4NXZkcGExNihtdmRldiwgbWx4NV92ZHBhX21h
eF9xcHMobWF4X3ZxcykpOwo+ICAgCW12ZGV2LT52ZGV2LmRtYV9kZXYgPSAmbWRldi0+cGRldi0+
ZGV2Owo+ICAgCWVyciA9IG1seDVfdmRwYV9hbGxvY19yZXNvdXJjZXMoJm5kZXYtPm12ZGV2KTsK
PiAgIAlpZiAoZXJyKQo+IEBAIC0yMDc1LDggKzIyOTUsMTUgQEAgc3RhdGljIGludCBtbHg1X3Zk
cGFfZGV2X2FkZChzdHJ1Y3QgdmRwYV9tZ210X2RldiAqdl9tZGV2LCBjb25zdCBjaGFyICpuYW1l
KQo+ICAgCWlmIChlcnIpCj4gICAJCWdvdG8gZXJyX21yOwo+ICAgCj4gKwltdmRldi0+d3EgPSBj
cmVhdGVfc2luZ2xldGhyZWFkX3dvcmtxdWV1ZSgibWx4NV92ZHBhX2N0cmxfd3EiKTsKPiArCWlm
ICghbXZkZXYtPndxKSB7Cj4gKwkJZXJyID0gLUVOT01FTTsKPiArCQlnb3RvIGVycl9yZXMyOwo+
ICsJfQo+ICsKPiArCW5kZXYtPmN1cl9udW1fdnFzID0gMiAqIG1seDVfdmRwYV9tYXhfcXBzKG1h
eF92cXMpOwo+ICAgCW12ZGV2LT52ZGV2Lm1kZXYgPSAmbWd0ZGV2LT5tZ3RkZXY7Cj4gLQllcnIg
PSBfdmRwYV9yZWdpc3Rlcl9kZXZpY2UoJm12ZGV2LT52ZGV2LCAyICogbWx4NV92ZHBhX21heF9x
cHMobWF4X3ZxcykpOwo+ICsJZXJyID0gX3ZkcGFfcmVnaXN0ZXJfZGV2aWNlKCZtdmRldi0+dmRl
diwgbmRldi0+Y3VyX251bV92cXMgKyAxKTsKPiAgIAlpZiAoZXJyKQo+ICAgCQlnb3RvIGVycl9y
ZWc7Cj4gICAKPiBAQCAtMjA4NCw2ICsyMzExLDggQEAgc3RhdGljIGludCBtbHg1X3ZkcGFfZGV2
X2FkZChzdHJ1Y3QgdmRwYV9tZ210X2RldiAqdl9tZGV2LCBjb25zdCBjaGFyICpuYW1lKQo+ICAg
CXJldHVybiAwOwo+ICAgCj4gICBlcnJfcmVnOgo+ICsJZGVzdHJveV93b3JrcXVldWUobXZkZXYt
PndxKTsKPiArZXJyX3JlczI6Cj4gICAJZnJlZV9yZXNvdXJjZXMobmRldik7Cj4gICBlcnJfbXI6
Cj4gICAJbWx4NV92ZHBhX2Rlc3Ryb3lfbXIobXZkZXYpOwo+IEBAIC0yMTAxLDcgKzIzMzAsOSBA
QCBzdGF0aWMgaW50IG1seDVfdmRwYV9kZXZfYWRkKHN0cnVjdCB2ZHBhX21nbXRfZGV2ICp2X21k
ZXYsIGNvbnN0IGNoYXIgKm5hbWUpCj4gICBzdGF0aWMgdm9pZCBtbHg1X3ZkcGFfZGV2X2RlbChz
dHJ1Y3QgdmRwYV9tZ210X2RldiAqdl9tZGV2LCBzdHJ1Y3QgdmRwYV9kZXZpY2UgKmRldikKPiAg
IHsKPiAgIAlzdHJ1Y3QgbWx4NV92ZHBhX21nbXRkZXYgKm1ndGRldiA9IGNvbnRhaW5lcl9vZih2
X21kZXYsIHN0cnVjdCBtbHg1X3ZkcGFfbWdtdGRldiwgbWd0ZGV2KTsKPiArCXN0cnVjdCBtbHg1
X3ZkcGFfZGV2ICptdmRldiA9IHRvX212ZGV2KGRldik7Cj4gICAKPiArCWRlc3Ryb3lfd29ya3F1
ZXVlKG12ZGV2LT53cSk7Cj4gICAJX3ZkcGFfdW5yZWdpc3Rlcl9kZXZpY2UoZGV2KTsKPiAgIAlt
Z3RkZXYtPm5kZXYgPSBOVUxMOwo+ICAgfQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KVmlydHVhbGl6YXRpb24gbWFpbGluZyBsaXN0ClZpcnR1YWxpemF0
aW9uQGxpc3RzLmxpbnV4LWZvdW5kYXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGludXhmb3VuZGF0
aW9uLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3ZpcnR1YWxpemF0aW9u

