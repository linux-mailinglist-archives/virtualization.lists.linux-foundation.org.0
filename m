Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [140.211.166.133])
	by mail.lfdr.de (Postfix) with ESMTPS id 218C577FDD8
	for <lists.virtualization@lfdr.de>; Thu, 17 Aug 2023 20:27:27 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id 422CC4191C;
	Thu, 17 Aug 2023 18:27:25 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 422CC4191C
Authentication-Results: smtp2.osuosl.org;
	dkim=fail reason="signature verification failed" (2048-bit key) header.d=gmail.com header.i=@gmail.com header.a=rsa-sha256 header.s=20221208 header.b=mhvWCzwD
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id b49EmBk_H--a; Thu, 17 Aug 2023 18:27:24 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp2.osuosl.org (Postfix) with ESMTPS id C088C4191D;
	Thu, 17 Aug 2023 18:27:23 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org C088C4191D
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id F38E8C008C;
	Thu, 17 Aug 2023 18:27:22 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp1.osuosl.org (smtp1.osuosl.org [140.211.166.138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 57DB2C0032
 for <virtualization@lists.linux-foundation.org>;
 Thu, 17 Aug 2023 18:27:21 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp1.osuosl.org (Postfix) with ESMTP id 2D76984029
 for <virtualization@lists.linux-foundation.org>;
 Thu, 17 Aug 2023 18:27:21 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org 2D76984029
Authentication-Results: smtp1.osuosl.org;
 dkim=pass (2048-bit key) header.d=gmail.com header.i=@gmail.com
 header.a=rsa-sha256 header.s=20221208 header.b=mhvWCzwD
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
 by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id WlWh6qrhcPja
 for <virtualization@lists.linux-foundation.org>;
 Thu, 17 Aug 2023 18:27:20 +0000 (UTC)
Received: from mail-vs1-xe36.google.com (mail-vs1-xe36.google.com
 [IPv6:2607:f8b0:4864:20::e36])
 by smtp1.osuosl.org (Postfix) with ESMTPS id 3B6C984028
 for <virtualization@lists.linux-foundation.org>;
 Thu, 17 Aug 2023 18:27:20 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org 3B6C984028
Received: by mail-vs1-xe36.google.com with SMTP id
 ada2fe7eead31-44acad48bffso16942137.0
 for <virtualization@lists.linux-foundation.org>;
 Thu, 17 Aug 2023 11:27:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20221208; t=1692296839; x=1692901639;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:from:to:cc:subject:date
 :message-id:reply-to;
 bh=xRtAo876cuASoEB01zNxdIhAA/DXPdvYkEysdJ4oMA8=;
 b=mhvWCzwDtA3e2XM05IgesAy3ZTUsbchE6NWIqkycct7TUK6Ute3fUuuO0ZO9Ur4Tmg
 j6+8DK3XmKbiyi6g4i9zeu9uwRyvnEU+CWPXsXbOTwTnAK+yFQG5nUMZSioWSMJlkMHn
 kolYZN7KYfx0pKoUHr+4gPrbozMSA2tRpuJtm+SCpsOacjN2tMvsP0NtzgZWV1zi3u32
 IWKwSAtA8GhSZe0eEMjrp8ST/AhWE0jMMtwn01+Oxb8Ug0bd0wwiez4ghBVcuImn0ZDR
 LpdusGzXdBryW+oU6Ac90BAEik2yBUY/1w4hgjqpOkIfqRp+T9F6LReKqXTy/aED6dRX
 DvjA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20221208; t=1692296839; x=1692901639;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=xRtAo876cuASoEB01zNxdIhAA/DXPdvYkEysdJ4oMA8=;
 b=DjjU9unJqE688DsFeXAmZ05GkosaMwptk72ZsUpGAGe5Yn/m6P5vSp0CQogabwSlYj
 gMTMAb+PSNCo0LzpuN77lVIXQi9EcNbRyozPB8NsxLDwf6sb8jydoI+k+7ls1TcS0Tbw
 4UO2KNIZDoZOnOQvw9fe27TRx/eryYQC/hOw4iBRIcSqU5kpxHBLnuIYNiilPevw/OJj
 CUtGB0czp6/JeTR/LpxiOTKIyCPTew6T56Nn5fu7JPzdPtRdxZYnLRcojSAF7TEc/iHk
 DgrjbBR7YJsIiKE7GlwBXxHRaCb3D1YA1ZYY2S0Qkbrt41xH4xmCOne1y1hBIuezgPKp
 yeBg==
X-Gm-Message-State: AOJu0YyA3nWmBCuZSkGyXhNzpr5NRuHubFQXbzmuVG7QuIruycGhDhwa
 hW9Z53g0HKSWFc8IGz0p4IGawgn9xiQG8RwSxEQ=
X-Google-Smtp-Source: AGHT+IGBK/rYQtQRwk0IkRT3MnJVQxEOG7oPx8gcBkXKx5X7MyS+nGJUbotmmstWWdhANpXn830fAVvRHjqXdtgbLq0=
X-Received: by 2002:a67:cf07:0:b0:443:5aca:d2dc with SMTP id
 y7-20020a67cf07000000b004435acad2dcmr697912vsl.6.1692296838836; Thu, 17 Aug
 2023 11:27:18 -0700 (PDT)
MIME-Version: 1.0
References: <20230817151941.18692-1-feliu@nvidia.com>
In-Reply-To: <20230817151941.18692-1-feliu@nvidia.com>
From: Willem de Bruijn <willemdebruijn.kernel@gmail.com>
Date: Thu, 17 Aug 2023 14:26:42 -0400
Message-ID: <CAF=yD-KN=-2fhc2nxxzr-bJ5kwQVFken_iTo4sBbuAkjmbn3fQ@mail.gmail.com>
Subject: Re: [PATCH net-next v2] virtio_net: Introduce skb_vnet_common_hdr to
 avoid typecasting
To: Feng Liu <feliu@nvidia.com>
Cc: Xuan Zhuo <xuanzhuo@linux.alibaba.com>,
 "Michael S . Tsirkin" <mst@redhat.com>, netdev@vger.kernel.org,
 linux-kernel@vger.kernel.org, virtualization@lists.linux-foundation.org,
 Eric Dumazet <edumazet@google.com>, Simon Horman <horms@kernel.org>,
 Jiri Pirko <jiri@nvidia.com>, Bodong Wang <bodong@nvidia.com>,
 Jakub Kicinski <kuba@kernel.org>, Paolo Abeni <pabeni@redhat.com>,
 "David S . Miller" <davem@davemloft.net>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gVGh1LCBBdWcgMTcsIDIwMjMgYXQgMTE6MjDigK9BTSBGZW5nIExpdSA8ZmVsaXVAbnZpZGlh
LmNvbT4gd3JvdGU6Cj4KPiBUaGUgdmlydGlvX25ldCBkcml2ZXIgY3VycmVudGx5IGRlYWxzIHdp
dGggZGlmZmVyZW50IHZlcnNpb25zIGFuZCB0eXBlcwo+IG9mIHZpcnRpbyBuZXQgaGVhZGVycywg
c3VjaCBhcyB2aXJ0aW9fbmV0X2hkcl9tcmdfcnhidWYsCj4gdmlydGlvX25ldF9oZHJfdjFfaGFz
aCwgZXRjLiBEdWUgdG8gdGhlc2UgdmFyaWF0aW9ucywgdGhlIGNvZGUgcmVsaWVzCj4gb24gbXVs
dGlwbGUgdHlwZSBjYXN0cyB0byBjb252ZXJ0IG1lbW9yeSBiZXR3ZWVuIGRpZmZlcmVudCBzdHJ1
Y3R1cmVzLAo+IHBvdGVudGlhbGx5IGxlYWRpbmcgdG8gYnVncyB3aGVuIHRoZXJlIGFyZSBjaGFu
Z2VzIGluIHRoZXNlIHN0cnVjdHVyZXMuCj4KPiBJbnRyb2R1Y2VzIHRoZSAic3RydWN0IHNrYl92
bmV0X2NvbW1vbl9oZHIiIGFzIGEgdW5pZnlpbmcgaGVhZGVyCj4gc3RydWN0dXJlIHVzaW5nIGEg
dW5pb24uIFdpdGggdGhpcyBhcHByb2FjaCwgdmFyaW91cyB2aXJ0aW8gbmV0IGhlYWRlcgo+IHN0
cnVjdHVyZXMgY2FuIGJlIGNvbnZlcnRlZCBieSBhY2Nlc3NpbmcgZGlmZmVyZW50IG1lbWJlcnMg
b2YgdGhpcwo+IHN0cnVjdHVyZSwgdGh1cyBlbGltaW5hdGluZyB0aGUgbmVlZCBmb3IgdHlwZSBj
YXN0aW5nIGFuZCByZWR1Y2luZyB0aGUKPiByaXNrIG9mIHBvdGVudGlhbCBidWdzLgo+Cj4gRm9y
IGV4YW1wbGUgZm9sbG93aW5nIGNvZGU6Cj4gc3RhdGljIHN0cnVjdCBza19idWZmICpwYWdlX3Rv
X3NrYihzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwKPiAgICAgICAgICAgICAgICAgc3RydWN0IHJl
Y2VpdmVfcXVldWUgKnJxLAo+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgcGFnZSAqcGFnZSwgdW5z
aWduZWQgaW50IG9mZnNldCwKPiAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGxlbiwgdW5z
aWduZWQgaW50IHRydWVzaXplLAo+ICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgaGVhZHJv
b20pCj4gewo+IFsuLi5dCj4gICAgICAgICBzdHJ1Y3QgdmlydGlvX25ldF9oZHJfbXJnX3J4YnVm
ICpoZHI7Cj4gWy4uLl0KPiAgICAgICAgIGhkcl9sZW4gPSB2aS0+aGRyX2xlbjsKPiBbLi4uXQo+
IG9rOgo+ICAgICAgICAgaGRyID0gc2tiX3ZuZXRfaGRyKHNrYik7Cj4gICAgICAgICBtZW1jcHko
aGRyLCBoZHJfcCwgaGRyX2xlbik7Cj4gWy4uLl0KPiB9Cj4KPiBXaGVuIFZJUlRJT19ORVRfRl9I
QVNIX1JFUE9SVCBmZWF0dXJlIGlzIGVuYWJsZWQsIGhkcl9sZW4gPSAyMAo+IEJ1dCB0aGUgc2l6
ZW9mKCpoZHIpIGlzIDEyLAo+IG1lbWNweShoZHIsIGhkcl9wLCBoZHJfbGVuKTsgd2lsbCBjb3B5
IDIwIGJ5dGVzIHRvIHRoZSBoZHIsCj4gd2hpY2ggbWFrZSBhIHBvdGVudGlhbCByaXNrIG9mIGJ1
Zy4gQW5kIHRoaXMgcmlzayBjYW4gYmUgYXZvaWRlZCBieQo+IGludHJvZHVjaW5nIHN0cnVjdCB2
aXJ0aW9fbmV0X2hkcl9tcmdfcnhidWYuCgpZb3UgbWVhbiB2aXJ0aW9fbmV0X2NvbW1vbl9oZHI/
CgpJJ20gbm90IHN1cmUgSSBmb2xsb3cgdGhlIHJlYXNvbmluZy4gQmVjYXVzZSB0aGVuIGhkcl9s
ZW4gbWlnaHQgYmUKc2l6ZW9mKHZpcnRpb19uZXRfaGRyX21yZ19yeGJ1ZiksIGJ1dCBzaXplb2Yo
dmlydGlvX25ldF9jb21tb25faGRyKSBpcwpsYXJnZXIuIFNvIHRoZSBzYW1lIGlzc3VlIHJlbWFp
bnM/CgpJbmRlZWQsIGV2ZXJ5d2hlcmUgdGhpcyBwYXRjaGVzIHJlcGxhY2VzIHRoZSBvbmUgd2l0
aCB0aGUgb3RoZXIsIHlvdQpoYXZlIHRvIHZlcmlmeSB0aGF0IG5vdGhpbmcgd2FzIHVzaW5nIHNp
emVvZigqaGRyKS4gV2hpY2ggd291bGQgbm90IGJlCnZpc2libGUgZnJvbSB0aGUgdHJ1bmNhdGVk
IHBhdGNoIGNvbnRlbnRzIGl0c2VsZi4KCj4KPiBDaGFuZ2UgbG9nCj4gdjEtPnYyCj4gZmVlZGJh
Y2sgZnJvbSBXaWxsZW0gZGUgQnJ1aWpuIDx3aWxsZW1kZWJydWlqbi5rZXJuZWxAZ21haWwuY29t
Pgo+IGZlZWRiYWNrIGZyb20gU2ltb24gSG9ybWFuIDxob3Jtc0BrZXJuZWwub3JnPgo+IDEuIGNo
YW5nZSB0byB1c2UgbmV0LW5leHQgdHJlZS4KPiAyLiBtb3ZlIHNrYl92bmV0X2NvbW1vbl9oZHIg
aW5zaWRlIGtlcm5lbCBmaWxlIGluc3RlYWQgb2YgdGhlIFVBUEkgaGVhZGVyLgo+Cj4gU2lnbmVk
LW9mZi1ieTogRmVuZyBMaXUgPGZlbGl1QG52aWRpYS5jb20+Cj4gUmV2aWV3ZWQtYnk6IEppcmkg
UGlya28gPGppcmlAbnZpZGlhLmNvbT4KPiAtLS0KPiAgZHJpdmVycy9uZXQvdmlydGlvX25ldC5j
IHwgMzYgKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tCj4gIDEgZmlsZSBjaGFu
Z2VkLCAyMyBpbnNlcnRpb25zKCspLCAxMyBkZWxldGlvbnMoLSkKPgo+IGRpZmYgLS1naXQgYS9k
cml2ZXJzL25ldC92aXJ0aW9fbmV0LmMgYi9kcml2ZXJzL25ldC92aXJ0aW9fbmV0LmMKPiBpbmRl
eCAxMjcwYzhkMjM0NjMuLjAzY2Y3NDRkZTUxMiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL25ldC92
aXJ0aW9fbmV0LmMKPiArKysgYi9kcml2ZXJzL25ldC92aXJ0aW9fbmV0LmMKPiBAQCAtMzAzLDYg
KzMwMywxMyBAQCBzdHJ1Y3QgcGFkZGVkX3ZuZXRfaGRyIHsKPiAgICAgICAgIGNoYXIgcGFkZGlu
Z1sxMl07Cj4gIH07Cj4KPiArc3RydWN0IHZpcnRpb19uZXRfY29tbW9uX2hkciB7Cj4gKyAgICAg
ICB1bmlvbiB7Cj4gKyAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fbmV0X2hkcl9tcmdfcnhi
dWYgbXJnX2hkcjsKPiArICAgICAgICAgICAgICAgc3RydWN0IHZpcnRpb19uZXRfaGRyX3YxX2hh
c2ggaGFzaF92MV9oZHI7Cj4gKyAgICAgICB9Owo+ICt9OwoKUGVyaGFwcyBldmVuIGFkZCBpbiBz
dHJ1Y3QgdmlydGlvX25ldF9oZHIuIEFzIHRoYXQgaXMgdGhlIG9yaWdpbmFsIG9mCnRoZSB0aHJl
ZSBzdHJ1Y3RzLCBhbmQgYWxsIHRoZSBpbml0aWFsIGZpZWxkcyBvdmVybGFwLgoKPiArCj4gIHN0
YXRpYyB2b2lkIHZpcnRuZXRfcnFfZnJlZV91bnVzZWRfYnVmKHN0cnVjdCB2aXJ0cXVldWUgKnZx
LCB2b2lkICpidWYpOwo+ICBzdGF0aWMgdm9pZCB2aXJ0bmV0X3NxX2ZyZWVfdW51c2VkX2J1Zihz
dHJ1Y3QgdmlydHF1ZXVlICp2cSwgdm9pZCAqYnVmKTsKPgo+IEBAIC0zNDQsOSArMzUxLDEwIEBA
IHN0YXRpYyBpbnQgcnhxMnZxKGludCByeHEpCj4gICAgICAgICByZXR1cm4gcnhxICogMjsKPiAg
fQo+Cj4gLXN0YXRpYyBpbmxpbmUgc3RydWN0IHZpcnRpb19uZXRfaGRyX21yZ19yeGJ1ZiAqc2ti
X3ZuZXRfaGRyKHN0cnVjdCBza19idWZmICpza2IpCj4gK3N0YXRpYyBpbmxpbmUgc3RydWN0IHZp
cnRpb19uZXRfY29tbW9uX2hkciAqCj4gK3NrYl92bmV0X2NvbW1vbl9oZHIoc3RydWN0IHNrX2J1
ZmYgKnNrYikKPiAgewo+IC0gICAgICAgcmV0dXJuIChzdHJ1Y3QgdmlydGlvX25ldF9oZHJfbXJn
X3J4YnVmICopc2tiLT5jYjsKPiArICAgICAgIHJldHVybiAoc3RydWN0IHZpcnRpb19uZXRfY29t
bW9uX2hkciAqKXNrYi0+Y2I7Cj4gIH0KPgo+ICAvKgo+IEBAIC00NjksNyArNDc3LDcgQEAgc3Rh
dGljIHN0cnVjdCBza19idWZmICpwYWdlX3RvX3NrYihzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwK
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBoZWFkcm9v
bSkKPiAgewo+ICAgICAgICAgc3RydWN0IHNrX2J1ZmYgKnNrYjsKPiAtICAgICAgIHN0cnVjdCB2
aXJ0aW9fbmV0X2hkcl9tcmdfcnhidWYgKmhkcjsKPiArICAgICAgIHN0cnVjdCB2aXJ0aW9fbmV0
X2NvbW1vbl9oZHIgKmhkcjsKPiAgICAgICAgIHVuc2lnbmVkIGludCBjb3B5LCBoZHJfbGVuLCBo
ZHJfcGFkZGVkX2xlbjsKPiAgICAgICAgIHN0cnVjdCBwYWdlICpwYWdlX3RvX2ZyZWUgPSBOVUxM
Owo+ICAgICAgICAgaW50IHRhaWxyb29tLCBzaGluZm9fc2l6ZTsKPiBAQCAtNTU0LDcgKzU2Miw3
IEBAIHN0YXRpYyBzdHJ1Y3Qgc2tfYnVmZiAqcGFnZV90b19za2Ioc3RydWN0IHZpcnRuZXRfaW5m
byAqdmksCj4gICAgICAgICAgICAgICAgIGdpdmVfcGFnZXMocnEsIHBhZ2UpOwo+Cj4gIG9rOgo+
IC0gICAgICAgaGRyID0gc2tiX3ZuZXRfaGRyKHNrYik7Cj4gKyAgICAgICBoZHIgPSBza2Jfdm5l
dF9jb21tb25faGRyKHNrYik7Cj4gICAgICAgICBtZW1jcHkoaGRyLCBoZHJfcCwgaGRyX2xlbik7
Cj4gICAgICAgICBpZiAocGFnZV90b19mcmVlKQo+ICAgICAgICAgICAgICAgICBwdXRfcGFnZShw
YWdlX3RvX2ZyZWUpOwo+IEBAIC05NjYsNyArOTc0LDcgQEAgc3RhdGljIHN0cnVjdCBza19idWZm
ICpyZWNlaXZlX3NtYWxsX2J1aWxkX3NrYihzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwKPiAgICAg
ICAgICAgICAgICAgcmV0dXJuIE5VTEw7Cj4KPiAgICAgICAgIGJ1ZiArPSBoZWFkZXJfb2Zmc2V0
Owo+IC0gICAgICAgbWVtY3B5KHNrYl92bmV0X2hkcihza2IpLCBidWYsIHZpLT5oZHJfbGVuKTsK
PiArICAgICAgIG1lbWNweShza2Jfdm5ldF9jb21tb25faGRyKHNrYiksIGJ1ZiwgdmktPmhkcl9s
ZW4pOwo+Cj4gICAgICAgICByZXR1cm4gc2tiOwo+ICB9Cj4gQEAgLTE1NzcsNyArMTU4NSw4IEBA
IHN0YXRpYyB2b2lkIHJlY2VpdmVfYnVmKHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLCBzdHJ1Y3Qg
cmVjZWl2ZV9xdWV1ZSAqcnEsCj4gIHsKPiAgICAgICAgIHN0cnVjdCBuZXRfZGV2aWNlICpkZXYg
PSB2aS0+ZGV2Owo+ICAgICAgICAgc3RydWN0IHNrX2J1ZmYgKnNrYjsKPiAtICAgICAgIHN0cnVj
dCB2aXJ0aW9fbmV0X2hkcl9tcmdfcnhidWYgKmhkcjsKPiArICAgICAgIHN0cnVjdCB2aXJ0aW9f
bmV0X2NvbW1vbl9oZHIgKmNvbW1vbl9oZHI7Cj4gKyAgICAgICBzdHJ1Y3QgdmlydGlvX25ldF9o
ZHJfbXJnX3J4YnVmICptcmdfaGRyOwoKTm8gbW9yZSBuZWVkIGZvciB0aGlzIHNlY29uZCBzdHJ1
Y3Qgbm93IHRoYXQgd2UgaGF2ZSB0aGUgdW5pb24uIFRoYXQncwppdHMgd2hvbGUgcHVycG9zZT8K
Pgo+ICAgICAgICAgaWYgKHVubGlrZWx5KGxlbiA8IHZpLT5oZHJfbGVuICsgRVRIX0hMRU4pKSB7
Cj4gICAgICAgICAgICAgICAgIHByX2RlYnVnKCIlczogc2hvcnQgcGFja2V0ICVpXG4iLCBkZXYt
Pm5hbWUsIGxlbik7Cj4gQEAgLTE1OTcsMTggKzE2MDYsMTkgQEAgc3RhdGljIHZvaWQgcmVjZWl2
ZV9idWYoc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksIHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwK
PiAgICAgICAgIGlmICh1bmxpa2VseSghc2tiKSkKPiAgICAgICAgICAgICAgICAgcmV0dXJuOwo+
Cj4gLSAgICAgICBoZHIgPSBza2Jfdm5ldF9oZHIoc2tiKTsKPiArICAgICAgIGNvbW1vbl9oZHIg
PSBza2Jfdm5ldF9jb21tb25faGRyKHNrYik7Cj4gICAgICAgICBpZiAoZGV2LT5mZWF0dXJlcyAm
IE5FVElGX0ZfUlhIQVNIICYmIHZpLT5oYXNfcnNzX2hhc2hfcmVwb3J0KQo+IC0gICAgICAgICAg
ICAgICB2aXJ0aW9fc2tiX3NldF9oYXNoKChjb25zdCBzdHJ1Y3QgdmlydGlvX25ldF9oZHJfdjFf
aGFzaCAqKWhkciwgc2tiKTsKPiArICAgICAgICAgICAgICAgdmlydGlvX3NrYl9zZXRfaGFzaCgm
Y29tbW9uX2hkci0+aGFzaF92MV9oZHIsIHNrYik7Cj4KPiAtICAgICAgIGlmIChoZHItPmhkci5m
bGFncyAmIFZJUlRJT19ORVRfSERSX0ZfREFUQV9WQUxJRCkKPiArICAgICAgIG1yZ19oZHIgPSAm
Y29tbW9uX2hkci0+bXJnX2hkcjsKPiArICAgICAgIGlmIChtcmdfaGRyLT5oZHIuZmxhZ3MgJiBW
SVJUSU9fTkVUX0hEUl9GX0RBVEFfVkFMSUQpCj4gICAgICAgICAgICAgICAgIHNrYi0+aXBfc3Vt
bWVkID0gQ0hFQ0tTVU1fVU5ORUNFU1NBUlk7Cj4KPiAtICAgICAgIGlmICh2aXJ0aW9fbmV0X2hk
cl90b19za2Ioc2tiLCAmaGRyLT5oZHIsCj4gKyAgICAgICBpZiAodmlydGlvX25ldF9oZHJfdG9f
c2tiKHNrYiwgJm1yZ19oZHItPmhkciwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdmlydGlvX2lzX2xpdHRsZV9lbmRpYW4odmktPnZkZXYpKSkgewo+ICAgICAgICAgICAgICAg
ICBuZXRfd2Fybl9yYXRlbGltaXRlZCgiJXM6IGJhZCBnc286IHR5cGU6ICV1LCBzaXplOiAldVxu
IiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2LT5uYW1lLCBoZHIt
Pmhkci5nc29fdHlwZSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGRy
LT5oZHIuZ3NvX3NpemUpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBk
ZXYtPm5hbWUsIG1yZ19oZHItPmhkci5nc29fdHlwZSwKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgbXJnX2hkci0+aGRyLmdzb19zaXplKTsKPiAgICAgICAgICAgICAgICAg
Z290byBmcmFtZV9lcnI7Cj4gICAgICAgICB9Cj4KPiBAQCAtMjEwNSw3ICsyMTE1LDcgQEAgc3Rh
dGljIGludCB4bWl0X3NrYihzdHJ1Y3Qgc2VuZF9xdWV1ZSAqc3EsIHN0cnVjdCBza19idWZmICpz
a2IpCj4gICAgICAgICBpZiAoY2FuX3B1c2gpCj4gICAgICAgICAgICAgICAgIGhkciA9IChzdHJ1
Y3QgdmlydGlvX25ldF9oZHJfbXJnX3J4YnVmICopKHNrYi0+ZGF0YSAtIGhkcl9sZW4pOwo+ICAg
ICAgICAgZWxzZQo+IC0gICAgICAgICAgICAgICBoZHIgPSBza2Jfdm5ldF9oZHIoc2tiKTsKPiAr
ICAgICAgICAgICAgICAgaGRyID0gJnNrYl92bmV0X2NvbW1vbl9oZHIoc2tiKS0+bXJnX2hkcjsK
Pgo+ICAgICAgICAgaWYgKHZpcnRpb19uZXRfaGRyX2Zyb21fc2tiKHNrYiwgJmhkci0+aGRyLAo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpcnRpb19pc19saXR0bGVfZW5k
aWFuKHZpLT52ZGV2KSwgZmFsc2UsCj4gLS0KPiAyLjM3LjEgKEFwcGxlIEdpdC0xMzcuMSkKPgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpWaXJ0dWFsaXph
dGlvbiBtYWlsaW5nIGxpc3QKVmlydHVhbGl6YXRpb25AbGlzdHMubGludXgtZm91bmRhdGlvbi5v
cmcKaHR0cHM6Ly9saXN0cy5saW51eGZvdW5kYXRpb24ub3JnL21haWxtYW4vbGlzdGluZm8vdmly
dHVhbGl6YXRpb24=
