Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp1.osuosl.org (smtp1.osuosl.org [IPv6:2605:bc80:3010::138])
	by mail.lfdr.de (Postfix) with ESMTPS id 8F82F4A341A
	for <lists.virtualization@lfdr.de>; Sun, 30 Jan 2022 06:21:45 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp1.osuosl.org (Postfix) with ESMTP id 8FEC481773;
	Sun, 30 Jan 2022 05:21:43 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
	by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mTIAzAHO1pze; Sun, 30 Jan 2022 05:21:42 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp1.osuosl.org (Postfix) with ESMTPS id 2B9C682BC0;
	Sun, 30 Jan 2022 05:21:42 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id AF46EC000B;
	Sun, 30 Jan 2022 05:21:41 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp3.osuosl.org (smtp3.osuosl.org [140.211.166.136])
 by lists.linuxfoundation.org (Postfix) with ESMTP id C3AF4C000B
 for <virtualization@lists.linux-foundation.org>;
 Sun, 30 Jan 2022 05:21:39 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp3.osuosl.org (Postfix) with ESMTP id 9A3D860B4E
 for <virtualization@lists.linux-foundation.org>;
 Sun, 30 Jan 2022 05:21:39 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp3.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp3.osuosl.org ([127.0.0.1])
 by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 3z-kBXbJX8Un
 for <virtualization@lists.linux-foundation.org>;
 Sun, 30 Jan 2022 05:21:38 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp3.osuosl.org (Postfix) with ESMTPS id 90B4460B48
 for <virtualization@lists.linux-foundation.org>;
 Sun, 30 Jan 2022 05:21:38 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1643520097;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=3nKOwreE1qfvcZ3p2TLShBBGEacxqpCN+u4VuVedi5g=;
 b=F0qsD9ztroJ9/ZiPEuq+gNt3ZvvZao6inwGdQ4O56LsJweeWNdUK0P3HQ1GVJjgn48zA2j
 NfrtIRHP2Va/zF+AlbHPFc2DdiEKmqGXUKDc1mQlYudcd2DS9IOTZSTKnffDKmTKk4/RHz
 5rI7tOxoLC9XFYSIxe7oBFSKEhStZno=
Received: from mail-pf1-f200.google.com (mail-pf1-f200.google.com
 [209.85.210.200]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 us-mta-520-Y_5v4uMsNq-5C1ipvJB15Q-1; Sun, 30 Jan 2022 00:21:35 -0500
X-MC-Unique: Y_5v4uMsNq-5C1ipvJB15Q-1
Received: by mail-pf1-f200.google.com with SMTP id
 z20-20020aa791d4000000b004bd024eaf19so5467558pfa.16
 for <virtualization@lists.linux-foundation.org>;
 Sat, 29 Jan 2022 21:21:35 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:message-id:date:mime-version:user-agent:subject
 :content-language:to:cc:references:from:in-reply-to
 :content-transfer-encoding;
 bh=3nKOwreE1qfvcZ3p2TLShBBGEacxqpCN+u4VuVedi5g=;
 b=LfmEahGK63QCBrrTUbTkQtGWfJnEqpE4jVOg6If3Fn/4Vc6qBcmbVyTX2GymGxn9uw
 wYH7HhWFYw45OlrTnOuDC68He+ctyqhJO1EwpWhNP8JeJhSjZLw8iEPxyxOxGpXcL5jv
 yrzaE4bzxczztDe6TKGf7RpMUrv+CjfFmKd6XxGptXPQQghC+83mvsRQL32OiLetYM8/
 pom6TgFNdi7AqdevhC4gGJn+fWdWztclyqJirxasxlc9NHg3SM4u1Qv87EFUSqfShr+v
 0FiaL4GXEy7WDkEJ1FbvnZ8HUmGqSz1sR0BQNwagSaGkMt/Xf9wpelolTpWP4Rq7shpf
 xDhA==
X-Gm-Message-State: AOAM530nQkV5JFPGGPQYwW3/xNT2nGK8EBS2mS67278iyfG9h/f5gnkq
 57ATjb8x4Q4etWa2SUJZw+S73pxTaXlHUsq0UqE09O3Hx1DsKg/Qlua3dXCtlzjL8hYMdeNTP0c
 UL4HMaVEiXsaXn+0RWxorWo4C2dRkXCe1M04/81Wx1A==
X-Received: by 2002:a17:902:e849:: with SMTP id
 t9mr15515335plg.106.1643520094340; 
 Sat, 29 Jan 2022 21:21:34 -0800 (PST)
X-Google-Smtp-Source: ABdhPJwYMyV9jHc3EiGcItO+fCjZSq/yUCZ1FmPCUv1xvSPajk7LjCgLtawY+jg2lMuE3eFOkdf5ng==
X-Received: by 2002:a17:902:e849:: with SMTP id
 t9mr15515304plg.106.1643520094019; 
 Sat, 29 Jan 2022 21:21:34 -0800 (PST)
Received: from [10.72.13.18] ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id mu13sm7282937pjb.28.2022.01.29.21.21.27
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Sat, 29 Jan 2022 21:21:33 -0800 (PST)
Message-ID: <2eb07526-0143-d612-8969-097ccdf00fae@redhat.com>
Date: Sun, 30 Jan 2022 13:21:21 +0800
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0)
 Gecko/20100101 Thunderbird/91.5.1
Subject: Re: [PATCH 22/31] vhost: Add VhostIOVATree
To: =?UTF-8?Q?Eugenio_P=c3=a9rez?= <eperezma@redhat.com>, qemu-devel@nongnu.org
References: <20220121202733.404989-1-eperezma@redhat.com>
 <20220121202733.404989-23-eperezma@redhat.com>
From: Jason Wang <jasowang@redhat.com>
In-Reply-To: <20220121202733.404989-23-eperezma@redhat.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: Laurent Vivier <lvivier@redhat.com>, Parav Pandit <parav@mellanox.com>,
 Cindy Lu <lulu@redhat.com>, "Michael S. Tsirkin" <mst@redhat.com>,
 Richard Henderson <richard.henderson@linaro.org>,
 Markus Armbruster <armbru@redhat.com>, Gautam Dawar <gdawar@xilinx.com>,
 virtualization@lists.linux-foundation.org,
 Eduardo Habkost <ehabkost@redhat.com>,
 Harpreet Singh Anand <hanand@xilinx.com>, Xiao W Wang <xiao.w.wang@intel.com>,
 Stefan Hajnoczi <stefanha@redhat.com>, Eli Cohen <eli@mellanox.com>,
 Paolo Bonzini <pbonzini@redhat.com>, Zhu Lingshan <lingshan.zhu@intel.com>,
 Eric Blake <eblake@redhat.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CuWcqCAyMDIyLzEvMjIg5LiK5Y2INDoyNywgRXVnZW5pbyBQw6lyZXog5YaZ6YGTOgo+IFRoaXMg
dHJlZSBpcyBhYmxlIHRvIGxvb2sgZm9yIGEgdHJhbnNsYXRlZCBhZGRyZXNzIGZyb20gYW4gSU9W
QSBhZGRyZXNzLgo+Cj4gQXQgZmlyc3QgZ2xhbmNlIGl0IGlzIHNpbWlsYXIgdG8gdXRpbC9pb3Zh
LXRyZWUuIEhvd2V2ZXIsIFNWUSB3b3JraW5nIG9uCj4gZGV2aWNlcyB3aXRoIGxpbWl0ZWQgSU9W
QSBzcGFjZSBuZWVkIG1vcmUgY2FwYWJpbGl0aWVzLAoKClNvIGRpZCB0aGUgSU9WQSB0cmVlIChl
LmcgbDIgdnRkIGNhbiBvbmx5IHdvcmsgaW4gdGhlIHJhbmdlIG9mIEdBVyBhbmQgCndpdGhvdXQg
Uk1SUnMpLgoKCj4gICBsaWtlIGFsbG9jYXRpbmcKPiBJT1ZBIGNodW5rcyBvciBwZXJmb3JtaW5n
IHJldmVyc2UgdHJhbnNsYXRpb25zIChxZW11IGFkZHJlc3NlcyB0byBpb3ZhKS4KCgpUaGlzIGxv
b2tzIGxpa2UgYSBnZW5lcmFsIHJlcXVlc3QgYXMgd2VsbC4gU28gSSB3b25kZXIgaWYgd2UgY2Fu
IHNpbXBseSAKZXh0ZW5kIGlvdmEgdHJlZSBpbnN0ZWFkLgoKVGhhbmtzCgoKPgo+IFRoZSBhbGxv
Y2F0aW9uIGNhcGFiaWxpdHksIGFzICJhc3NpZ24gYSBmcmVlIElPVkEgYWRkcmVzcyB0byB0aGlz
IGNodW5rCj4gb2YgbWVtb3J5IGluIHFlbXUncyBhZGRyZXNzIHNwYWNlIiBhbGxvd3Mgc2hhZG93
IHZpcnRxdWV1ZSB0byBjcmVhdGUgYQo+IG5ldyBhZGRyZXNzIHNwYWNlIHRoYXQgaXMgbm90IHJl
c3RyaWN0ZWQgYnkgZ3Vlc3QncyBhZGRyZXNzYWJsZSBvbmUsIHNvCj4gd2UgY2FuIGFsbG9jYXRl
IHNoYWRvdyB2cXMgdnJpbmdzIG91dHNpZGUgb2YgaXQuCj4KPiBJdCBkdXBsaWNhdGVzIHRoZSB0
cmVlIHNvIGl0IGNhbiBzZWFyY2ggZWZmaWNpZW50bHkgYm90aCBkaXJlY3Rpb25zLAo+IGFuZCBp
dCB3aWxsIHNpZ25hbCBvdmVybGFwIGlmIGlvdmEgb3IgdGhlIHRyYW5zbGF0ZWQgYWRkcmVzcyBp
cwo+IHByZXNlbnQgaW4gYW55IHRyZWUuCj4KPiBTaWduZWQtb2ZmLWJ5OiBFdWdlbmlvIFDDqXJl
eiA8ZXBlcmV6bWFAcmVkaGF0LmNvbT4KPiAtLS0KPiAgIGh3L3ZpcnRpby92aG9zdC1pb3ZhLXRy
ZWUuaCB8ICAyNyArKysrKysrCj4gICBody92aXJ0aW8vdmhvc3QtaW92YS10cmVlLmMgfCAxNTcg
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCj4gICBody92aXJ0aW8vbWVzb24u
YnVpbGQgICAgICAgfCAgIDIgKy0KPiAgIDMgZmlsZXMgY2hhbmdlZCwgMTg1IGluc2VydGlvbnMo
KyksIDEgZGVsZXRpb24oLSkKPiAgIGNyZWF0ZSBtb2RlIDEwMDY0NCBody92aXJ0aW8vdmhvc3Qt
aW92YS10cmVlLmgKPiAgIGNyZWF0ZSBtb2RlIDEwMDY0NCBody92aXJ0aW8vdmhvc3QtaW92YS10
cmVlLmMKPgo+IGRpZmYgLS1naXQgYS9ody92aXJ0aW8vdmhvc3QtaW92YS10cmVlLmggYi9ody92
aXJ0aW8vdmhvc3QtaW92YS10cmVlLmgKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAw
MDAwMDAwMDAuLjYxMDM5NGVhZjEKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIvaHcvdmlydGlvL3Zo
b3N0LWlvdmEtdHJlZS5oCj4gQEAgLTAsMCArMSwyNyBAQAo+ICsvKgo+ICsgKiB2aG9zdCBzb2Z0
d2FyZSBsaXZlIG1pZ3JhdGlvbiByaW5nCj4gKyAqCj4gKyAqIFNQRFgtRmlsZUNvcHlyaWdodFRl
eHQ6IFJlZCBIYXQsIEluYy4gMjAyMQo+ICsgKiBTUERYLUZpbGVDb250cmlidXRvcjogQXV0aG9y
OiBFdWdlbmlvIFDDqXJleiA8ZXBlcmV6bWFAcmVkaGF0LmNvbT4KPiArICoKPiArICogU1BEWC1M
aWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKPiArICovCj4gKwo+ICsjaWZuZGVm
IEhXX1ZJUlRJT19WSE9TVF9JT1ZBX1RSRUVfSAo+ICsjZGVmaW5lIEhXX1ZJUlRJT19WSE9TVF9J
T1ZBX1RSRUVfSAo+ICsKPiArI2luY2x1ZGUgInFlbXUvaW92YS10cmVlLmgiCj4gKyNpbmNsdWRl
ICJleGVjL21lbW9yeS5oIgo+ICsKPiArdHlwZWRlZiBzdHJ1Y3QgVmhvc3RJT1ZBVHJlZSBWaG9z
dElPVkFUcmVlOwo+ICsKPiArVmhvc3RJT1ZBVHJlZSAqdmhvc3RfaW92YV90cmVlX25ldyh1aW50
NjRfdCBpb3ZhX2ZpcnN0LCB1aW50NjRfdCBpb3ZhX2xhc3QpOwo+ICt2b2lkIHZob3N0X2lvdmFf
dHJlZV9kZWxldGUoVmhvc3RJT1ZBVHJlZSAqaW92YV90cmVlKTsKPiArR19ERUZJTkVfQVVUT1BU
Ul9DTEVBTlVQX0ZVTkMoVmhvc3RJT1ZBVHJlZSwgdmhvc3RfaW92YV90cmVlX2RlbGV0ZSk7Cj4g
Kwo+ICtjb25zdCBETUFNYXAgKnZob3N0X2lvdmFfdHJlZV9maW5kX2lvdmEoY29uc3QgVmhvc3RJ
T1ZBVHJlZSAqaW92YV90cmVlLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgY29uc3QgRE1BTWFwICptYXApOwo+ICtpbnQgdmhvc3RfaW92YV90cmVlX21hcF9hbGxv
YyhWaG9zdElPVkFUcmVlICppb3ZhX3RyZWUsIERNQU1hcCAqbWFwKTsKPiArdm9pZCB2aG9zdF9p
b3ZhX3RyZWVfcmVtb3ZlKFZob3N0SU9WQVRyZWUgKmlvdmFfdHJlZSwgY29uc3QgRE1BTWFwICpt
YXApOwo+ICsKPiArI2VuZGlmCj4gZGlmZiAtLWdpdCBhL2h3L3ZpcnRpby92aG9zdC1pb3ZhLXRy
ZWUuYyBiL2h3L3ZpcnRpby92aG9zdC1pb3ZhLXRyZWUuYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0
Cj4gaW5kZXggMDAwMDAwMDAwMC4uMDAyMWRiYWY1NAo+IC0tLSAvZGV2L251bGwKPiArKysgYi9o
dy92aXJ0aW8vdmhvc3QtaW92YS10cmVlLmMKPiBAQCAtMCwwICsxLDE1NyBAQAo+ICsvKgo+ICsg
KiB2aG9zdCBzb2Z0d2FyZSBsaXZlIG1pZ3JhdGlvbiByaW5nCj4gKyAqCj4gKyAqIFNQRFgtRmls
ZUNvcHlyaWdodFRleHQ6IFJlZCBIYXQsIEluYy4gMjAyMQo+ICsgKiBTUERYLUZpbGVDb250cmli
dXRvcjogQXV0aG9yOiBFdWdlbmlvIFDDqXJleiA8ZXBlcmV6bWFAcmVkaGF0LmNvbT4KPiArICoK
PiArICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKPiArICovCj4g
Kwo+ICsjaW5jbHVkZSAicWVtdS9vc2RlcC5oIgo+ICsjaW5jbHVkZSAicWVtdS9pb3ZhLXRyZWUu
aCIKPiArI2luY2x1ZGUgInZob3N0LWlvdmEtdHJlZS5oIgo+ICsKPiArI2RlZmluZSBpb3ZhX21p
bl9hZGRyIHFlbXVfcmVhbF9ob3N0X3BhZ2Vfc2l6ZQo+ICsKPiArLyoqCj4gKyAqIFZob3N0SU9W
QVRyZWUsIGFibGUgdG86Cj4gKyAqIC0gVHJhbnNsYXRlIGlvdmEgYWRkcmVzcwo+ICsgKiAtIFJl
dmVyc2UgdHJhbnNsYXRlIGlvdmEgYWRkcmVzcyAoZnJvbSB0cmFuc2xhdGVkIHRvIGlvdmEpCj4g
KyAqIC0gQWxsb2NhdGUgSU9WQSByZWdpb25zIGZvciB0cmFuc2xhdGVkIHJhbmdlIChwb3RlbnRp
YWxseSBzbG93IG9wZXJhdGlvbikKPiArICoKPiArICogTm90ZSB0aGF0IGl0IGNhbm5vdCByZW1v
dmUgbm9kZXMuCj4gKyAqLwo+ICtzdHJ1Y3QgVmhvc3RJT1ZBVHJlZSB7Cj4gKyAgICAvKiBGaXJz
dCBhZGRyZXNhYmxlIGlvdmEgYWRkcmVzcyBpbiB0aGUgZGV2aWNlICovCj4gKyAgICB1aW50NjRf
dCBpb3ZhX2ZpcnN0Owo+ICsKPiArICAgIC8qIExhc3QgYWRkcmVzc2FibGUgaW92YSBhZGRyZXNz
IGluIHRoZSBkZXZpY2UgKi8KPiArICAgIHVpbnQ2NF90IGlvdmFfbGFzdDsKPiArCj4gKyAgICAv
KiBJT1ZBIGFkZHJlc3MgdG8gcWVtdSBtZW1vcnkgbWFwcy4gKi8KPiArICAgIElPVkFUcmVlICpp
b3ZhX3RhZGRyX21hcDsKPiArCj4gKyAgICAvKiBRRU1VIHZpcnR1YWwgbWVtb3J5IGFkZHJlc3Mg
dG8gaW92YSBtYXBzICovCj4gKyAgICBHVHJlZSAqdGFkZHJfaW92YV9tYXA7Cj4gK307Cj4gKwo+
ICtzdGF0aWMgZ2ludCB2aG9zdF9pb3ZhX3RyZWVfY21wX3RhZGRyKGdjb25zdHBvaW50ZXIgYSwg
Z2NvbnN0cG9pbnRlciBiLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGdwb2ludGVyIGRhdGEpCj4gK3sKPiArICAgIGNvbnN0IERNQU1hcCAqbTEgPSBhLCAqbTIgPSBi
Owo+ICsKPiArICAgIGlmIChtMS0+dHJhbnNsYXRlZF9hZGRyID4gbTItPnRyYW5zbGF0ZWRfYWRk
ciArIG0yLT5zaXplKSB7Cj4gKyAgICAgICAgcmV0dXJuIDE7Cj4gKyAgICB9Cj4gKwo+ICsgICAg
aWYgKG0xLT50cmFuc2xhdGVkX2FkZHIgKyBtMS0+c2l6ZSA8IG0yLT50cmFuc2xhdGVkX2FkZHIp
IHsKPiArICAgICAgICByZXR1cm4gLTE7Cj4gKyAgICB9Cj4gKwo+ICsgICAgLyogT3ZlcmxhcHBl
ZCAqLwo+ICsgICAgcmV0dXJuIDA7Cj4gK30KPiArCj4gKy8qKgo+ICsgKiBDcmVhdGUgYSBuZXcg
SU9WQSB0cmVlCj4gKyAqCj4gKyAqIFJldHVybnMgdGhlIG5ldyBJT1ZBIHRyZWUKPiArICovCj4g
K1Zob3N0SU9WQVRyZWUgKnZob3N0X2lvdmFfdHJlZV9uZXcoaHdhZGRyIGlvdmFfZmlyc3QsIGh3
YWRkciBpb3ZhX2xhc3QpCj4gK3sKPiArICAgIFZob3N0SU9WQVRyZWUgKnRyZWUgPSBnX25ldyhW
aG9zdElPVkFUcmVlLCAxKTsKPiArCj4gKyAgICAvKiBTb21lIGRldmljZXMgZG9lcyBub3QgbGlr
ZSAwIGFkZHJlc3NlcyAqLwo+ICsgICAgdHJlZS0+aW92YV9maXJzdCA9IE1BWChpb3ZhX2ZpcnN0
LCBpb3ZhX21pbl9hZGRyKTsKPiArICAgIHRyZWUtPmlvdmFfbGFzdCA9IGlvdmFfbGFzdDsKPiAr
Cj4gKyAgICB0cmVlLT5pb3ZhX3RhZGRyX21hcCA9IGlvdmFfdHJlZV9uZXcoKTsKPiArICAgIHRy
ZWUtPnRhZGRyX2lvdmFfbWFwID0gZ190cmVlX25ld19mdWxsKHZob3N0X2lvdmFfdHJlZV9jbXBf
dGFkZHIsIE5VTEwsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBOVUxMLCBnX2ZyZWUpOwo+ICsgICAgcmV0dXJuIHRyZWU7Cj4gK30KPiArCj4gKy8qKgo+ICsg
KiBEZWxldGUgYW4gaW92YSB0cmVlCj4gKyAqLwo+ICt2b2lkIHZob3N0X2lvdmFfdHJlZV9kZWxl
dGUoVmhvc3RJT1ZBVHJlZSAqaW92YV90cmVlKQo+ICt7Cj4gKyAgICBpb3ZhX3RyZWVfZGVzdHJv
eShpb3ZhX3RyZWUtPmlvdmFfdGFkZHJfbWFwKTsKPiArICAgIGdfdHJlZV91bnJlZihpb3ZhX3Ry
ZWUtPnRhZGRyX2lvdmFfbWFwKTsKPiArICAgIGdfZnJlZShpb3ZhX3RyZWUpOwo+ICt9Cj4gKwo+
ICsvKioKPiArICogRmluZCB0aGUgSU9WQSBhZGRyZXNzIHN0b3JlZCBmcm9tIGEgbWVtb3J5IGFk
ZHJlc3MKPiArICoKPiArICogQHRyZWUgICAgIFRoZSBpb3ZhIHRyZWUKPiArICogQG1hcCAgICAg
IFRoZSBtYXAgd2l0aCB0aGUgbWVtb3J5IGFkZHJlc3MKPiArICoKPiArICogUmV0dXJuIHRoZSBz
dG9yZWQgbWFwcGluZywgb3IgTlVMTCBpZiBub3QgZm91bmQuCj4gKyAqLwo+ICtjb25zdCBETUFN
YXAgKnZob3N0X2lvdmFfdHJlZV9maW5kX2lvdmEoY29uc3QgVmhvc3RJT1ZBVHJlZSAqdHJlZSwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IERNQU1hcCAq
bWFwKQo+ICt7Cj4gKyAgICByZXR1cm4gZ190cmVlX2xvb2t1cCh0cmVlLT50YWRkcl9pb3ZhX21h
cCwgbWFwKTsKPiArfQo+ICsKPiArLyoqCj4gKyAqIEFsbG9jYXRlIGEgbmV3IG1hcHBpbmcKPiAr
ICoKPiArICogQHRyZWUgIFRoZSBpb3ZhIHRyZWUKPiArICogQG1hcCAgIFRoZSBpb3ZhIG1hcAo+
ICsgKgo+ICsgKiBSZXR1cm5zOgo+ICsgKiAtIElPVkFfT0sgaWYgdGhlIG1hcCBmaXRzIGluIHRo
ZSBjb250YWluZXIKPiArICogLSBJT1ZBX0VSUl9JTlZBTElEIGlmIHRoZSBtYXAgZG9lcyBub3Qg
bWFrZSBzZW5zZSAobGlrZSBzaXplIG92ZXJmbG93KQo+ICsgKiAtIElPVkFfRVJSX09WRVJMQVAg
aWYgdGhlIHRyZWUgYWxyZWFkeSBjb250YWlucyB0aGF0IG1hcAo+ICsgKiAtIElPVkFfRVJSX05P
TUVNIGlmIHRyZWUgY2Fubm90IGFsbG9jYXRlIG1vcmUgc3BhY2UuCj4gKyAqCj4gKyAqIEl0IHJl
dHVybnMgYXNzaWduYXRlZCBpb3ZhIGluIG1hcC0+aW92YSBpZiByZXR1cm4gdmFsdWUgaXMgVkhP
U1RfRE1BX01BUF9PSy4KPiArICovCj4gK2ludCB2aG9zdF9pb3ZhX3RyZWVfbWFwX2FsbG9jKFZo
b3N0SU9WQVRyZWUgKnRyZWUsIERNQU1hcCAqbWFwKQo+ICt7Cj4gKyAgICAvKiBTb21lIHZob3N0
IGRldmljZXMgZG9lcyBub3QgbGlrZSBhZGRyIDAuIFNraXAgZmlyc3QgcGFnZSAqLwo+ICsgICAg
aHdhZGRyIGlvdmFfZmlyc3QgPSB0cmVlLT5pb3ZhX2ZpcnN0ID86IHFlbXVfcmVhbF9ob3N0X3Bh
Z2Vfc2l6ZTsKPiArICAgIERNQU1hcCAqbmV3Owo+ICsgICAgaW50IHI7Cj4gKwo+ICsgICAgaWYg
KG1hcC0+dHJhbnNsYXRlZF9hZGRyICsgbWFwLT5zaXplIDwgbWFwLT50cmFuc2xhdGVkX2FkZHIg
fHwKPiArICAgICAgICBtYXAtPnBlcm0gPT0gSU9NTVVfTk9ORSkgewo+ICsgICAgICAgIHJldHVy
biBJT1ZBX0VSUl9JTlZBTElEOwo+ICsgICAgfQo+ICsKPiArICAgIC8qIENoZWNrIGZvciBjb2xs
aXNpb25zIGluIHRyYW5zbGF0ZWQgYWRkcmVzc2VzICovCj4gKyAgICBpZiAodmhvc3RfaW92YV90
cmVlX2ZpbmRfaW92YSh0cmVlLCBtYXApKSB7Cj4gKyAgICAgICAgcmV0dXJuIElPVkFfRVJSX09W
RVJMQVA7Cj4gKyAgICB9Cj4gKwo+ICsgICAgLyogQWxsb2NhdGUgYSBub2RlIGluIElPVkEgYWRk
cmVzcyAqLwo+ICsgICAgciA9IGlvdmFfdHJlZV9hbGxvYyh0cmVlLT5pb3ZhX3RhZGRyX21hcCwg
bWFwLCBpb3ZhX2ZpcnN0LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICB0cmVlLT5pb3ZhX2xh
c3QpOwo+ICsgICAgaWYgKHIgIT0gSU9WQV9PSykgewo+ICsgICAgICAgIHJldHVybiByOwo+ICsg
ICAgfQo+ICsKPiArICAgIC8qIEFsbG9jYXRlIG5vZGUgaW4gcWVtdSAtPiBpb3ZhIHRyYW5zbGF0
aW9ucyAqLwo+ICsgICAgbmV3ID0gZ19tYWxsb2Moc2l6ZW9mKCpuZXcpKTsKPiArICAgIG1lbWNw
eShuZXcsIG1hcCwgc2l6ZW9mKCpuZXcpKTsKPiArICAgIGdfdHJlZV9pbnNlcnQodHJlZS0+dGFk
ZHJfaW92YV9tYXAsIG5ldywgbmV3KTsKPiArICAgIHJldHVybiBJT1ZBX09LOwo+ICt9Cj4gKwo+
ICsvKioKPiArICogUmVtb3ZlIGV4aXN0aW5nIG1hcHBpbmdzIGZyb20gaW92YSB0cmVlCj4gKyAq
Cj4gKyAqIEBwYXJhbSAgaW92YV90cmVlICBUaGUgdmhvc3QgaW92YSB0cmVlCj4gKyAqIEBwYXJh
bSAgbWFwICAgICAgICBUaGUgbWFwIHRvIHJlbW92ZQo+ICsgKi8KPiArdm9pZCB2aG9zdF9pb3Zh
X3RyZWVfcmVtb3ZlKFZob3N0SU9WQVRyZWUgKmlvdmFfdHJlZSwgY29uc3QgRE1BTWFwICptYXAp
Cj4gK3sKPiArICAgIGNvbnN0IERNQU1hcCAqb3ZlcmxhcDsKPiArCj4gKyAgICBpb3ZhX3RyZWVf
cmVtb3ZlKGlvdmFfdHJlZS0+aW92YV90YWRkcl9tYXAsIG1hcCk7Cj4gKyAgICB3aGlsZSAoKG92
ZXJsYXAgPSB2aG9zdF9pb3ZhX3RyZWVfZmluZF9pb3ZhKGlvdmFfdHJlZSwgbWFwKSkpIHsKPiAr
ICAgICAgICBnX3RyZWVfcmVtb3ZlKGlvdmFfdHJlZS0+dGFkZHJfaW92YV9tYXAsIG92ZXJsYXAp
Owo+ICsgICAgfQo+ICt9Cj4gZGlmZiAtLWdpdCBhL2h3L3ZpcnRpby9tZXNvbi5idWlsZCBiL2h3
L3ZpcnRpby9tZXNvbi5idWlsZAo+IGluZGV4IDJkYzg3NjEzYmMuLjYwNDc2NzA4MDQgMTAwNjQ0
Cj4gLS0tIGEvaHcvdmlydGlvL21lc29uLmJ1aWxkCj4gKysrIGIvaHcvdmlydGlvL21lc29uLmJ1
aWxkCj4gQEAgLTExLDcgKzExLDcgQEAgc29mdG1tdV9zcy5hZGQod2hlbjogJ0NPTkZJR19BTEwn
LCBpZl90cnVlOiBmaWxlcygndmhvc3Qtc3R1Yi5jJykpCj4gICAKPiAgIHZpcnRpb19zcyA9IHNz
LnNvdXJjZV9zZXQoKQo+ICAgdmlydGlvX3NzLmFkZChmaWxlcygndmlydGlvLmMnKSkKPiAtdmly
dGlvX3NzLmFkZCh3aGVuOiAnQ09ORklHX1ZIT1NUJywgaWZfdHJ1ZTogZmlsZXMoJ3Zob3N0LmMn
LCAndmhvc3QtYmFja2VuZC5jJywgJ3Zob3N0LXNoYWRvdy12aXJ0cXVldWUuYycpKQo+ICt2aXJ0
aW9fc3MuYWRkKHdoZW46ICdDT05GSUdfVkhPU1QnLCBpZl90cnVlOiBmaWxlcygndmhvc3QuYycs
ICd2aG9zdC1iYWNrZW5kLmMnLCAndmhvc3Qtc2hhZG93LXZpcnRxdWV1ZS5jJywgJ3Zob3N0LWlv
dmEtdHJlZS5jJykpCj4gICB2aXJ0aW9fc3MuYWRkKHdoZW46ICdDT05GSUdfVkhPU1RfVVNFUics
IGlmX3RydWU6IGZpbGVzKCd2aG9zdC11c2VyLmMnKSkKPiAgIHZpcnRpb19zcy5hZGQod2hlbjog
J0NPTkZJR19WSE9TVF9WRFBBJywgaWZfdHJ1ZTogZmlsZXMoJ3Zob3N0LXZkcGEuYycpKQo+ICAg
dmlydGlvX3NzLmFkZCh3aGVuOiAnQ09ORklHX1ZJUlRJT19CQUxMT09OJywgaWZfdHJ1ZTogZmls
ZXMoJ3ZpcnRpby1iYWxsb29uLmMnKSkKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlv
bkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlv
bi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
