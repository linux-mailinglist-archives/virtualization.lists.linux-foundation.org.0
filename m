Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from mail.linuxfoundation.org (mail.linuxfoundation.org [140.211.169.12])
	by mail.lfdr.de (Postfix) with ESMTPS id 89574A79E2
	for <lists.virtualization@lfdr.de>; Wed,  4 Sep 2019 06:33:18 +0200 (CEST)
Received: from mail.linux-foundation.org (localhost [127.0.0.1])
	by mail.linuxfoundation.org (Postfix) with ESMTP id 0E58EFE0;
	Wed,  4 Sep 2019 04:33:12 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@mail.linuxfoundation.org
Received: from smtp1.linuxfoundation.org (smtp1.linux-foundation.org
	[172.17.192.35])
	by mail.linuxfoundation.org (Postfix) with ESMTPS id 41515E59
	for <virtualization@lists.linux-foundation.org>;
	Wed,  4 Sep 2019 04:33:11 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by smtp1.linuxfoundation.org (Postfix) with ESMTPS id A79F1709
	for <virtualization@lists.linux-foundation.org>;
	Wed,  4 Sep 2019 04:33:10 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx06.intmail.prod.int.phx2.redhat.com
	[10.5.11.16])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mx1.redhat.com (Postfix) with ESMTPS id 00CA43082E20;
	Wed,  4 Sep 2019 04:33:10 +0000 (UTC)
Received: from [10.72.12.87] (ovpn-12-87.pek2.redhat.com [10.72.12.87])
	by smtp.corp.redhat.com (Postfix) with ESMTP id 95BC75C220;
	Wed,  4 Sep 2019 04:32:58 +0000 (UTC)
Subject: Re: [RFC v3] vhost: introduce mdev based hardware vhost backend
To: Tiwei Bie <tiwei.bie@intel.com>, "Michael S. Tsirkin" <mst@redhat.com>
References: <20190828053712.26106-1-tiwei.bie@intel.com>
	<20190903043704-mutt-send-email-mst@kernel.org>
	<20190904024801.GA5671@___>
From: Jason Wang <jasowang@redhat.com>
Message-ID: <5972f30a-4f01-c953-0785-1c82b20cec58@redhat.com>
Date: Wed, 4 Sep 2019 12:32:56 +0800
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
	Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190904024801.GA5671@___>
Content-Language: en-US
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.16
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
	(mx1.redhat.com [10.5.110.46]);
	Wed, 04 Sep 2019 04:33:10 +0000 (UTC)
X-Spam-Status: No, score=-6.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_HI
	autolearn=ham version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	smtp1.linux-foundation.org
Cc: kvm@vger.kernel.org, netdev@vger.kernel.org, maxime.coquelin@redhat.com,
	virtualization@lists.linux-foundation.org,
	zhihong.wang@intel.com, lingshan.zhu@intel.com,
	linux-kernel@vger.kernel.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.12
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Sender: virtualization-bounces@lists.linux-foundation.org
Errors-To: virtualization-bounces@lists.linux-foundation.org

Ck9uIDIwMTkvOS80IOS4iuWNiDEwOjQ4LCBUaXdlaSBCaWUgd3JvdGU6Cj4gT24gVHVlLCBTZXAg
MDMsIDIwMTkgYXQgMDc6MjY6MDNBTSAtMDQwMCwgTWljaGFlbCBTLiBUc2lya2luIHdyb3RlOgo+
PiBPbiBXZWQsIEF1ZyAyOCwgMjAxOSBhdCAwMTozNzoxMlBNICswODAwLCBUaXdlaSBCaWUgd3Jv
dGU6Cj4+PiBEZXRhaWxzIGFib3V0IHRoaXMgY2FuIGJlIGZvdW5kIGhlcmU6Cj4+Pgo+Pj4gaHR0
cHM6Ly9sd24ubmV0L0FydGljbGVzLzc1MDc3MC8KPj4+Cj4+PiBXaGF0J3MgbmV3IGluIHRoaXMg
dmVyc2lvbgo+Pj4gPT09PT09PT09PT09PT09PT09PT09PT09PT0KPj4+Cj4+PiBUaGVyZSBhcmUg
dGhyZWUgY2hvaWNlcyBiYXNlZCBvbiB0aGUgZGlzY3Vzc2lvbiBbMV0gaW4gUkZDIHYyOgo+Pj4K
Pj4+PiAjMS4gV2UgZXhwb3NlIGEgVkZJTyBkZXZpY2UsIHNvIHdlIGNhbiByZXVzZSB0aGUgVkZJ
TyBjb250YWluZXIvZ3JvdXAKPj4+PiAgICAgIGJhc2VkIERNQSBBUEkgYW5kIHBvdGVudGlhbGx5
IHJldXNlIGEgbG90IG9mIFZGSU8gY29kZSBpbiBRRU1VLgo+Pj4+Cj4+Pj4gICAgICBCdXQgaW4g
dGhpcyBjYXNlLCB3ZSBoYXZlIHR3byBjaG9pY2VzIGZvciB0aGUgVkZJTyBkZXZpY2UgaW50ZXJm
YWNlCj4+Pj4gICAgICAoaS5lLiB0aGUgaW50ZXJmYWNlIG9uIHRvcCBvZiBWRklPIGRldmljZSBm
ZCk6Cj4+Pj4KPj4+PiAgICAgIEEpIHdlIG1heSBpbnZlbnQgYSBuZXcgdmhvc3QgcHJvdG9jb2wg
KGFzIGRlbW9uc3RyYXRlZCBieSB0aGUgY29kZQo+Pj4+ICAgICAgICAgaW4gdGhpcyBSRkMpIG9u
IFZGSU8gZGV2aWNlIGZkIHRvIG1ha2UgaXQgd29yayBpbiBWRklPJ3Mgd2F5LAo+Pj4+ICAgICAg
ICAgaS5lLiByZWdpb25zIGFuZCBpcnFzLgo+Pj4+Cj4+Pj4gICAgICBCKSBPciBhcyB5b3UgcHJv
cG9zZWQsIGluc3RlYWQgb2YgaW52ZW50aW5nIGEgbmV3IHZob3N0IHByb3RvY29sLAo+Pj4+ICAg
ICAgICAgd2UgY2FuIHJldXNlIG1vc3QgZXhpc3Rpbmcgdmhvc3QgaW9jdGxzIG9uIHRoZSBWRklP
IGRldmljZSBmZAo+Pj4+ICAgICAgICAgZGlyZWN0bHkuIFRoZXJlIHNob3VsZCBiZSBubyBjb25m
bGljdHMgYmV0d2VlbiB0aGUgVkZJTyBpb2N0bHMKPj4+PiAgICAgICAgICh0eXBlIGlzIDB4M0Ip
IGFuZCBWSE9TVCBpb2N0bHMgKHR5cGUgaXMgMHhBRikgY3VycmVudGx5Lgo+Pj4+Cj4+Pj4gIzIu
IEluc3RlYWQgb2YgZXhwb3NpbmcgYSBWRklPIGRldmljZSwgd2UgbWF5IGV4cG9zZSBhIFZIT1NU
IGRldmljZS4KPj4+PiAgICAgIEFuZCB3ZSB3aWxsIGludHJvZHVjZSBhIG5ldyBtZGV2IGRyaXZl
ciB2aG9zdC1tZGV2IHRvIGRvIHRoaXMuCj4+Pj4gICAgICBJdCB3b3VsZCBiZSBuYXR1cmFsIHRv
IHJldXNlIHRoZSBleGlzdGluZyBrZXJuZWwgdmhvc3QgaW50ZXJmYWNlCj4+Pj4gICAgICAoaW9j
dGxzKSBvbiBpdCBhcyBtdWNoIGFzIHBvc3NpYmxlLiBCdXQgd2Ugd2lsbCBuZWVkIHRvIGludmVu
dAo+Pj4+ICAgICAgc29tZSBBUElzIGZvciBETUEgcHJvZ3JhbW1pbmcgKHJldXNpbmcgVkhPU1Rf
U0VUX01FTV9UQUJMRSBpcyBhCj4+Pj4gICAgICBjaG9pY2UsIGJ1dCBpdCdzIHRvbyBoZWF2eSBh
bmQgZG9lc24ndCBzdXBwb3J0IHZJT01NVSBieSBpdHNlbGYpLgo+Pj4gVGhpcyB2ZXJzaW9uIGlz
IG1vcmUgbGlrZSBhIHF1aWNrIFBvQyB0byB0cnkgSmFzb24ncyBwcm9wb3NhbCBvbgo+Pj4gcmV1
c2luZyB2aG9zdCBpb2N0bHMuIEFuZCB0aGUgc2Vjb25kIHdheSAoIzEvQikgaW4gYWJvdmUgdGhy
ZWUKPj4+IGNob2ljZXMgd2FzIGNob3NlbiBpbiB0aGlzIHZlcnNpb24gdG8gZGVtb25zdHJhdGUg
dGhlIGlkZWEgcXVpY2tseS4KPj4+Cj4+PiBOb3cgdGhlIHVzZXJzcGFjZSBBUEkgbG9va3MgbGlr
ZSB0aGlzOgo+Pj4KPj4+IC0gVkZJTydzIGNvbnRhaW5lci9ncm91cCBiYXNlZCBJT01NVSBBUEkg
aXMgdXNlZCB0byBkbyB0aGUKPj4+ICAgIERNQSBwcm9ncmFtbWluZy4KPj4+Cj4+PiAtIFZob3N0
J3MgZXhpc3RpbmcgaW9jdGxzIGFyZSB1c2VkIHRvIHNldHVwIHRoZSBkZXZpY2UuCj4+Pgo+Pj4g
QW5kIHRoZSBkZXZpY2Ugd2lsbCByZXBvcnQgZGV2aWNlX2FwaSBhcyAidmZpby12aG9zdCIuCj4+
Pgo+Pj4gTm90ZSB0aGF0LCB0aGVyZSBhcmUgZGlydHkgaGFja3MgaW4gdGhpcyB2ZXJzaW9uLiBJ
ZiB3ZSBkZWNpZGUgdG8KPj4+IGdvIHRoaXMgd2F5LCBzb21lIHJlZmFjdG9yaW5nIGluIHZob3N0
LmMvdmhvc3QuaCBtYXkgYmUgbmVlZGVkLgo+Pj4KPj4+IFBTLiBUaGUgZGlyZWN0IG1hcHBpbmcg
b2YgdGhlIG5vdGlmeSByZWdpc3RlcnMgaXNuJ3QgaW1wbGVtZW50ZWQKPj4+ICAgICAgaW4gdGhp
cyB2ZXJzaW9uLgo+Pj4KPj4+IFsxXSBodHRwczovL2xrbWwub3JnL2xrbWwvMjAxOS83LzkvMTAx
Cj4+Pgo+Pj4gU2lnbmVkLW9mZi1ieTogVGl3ZWkgQmllIDx0aXdlaS5iaWVAaW50ZWwuY29tPgo+
PiAuLi4uCj4+Cj4+PiArbG9uZyB2aG9zdF9tZGV2X2lvY3RsKHN0cnVjdCBtZGV2X2RldmljZSAq
bWRldiwgdW5zaWduZWQgaW50IGNtZCwKPj4+ICsJCSAgICAgIHVuc2lnbmVkIGxvbmcgYXJnKQo+
Pj4gK3sKPj4+ICsJdm9pZCBfX3VzZXIgKmFyZ3AgPSAodm9pZCBfX3VzZXIgKilhcmc7Cj4+PiAr
CXN0cnVjdCB2aG9zdF9tZGV2ICp2ZHBhOwo+Pj4gKwl1bnNpZ25lZCBsb25nIG1pbnN6Owo+Pj4g
KwlpbnQgcmV0ID0gMDsKPj4+ICsKPj4+ICsJaWYgKCFtZGV2KQo+Pj4gKwkJcmV0dXJuIC1FSU5W
QUw7Cj4+PiArCj4+PiArCXZkcGEgPSBtZGV2X2dldF9kcnZkYXRhKG1kZXYpOwo+Pj4gKwlpZiAo
IXZkcGEpCj4+PiArCQlyZXR1cm4gLUVOT0RFVjsKPj4+ICsKPj4+ICsJc3dpdGNoIChjbWQpIHsK
Pj4+ICsJY2FzZSBWRklPX0RFVklDRV9HRVRfSU5GTzoKPj4+ICsJewo+Pj4gKwkJc3RydWN0IHZm
aW9fZGV2aWNlX2luZm8gaW5mbzsKPj4+ICsKPj4+ICsJCW1pbnN6ID0gb2Zmc2V0b2ZlbmQoc3Ry
dWN0IHZmaW9fZGV2aWNlX2luZm8sIG51bV9pcnFzKTsKPj4+ICsKPj4+ICsJCWlmIChjb3B5X2Zy
b21fdXNlcigmaW5mbywgKHZvaWQgX191c2VyICopYXJnLCBtaW5zeikpIHsKPj4+ICsJCQlyZXQg
PSAtRUZBVUxUOwo+Pj4gKwkJCWJyZWFrOwo+Pj4gKwkJfQo+Pj4gKwo+Pj4gKwkJaWYgKGluZm8u
YXJnc3ogPCBtaW5zeikgewo+Pj4gKwkJCXJldCA9IC1FSU5WQUw7Cj4+PiArCQkJYnJlYWs7Cj4+
PiArCQl9Cj4+PiArCj4+PiArCQlpbmZvLmZsYWdzID0gVkZJT19ERVZJQ0VfRkxBR1NfVkhPU1Q7
Cj4+PiArCQlpbmZvLm51bV9yZWdpb25zID0gMDsKPj4+ICsJCWluZm8ubnVtX2lycXMgPSAwOwo+
Pj4gKwo+Pj4gKwkJaWYgKGNvcHlfdG9fdXNlcigodm9pZCBfX3VzZXIgKilhcmcsICZpbmZvLCBt
aW5zeikpIHsKPj4+ICsJCQlyZXQgPSAtRUZBVUxUOwo+Pj4gKwkJCWJyZWFrOwo+Pj4gKwkJfQo+
Pj4gKwo+Pj4gKwkJYnJlYWs7Cj4+PiArCX0KPj4+ICsJY2FzZSBWRklPX0RFVklDRV9HRVRfUkVH
SU9OX0lORk86Cj4+PiArCWNhc2UgVkZJT19ERVZJQ0VfR0VUX0lSUV9JTkZPOgo+Pj4gKwljYXNl
IFZGSU9fREVWSUNFX1NFVF9JUlFTOgo+Pj4gKwljYXNlIFZGSU9fREVWSUNFX1JFU0VUOgo+Pj4g
KwkJcmV0ID0gLUVJTlZBTDsKPj4+ICsJCWJyZWFrOwo+Pj4gKwo+Pj4gKwljYXNlIFZIT1NUX01E
RVZfU0VUX1NUQVRFOgo+Pj4gKwkJcmV0ID0gdmhvc3Rfc2V0X3N0YXRlKHZkcGEsIGFyZ3ApOwo+
Pj4gKwkJYnJlYWs7Cj4+PiArCWNhc2UgVkhPU1RfR0VUX0ZFQVRVUkVTOgo+Pj4gKwkJcmV0ID0g
dmhvc3RfZ2V0X2ZlYXR1cmVzKHZkcGEsIGFyZ3ApOwo+Pj4gKwkJYnJlYWs7Cj4+PiArCWNhc2Ug
VkhPU1RfU0VUX0ZFQVRVUkVTOgo+Pj4gKwkJcmV0ID0gdmhvc3Rfc2V0X2ZlYXR1cmVzKHZkcGEs
IGFyZ3ApOwo+Pj4gKwkJYnJlYWs7Cj4+PiArCWNhc2UgVkhPU1RfR0VUX1ZSSU5HX0JBU0U6Cj4+
PiArCQlyZXQgPSB2aG9zdF9nZXRfdnJpbmdfYmFzZSh2ZHBhLCBhcmdwKTsKPj4+ICsJCWJyZWFr
Owo+Pj4gKwlkZWZhdWx0Ogo+Pj4gKwkJcmV0ID0gdmhvc3RfZGV2X2lvY3RsKCZ2ZHBhLT5kZXYs
IGNtZCwgYXJncCk7Cj4+PiArCQlpZiAocmV0ID09IC1FTk9JT0NUTENNRCkKPj4+ICsJCQlyZXQg
PSB2aG9zdF92cmluZ19pb2N0bCgmdmRwYS0+ZGV2LCBjbWQsIGFyZ3ApOwo+Pj4gKwl9Cj4+PiAr
Cj4+PiArCXJldHVybiByZXQ7Cj4+PiArfQo+Pj4gK0VYUE9SVF9TWU1CT0wodmhvc3RfbWRldl9p
b2N0bCk7Cj4+Cj4+IEkgZG9uJ3QgaGF2ZSBhIHByb2JsZW0gd2l0aCB0aGlzIGFwcHJvYWNoLiBB
IHNtYWxsIHF1ZXN0aW9uOgo+PiB3b3VsZCBpdCBtYWtlIHNlbnNlIHRvIGhhdmUgdHdvIGZkczog
c2VuZCB2aG9zdCBpb2N0bHMKPj4gb24gb25lIGFuZCB2ZmlvIGlvY3RscyBvbiBhbm90aGVyPwo+
PiBXZSBjYW4gdGhlbiBwYXNzIHZmaW8gZmQgdG8gdGhlIHZob3N0IGZkIHdpdGggYQo+PiBTRVRf
QkFDS0VORCBpb2N0bC4KPj4KPj4gV2hhdCBkbyB5b3UgdGhpbms/Cj4gSSBsaWtlIHRoaXMgaWRl
YSEgSSB3aWxsIGdpdmUgaXQgYSB0cnkuCj4gU28gd2UgY2FuIGludHJvZHVjZSAvZGV2L3Zob3N0
LW1kZXYgdG8gaGF2ZSB0aGUgdmhvc3QgZmQsCgoKWW91IHN0aWxsIG5lZWQgdG8gdGhpbmsgYWJv
dXQgaG93IHRvIGNvbm5lY3QgaXQgdG8gY3VycmVudCBzeXNmcyBiYXNlZCAKbWRldiBtYW5hZ2Vt
ZW50IGludGVyZmFjZSwgb3IgeW91IHdhbnQgdG8gaW52ZW50IGFub3RoZXIgQVBJLCBvciBqdXN0
IAp1c2UgdGhlIC9kZXYvdmhvc3QtbmV0IGJ1dCBwYXNzIHZmaW8gZmQgdGhyb3VnaCBpb2N0bCB0
byB0aGUgZmlsZS4KClRoYW5rcwoKCj4gICBhbmQgbGV0Cj4gdXNlcnNwYWNlIHBhc3MgdmZpbyBm
ZCB0byB0aGUgdmhvc3QgZmQgd2l0aCBhIFNFVF9CQUNLRU5EIGlvY3RsLgo+Cj4gVGhhbmtzIGEg
bG90IQo+IFRpd2VpCj4KPj4gLS0gCj4+IE1TVApfX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fXwpWaXJ0dWFsaXphdGlvbiBtYWlsaW5nIGxpc3QKVmlydHVhbGl6
YXRpb25AbGlzdHMubGludXgtZm91bmRhdGlvbi5vcmcKaHR0cHM6Ly9saXN0cy5saW51eGZvdW5k
YXRpb24ub3JnL21haWxtYW4vbGlzdGluZm8vdmlydHVhbGl6YXRpb24=
