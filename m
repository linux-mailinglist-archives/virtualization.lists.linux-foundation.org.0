Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
	by mail.lfdr.de (Postfix) with ESMTPS id 73A8D7CEFF0
	for <lists.virtualization@lfdr.de>; Thu, 19 Oct 2023 08:14:52 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp4.osuosl.org (Postfix) with ESMTP id 0F75840001;
	Thu, 19 Oct 2023 06:14:50 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 0F75840001
Authentication-Results: smtp4.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=AlqhRM3q
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
	by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id w4TzWufja93D; Thu, 19 Oct 2023 06:14:48 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp4.osuosl.org (Postfix) with ESMTPS id D64584267E;
	Thu, 19 Oct 2023 06:14:47 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org D64584267E
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 2857CC0DD3;
	Thu, 19 Oct 2023 06:14:47 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [IPv6:2605:bc80:3010::137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id DB728C0032
 for <virtualization@lists.linux-foundation.org>;
 Thu, 19 Oct 2023 06:14:45 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id B152142692
 for <virtualization@lists.linux-foundation.org>;
 Thu, 19 Oct 2023 06:14:45 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org B152142692
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 5FdS3YnH2Dw3
 for <virtualization@lists.linux-foundation.org>;
 Thu, 19 Oct 2023 06:14:44 +0000 (UTC)
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp4.osuosl.org (Postfix) with ESMTPS id EABF54267E
 for <virtualization@lists.linux-foundation.org>;
 Thu, 19 Oct 2023 06:14:43 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org EABF54267E
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1697696083;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=LaoX9q6thKlB+2I1d+DCIncQXMpQXvV56vmw4EL+YqE=;
 b=AlqhRM3qj+h+t01QdDsnPrLVKu1saIFRwQOeiD0AiZFzx6N2cFc6+a8qeor1S//96Q8SxB
 KVCc31QCo1Xbuc3N95lWrh0AXLA4TW51lsFdDeYt/Irk6vCGppTykOLIOnTR7718yoaXtM
 9ec1FvFwBxTtNLSKT76tznSty3NCLGE=
Received: from mail-lj1-f199.google.com (mail-lj1-f199.google.com
 [209.85.208.199]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-668-oZbBJuN9OW2JB3wOhZDyzw-1; Thu, 19 Oct 2023 02:14:40 -0400
X-MC-Unique: oZbBJuN9OW2JB3wOhZDyzw-1
Received: by mail-lj1-f199.google.com with SMTP id
 38308e7fff4ca-2c520e0a9a7so40152831fa.3
 for <virtualization@lists.linux-foundation.org>;
 Wed, 18 Oct 2023 23:14:40 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1697696079; x=1698300879;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=LaoX9q6thKlB+2I1d+DCIncQXMpQXvV56vmw4EL+YqE=;
 b=WJRSFkb4ToRT9GObXvxJO2dHbIdgcmWAo6hfr0SCkw6znVDcItJ3I6AAtEYGsK5DMm
 o3owyvVW9xnTH+DNB8aWYP+pFpEhfi+1GVk9PuJyAwXnuE6dyoSybSXkbPiD2/YitWpc
 BbjqwzlGfWu5Q1duHujSVLx6gIBjEg61DYe5CQKAyWuGrvWE8cG0BramgOJVylUbeYWU
 tg8Xt5JUT0ff1Igpjq9bDFgONFy19Zq+IUvYGpJMRgi9PkpoiSf3TMEbyeZVVad1kzM4
 74S7c0AhJwzvLk2tcPzO1s8cmJoMK7HNpYBmaROlL5FPFaqnJM/2UNDjbmclIbTsQk2d
 WIVw==
X-Gm-Message-State: AOJu0Ywl6dhpY+Pg/gYfAe4Af9s0zAtFt+G631H3Th/TrSLqJhKaJcCy
 Uy9FYm5nQGkL5azAU+5gkRgiCHMSR2UZJrJVvKpZXJ7BMc7GEXF9v67V10cdlUMhDP52HDXVd9U
 hurGpnJGy09T5mi4l/zd0B6NIrBL4cj3hu3WJOsDI59Wuq2PTMEZb8ZSNew==
X-Received: by 2002:a05:651c:504:b0:2c1:375a:b37c with SMTP id
 o4-20020a05651c050400b002c1375ab37cmr641278ljp.40.1697696079168; 
 Wed, 18 Oct 2023 23:14:39 -0700 (PDT)
X-Google-Smtp-Source: AGHT+IGBTT2NYXRh+ikFuqxWTl27ffuH4vUMzVfxcxXtJwXaHCwNGlO3S5qn+SOdMBy2fmayTRTyUnd1rLTyH1rnC0E=
X-Received: by 2002:a05:651c:504:b0:2c1:375a:b37c with SMTP id
 o4-20020a05651c050400b002c1375ab37cmr641265ljp.40.1697696078563; Wed, 18 Oct
 2023 23:14:38 -0700 (PDT)
MIME-Version: 1.0
References: <20231016120033.26933-1-xuanzhuo@linux.alibaba.com>
 <20231016120033.26933-6-xuanzhuo@linux.alibaba.com>
In-Reply-To: <20231016120033.26933-6-xuanzhuo@linux.alibaba.com>
From: Jason Wang <jasowang@redhat.com>
Date: Thu, 19 Oct 2023 14:14:27 +0800
Message-ID: <CACGkMEvQvyjxX7PKVtTjMMtQNX3PzuviL=sA5sMftEToduZ5RA@mail.gmail.com>
Subject: Re: [PATCH net-next v1 05/19] virtio_net: add prefix virtnet to all
 struct/api inside virtio_net.h
To: Xuan Zhuo <xuanzhuo@linux.alibaba.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: Jesper Dangaard Brouer <hawk@kernel.org>,
 Daniel Borkmann <daniel@iogearbox.net>, "Michael S. Tsirkin" <mst@redhat.com>,
 netdev@vger.kernel.org, John Fastabend <john.fastabend@gmail.com>,
 Alexei Starovoitov <ast@kernel.org>, virtualization@lists.linux-foundation.org,
 Eric Dumazet <edumazet@google.com>, Jakub Kicinski <kuba@kernel.org>,
 bpf@vger.kernel.org, Paolo Abeni <pabeni@redhat.com>,
 "David S. Miller" <davem@davemloft.net>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gTW9uLCBPY3QgMTYsIDIwMjMgYXQgODowMeKAr1BNIFh1YW4gWmh1byA8eHVhbnpodW9AbGlu
dXguYWxpYmFiYS5jb20+IHdyb3RlOgo+Cj4gV2UgbW92ZSBzb21lIHN0cnVjdHVyZXMgYW5kIEFQ
SXMgdG8gdGhlIGhlYWRlciBmaWxlLCBidXQgdGhlc2UKPiBzdHJ1Y3R1cmVzIGFuZCBBUElzIGRv
IG5vdCBwcmVmaXhlZCB3aXRoIHZpcnRuZXQuIFRoaXMgcGF0Y2ggYWRkcwo+IHZpcnRuZXQgZm9y
IHRoZXNlLgoKV2hhdCdzIHRoZSBiZW5lZml0IG9mIGRvaW5nIHRoaXM/IEFGQUlLIHZpcnRpby1u
ZXQgaXMgdGhlIG9ubHkgdXNlcgpmb3IgdmlydGlvLW5ldC5oPwoKVEhhbmtzCgo+Cj4gU2lnbmVk
LW9mZi1ieTogWHVhbiBaaHVvIDx4dWFuemh1b0BsaW51eC5hbGliYWJhLmNvbT4KPiAtLS0KPiAg
ZHJpdmVycy9uZXQvdmlydGlvL21haW4uYyAgICAgICB8IDEyMiArKysrKysrKysrKysrKysrLS0t
LS0tLS0tLS0tLS0tLQo+ICBkcml2ZXJzL25ldC92aXJ0aW8vdmlydGlvX25ldC5oIHwgIDMwICsr
KystLS0tCj4gIDIgZmlsZXMgY2hhbmdlZCwgNzYgaW5zZXJ0aW9ucygrKSwgNzYgZGVsZXRpb25z
KC0pCj4KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvdmlydGlvL21haW4uYyBiL2RyaXZlcnMv
bmV0L3ZpcnRpby9tYWluLmMKPiBpbmRleCBkOGI2YzBkODZmMjkuLmJhMzhiNjA3OGUxZCAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL25ldC92aXJ0aW8vbWFpbi5jCj4gKysrIGIvZHJpdmVycy9uZXQv
dmlydGlvL21haW4uYwo+IEBAIC0xODAsNyArMTgwLDcgQEAgc2tiX3ZuZXRfY29tbW9uX2hkcihz
dHJ1Y3Qgc2tfYnVmZiAqc2tiKQo+ICAgKiBwcml2YXRlIGlzIHVzZWQgdG8gY2hhaW4gcGFnZXMg
Zm9yIGJpZyBwYWNrZXRzLCBwdXQgdGhlIHdob2xlCj4gICAqIG1vc3QgcmVjZW50IHVzZWQgbGlz
dCBpbiB0aGUgYmVnaW5uaW5nIGZvciByZXVzZQo+ICAgKi8KPiAtc3RhdGljIHZvaWQgZ2l2ZV9w
YWdlcyhzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEsIHN0cnVjdCBwYWdlICpwYWdlKQo+ICtzdGF0
aWMgdm9pZCBnaXZlX3BhZ2VzKHN0cnVjdCB2aXJ0bmV0X3JxICpycSwgc3RydWN0IHBhZ2UgKnBh
Z2UpCj4gIHsKPiAgICAgICAgIHN0cnVjdCBwYWdlICplbmQ7Cj4KPiBAQCAtMTkwLDcgKzE5MCw3
IEBAIHN0YXRpYyB2b2lkIGdpdmVfcGFnZXMoc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxLCBzdHJ1
Y3QgcGFnZSAqcGFnZSkKPiAgICAgICAgIHJxLT5wYWdlcyA9IHBhZ2U7Cj4gIH0KPgo+IC1zdGF0
aWMgc3RydWN0IHBhZ2UgKmdldF9hX3BhZ2Uoc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxLCBnZnBf
dCBnZnBfbWFzaykKPiArc3RhdGljIHN0cnVjdCBwYWdlICpnZXRfYV9wYWdlKHN0cnVjdCB2aXJ0
bmV0X3JxICpycSwgZ2ZwX3QgZ2ZwX21hc2spCj4gIHsKPiAgICAgICAgIHN0cnVjdCBwYWdlICpw
ID0gcnEtPnBhZ2VzOwo+Cj4gQEAgLTIyNSw3ICsyMjUsNyBAQCBzdGF0aWMgdm9pZCB2aXJ0cXVl
dWVfbmFwaV9jb21wbGV0ZShzdHJ1Y3QgbmFwaV9zdHJ1Y3QgKm5hcGksCj4gICAgICAgICBvcGFx
dWUgPSB2aXJ0cXVldWVfZW5hYmxlX2NiX3ByZXBhcmUodnEpOwo+ICAgICAgICAgaWYgKG5hcGlf
Y29tcGxldGVfZG9uZShuYXBpLCBwcm9jZXNzZWQpKSB7Cj4gICAgICAgICAgICAgICAgIGlmICh1
bmxpa2VseSh2aXJ0cXVldWVfcG9sbCh2cSwgb3BhcXVlKSkpCj4gLSAgICAgICAgICAgICAgICAg
ICAgICAgdmlydHF1ZXVlX25hcGlfc2NoZWR1bGUobmFwaSwgdnEpOwo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIHZpcnRuZXRfdnFfbmFwaV9zY2hlZHVsZShuYXBpLCB2cSk7Cj4gICAgICAgICB9
IGVsc2Ugewo+ICAgICAgICAgICAgICAgICB2aXJ0cXVldWVfZGlzYWJsZV9jYih2cSk7Cj4gICAg
ICAgICB9Cj4gQEAgLTI0MCw3ICsyNDAsNyBAQCBzdGF0aWMgdm9pZCBza2JfeG1pdF9kb25lKHN0
cnVjdCB2aXJ0cXVldWUgKnZxKQo+ICAgICAgICAgdmlydHF1ZXVlX2Rpc2FibGVfY2IodnEpOwo+
Cj4gICAgICAgICBpZiAobmFwaS0+d2VpZ2h0KQo+IC0gICAgICAgICAgICAgICB2aXJ0cXVldWVf
bmFwaV9zY2hlZHVsZShuYXBpLCB2cSk7Cj4gKyAgICAgICAgICAgICAgIHZpcnRuZXRfdnFfbmFw
aV9zY2hlZHVsZShuYXBpLCB2cSk7Cj4gICAgICAgICBlbHNlCj4gICAgICAgICAgICAgICAgIC8q
IFdlIHdlcmUgcHJvYmFibHkgd2FpdGluZyBmb3IgbW9yZSBvdXRwdXQgYnVmZmVycy4gKi8KPiAg
ICAgICAgICAgICAgICAgbmV0aWZfd2FrZV9zdWJxdWV1ZSh2aS0+ZGV2LCB2cTJ0eHEodnEpKTsK
PiBAQCAtMjgxLDcgKzI4MSw3IEBAIHN0YXRpYyBzdHJ1Y3Qgc2tfYnVmZiAqdmlydG5ldF9idWls
ZF9za2Iodm9pZCAqYnVmLCB1bnNpZ25lZCBpbnQgYnVmbGVuLAo+Cj4gIC8qIENhbGxlZCBmcm9t
IGJvdHRvbSBoYWxmIGNvbnRleHQgKi8KPiAgc3RhdGljIHN0cnVjdCBza19idWZmICpwYWdlX3Rv
X3NrYihzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X3JxICpycSwKPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHN0cnVjdCBwYWdlICpwYWdlLCB1bnNpZ25lZCBpbnQgb2Zmc2V0
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGxlbiwg
dW5zaWduZWQgaW50IHRydWVzaXplLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdW5zaWduZWQgaW50IGhlYWRyb29tKQo+IEBAIC0zODAsNyArMzgwLDcgQEAgc3RhdGljIHN0
cnVjdCBza19idWZmICpwYWdlX3RvX3NrYihzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwKPiAgICAg
ICAgIHJldHVybiBza2I7Cj4gIH0KPgo+IC1zdGF0aWMgdm9pZCB2aXJ0bmV0X3JxX3VubWFwKHN0
cnVjdCByZWNlaXZlX3F1ZXVlICpycSwgdm9pZCAqYnVmLCB1MzIgbGVuKQo+ICtzdGF0aWMgdm9p
ZCB2aXJ0bmV0X3JxX3VubWFwKHN0cnVjdCB2aXJ0bmV0X3JxICpycSwgdm9pZCAqYnVmLCB1MzIg
bGVuKQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgcGFnZSAqcGFnZSA9IHZpcnRfdG9faGVhZF9wYWdl
KGJ1Zik7Cj4gICAgICAgICBzdHJ1Y3QgdmlydG5ldF9ycV9kbWEgKmRtYTsKPiBAQCAtNDA5LDcg
KzQwOSw3IEBAIHN0YXRpYyB2b2lkIHZpcnRuZXRfcnFfdW5tYXAoc3RydWN0IHJlY2VpdmVfcXVl
dWUgKnJxLCB2b2lkICpidWYsIHUzMiBsZW4pCj4gICAgICAgICBwdXRfcGFnZShwYWdlKTsKPiAg
fQo+Cj4gLXN0YXRpYyB2b2lkICp2aXJ0bmV0X3JxX2dldF9idWYoc3RydWN0IHJlY2VpdmVfcXVl
dWUgKnJxLCB1MzIgKmxlbiwgdm9pZCAqKmN0eCkKPiArc3RhdGljIHZvaWQgKnZpcnRuZXRfcnFf
Z2V0X2J1ZihzdHJ1Y3QgdmlydG5ldF9ycSAqcnEsIHUzMiAqbGVuLCB2b2lkICoqY3R4KQo+ICB7
Cj4gICAgICAgICB2b2lkICpidWY7Cj4KPiBAQCAtNDIwLDcgKzQyMCw3IEBAIHN0YXRpYyB2b2lk
ICp2aXJ0bmV0X3JxX2dldF9idWYoc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxLCB1MzIgKmxlbiwg
dm9pZCAqKmN0eCkKPiAgICAgICAgIHJldHVybiBidWY7Cj4gIH0KPgo+IC1zdGF0aWMgdm9pZCAq
dmlydG5ldF9ycV9kZXRhY2hfdW51c2VkX2J1ZihzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEpCj4g
K3N0YXRpYyB2b2lkICp2aXJ0bmV0X3JxX2RldGFjaF91bnVzZWRfYnVmKHN0cnVjdCB2aXJ0bmV0
X3JxICpycSkKPiAgewo+ICAgICAgICAgdm9pZCAqYnVmOwo+Cj4gQEAgLTQzMSw3ICs0MzEsNyBA
QCBzdGF0aWMgdm9pZCAqdmlydG5ldF9ycV9kZXRhY2hfdW51c2VkX2J1ZihzdHJ1Y3QgcmVjZWl2
ZV9xdWV1ZSAqcnEpCj4gICAgICAgICByZXR1cm4gYnVmOwo+ICB9Cj4KPiAtc3RhdGljIHZvaWQg
dmlydG5ldF9ycV9pbml0X29uZV9zZyhzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEsIHZvaWQgKmJ1
ZiwgdTMyIGxlbikKPiArc3RhdGljIHZvaWQgdmlydG5ldF9ycV9pbml0X29uZV9zZyhzdHJ1Y3Qg
dmlydG5ldF9ycSAqcnEsIHZvaWQgKmJ1ZiwgdTMyIGxlbikKPiAgewo+ICAgICAgICAgc3RydWN0
IHZpcnRuZXRfcnFfZG1hICpkbWE7Cj4gICAgICAgICBkbWFfYWRkcl90IGFkZHI7Cj4gQEAgLTQ1
Niw3ICs0NTYsNyBAQCBzdGF0aWMgdm9pZCB2aXJ0bmV0X3JxX2luaXRfb25lX3NnKHN0cnVjdCBy
ZWNlaXZlX3F1ZXVlICpycSwgdm9pZCAqYnVmLCB1MzIgbGVuKQo+ICAgICAgICAgcnEtPnNnWzBd
Lmxlbmd0aCA9IGxlbjsKPiAgfQo+Cj4gLXN0YXRpYyB2b2lkICp2aXJ0bmV0X3JxX2FsbG9jKHN0
cnVjdCByZWNlaXZlX3F1ZXVlICpycSwgdTMyIHNpemUsIGdmcF90IGdmcCkKPiArc3RhdGljIHZv
aWQgKnZpcnRuZXRfcnFfYWxsb2Moc3RydWN0IHZpcnRuZXRfcnEgKnJxLCB1MzIgc2l6ZSwgZ2Zw
X3QgZ2ZwKQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgcGFnZV9mcmFnICphbGxvY19mcmFnID0gJnJx
LT5hbGxvY19mcmFnOwo+ICAgICAgICAgc3RydWN0IHZpcnRuZXRfcnFfZG1hICpkbWE7Cj4gQEAg
LTUzMCwxMSArNTMwLDExIEBAIHN0YXRpYyB2b2lkIHZpcnRuZXRfcnFfc2V0X3ByZW1hcHBlZChz
dHJ1Y3QgdmlydG5ldF9pbmZvICp2aSkKPiAgICAgICAgIH0KPiAgfQo+Cj4gLXN0YXRpYyB2b2lk
IGZyZWVfb2xkX3htaXQoc3RydWN0IHNlbmRfcXVldWUgKnNxLCBib29sIGluX25hcGkpCj4gK3N0
YXRpYyB2b2lkIGZyZWVfb2xkX3htaXQoc3RydWN0IHZpcnRuZXRfc3EgKnNxLCBib29sIGluX25h
cGkpCj4gIHsKPiAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X3NxX3N0YXRzIHN0YXRzID0ge307Cj4K
PiAtICAgICAgIF9fZnJlZV9vbGRfeG1pdChzcSwgaW5fbmFwaSwgJnN0YXRzKTsKPiArICAgICAg
IHZpcnRuZXRfZnJlZV9vbGRfeG1pdChzcSwgaW5fbmFwaSwgJnN0YXRzKTsKPgo+ICAgICAgICAg
LyogQXZvaWQgb3ZlcmhlYWQgd2hlbiBubyBwYWNrZXRzIGhhdmUgYmVlbiBwcm9jZXNzZWQKPiAg
ICAgICAgICAqIGhhcHBlbnMgd2hlbiBjYWxsZWQgc3BlY3VsYXRpdmVseSBmcm9tIHN0YXJ0X3ht
aXQuCj4gQEAgLTU1MCw3ICs1NTAsNyBAQCBzdGF0aWMgdm9pZCBmcmVlX29sZF94bWl0KHN0cnVj
dCBzZW5kX3F1ZXVlICpzcSwgYm9vbCBpbl9uYXBpKQo+Cj4gIHN0YXRpYyB2b2lkIGNoZWNrX3Nx
X2Z1bGxfYW5kX2Rpc2FibGUoc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHNlbmRfcXVldWUgKnNxKQo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRuZXRfc3Eg
KnNxKQo+ICB7Cj4gICAgICAgICBib29sIHVzZV9uYXBpID0gc3EtPm5hcGkud2VpZ2h0Owo+ICAg
ICAgICAgaW50IHFudW07Cj4gQEAgLTU3MSw3ICs1NzEsNyBAQCBzdGF0aWMgdm9pZCBjaGVja19z
cV9mdWxsX2FuZF9kaXNhYmxlKHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLAo+ICAgICAgICAgICAg
ICAgICBuZXRpZl9zdG9wX3N1YnF1ZXVlKGRldiwgcW51bSk7Cj4gICAgICAgICAgICAgICAgIGlm
ICh1c2VfbmFwaSkgewo+ICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmxpa2VseSghdmly
dHF1ZXVlX2VuYWJsZV9jYl9kZWxheWVkKHNxLT52cSkpKQo+IC0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdmlydHF1ZXVlX25hcGlfc2NoZWR1bGUoJnNxLT5uYXBpLCBzcS0+dnEpOwo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlydG5ldF92cV9uYXBpX3NjaGVkdWxl
KCZzcS0+bmFwaSwgc3EtPnZxKTsKPiAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1bmxpa2Vs
eSghdmlydHF1ZXVlX2VuYWJsZV9jYl9kZWxheWVkKHNxLT52cSkpKSB7Cj4gICAgICAgICAgICAg
ICAgICAgICAgICAgLyogTW9yZSBqdXN0IGdvdCB1c2VkLCBmcmVlIHRoZW0gdGhlbiByZWNoZWNr
LiAqLwo+ICAgICAgICAgICAgICAgICAgICAgICAgIGZyZWVfb2xkX3htaXQoc3EsIGZhbHNlKTsK
PiBAQCAtNTg0LDcgKzU4NCw3IEBAIHN0YXRpYyB2b2lkIGNoZWNrX3NxX2Z1bGxfYW5kX2Rpc2Fi
bGUoc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksCj4gIH0KPgo+ICBzdGF0aWMgaW50IF9fdmlydG5l
dF94ZHBfeG1pdF9vbmUoc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksCj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzdHJ1Y3Qgc2VuZF9xdWV1ZSAqc3EsCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydG5ldF9zcSAqc3EsCj4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgeGRwX2ZyYW1lICp4ZHBmKQo+ICB7Cj4g
ICAgICAgICBzdHJ1Y3QgdmlydGlvX25ldF9oZHJfbXJnX3J4YnVmICpoZHI7Cj4gQEAgLTY3NCw5
ICs2NzQsOSBAQCBzdGF0aWMgaW50IHZpcnRuZXRfeGRwX3htaXQoc3RydWN0IG5ldF9kZXZpY2Ug
KmRldiwKPiAgewo+ICAgICAgICAgc3RydWN0IHZpcnRuZXRfaW5mbyAqdmkgPSBuZXRkZXZfcHJp
dihkZXYpOwo+ICAgICAgICAgc3RydWN0IHZpcnRuZXRfc3Ffc3RhdHMgc3RhdHMgPSB7fTsKPiAt
ICAgICAgIHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSA9IHZpLT5ycTsKPiArICAgICAgIHN0cnVj
dCB2aXJ0bmV0X3JxICpycSA9IHZpLT5ycTsKPiAgICAgICAgIHN0cnVjdCBicGZfcHJvZyAqeGRw
X3Byb2c7Cj4gLSAgICAgICBzdHJ1Y3Qgc2VuZF9xdWV1ZSAqc3E7Cj4gKyAgICAgICBzdHJ1Y3Qg
dmlydG5ldF9zcSAqc3E7Cj4gICAgICAgICBpbnQgbnhtaXQgPSAwOwo+ICAgICAgICAgaW50IGtp
Y2tzID0gMDsKPiAgICAgICAgIGludCByZXQ7Cj4gQEAgLTY5Nyw3ICs2OTcsNyBAQCBzdGF0aWMg
aW50IHZpcnRuZXRfeGRwX3htaXQoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiAgICAgICAgIH0K
Pgo+ICAgICAgICAgLyogRnJlZSB1cCBhbnkgcGVuZGluZyBvbGQgYnVmZmVycyBiZWZvcmUgcXVl
dWVpbmcgbmV3IG9uZXMuICovCj4gLSAgICAgICBfX2ZyZWVfb2xkX3htaXQoc3EsIGZhbHNlLCAm
c3RhdHMpOwo+ICsgICAgICAgdmlydG5ldF9mcmVlX29sZF94bWl0KHNxLCBmYWxzZSwgJnN0YXRz
KTsKPgo+ICAgICAgICAgZm9yIChpID0gMDsgaSA8IG47IGkrKykgewo+ICAgICAgICAgICAgICAg
ICBzdHJ1Y3QgeGRwX2ZyYW1lICp4ZHBmID0gZnJhbWVzW2ldOwo+IEBAIC03MDgsNyArNzA4LDcg
QEAgc3RhdGljIGludCB2aXJ0bmV0X3hkcF94bWl0KHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4g
ICAgICAgICB9Cj4gICAgICAgICByZXQgPSBueG1pdDsKPgo+IC0gICAgICAgaWYgKCFpc194ZHBf
cmF3X2J1ZmZlcl9xdWV1ZSh2aSwgc3EgLSB2aS0+c3EpKQo+ICsgICAgICAgaWYgKCF2aXJ0bmV0
X2lzX3hkcF9yYXdfYnVmZmVyX3F1ZXVlKHZpLCBzcSAtIHZpLT5zcSkpCj4gICAgICAgICAgICAg
ICAgIGNoZWNrX3NxX2Z1bGxfYW5kX2Rpc2FibGUodmksIGRldiwgc3EpOwo+Cj4gICAgICAgICBp
ZiAoZmxhZ3MgJiBYRFBfWE1JVF9GTFVTSCkgewo+IEBAIC04MTYsNyArODE2LDcgQEAgc3RhdGlj
IHVuc2lnbmVkIGludCB2aXJ0bmV0X2dldF9oZWFkcm9vbShzdHJ1Y3QgdmlydG5ldF9pbmZvICp2
aSkKPiAgICogYWNyb3NzIG11bHRpcGxlIGJ1ZmZlcnMgKG51bV9idWYgPiAxKSwgYW5kIHdlIG1h
a2Ugc3VyZSBidWZmZXJzCj4gICAqIGhhdmUgZW5vdWdoIGhlYWRyb29tLgo+ICAgKi8KPiAtc3Rh
dGljIHN0cnVjdCBwYWdlICp4ZHBfbGluZWFyaXplX3BhZ2Uoc3RydWN0IHJlY2VpdmVfcXVldWUg
KnJxLAo+ICtzdGF0aWMgc3RydWN0IHBhZ2UgKnhkcF9saW5lYXJpemVfcGFnZShzdHJ1Y3Qgdmly
dG5ldF9ycSAqcnEsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50
ICpudW1fYnVmLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVj
dCBwYWdlICpwLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBv
ZmZzZXQsCj4gQEAgLTg5Nyw3ICs4OTcsNyBAQCBzdGF0aWMgc3RydWN0IHNrX2J1ZmYgKnJlY2Vp
dmVfc21hbGxfYnVpbGRfc2tiKHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLAo+Cj4gIHN0YXRpYyBz
dHJ1Y3Qgc2tfYnVmZiAqcmVjZWl2ZV9zbWFsbF94ZHAoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwK
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0bmV0
X2luZm8gKnZpLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ry
dWN0IHJlY2VpdmVfcXVldWUgKnJxLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc3RydWN0IHZpcnRuZXRfcnEgKnJxLAo+ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc3RydWN0IGJwZl9wcm9nICp4ZHBfcHJvZywKPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKmJ1ZiwKPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCB4ZHBfaGVhZHJvb20sCj4g
QEAgLTk4NCw3ICs5ODQsNyBAQCBzdGF0aWMgc3RydWN0IHNrX2J1ZmYgKnJlY2VpdmVfc21hbGxf
eGRwKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4KPiAgc3RhdGljIHN0cnVjdCBza19idWZmICpy
ZWNlaXZlX3NtYWxsKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLAo+IC0gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEsCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X3JxICpycSwK
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAqYnVmLCB2b2lkICpj
dHgsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBs
ZW4sCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCAq
eGRwX3htaXQsCj4gQEAgLTEwMzEsNyArMTAzMSw3IEBAIHN0YXRpYyBzdHJ1Y3Qgc2tfYnVmZiAq
cmVjZWl2ZV9zbWFsbChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+Cj4gIHN0YXRpYyBzdHJ1Y3Qg
c2tfYnVmZiAqcmVjZWl2ZV9iaWcoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwKPiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLAo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxLAo+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRuZXRfcnEgKnJx
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAqYnVmLAo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGxlbiwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X3JxX3N0YXRzICpzdGF0
cykKPiBAQCAtMTA1Miw3ICsxMDUyLDcgQEAgc3RhdGljIHN0cnVjdCBza19idWZmICpyZWNlaXZl
X2JpZyhzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LAo+ICAgICAgICAgcmV0dXJuIE5VTEw7Cj4gIH0K
Pgo+IC1zdGF0aWMgdm9pZCBtZXJnZWFibGVfYnVmX2ZyZWUoc3RydWN0IHJlY2VpdmVfcXVldWUg
KnJxLCBpbnQgbnVtX2J1ZiwKPiArc3RhdGljIHZvaWQgbWVyZ2VhYmxlX2J1Zl9mcmVlKHN0cnVj
dCB2aXJ0bmV0X3JxICpycSwgaW50IG51bV9idWYsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCB2aXJ0bmV0X3JxX3N0YXRzICpzdGF0cykKPiAgewo+IEBAIC0xMTI2LDcg
KzExMjYsNyBAQCBzdGF0aWMgc3RydWN0IHNrX2J1ZmYgKmJ1aWxkX3NrYl9mcm9tX3hkcF9idWZm
KHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4gIC8qIFRPRE86IGJ1aWxkIHhkcCBpbiBiaWcgbW9k
ZSAqLwo+ICBzdGF0aWMgaW50IHZpcnRuZXRfYnVpbGRfeGRwX2J1ZmZfbXJnKHN0cnVjdCBuZXRf
ZGV2aWNlICpkZXYsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1
Y3QgdmlydG5ldF9pbmZvICp2aSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X3JxICpycSwKPiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHN0cnVjdCB4ZHBfYnVmZiAqeGRwLAo+ICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAqYnVmLAo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGxlbiwKPiBAQCAtMTIxNCw3ICsxMjE0LDcg
QEAgc3RhdGljIGludCB2aXJ0bmV0X2J1aWxkX3hkcF9idWZmX21yZyhzdHJ1Y3QgbmV0X2Rldmlj
ZSAqZGV2LAo+ICB9Cj4KPiAgc3RhdGljIHZvaWQgKm1lcmdlYWJsZV94ZHBfZ2V0X2J1ZihzdHJ1
Y3QgdmlydG5ldF9pbmZvICp2aSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCB2aXJ0bmV0X3JxICpycSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHN0cnVjdCBicGZfcHJvZyAqeGRwX3Byb2csCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB2b2lkICpjdHgsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1bnNpZ25lZCBpbnQgKmZyYW1lX3N6LAo+IEBAIC0xMjg5LDcgKzEyODksNyBAQCBz
dGF0aWMgdm9pZCAqbWVyZ2VhYmxlX3hkcF9nZXRfYnVmKHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZp
LAo+Cj4gIHN0YXRpYyBzdHJ1Y3Qgc2tfYnVmZiAqcmVjZWl2ZV9tZXJnZWFibGVfeGRwKHN0cnVj
dCBuZXRfZGV2aWNlICpkZXYsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksCj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxLAo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X3Jx
ICpycSwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1
Y3QgYnBmX3Byb2cgKnhkcF9wcm9nLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHZvaWQgKmJ1ZiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB2b2lkICpjdHgsCj4gQEAgLTEzNDksNyArMTM0OSw3IEBAIHN0YXRpYyBz
dHJ1Y3Qgc2tfYnVmZiAqcmVjZWl2ZV9tZXJnZWFibGVfeGRwKHN0cnVjdCBuZXRfZGV2aWNlICpk
ZXYsCj4KPiAgc3RhdGljIHN0cnVjdCBza19idWZmICpyZWNlaXZlX21lcmdlYWJsZShzdHJ1Y3Qg
bmV0X2RldmljZSAqZGV2LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydG5ldF9ycSAqcnEsCj4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkICpidWYsCj4gICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkICpjdHgsCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgbGVuLAo+IEBAIC0xNDk0
LDcgKzE0OTQsNyBAQCBzdGF0aWMgdm9pZCB2aXJ0aW9fc2tiX3NldF9oYXNoKGNvbnN0IHN0cnVj
dCB2aXJ0aW9fbmV0X2hkcl92MV9oYXNoICpoZHJfaGFzaCwKPiAgICAgICAgIHNrYl9zZXRfaGFz
aChza2IsIF9fbGUzMl90b19jcHUoaGRyX2hhc2gtPmhhc2hfdmFsdWUpLCByc3NfaGFzaF90eXBl
KTsKPiAgfQo+Cj4gLXN0YXRpYyB2b2lkIHJlY2VpdmVfYnVmKHN0cnVjdCB2aXJ0bmV0X2luZm8g
KnZpLCBzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEsCj4gK3N0YXRpYyB2b2lkIHJlY2VpdmVfYnVm
KHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLCBzdHJ1Y3QgdmlydG5ldF9ycSAqcnEsCj4gICAgICAg
ICAgICAgICAgICAgICAgICAgdm9pZCAqYnVmLCB1bnNpZ25lZCBpbnQgbGVuLCB2b2lkICoqY3R4
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCAqeGRwX3htaXQsCj4gICAg
ICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRuZXRfcnFfc3RhdHMgKnN0YXRzKQo+IEBA
IC0xNTU0LDcgKzE1NTQsNyBAQCBzdGF0aWMgdm9pZCByZWNlaXZlX2J1ZihzdHJ1Y3QgdmlydG5l
dF9pbmZvICp2aSwgc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxLAo+ICAgKiBub3QgbmVlZCB0byB1
c2UgIG1lcmdlYWJsZV9sZW5fdG9fY3R4IGhlcmUgLSBpdCBpcyBlbm91Z2gKPiAgICogdG8gc3Rv
cmUgdGhlIGhlYWRyb29tIGFzIHRoZSBjb250ZXh0IGlnbm9yaW5nIHRoZSB0cnVlc2l6ZS4KPiAg
ICovCj4gLXN0YXRpYyBpbnQgYWRkX3JlY3ZidWZfc21hbGwoc3RydWN0IHZpcnRuZXRfaW5mbyAq
dmksIHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwKPiArc3RhdGljIGludCBhZGRfcmVjdmJ1Zl9z
bWFsbChzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwgc3RydWN0IHZpcnRuZXRfcnEgKnJxLAo+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2ZwX3QgZ2ZwKQo+ICB7Cj4gICAgICAgICBjaGFy
ICpidWY7Cj4gQEAgLTE1ODMsNyArMTU4Myw3IEBAIHN0YXRpYyBpbnQgYWRkX3JlY3ZidWZfc21h
bGwoc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksIHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwKPiAg
ICAgICAgIHJldHVybiBlcnI7Cj4gIH0KPgo+IC1zdGF0aWMgaW50IGFkZF9yZWN2YnVmX2JpZyhz
dHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwgc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxLAo+ICtzdGF0
aWMgaW50IGFkZF9yZWN2YnVmX2JpZyhzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwgc3RydWN0IHZp
cnRuZXRfcnEgKnJxLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdmcF90IGdmcCkKPiAg
ewo+ICAgICAgICAgc3RydWN0IHBhZ2UgKmZpcnN0LCAqbGlzdCA9IE5VTEw7Cj4gQEAgLTE2MzIs
NyArMTYzMiw3IEBAIHN0YXRpYyBpbnQgYWRkX3JlY3ZidWZfYmlnKHN0cnVjdCB2aXJ0bmV0X2lu
Zm8gKnZpLCBzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEsCj4gICAgICAgICByZXR1cm4gZXJyOwo+
ICB9Cj4KPiAtc3RhdGljIHVuc2lnbmVkIGludCBnZXRfbWVyZ2VhYmxlX2J1Zl9sZW4oc3RydWN0
IHJlY2VpdmVfcXVldWUgKnJxLAo+ICtzdGF0aWMgdW5zaWduZWQgaW50IGdldF9tZXJnZWFibGVf
YnVmX2xlbihzdHJ1Y3QgdmlydG5ldF9ycSAqcnEsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc3RydWN0IGV3bWFfcGt0X2xlbiAqYXZnX3BrdF9sZW4sCj4gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IHJvb20p
Cj4gIHsKPiBAQCAtMTY1MCw3ICsxNjUwLDcgQEAgc3RhdGljIHVuc2lnbmVkIGludCBnZXRfbWVy
Z2VhYmxlX2J1Zl9sZW4oc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxLAo+ICB9Cj4KPiAgc3RhdGlj
IGludCBhZGRfcmVjdmJ1Zl9tZXJnZWFibGUoc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxLCBn
ZnBfdCBnZnApCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRu
ZXRfcnEgKnJxLCBnZnBfdCBnZnApCj4gIHsKPiAgICAgICAgIHN0cnVjdCBwYWdlX2ZyYWcgKmFs
bG9jX2ZyYWcgPSAmcnEtPmFsbG9jX2ZyYWc7Cj4gICAgICAgICB1bnNpZ25lZCBpbnQgaGVhZHJv
b20gPSB2aXJ0bmV0X2dldF9oZWFkcm9vbSh2aSk7Cj4gQEAgLTE3MDUsNyArMTcwNSw3IEBAIHN0
YXRpYyBpbnQgYWRkX3JlY3ZidWZfbWVyZ2VhYmxlKHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLAo+
ICAgKiBiZWZvcmUgd2UncmUgcmVjZWl2aW5nIHBhY2tldHMsIG9yIGZyb20gcmVmaWxsX3dvcmsg
d2hpY2ggaXMKPiAgICogY2FyZWZ1bCB0byBkaXNhYmxlIHJlY2VpdmluZyAodXNpbmcgbmFwaV9k
aXNhYmxlKS4KPiAgICovCj4gLXN0YXRpYyBib29sIHRyeV9maWxsX3JlY3Yoc3RydWN0IHZpcnRu
ZXRfaW5mbyAqdmksIHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSwKPiArc3RhdGljIGJvb2wgdHJ5
X2ZpbGxfcmVjdihzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwgc3RydWN0IHZpcnRuZXRfcnEgKnJx
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2ZwX3QgZ2ZwKQo+ICB7Cj4gICAgICAgICBp
bnQgZXJyOwo+IEBAIC0xNzM3LDkgKzE3MzcsOSBAQCBzdGF0aWMgYm9vbCB0cnlfZmlsbF9yZWN2
KHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpLCBzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEsCj4gIHN0
YXRpYyB2b2lkIHNrYl9yZWN2X2RvbmUoc3RydWN0IHZpcnRxdWV1ZSAqcnZxKQo+ICB7Cj4gICAg
ICAgICBzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSA9IHJ2cS0+dmRldi0+cHJpdjsKPiAtICAgICAg
IHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSA9ICZ2aS0+cnFbdnEycnhxKHJ2cSldOwo+ICsgICAg
ICAgc3RydWN0IHZpcnRuZXRfcnEgKnJxID0gJnZpLT5ycVt2cTJyeHEocnZxKV07Cj4KPiAtICAg
ICAgIHZpcnRxdWV1ZV9uYXBpX3NjaGVkdWxlKCZycS0+bmFwaSwgcnZxKTsKPiArICAgICAgIHZp
cnRuZXRfdnFfbmFwaV9zY2hlZHVsZSgmcnEtPm5hcGksIHJ2cSk7Cj4gIH0KPgo+ICBzdGF0aWMg
dm9pZCB2aXJ0bmV0X25hcGlfZW5hYmxlKHN0cnVjdCB2aXJ0cXVldWUgKnZxLCBzdHJ1Y3QgbmFw
aV9zdHJ1Y3QgKm5hcGkpCj4gQEAgLTE3NTEsNyArMTc1MSw3IEBAIHN0YXRpYyB2b2lkIHZpcnRu
ZXRfbmFwaV9lbmFibGUoc3RydWN0IHZpcnRxdWV1ZSAqdnEsIHN0cnVjdCBuYXBpX3N0cnVjdCAq
bmFwaSkKPiAgICAgICAgICAqIENhbGwgbG9jYWxfYmhfZW5hYmxlIGFmdGVyIHRvIHRyaWdnZXIg
c29mdElSUSBwcm9jZXNzaW5nLgo+ICAgICAgICAgICovCj4gICAgICAgICBsb2NhbF9iaF9kaXNh
YmxlKCk7Cj4gLSAgICAgICB2aXJ0cXVldWVfbmFwaV9zY2hlZHVsZShuYXBpLCB2cSk7Cj4gKyAg
ICAgICB2aXJ0bmV0X3ZxX25hcGlfc2NoZWR1bGUobmFwaSwgdnEpOwo+ICAgICAgICAgbG9jYWxf
YmhfZW5hYmxlKCk7Cj4gIH0KPgo+IEBAIC0xNzg3LDcgKzE3ODcsNyBAQCBzdGF0aWMgdm9pZCBy
ZWZpbGxfd29yayhzdHJ1Y3Qgd29ya19zdHJ1Y3QgKndvcmspCj4gICAgICAgICBpbnQgaTsKPgo+
ICAgICAgICAgZm9yIChpID0gMDsgaSA8IHZpLT5jdXJyX3F1ZXVlX3BhaXJzOyBpKyspIHsKPiAt
ICAgICAgICAgICAgICAgc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxID0gJnZpLT5ycVtpXTsKPiAr
ICAgICAgICAgICAgICAgc3RydWN0IHZpcnRuZXRfcnEgKnJxID0gJnZpLT5ycVtpXTsKPgo+ICAg
ICAgICAgICAgICAgICBuYXBpX2Rpc2FibGUoJnJxLT5uYXBpKTsKPiAgICAgICAgICAgICAgICAg
c3RpbGxfZW1wdHkgPSAhdHJ5X2ZpbGxfcmVjdih2aSwgcnEsIEdGUF9LRVJORUwpOwo+IEBAIC0x
ODAxLDcgKzE4MDEsNyBAQCBzdGF0aWMgdm9pZCByZWZpbGxfd29yayhzdHJ1Y3Qgd29ya19zdHJ1
Y3QgKndvcmspCj4gICAgICAgICB9Cj4gIH0KPgo+IC1zdGF0aWMgaW50IHZpcnRuZXRfcmVjZWl2
ZShzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEsIGludCBidWRnZXQsCj4gK3N0YXRpYyBpbnQgdmly
dG5ldF9yZWNlaXZlKHN0cnVjdCB2aXJ0bmV0X3JxICpycSwgaW50IGJ1ZGdldCwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgKnhkcF94bWl0KQo+ICB7Cj4gICAgICAg
ICBzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSA9IHJxLT52cS0+dmRldi0+cHJpdjsKPiBAQCAtMTg0
OCwxNCArMTg0OCwxNCBAQCBzdGF0aWMgaW50IHZpcnRuZXRfcmVjZWl2ZShzdHJ1Y3QgcmVjZWl2
ZV9xdWV1ZSAqcnEsIGludCBidWRnZXQsCj4gICAgICAgICByZXR1cm4gc3RhdHMucGFja2V0czsK
PiAgfQo+Cj4gLXN0YXRpYyB2b2lkIHZpcnRuZXRfcG9sbF9jbGVhbnR4KHN0cnVjdCByZWNlaXZl
X3F1ZXVlICpycSkKPiArc3RhdGljIHZvaWQgdmlydG5ldF9wb2xsX2NsZWFudHgoc3RydWN0IHZp
cnRuZXRfcnEgKnJxKQo+ICB7Cj4gICAgICAgICBzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSA9IHJx
LT52cS0+dmRldi0+cHJpdjsKPiAgICAgICAgIHVuc2lnbmVkIGludCBpbmRleCA9IHZxMnJ4cShy
cS0+dnEpOwo+IC0gICAgICAgc3RydWN0IHNlbmRfcXVldWUgKnNxID0gJnZpLT5zcVtpbmRleF07
Cj4gKyAgICAgICBzdHJ1Y3QgdmlydG5ldF9zcSAqc3EgPSAmdmktPnNxW2luZGV4XTsKPiAgICAg
ICAgIHN0cnVjdCBuZXRkZXZfcXVldWUgKnR4cSA9IG5ldGRldl9nZXRfdHhfcXVldWUodmktPmRl
diwgaW5kZXgpOwo+Cj4gLSAgICAgICBpZiAoIXNxLT5uYXBpLndlaWdodCB8fCBpc194ZHBfcmF3
X2J1ZmZlcl9xdWV1ZSh2aSwgaW5kZXgpKQo+ICsgICAgICAgaWYgKCFzcS0+bmFwaS53ZWlnaHQg
fHwgdmlydG5ldF9pc194ZHBfcmF3X2J1ZmZlcl9xdWV1ZSh2aSwgaW5kZXgpKQo+ICAgICAgICAg
ICAgICAgICByZXR1cm47Cj4KPiAgICAgICAgIGlmIChfX25ldGlmX3R4X3RyeWxvY2sodHhxKSkg
ewo+IEBAIC0xODc4LDEwICsxODc4LDEwIEBAIHN0YXRpYyB2b2lkIHZpcnRuZXRfcG9sbF9jbGVh
bnR4KHN0cnVjdCByZWNlaXZlX3F1ZXVlICpycSkKPgo+ICBzdGF0aWMgaW50IHZpcnRuZXRfcG9s
bChzdHJ1Y3QgbmFwaV9zdHJ1Y3QgKm5hcGksIGludCBidWRnZXQpCj4gIHsKPiAtICAgICAgIHN0
cnVjdCByZWNlaXZlX3F1ZXVlICpycSA9Cj4gLSAgICAgICAgICAgICAgIGNvbnRhaW5lcl9vZihu
YXBpLCBzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSwgbmFwaSk7Cj4gKyAgICAgICBzdHJ1Y3QgdmlydG5l
dF9ycSAqcnEgPQo+ICsgICAgICAgICAgICAgICBjb250YWluZXJfb2YobmFwaSwgc3RydWN0IHZp
cnRuZXRfcnEsIG5hcGkpOwo+ICAgICAgICAgc3RydWN0IHZpcnRuZXRfaW5mbyAqdmkgPSBycS0+
dnEtPnZkZXYtPnByaXY7Cj4gLSAgICAgICBzdHJ1Y3Qgc2VuZF9xdWV1ZSAqc3E7Cj4gKyAgICAg
ICBzdHJ1Y3QgdmlydG5ldF9zcSAqc3E7Cj4gICAgICAgICB1bnNpZ25lZCBpbnQgcmVjZWl2ZWQ7
Cj4gICAgICAgICB1bnNpZ25lZCBpbnQgeGRwX3htaXQgPSAwOwo+Cj4gQEAgLTE5NzIsMTQgKzE5
NzIsMTQgQEAgc3RhdGljIGludCB2aXJ0bmV0X29wZW4oc3RydWN0IG5ldF9kZXZpY2UgKmRldikK
Pgo+ICBzdGF0aWMgaW50IHZpcnRuZXRfcG9sbF90eChzdHJ1Y3QgbmFwaV9zdHJ1Y3QgKm5hcGks
IGludCBidWRnZXQpCj4gIHsKPiAtICAgICAgIHN0cnVjdCBzZW5kX3F1ZXVlICpzcSA9IGNvbnRh
aW5lcl9vZihuYXBpLCBzdHJ1Y3Qgc2VuZF9xdWV1ZSwgbmFwaSk7Cj4gKyAgICAgICBzdHJ1Y3Qg
dmlydG5ldF9zcSAqc3EgPSBjb250YWluZXJfb2YobmFwaSwgc3RydWN0IHZpcnRuZXRfc3EsIG5h
cGkpOwo+ICAgICAgICAgc3RydWN0IHZpcnRuZXRfaW5mbyAqdmkgPSBzcS0+dnEtPnZkZXYtPnBy
aXY7Cj4gICAgICAgICB1bnNpZ25lZCBpbnQgaW5kZXggPSB2cTJ0eHEoc3EtPnZxKTsKPiAgICAg
ICAgIHN0cnVjdCBuZXRkZXZfcXVldWUgKnR4cTsKPiAgICAgICAgIGludCBvcGFxdWU7Cj4gICAg
ICAgICBib29sIGRvbmU7Cj4KPiAtICAgICAgIGlmICh1bmxpa2VseShpc194ZHBfcmF3X2J1ZmZl
cl9xdWV1ZSh2aSwgaW5kZXgpKSkgewo+ICsgICAgICAgaWYgKHVubGlrZWx5KHZpcnRuZXRfaXNf
eGRwX3Jhd19idWZmZXJfcXVldWUodmksIGluZGV4KSkpIHsKPiAgICAgICAgICAgICAgICAgLyog
V2UgZG9uJ3QgbmVlZCB0byBlbmFibGUgY2IgZm9yIFhEUCAqLwo+ICAgICAgICAgICAgICAgICBu
YXBpX2NvbXBsZXRlX2RvbmUobmFwaSwgMCk7Cj4gICAgICAgICAgICAgICAgIHJldHVybiAwOwo+
IEBAIC0yMDE2LDcgKzIwMTYsNyBAQCBzdGF0aWMgaW50IHZpcnRuZXRfcG9sbF90eChzdHJ1Y3Qg
bmFwaV9zdHJ1Y3QgKm5hcGksIGludCBidWRnZXQpCj4gICAgICAgICByZXR1cm4gMDsKPiAgfQo+
Cj4gLXN0YXRpYyBpbnQgeG1pdF9za2Ioc3RydWN0IHNlbmRfcXVldWUgKnNxLCBzdHJ1Y3Qgc2tf
YnVmZiAqc2tiKQo+ICtzdGF0aWMgaW50IHhtaXRfc2tiKHN0cnVjdCB2aXJ0bmV0X3NxICpzcSwg
c3RydWN0IHNrX2J1ZmYgKnNrYikKPiAgewo+ICAgICAgICAgc3RydWN0IHZpcnRpb19uZXRfaGRy
X21yZ19yeGJ1ZiAqaGRyOwo+ICAgICAgICAgY29uc3QgdW5zaWduZWQgY2hhciAqZGVzdCA9ICgo
c3RydWN0IGV0aGhkciAqKXNrYi0+ZGF0YSktPmhfZGVzdDsKPiBAQCAtMjA2Nyw3ICsyMDY3LDcg
QEAgc3RhdGljIG5ldGRldl90eF90IHN0YXJ0X3htaXQoc3RydWN0IHNrX2J1ZmYgKnNrYiwgc3Ry
dWN0IG5ldF9kZXZpY2UgKmRldikKPiAgewo+ICAgICAgICAgc3RydWN0IHZpcnRuZXRfaW5mbyAq
dmkgPSBuZXRkZXZfcHJpdihkZXYpOwo+ICAgICAgICAgaW50IHFudW0gPSBza2JfZ2V0X3F1ZXVl
X21hcHBpbmcoc2tiKTsKPiAtICAgICAgIHN0cnVjdCBzZW5kX3F1ZXVlICpzcSA9ICZ2aS0+c3Fb
cW51bV07Cj4gKyAgICAgICBzdHJ1Y3QgdmlydG5ldF9zcSAqc3EgPSAmdmktPnNxW3FudW1dOwo+
ICAgICAgICAgaW50IGVycjsKPiAgICAgICAgIHN0cnVjdCBuZXRkZXZfcXVldWUgKnR4cSA9IG5l
dGRldl9nZXRfdHhfcXVldWUoZGV2LCBxbnVtKTsKPiAgICAgICAgIGJvb2wga2ljayA9ICFuZXRk
ZXZfeG1pdF9tb3JlKCk7Cj4gQEAgLTIxMjEsNyArMjEyMSw3IEBAIHN0YXRpYyBuZXRkZXZfdHhf
dCBzdGFydF94bWl0KHN0cnVjdCBza19idWZmICpza2IsIHN0cnVjdCBuZXRfZGV2aWNlICpkZXYp
Cj4gIH0KPgo+ICBzdGF0aWMgaW50IHZpcnRuZXRfcnhfcmVzaXplKHN0cnVjdCB2aXJ0bmV0X2lu
Zm8gKnZpLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHJlY2VpdmVfcXVl
dWUgKnJxLCB1MzIgcmluZ19udW0pCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1
Y3QgdmlydG5ldF9ycSAqcnEsIHUzMiByaW5nX251bSkKPiAgewo+ICAgICAgICAgYm9vbCBydW5u
aW5nID0gbmV0aWZfcnVubmluZyh2aS0+ZGV2KTsKPiAgICAgICAgIGludCBlcnIsIHFpbmRleDsK
PiBAQCAtMjE0NCw3ICsyMTQ0LDcgQEAgc3RhdGljIGludCB2aXJ0bmV0X3J4X3Jlc2l6ZShzdHJ1
Y3QgdmlydG5ldF9pbmZvICp2aSwKPiAgfQo+Cj4gIHN0YXRpYyBpbnQgdmlydG5ldF90eF9yZXNp
emUoc3RydWN0IHZpcnRuZXRfaW5mbyAqdmksCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzdHJ1Y3Qgc2VuZF9xdWV1ZSAqc3EsIHUzMiByaW5nX251bSkKPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X3NxICpzcSwgdTMyIHJpbmdfbnVtKQo+ICB7Cj4g
ICAgICAgICBib29sIHJ1bm5pbmcgPSBuZXRpZl9ydW5uaW5nKHZpLT5kZXYpOwo+ICAgICAgICAg
c3RydWN0IG5ldGRldl9xdWV1ZSAqdHhxOwo+IEBAIC0yMjkwLDggKzIyOTAsOCBAQCBzdGF0aWMg
dm9pZCB2aXJ0bmV0X3N0YXRzKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsCj4KPiAgICAgICAgIGZv
ciAoaSA9IDA7IGkgPCB2aS0+bWF4X3F1ZXVlX3BhaXJzOyBpKyspIHsKPiAgICAgICAgICAgICAg
ICAgdTY0IHRwYWNrZXRzLCB0Ynl0ZXMsIHRlcnJvcnMsIHJwYWNrZXRzLCByYnl0ZXMsIHJkcm9w
czsKPiAtICAgICAgICAgICAgICAgc3RydWN0IHJlY2VpdmVfcXVldWUgKnJxID0gJnZpLT5ycVtp
XTsKPiAtICAgICAgICAgICAgICAgc3RydWN0IHNlbmRfcXVldWUgKnNxID0gJnZpLT5zcVtpXTsK
PiArICAgICAgICAgICAgICAgc3RydWN0IHZpcnRuZXRfcnEgKnJxID0gJnZpLT5ycVtpXTsKPiAr
ICAgICAgICAgICAgICAgc3RydWN0IHZpcnRuZXRfc3EgKnNxID0gJnZpLT5zcVtpXTsKPgo+ICAg
ICAgICAgICAgICAgICBkbyB7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSB1NjRf
c3RhdHNfZmV0Y2hfYmVnaW4oJnNxLT5zdGF0cy5zeW5jcCk7Cj4gQEAgLTI2MDQsOCArMjYwNCw4
IEBAIHN0YXRpYyBpbnQgdmlydG5ldF9zZXRfcmluZ3BhcmFtKHN0cnVjdCBuZXRfZGV2aWNlICpk
ZXYsCj4gIHsKPiAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpID0gbmV0ZGV2X3ByaXYo
ZGV2KTsKPiAgICAgICAgIHUzMiByeF9wZW5kaW5nLCB0eF9wZW5kaW5nOwo+IC0gICAgICAgc3Ry
dWN0IHJlY2VpdmVfcXVldWUgKnJxOwo+IC0gICAgICAgc3RydWN0IHNlbmRfcXVldWUgKnNxOwo+
ICsgICAgICAgc3RydWN0IHZpcnRuZXRfcnEgKnJxOwo+ICsgICAgICAgc3RydWN0IHZpcnRuZXRf
c3EgKnNxOwo+ICAgICAgICAgaW50IGksIGVycjsKPgo+ICAgICAgICAgaWYgKHJpbmctPnJ4X21p
bmlfcGVuZGluZyB8fCByaW5nLT5yeF9qdW1ib19wZW5kaW5nKQo+IEBAIC0yOTA5LDcgKzI5MDks
NyBAQCBzdGF0aWMgdm9pZCB2aXJ0bmV0X2dldF9ldGh0b29sX3N0YXRzKHN0cnVjdCBuZXRfZGV2
aWNlICpkZXYsCj4gICAgICAgICBzaXplX3Qgb2Zmc2V0Owo+Cj4gICAgICAgICBmb3IgKGkgPSAw
OyBpIDwgdmktPmN1cnJfcXVldWVfcGFpcnM7IGkrKykgewo+IC0gICAgICAgICAgICAgICBzdHJ1
Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEgPSAmdmktPnJxW2ldOwo+ICsgICAgICAgICAgICAgICBzdHJ1
Y3QgdmlydG5ldF9ycSAqcnEgPSAmdmktPnJxW2ldOwo+Cj4gICAgICAgICAgICAgICAgIHN0YXRz
X2Jhc2UgPSAodTggKikmcnEtPnN0YXRzOwo+ICAgICAgICAgICAgICAgICBkbyB7Cj4gQEAgLTI5
MjMsNyArMjkyMyw3IEBAIHN0YXRpYyB2b2lkIHZpcnRuZXRfZ2V0X2V0aHRvb2xfc3RhdHMoc3Ry
dWN0IG5ldF9kZXZpY2UgKmRldiwKPiAgICAgICAgIH0KPgo+ICAgICAgICAgZm9yIChpID0gMDsg
aSA8IHZpLT5jdXJyX3F1ZXVlX3BhaXJzOyBpKyspIHsKPiAtICAgICAgICAgICAgICAgc3RydWN0
IHNlbmRfcXVldWUgKnNxID0gJnZpLT5zcVtpXTsKPiArICAgICAgICAgICAgICAgc3RydWN0IHZp
cnRuZXRfc3EgKnNxID0gJnZpLT5zcVtpXTsKPgo+ICAgICAgICAgICAgICAgICBzdGF0c19iYXNl
ID0gKHU4ICopJnNxLT5zdGF0czsKPiAgICAgICAgICAgICAgICAgZG8gewo+IEBAIC0zNjA0LDcg
KzM2MDQsNyBAQCBzdGF0aWMgaW50IHZpcnRuZXRfc2V0X2ZlYXR1cmVzKHN0cnVjdCBuZXRfZGV2
aWNlICpkZXYsCj4gIHN0YXRpYyB2b2lkIHZpcnRuZXRfdHhfdGltZW91dChzdHJ1Y3QgbmV0X2Rl
dmljZSAqZGV2LCB1bnNpZ25lZCBpbnQgdHhxdWV1ZSkKPiAgewo+ICAgICAgICAgc3RydWN0IHZp
cnRuZXRfaW5mbyAqcHJpdiA9IG5ldGRldl9wcml2KGRldik7Cj4gLSAgICAgICBzdHJ1Y3Qgc2Vu
ZF9xdWV1ZSAqc3EgPSAmcHJpdi0+c3FbdHhxdWV1ZV07Cj4gKyAgICAgICBzdHJ1Y3QgdmlydG5l
dF9zcSAqc3EgPSAmcHJpdi0+c3FbdHhxdWV1ZV07Cj4gICAgICAgICBzdHJ1Y3QgbmV0ZGV2X3F1
ZXVlICp0eHEgPSBuZXRkZXZfZ2V0X3R4X3F1ZXVlKGRldiwgdHhxdWV1ZSk7Cj4KPiAgICAgICAg
IHU2NF9zdGF0c191cGRhdGVfYmVnaW4oJnNxLT5zdGF0cy5zeW5jcCk7Cj4gQEAgLTM3MjksMTAg
KzM3MjksMTAgQEAgc3RhdGljIHZvaWQgZnJlZV9yZWNlaXZlX3BhZ2VfZnJhZ3Moc3RydWN0IHZp
cnRuZXRfaW5mbyAqdmkpCj4KPiAgc3RhdGljIHZvaWQgdmlydG5ldF9zcV9mcmVlX3VudXNlZF9i
dWYoc3RydWN0IHZpcnRxdWV1ZSAqdnEsIHZvaWQgKmJ1ZikKPiAgewo+IC0gICAgICAgaWYgKCFp
c194ZHBfZnJhbWUoYnVmKSkKPiArICAgICAgIGlmICghdmlydG5ldF9pc194ZHBfZnJhbWUoYnVm
KSkKPiAgICAgICAgICAgICAgICAgZGV2X2tmcmVlX3NrYihidWYpOwo+ICAgICAgICAgZWxzZQo+
IC0gICAgICAgICAgICAgICB4ZHBfcmV0dXJuX2ZyYW1lKHB0cl90b194ZHAoYnVmKSk7Cj4gKyAg
ICAgICAgICAgICAgIHhkcF9yZXR1cm5fZnJhbWUodmlydG5ldF9wdHJfdG9feGRwKGJ1ZikpOwo+
ICB9Cj4KPiAgc3RhdGljIHZvaWQgdmlydG5ldF9ycV9mcmVlX3VudXNlZF9idWYoc3RydWN0IHZp
cnRxdWV1ZSAqdnEsIHZvaWQgKmJ1ZikKPiBAQCAtMzc2MSw3ICszNzYxLDcgQEAgc3RhdGljIHZv
aWQgZnJlZV91bnVzZWRfYnVmcyhzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSkKPiAgICAgICAgIH0K
Pgo+ICAgICAgICAgZm9yIChpID0gMDsgaSA8IHZpLT5tYXhfcXVldWVfcGFpcnM7IGkrKykgewo+
IC0gICAgICAgICAgICAgICBzdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSAqcnEgPSAmdmktPnJxW2ldOwo+
ICsgICAgICAgICAgICAgICBzdHJ1Y3QgdmlydG5ldF9ycSAqcnEgPSAmdmktPnJxW2ldOwo+Cj4g
ICAgICAgICAgICAgICAgIHdoaWxlICgoYnVmID0gdmlydG5ldF9ycV9kZXRhY2hfdW51c2VkX2J1
ZihycSkpICE9IE5VTEwpCj4gICAgICAgICAgICAgICAgICAgICAgICAgdmlydG5ldF9ycV9mcmVl
X3VudXNlZF9idWYocnEtPnZxLCBidWYpOwo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC92aXJ0
aW8vdmlydGlvX25ldC5oIGIvZHJpdmVycy9uZXQvdmlydGlvL3ZpcnRpb19uZXQuaAo+IGluZGV4
IGRkYWYwZWNmNGQ5ZC4uMjgyNTA0ZDY2MzlhIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbmV0L3Zp
cnRpby92aXJ0aW9fbmV0LmgKPiArKysgYi9kcml2ZXJzL25ldC92aXJ0aW8vdmlydGlvX25ldC5o
Cj4gQEAgLTU5LDggKzU5LDggQEAgc3RydWN0IHZpcnRuZXRfcnFfZG1hIHsKPiAgfTsKPgo+ICAv
KiBJbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBhIHNlbmQgdmlydHF1ZXVlICovCj4gLXN0cnVj
dCBzZW5kX3F1ZXVlIHsKPiAtICAgICAgIC8qIFZpcnRxdWV1ZSBhc3NvY2lhdGVkIHdpdGggdGhp
cyBzZW5kIF9xdWV1ZSAqLwo+ICtzdHJ1Y3QgdmlydG5ldF9zcSB7Cj4gKyAgICAgICAvKiBWaXJ0
cXVldWUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdmlydG5ldF9zcSAqLwo+ICAgICAgICAgc3RydWN0
IHZpcnRxdWV1ZSAqdnE7Cj4KPiAgICAgICAgIC8qIFRYOiBmcmFnbWVudHMgKyBsaW5lYXIgcGFy
dCArIHZpcnRpbyBoZWFkZXIgKi8KPiBAQCAtODAsOCArODAsOCBAQCBzdHJ1Y3Qgc2VuZF9xdWV1
ZSB7Cj4gIH07Cj4KPiAgLyogSW50ZXJuYWwgcmVwcmVzZW50YXRpb24gb2YgYSByZWNlaXZlIHZp
cnRxdWV1ZSAqLwo+IC1zdHJ1Y3QgcmVjZWl2ZV9xdWV1ZSB7Cj4gLSAgICAgICAvKiBWaXJ0cXVl
dWUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcmVjZWl2ZV9xdWV1ZSAqLwo+ICtzdHJ1Y3QgdmlydG5l
dF9ycSB7Cj4gKyAgICAgICAvKiBWaXJ0cXVldWUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdmlydG5l
dF9ycSAqLwo+ICAgICAgICAgc3RydWN0IHZpcnRxdWV1ZSAqdnE7Cj4KPiAgICAgICAgIHN0cnVj
dCBuYXBpX3N0cnVjdCBuYXBpOwo+IEBAIC0xMjMsOCArMTIzLDggQEAgc3RydWN0IHZpcnRuZXRf
aW5mbyB7Cj4gICAgICAgICBzdHJ1Y3QgdmlydGlvX2RldmljZSAqdmRldjsKPiAgICAgICAgIHN0
cnVjdCB2aXJ0cXVldWUgKmN2cTsKPiAgICAgICAgIHN0cnVjdCBuZXRfZGV2aWNlICpkZXY7Cj4g
LSAgICAgICBzdHJ1Y3Qgc2VuZF9xdWV1ZSAqc3E7Cj4gLSAgICAgICBzdHJ1Y3QgcmVjZWl2ZV9x
dWV1ZSAqcnE7Cj4gKyAgICAgICBzdHJ1Y3QgdmlydG5ldF9zcSAqc3E7Cj4gKyAgICAgICBzdHJ1
Y3QgdmlydG5ldF9ycSAqcnE7Cj4gICAgICAgICB1bnNpZ25lZCBpbnQgc3RhdHVzOwo+Cj4gICAg
ICAgICAvKiBNYXggIyBvZiBxdWV1ZSBwYWlycyBzdXBwb3J0ZWQgYnkgdGhlIGRldmljZSAqLwo+
IEBAIC0yMDEsMjQgKzIwMSwyNCBAQCBzdHJ1Y3QgdmlydG5ldF9pbmZvIHsKPiAgICAgICAgIHN0
cnVjdCBmYWlsb3ZlciAqZmFpbG92ZXI7Cj4gIH07Cj4KPiAtc3RhdGljIGlubGluZSBib29sIGlz
X3hkcF9mcmFtZSh2b2lkICpwdHIpCj4gK3N0YXRpYyBpbmxpbmUgYm9vbCB2aXJ0bmV0X2lzX3hk
cF9mcmFtZSh2b2lkICpwdHIpCj4gIHsKPiAgICAgICAgIHJldHVybiAodW5zaWduZWQgbG9uZylw
dHIgJiBWSVJUSU9fWERQX0ZMQUc7Cj4gIH0KPgo+IC1zdGF0aWMgaW5saW5lIHN0cnVjdCB4ZHBf
ZnJhbWUgKnB0cl90b194ZHAodm9pZCAqcHRyKQo+ICtzdGF0aWMgaW5saW5lIHN0cnVjdCB4ZHBf
ZnJhbWUgKnZpcnRuZXRfcHRyX3RvX3hkcCh2b2lkICpwdHIpCj4gIHsKPiAgICAgICAgIHJldHVy
biAoc3RydWN0IHhkcF9mcmFtZSAqKSgodW5zaWduZWQgbG9uZylwdHIgJiB+VklSVElPX1hEUF9G
TEFHKTsKPiAgfQo+Cj4gLXN0YXRpYyBpbmxpbmUgdm9pZCBfX2ZyZWVfb2xkX3htaXQoc3RydWN0
IHNlbmRfcXVldWUgKnNxLCBib29sIGluX25hcGksCj4gLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBzdHJ1Y3QgdmlydG5ldF9zcV9zdGF0cyAqc3RhdHMpCj4gK3N0YXRpYyBpbmxp
bmUgdm9pZCB2aXJ0bmV0X2ZyZWVfb2xkX3htaXQoc3RydWN0IHZpcnRuZXRfc3EgKnNxLCBib29s
IGluX25hcGksCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1
Y3QgdmlydG5ldF9zcV9zdGF0cyAqc3RhdHMpCj4gIHsKPiAgICAgICAgIHVuc2lnbmVkIGludCBs
ZW47Cj4gICAgICAgICB2b2lkICpwdHI7Cj4KPiAgICAgICAgIHdoaWxlICgocHRyID0gdmlydHF1
ZXVlX2dldF9idWYoc3EtPnZxLCAmbGVuKSkgIT0gTlVMTCkgewo+IC0gICAgICAgICAgICAgICBp
ZiAoIWlzX3hkcF9mcmFtZShwdHIpKSB7Cj4gKyAgICAgICAgICAgICAgIGlmICghdmlydG5ldF9p
c194ZHBfZnJhbWUocHRyKSkgewo+ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBza19i
dWZmICpza2IgPSBwdHI7Cj4KPiAgICAgICAgICAgICAgICAgICAgICAgICBwcl9kZWJ1ZygiU2Vu
dCBza2IgJXBcbiIsIHNrYik7Cj4gQEAgLTIyNiw3ICsyMjYsNyBAQCBzdGF0aWMgaW5saW5lIHZv
aWQgX19mcmVlX29sZF94bWl0KHN0cnVjdCBzZW5kX3F1ZXVlICpzcSwgYm9vbCBpbl9uYXBpLAo+
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLT5ieXRlcyArPSBza2ItPmxlbjsKPiAgICAg
ICAgICAgICAgICAgICAgICAgICBuYXBpX2NvbnN1bWVfc2tiKHNrYiwgaW5fbmFwaSk7Cj4gICAg
ICAgICAgICAgICAgIH0gZWxzZSB7Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHhk
cF9mcmFtZSAqZnJhbWUgPSBwdHJfdG9feGRwKHB0cik7Cj4gKyAgICAgICAgICAgICAgICAgICAg
ICAgc3RydWN0IHhkcF9mcmFtZSAqZnJhbWUgPSB2aXJ0bmV0X3B0cl90b194ZHAocHRyKTsKPgo+
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLT5ieXRlcyArPSB4ZHBfZ2V0X2ZyYW1lX2xl
bihmcmFtZSk7Cj4gICAgICAgICAgICAgICAgICAgICAgICAgeGRwX3JldHVybl9mcmFtZShmcmFt
ZSk7Cj4gQEAgLTIzNSw4ICsyMzUsOCBAQCBzdGF0aWMgaW5saW5lIHZvaWQgX19mcmVlX29sZF94
bWl0KHN0cnVjdCBzZW5kX3F1ZXVlICpzcSwgYm9vbCBpbl9uYXBpLAo+ICAgICAgICAgfQo+ICB9
Cj4KPiAtc3RhdGljIGlubGluZSB2b2lkIHZpcnRxdWV1ZV9uYXBpX3NjaGVkdWxlKHN0cnVjdCBu
YXBpX3N0cnVjdCAqbmFwaSwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgc3RydWN0IHZpcnRxdWV1ZSAqdnEpCj4gK3N0YXRpYyBpbmxpbmUgdm9pZCB2aXJ0bmV0
X3ZxX25hcGlfc2NoZWR1bGUoc3RydWN0IG5hcGlfc3RydWN0ICpuYXBpLAo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHZpcnRxdWV1ZSAqdnEpCj4g
IHsKPiAgICAgICAgIGlmIChuYXBpX3NjaGVkdWxlX3ByZXAobmFwaSkpIHsKPiAgICAgICAgICAg
ICAgICAgdmlydHF1ZXVlX2Rpc2FibGVfY2IodnEpOwo+IEBAIC0yNDQsNyArMjQ0LDcgQEAgc3Rh
dGljIGlubGluZSB2b2lkIHZpcnRxdWV1ZV9uYXBpX3NjaGVkdWxlKHN0cnVjdCBuYXBpX3N0cnVj
dCAqbmFwaSwKPiAgICAgICAgIH0KPiAgfQo+Cj4gLXN0YXRpYyBpbmxpbmUgYm9vbCBpc194ZHBf
cmF3X2J1ZmZlcl9xdWV1ZShzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSwgaW50IHEpCj4gK3N0YXRp
YyBpbmxpbmUgYm9vbCB2aXJ0bmV0X2lzX3hkcF9yYXdfYnVmZmVyX3F1ZXVlKHN0cnVjdCB2aXJ0
bmV0X2luZm8gKnZpLCBpbnQgcSkKPiAgewo+ICAgICAgICAgaWYgKHEgPCAodmktPmN1cnJfcXVl
dWVfcGFpcnMgLSB2aS0+eGRwX3F1ZXVlX3BhaXJzKSkKPiAgICAgICAgICAgICAgICAgcmV0dXJu
IGZhbHNlOwo+IC0tCj4gMi4zMi4wLjMuZzAxMTk1Y2Y5Zgo+CgpfX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fXwpWaXJ0dWFsaXphdGlvbiBtYWlsaW5nIGxpc3QK
VmlydHVhbGl6YXRpb25AbGlzdHMubGludXgtZm91bmRhdGlvbi5vcmcKaHR0cHM6Ly9saXN0cy5s
aW51eGZvdW5kYXRpb24ub3JnL21haWxtYW4vbGlzdGluZm8vdmlydHVhbGl6YXRpb24=

