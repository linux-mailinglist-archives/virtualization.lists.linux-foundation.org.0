Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from hemlock.osuosl.org (smtp2.osuosl.org [140.211.166.133])
	by mail.lfdr.de (Postfix) with ESMTPS id A11FE1F52D0
	for <lists.virtualization@lfdr.de>; Wed, 10 Jun 2020 13:05:20 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by hemlock.osuosl.org (Postfix) with ESMTP id 7ABFC88BCF;
	Wed, 10 Jun 2020 11:05:18 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from hemlock.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0CV+o1itNok9; Wed, 10 Jun 2020 11:05:17 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by hemlock.osuosl.org (Postfix) with ESMTP id 224F988BC3;
	Wed, 10 Jun 2020 11:05:17 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 009A4C016F;
	Wed, 10 Jun 2020 11:05:17 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 937EDC016F
 for <virtualization@lists.linux-foundation.org>;
 Wed, 10 Jun 2020 11:05:15 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by whitealder.osuosl.org (Postfix) with ESMTP id 82519880EE
 for <virtualization@lists.linux-foundation.org>;
 Wed, 10 Jun 2020 11:05:15 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id ErvVDrt21w53
 for <virtualization@lists.linux-foundation.org>;
 Wed, 10 Jun 2020 11:05:14 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from us-smtp-1.mimecast.com (us-smtp-1.mimecast.com [205.139.110.61])
 by whitealder.osuosl.org (Postfix) with ESMTPS id E9141880E6
 for <virtualization@lists.linux-foundation.org>;
 Wed, 10 Jun 2020 11:05:13 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1591787112;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=+mk26jPfFqmgR4ZNEZAyeCX9ZrGHsYfrK97m1CG1piI=;
 b=h33jKVDgEzdR+rV8N3PLV7EUOEwuCwY0c1686NEobgQEC3LHvGZARoTg6TzW6CW1y3REMp
 gwaOjvR16UCgFXA7Yg3BqcqS0GeKYtR51Pb0KMtdXug7EaLjrRRj8mDp3gtu1TI2whOWUM
 y7f7+fx/g+hChx9c93XXbZApVL41fQo=
Received: from mail-wm1-f72.google.com (mail-wm1-f72.google.com
 [209.85.128.72]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-8-e7McfAsTOhmBFFAk8pgHHA-1; Wed, 10 Jun 2020 07:05:11 -0400
X-MC-Unique: e7McfAsTOhmBFFAk8pgHHA-1
Received: by mail-wm1-f72.google.com with SMTP id k185so318823wme.8
 for <virtualization@lists.linux-foundation.org>;
 Wed, 10 Jun 2020 04:05:10 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:content-transfer-encoding
 :in-reply-to;
 bh=+mk26jPfFqmgR4ZNEZAyeCX9ZrGHsYfrK97m1CG1piI=;
 b=Q0dh3hdpg1qnahI6J0NzCn5fdEyNLrRYJjoNf2+jJkL5SZws2wo+i9OYVWIbE082p2
 l69950D8cODIng9TGX62UfwWJZU4h7poFOnAn2UoHRv9ORM7E3r59d6fTq90DdV8h2W4
 6FrLlWt10XAguobNKKCLyD67o+fYmOannDuhm2hYqwrqpuCnllaYCNcr+ElkK/LJomnR
 GTzEPHGnbbdlx0+fTKlxMU4uLEn6EIRGw43Jfj3tQCxqvs58D85OyjUdm0hUf4L4DeYK
 hM1w/TZcqRGZH9VWb3tFQtbNEpfBLZevIGYozKOQ+K4Be/Un7wgVfOQweRSjTnWRR8xU
 WSLQ==
X-Gm-Message-State: AOAM530mRz2a2kgyP3CuRYC2qjNxSTt5RyZ23yP9NqEVMVGBfPECA7gb
 z3qj3bmgSVo0IUn0C2E4cKWtlcxNRL87P0yUjPsfBtv7ZdwvO6CG9pIeERQ+n3aROHJS+pCG2K2
 F81PRmDFKZQir9Z2xnPoDN88SLzoxlBiP1WaFfnbWEg==
X-Received: by 2002:a5d:684d:: with SMTP id o13mr3041683wrw.364.1591787109437; 
 Wed, 10 Jun 2020 04:05:09 -0700 (PDT)
X-Google-Smtp-Source: ABdhPJz2guq17q1FmR9wZfh7EC5QlcT81ur3UoVFADRnJrG6I7wD3FEnpM9mzzIYPsBXs1biRDCYyA==
X-Received: by 2002:a5d:684d:: with SMTP id o13mr3041644wrw.364.1591787109015; 
 Wed, 10 Jun 2020 04:05:09 -0700 (PDT)
Received: from redhat.com ([212.92.121.57])
 by smtp.gmail.com with ESMTPSA id a14sm7854905wrv.20.2020.06.10.04.05.06
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 10 Jun 2020 04:05:08 -0700 (PDT)
Date: Wed, 10 Jun 2020 07:05:05 -0400
From: "Michael S. Tsirkin" <mst@redhat.com>
To: Jason Wang <jasowang@redhat.com>
Subject: Re: [PATCH RFC v6 02/11] vhost: use batched get_vq_desc version
Message-ID: <20200610070259-mutt-send-email-mst@kernel.org>
References: <20200608125238.728563-1-mst@redhat.com>
 <20200608125238.728563-3-mst@redhat.com>
 <81904cc5-b662-028d-3b4a-bdfdbd2deb8c@redhat.com>
MIME-Version: 1.0
In-Reply-To: <81904cc5-b662-028d-3b4a-bdfdbd2deb8c@redhat.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Disposition: inline
Cc: netdev@vger.kernel.org, eperezma@redhat.com, linux-kernel@vger.kernel.org,
 kvm@vger.kernel.org, virtualization@lists.linux-foundation.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gV2VkLCBKdW4gMTAsIDIwMjAgYXQgMTE6MTQ6NDlBTSArMDgwMCwgSmFzb24gV2FuZyB3cm90
ZToKPiAKPiBPbiAyMDIwLzYvOCDkuIvljYg4OjUyLCBNaWNoYWVsIFMuIFRzaXJraW4gd3JvdGU6
Cj4gPiBBcyB0ZXN0aW5nIHNob3dzIG5vIHBlcmZvcm1hbmNlIGNoYW5nZSwgc3dpdGNoIHRvIHRo
YXQgbm93Lgo+ID4gCj4gPiBTaWduZWQtb2ZmLWJ5OiBNaWNoYWVsIFMuIFRzaXJraW4gPG1zdEBy
ZWRoYXQuY29tPgo+ID4gU2lnbmVkLW9mZi1ieTogRXVnZW5pbyBQw6lyZXogPGVwZXJlem1hQHJl
ZGhhdC5jb20+Cj4gPiBMaW5rOiBodHRwczovL2xvcmUua2VybmVsLm9yZy9yLzIwMjAwNDAxMTgz
MTE4LjgzMzQtMy1lcGVyZXptYUByZWRoYXQuY29tCj4gPiBTaWduZWQtb2ZmLWJ5OiBNaWNoYWVs
IFMuIFRzaXJraW4gPG1zdEByZWRoYXQuY29tPgo+ID4gLS0tCj4gPiAgIGRyaXZlcnMvdmhvc3Qv
dGVzdC5jICB8ICAgMiArLQo+ID4gICBkcml2ZXJzL3Zob3N0L3Zob3N0LmMgfCAzMTggKysrKysr
KystLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiAgIGRyaXZlcnMvdmhvc3Qv
dmhvc3QuaCB8ICAgNyArLQo+ID4gICAzIGZpbGVzIGNoYW5nZWQsIDY1IGluc2VydGlvbnMoKyks
IDI2MiBkZWxldGlvbnMoLSkKPiA+IAo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmhvc3QvdGVz
dC5jIGIvZHJpdmVycy92aG9zdC90ZXN0LmMKPiA+IGluZGV4IDA0NjY5MjFmNDc3Mi4uN2Q2OTc3
OGFhYTI2IDEwMDY0NAo+ID4gLS0tIGEvZHJpdmVycy92aG9zdC90ZXN0LmMKPiA+ICsrKyBiL2Ry
aXZlcnMvdmhvc3QvdGVzdC5jCj4gPiBAQCAtMTE5LDcgKzExOSw3IEBAIHN0YXRpYyBpbnQgdmhv
c3RfdGVzdF9vcGVuKHN0cnVjdCBpbm9kZSAqaW5vZGUsIHN0cnVjdCBmaWxlICpmKQo+ID4gICAJ
ZGV2ID0gJm4tPmRldjsKPiA+ICAgCXZxc1tWSE9TVF9URVNUX1ZRXSA9ICZuLT52cXNbVkhPU1Rf
VEVTVF9WUV07Cj4gPiAgIAluLT52cXNbVkhPU1RfVEVTVF9WUV0uaGFuZGxlX2tpY2sgPSBoYW5k
bGVfdnFfa2ljazsKPiA+IC0Jdmhvc3RfZGV2X2luaXQoZGV2LCB2cXMsIFZIT1NUX1RFU1RfVlFf
TUFYLCBVSU9fTUFYSU9WLAo+ID4gKwl2aG9zdF9kZXZfaW5pdChkZXYsIHZxcywgVkhPU1RfVEVT
VF9WUV9NQVgsIFVJT19NQVhJT1YgKyA2NCwKPiA+ICAgCQkgICAgICAgVkhPU1RfVEVTVF9QS1Rf
V0VJR0hULCBWSE9TVF9URVNUX1dFSUdIVCwgdHJ1ZSwgTlVMTCk7Cj4gPiAgIAlmLT5wcml2YXRl
X2RhdGEgPSBuOwo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmhvc3Qvdmhvc3QuYyBiL2RyaXZl
cnMvdmhvc3Qvdmhvc3QuYwo+ID4gaW5kZXggMTgwYjdiNThjNzZiLi40MWQ2YjEzMmMyMzQgMTAw
NjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL3Zob3N0L3Zob3N0LmMKPiA+ICsrKyBiL2RyaXZlcnMvdmhv
c3Qvdmhvc3QuYwo+ID4gQEAgLTMwNCw2ICszMDQsNyBAQCBzdGF0aWMgdm9pZCB2aG9zdF92cV9y
ZXNldChzdHJ1Y3Qgdmhvc3RfZGV2ICpkZXYsCj4gPiAgIHsKPiA+ICAgCXZxLT5udW0gPSAxOwo+
ID4gICAJdnEtPm5kZXNjcyA9IDA7Cj4gPiArCXZxLT5maXJzdF9kZXNjID0gMDsKPiA+ICAgCXZx
LT5kZXNjID0gTlVMTDsKPiA+ICAgCXZxLT5hdmFpbCA9IE5VTEw7Cj4gPiAgIAl2cS0+dXNlZCA9
IE5VTEw7Cj4gPiBAQCAtMzcyLDYgKzM3MywxMSBAQCBzdGF0aWMgaW50IHZob3N0X3dvcmtlcih2
b2lkICpkYXRhKQo+ID4gICAJcmV0dXJuIDA7Cj4gPiAgIH0KPiA+ICtzdGF0aWMgaW50IHZob3N0
X3ZxX251bV9iYXRjaF9kZXNjcyhzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSkKPiA+ICt7Cj4g
PiArCXJldHVybiB2cS0+bWF4X2Rlc2NzIC0gVUlPX01BWElPVjsKPiA+ICt9Cj4gPiArCj4gPiAg
IHN0YXRpYyB2b2lkIHZob3N0X3ZxX2ZyZWVfaW92ZWNzKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUg
KnZxKQo+ID4gICB7Cj4gPiAgIAlrZnJlZSh2cS0+ZGVzY3MpOwo+ID4gQEAgLTM5NCw2ICs0MDAs
OSBAQCBzdGF0aWMgbG9uZyB2aG9zdF9kZXZfYWxsb2NfaW92ZWNzKHN0cnVjdCB2aG9zdF9kZXYg
KmRldikKPiA+ICAgCWZvciAoaSA9IDA7IGkgPCBkZXYtPm52cXM7ICsraSkgewo+ID4gICAJCXZx
ID0gZGV2LT52cXNbaV07Cj4gPiAgIAkJdnEtPm1heF9kZXNjcyA9IGRldi0+aW92X2xpbWl0Owo+
ID4gKwkJaWYgKHZob3N0X3ZxX251bV9iYXRjaF9kZXNjcyh2cSkgPCAwKSB7Cj4gPiArCQkJcmV0
dXJuIC1FSU5WQUw7Cj4gPiArCQl9Cj4gPiAgIAkJdnEtPmRlc2NzID0ga21hbGxvY19hcnJheSh2
cS0+bWF4X2Rlc2NzLAo+ID4gICAJCQkJCSAgc2l6ZW9mKCp2cS0+ZGVzY3MpLAo+ID4gICAJCQkJ
CSAgR0ZQX0tFUk5FTCk7Cj4gPiBAQCAtMTYxMCw2ICsxNjE5LDcgQEAgbG9uZyB2aG9zdF92cmlu
Z19pb2N0bChzdHJ1Y3Qgdmhvc3RfZGV2ICpkLCB1bnNpZ25lZCBpbnQgaW9jdGwsIHZvaWQgX191
c2VyICphcmcKPiA+ICAgCQl2cS0+bGFzdF9hdmFpbF9pZHggPSBzLm51bTsKPiA+ICAgCQkvKiBG
b3JnZXQgdGhlIGNhY2hlZCBpbmRleCB2YWx1ZS4gKi8KPiA+ICAgCQl2cS0+YXZhaWxfaWR4ID0g
dnEtPmxhc3RfYXZhaWxfaWR4Owo+ID4gKwkJdnEtPm5kZXNjcyA9IHZxLT5maXJzdF9kZXNjID0g
MDsKPiA+ICAgCQlicmVhazsKPiA+ICAgCWNhc2UgVkhPU1RfR0VUX1ZSSU5HX0JBU0U6Cj4gPiAg
IAkJcy5pbmRleCA9IGlkeDsKPiA+IEBAIC0yMDc4LDI1MyArMjA4OCw2IEBAIHN0YXRpYyB1bnNp
Z25lZCBuZXh0X2Rlc2Moc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEsIHN0cnVjdCB2cmluZ19k
ZXNjICpkZXNjKQo+ID4gICAJcmV0dXJuIG5leHQ7Cj4gPiAgIH0KPiA+IC1zdGF0aWMgaW50IGdl
dF9pbmRpcmVjdChzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSwKPiA+IC0JCQlzdHJ1Y3QgaW92
ZWMgaW92W10sIHVuc2lnbmVkIGludCBpb3Zfc2l6ZSwKPiA+IC0JCQl1bnNpZ25lZCBpbnQgKm91
dF9udW0sIHVuc2lnbmVkIGludCAqaW5fbnVtLAo+ID4gLQkJCXN0cnVjdCB2aG9zdF9sb2cgKmxv
ZywgdW5zaWduZWQgaW50ICpsb2dfbnVtLAo+ID4gLQkJCXN0cnVjdCB2cmluZ19kZXNjICppbmRp
cmVjdCkKPiA+IC17Cj4gPiAtCXN0cnVjdCB2cmluZ19kZXNjIGRlc2M7Cj4gPiAtCXVuc2lnbmVk
IGludCBpID0gMCwgY291bnQsIGZvdW5kID0gMDsKPiA+IC0JdTMyIGxlbiA9IHZob3N0MzJfdG9f
Y3B1KHZxLCBpbmRpcmVjdC0+bGVuKTsKPiA+IC0Jc3RydWN0IGlvdl9pdGVyIGZyb207Cj4gPiAt
CWludCByZXQsIGFjY2VzczsKPiA+IC0KPiA+IC0JLyogU2FuaXR5IGNoZWNrICovCj4gPiAtCWlm
ICh1bmxpa2VseShsZW4gJSBzaXplb2YgZGVzYykpIHsKPiA+IC0JCXZxX2Vycih2cSwgIkludmFs
aWQgbGVuZ3RoIGluIGluZGlyZWN0IGRlc2NyaXB0b3I6ICIKPiA+IC0JCSAgICAgICAibGVuIDB4
JWxseCBub3QgbXVsdGlwbGUgb2YgMHglenhcbiIsCj4gPiAtCQkgICAgICAgKHVuc2lnbmVkIGxv
bmcgbG9uZylsZW4sCj4gPiAtCQkgICAgICAgc2l6ZW9mIGRlc2MpOwo+ID4gLQkJcmV0dXJuIC1F
SU5WQUw7Cj4gPiAtCX0KPiA+IC0KPiA+IC0JcmV0ID0gdHJhbnNsYXRlX2Rlc2ModnEsIHZob3N0
NjRfdG9fY3B1KHZxLCBpbmRpcmVjdC0+YWRkciksIGxlbiwgdnEtPmluZGlyZWN0LAo+ID4gLQkJ
CSAgICAgVUlPX01BWElPViwgVkhPU1RfQUNDRVNTX1JPKTsKPiA+IC0JaWYgKHVubGlrZWx5KHJl
dCA8IDApKSB7Cj4gPiAtCQlpZiAocmV0ICE9IC1FQUdBSU4pCj4gPiAtCQkJdnFfZXJyKHZxLCAi
VHJhbnNsYXRpb24gZmFpbHVyZSAlZCBpbiBpbmRpcmVjdC5cbiIsIHJldCk7Cj4gPiAtCQlyZXR1
cm4gcmV0Owo+ID4gLQl9Cj4gPiAtCWlvdl9pdGVyX2luaXQoJmZyb20sIFJFQUQsIHZxLT5pbmRp
cmVjdCwgcmV0LCBsZW4pOwo+ID4gLQo+ID4gLQkvKiBXZSB3aWxsIHVzZSB0aGUgcmVzdWx0IGFz
IGFuIGFkZHJlc3MgdG8gcmVhZCBmcm9tLCBzbyBtb3N0Cj4gPiAtCSAqIGFyY2hpdGVjdHVyZXMg
b25seSBuZWVkIGEgY29tcGlsZXIgYmFycmllciBoZXJlLiAqLwo+ID4gLQlyZWFkX2JhcnJpZXJf
ZGVwZW5kcygpOwo+ID4gLQo+ID4gLQljb3VudCA9IGxlbiAvIHNpemVvZiBkZXNjOwo+ID4gLQkv
KiBCdWZmZXJzIGFyZSBjaGFpbmVkIHZpYSBhIDE2IGJpdCBuZXh0IGZpZWxkLCBzbwo+ID4gLQkg
KiB3ZSBjYW4gaGF2ZSBhdCBtb3N0IDJeMTYgb2YgdGhlc2UuICovCj4gPiAtCWlmICh1bmxpa2Vs
eShjb3VudCA+IFVTSFJUX01BWCArIDEpKSB7Cj4gPiAtCQl2cV9lcnIodnEsICJJbmRpcmVjdCBi
dWZmZXIgbGVuZ3RoIHRvbyBiaWc6ICVkXG4iLAo+ID4gLQkJICAgICAgIGluZGlyZWN0LT5sZW4p
Owo+ID4gLQkJcmV0dXJuIC1FMkJJRzsKPiA+IC0JfQo+ID4gLQo+ID4gLQlkbyB7Cj4gPiAtCQl1
bnNpZ25lZCBpb3ZfY291bnQgPSAqaW5fbnVtICsgKm91dF9udW07Cj4gPiAtCQlpZiAodW5saWtl
bHkoKytmb3VuZCA+IGNvdW50KSkgewo+ID4gLQkJCXZxX2Vycih2cSwgIkxvb3AgZGV0ZWN0ZWQ6
IGxhc3Qgb25lIGF0ICV1ICIKPiA+IC0JCQkgICAgICAgImluZGlyZWN0IHNpemUgJXVcbiIsCj4g
PiAtCQkJICAgICAgIGksIGNvdW50KTsKPiA+IC0JCQlyZXR1cm4gLUVJTlZBTDsKPiA+IC0JCX0K
PiA+IC0JCWlmICh1bmxpa2VseSghY29weV9mcm9tX2l0ZXJfZnVsbCgmZGVzYywgc2l6ZW9mKGRl
c2MpLCAmZnJvbSkpKSB7Cj4gPiAtCQkJdnFfZXJyKHZxLCAiRmFpbGVkIGluZGlyZWN0IGRlc2Ny
aXB0b3I6IGlkeCAlZCwgJXp4XG4iLAo+ID4gLQkJCSAgICAgICBpLCAoc2l6ZV90KXZob3N0NjRf
dG9fY3B1KHZxLCBpbmRpcmVjdC0+YWRkcikgKyBpICogc2l6ZW9mIGRlc2MpOwo+ID4gLQkJCXJl
dHVybiAtRUlOVkFMOwo+ID4gLQkJfQo+ID4gLQkJaWYgKHVubGlrZWx5KGRlc2MuZmxhZ3MgJiBj
cHVfdG9fdmhvc3QxNih2cSwgVlJJTkdfREVTQ19GX0lORElSRUNUKSkpIHsKPiA+IC0JCQl2cV9l
cnIodnEsICJOZXN0ZWQgaW5kaXJlY3QgZGVzY3JpcHRvcjogaWR4ICVkLCAlenhcbiIsCj4gPiAt
CQkJICAgICAgIGksIChzaXplX3Qpdmhvc3Q2NF90b19jcHUodnEsIGluZGlyZWN0LT5hZGRyKSAr
IGkgKiBzaXplb2YgZGVzYyk7Cj4gPiAtCQkJcmV0dXJuIC1FSU5WQUw7Cj4gPiAtCQl9Cj4gPiAt
Cj4gPiAtCQlpZiAoZGVzYy5mbGFncyAmIGNwdV90b192aG9zdDE2KHZxLCBWUklOR19ERVNDX0Zf
V1JJVEUpKQo+ID4gLQkJCWFjY2VzcyA9IFZIT1NUX0FDQ0VTU19XTzsKPiA+IC0JCWVsc2UKPiA+
IC0JCQlhY2Nlc3MgPSBWSE9TVF9BQ0NFU1NfUk87Cj4gPiAtCj4gPiAtCQlyZXQgPSB0cmFuc2xh
dGVfZGVzYyh2cSwgdmhvc3Q2NF90b19jcHUodnEsIGRlc2MuYWRkciksCj4gPiAtCQkJCSAgICAg
dmhvc3QzMl90b19jcHUodnEsIGRlc2MubGVuKSwgaW92ICsgaW92X2NvdW50LAo+ID4gLQkJCQkg
ICAgIGlvdl9zaXplIC0gaW92X2NvdW50LCBhY2Nlc3MpOwo+ID4gLQkJaWYgKHVubGlrZWx5KHJl
dCA8IDApKSB7Cj4gPiAtCQkJaWYgKHJldCAhPSAtRUFHQUlOKQo+ID4gLQkJCQl2cV9lcnIodnEs
ICJUcmFuc2xhdGlvbiBmYWlsdXJlICVkIGluZGlyZWN0IGlkeCAlZFxuIiwKPiA+IC0JCQkJCXJl
dCwgaSk7Cj4gPiAtCQkJcmV0dXJuIHJldDsKPiA+IC0JCX0KPiA+IC0JCS8qIElmIHRoaXMgaXMg
YW4gaW5wdXQgZGVzY3JpcHRvciwgaW5jcmVtZW50IHRoYXQgY291bnQuICovCj4gPiAtCQlpZiAo
YWNjZXNzID09IFZIT1NUX0FDQ0VTU19XTykgewo+ID4gLQkJCSppbl9udW0gKz0gcmV0Owo+ID4g
LQkJCWlmICh1bmxpa2VseShsb2cgJiYgcmV0KSkgewo+ID4gLQkJCQlsb2dbKmxvZ19udW1dLmFk
ZHIgPSB2aG9zdDY0X3RvX2NwdSh2cSwgZGVzYy5hZGRyKTsKPiA+IC0JCQkJbG9nWypsb2dfbnVt
XS5sZW4gPSB2aG9zdDMyX3RvX2NwdSh2cSwgZGVzYy5sZW4pOwo+ID4gLQkJCQkrKypsb2dfbnVt
Owo+ID4gLQkJCX0KPiA+IC0JCX0gZWxzZSB7Cj4gPiAtCQkJLyogSWYgaXQncyBhbiBvdXRwdXQg
ZGVzY3JpcHRvciwgdGhleSdyZSBhbGwgc3VwcG9zZWQKPiA+IC0JCQkgKiB0byBjb21lIGJlZm9y
ZSBhbnkgaW5wdXQgZGVzY3JpcHRvcnMuICovCj4gPiAtCQkJaWYgKHVubGlrZWx5KCppbl9udW0p
KSB7Cj4gPiAtCQkJCXZxX2Vycih2cSwgIkluZGlyZWN0IGRlc2NyaXB0b3IgIgo+ID4gLQkJCQkg
ICAgICAgImhhcyBvdXQgYWZ0ZXIgaW46IGlkeCAlZFxuIiwgaSk7Cj4gPiAtCQkJCXJldHVybiAt
RUlOVkFMOwo+ID4gLQkJCX0KPiA+IC0JCQkqb3V0X251bSArPSByZXQ7Cj4gPiAtCQl9Cj4gPiAt
CX0gd2hpbGUgKChpID0gbmV4dF9kZXNjKHZxLCAmZGVzYykpICE9IC0xKTsKPiA+IC0JcmV0dXJu
IDA7Cj4gPiAtfQo+ID4gLQo+ID4gLS8qIFRoaXMgbG9va3MgaW4gdGhlIHZpcnRxdWV1ZSBhbmQg
Zm9yIHRoZSBmaXJzdCBhdmFpbGFibGUgYnVmZmVyLCBhbmQgY29udmVydHMKPiA+IC0gKiBpdCB0
byBhbiBpb3ZlYyBmb3IgY29udmVuaWVudCBhY2Nlc3MuICBTaW5jZSBkZXNjcmlwdG9ycyBjb25z
aXN0IG9mIHNvbWUKPiA+IC0gKiBudW1iZXIgb2Ygb3V0cHV0IHRoZW4gc29tZSBudW1iZXIgb2Yg
aW5wdXQgZGVzY3JpcHRvcnMsIGl0J3MgYWN0dWFsbHkgdHdvCj4gPiAtICogaW92ZWNzLCBidXQg
d2UgcGFjayB0aGVtIGludG8gb25lIGFuZCBub3RlIGhvdyBtYW55IG9mIGVhY2ggdGhlcmUgd2Vy
ZS4KPiA+IC0gKgo+ID4gLSAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgZGVzY3JpcHRvciBu
dW1iZXIgZm91bmQsIG9yIHZxLT5udW0gKHdoaWNoIGlzCj4gPiAtICogbmV2ZXIgYSB2YWxpZCBk
ZXNjcmlwdG9yIG51bWJlcikgaWYgbm9uZSB3YXMgZm91bmQuICBBIG5lZ2F0aXZlIGNvZGUgaXMK
PiA+IC0gKiByZXR1cm5lZCBvbiBlcnJvci4gKi8KPiA+IC1pbnQgdmhvc3RfZ2V0X3ZxX2Rlc2Mo
c3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEsCj4gPiAtCQkgICAgICBzdHJ1Y3QgaW92ZWMgaW92
W10sIHVuc2lnbmVkIGludCBpb3Zfc2l6ZSwKPiA+IC0JCSAgICAgIHVuc2lnbmVkIGludCAqb3V0
X251bSwgdW5zaWduZWQgaW50ICppbl9udW0sCj4gPiAtCQkgICAgICBzdHJ1Y3Qgdmhvc3RfbG9n
ICpsb2csIHVuc2lnbmVkIGludCAqbG9nX251bSkKPiA+IC17Cj4gPiAtCXN0cnVjdCB2cmluZ19k
ZXNjIGRlc2M7Cj4gPiAtCXVuc2lnbmVkIGludCBpLCBoZWFkLCBmb3VuZCA9IDA7Cj4gPiAtCXUx
NiBsYXN0X2F2YWlsX2lkeDsKPiA+IC0JX192aXJ0aW8xNiBhdmFpbF9pZHg7Cj4gPiAtCV9fdmly
dGlvMTYgcmluZ19oZWFkOwo+ID4gLQlpbnQgcmV0LCBhY2Nlc3M7Cj4gPiAtCj4gPiAtCS8qIENo
ZWNrIGl0IGlzbid0IGRvaW5nIHZlcnkgc3RyYW5nZSB0aGluZ3Mgd2l0aCBkZXNjcmlwdG9yIG51
bWJlcnMuICovCj4gPiAtCWxhc3RfYXZhaWxfaWR4ID0gdnEtPmxhc3RfYXZhaWxfaWR4Owo+ID4g
LQo+ID4gLQlpZiAodnEtPmF2YWlsX2lkeCA9PSB2cS0+bGFzdF9hdmFpbF9pZHgpIHsKPiA+IC0J
CWlmICh1bmxpa2VseSh2aG9zdF9nZXRfYXZhaWxfaWR4KHZxLCAmYXZhaWxfaWR4KSkpIHsKPiA+
IC0JCQl2cV9lcnIodnEsICJGYWlsZWQgdG8gYWNjZXNzIGF2YWlsIGlkeCBhdCAlcFxuIiwKPiA+
IC0JCQkJJnZxLT5hdmFpbC0+aWR4KTsKPiA+IC0JCQlyZXR1cm4gLUVGQVVMVDsKPiA+IC0JCX0K
PiA+IC0JCXZxLT5hdmFpbF9pZHggPSB2aG9zdDE2X3RvX2NwdSh2cSwgYXZhaWxfaWR4KTsKPiA+
IC0KPiA+IC0JCWlmICh1bmxpa2VseSgodTE2KSh2cS0+YXZhaWxfaWR4IC0gbGFzdF9hdmFpbF9p
ZHgpID4gdnEtPm51bSkpIHsKPiA+IC0JCQl2cV9lcnIodnEsICJHdWVzdCBtb3ZlZCB1c2VkIGlu
ZGV4IGZyb20gJXUgdG8gJXUiLAo+ID4gLQkJCQlsYXN0X2F2YWlsX2lkeCwgdnEtPmF2YWlsX2lk
eCk7Cj4gPiAtCQkJcmV0dXJuIC1FRkFVTFQ7Cj4gPiAtCQl9Cj4gPiAtCj4gPiAtCQkvKiBJZiB0
aGVyZSdzIG5vdGhpbmcgbmV3IHNpbmNlIGxhc3Qgd2UgbG9va2VkLCByZXR1cm4KPiA+IC0JCSAq
IGludmFsaWQuCj4gPiAtCQkgKi8KPiA+IC0JCWlmICh2cS0+YXZhaWxfaWR4ID09IGxhc3RfYXZh
aWxfaWR4KQo+ID4gLQkJCXJldHVybiB2cS0+bnVtOwo+ID4gLQo+ID4gLQkJLyogT25seSBnZXQg
YXZhaWwgcmluZyBlbnRyaWVzIGFmdGVyIHRoZXkgaGF2ZSBiZWVuCj4gPiAtCQkgKiBleHBvc2Vk
IGJ5IGd1ZXN0Lgo+ID4gLQkJICovCj4gPiAtCQlzbXBfcm1iKCk7Cj4gPiAtCX0KPiA+IC0KPiA+
IC0JLyogR3JhYiB0aGUgbmV4dCBkZXNjcmlwdG9yIG51bWJlciB0aGV5J3JlIGFkdmVydGlzaW5n
LCBhbmQgaW5jcmVtZW50Cj4gPiAtCSAqIHRoZSBpbmRleCB3ZSd2ZSBzZWVuLiAqLwo+ID4gLQlp
ZiAodW5saWtlbHkodmhvc3RfZ2V0X2F2YWlsX2hlYWQodnEsICZyaW5nX2hlYWQsIGxhc3RfYXZh
aWxfaWR4KSkpIHsKPiA+IC0JCXZxX2Vycih2cSwgIkZhaWxlZCB0byByZWFkIGhlYWQ6IGlkeCAl
ZCBhZGRyZXNzICVwXG4iLAo+ID4gLQkJICAgICAgIGxhc3RfYXZhaWxfaWR4LAo+ID4gLQkJICAg
ICAgICZ2cS0+YXZhaWwtPnJpbmdbbGFzdF9hdmFpbF9pZHggJSB2cS0+bnVtXSk7Cj4gPiAtCQly
ZXR1cm4gLUVGQVVMVDsKPiA+IC0JfQo+ID4gLQo+ID4gLQloZWFkID0gdmhvc3QxNl90b19jcHUo
dnEsIHJpbmdfaGVhZCk7Cj4gPiAtCj4gPiAtCS8qIElmIHRoZWlyIG51bWJlciBpcyBzaWxseSwg
dGhhdCdzIGFuIGVycm9yLiAqLwo+ID4gLQlpZiAodW5saWtlbHkoaGVhZCA+PSB2cS0+bnVtKSkg
ewo+ID4gLQkJdnFfZXJyKHZxLCAiR3Vlc3Qgc2F5cyBpbmRleCAldSA+ICV1IGlzIGF2YWlsYWJs
ZSIsCj4gPiAtCQkgICAgICAgaGVhZCwgdnEtPm51bSk7Cj4gPiAtCQlyZXR1cm4gLUVJTlZBTDsK
PiA+IC0JfQo+ID4gLQo+ID4gLQkvKiBXaGVuIHdlIHN0YXJ0IHRoZXJlIGFyZSBub25lIG9mIGVp
dGhlciBpbnB1dCBub3Igb3V0cHV0LiAqLwo+ID4gLQkqb3V0X251bSA9ICppbl9udW0gPSAwOwo+
ID4gLQlpZiAodW5saWtlbHkobG9nKSkKPiA+IC0JCSpsb2dfbnVtID0gMDsKPiA+IC0KPiA+IC0J
aSA9IGhlYWQ7Cj4gPiAtCWRvIHsKPiA+IC0JCXVuc2lnbmVkIGlvdl9jb3VudCA9ICppbl9udW0g
KyAqb3V0X251bTsKPiA+IC0JCWlmICh1bmxpa2VseShpID49IHZxLT5udW0pKSB7Cj4gPiAtCQkJ
dnFfZXJyKHZxLCAiRGVzYyBpbmRleCBpcyAldSA+ICV1LCBoZWFkID0gJXUiLAo+ID4gLQkJCSAg
ICAgICBpLCB2cS0+bnVtLCBoZWFkKTsKPiA+IC0JCQlyZXR1cm4gLUVJTlZBTDsKPiA+IC0JCX0K
PiA+IC0JCWlmICh1bmxpa2VseSgrK2ZvdW5kID4gdnEtPm51bSkpIHsKPiA+IC0JCQl2cV9lcnIo
dnEsICJMb29wIGRldGVjdGVkOiBsYXN0IG9uZSBhdCAldSAiCj4gPiAtCQkJICAgICAgICJ2cSBz
aXplICV1IGhlYWQgJXVcbiIsCj4gPiAtCQkJICAgICAgIGksIHZxLT5udW0sIGhlYWQpOwo+ID4g
LQkJCXJldHVybiAtRUlOVkFMOwo+ID4gLQkJfQo+ID4gLQkJcmV0ID0gdmhvc3RfZ2V0X2Rlc2Mo
dnEsICZkZXNjLCBpKTsKPiA+IC0JCWlmICh1bmxpa2VseShyZXQpKSB7Cj4gPiAtCQkJdnFfZXJy
KHZxLCAiRmFpbGVkIHRvIGdldCBkZXNjcmlwdG9yOiBpZHggJWQgYWRkciAlcFxuIiwKPiA+IC0J
CQkgICAgICAgaSwgdnEtPmRlc2MgKyBpKTsKPiA+IC0JCQlyZXR1cm4gLUVGQVVMVDsKPiA+IC0J
CX0KPiA+IC0JCWlmIChkZXNjLmZsYWdzICYgY3B1X3RvX3Zob3N0MTYodnEsIFZSSU5HX0RFU0Nf
Rl9JTkRJUkVDVCkpIHsKPiA+IC0JCQlyZXQgPSBnZXRfaW5kaXJlY3QodnEsIGlvdiwgaW92X3Np
emUsCj4gPiAtCQkJCQkgICBvdXRfbnVtLCBpbl9udW0sCj4gPiAtCQkJCQkgICBsb2csIGxvZ19u
dW0sICZkZXNjKTsKPiA+IC0JCQlpZiAodW5saWtlbHkocmV0IDwgMCkpIHsKPiA+IC0JCQkJaWYg
KHJldCAhPSAtRUFHQUlOKQo+ID4gLQkJCQkJdnFfZXJyKHZxLCAiRmFpbHVyZSBkZXRlY3RlZCAi
Cj4gPiAtCQkJCQkJImluIGluZGlyZWN0IGRlc2NyaXB0b3IgYXQgaWR4ICVkXG4iLCBpKTsKPiA+
IC0JCQkJcmV0dXJuIHJldDsKPiA+IC0JCQl9Cj4gPiAtCQkJY29udGludWU7Cj4gPiAtCQl9Cj4g
PiAtCj4gPiAtCQlpZiAoZGVzYy5mbGFncyAmIGNwdV90b192aG9zdDE2KHZxLCBWUklOR19ERVND
X0ZfV1JJVEUpKQo+ID4gLQkJCWFjY2VzcyA9IFZIT1NUX0FDQ0VTU19XTzsKPiA+IC0JCWVsc2UK
PiA+IC0JCQlhY2Nlc3MgPSBWSE9TVF9BQ0NFU1NfUk87Cj4gPiAtCQlyZXQgPSB0cmFuc2xhdGVf
ZGVzYyh2cSwgdmhvc3Q2NF90b19jcHUodnEsIGRlc2MuYWRkciksCj4gPiAtCQkJCSAgICAgdmhv
c3QzMl90b19jcHUodnEsIGRlc2MubGVuKSwgaW92ICsgaW92X2NvdW50LAo+ID4gLQkJCQkgICAg
IGlvdl9zaXplIC0gaW92X2NvdW50LCBhY2Nlc3MpOwo+ID4gLQkJaWYgKHVubGlrZWx5KHJldCA8
IDApKSB7Cj4gPiAtCQkJaWYgKHJldCAhPSAtRUFHQUlOKQo+ID4gLQkJCQl2cV9lcnIodnEsICJU
cmFuc2xhdGlvbiBmYWlsdXJlICVkIGRlc2NyaXB0b3IgaWR4ICVkXG4iLAo+ID4gLQkJCQkJcmV0
LCBpKTsKPiA+IC0JCQlyZXR1cm4gcmV0Owo+ID4gLQkJfQo+ID4gLQkJaWYgKGFjY2VzcyA9PSBW
SE9TVF9BQ0NFU1NfV08pIHsKPiA+IC0JCQkvKiBJZiB0aGlzIGlzIGFuIGlucHV0IGRlc2NyaXB0
b3IsCj4gPiAtCQkJICogaW5jcmVtZW50IHRoYXQgY291bnQuICovCj4gPiAtCQkJKmluX251bSAr
PSByZXQ7Cj4gPiAtCQkJaWYgKHVubGlrZWx5KGxvZyAmJiByZXQpKSB7Cj4gPiAtCQkJCWxvZ1sq
bG9nX251bV0uYWRkciA9IHZob3N0NjRfdG9fY3B1KHZxLCBkZXNjLmFkZHIpOwo+ID4gLQkJCQls
b2dbKmxvZ19udW1dLmxlbiA9IHZob3N0MzJfdG9fY3B1KHZxLCBkZXNjLmxlbik7Cj4gPiAtCQkJ
CSsrKmxvZ19udW07Cj4gPiAtCQkJfQo+ID4gLQkJfSBlbHNlIHsKPiA+IC0JCQkvKiBJZiBpdCdz
IGFuIG91dHB1dCBkZXNjcmlwdG9yLCB0aGV5J3JlIGFsbCBzdXBwb3NlZAo+ID4gLQkJCSAqIHRv
IGNvbWUgYmVmb3JlIGFueSBpbnB1dCBkZXNjcmlwdG9ycy4gKi8KPiA+IC0JCQlpZiAodW5saWtl
bHkoKmluX251bSkpIHsKPiA+IC0JCQkJdnFfZXJyKHZxLCAiRGVzY3JpcHRvciBoYXMgb3V0IGFm
dGVyIGluOiAiCj4gPiAtCQkJCSAgICAgICAiaWR4ICVkXG4iLCBpKTsKPiA+IC0JCQkJcmV0dXJu
IC1FSU5WQUw7Cj4gPiAtCQkJfQo+ID4gLQkJCSpvdXRfbnVtICs9IHJldDsKPiA+IC0JCX0KPiA+
IC0JfSB3aGlsZSAoKGkgPSBuZXh0X2Rlc2ModnEsICZkZXNjKSkgIT0gLTEpOwo+ID4gLQo+ID4g
LQkvKiBPbiBzdWNjZXNzLCBpbmNyZW1lbnQgYXZhaWwgaW5kZXguICovCj4gPiAtCXZxLT5sYXN0
X2F2YWlsX2lkeCsrOwo+ID4gLQo+ID4gLQkvKiBBc3N1bWUgbm90aWZpY2F0aW9ucyBmcm9tIGd1
ZXN0IGFyZSBkaXNhYmxlZCBhdCB0aGlzIHBvaW50LAo+ID4gLQkgKiBpZiB0aGV5IGFyZW4ndCB3
ZSB3b3VsZCBuZWVkIHRvIHVwZGF0ZSBhdmFpbF9ldmVudCBpbmRleC4gKi8KPiA+IC0JQlVHX09O
KCEodnEtPnVzZWRfZmxhZ3MgJiBWUklOR19VU0VEX0ZfTk9fTk9USUZZKSk7Cj4gPiAtCXJldHVy
biBoZWFkOwo+ID4gLX0KPiA+IC1FWFBPUlRfU1lNQk9MX0dQTCh2aG9zdF9nZXRfdnFfZGVzYyk7
Cj4gPiAtCj4gPiAgIHN0YXRpYyBzdHJ1Y3Qgdmhvc3RfZGVzYyAqcGVla19zcGxpdF9kZXNjKHN0
cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxKQo+ID4gICB7Cj4gPiAgIAlCVUdfT04oIXZxLT5uZGVz
Y3MpOwo+ID4gQEAgLTI0MjgsNyArMjE5MSw3IEBAIHN0YXRpYyBpbnQgZmV0Y2hfaW5kaXJlY3Rf
ZGVzY3Moc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEsCj4gPiAgIC8qIFRoaXMgZnVuY3Rpb24g
cmV0dXJucyBhIHZhbHVlID4gMCBpZiBhIGRlc2NyaXB0b3Igd2FzIGZvdW5kLCBvciAwIGlmIG5v
bmUgd2VyZSBmb3VuZC4KPiA+ICAgICogQSBuZWdhdGl2ZSBjb2RlIGlzIHJldHVybmVkIG9uIGVy
cm9yLiAqLwo+ID4gLXN0YXRpYyBpbnQgZmV0Y2hfZGVzY3Moc3RydWN0IHZob3N0X3ZpcnRxdWV1
ZSAqdnEpCj4gPiArc3RhdGljIGludCBmZXRjaF9idWYoc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAq
dnEpCj4gPiAgIHsKPiA+ICAgCXVuc2lnbmVkIGludCBpLCBoZWFkLCBmb3VuZCA9IDA7Cj4gPiAg
IAlzdHJ1Y3Qgdmhvc3RfZGVzYyAqbGFzdDsKPiA+IEBAIC0yNDQxLDcgKzIyMDQsMTEgQEAgc3Rh
dGljIGludCBmZXRjaF9kZXNjcyhzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSkKPiA+ICAgCS8q
IENoZWNrIGl0IGlzbid0IGRvaW5nIHZlcnkgc3RyYW5nZSB0aGluZ3Mgd2l0aCBkZXNjcmlwdG9y
IG51bWJlcnMuICovCj4gPiAgIAlsYXN0X2F2YWlsX2lkeCA9IHZxLT5sYXN0X2F2YWlsX2lkeDsK
PiA+IC0JaWYgKHZxLT5hdmFpbF9pZHggPT0gdnEtPmxhc3RfYXZhaWxfaWR4KSB7Cj4gPiArCWlm
ICh1bmxpa2VseSh2cS0+YXZhaWxfaWR4ID09IHZxLT5sYXN0X2F2YWlsX2lkeCkpIHsKPiA+ICsJ
CS8qIElmIHdlIGFscmVhZHkgaGF2ZSB3b3JrIHRvIGRvLCBkb24ndCBib3RoZXIgcmUtY2hlY2tp
bmcuICovCj4gPiArCQlpZiAobGlrZWx5KHZxLT5uZGVzY3MpKQo+ID4gKwkJCXJldHVybiAxOwo+
ID4gKwo+ID4gICAJCWlmICh1bmxpa2VseSh2aG9zdF9nZXRfYXZhaWxfaWR4KHZxLCAmYXZhaWxf
aWR4KSkpIHsKPiA+ICAgCQkJdnFfZXJyKHZxLCAiRmFpbGVkIHRvIGFjY2VzcyBhdmFpbCBpZHgg
YXQgJXBcbiIsCj4gPiAgIAkJCQkmdnEtPmF2YWlsLT5pZHgpOwo+ID4gQEAgLTI1MzIsNiArMjI5
OSw0MSBAQCBzdGF0aWMgaW50IGZldGNoX2Rlc2NzKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZx
KQo+ID4gICAJcmV0dXJuIDE7Cj4gPiAgIH0KPiA+ICsvKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMg
YSB2YWx1ZSA+IDAgaWYgYSBkZXNjcmlwdG9yIHdhcyBmb3VuZCwgb3IgMCBpZiBub25lIHdlcmUg
Zm91bmQuCj4gPiArICogQSBuZWdhdGl2ZSBjb2RlIGlzIHJldHVybmVkIG9uIGVycm9yLiAqLwo+
ID4gK3N0YXRpYyBpbnQgZmV0Y2hfZGVzY3Moc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEpCj4g
PiArewo+ID4gKwlpbnQgcmV0Owo+ID4gKwo+ID4gKwlpZiAodW5saWtlbHkodnEtPmZpcnN0X2Rl
c2MgPj0gdnEtPm5kZXNjcykpIHsKPiA+ICsJCXZxLT5maXJzdF9kZXNjID0gMDsKPiA+ICsJCXZx
LT5uZGVzY3MgPSAwOwo+ID4gKwl9Cj4gPiArCj4gPiArCWlmICh2cS0+bmRlc2NzKQo+ID4gKwkJ
cmV0dXJuIDE7Cj4gPiArCj4gPiArCWZvciAocmV0ID0gMTsKPiA+ICsJICAgICByZXQgPiAwICYm
IHZxLT5uZGVzY3MgPD0gdmhvc3RfdnFfbnVtX2JhdGNoX2Rlc2NzKHZxKTsKPiA+ICsJICAgICBy
ZXQgPSBmZXRjaF9idWYodnEpKQo+ID4gKwkJOwo+ID4gKwo+ID4gKwkvKiBPbiBzdWNjZXNzIHdl
IGV4cGVjdCBzb21lIGRlc2NzICovCj4gPiArCUJVR19PTihyZXQgPiAwICYmICF2cS0+bmRlc2Nz
KTsKPiA+ICsJcmV0dXJuIHJldDsKPiA+ICt9Cj4gPiArCj4gPiArLyogUmV2ZXJzZSB0aGUgZWZm
ZWN0cyBvZiBmZXRjaF9kZXNjcyAqLwo+ID4gK3N0YXRpYyB2b2lkIHVuZmV0Y2hfZGVzY3Moc3Ry
dWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEpCj4gPiArewo+ID4gKwlpbnQgaTsKPiA+ICsKPiA+ICsJ
Zm9yIChpID0gdnEtPmZpcnN0X2Rlc2M7IGkgPCB2cS0+bmRlc2NzOyArK2kpCj4gPiArCQlpZiAo
ISh2cS0+ZGVzY3NbaV0uZmxhZ3MgJiBWUklOR19ERVNDX0ZfTkVYVCkpCj4gPiArCQkJdnEtPmxh
c3RfYXZhaWxfaWR4IC09IDE7Cj4gPiArCXZxLT5uZGVzY3MgPSAwOwo+ID4gK30KPiAKPiAKPiBJ
cyBpdCBiZXR0ZXIgdG8gc2V0IGZpcnN0X2Rlc2MgdG8gemVybyBoZXJlPwo+IAo+IAo+ID4gKwo+
ID4gICAvKiBUaGlzIGxvb2tzIGluIHRoZSB2aXJ0cXVldWUgYW5kIGZvciB0aGUgZmlyc3QgYXZh
aWxhYmxlIGJ1ZmZlciwgYW5kIGNvbnZlcnRzCj4gPiAgICAqIGl0IHRvIGFuIGlvdmVjIGZvciBj
b252ZW5pZW50IGFjY2Vzcy4gIFNpbmNlIGRlc2NyaXB0b3JzIGNvbnNpc3Qgb2Ygc29tZQo+ID4g
ICAgKiBudW1iZXIgb2Ygb3V0cHV0IHRoZW4gc29tZSBudW1iZXIgb2YgaW5wdXQgZGVzY3JpcHRv
cnMsIGl0J3MgYWN0dWFsbHkgdHdvCj4gPiBAQCAtMjU0MCw3ICsyMzQyLDcgQEAgc3RhdGljIGlu
dCBmZXRjaF9kZXNjcyhzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSkKPiA+ICAgICogVGhpcyBm
dW5jdGlvbiByZXR1cm5zIHRoZSBkZXNjcmlwdG9yIG51bWJlciBmb3VuZCwgb3IgdnEtPm51bSAo
d2hpY2ggaXMKPiA+ICAgICogbmV2ZXIgYSB2YWxpZCBkZXNjcmlwdG9yIG51bWJlcikgaWYgbm9u
ZSB3YXMgZm91bmQuICBBIG5lZ2F0aXZlIGNvZGUgaXMKPiA+ICAgICogcmV0dXJuZWQgb24gZXJy
b3IuICovCj4gPiAtaW50IHZob3N0X2dldF92cV9kZXNjX2JhdGNoKHN0cnVjdCB2aG9zdF92aXJ0
cXVldWUgKnZxLAo+ID4gK2ludCB2aG9zdF9nZXRfdnFfZGVzYyhzdHJ1Y3Qgdmhvc3RfdmlydHF1
ZXVlICp2cSwKPiA+ICAgCQkgICAgICBzdHJ1Y3QgaW92ZWMgaW92W10sIHVuc2lnbmVkIGludCBp
b3Zfc2l6ZSwKPiA+ICAgCQkgICAgICB1bnNpZ25lZCBpbnQgKm91dF9udW0sIHVuc2lnbmVkIGlu
dCAqaW5fbnVtLAo+ID4gICAJCSAgICAgIHN0cnVjdCB2aG9zdF9sb2cgKmxvZywgdW5zaWduZWQg
aW50ICpsb2dfbnVtKQo+ID4gQEAgLTI1NDksNyArMjM1MSw3IEBAIGludCB2aG9zdF9nZXRfdnFf
ZGVzY19iYXRjaChzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSwKPiA+ICAgCWludCBpOwo+ID4g
ICAJaWYgKHJldCA8PSAwKQo+ID4gLQkJZ290byBlcnJfZmV0Y2g7Cj4gPiArCQlnb3RvIGVycjsK
PiA+ICAgCS8qIE5vdyBjb252ZXJ0IHRvIElPViAqLwo+ID4gICAJLyogV2hlbiB3ZSBzdGFydCB0
aGVyZSBhcmUgbm9uZSBvZiBlaXRoZXIgaW5wdXQgbm9yIG91dHB1dC4gKi8KPiA+IEBAIC0yNTU3
LDcgKzIzNTksNyBAQCBpbnQgdmhvc3RfZ2V0X3ZxX2Rlc2NfYmF0Y2goc3RydWN0IHZob3N0X3Zp
cnRxdWV1ZSAqdnEsCj4gPiAgIAlpZiAodW5saWtlbHkobG9nKSkKPiA+ICAgCQkqbG9nX251bSA9
IDA7Cj4gPiAtCWZvciAoaSA9IDA7IGkgPCB2cS0+bmRlc2NzOyArK2kpIHsKPiA+ICsJZm9yIChp
ID0gdnEtPmZpcnN0X2Rlc2M7IGkgPCB2cS0+bmRlc2NzOyArK2kpIHsKPiA+ICAgCQl1bnNpZ25l
ZCBpb3ZfY291bnQgPSAqaW5fbnVtICsgKm91dF9udW07Cj4gPiAgIAkJc3RydWN0IHZob3N0X2Rl
c2MgKmRlc2MgPSAmdnEtPmRlc2NzW2ldOwo+ID4gICAJCWludCBhY2Nlc3M7Cj4gPiBAQCAtMjYw
MywyNCArMjQwNSwyNiBAQCBpbnQgdmhvc3RfZ2V0X3ZxX2Rlc2NfYmF0Y2goc3RydWN0IHZob3N0
X3ZpcnRxdWV1ZSAqdnEsCj4gPiAgIAkJfQo+ID4gICAJCXJldCA9IGRlc2MtPmlkOwo+ID4gKwo+
ID4gKwkJaWYgKCEoZGVzYy0+ZmxhZ3MgJiBWUklOR19ERVNDX0ZfTkVYVCkpCj4gPiArCQkJYnJl
YWs7Cj4gPiAgIAl9Cj4gPiAtCXZxLT5uZGVzY3MgPSAwOwo+ID4gKwl2cS0+Zmlyc3RfZGVzYyA9
IGkgKyAxOwo+ID4gICAJcmV0dXJuIHJldDsKPiA+ICAgZXJyOgo+ID4gLQl2aG9zdF9kaXNjYXJk
X3ZxX2Rlc2ModnEsIDEpOwo+ID4gLWVycl9mZXRjaDoKPiA+IC0JdnEtPm5kZXNjcyA9IDA7Cj4g
PiArCXVuZmV0Y2hfZGVzY3ModnEpOwo+ID4gICAJcmV0dXJuIHJldDsKPiA+ICAgfQo+ID4gLUVY
UE9SVF9TWU1CT0xfR1BMKHZob3N0X2dldF92cV9kZXNjX2JhdGNoKTsKPiA+ICtFWFBPUlRfU1lN
Qk9MX0dQTCh2aG9zdF9nZXRfdnFfZGVzYyk7Cj4gPiAgIC8qIFJldmVyc2UgdGhlIGVmZmVjdCBv
ZiB2aG9zdF9nZXRfdnFfZGVzYy4gVXNlZnVsIGZvciBlcnJvciBoYW5kbGluZy4gKi8KPiA+ICAg
dm9pZCB2aG9zdF9kaXNjYXJkX3ZxX2Rlc2Moc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEsIGlu
dCBuKQo+ID4gICB7Cj4gPiArCXVuZmV0Y2hfZGVzY3ModnEpOwo+ID4gICAJdnEtPmxhc3RfYXZh
aWxfaWR4IC09IG47Cj4gCj4gCj4gU28gdW5mZXRjaF9kZXNjcygpIGhhcyBkZWNyZWFzZWQgbGFz
dF9hdmFpbF9pZHguCj4gQ2FuIHdlIGZpeCB0aGlzIGJ5IGxldHRpbmcgdW5mZXRjaF9kZXNjcygp
IHJldHVybiB0aGUgbnVtYmVyIGFuZCB0aGVuIHdlIGNhbgo+IGRvOgo+IAo+IGludCBkID0gdW5m
ZXRjaF9kZXNjcyh2cSk7Cj4gdnEtPmxhc3RfYXZhaWxfaWR4IC09IChuID4gZCkgPyBuIC0gZDog
MDsKPiAKPiBUaGFua3MKCgpUaGF0J3MgaW50ZW50aW9uYWwgSSB0aGluayAtIHdlIG5lZWQgYm90
aC4KClVuZmV0Y2hfZGVzY3MgZHJvcHMgdGhlIGRlc2NyaXB0b3JzIGluIHRoZSBjYWNoZSB0aGF0
IHdlcmUKKm5vdCByZXR1cm5lZCB0byBjYWxsZXIqIHRocm91Z2ggZ2V0X3ZxX2Rlc2MuCgp2aG9z
dF9kaXNjYXJkX3ZxX2Rlc2MgZHJvcHMgdGhlIG9uZXMgdGhhdCB3ZXJlIHJldHVybmVkIHRocm91
Z2ggZ2V0X3ZxX2Rlc2MuCgpEaWQgSSBtaXNzIGFueXRoaW5nPwoKCgo+IAo+ID4gICB9Cj4gPiAg
IEVYUE9SVF9TWU1CT0xfR1BMKHZob3N0X2Rpc2NhcmRfdnFfZGVzYyk7Cj4gPiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy92aG9zdC92aG9zdC5oIGIvZHJpdmVycy92aG9zdC92aG9zdC5oCj4gPiBpbmRl
eCA4NzA4OWQ1MTQ5MGQuLmZlZDM2YWY1YzQ0NCAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvdmhv
c3Qvdmhvc3QuaAo+ID4gKysrIGIvZHJpdmVycy92aG9zdC92aG9zdC5oCj4gPiBAQCAtODEsNiAr
ODEsNyBAQCBzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlIHsKPiA+ICAgCXN0cnVjdCB2aG9zdF9kZXNj
ICpkZXNjczsKPiA+ICAgCWludCBuZGVzY3M7Cj4gPiArCWludCBmaXJzdF9kZXNjOwo+ID4gICAJ
aW50IG1heF9kZXNjczsKPiA+ICAgCXN0cnVjdCBmaWxlICpraWNrOwo+ID4gQEAgLTE4OSwxMCAr
MTkwLDYgQEAgbG9uZyB2aG9zdF92cmluZ19pb2N0bChzdHJ1Y3Qgdmhvc3RfZGV2ICpkLCB1bnNp
Z25lZCBpbnQgaW9jdGwsIHZvaWQgX191c2VyICphcmcKPiA+ICAgYm9vbCB2aG9zdF92cV9hY2Nl
c3Nfb2soc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEpOwo+ID4gICBib29sIHZob3N0X2xvZ19h
Y2Nlc3Nfb2soc3RydWN0IHZob3N0X2RldiAqKTsKPiA+IC1pbnQgdmhvc3RfZ2V0X3ZxX2Rlc2Nf
YmF0Y2goc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqLAo+ID4gLQkJICAgICAgc3RydWN0IGlvdmVj
IGlvdltdLCB1bnNpZ25lZCBpbnQgaW92X2NvdW50LAo+ID4gLQkJICAgICAgdW5zaWduZWQgaW50
ICpvdXRfbnVtLCB1bnNpZ25lZCBpbnQgKmluX251bSwKPiA+IC0JCSAgICAgIHN0cnVjdCB2aG9z
dF9sb2cgKmxvZywgdW5zaWduZWQgaW50ICpsb2dfbnVtKTsKPiA+ICAgaW50IHZob3N0X2dldF92
cV9kZXNjKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKiwKPiA+ICAgCQkgICAgICBzdHJ1Y3QgaW92
ZWMgaW92W10sIHVuc2lnbmVkIGludCBpb3ZfY291bnQsCj4gPiAgIAkJICAgICAgdW5zaWduZWQg
aW50ICpvdXRfbnVtLCB1bnNpZ25lZCBpbnQgKmluX251bSwKPiA+IEBAIC0yNjEsNiArMjU4LDgg
QEAgc3RhdGljIGlubGluZSB2b2lkIHZob3N0X3ZxX3NldF9iYWNrZW5kKHN0cnVjdCB2aG9zdF92
aXJ0cXVldWUgKnZxLAo+ID4gICAJCQkJCXZvaWQgKnByaXZhdGVfZGF0YSkKPiA+ICAgewo+ID4g
ICAJdnEtPnByaXZhdGVfZGF0YSA9IHByaXZhdGVfZGF0YTsKPiA+ICsJdnEtPm5kZXNjcyA9IDA7
Cj4gPiArCXZxLT5maXJzdF9kZXNjID0gMDsKPiA+ICAgfQo+ID4gICAvKioKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxp
bmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczov
L2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlv
bg==
