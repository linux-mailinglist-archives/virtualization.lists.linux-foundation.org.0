Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp1.osuosl.org (smtp1.osuosl.org [IPv6:2605:bc80:3010::138])
	by mail.lfdr.de (Postfix) with ESMTPS id 647A84B61B8
	for <lists.virtualization@lfdr.de>; Tue, 15 Feb 2022 04:34:55 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp1.osuosl.org (Postfix) with ESMTP id C228C813A3;
	Tue, 15 Feb 2022 03:34:53 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
	by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id qA7WySn1ImJ3; Tue, 15 Feb 2022 03:34:52 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp1.osuosl.org (Postfix) with ESMTPS id DEFF881394;
	Tue, 15 Feb 2022 03:34:51 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 39E24C0073;
	Tue, 15 Feb 2022 03:34:51 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [IPv6:2605:bc80:3010::137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 725C2C000B
 for <virtualization@lists.linux-foundation.org>;
 Tue, 15 Feb 2022 03:34:49 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id 529E1410D8
 for <virtualization@lists.linux-foundation.org>;
 Tue, 15 Feb 2022 03:34:49 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp4.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id HExqcYUcatTD
 for <virtualization@lists.linux-foundation.org>;
 Tue, 15 Feb 2022 03:34:48 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp4.osuosl.org (Postfix) with ESMTPS id C5C244099B
 for <virtualization@lists.linux-foundation.org>;
 Tue, 15 Feb 2022 03:34:47 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1644896086;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=SV91EC1qIVu249rdG8c9qLwhivu0KgO1VbzennYEj3I=;
 b=XcOrEvmk7bM9Y5oaEZamXAV1IRe+HwSmhwIeE7KY6KdC7bsgZ2lpDG6py0VsrTCyTVsTpB
 PCAJhyVdqYjfNNFwPu65Z6iF1Ou0DUS9xOJyVDk4687U4+tFGTInUVagwCoGtibCvfOC9F
 MqZmZ1rZA9bHTFxMCaPWP/dAzOzXghA=
Received: from mail-lj1-f197.google.com (mail-lj1-f197.google.com
 [209.85.208.197]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 us-mta-658-Q7YG9vJ_Mj-2A6T2tb5nkg-1; Mon, 14 Feb 2022 22:34:45 -0500
X-MC-Unique: Q7YG9vJ_Mj-2A6T2tb5nkg-1
Received: by mail-lj1-f197.google.com with SMTP id
 c21-20020a2ebf15000000b00244de1e4d37so681604ljr.5
 for <virtualization@lists.linux-foundation.org>;
 Mon, 14 Feb 2022 19:34:44 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=SV91EC1qIVu249rdG8c9qLwhivu0KgO1VbzennYEj3I=;
 b=aRo3AlvxHkjbj899ujMeL8zwWIBRXSoAT76lbqHcFO0Fwh36IWBWpP73zsbDMtUk62
 x/jX8sXqENolvWfMIAOl5hnKB5omXeYWh9zk+KlsC8Xkm8qDh0gc2ziMNdyIhP46YlOB
 hvSmw5PNsMMTzKX+s2ngTtP0HYM0xFEnjGRspmAVnYIvomZ8IYZAuCj/5LxIC1DNK5Ty
 qWFmr1FaSrocP0lS//S6fWY3W+dfI7ODkNRl4EUdaRLPu1ri1ixIZMGwIpejPw6ieGO0
 05X4ovGOuhgJN398vMVU5aMkJmsAOeiu/eomQgGNzeZuanJcqgKYDEaSxe6CqW/8ttsa
 wLyA==
X-Gm-Message-State: AOAM532es52Te45rIkx0ivuqXC5RJtvbbftBy635dSCvryT4zTXBps06
 AaAY7lr8Xrrs/SIGNaTye3JfQwCGIOXHrffz41DLQhAe9w/8/zMs0d5EZ8y0GY24cSm/5USK9Oq
 5xS8rxC5PD3us7elSbTdT/SMlHw1x6XIvbY8awhkTfmb23nyar0wbD4ovDw==
X-Received: by 2002:a2e:a80c:: with SMTP id l12mr1229867ljq.107.1644896083371; 
 Mon, 14 Feb 2022 19:34:43 -0800 (PST)
X-Google-Smtp-Source: ABdhPJzggEMFvnr440c/h/ht0U/NsKGjtsLVyBMXxoAsgGvqsdHnPotV5iUxc4q0ttoYhNgXFe/fkuLOibekxYWO7T0=
X-Received: by 2002:a2e:a80c:: with SMTP id l12mr1229850ljq.107.1644896082968; 
 Mon, 14 Feb 2022 19:34:42 -0800 (PST)
MIME-Version: 1.0
References: <20220203072735.189716-1-lingshan.zhu@intel.com>
 <20220203072735.189716-5-lingshan.zhu@intel.com>
 <c2036174-22ae-0882-1783-53a5d20a03ad@redhat.com>
 <20220214091842-mutt-send-email-mst@kernel.org>
In-Reply-To: <20220214091842-mutt-send-email-mst@kernel.org>
From: Jason Wang <jasowang@redhat.com>
Date: Tue, 15 Feb 2022 11:34:31 +0800
Message-ID: <CACGkMEtMDqsLk9O+pHUgd85NxH_0dT=QJZSy=GsnDfKq3cXC3Q@mail.gmail.com>
Subject: Re: [PATCH V4 4/4] vDPA/ifcvf: implement shared IRQ feature
To: "Michael S. Tsirkin" <mst@redhat.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: netdev <netdev@vger.kernel.org>, Zhu Lingshan <lingshan.zhu@intel.com>,
 virtualization <virtualization@lists.linux-foundation.org>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gTW9uLCBGZWIgMTQsIDIwMjIgYXQgMTA6MjUgUE0gTWljaGFlbCBTLiBUc2lya2luIDxtc3RA
cmVkaGF0LmNvbT4gd3JvdGU6Cj4KPiBPbiBNb24sIEZlYiAxNCwgMjAyMiBhdCAwMzoxOToyNVBN
ICswODAwLCBKYXNvbiBXYW5nIHdyb3RlOgo+ID4KPiA+IOWcqCAyMDIyLzIvMyDkuIvljYgzOjI3
LCBaaHUgTGluZ3NoYW4g5YaZ6YGTOgo+ID4gPiBPbiBzb21lIHBsYXRmb3Jtcy9kZXZpY2VzLCB0
aGVyZSBtYXkgbm90IGJlIGVub3VnaCBNU0kgdmVjdG9yCj4gPiA+IHNsb3RzIGFsbG9jYXRlZCBm
b3IgdmlydHF1ZXVlcyBhbmQgY29uZmlnIGNoYW5nZXMuIEluIHN1Y2ggYSBjYXNlLAo+ID4gPiB0
aGUgaW50ZXJydXB0IHNvdXJjZXModmlydHF1ZXVlcywgY29uZmlnIGNoYW5nZXMpIG11c3Qgc2hh
cmUKPiA+ID4gYW4gSVJRL3ZlY3RvciwgdG8gYXZvaWQgaW5pdGlhbGl6YXRpb24gZmFpbHVyZXMs
IGtlZXAKPiA+ID4gdGhlIGRldmljZSBmdW5jdGlvbmFsLgo+ID4gPgo+ID4gPiBUaGlzIGNvbW1p
dCBoYW5kbGVzIHRocmVlIGNhc2VzOgo+ID4gPiAoMSkgbnVtYmVyIG9mIHRoZSBhbGxvY2F0ZWQg
dmVjdG9ycyA9PSB0aGUgbnVtYmVyIG9mIHZpcnRxdWV1ZXMgKyAxCj4gPiA+IChjb25maWcgY2hh
bmdlcyksIGV2ZXJ5IHZpcnRxdWV1ZSBhbmQgdGhlIGNvbmZpZyBpbnRlcnJ1cHQgaGFzCj4gPiA+
IGEgc2VwYXJhdGVkIHZlY3Rvci9JUlEsIHRoZSBiZXN0IGFuZCB0aGUgbW9zdCBsaWtlbHkgY2Fz
ZS4KPiA+ID4gKDIpIG51bWJlciBvZiB0aGUgYWxsb2NhdGVkIHZlY3RvcnMgaXMgbGVzcyB0aGFu
IHRoZSBiZXN0IGNhc2UsIGJ1dAo+ID4gPiBncmVhdGVyIHRoYW4gMS4gSW4gdGhpcyBjYXNlLCBh
bGwgdmlydHF1ZXVlcyBzaGFyZSBhIHZlY3Rvci9JUlEsCj4gPiA+IHRoZSBjb25maWcgaW50ZXJy
dXB0IGhhcyBhIHNlcGFyYXRlZCB2ZWN0b3IvSVJRCj4gPiA+ICgzKSBvbmx5IG9uZSB2ZWN0b3Ig
aXMgYWxsb2NhdGVkLCBpbiB0aGlzIGNhc2UsIHRoZSB2aXJ0cXVldWVzIGFuZAo+ID4gPiB0aGUg
Y29uZmlnIGludGVycnVwdCBzaGFyZSBhIHZlY3Rvci9JUlEuIFRoZSB3b3JzdCBhbmQgbW9zdAo+
ID4gPiB1bmxpa2VseSBjYXNlLgo+ID4gPgo+ID4gPiBPdGhlcndpc2UsIGl0IG5lZWRzIHRvIGZh
aWwuCj4gPiA+Cj4gPiA+IFRoaXMgY29tbWl0IGludHJvZHVjZXMgc29tZSBoZWxwZXIgZnVuY3Rp
b25zOgo+ID4gPiBpZmN2Zl9zZXRfdnFfdmVjdG9yKCkgYW5kIGlmY3ZmX3NldF9jb25maWdfdmVj
dG9yKCkgc2V0cyB2aXJ0cXVldWUKPiA+ID4gdmVjdG9yIGFuZCBjb25maWcgdmVjdG9yIGluIHRo
ZSBkZXZpY2UgY29uZmlnIHNwYWNlLCBzbyB0aGF0Cj4gPiA+IHRoZSBkZXZpY2UgY2FuIHNlbmQg
aW50ZXJydXB0IERNQS4KPiA+ID4KPiA+ID4gVGhpcyBjb21taXQgYWRkcyBzb21lIGZpZWxkcyBp
biBzdHJ1Y3QgaWZjdmZfaHcgYW5kIHJlLXBsYWNlZAo+ID4gPiB0aGUgZXhpc3RlZCBmaWVsZHMg
dG8gYmUgYWxpZ25lZCB3aXRoIHRoZSBjYWNoZWxpbmUuCj4gPiA+Cj4gPiA+IFNpZ25lZC1vZmYt
Ynk6IFpodSBMaW5nc2hhbiA8bGluZ3NoYW4uemh1QGludGVsLmNvbT4KPiA+ID4gLS0tCj4gPiA+
ICAgZHJpdmVycy92ZHBhL2lmY3ZmL2lmY3ZmX2Jhc2UuYyB8ICA0NyArKysrLS0KPiA+ID4gICBk
cml2ZXJzL3ZkcGEvaWZjdmYvaWZjdmZfYmFzZS5oIHwgIDIzICsrLQo+ID4gPiAgIGRyaXZlcnMv
dmRwYS9pZmN2Zi9pZmN2Zl9tYWluLmMgfCAyNDMgKysrKysrKysrKysrKysrKysrKysrKysrKysr
LS0tLS0KPiA+ID4gICAzIGZpbGVzIGNoYW5nZWQsIDI1NiBpbnNlcnRpb25zKCspLCA1NyBkZWxl
dGlvbnMoLSkKPiA+ID4KPiA+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmRwYS9pZmN2Zi9pZmN2
Zl9iYXNlLmMgYi9kcml2ZXJzL3ZkcGEvaWZjdmYvaWZjdmZfYmFzZS5jCj4gPiA+IGluZGV4IDM5
NzY5MmFlNjcxYy4uMThkY2I2M2FiMWUzIDEwMDY0NAo+ID4gPiAtLS0gYS9kcml2ZXJzL3ZkcGEv
aWZjdmYvaWZjdmZfYmFzZS5jCj4gPiA+ICsrKyBiL2RyaXZlcnMvdmRwYS9pZmN2Zi9pZmN2Zl9i
YXNlLmMKPiA+ID4gQEAgLTE1LDYgKzE1LDM2IEBAIHN0cnVjdCBpZmN2Zl9hZGFwdGVyICp2Zl90
b19hZGFwdGVyKHN0cnVjdCBpZmN2Zl9odyAqaHcpCj4gPiA+ICAgICByZXR1cm4gY29udGFpbmVy
X29mKGh3LCBzdHJ1Y3QgaWZjdmZfYWRhcHRlciwgdmYpOwo+ID4gPiAgIH0KPiA+ID4gK2ludCBp
ZmN2Zl9zZXRfdnFfdmVjdG9yKHN0cnVjdCBpZmN2Zl9odyAqaHcsIHUxNiBxaWQsIGludCB2ZWN0
b3IpCj4gPiA+ICt7Cj4gPiA+ICsgICBzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnIF9faW9t
ZW0gKmNmZyA9IGh3LT5jb21tb25fY2ZnOwo+ID4gPiArICAgc3RydWN0IGlmY3ZmX2FkYXB0ZXIg
KmlmY3ZmID0gdmZfdG9fYWRhcHRlcihodyk7Cj4gPiA+ICsKPiA+ID4gKyAgIGlmY19pb3dyaXRl
MTYocWlkLCAmY2ZnLT5xdWV1ZV9zZWxlY3QpOwo+ID4gPiArICAgaWZjX2lvd3JpdGUxNih2ZWN0
b3IsICZjZmctPnF1ZXVlX21zaXhfdmVjdG9yKTsKPiA+ID4gKyAgIGlmIChpZmNfaW9yZWFkMTYo
JmNmZy0+cXVldWVfbXNpeF92ZWN0b3IpID09IFZJUlRJT19NU0lfTk9fVkVDVE9SKSB7Cj4gPiA+
ICsgICAgICAgICAgIElGQ1ZGX0VSUihpZmN2Zi0+cGRldiwgIk5vIG1zaXggdmVjdG9yIGZvciBx
dWV1ZSAldVxuIiwgcWlkKTsKPiA+ID4gKyAgICAgICAgICAgICAgICAgICByZXR1cm4gLUVJTlZB
TDsKPiA+ID4gKyAgIH0KPiA+Cj4gPgo+ID4gTGV0J3MgbGVhdmUgdGhpcyBjaGVjayBmb3IgdGhl
IGNhbGxlciwgRS5nIGNhbiBjYWxsZXIgdHJ5IHRvIGFzc2lnbgo+ID4gTk9fVkVDVE9SIGR1cmlu
ZyB1bmktbml0Pwo+Cj4KPiBIbW0gSSdtIG5vdCBzdXJlIEkgYWdyZWUuIENhbGxlciB3aWxsIGhh
dmUgdG8gd3JpdGUgcXVldWUgc2VsZWN0Cj4gYWdhaW4sIGFuZCB0aGF0J3MgYW4gZXh0cmEgSU8s
IHdoaWNoIGlzIGEgd2FzdGUuCj4gQW5kIGhhdmluZyBmdW5jdGlvbiBjaGVja2luZyBpdHNlbGYg
anVzdCBzZWVtcyBiZXR0ZXIgY29udGFpbmVkLgoKSXQncyBhcyBzaW1wbGUgYXMganVzdCByZXR1
cm4gd2hhdCB3ZSByZWFkIGhlcmUgbGlrZSB2aXJ0aW9fcGNpIGRpZDoKCnUxNiB2cF9tb2Rlcm5f
cXVldWVfdmVjdG9yKHN0cnVjdCB2aXJ0aW9fcGNpX21vZGVybl9kZXZpY2UgKm1kZXYsCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHUxNiBpbmRleCwgdTE2IHZlY3RvcikKewogICAgICAgIHN0
cnVjdCB2aXJ0aW9fcGNpX2NvbW1vbl9jZmcgX19pb21lbSAqY2ZnID0gbWRldi0+Y29tbW9uOwoK
ICAgICAgICB2cF9pb3dyaXRlMTYoaW5kZXgsICZjZmctPnF1ZXVlX3NlbGVjdCk7CiAgICAgICAg
dnBfaW93cml0ZTE2KHZlY3RvciwgJmNmZy0+cXVldWVfbXNpeF92ZWN0b3IpOwogICAgICAgIC8q
IEZsdXNoIHRoZSB3cml0ZSBvdXQgdG8gZGV2aWNlICovCiAgICAgICAgcmV0dXJuIHZwX2lvcmVh
ZDE2KCZjZmctPnF1ZXVlX21zaXhfdmVjdG9yKTsKfQpFWFBPUlRfU1lNQk9MX0dQTCh2cF9tb2Rl
cm5fcXVldWVfdmVjdG9yKTsKClRoZW4gdGhlIGNhbGxlciBjYW4gZGVjaWRlIHRvIGNoZWNrIGl0
IHdpdGggTk9fVkVDVE9SIGlmIG5lZWRlZC4KQ3VycmVudCBjb2RlIHdpbGwgYnJlYWsgdGhlIGNh
bGxlcnMgdGhhdCB3YW50IHRvIHNldCBOT19WRUNUT1IuCgo+Cj4gPgo+ID4gPiArCj4gPiA+ICsg
ICByZXR1cm4gMDsKPiA+ID4gK30KPiA+ID4gKwo+ID4gPiAraW50IGlmY3ZmX3NldF9jb25maWdf
dmVjdG9yKHN0cnVjdCBpZmN2Zl9odyAqaHcsIGludCB2ZWN0b3IpCj4gPiA+ICt7Cj4gPiA+ICsg
ICBzdHJ1Y3QgdmlydGlvX3BjaV9jb21tb25fY2ZnIF9faW9tZW0gKmNmZyA9IGh3LT5jb21tb25f
Y2ZnOwo+ID4gPiArICAgc3RydWN0IGlmY3ZmX2FkYXB0ZXIgKmlmY3ZmID0gdmZfdG9fYWRhcHRl
cihodyk7Cj4gPiA+ICsKPiA+ID4gKyAgIGNmZyA9IGh3LT5jb21tb25fY2ZnOwo+ID4gPiArICAg
aWZjX2lvd3JpdGUxNih2ZWN0b3IsICAmY2ZnLT5tc2l4X2NvbmZpZyk7Cj4gPiA+ICsgICBpZiAo
aWZjX2lvcmVhZDE2KCZjZmctPm1zaXhfY29uZmlnKSA9PSBWSVJUSU9fTVNJX05PX1ZFQ1RPUikg
ewo+ID4gPiArICAgICAgICAgICBJRkNWRl9FUlIoaWZjdmYtPnBkZXYsICJObyBtc2l4IHZlY3Rv
ciBmb3IgZGV2aWNlIGNvbmZpZ1xuIik7Cj4gPiA+ICsgICAgICAgICAgIHJldHVybiAtRUlOVkFM
Owo+ID4gPiArICAgfQo+ID4KPiA+Cj4gPiBTaW1pbGFyIHF1ZXN0aW9uIGFzIGFib3ZlLgo+ID4K
PiA+Cj4gPiA+ICsKPiA+ID4gKyAgIHJldHVybiAwOwo+ID4gPiArfQo+ID4gPiArCj4gPiA+ICAg
c3RhdGljIHZvaWQgX19pb21lbSAqZ2V0X2NhcF9hZGRyKHN0cnVjdCBpZmN2Zl9odyAqaHcsCj4g
PiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCB2aXJ0aW9fcGNpX2NhcCAq
Y2FwKQo+ID4gPiAgIHsKPiA+ID4gQEAgLTE0MCw2ICsxNzAsOCBAQCBpbnQgaWZjdmZfaW5pdF9o
dyhzdHJ1Y3QgaWZjdmZfaHcgKmh3LCBzdHJ1Y3QgcGNpX2RldiAqcGRldikKPiA+ID4gICAgICAg
ICAgICAgICBody0+Y29tbW9uX2NmZywgaHctPm5vdGlmeV9iYXNlLCBody0+aXNyLAo+ID4gPiAg
ICAgICAgICAgICAgIGh3LT5kZXZfY2ZnLCBody0+bm90aWZ5X29mZl9tdWx0aXBsaWVyKTsKPiA+
ID4gKyAgIGh3LT52cXNfc2hhcmVkX2lycSA9IC1FSU5WQUw7Cj4gPiA+ICsKPiA+ID4gICAgIHJl
dHVybiAwOwo+ID4gPiAgIH0KPiA+ID4gQEAgLTMyMSwxMiArMzUzLDYgQEAgc3RhdGljIGludCBp
ZmN2Zl9od19lbmFibGUoc3RydWN0IGlmY3ZmX2h3ICpodykKPiA+ID4gICAgIGlmY3ZmID0gdmZf
dG9fYWRhcHRlcihodyk7Cj4gPiA+ICAgICBjZmcgPSBody0+Y29tbW9uX2NmZzsKPiA+ID4gLSAg
IGlmY19pb3dyaXRlMTYoSUZDVkZfTVNJX0NPTkZJR19PRkYsICZjZmctPm1zaXhfY29uZmlnKTsK
PiA+ID4gLQo+ID4gPiAtICAgaWYgKGlmY19pb3JlYWQxNigmY2ZnLT5tc2l4X2NvbmZpZykgPT0g
VklSVElPX01TSV9OT19WRUNUT1IpIHsKPiA+ID4gLSAgICAgICAgICAgSUZDVkZfRVJSKGlmY3Zm
LT5wZGV2LCAiTm8gbXNpeCB2ZWN0b3IgZm9yIGRldmljZSBjb25maWdcbiIpOwo+ID4gPiAtICAg
ICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiA+ID4gLSAgIH0KPiA+ID4gICAgIGZvciAoaSA9IDA7
IGkgPCBody0+bnJfdnJpbmc7IGkrKykgewo+ID4gPiAgICAgICAgICAgICBpZiAoIWh3LT52cmlu
Z1tpXS5yZWFkeSkKPiA+ID4gQEAgLTM0MCwxNSArMzY2LDYgQEAgc3RhdGljIGludCBpZmN2Zl9o
d19lbmFibGUoc3RydWN0IGlmY3ZmX2h3ICpodykKPiA+ID4gICAgICAgICAgICAgaWZjX2lvd3Jp
dGU2NF90d29wYXJ0KGh3LT52cmluZ1tpXS51c2VkLCAmY2ZnLT5xdWV1ZV91c2VkX2xvLAo+ID4g
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmY2ZnLT5xdWV1ZV91c2VkX2hpKTsK
PiA+ID4gICAgICAgICAgICAgaWZjX2lvd3JpdGUxNihody0+dnJpbmdbaV0uc2l6ZSwgJmNmZy0+
cXVldWVfc2l6ZSk7Cj4gPiA+IC0gICAgICAgICAgIGlmY19pb3dyaXRlMTYoaSArIElGQ1ZGX01T
SV9RVUVVRV9PRkYsICZjZmctPnF1ZXVlX21zaXhfdmVjdG9yKTsKPiA+ID4gLQo+ID4gPiAtICAg
ICAgICAgICBpZiAoaWZjX2lvcmVhZDE2KCZjZmctPnF1ZXVlX21zaXhfdmVjdG9yKSA9PQo+ID4g
PiAtICAgICAgICAgICAgICAgVklSVElPX01TSV9OT19WRUNUT1IpIHsKPiA+ID4gLSAgICAgICAg
ICAgICAgICAgICBJRkNWRl9FUlIoaWZjdmYtPnBkZXYsCj4gPiA+IC0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICJObyBtc2l4IHZlY3RvciBmb3IgcXVldWUgJXVcbiIsIGkpOwo+ID4gPiAt
ICAgICAgICAgICAgICAgICAgIHJldHVybiAtRUlOVkFMOwo+ID4gPiAtICAgICAgICAgICB9Cj4g
PiA+IC0KPiA+ID4gICAgICAgICAgICAgaWZjdmZfc2V0X3ZxX3N0YXRlKGh3LCBpLCBody0+dnJp
bmdbaV0ubGFzdF9hdmFpbF9pZHgpOwo+ID4gPiAgICAgICAgICAgICBpZmNfaW93cml0ZTE2KDEs
ICZjZmctPnF1ZXVlX2VuYWJsZSk7Cj4gPiA+ICAgICB9Cj4gPiA+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL3ZkcGEvaWZjdmYvaWZjdmZfYmFzZS5oIGIvZHJpdmVycy92ZHBhL2lmY3ZmL2lmY3ZmX2Jh
c2UuaAo+ID4gPiBpbmRleCA5NDliNGZiOWQ1NTQuLjljZmUwODhjODJlOSAxMDA2NDQKPiA+ID4g
LS0tIGEvZHJpdmVycy92ZHBhL2lmY3ZmL2lmY3ZmX2Jhc2UuaAo+ID4gPiArKysgYi9kcml2ZXJz
L3ZkcGEvaWZjdmYvaWZjdmZfYmFzZS5oCj4gPiA+IEBAIC0yNyw4ICsyNyw2IEBACj4gPiA+ICAg
I2RlZmluZSBJRkNWRl9RVUVVRV9BTElHTk1FTlQgICAgIFBBR0VfU0laRQo+ID4gPiAgICNkZWZp
bmUgSUZDVkZfUVVFVUVfTUFYICAgICAgICAgICAzMjc2OAo+ID4gPiAtI2RlZmluZSBJRkNWRl9N
U0lfQ09ORklHX09GRiAgICAgICAwCj4gPiA+IC0jZGVmaW5lIElGQ1ZGX01TSV9RVUVVRV9PRkYg
ICAgICAgIDEKPiA+ID4gICAjZGVmaW5lIElGQ1ZGX1BDSV9NQVhfUkVTT1VSQ0UgICAgNgo+ID4g
PiAgICNkZWZpbmUgSUZDVkZfTE1fQ0ZHX1NJWkUgICAgICAgICAweDQwCj4gPiA+IEBAIC00Miw2
ICs0MCwxMyBAQAo+ID4gPiAgICNkZWZpbmUgaWZjdmZfcHJpdmF0ZV90b192ZihhZGFwdGVyKSBc
Cj4gPiA+ICAgICAoJigoc3RydWN0IGlmY3ZmX2FkYXB0ZXIgKilhZGFwdGVyKS0+dmYpCj4gPiA+
ICsvKiBhbGwgdnFzIGFuZCBjb25maWcgaW50ZXJydXB0IGhhcyBpdHMgb3duIHZlY3RvciAqLwo+
ID4gPiArI2RlZmluZSBNU0lYX1ZFQ1RPUl9QRVJfVlFfQU5EX0NPTkZJRyAgICAgICAgICAgICAg
MQo+ID4gPiArLyogYWxsIHZxcyBzaGFyZSBhIHZlY3RvciwgYW5kIGNvbmZpZyBpbnRlcnJ1cHQg
aGFzIGEgc2VwYXJhdGUgdmVjdG9yICovCj4gPiA+ICsjZGVmaW5lIE1TSVhfVkVDVE9SX1NIQVJF
RF9WUV9BTkRfQ09ORklHICAgMgo+ID4gPiArLyogYWxsIHZxcyBhbmQgY29uZmlnIGludGVycnVw
dCBzaGFyZSBhIHZlY3RvciAqLwo+ID4gPiArI2RlZmluZSBNU0lYX1ZFQ1RPUl9ERVZfU0hBUkVE
ICAgICAgICAgICAgICAgICAgICAgMwo+ID4KPiA+Cj4gPiBJIHRoaW5rIHRoZXJlJ3Mgbm8gbXVj
aCB2YWx1ZSB0byBkaWZmZXIgMiBmcm9tIDMgY29uc2lkZXIgY29uZmlnIGludGVycnVwdAo+ID4g
c2hvdWxkIGJlIHJhcmUuCj4KPgo+IFllcyBidXQgaWYgd2UgZG8gbm90IGhhdmUgYSBkZWRpY2F0
ZWQgdmVjdG9yIHRoZW4gd2UgbmVlZCBhbgo+IGV4dHJhIGRldmljZSBJTyAoaW4gZmFjdCwgYSBy
ZWFkKSBvbiBlYWNoIGludGVycnVwdC4KCk9rLCByaWdodC4KCj4KPiA+Cj4gPiA+ICsKPiA+ID4g
ICBzdGF0aWMgaW5saW5lIHU4IGlmY19pb3JlYWQ4KHU4IF9faW9tZW0gKmFkZHIpCj4gPiA+ICAg
ewo+ID4gPiAgICAgcmV0dXJuIGlvcmVhZDgoYWRkcik7Cj4gPiA+IEBAIC05NywyNSArMTAyLDI3
IEBAIHN0cnVjdCBpZmN2Zl9odyB7Cj4gPiA+ICAgICB1OCBfX2lvbWVtICppc3I7Cj4gPiA+ICAg
ICAvKiBMaXZlIG1pZ3JhdGlvbiAqLwo+ID4gPiAgICAgdTggX19pb21lbSAqbG1fY2ZnOwo+ID4g
PiAtICAgdTE2IG5yX3ZyaW5nOwo+ID4KPiA+Cj4gPiBBbnkgcmVhc29uIGZvciBtb3ZpbmcgbnZf
dnJpbmcsIGNvbmZpZ19zaXplLCBhbmQgb3RoZXIgc3R1ZmZzPwo+ID4KPiA+Cj4gPiA+ICAgICAv
KiBOb3RpZmljYXRpb24gYmFyIG51bWJlciAqLwo+ID4gPiAgICAgdTggbm90aWZ5X2JhcjsKPiA+
ID4gKyAgIHU4IG1zaXhfdmVjdG9yX3N0YXR1czsKPiA+ID4gKyAgIC8qIHZpcnRpby1uZXQgb3Ig
dmlydGlvLWJsayBkZXZpY2UgY29uZmlnIHNpemUgKi8KPiA+ID4gKyAgIHUzMiBjb25maWdfc2l6
ZTsKPiA+ID4gICAgIC8qIE5vdGlmaWNhaXRvbiBiYXIgYWRkcmVzcyAqLwo+ID4gPiAgICAgdm9p
ZCBfX2lvbWVtICpub3RpZnlfYmFzZTsKPiA+ID4gICAgIHBoeXNfYWRkcl90IG5vdGlmeV9iYXNl
X3BhOwo+ID4gPiAgICAgdTMyIG5vdGlmeV9vZmZfbXVsdGlwbGllcjsKPiA+ID4gKyAgIHUzMiBk
ZXZfdHlwZTsKPiA+ID4gICAgIHU2NCByZXFfZmVhdHVyZXM7Cj4gPiA+ICAgICB1NjQgaHdfZmVh
dHVyZXM7Cj4gPiA+IC0gICB1MzIgZGV2X3R5cGU7Cj4gPiA+ICAgICBzdHJ1Y3QgdmlydGlvX3Bj
aV9jb21tb25fY2ZnIF9faW9tZW0gKmNvbW1vbl9jZmc7Cj4gPiA+ICAgICB2b2lkIF9faW9tZW0g
KmRldl9jZmc7Cj4gPiA+ICAgICBzdHJ1Y3QgdnJpbmdfaW5mbyB2cmluZ1tJRkNWRl9NQVhfUVVF
VUVTXTsKPiA+ID4gICAgIHZvaWQgX19pb21lbSAqIGNvbnN0ICpiYXNlOwo+ID4gPiAgICAgY2hh
ciBjb25maWdfbXNpeF9uYW1lWzI1Nl07Cj4gPiA+ICAgICBzdHJ1Y3QgdmRwYV9jYWxsYmFjayBj
b25maWdfY2I7Cj4gPiA+IC0gICB1bnNpZ25lZCBpbnQgY29uZmlnX2lycTsKPiA+ID4gLSAgIC8q
IHZpcnRpby1uZXQgb3IgdmlydGlvLWJsayBkZXZpY2UgY29uZmlnIHNpemUgKi8KPiA+ID4gLSAg
IHUzMiBjb25maWdfc2l6ZTsKPiA+ID4gKyAgIGludCBjb25maWdfaXJxOwo+ID4gPiArICAgaW50
IHZxc19zaGFyZWRfaXJxOwo+ID4gPiArICAgdTE2IG5yX3ZyaW5nOwo+ID4gPiAgIH07Cj4gPiA+
ICAgc3RydWN0IGlmY3ZmX2FkYXB0ZXIgewo+ID4gPiBAQCAtMTYwLDQgKzE2Nyw2IEBAIGludCBp
ZmN2Zl9zZXRfdnFfc3RhdGUoc3RydWN0IGlmY3ZmX2h3ICpodywgdTE2IHFpZCwgdTE2IG51bSk7
Cj4gPiA+ICAgc3RydWN0IGlmY3ZmX2FkYXB0ZXIgKnZmX3RvX2FkYXB0ZXIoc3RydWN0IGlmY3Zm
X2h3ICpodyk7Cj4gPiA+ICAgaW50IGlmY3ZmX3Byb2JlZF92aXJ0aW9fbmV0KHN0cnVjdCBpZmN2
Zl9odyAqaHcpOwo+ID4gPiAgIHUzMiBpZmN2Zl9nZXRfY29uZmlnX3NpemUoc3RydWN0IGlmY3Zm
X2h3ICpodyk7Cj4gPiA+ICtpbnQgaWZjdmZfc2V0X3ZxX3ZlY3RvcihzdHJ1Y3QgaWZjdmZfaHcg
Kmh3LCB1MTYgcWlkLCBpbnQgdmVjdG9yKTsKPiA+ID4gK2ludCBpZmN2Zl9zZXRfY29uZmlnX3Zl
Y3RvcihzdHJ1Y3QgaWZjdmZfaHcgKmh3LCBpbnQgdmVjdG9yKTsKPiA+ID4gICAjZW5kaWYgLyog
X0lGQ1ZGX0hfICovCj4gPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZkcGEvaWZjdmYvaWZjdmZf
bWFpbi5jIGIvZHJpdmVycy92ZHBhL2lmY3ZmL2lmY3ZmX21haW4uYwo+ID4gPiBpbmRleCA0NGM4
OWFiMGI2ZGEuLmNhNDE0Mzk5ZjA0MCAxMDA2NDQKPiA+ID4gLS0tIGEvZHJpdmVycy92ZHBhL2lm
Y3ZmL2lmY3ZmX21haW4uYwo+ID4gPiArKysgYi9kcml2ZXJzL3ZkcGEvaWZjdmYvaWZjdmZfbWFp
bi5jCj4gPiA+IEBAIC0xNyw2ICsxNyw3IEBACj4gPiA+ICAgI2RlZmluZSBEUklWRVJfQVVUSE9S
ICAgIkludGVsIENvcnBvcmF0aW9uIgo+ID4gPiAgICNkZWZpbmUgSUZDVkZfRFJJVkVSX05BTUUg
ICAgICAgImlmY3ZmIgo+ID4gPiArLyogaGFuZGxlcyBjb25maWcgaW50ZXJydXB0ICovCj4gPgo+
ID4KPiA+IFRoaXMgc2VlbXMgdW5yZWxhdGVkIHRvIHRoZSBzaGFyZWQgSVJRIGxvZ2ljIGFuZCBp
dCBsb29rcyB1c2VsZXNzIHNpbmNlIGl0J3MKPiA+IGVhc2lseSB0byBkZWR1Y2UgaXQgZnJvbSB0
aGUgZnVuY3Rpb24gbmFtZSBiZWxvdy4KPiA+Cj4gPgo+ID4gPiAgIHN0YXRpYyBpcnFyZXR1cm5f
dCBpZmN2Zl9jb25maWdfY2hhbmdlZChpbnQgaXJxLCB2b2lkICphcmcpCj4gPiA+ICAgewo+ID4g
PiAgICAgc3RydWN0IGlmY3ZmX2h3ICp2ZiA9IGFyZzsKPiA+ID4gQEAgLTI3LDYgKzI4LDcgQEAg
c3RhdGljIGlycXJldHVybl90IGlmY3ZmX2NvbmZpZ19jaGFuZ2VkKGludCBpcnEsIHZvaWQgKmFy
ZykKPiA+ID4gICAgIHJldHVybiBJUlFfSEFORExFRDsKPiA+ID4gICB9Cj4gPiA+ICsvKiBoYW5k
bGVzIHZxcyBpbnRlcnJ1cHQgKi8KPiA+Cj4gPgo+ID4gU28gZGlkIHRoaXMuCj4gPgo+ID4KPiA+
ID4gICBzdGF0aWMgaXJxcmV0dXJuX3QgaWZjdmZfaW50cl9oYW5kbGVyKGludCBpcnEsIHZvaWQg
KmFyZykKPiA+ID4gICB7Cj4gPiA+ICAgICBzdHJ1Y3QgdnJpbmdfaW5mbyAqdnJpbmcgPSBhcmc7
Cj4gPiA+IEBAIC0zNywyNCArMzksNzggQEAgc3RhdGljIGlycXJldHVybl90IGlmY3ZmX2ludHJf
aGFuZGxlcihpbnQgaXJxLCB2b2lkICphcmcpCj4gPiA+ICAgICByZXR1cm4gSVJRX0hBTkRMRUQ7
Cj4gPiA+ICAgfQo+ID4gPiArLyogaGFuZGxzIHZxcyBzaGFyZWQgaW50ZXJydXB0ICovCj4gPiA+
ICtzdGF0aWMgaXJxcmV0dXJuX3QgaWZjdmZfdnFfc2hhcmVkX2ludHJfaGFuZGxlcihpbnQgaXJx
LCB2b2lkICphcmcpCj4gPiA+ICt7Cj4gPiA+ICsgICBzdHJ1Y3QgaWZjdmZfaHcgKnZmID0gYXJn
Owo+ID4gPiArICAgc3RydWN0IHZyaW5nX2luZm8gKnZyaW5nOwo+ID4gPiArICAgaW50IGk7Cj4g
PiA+ICsKPiA+ID4gKyAgIGZvciAoaSA9IDA7IGkgPCB2Zi0+bnJfdnJpbmc7IGkrKykgewo+ID4g
PiArICAgICAgICAgICB2cmluZyA9ICZ2Zi0+dnJpbmdbaV07Cj4gPiA+ICsgICAgICAgICAgIGlm
ICh2cmluZy0+Y2IuY2FsbGJhY2spCj4gPiA+ICsgICAgICAgICAgICAgICAgICAgdmYtPnZyaW5n
LT5jYi5jYWxsYmFjayh2cmluZy0+Y2IucHJpdmF0ZSk7Cj4gPiA+ICsgICB9Cj4gPiA+ICsKPiA+
ID4gKyAgIHJldHVybiBJUlFfSEFORExFRDsKPiA+ID4gK30KPiA+ID4gKwo+ID4gPiArLyogaGFu
ZGxlcyBhIHNoYXJlZCBpbnRlcnJ1cHQgZm9yIHZxcyBhbmQgY29uZmlnICovCj4gPiA+ICtzdGF0
aWMgaXJxcmV0dXJuX3QgaWZjdmZfZGV2X3NoYXJlZF9pbnRyX2hhbmRsZXIoaW50IGlycSwgdm9p
ZCAqYXJnKQo+Cj4gc2hhcmVkIGlzIG5vdCBhIGdvb2QgbmFtZSBnaXZlbiBJUlFfU0hBUkVEIGlz
IG5vdCBzZXQuCj4gbWF5YmUgImNvbW1vbiI/ICJyZXVzZWQiPwo+Cj4gPiA+ICt7Cj4gPiA+ICsg
ICBzdHJ1Y3QgaWZjdmZfaHcgKnZmID0gYXJnOwo+ID4gPiArICAgdTggaXNyOwo+ID4gPiArCj4g
PiA+ICsgICBpc3IgPSBpZmNfaW9yZWFkOCh2Zi0+aXNyKTsKPiA+Cj4gPgo+ID4gV2UgbmVlZCB0
byBleGFjdGx5IHdoYXQgdnBfaW50ZXJydXB0IGRvIGhlcmUuIENoZWNraW5nIGFnYWluc3QgdmYt
PmlzciBmaXJzdAo+ID4gYW5kIHJldHVybiBJUlFfTk9ORSBpZiBpdCBpcyBub3Qgc2V0Lgo+Cj4g
bm8sIHZmLT5pc3IgaXMgbm90IHNldCBmb3IgVlEgaW50ZXJydXB0cy4KCkkgYWN0dWFsbHkgd29u
ZGVyIHdoYXQncyB0aGUgYWN0dWFsIGJlaGF2aW91ciBvZiBJRkNWRi4KCj4gSWYgbmVlZCB0byBh
Y3R1YWxseSBwb2tlCj4gYXQgdGhlIFZRIHRvIGtub3cuCj4KPiA+IEFsd2F5cyByZXR1cm4gSVJR
X0hBTkRMRUQgd2lsbCBicmVhayB0aGUgZGV2aWNlIHdobyBzaGFyZXMgYW4gaXJxIHdpdGgKPiA+
IElGQ1ZGLgo+Cj4KPiBJdCdzIGEgTVNJLCBub3QgSU5UIy4gU28gaW50ZXJydXB0IGlzIG5vdCBz
aGFyZWQgYXMgc3VjaCAtIGl0J3Mgb25seQo+IHNoYXJpbmcgdmVjdG9yIGJldHdlZW4gY29uZmln
IGFuZCB2cS4KClJpZ2h0LCBJIHRob3VnaHQgaXQgd2FzIGEgc2hhcmVkIG9uZSBhcyB2aXJpdG9f
cGNpIGRpZC4KCj4KPgo+ID4KPiA+ID4gKyAgIGlmIChpc3IgJiBWSVJUSU9fUENJX0lTUl9DT05G
SUcpCj4gPiA+ICsgICAgICAgICAgIGlmY3ZmX2NvbmZpZ19jaGFuZ2VkKGlycSwgYXJnKTsKPiA+
ID4gKwo+ID4gPiArICAgcmV0dXJuIGlmY3ZmX3ZxX3NoYXJlZF9pbnRyX2hhbmRsZXIoaXJxLCBh
cmcpOwo+ID4gPiArfQo+ID4gPiArCj4gPiA+ICAgc3RhdGljIHZvaWQgaWZjdmZfZnJlZV9pcnFf
dmVjdG9ycyh2b2lkICpkYXRhKQo+ID4gPiAgIHsKPiA+ID4gICAgIHBjaV9mcmVlX2lycV92ZWN0
b3JzKGRhdGEpOwo+ID4gPiAgIH0KPiA+ID4gLXN0YXRpYyB2b2lkIGlmY3ZmX2ZyZWVfaXJxKHN0
cnVjdCBpZmN2Zl9hZGFwdGVyICphZGFwdGVyLCBpbnQgcXVldWVzKQo+ID4gPiArc3RhdGljIHZv
aWQgaWZjdmZfZnJlZV92cV9pcnEoc3RydWN0IGlmY3ZmX2FkYXB0ZXIgKmFkYXB0ZXIsIGludCBx
dWV1ZXMpCj4gPiA+ICAgewo+ID4gPiAgICAgc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBhZGFwdGVy
LT5wZGV2Owo+ID4gPiAgICAgc3RydWN0IGlmY3ZmX2h3ICp2ZiA9ICZhZGFwdGVyLT52ZjsKPiA+
ID4gICAgIGludCBpOwo+ID4gPiArICAgaWYgKHZmLT5tc2l4X3ZlY3Rvcl9zdGF0dXMgPT0gTVNJ
WF9WRUNUT1JfUEVSX1ZRX0FORF9DT05GSUcpIHsKPiA+ID4gKyAgICAgICAgICAgZm9yIChpID0g
MDsgaSA8IHF1ZXVlczsgaSsrKSB7Cj4gPiA+ICsgICAgICAgICAgICAgICAgICAgZGV2bV9mcmVl
X2lycSgmcGRldi0+ZGV2LCB2Zi0+dnJpbmdbaV0uaXJxLCAmdmYtPnZyaW5nW2ldKTsKPiA+ID4g
KyAgICAgICAgICAgICAgICAgICB2Zi0+dnJpbmdbaV0uaXJxID0gLUVJTlZBTDsKPiA+ID4gKyAg
ICAgICAgICAgfQo+ID4gPiArICAgfSBlbHNlIHsKPiA+ID4gKyAgICAgICAgICAgZGV2bV9mcmVl
X2lycSgmcGRldi0+ZGV2LCB2Zi0+dnFzX3NoYXJlZF9pcnEsIHZmKTsKPiA+ID4gKyAgICAgICAg
ICAgdmYtPnZxc19zaGFyZWRfaXJxID0gLUVJTlZBTDsKPiA+ID4gKyAgIH0KPiA+ID4gK30KPiA+
ID4gLSAgIGZvciAoaSA9IDA7IGkgPCBxdWV1ZXM7IGkrKykgewo+ID4gPiAtICAgICAgICAgICBk
ZXZtX2ZyZWVfaXJxKCZwZGV2LT5kZXYsIHZmLT52cmluZ1tpXS5pcnEsICZ2Zi0+dnJpbmdbaV0p
Owo+ID4gPiAtICAgICAgICAgICB2Zi0+dnJpbmdbaV0uaXJxID0gLUVJTlZBTDsKPiA+ID4gK3N0
YXRpYyB2b2lkIGlmY3ZmX2ZyZWVfY29uZmlnX2lycShzdHJ1Y3QgaWZjdmZfYWRhcHRlciAqYWRh
cHRlcikKPiA+ID4gK3sKPiA+ID4gKyAgIHN0cnVjdCBwY2lfZGV2ICpwZGV2ID0gYWRhcHRlci0+
cGRldjsKPiA+ID4gKyAgIHN0cnVjdCBpZmN2Zl9odyAqdmYgPSAmYWRhcHRlci0+dmY7Cj4gPiA+
ICsKPiA+ID4gKyAgIC8qIElmIHRoZSBpcnEgaXMgc2hhcmVkIGJ5IGFsbCB2cXMgYW5kIHRoZSBj
b25maWcgaW50ZXJydXB0LAo+ID4gPiArICAgICogaXQgaXMgYWxyZWFkeSBmcmVlZCBpbiBpZmN2
Zl9mcmVlX3ZxX2lycSwgc28gaGVyZSBvbmx5Cj4gPiA+ICsgICAgKiBuZWVkIHRvIGZyZWUgY29u
ZmlnIGlycSB3aGVuIG1zaXhfdmVjdG9yX3N0YXR1cyAhPSBNU0lYX1ZFQ1RPUl9ERVZfU0hBUkVE
Cj4gPiA+ICsgICAgKi8KPiA+ID4gKyAgIGlmICh2Zi0+bXNpeF92ZWN0b3Jfc3RhdHVzICE9IE1T
SVhfVkVDVE9SX0RFVl9TSEFSRUQpIHsKPiA+ID4gKyAgICAgICAgICAgZGV2bV9mcmVlX2lycSgm
cGRldi0+ZGV2LCB2Zi0+Y29uZmlnX2lycSwgdmYpOwo+ID4gPiArICAgICAgICAgICB2Zi0+Y29u
ZmlnX2lycSA9IC1FSU5WQUw7Cj4gPiA+ICAgICB9Cj4gPiA+ICt9Cj4gPiA+ICsKPiA+ID4gK3N0
YXRpYyB2b2lkIGlmY3ZmX2ZyZWVfaXJxKHN0cnVjdCBpZmN2Zl9hZGFwdGVyICphZGFwdGVyLCBp
bnQgcXVldWVzKQo+ID4gPiArewo+ID4gPiArICAgc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBhZGFw
dGVyLT5wZGV2Owo+ID4gPiAtICAgZGV2bV9mcmVlX2lycSgmcGRldi0+ZGV2LCB2Zi0+Y29uZmln
X2lycSwgdmYpOwo+ID4gPiArICAgaWZjdmZfZnJlZV92cV9pcnEoYWRhcHRlciwgcXVldWVzKTsK
PiA+ID4gKyAgIGlmY3ZmX2ZyZWVfY29uZmlnX2lycShhZGFwdGVyKTsKPiA+ID4gICAgIGlmY3Zm
X2ZyZWVfaXJxX3ZlY3RvcnMocGRldik7Cj4gPiA+ICAgfQo+ID4gPiBAQCAtODYsNTggKzE0Miwx
NzIgQEAgc3RhdGljIGludCBpZmN2Zl9hbGxvY192ZWN0b3JzKHN0cnVjdCBpZmN2Zl9hZGFwdGVy
ICphZGFwdGVyKQo+ID4gPiAgICAgcmV0dXJuIHJldDsKPiA+ID4gICB9Cj4gPiA+IC1zdGF0aWMg
aW50IGlmY3ZmX3JlcXVlc3RfaXJxKHN0cnVjdCBpZmN2Zl9hZGFwdGVyICphZGFwdGVyKQo+ID4g
PiArc3RhdGljIGludCBpZmN2Zl9yZXF1ZXN0X3Blcl92cV9pcnEoc3RydWN0IGlmY3ZmX2FkYXB0
ZXIgKmFkYXB0ZXIpCj4gPiA+ICAgewo+ID4gPiAgICAgc3RydWN0IHBjaV9kZXYgKnBkZXYgPSBh
ZGFwdGVyLT5wZGV2Owo+ID4gPiAgICAgc3RydWN0IGlmY3ZmX2h3ICp2ZiA9ICZhZGFwdGVyLT52
ZjsKPiA+ID4gLSAgIGludCB2ZWN0b3IsIG52ZWN0b3JzLCBpLCByZXQsIGlycTsKPiA+ID4gLSAg
IHUxNiBtYXhfaW50cjsKPiA+ID4gKyAgIGludCBpLCB2ZWN0b3IsIHJldCwgaXJxOwo+ID4gPiAt
ICAgbnZlY3RvcnMgPSBpZmN2Zl9hbGxvY192ZWN0b3JzKGFkYXB0ZXIpOwo+ID4gPiAtICAgaWYg
KCEobnZlY3RvcnMgPiAwKSkKPiA+ID4gLSAgICAgICAgICAgcmV0dXJuIG52ZWN0b3JzOwo+ID4g
PiArICAgZm9yIChpID0gMDsgaSA8IHZmLT5ucl92cmluZzsgaSsrKSB7Cj4gPiA+ICsgICAgICAg
ICAgIHNucHJpbnRmKHZmLT52cmluZ1tpXS5tc2l4X25hbWUsIDI1NiwgImlmY3ZmWyVzXS0lZFxu
IiwgcGNpX25hbWUocGRldiksIGkpOwo+ID4gPiArICAgICAgICAgICB2ZWN0b3IgPSBpOwo+ID4g
PiArICAgICAgICAgICBpcnEgPSBwY2lfaXJxX3ZlY3RvcihwZGV2LCB2ZWN0b3IpOwo+ID4gPiAr
ICAgICAgICAgICByZXQgPSBkZXZtX3JlcXVlc3RfaXJxKCZwZGV2LT5kZXYsIGlycSwKPiA+ID4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmN2Zl9pbnRyX2hhbmRsZXIsIDAs
Cj4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmYtPnZyaW5nW2ldLm1z
aXhfbmFtZSwKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmdmYtPnZy
aW5nW2ldKTsKPiA+ID4gKyAgICAgICAgICAgaWYgKHJldCkgewo+ID4gPiArICAgICAgICAgICAg
ICAgICAgIElGQ1ZGX0VSUihwZGV2LCAiRmFpbGVkIHRvIHJlcXVlc3QgaXJxIGZvciB2cSAlZFxu
IiwgaSk7Cj4gPiA+ICsgICAgICAgICAgICAgICAgICAgaWZjdmZfZnJlZV92cV9pcnEoYWRhcHRl
ciwgaSk7Cj4gPiA+ICsgICAgICAgICAgIH0gZWxzZSB7Cj4gPiA+ICsgICAgICAgICAgICAgICAg
ICAgdmYtPnZyaW5nW2ldLmlycSA9IGlycTsKPiA+ID4gKyAgICAgICAgICAgICAgICAgICBpZmN2
Zl9zZXRfdnFfdmVjdG9yKHZmLCBpLCB2ZWN0b3IpOwo+ID4gPiArICAgICAgICAgICB9Cj4gPiA+
ICsgICB9Cj4gPiA+IC0gICBtYXhfaW50ciA9IHZmLT5ucl92cmluZyArIDE7Cj4gPiA+ICsgICB2
Zi0+dnFzX3NoYXJlZF9pcnEgPSAtRUlOVkFMOwo+ID4gPiArCj4gPiA+ICsgICByZXR1cm4gMDsK
PiA+ID4gK30KPiA+ID4gKwo+ID4gPiArc3RhdGljIGludCBpZmN2Zl9yZXF1ZXN0X3NoYXJlZF92
cV9pcnEoc3RydWN0IGlmY3ZmX2FkYXB0ZXIgKmFkYXB0ZXIpCj4gPiA+ICt7Cj4gPiA+ICsgICBz
dHJ1Y3QgcGNpX2RldiAqcGRldiA9IGFkYXB0ZXItPnBkZXY7Cj4gPiA+ICsgICBzdHJ1Y3QgaWZj
dmZfaHcgKnZmID0gJmFkYXB0ZXItPnZmOwo+ID4gPiArICAgaW50IGksIHZlY3RvciwgcmV0LCBp
cnE7Cj4gPiA+ICsKPiA+ID4gKyAgIHZlY3RvciA9IDA7Cj4gPiA+ICsgICAvKiByZXVzZSBtc2l4
X25hbWVbMjU2XSBzcGFjZSBvZiB2cmluZzAgdG8gc3RvcmUgc2hhcmVkIHZxcyBpbnRlcnJ1cHQg
bmFtZSAqLwo+ID4KPiA+Cj4gPiBJIHRoaW5rIHdlIGNhbiByZW1vdmUgdGhpcyBjb21tZW50IHNp
bmNlIHRoZSBjb2RlIGlzIHN0cmFpZ2h0Zm9yd2FyZC4KPiA+Cj4gPgo+ID4gPiArICAgc25wcmlu
dGYodmYtPnZyaW5nWzBdLm1zaXhfbmFtZSwgMjU2LCAiaWZjdmZbJXNdLXZxcy1zaGFyZWQtaXJx
XG4iLCBwY2lfbmFtZShwZGV2KSk7Cj4gPiA+ICsgICBpcnEgPSBwY2lfaXJxX3ZlY3RvcihwZGV2
LCB2ZWN0b3IpOwo+ID4gPiArICAgcmV0ID0gZGV2bV9yZXF1ZXN0X2lycSgmcGRldi0+ZGV2LCBp
cnEsCj4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgIGlmY3ZmX3ZxX3NoYXJlZF9pbnRy
X2hhbmRsZXIsIDAsCj4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgIHZmLT52cmluZ1sw
XS5tc2l4X25hbWUsIHZmKTsKPiA+ID4gKyAgIGlmIChyZXQpIHsKPiA+ID4gKyAgICAgICAgICAg
SUZDVkZfRVJSKHBkZXYsICJGYWlsZWQgdG8gcmVxdWVzdCBzaGFyZWQgaXJxIGZvciB2ZlxuIik7
Cj4gPiA+ICsKPiA+ID4gKyAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+ID4gKyAgIH0KPiA+ID4g
Kwo+ID4gPiArICAgdmYtPnZxc19zaGFyZWRfaXJxID0gaXJxOwo+ID4gPiArICAgZm9yIChpID0g
MDsgaSA8IHZmLT5ucl92cmluZzsgaSsrKSB7Cj4gPiA+ICsgICAgICAgICAgIHZmLT52cmluZ1tp
XS5pcnEgPSAtRUlOVkFMOwo+ID4gPiArICAgICAgICAgICBpZmN2Zl9zZXRfdnFfdmVjdG9yKHZm
LCBpLCB2ZWN0b3IpOwo+ID4gPiArICAgfQo+ID4gPiArCj4gPiA+ICsgICByZXR1cm4gMDsKPiA+
ID4gKwo+ID4gPiArfQo+ID4gPiArCj4gPiA+ICtzdGF0aWMgaW50IGlmY3ZmX3JlcXVlc3RfZGV2
X3NoYXJlZF9pcnEoc3RydWN0IGlmY3ZmX2FkYXB0ZXIgKmFkYXB0ZXIpCj4gPiA+ICt7Cj4gPiA+
ICsgICBzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IGFkYXB0ZXItPnBkZXY7Cj4gPiA+ICsgICBzdHJ1
Y3QgaWZjdmZfaHcgKnZmID0gJmFkYXB0ZXItPnZmOwo+ID4gPiArICAgaW50IGksIHZlY3Rvciwg
cmV0LCBpcnE7Cj4gPiA+ICsKPiA+ID4gKyAgIHZlY3RvciA9IDA7Cj4gPiA+ICsgICAvKiByZXVz
ZSBtc2l4X25hbWVbMjU2XSBzcGFjZSBvZiB2cmluZzAgdG8gc3RvcmUgc2hhcmVkIGRldmljZSBp
bnRlcnJ1cHQgbmFtZSAqLwo+ID4gPiArICAgc25wcmludGYodmYtPnZyaW5nWzBdLm1zaXhfbmFt
ZSwgMjU2LCAiaWZjdmZbJXNdLWRldi1zaGFyZWQtaXJxXG4iLCBwY2lfbmFtZShwZGV2KSk7Cj4g
PiA+ICsgICBpcnEgPSBwY2lfaXJxX3ZlY3RvcihwZGV2LCB2ZWN0b3IpOwo+ID4gPiArICAgcmV0
ID0gZGV2bV9yZXF1ZXN0X2lycSgmcGRldi0+ZGV2LCBpcnEsCj4gPiA+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgIGlmY3ZmX2Rldl9zaGFyZWRfaW50cl9oYW5kbGVyLCAwLAo+ID4gPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICB2Zi0+dnJpbmdbMF0ubXNpeF9uYW1lLCB2Zik7Cj4gPiA+
ICsgICBpZiAocmV0KSB7Cj4gPiA+ICsgICAgICAgICAgIElGQ1ZGX0VSUihwZGV2LCAiRmFpbGVk
IHRvIHJlcXVlc3Qgc2hhcmVkIGlycSBmb3IgdmZcbiIpOwo+ID4gPiAtICAgcmV0ID0gcGNpX2Fs
bG9jX2lycV92ZWN0b3JzKHBkZXYsIG1heF9pbnRyLAo+ID4gPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIG1heF9pbnRyLCBQQ0lfSVJRX01TSVgpOwo+ID4gPiAtICAgaWYgKHJldCA8
IDApIHsKPiA+ID4gLSAgICAgICAgICAgSUZDVkZfRVJSKHBkZXYsICJGYWlsZWQgdG8gYWxsb2Mg
SVJRIHZlY3RvcnNcbiIpOwo+ID4gPiAgICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4gPiAgICAg
fQo+ID4gPiArICAgdmYtPnZxc19zaGFyZWRfaXJxID0gaXJxOwo+ID4gPiArICAgZm9yIChpID0g
MDsgaSA8IHZmLT5ucl92cmluZzsgaSsrKSB7Cj4gPiA+ICsgICAgICAgICAgIHZmLT52cmluZ1tp
XS5pcnEgPSAtRUlOVkFMOwo+ID4gPiArICAgICAgICAgICBpZmN2Zl9zZXRfdnFfdmVjdG9yKHZm
LCBpLCB2ZWN0b3IpOwo+ID4gPiArICAgfQo+ID4gPiArCj4gPiA+ICsgICB2Zi0+Y29uZmlnX2ly
cSA9IGlycTsKPiA+ID4gKyAgIGlmY3ZmX3NldF9jb25maWdfdmVjdG9yKHZmLCB2ZWN0b3IpOwo+
ID4gPiArCj4gPiA+ICsgICByZXR1cm4gMDsKPiA+ID4gKwo+ID4gPiArfQo+ID4gPiArCj4gPiA+
ICtzdGF0aWMgaW50IGlmY3ZmX3JlcXVlc3RfdnFfaXJxKHN0cnVjdCBpZmN2Zl9hZGFwdGVyICph
ZGFwdGVyKQo+ID4gPiArewo+ID4gPiArICAgc3RydWN0IGlmY3ZmX2h3ICp2ZiA9ICZhZGFwdGVy
LT52ZjsKPiA+ID4gKyAgIGludCByZXQ7Cj4gPiA+ICsKPiA+ID4gKyAgIGlmICh2Zi0+bXNpeF92
ZWN0b3Jfc3RhdHVzID09IE1TSVhfVkVDVE9SX1BFUl9WUV9BTkRfQ09ORklHKQo+ID4gPiArICAg
ICAgICAgICByZXQgPSBpZmN2Zl9yZXF1ZXN0X3Blcl92cV9pcnEoYWRhcHRlcik7Cj4gPiA+ICsg
ICBlbHNlCj4gPiA+ICsgICAgICAgICAgIHJldCA9IGlmY3ZmX3JlcXVlc3Rfc2hhcmVkX3ZxX2ly
cShhZGFwdGVyKTsKPiA+ID4gKwo+ID4gPiArICAgcmV0dXJuIHJldDsKPiA+ID4gK30KPiA+ID4g
Kwo+ID4gPiArc3RhdGljIGludCBpZmN2Zl9yZXF1ZXN0X2NvbmZpZ19pcnEoc3RydWN0IGlmY3Zm
X2FkYXB0ZXIgKmFkYXB0ZXIpCj4gPiA+ICt7Cj4gPiA+ICsgICBzdHJ1Y3QgcGNpX2RldiAqcGRl
diA9IGFkYXB0ZXItPnBkZXY7Cj4gPiA+ICsgICBzdHJ1Y3QgaWZjdmZfaHcgKnZmID0gJmFkYXB0
ZXItPnZmOwo+ID4gPiArICAgaW50IGNvbmZpZ192ZWN0b3IsIHJldDsKPiA+ID4gKwo+ID4gPiAr
ICAgaWYgKHZmLT5tc2l4X3ZlY3Rvcl9zdGF0dXMgPT0gTVNJWF9WRUNUT1JfREVWX1NIQVJFRCkK
PiA+ID4gKyAgICAgICAgICAgcmV0dXJuIDA7Cj4gPiA+ICsKPiA+ID4gKyAgIGlmICh2Zi0+bXNp
eF92ZWN0b3Jfc3RhdHVzID09IE1TSVhfVkVDVE9SX1BFUl9WUV9BTkRfQ09ORklHKQo+ID4gPiAr
ICAgICAgICAgICAvKiB2ZWN0b3IgMCB+IHZmLT5ucl92cmluZyBmb3IgdnFzLCBudW0gdmYtPm5y
X3ZyaW5nIHZlY3RvciBmb3IgY29uZmlnIGludGVycnVwdCAqLwo+ID4gPiArICAgICAgICAgICBj
b25maWdfdmVjdG9yID0gdmYtPm5yX3ZyaW5nOwo+ID4gPiArCj4gPiA+ICsgICBpZiAodmYtPm1z
aXhfdmVjdG9yX3N0YXR1cyA9PSAgTVNJWF9WRUNUT1JfU0hBUkVEX1ZRX0FORF9DT05GSUcpCj4g
PiA+ICsgICAgICAgICAgIC8qIHZlY3RvciAwIGZvciB2cXMgYW5kIDEgZm9yIGNvbmZpZyBpbnRl
cnJ1cHQgKi8KPiA+ID4gKyAgICAgICAgICAgY29uZmlnX3ZlY3RvciA9IDE7Cj4gPiA+ICsKPiA+
ID4gICAgIHNucHJpbnRmKHZmLT5jb25maWdfbXNpeF9uYW1lLCAyNTYsICJpZmN2Zlslc10tY29u
ZmlnXG4iLAo+ID4gPiAgICAgICAgICAgICAgcGNpX25hbWUocGRldikpOwo+ID4gPiAtICAgdmVj
dG9yID0gMDsKPiA+ID4gLSAgIHZmLT5jb25maWdfaXJxID0gcGNpX2lycV92ZWN0b3IocGRldiwg
dmVjdG9yKTsKPiA+ID4gKyAgIHZmLT5jb25maWdfaXJxID0gcGNpX2lycV92ZWN0b3IocGRldiwg
Y29uZmlnX3ZlY3Rvcik7Cj4gPiA+ICAgICByZXQgPSBkZXZtX3JlcXVlc3RfaXJxKCZwZGV2LT5k
ZXYsIHZmLT5jb25maWdfaXJxLAo+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmN2
Zl9jb25maWdfY2hhbmdlZCwgMCwKPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmYt
PmNvbmZpZ19tc2l4X25hbWUsIHZmKTsKPiA+ID4gICAgIGlmIChyZXQpIHsKPiA+ID4gICAgICAg
ICAgICAgSUZDVkZfRVJSKHBkZXYsICJGYWlsZWQgdG8gcmVxdWVzdCBjb25maWcgaXJxXG4iKTsK
PiA+ID4gKyAgICAgICAgICAgaWZjdmZfZnJlZV92cV9pcnEoYWRhcHRlciwgdmYtPm5yX3ZyaW5n
KTsKPiA+ID4gICAgICAgICAgICAgcmV0dXJuIHJldDsKPiA+ID4gICAgIH0KPiA+ID4gLSAgIGZv
ciAoaSA9IDA7IGkgPCB2Zi0+bnJfdnJpbmc7IGkrKykgewo+ID4gPiAtICAgICAgICAgICBzbnBy
aW50Zih2Zi0+dnJpbmdbaV0ubXNpeF9uYW1lLCAyNTYsICJpZmN2Zlslc10tJWRcbiIsCj4gPiA+
IC0gICAgICAgICAgICAgICAgICAgIHBjaV9uYW1lKHBkZXYpLCBpKTsKPiA+ID4gLSAgICAgICAg
ICAgdmVjdG9yID0gaSArIElGQ1ZGX01TSV9RVUVVRV9PRkY7Cj4gPiA+IC0gICAgICAgICAgIGly
cSA9IHBjaV9pcnFfdmVjdG9yKHBkZXYsIHZlY3Rvcik7Cj4gPiA+IC0gICAgICAgICAgIHJldCA9
IGRldm1fcmVxdWVzdF9pcnEoJnBkZXYtPmRldiwgaXJxLAo+ID4gPiAtICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGlmY3ZmX2ludHJfaGFuZGxlciwgMCwKPiA+ID4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB2Zi0+dnJpbmdbaV0ubXNpeF9uYW1lLAo+ID4gPiAt
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZ2Zi0+dnJpbmdbaV0pOwo+ID4gPiAt
ICAgICAgICAgICBpZiAocmV0KSB7Cj4gPiA+IC0gICAgICAgICAgICAgICAgICAgSUZDVkZfRVJS
KHBkZXYsCj4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICJGYWlsZWQgdG8gcmVx
dWVzdCBpcnEgZm9yIHZxICVkXG4iLCBpKTsKPiA+ID4gLSAgICAgICAgICAgICAgICAgICBpZmN2
Zl9mcmVlX2lycShhZGFwdGVyLCBpKTsKPiA+ID4gKyAgIGlmY3ZmX3NldF9jb25maWdfdmVjdG9y
KHZmLCBjb25maWdfdmVjdG9yKTsKPiA+ID4gLSAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0
Owo+ID4gPiAtICAgICAgICAgICB9Cj4gPiA+ICsgICByZXR1cm4gMDsKPiA+ID4gK30KPiA+ID4g
Kwo+ID4gPiArc3RhdGljIGludCBpZmN2Zl9yZXF1ZXN0X2lycShzdHJ1Y3QgaWZjdmZfYWRhcHRl
ciAqYWRhcHRlcikKPiA+ID4gK3sKPiA+Cj4gPgo+ID4gQXMgcmVwbGllZCBhYm92ZSwgSSB0aGlu
ayBoYXZpbmcgdHdvIG1vZGVzIHNob3VsZCBiZSBzdWZmaWNpZW50IGFuZCB0aGUgY29kZQo+ID4g
Y291bGQgYmUgZ3JlYXRseSBzaW1wbGlmaWVkLgo+ID4KPiA+IFRoYW5rcwo+ID4KPgo+IFdlbGwg
aXQgaXMgY2xhaW1lZCB0aGVyZSBhcmUgcGxhdGZvcm1zIHdoZXJlIHdlIGFyZSBzaG9ydAo+IG9u
IHZlY3RvcnMuIDMgdmVyc3VzIDIgc2VlbXMgYSA1MCUgc2F2aW5nLiBZb3UgZGlzYWdyZWU/CgpJ
IHRoaW5rIHdlIGNhbiAyIHZlY3RvcnMgKGEgZGVkaWNhdGVkIGZvciBjb25maWcpLgoKVGhhbmtz
Cgo+Cj4gPiA+ICsgICBzdHJ1Y3QgaWZjdmZfaHcgKnZmID0gJmFkYXB0ZXItPnZmOwo+ID4gPiAr
ICAgaW50IG52ZWN0b3JzLCByZXQsIG1heF9pbnRyOwo+ID4gPiAtICAgICAgICAgICB2Zi0+dnJp
bmdbaV0uaXJxID0gaXJxOwo+ID4gPiArICAgbnZlY3RvcnMgPSBpZmN2Zl9hbGxvY192ZWN0b3Jz
KGFkYXB0ZXIpOwo+ID4gPiArICAgaWYgKCEobnZlY3RvcnMgPiAwKSkKPiA+ID4gKyAgICAgICAg
ICAgcmV0dXJuIG52ZWN0b3JzOwo+ID4gPiArCj4gPiA+ICsgICB2Zi0+bXNpeF92ZWN0b3Jfc3Rh
dHVzID0gTVNJWF9WRUNUT1JfUEVSX1ZRX0FORF9DT05GSUc7Cj4gPiA+ICsgICBtYXhfaW50ciA9
IHZmLT5ucl92cmluZyArIDE7Cj4gPiA+ICsgICBpZiAobnZlY3RvcnMgPCBtYXhfaW50cikKPiA+
ID4gKyAgICAgICAgICAgdmYtPm1zaXhfdmVjdG9yX3N0YXR1cyA9IE1TSVhfVkVDVE9SX1NIQVJF
RF9WUV9BTkRfQ09ORklHOwo+ID4gPiArCj4gPiA+ICsgICBpZiAobnZlY3RvcnMgPT0gMSkgewo+
ID4gPiArICAgICAgICAgICB2Zi0+bXNpeF92ZWN0b3Jfc3RhdHVzID0gTVNJWF9WRUNUT1JfREVW
X1NIQVJFRDsKPiA+ID4gKyAgICAgICAgICAgcmV0ID0gaWZjdmZfcmVxdWVzdF9kZXZfc2hhcmVk
X2lycShhZGFwdGVyKTsKPiA+ID4gKwo+ID4gPiArICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4g
PiAgICAgfQo+ID4gPiArICAgcmV0ID0gaWZjdmZfcmVxdWVzdF92cV9pcnEoYWRhcHRlcik7Cj4g
PiA+ICsgICBpZiAocmV0KQo+ID4gPiArICAgICAgICAgICByZXR1cm4gcmV0Owo+ID4gPiArCj4g
PiA+ICsgICByZXQgPSBpZmN2Zl9yZXF1ZXN0X2NvbmZpZ19pcnEoYWRhcHRlcik7Cj4gPiA+ICsK
PiA+ID4gKyAgIGlmIChyZXQpCj4gPiA+ICsgICAgICAgICAgIHJldHVybiByZXQ7Cj4gPiA+ICsK
PiA+ID4gICAgIHJldHVybiAwOwo+ID4gPiAgIH0KPiA+ID4gQEAgLTQ0MSw3ICs2MTEsMTAgQEAg
c3RhdGljIGludCBpZmN2Zl92ZHBhX2dldF92cV9pcnEoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBh
X2RldiwKPiA+ID4gICB7Cj4gPiA+ICAgICBzdHJ1Y3QgaWZjdmZfaHcgKnZmID0gdmRwYV90b192
Zih2ZHBhX2Rldik7Cj4gPiA+IC0gICByZXR1cm4gdmYtPnZyaW5nW3FpZF0uaXJxOwo+ID4gPiAr
ICAgaWYgKHZmLT52cXNfc2hhcmVkX2lycSA8IDApCj4gPiA+ICsgICAgICAgICAgIHJldHVybiB2
Zi0+dnJpbmdbcWlkXS5pcnE7Cj4gPiA+ICsgICBlbHNlCj4gPiA+ICsgICAgICAgICAgIHJldHVy
biAtRUlOVkFMOwo+ID4gPiAgIH0KPiA+ID4gICBzdGF0aWMgc3RydWN0IHZkcGFfbm90aWZpY2F0
aW9uX2FyZWEgaWZjdmZfZ2V0X3ZxX25vdGlmaWNhdGlvbihzdHJ1Y3QgdmRwYV9kZXZpY2UgKnZk
cGFfZGV2LAo+CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwpWaXJ0dWFsaXphdGlvbiBtYWlsaW5nIGxpc3QKVmlydHVhbGl6YXRpb25AbGlzdHMubGludXgt
Zm91bmRhdGlvbi5vcmcKaHR0cHM6Ly9saXN0cy5saW51eGZvdW5kYXRpb24ub3JnL21haWxtYW4v
bGlzdGluZm8vdmlydHVhbGl6YXRpb24=
