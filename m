Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [IPv6:2605:bc80:3010::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 3B4106E4212
	for <lists.virtualization@lfdr.de>; Mon, 17 Apr 2023 10:06:59 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id 5BFC040B54;
	Mon, 17 Apr 2023 08:06:57 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 5BFC040B54
Authentication-Results: smtp2.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=XPWlH2Tt
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id PIHrpXgwD_0k; Mon, 17 Apr 2023 08:06:55 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp2.osuosl.org (Postfix) with ESMTPS id 4DD86408EF;
	Mon, 17 Apr 2023 08:06:55 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 4DD86408EF
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 8CA77C0089;
	Mon, 17 Apr 2023 08:06:54 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
 by lists.linuxfoundation.org (Postfix) with ESMTP id F4006C002A
 for <virtualization@lists.linux-foundation.org>;
 Mon, 17 Apr 2023 08:06:52 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp3.osuosl.org (Postfix) with ESMTP id C1A1B60EF4
 for <virtualization@lists.linux-foundation.org>;
 Mon, 17 Apr 2023 08:06:52 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org C1A1B60EF4
Authentication-Results: smtp3.osuosl.org;
 dkim=pass (1024-bit key) header.d=redhat.com header.i=@redhat.com
 header.a=rsa-sha256 header.s=mimecast20190719 header.b=XPWlH2Tt
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
 by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id Xxq9DRCt3KPK
 for <virtualization@lists.linux-foundation.org>;
 Mon, 17 Apr 2023 08:06:50 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 6C56560A95
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp3.osuosl.org (Postfix) with ESMTPS id 6C56560A95
 for <virtualization@lists.linux-foundation.org>;
 Mon, 17 Apr 2023 08:06:50 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1681718809;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=yAGXsfhDWWu4C5OWWfy29Vs/81H5+aZoIthP/zwcTXI=;
 b=XPWlH2TtCNYsZ37xtX9nNHSo+q+lKjvNzqCKvYJEONs7SWToNBlD17uTSQ8OxpqC/YXhcN
 wCYnAERQPF4V2+mbZa1fKMGu8jeO58BxQ6gbeGJVKBTeuRgc4BWZjBZnFgiliBVklViNG+
 +AiJjXYkqpTtzMzD1TYOd3uUMEA+EbY=
Received: from mail-oa1-f70.google.com (mail-oa1-f70.google.com
 [209.85.160.70]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-444-ILXjsxh_OPadYMUZhhC0pw-1; Mon, 17 Apr 2023 04:06:47 -0400
X-MC-Unique: ILXjsxh_OPadYMUZhhC0pw-1
Received: by mail-oa1-f70.google.com with SMTP id
 586e51a60fabf-187910199b4so6285676fac.6
 for <virtualization@lists.linux-foundation.org>;
 Mon, 17 Apr 2023 01:06:47 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20221208; t=1681718807; x=1684310807;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=yAGXsfhDWWu4C5OWWfy29Vs/81H5+aZoIthP/zwcTXI=;
 b=AkSJobHE0C+Jcw2pQ7c7jfNz0BIaU6Ov68+TRgnhqTLLniSBDe/hpRCpYlQVpo+zDH
 FUoupxiRsdbrJ/482BttgSBpq4lKsoXKZXoD68o1RPh1YJ518Xn0eHtaes9mS7SKDCpS
 s437XOy0iTi5BMKzD9LwGTNDOSb+NVatXAhmDObG9ru0Xf6daz8d+ueLI2IrLGyDHN3L
 NtRVCbd7X8zQ6Mif8yEzw70gTbYfi87e3dOG1DkmF9uOBYAA/EztQ00qp/fpnH4co0e2
 ww0kqHYfE06HYSeEpm/KXO+ToDKsDYEuyhmwDu43iul0nfHSBrlJis4cHpJv12uIpJ5W
 Lgeg==
X-Gm-Message-State: AAQBX9ekXQ3FiftcDaSCBxWvz/c/otjibWQlfYDLiUTDAYRWbtTyzMAc
 xk8W7OImKIzKcEj8Bj+VhQEN7q5xpdV0N5zkobyUUC645dG3f8WSCOLs0G8kwjs2UdYcIadLtws
 AE1JxLO+mc0R5OWtxmJsrltzOPiqFnn7VTN+6yjITh8AnCeB3jSwh9HFH8Q==
X-Received: by 2002:a05:6870:a115:b0:184:502f:e79d with SMTP id
 m21-20020a056870a11500b00184502fe79dmr5276368oae.9.1681718806536; 
 Mon, 17 Apr 2023 01:06:46 -0700 (PDT)
X-Google-Smtp-Source: AKy350b78qwsuBjyQ21YWLbCMljGdYpYkSFhvu8HtVKm5RNCCFqIGzbvEsd2lvcHlgRVTxzcZz52WZzK9sR9F+JhfBg=
X-Received: by 2002:a05:6870:a115:b0:184:502f:e79d with SMTP id
 m21-20020a056870a11500b00184502fe79dmr5276366oae.9.1681718806153; Mon, 17 Apr
 2023 01:06:46 -0700 (PDT)
MIME-Version: 1.0
References: <20230413073337.31367-1-alvaro.karsz@solid-run.com>
 <20230413073337.31367-2-alvaro.karsz@solid-run.com>
In-Reply-To: <20230413073337.31367-2-alvaro.karsz@solid-run.com>
From: Jason Wang <jasowang@redhat.com>
Date: Mon, 17 Apr 2023 16:06:35 +0800
Message-ID: <CACGkMEsd=gMTBSsLJm-Ei9vz78SxwHnpCzRfdocKFVXzD=fnog@mail.gmail.com>
Subject: Re: [PATCH v4 1/2] vdpa/snet: support getting and setting VQ state
To: Alvaro Karsz <alvaro.karsz@solid-run.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: virtualization@lists.linux-foundation.org, mst@redhat.com
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gVGh1LCBBcHIgMTMsIDIwMjMgYXQgMzozM+KAr1BNIEFsdmFybyBLYXJzeiA8YWx2YXJvLmth
cnN6QHNvbGlkLXJ1bi5jb20+IHdyb3RlOgo+Cj4gVGhpcyBwYXRjaCBhZGRzIHRoZSBnZXRfdnFf
c3RhdGUgYW5kIHNldF92cV9zdGF0ZSB2RFBBIGNhbGxiYWNrcy4KPgo+IEluIG9yZGVyIHRvIGdl
dCB0aGUgVlEgc3RhdGUsIHRoZSBzdGF0ZSBuZWVkcyB0byBiZSByZWFkIGZyb20gdGhlIERQVS4K
PiBJbiBvcmRlciB0byBhbGxvdyB0aGF0LCB0aGUgb2xkIG1lc3NhZ2luZyBtZWNoYW5pc20gaXMg
cmVwbGFjZWQgd2l0aCBhIG5ldywKPiBmbGV4aWJsZSBjb250cm9sIG1lY2hhbmlzbS4KPiBUaGlz
IG1lY2hhbmlzbSBhbGxvd3MgdG8gcmVhZCBkYXRhIGZyb20gdGhlIERQVS4KPgo+IFRoZSBtZWNo
YW5pc20gY2FuIGJlIHVzZWQgaWYgdGhlIG5lZ290aWF0ZWQgY29uZmlnIHZlcnNpb24gaXMgMiBv
cgo+IGhpZ2hlci4KPgo+IElmIHRoZSBuZXcgbWVjaGFuaXNtIGlzIHVzZWQgd2hlbiB0aGUgY29u
ZmlnIHZlcnNpb24gaXMgMSwgaXQgd2lsbCBjYWxsCj4gc25ldF9zZW5kX2N0cmxfbXNnX29sZCwg
d2hpY2ggaXMgY29uZmlnIDEgY29tcGF0aWJsZS4KPgo+IFNpZ25lZC1vZmYtYnk6IEFsdmFybyBL
YXJzeiA8YWx2YXJvLmthcnN6QHNvbGlkLXJ1bi5jb20+CgpBY2tlZC1ieTogSmFzb24gV2FuZyA8
amFzb3dhbmdAcmVkaGF0LmNvbT4KClRoYW5rcwoKPiAtLS0KPiAgZHJpdmVycy92ZHBhL3NvbGlk
cnVuL01ha2VmaWxlICAgICB8ICAgMSArCj4gIGRyaXZlcnMvdmRwYS9zb2xpZHJ1bi9zbmV0X2N0
cmwuYyAgfCAzMjQgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKPiAgZHJpdmVycy92ZHBh
L3NvbGlkcnVuL3NuZXRfaHdtb24uYyB8ICAgMiArLQo+ICBkcml2ZXJzL3ZkcGEvc29saWRydW4v
c25ldF9tYWluLmMgIHwgMTEyICsrKystLS0tLS0KPiAgZHJpdmVycy92ZHBhL3NvbGlkcnVuL3Nu
ZXRfdmRwYS5oICB8ICAxOSArLQo+ICA1IGZpbGVzIGNoYW5nZWQsIDM4NyBpbnNlcnRpb25zKCsp
LCA3MSBkZWxldGlvbnMoLSkKPiAgY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvdmRwYS9zb2xp
ZHJ1bi9zbmV0X2N0cmwuYwo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmRwYS9zb2xpZHJ1bi9N
YWtlZmlsZSBiL2RyaXZlcnMvdmRwYS9zb2xpZHJ1bi9NYWtlZmlsZQo+IGluZGV4IGMwYWEzNDE1
YmY3Li45MTE2MjUyY2Q1ZiAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZkcGEvc29saWRydW4vTWFr
ZWZpbGUKPiArKysgYi9kcml2ZXJzL3ZkcGEvc29saWRydW4vTWFrZWZpbGUKPiBAQCAtMSw2ICsx
LDcgQEAKPiAgIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMAo+ICBvYmotJChDT05G
SUdfU05FVF9WRFBBKSArPSBzbmV0X3ZkcGEubwo+ICBzbmV0X3ZkcGEtJChDT05GSUdfU05FVF9W
RFBBKSArPSBzbmV0X21haW4ubwo+ICtzbmV0X3ZkcGEtJChDT05GSUdfU05FVF9WRFBBKSArPSBz
bmV0X2N0cmwubwo+ICBpZmRlZiBDT05GSUdfSFdNT04KPiAgc25ldF92ZHBhLSQoQ09ORklHX1NO
RVRfVkRQQSkgKz0gc25ldF9od21vbi5vCj4gIGVuZGlmCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMv
dmRwYS9zb2xpZHJ1bi9zbmV0X2N0cmwuYyBiL2RyaXZlcnMvdmRwYS9zb2xpZHJ1bi9zbmV0X2N0
cmwuYwo+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAuLjEwY2RlNTAy
ZjFhCj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL2RyaXZlcnMvdmRwYS9zb2xpZHJ1bi9zbmV0X2N0
cmwuYwo+IEBAIC0wLDAgKzEsMzI0IEBACj4gKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBH
UEwtMi4wLW9ubHkKPiArLyoKPiArICogU29saWRSdW4gRFBVIGRyaXZlciBmb3IgY29udHJvbCBw
bGFuZQo+ICsgKgo+ICsgKiBDb3B5cmlnaHQgKEMpIDIwMjItMjAyMyBTb2xpZFJ1bgo+ICsgKgo+
ICsgKiBBdXRob3I6IEFsdmFybyBLYXJzeiA8YWx2YXJvLmthcnN6QHNvbGlkLXJ1bi5jb20+Cj4g
KyAqCj4gKyAqLwo+ICsKPiArI2luY2x1ZGUgPGxpbnV4L2lvcG9sbC5oPgo+ICsKPiArI2luY2x1
ZGUgInNuZXRfdmRwYS5oIgo+ICsKPiArZW51bSBzbmV0X2N0cmxfb3Bjb2RlcyB7Cj4gKyAgICAg
ICBTTkVUX0NUUkxfT1BfREVTVFJPWSA9IDEsCj4gKyAgICAgICBTTkVUX0NUUkxfT1BfUkVBRF9W
UV9TVEFURSwKPiArfTsKPiArCj4gKyNkZWZpbmUgU05FVF9DVFJMX1RJTUVPVVQgICAgICAgICAg
ICAgIDIwMDAwMDAKPiArCj4gKyNkZWZpbmUgU05FVF9DVFJMX0RBVEFfU0laRV9NQVNLICAgICAg
IDB4MDAwMEZGRkYKPiArI2RlZmluZSBTTkVUX0NUUkxfSU5fUFJPQ0VTU19NQVNLICAgICAgMHgw
MDAxMDAwMAo+ICsjZGVmaW5lIFNORVRfQ1RSTF9DSFVOS19SRFlfTUFTSyAgICAgICAweDAwMDIw
MDAwCj4gKyNkZWZpbmUgU05FVF9DVFJMX0VSUk9SX01BU0sgICAgICAgICAgIDB4MEZGQzAwMDAK
PiArCj4gKyNkZWZpbmUgU05FVF9WQUxfVE9fRVJSKHZhbCkgICAgICAgICAgICgtKCgodmFsKSAm
IFNORVRfQ1RSTF9FUlJPUl9NQVNLKSA+PiAxOCkpCj4gKyNkZWZpbmUgU05FVF9FTVBUWV9DVFJM
KHZhbCkgICAgICAgICAgICgoKHZhbCkgJiBTTkVUX0NUUkxfRVJST1JfTUFTSykgfHwgXAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEoKHZhbCkgJiBT
TkVUX0NUUkxfSU5fUFJPQ0VTU19NQVNLKSkKPiArI2RlZmluZSBTTkVUX0RBVEFfUkVBRFkodmFs
KSAgICAgICAgICAgKCh2YWwpICYgKFNORVRfQ1RSTF9FUlJPUl9NQVNLIHwgU05FVF9DVFJMX0NI
VU5LX1JEWV9NQVNLKSkKPiArCj4gKy8qIENvbnRyb2wgcmVnaXN0ZXIgdXNlZCB0byByZWFkIGRh
dGEgZnJvbSB0aGUgRFBVICovCj4gK3N0cnVjdCBzbmV0X2N0cmxfcmVnX2N0cmwgewo+ICsgICAg
ICAgLyogQ2h1bmsgc2l6ZSBpbiA0QiB3b3JkcyAqLwo+ICsgICAgICAgdTE2IGRhdGFfc2l6ZTsK
PiArICAgICAgIC8qIFdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGEgY29tbWFuZCAqLwo+ICsgICAg
ICAgdTE2IGluX3Byb2Nlc3M6MTsKPiArICAgICAgIC8qIEEgZGF0YSBjaHVuayBpcyByZWFkeSBh
bmQgY2FuIGJlIGNvbnN1bWVkICovCj4gKyAgICAgICB1MTYgY2h1bmtfcmVhZHk6MTsKPiArICAg
ICAgIC8qIEVycm9yIGNvZGUgKi8KPiArICAgICAgIHUxNiBlcnJvcjoxMDsKPiArICAgICAgIC8q
IFNhdmVkIGZvciBmdXR1cmUgdXNhZ2UgKi8KPiArICAgICAgIHUxNiByc3ZkOjQ7Cj4gK307Cj4g
Kwo+ICsvKiBPcGNvZGUgcmVnaXN0ZXIgKi8KPiArc3RydWN0IHNuZXRfY3RybF9yZWdfb3Agewo+
ICsgICAgICAgdTE2IG9wY29kZTsKPiArICAgICAgIC8qIE9ubHkgaWYgVlEgaW5kZXggaXMgcmVs
ZXZhbnQgZm9yIHRoZSBjb21tYW5kICovCj4gKyAgICAgICB1MTYgdnFfaWR4Owo+ICt9Owo+ICsK
PiArc3RydWN0IHNuZXRfY3RybF9yZWdzIHsKPiArICAgICAgIHN0cnVjdCBzbmV0X2N0cmxfcmVn
X29wIG9wOwo+ICsgICAgICAgc3RydWN0IHNuZXRfY3RybF9yZWdfY3RybCBjdHJsOwo+ICsgICAg
ICAgdTMyIHJzdmQ7Cj4gKyAgICAgICB1MzIgZGF0YVtdOwo+ICt9Owo+ICsKPiArc3RhdGljIHN0
cnVjdCBzbmV0X2N0cmxfcmVncyBfX2lvbWVtICpzbmV0X2dldF9jdHJsKHN0cnVjdCBzbmV0ICpz
bmV0KQo+ICt7Cj4gKyAgICAgICByZXR1cm4gc25ldC0+YmFyICsgc25ldC0+cHNuZXQtPmNmZy5j
dHJsX29mZjsKPiArfQo+ICsKPiArc3RhdGljIGludCBzbmV0X3dhaXRfZm9yX2VtcHR5X2N0cmwo
c3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9tZW0gKnJlZ3MpCj4gK3sKPiArICAgICAgIHUzMiB2
YWw7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHJlYWR4X3BvbGxfdGltZW91dChpb3JlYWQzMiwgJnJl
Z3MtPmN0cmwsIHZhbCwgU05FVF9FTVBUWV9DVFJMKHZhbCksIDEwLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBTTkVUX0NUUkxfVElNRU9VVCk7Cj4gK30KPiArCj4gK3N0YXRp
YyBpbnQgc25ldF93YWl0X2Zvcl9lbXB0eV9vcChzdHJ1Y3Qgc25ldF9jdHJsX3JlZ3MgX19pb21l
bSAqcmVncykKPiArewo+ICsgICAgICAgdTMyIHZhbDsKPiArCj4gKyAgICAgICByZXR1cm4gcmVh
ZHhfcG9sbF90aW1lb3V0KGlvcmVhZDMyLCAmcmVncy0+b3AsIHZhbCwgIXZhbCwgMTAsIFNORVRf
Q1RSTF9USU1FT1VUKTsKPiArfQo+ICsKPiArc3RhdGljIGludCBzbmV0X3dhaXRfZm9yX2RhdGEo
c3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9tZW0gKnJlZ3MpCj4gK3sKPiArICAgICAgIHUzMiB2
YWw7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHJlYWR4X3BvbGxfdGltZW91dChpb3JlYWQzMiwgJnJl
Z3MtPmN0cmwsIHZhbCwgU05FVF9EQVRBX1JFQURZKHZhbCksIDEwLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBTTkVUX0NUUkxfVElNRU9VVCk7Cj4gK30KPiArCj4gK3N0YXRp
YyB1MzIgc25ldF9yZWFkMzJfd29yZChzdHJ1Y3Qgc25ldF9jdHJsX3JlZ3MgX19pb21lbSAqY3Ry
bF9yZWdzLCB1MTYgd29yZF9pZHgpCj4gK3sKPiArICAgICAgIHJldHVybiBpb3JlYWQzMigmY3Ry
bF9yZWdzLT5kYXRhW3dvcmRfaWR4XSk7Cj4gK30KPiArCj4gK3N0YXRpYyB1MzIgc25ldF9yZWFk
X2N0cmwoc3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9tZW0gKmN0cmxfcmVncykKPiArewo+ICsg
ICAgICAgcmV0dXJuIGlvcmVhZDMyKCZjdHJsX3JlZ3MtPmN0cmwpOwo+ICt9Cj4gKwo+ICtzdGF0
aWMgdm9pZCBzbmV0X3dyaXRlX2N0cmwoc3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9tZW0gKmN0
cmxfcmVncywgdTMyIHZhbCkKPiArewo+ICsgICAgICAgaW93cml0ZTMyKHZhbCwgJmN0cmxfcmVn
cy0+Y3RybCk7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHNuZXRfd3JpdGVfb3Aoc3RydWN0IHNu
ZXRfY3RybF9yZWdzIF9faW9tZW0gKmN0cmxfcmVncywgdTMyIHZhbCkKPiArewo+ICsgICAgICAg
aW93cml0ZTMyKHZhbCwgJmN0cmxfcmVncy0+b3ApOwo+ICt9Cj4gKwo+ICtzdGF0aWMgaW50IHNu
ZXRfd2FpdF9mb3JfZHB1X2NvbXBsZXRpb24oc3RydWN0IHNuZXRfY3RybF9yZWdzIF9faW9tZW0g
KmN0cmxfcmVncykKPiArewo+ICsgICAgICAgLyogV2FpdCB1bnRpbCB0aGUgRFBVIGZpbmlzaGVz
IGNvbXBsZXRlbHkuCj4gKyAgICAgICAgKiBJdCB3aWxsIGNsZWFyIHRoZSBvcGNvZGUgcmVnaXN0
ZXIuCj4gKyAgICAgICAgKi8KPiArICAgICAgIHJldHVybiBzbmV0X3dhaXRfZm9yX2VtcHR5X29w
KGN0cmxfcmVncyk7Cj4gK30KPiArCj4gKy8qIFJlYWRpbmcgY3RybCBmcm9tIHRoZSBEUFU6Cj4g
KyAqIGJ1Zl9zaXplIG11c3QgYmUgNEIgYWxpZ25lZAo+ICsgKgo+ICsgKiBTdGVwczoKPiArICoK
PiArICogKDEpIFZlcmlmeSB0aGF0IHRoZSBEUFUgaXMgbm90IGluIHRoZSBtaWRkbGUgb2YgYW5v
dGhlciBvcGVyYXRpb24gYnkKPiArICogICAgIHJlYWRpbmcgdGhlIGluX3Byb2Nlc3MgYW5kIGVy
cm9yIGJpdHMgaW4gdGhlIGNvbnRyb2wgcmVnaXN0ZXIuCj4gKyAqICgyKSBXcml0ZSB0aGUgcmVx
dWVzdCBvcGNvZGUgYW5kIHRoZSBWUSBpZHggaW4gdGhlIG9wY29kZSByZWdpc3Rlcgo+ICsgKiAg
ICAgYW5kIHdyaXRlIHRoZSBidWZmZXIgc2l6ZSBpbiB0aGUgY29udHJvbCByZWdpc3Rlci4KPiAr
ICogKDMpIFN0YXJ0IHJlYWRpbmQgY2h1bmtzIG9mIGRhdGEsIGNodW5rX3JlYWR5IGJpdCBpbmRp
Y2F0ZXMgdGhhdCBhCj4gKyAqICAgICBkYXRhIGNodW5rIGlzIGF2YWlsYWJsZSwgd2Ugc2lnbmFs
IHRoYXQgd2UgcmVhZCB0aGUgZGF0YSBieSBjbGVhcmluZyB0aGUgYml0Lgo+ICsgKiAoNCkgRGV0
ZWN0IHRoYXQgdGhlIHRyYW5zZmVyIGlzIGNvbXBsZXRlZCB3aGVuIHRoZSBpbl9wcm9jZXNzIGJp
dAo+ICsgKiAgICAgaW4gdGhlIGNvbnRyb2wgcmVnaXN0ZXIgaXMgY2xlYXJlZCBvciB3aGVuIHRo
ZSBhbiBlcnJvciBhcHBlYXJzLgo+ICsgKi8KPiArc3RhdGljIGludCBzbmV0X2N0cmxfcmVhZF9m
cm9tX2RwdShzdHJ1Y3Qgc25ldCAqc25ldCwgdTE2IG9wY29kZSwgdTE2IHZxX2lkeCwgdm9pZCAq
YnVmZmVyLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdTMyIGJ1Zl9zaXpl
KQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IHNuZXQtPnBkZXY7Cj4gKyAg
ICAgICBzdHJ1Y3Qgc25ldF9jdHJsX3JlZ3MgX19pb21lbSAqcmVncyA9IHNuZXRfZ2V0X2N0cmwo
c25ldCk7Cj4gKyAgICAgICB1MzIgKmJmcl9wdHIgPSAodTMyICopYnVmZmVyOwo+ICsgICAgICAg
dTMyIHZhbDsKPiArICAgICAgIHUxNiBidWZfd29yZHM7Cj4gKyAgICAgICBpbnQgcmV0Owo+ICsg
ICAgICAgdTE2IHdvcmRzLCBpLCB0b3Rfd29yZHMgPSAwOwo+ICsKPiArICAgICAgIC8qIFN1cHBv
cnRlZCBmb3IgY29uZmlnIDIrICovCj4gKyAgICAgICBpZiAoIVNORVRfQ0ZHX1ZFUihzbmV0LCAy
KSkKPiArICAgICAgICAgICAgICAgcmV0dXJuIC1FT1BOT1RTVVBQOwo+ICsKPiArICAgICAgIGlm
ICghSVNfQUxJR05FRChidWZfc2l6ZSwgNCkpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAtRUlO
VkFMOwo+ICsKPiArICAgICAgIG11dGV4X2xvY2soJnNuZXQtPmN0cmxfbG9jayk7Cj4gKwo+ICsg
ICAgICAgYnVmX3dvcmRzID0gYnVmX3NpemUgLyA0Owo+ICsKPiArICAgICAgIC8qIE1ha2Ugc3Vy
ZSBjb250cm9sIHJlZ2lzdGVyIGlzIGVtcHR5ICovCj4gKyAgICAgICByZXQgPSBzbmV0X3dhaXRf
Zm9yX2VtcHR5X2N0cmwocmVncyk7Cj4gKyAgICAgICBpZiAocmV0KSB7Cj4gKyAgICAgICAgICAg
ICAgIFNORVRfV0FSTihwZGV2LCAiVGltZW91dCB3YWl0aW5nIGZvciBwcmV2aW91cyBjb250cm9s
IGRhdGEgdG8gYmUgY29uc3VtZWRcbiIpOwo+ICsgICAgICAgICAgICAgICBnb3RvIGV4aXQ7Cj4g
KyAgICAgICB9Cj4gKwo+ICsgICAgICAgLyogV2UgbmVlZCB0byB3cml0ZSB0aGUgYnVmZmVyIHNp
emUgaW4gdGhlIGNvbnRyb2wgcmVnaXN0ZXIsIGFuZCB0aGUgb3Bjb2RlICsgdnEgaW5kZXggaW4K
PiArICAgICAgICAqIHRoZSBvcGNvZGUgcmVnaXN0ZXIuCj4gKyAgICAgICAgKiBXZSB1c2UgYSBz
cGlubG9jayB0byBzZXJpYWxpemUgdGhlIHdyaXRlcy4KPiArICAgICAgICAqLwo+ICsgICAgICAg
c3Bpbl9sb2NrKCZzbmV0LT5jdHJsX3NwaW5sb2NrKTsKPiArCj4gKyAgICAgICBzbmV0X3dyaXRl
X2N0cmwocmVncywgYnVmX3dvcmRzKTsKPiArICAgICAgIHNuZXRfd3JpdGVfb3AocmVncywgb3Bj
b2RlIHwgKHZxX2lkeCA8PCAxNikpOwo+ICsKPiArICAgICAgIHNwaW5fdW5sb2NrKCZzbmV0LT5j
dHJsX3NwaW5sb2NrKTsKPiArCj4gKyAgICAgICB3aGlsZSAoYnVmX3dvcmRzICE9IHRvdF93b3Jk
cykgewo+ICsgICAgICAgICAgICAgICByZXQgPSBzbmV0X3dhaXRfZm9yX2RhdGEocmVncyk7Cj4g
KyAgICAgICAgICAgICAgIGlmIChyZXQpIHsKPiArICAgICAgICAgICAgICAgICAgICAgICBTTkVU
X1dBUk4ocGRldiwgIlRpbWVvdXQgd2FpdGluZyBmb3IgY29udHJvbCBkYXRhXG4iKTsKPiArICAg
ICAgICAgICAgICAgICAgICAgICBnb3RvIGV4aXQ7Cj4gKyAgICAgICAgICAgICAgIH0KPiArCj4g
KyAgICAgICAgICAgICAgIHZhbCA9IHNuZXRfcmVhZF9jdHJsKHJlZ3MpOwo+ICsKPiArICAgICAg
ICAgICAgICAgLyogRXJyb3I/ICovCj4gKyAgICAgICAgICAgICAgIGlmICh2YWwgJiBTTkVUX0NU
UkxfRVJST1JfTUFTSykgewo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IFNORVRfVkFM
X1RPX0VSUih2YWwpOwo+ICsgICAgICAgICAgICAgICAgICAgICAgIFNORVRfV0FSTihwZGV2LCAi
RXJyb3Igd2hpbGUgcmVhZGluZyBjb250cm9sIGRhdGEgZnJvbSBEUFUsIGVyciAlZFxuIiwgcmV0
KTsKPiArICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGV4aXQ7Cj4gKyAgICAgICAgICAgICAg
IH0KPiArCj4gKyAgICAgICAgICAgICAgIHdvcmRzID0gbWluX3QodTE2LCB2YWwgJiBTTkVUX0NU
UkxfREFUQV9TSVpFX01BU0ssIGJ1Zl93b3JkcyAtIHRvdF93b3Jkcyk7Cj4gKwo+ICsgICAgICAg
ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgd29yZHM7IGkrKykgewo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICpiZnJfcHRyID0gc25ldF9yZWFkMzJfd29yZChyZWdzLCBpKTsKPiArICAgICAgICAg
ICAgICAgICAgICAgICBiZnJfcHRyKys7Cj4gKyAgICAgICAgICAgICAgIH0KPiArCj4gKyAgICAg
ICAgICAgICAgIHRvdF93b3JkcyArPSB3b3JkczsKPiArCj4gKyAgICAgICAgICAgICAgIC8qIElz
IHRoZSBqb2IgY29tcGxldGVkPyAqLwo+ICsgICAgICAgICAgICAgICBpZiAoISh2YWwgJiBTTkVU
X0NUUkxfSU5fUFJPQ0VTU19NQVNLKSkKPiArICAgICAgICAgICAgICAgICAgICAgICBicmVhazsK
PiArCj4gKyAgICAgICAgICAgICAgIC8qIENsZWFyIHRoZSBjaHVuayByZWFkeSBiaXQgYW5kIGNv
bnRpbnVlICovCj4gKyAgICAgICAgICAgICAgIHZhbCAmPSB+U05FVF9DVFJMX0NIVU5LX1JEWV9N
QVNLOwo+ICsgICAgICAgICAgICAgICBzbmV0X3dyaXRlX2N0cmwocmVncywgdmFsKTsKPiArICAg
ICAgIH0KPiArCj4gKyAgICAgICByZXQgPSBzbmV0X3dhaXRfZm9yX2RwdV9jb21wbGV0aW9uKHJl
Z3MpOwo+ICsgICAgICAgaWYgKHJldCkKPiArICAgICAgICAgICAgICAgU05FVF9XQVJOKHBkZXYs
ICJUaW1lb3V0IHdhaXRpbmcgZm9yIHRoZSBEUFUgdG8gY29tcGxldGUgYSBjb250cm9sIGNvbW1h
bmRcbiIpOwo+ICsKPiArZXhpdDoKPiArICAgICAgIG11dGV4X3VubG9jaygmc25ldC0+Y3RybF9s
b2NrKTsKPiArICAgICAgIHJldHVybiByZXQ7Cj4gK30KPiArCj4gKy8qIFNlbmQgYSBjb250cm9s
IG1lc3NhZ2UgdG8gdGhlIERQVSB1c2luZyB0aGUgb2xkIG1lY2hhbmlzbQo+ICsgKiB1c2VkIHdp
dGggY29uZmlnIHZlcnNpb24gMS4KPiArICovCj4gK3N0YXRpYyBpbnQgc25ldF9zZW5kX2N0cmxf
bXNnX29sZChzdHJ1Y3Qgc25ldCAqc25ldCwgdTMyIG9wY29kZSkKPiArewo+ICsgICAgICAgc3Ry
dWN0IHBjaV9kZXYgKnBkZXYgPSBzbmV0LT5wZGV2Owo+ICsgICAgICAgc3RydWN0IHNuZXRfY3Ry
bF9yZWdzIF9faW9tZW0gKnJlZ3MgPSBzbmV0X2dldF9jdHJsKHNuZXQpOwo+ICsgICAgICAgaW50
IHJldDsKPiArCj4gKyAgICAgICBtdXRleF9sb2NrKCZzbmV0LT5jdHJsX2xvY2spOwo+ICsKPiAr
ICAgICAgIC8qIE9sZCBtZWNoYW5pc20gdXNlcyBqdXN0IDEgcmVnaXN0ZXIsIHRoZSBvcGNvZGUg
cmVnaXN0ZXIuCj4gKyAgICAgICAgKiBNYWtlIHN1cmUgdGhhdCB0aGUgb3Bjb2RlIHJlZ2lzdGVy
IGlzIGVtcHR5LCBhbmQgdGhhdCB0aGUgRFBVIGlzbid0Cj4gKyAgICAgICAgKiBwcm9jZXNzaW5n
IGFuIG9sZCBtZXNzYWdlLgo+ICsgICAgICAgICovCj4gKyAgICAgICByZXQgPSBzbmV0X3dhaXRf
Zm9yX2VtcHR5X29wKHJlZ3MpOwo+ICsgICAgICAgaWYgKHJldCkgewo+ICsgICAgICAgICAgICAg
ICBTTkVUX1dBUk4ocGRldiwgIlRpbWVvdXQgd2FpdGluZyBmb3IgcHJldmlvdXMgY29udHJvbCBt
ZXNzYWdlIHRvIGJlIEFDS2VkXG4iKTsKPiArICAgICAgICAgICAgICAgZ290byBleGl0Owo+ICsg
ICAgICAgfQo+ICsKPiArICAgICAgIC8qIFdyaXRlIHRoZSBtZXNzYWdlICovCj4gKyAgICAgICBz
bmV0X3dyaXRlX29wKHJlZ3MsIG9wY29kZSk7Cj4gKwo+ICsgICAgICAgLyogRFBVIEFDS3MgdGhl
IG1lc3NhZ2UgYnkgY2xlYXJpbmcgdGhlIG9wY29kZSByZWdpc3RlciAqLwo+ICsgICAgICAgcmV0
ID0gc25ldF93YWl0X2Zvcl9lbXB0eV9vcChyZWdzKTsKPiArICAgICAgIGlmIChyZXQpCj4gKyAg
ICAgICAgICAgICAgIFNORVRfV0FSTihwZGV2LCAiVGltZW91dCB3YWl0aW5nIGZvciBhIGNvbnRy
b2wgbWVzc2FnZSB0byBiZSBBQ0tlZFxuIik7Cj4gKwo+ICtleGl0Ogo+ICsgICAgICAgbXV0ZXhf
dW5sb2NrKCZzbmV0LT5jdHJsX2xvY2spOwo+ICsgICAgICAgcmV0dXJuIHJldDsKPiArfQo+ICsK
PiArLyogU2VuZCBhIGNvbnRyb2wgbWVzc2FnZSB0byB0aGUgRFBVLgo+ICsgKiBBIGNvbnRyb2wg
bWVzc2FnZSBpcyBhIG1lc3NhZ2Ugd2l0aG91dCBwYXlsb2FkLgo+ICsgKi8KPiArc3RhdGljIGlu
dCBzbmV0X3NlbmRfY3RybF9tc2coc3RydWN0IHNuZXQgKnNuZXQsIHUxNiBvcGNvZGUsIHUxNiB2
cV9pZHgpCj4gK3sKPiArICAgICAgIHN0cnVjdCBwY2lfZGV2ICpwZGV2ID0gc25ldC0+cGRldjsK
PiArICAgICAgIHN0cnVjdCBzbmV0X2N0cmxfcmVncyBfX2lvbWVtICpyZWdzID0gc25ldF9nZXRf
Y3RybChzbmV0KTsKPiArICAgICAgIHUzMiB2YWw7Cj4gKyAgICAgICBpbnQgcmV0Owo+ICsKPiAr
ICAgICAgIC8qIElmIGNvbmZpZyB2ZXJzaW9uIGlzIG5vdCAyKywgdXNlIHRoZSBvbGQgbWVjaGFu
aXNtICovCj4gKyAgICAgICBpZiAoIVNORVRfQ0ZHX1ZFUihzbmV0LCAyKSkKPiArICAgICAgICAg
ICAgICAgcmV0dXJuIHNuZXRfc2VuZF9jdHJsX21zZ19vbGQoc25ldCwgb3Bjb2RlKTsKPiArCj4g
KyAgICAgICBtdXRleF9sb2NrKCZzbmV0LT5jdHJsX2xvY2spOwo+ICsKPiArICAgICAgIC8qIE1h
a2Ugc3VyZSBjb250cm9sIHJlZ2lzdGVyIGlzIGVtcHR5ICovCj4gKyAgICAgICByZXQgPSBzbmV0
X3dhaXRfZm9yX2VtcHR5X2N0cmwocmVncyk7Cj4gKyAgICAgICBpZiAocmV0KSB7Cj4gKyAgICAg
ICAgICAgICAgIFNORVRfV0FSTihwZGV2LCAiVGltZW91dCB3YWl0aW5nIGZvciBwcmV2aW91cyBj
b250cm9sIGRhdGEgdG8gYmUgY29uc3VtZWRcbiIpOwo+ICsgICAgICAgICAgICAgICBnb3RvIGV4
aXQ7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgLyogV2UgbmVlZCB0byBjbGVhciB0aGUgY29u
dHJvbCByZWdpc3RlciBhbmQgd3JpdGUgdGhlIG9wY29kZSArIHZxIGluZGV4IGluIHRoZSBvcGNv
ZGUKPiArICAgICAgICAqIHJlZ2lzdGVyLgo+ICsgICAgICAgICogV2UgdXNlIGEgc3BpbmxvY2sg
dG8gc2VyaWFsaXplIHRoZSB3cml0ZXMuCj4gKyAgICAgICAgKi8KPiArICAgICAgIHNwaW5fbG9j
aygmc25ldC0+Y3RybF9zcGlubG9jayk7Cj4gKwo+ICsgICAgICAgc25ldF93cml0ZV9jdHJsKHJl
Z3MsIDApOwo+ICsgICAgICAgc25ldF93cml0ZV9vcChyZWdzLCBvcGNvZGUgfCAodnFfaWR4IDw8
IDE2KSk7Cj4gKwo+ICsgICAgICAgc3Bpbl91bmxvY2soJnNuZXQtPmN0cmxfc3BpbmxvY2spOwo+
ICsKPiArICAgICAgIC8qIFRoZSBEUFUgQUNLcyBjb250cm9sIG1lc3NhZ2VzIGJ5IHNldHRpbmcg
dGhlIGNodW5rIHJlYWR5IGJpdAo+ICsgICAgICAgICogd2l0aG91dCBkYXRhLgo+ICsgICAgICAg
ICovCj4gKyAgICAgICByZXQgPSBzbmV0X3dhaXRfZm9yX2RhdGEocmVncyk7Cj4gKyAgICAgICBp
ZiAocmV0KSB7Cj4gKyAgICAgICAgICAgICAgIFNORVRfV0FSTihwZGV2LCAiVGltZW91dCB3YWl0
aW5nIGZvciBjb250cm9sIG1lc3NhZ2UgdG8gYmUgQUNLZWRcbiIpOwo+ICsgICAgICAgICAgICAg
ICBnb3RvIGV4aXQ7Cj4gKyAgICAgICB9Cj4gKwo+ICsgICAgICAgLyogQ2hlY2sgZm9yIGVycm9y
cyAqLwo+ICsgICAgICAgdmFsID0gc25ldF9yZWFkX2N0cmwocmVncyk7Cj4gKyAgICAgICByZXQg
PSBTTkVUX1ZBTF9UT19FUlIodmFsKTsKPiArCj4gKyAgICAgICAvKiBDbGVhciB0aGUgY2h1bmsg
cmVhZHkgYml0ICovCj4gKyAgICAgICB2YWwgJj0gflNORVRfQ1RSTF9DSFVOS19SRFlfTUFTSzsK
PiArICAgICAgIHNuZXRfd3JpdGVfY3RybChyZWdzLCB2YWwpOwo+ICsKPiArICAgICAgIHJldCA9
IHNuZXRfd2FpdF9mb3JfZHB1X2NvbXBsZXRpb24ocmVncyk7Cj4gKyAgICAgICBpZiAocmV0KQo+
ICsgICAgICAgICAgICAgICBTTkVUX1dBUk4ocGRldiwgIlRpbWVvdXQgd2FpdGluZyBmb3IgRFBV
IHRvIGNvbXBsZXRlIGEgY29udHJvbCBjb21tYW5kLCBlcnIgJWRcbiIsCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICByZXQpOwo+ICsKPiArZXhpdDoKPiArICAgICAgIG11dGV4X3VubG9jaygm
c25ldC0+Y3RybF9sb2NrKTsKPiArICAgICAgIHJldHVybiByZXQ7Cj4gK30KPiArCj4gK3ZvaWQg
c25ldF9jdHJsX2NsZWFyKHN0cnVjdCBzbmV0ICpzbmV0KQo+ICt7Cj4gKyAgICAgICBzdHJ1Y3Qg
c25ldF9jdHJsX3JlZ3MgX19pb21lbSAqcmVncyA9IHNuZXRfZ2V0X2N0cmwoc25ldCk7Cj4gKwo+
ICsgICAgICAgc25ldF93cml0ZV9vcChyZWdzLCAwKTsKPiArfQo+ICsKPiAraW50IHNuZXRfZGVz
dHJveV9kZXYoc3RydWN0IHNuZXQgKnNuZXQpCj4gK3sKPiArICAgICAgIHJldHVybiBzbmV0X3Nl
bmRfY3RybF9tc2coc25ldCwgU05FVF9DVFJMX09QX0RFU1RST1ksIDApOwo+ICt9Cj4gKwo+ICtp
bnQgc25ldF9yZWFkX3ZxX3N0YXRlKHN0cnVjdCBzbmV0ICpzbmV0LCB1MTYgaWR4LCBzdHJ1Y3Qg
dmRwYV92cV9zdGF0ZSAqc3RhdGUpCj4gK3sKPiArICAgICAgIHJldHVybiBzbmV0X2N0cmxfcmVh
ZF9mcm9tX2RwdShzbmV0LCBTTkVUX0NUUkxfT1BfUkVBRF9WUV9TVEFURSwgaWR4LCBzdGF0ZSwK
PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YoKnN0YXRlKSk7
Cj4gK30KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92ZHBhL3NvbGlkcnVuL3NuZXRfaHdtb24uYyBi
L2RyaXZlcnMvdmRwYS9zb2xpZHJ1bi9zbmV0X2h3bW9uLmMKPiBpbmRleCBlNjk1ZTM2ZmY3NS4u
NDJjODczODdhMGYgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy92ZHBhL3NvbGlkcnVuL3NuZXRfaHdt
b24uYwo+ICsrKyBiL2RyaXZlcnMvdmRwYS9zb2xpZHJ1bi9zbmV0X2h3bW9uLmMKPiBAQCAtMiw3
ICsyLDcgQEAKPiAgLyoKPiAgICogU29saWRSdW4gRFBVIGRyaXZlciBmb3IgY29udHJvbCBwbGFu
ZQo+ICAgKgo+IC0gKiBDb3B5cmlnaHQgKEMpIDIwMjIgU29saWRSdW4KPiArICogQ29weXJpZ2h0
IChDKSAyMDIyLTIwMjMgU29saWRSdW4KPiAgICoKPiAgICogQXV0aG9yOiBBbHZhcm8gS2Fyc3og
PGFsdmFyby5rYXJzekBzb2xpZC1ydW4uY29tPgo+ICAgKgo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L3ZkcGEvc29saWRydW4vc25ldF9tYWluLmMgYi9kcml2ZXJzL3ZkcGEvc29saWRydW4vc25ldF9t
YWluLmMKPiBpbmRleCA2OGRlNzI3Mzk4ZS4uODY3NjlmNDM2YjQgMTAwNjQ0Cj4gLS0tIGEvZHJp
dmVycy92ZHBhL3NvbGlkcnVuL3NuZXRfbWFpbi5jCj4gKysrIGIvZHJpdmVycy92ZHBhL3NvbGlk
cnVuL3NuZXRfbWFpbi5jCj4gQEAgLTIsNyArMiw3IEBACj4gIC8qCj4gICAqIFNvbGlkUnVuIERQ
VSBkcml2ZXIgZm9yIGNvbnRyb2wgcGxhbmUKPiAgICoKPiAtICogQ29weXJpZ2h0IChDKSAyMDIy
IFNvbGlkUnVuCj4gKyAqIENvcHlyaWdodCAoQykgMjAyMi0yMDIzIFNvbGlkUnVuCj4gICAqCj4g
ICAqIEF1dGhvcjogQWx2YXJvIEthcnN6IDxhbHZhcm8ua2Fyc3pAc29saWQtcnVuLmNvbT4KPiAg
ICoKPiBAQCAtMTYsMTQgKzE2LDEyIEBACj4gIC8qIFNORVQgc2lnbmF0dXJlICovCj4gICNkZWZp
bmUgU05FVF9TSUdOQVRVUkUgICAgICAgICAgMHhEMEQwNjM2Mwo+ICAvKiBNYXguIGNvbmZpZyB2
ZXJzaW9uIHRoYXQgd2UgY2FuIHdvcmsgd2l0aCAqLwo+IC0jZGVmaW5lIFNORVRfQ0ZHX1ZFUlNJ
T04gICAgICAgIDB4MQo+ICsjZGVmaW5lIFNORVRfQ0ZHX1ZFUlNJT04gICAgICAgIDB4Mgo+ICAv
KiBRdWV1ZSBhbGlnbiAqLwo+ICAjZGVmaW5lIFNORVRfUVVFVUVfQUxJR05NRU5UICAgIFBBR0Vf
U0laRQo+ICAvKiBLaWNrIHZhbHVlIHRvIG5vdGlmeSB0aGF0IG5ldyBkYXRhIGlzIGF2YWlsYWJs
ZSAqLwo+ICAjZGVmaW5lIFNORVRfS0lDS19WQUwgICAgICAgICAgIDB4MQo+ICAjZGVmaW5lIFNO
RVRfQ09ORklHX09GRiAgICAgICAgIDB4MAo+IC0vKiBBQ0sgdGltZW91dCBmb3IgYSBtZXNzYWdl
ICovCj4gLSNkZWZpbmUgU05FVF9BQ0tfVElNRU9VVCAgICAgICAyMDAwMDAwCj4gIC8qIEhvdyBs
b25nIHdlIGFyZSB3aWxsaW5nIHRvIHdhaXQgZm9yIGEgU05FVCBkZXZpY2UgKi8KPiAgI2RlZmlu
ZSBTTkVUX0RFVEVDVF9USU1FT1VUICAgIDUwMDAwMDAKPiAgLyogSG93IGxvbmcgc2hvdWxkIHdl
IHdhaXQgZm9yIHRoZSBEUFUgdG8gcmVhZCBvdXIgY29uZmlnICovCj4gQEAgLTMyLDU2ICszMCwx
MSBAQAo+ICAjZGVmaW5lIFNORVRfR0VORVJBTF9DRkdfTEVOICAgMzYKPiAgI2RlZmluZSBTTkVU
X0dFTkVSQUxfQ0ZHX1ZRX0xFTiAgICAgICAgNDAKPgo+IC1lbnVtIHNuZXRfbXNnIHsKPiAtICAg
ICAgIFNORVRfTVNHX0RFU1RST1kgPSAxLAo+IC19Owo+IC0KPiAgc3RhdGljIHN0cnVjdCBzbmV0
ICp2ZHBhX3RvX3NuZXQoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhKQo+ICB7Cj4gICAgICAgICBy
ZXR1cm4gY29udGFpbmVyX29mKHZkcGEsIHN0cnVjdCBzbmV0LCB2ZHBhKTsKPiAgfQo+Cj4gLXN0
YXRpYyBpbnQgc25ldF93YWl0X2Zvcl9tc2dfYWNrKHN0cnVjdCBzbmV0ICpzbmV0KQo+IC17Cj4g
LSAgICAgICBzdHJ1Y3QgcGNpX2RldiAqcGRldiA9IHNuZXQtPnBkZXY7Cj4gLSAgICAgICBpbnQg
cmV0Owo+IC0gICAgICAgdTMyIHZhbDsKPiAtCj4gLSAgICAgICAvKiBUaGUgRFBVIHdpbGwgY2xl
YXIgdGhlIG1lc3NhZ2VzIG9mZnNldCBvbmNlIG1lc3NhZ2VzCj4gLSAgICAgICAgKiBhcmUgcHJv
Y2Vzc2VkLgo+IC0gICAgICAgICovCj4gLSAgICAgICByZXQgPSByZWFkeF9wb2xsX3RpbWVvdXQo
aW9yZWFkMzIsIHNuZXQtPmJhciArIHNuZXQtPnBzbmV0LT5jZmcubXNnX29mZiwKPiAtICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwsICF2YWwsIDEwLCBTTkVUX0FDS19USU1FT1VU
KTsKPiAtICAgICAgIGlmIChyZXQpCj4gLSAgICAgICAgICAgICAgIFNORVRfV0FSTihwZGV2LCAi
VGltZW91dCB3YWl0aW5nIGZvciBtZXNzYWdlIEFDS1xuIik7Cj4gLQo+IC0gICAgICAgcmV0dXJu
IHJldDsKPiAtfQo+IC0KPiAtLyogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBEUFUuCj4gLSAqIElm
IGJsb2NraW5nIGlzIHNldCwgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIG9uY2UgdGhlCj4gLSAq
IG1lc3NhZ2Ugd2FzIHByb2Nlc3NlZCBieSB0aGUgRFBVIChvciB0aW1lb3V0KS4KPiAtICovCj4g
LXN0YXRpYyBpbnQgc25ldF9zZW5kX21zZyhzdHJ1Y3Qgc25ldCAqc25ldCwgdTMyIG1zZywgYm9v
bCBibG9ja2luZykKPiAtewo+IC0gICAgICAgaW50IHJldCA9IDA7Cj4gLQo+IC0gICAgICAgLyog
TWFrZSBzdXJlIHRoZSBEUFUgYWNrZWQgbGFzdCBtZXNzYWdlIGJlZm9yZSBpc3N1aW5nIGEgbmV3
IG9uZSAqLwo+IC0gICAgICAgcmV0ID0gc25ldF93YWl0X2Zvcl9tc2dfYWNrKHNuZXQpOwo+IC0g
ICAgICAgaWYgKHJldCkKPiAtICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKPiAtCj4gLSAgICAg
ICAvKiBXcml0ZSB0aGUgbWVzc2FnZSAqLwo+IC0gICAgICAgc25ldF93cml0ZTMyKHNuZXQsIHNu
ZXQtPnBzbmV0LT5jZmcubXNnX29mZiwgbXNnKTsKPiAtCj4gLSAgICAgICBpZiAoYmxvY2tpbmcp
Cj4gLSAgICAgICAgICAgICAgIHJldCA9IHNuZXRfd2FpdF9mb3JfbXNnX2FjayhzbmV0KTsKPiAt
ICAgICAgIGVsc2UgLyogSWYgbm9uLWJsb2NraW5nLCBmbHVzaCB0aGUgd3JpdGUgYnkgaXNzdWlu
ZyBhIHJlYWQgKi8KPiAtICAgICAgICAgICAgICAgc25ldF9yZWFkMzIoc25ldCwgc25ldC0+cHNu
ZXQtPmNmZy5tc2dfb2ZmKTsKPiAtCj4gLSAgICAgICByZXR1cm4gcmV0Owo+IC19Cj4gLQo+ICBz
dGF0aWMgaXJxcmV0dXJuX3Qgc25ldF9jZmdfaXJxX2huZGxyKGludCBpcnEsIHZvaWQgKmRhdGEp
Cj4gIHsKPiAgICAgICAgIHN0cnVjdCBzbmV0ICpzbmV0ID0gZGF0YTsKPiBAQCAtMTgxLDMzICsx
MzQsNDggQEAgc3RhdGljIGJvb2wgc25ldF9nZXRfdnFfcmVhZHkoc3RydWN0IHZkcGFfZGV2aWNl
ICp2ZGV2LCB1MTYgaWR4KQo+ICAgICAgICAgcmV0dXJuIHNuZXQtPnZxc1tpZHhdLT5yZWFkeTsK
PiAgfQo+Cj4gLXN0YXRpYyBpbnQgc25ldF9zZXRfdnFfc3RhdGUoc3RydWN0IHZkcGFfZGV2aWNl
ICp2ZGV2LCB1MTYgaWR4LCBjb25zdCBzdHJ1Y3QgdmRwYV92cV9zdGF0ZSAqc3RhdGUpCj4gK3N0
YXRpYyBib29sIHNuZXRfdnFfc3RhdGVfaXNfaW5pdGlhbChzdHJ1Y3Qgc25ldCAqc25ldCwgY29u
c3Qgc3RydWN0IHZkcGFfdnFfc3RhdGUgKnN0YXRlKQo+ICB7Cj4gLSAgICAgICBzdHJ1Y3Qgc25l
dCAqc25ldCA9IHZkcGFfdG9fc25ldCh2ZGV2KTsKPiAtICAgICAgIC8qIFNldHRpbmcgdGhlIFZR
IHN0YXRlIGlzIG5vdCBzdXBwb3J0ZWQuCj4gLSAgICAgICAgKiBJZiB0aGUgYXNrZWQgc3RhdGUg
aXMgdGhlIHNhbWUgYXMgdGhlIGluaXRpYWwgb25lCj4gLSAgICAgICAgKiB3ZSBjYW4gaWdub3Jl
IGl0Lgo+IC0gICAgICAgICovCj4gICAgICAgICBpZiAoU05FVF9IQVNfRkVBVFVSRShzbmV0LCBW
SVJUSU9fRl9SSU5HX1BBQ0tFRCkpIHsKPiAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IHZk
cGFfdnFfc3RhdGVfcGFja2VkICpwID0gJnN0YXRlLT5wYWNrZWQ7Cj4KPiAgICAgICAgICAgICAg
ICAgaWYgKHAtPmxhc3RfYXZhaWxfY291bnRlciA9PSAxICYmIHAtPmxhc3RfdXNlZF9jb3VudGVy
ID09IDEgJiYKPiAgICAgICAgICAgICAgICAgICAgIHAtPmxhc3RfYXZhaWxfaWR4ID09IDAgJiYg
cC0+bGFzdF91c2VkX2lkeCA9PSAwKQo+IC0gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAw
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwo+ICAgICAgICAgfSBlbHNl
IHsKPiAgICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0IHZkcGFfdnFfc3RhdGVfc3BsaXQgKnMg
PSAmc3RhdGUtPnNwbGl0Owo+Cj4gICAgICAgICAgICAgICAgIGlmIChzLT5hdmFpbF9pbmRleCA9
PSAwKQo+IC0gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICsgICAgICAgICAgICAg
ICAgICAgICAgIHJldHVybiB0cnVlOwo+ICsgICAgICAgfQo+ICsKPiArICAgICAgIHJldHVybiBm
YWxzZTsKPiArfQo+ICsKPiArc3RhdGljIGludCBzbmV0X3NldF92cV9zdGF0ZShzdHJ1Y3QgdmRw
YV9kZXZpY2UgKnZkZXYsIHUxNiBpZHgsIGNvbnN0IHN0cnVjdCB2ZHBhX3ZxX3N0YXRlICpzdGF0
ZSkKPiArewo+ICsgICAgICAgc3RydWN0IHNuZXQgKnNuZXQgPSB2ZHBhX3RvX3NuZXQodmRldik7
Cj4gKwo+ICsgICAgICAgLyogV2UgY2FuIHNldCBhbnkgc3RhdGUgZm9yIGNvbmZpZyB2ZXJzaW9u
IDIrICovCj4gKyAgICAgICBpZiAoU05FVF9DRkdfVkVSKHNuZXQsIDIpKSB7Cj4gKyAgICAgICAg
ICAgICAgIG1lbWNweSgmc25ldC0+dnFzW2lkeF0tPnZxX3N0YXRlLCBzdGF0ZSwgc2l6ZW9mKCpz
dGF0ZSkpOwo+ICsgICAgICAgICAgICAgICByZXR1cm4gMDsKPiAgICAgICAgIH0KPgo+ICsgICAg
ICAgLyogT2xkZXIgY29uZmlnIC0gd2UgY2FuJ3Qgc2V0IHRoZSBWUSBzdGF0ZS4KPiArICAgICAg
ICAqIFJldHVybiAwIG9ubHkgaWYgdGhpcyBpcyB0aGUgaW5pdGlhbCBzdGF0ZSB3ZSB1c2UgaW4g
dGhlIERQVS4KPiArICAgICAgICAqLwo+ICsgICAgICAgaWYgKHNuZXRfdnFfc3RhdGVfaXNfaW5p
dGlhbChzbmV0LCBzdGF0ZSkpCj4gKyAgICAgICAgICAgICAgIHJldHVybiAwOwo+ICsKPiAgICAg
ICAgIHJldHVybiAtRU9QTk9UU1VQUDsKPiAgfQo+Cj4gIHN0YXRpYyBpbnQgc25ldF9nZXRfdnFf
c3RhdGUoc3RydWN0IHZkcGFfZGV2aWNlICp2ZGV2LCB1MTYgaWR4LCBzdHJ1Y3QgdmRwYV92cV9z
dGF0ZSAqc3RhdGUpCj4gIHsKPiAtICAgICAgIC8qIE5vdCBzdXBwb3J0ZWQgKi8KPiAtICAgICAg
IHJldHVybiAtRU9QTk9UU1VQUDsKPiArICAgICAgIHN0cnVjdCBzbmV0ICpzbmV0ID0gdmRwYV90
b19zbmV0KHZkZXYpOwo+ICsKPiArICAgICAgIHJldHVybiBzbmV0X3JlYWRfdnFfc3RhdGUoc25l
dCwgaWR4LCBzdGF0ZSk7Cj4gIH0KPgo+ICBzdGF0aWMgaW50IHNuZXRfZ2V0X3ZxX2lycShzdHJ1
Y3QgdmRwYV9kZXZpY2UgKnZkZXYsIHUxNiBpZHgpCj4gQEAgLTIzMiw5ICsyMDAsOSBAQCBzdGF0
aWMgaW50IHNuZXRfcmVzZXRfZGV2KHN0cnVjdCBzbmV0ICpzbmV0KQo+ICAgICAgICAgaWYgKCFz
bmV0LT5zdGF0dXMpCj4gICAgICAgICAgICAgICAgIHJldHVybiAwOwo+Cj4gLSAgICAgICAvKiBJ
ZiBEUFUgc3RhcnRlZCwgc2VuZCBhIGRlc3Ryb3kgbWVzc2FnZSAqLwo+ICsgICAgICAgLyogSWYg
RFBVIHN0YXJ0ZWQsIGRlc3Ryb3kgaXQgKi8KPiAgICAgICAgIGlmIChzbmV0LT5zdGF0dXMgJiBW
SVJUSU9fQ09ORklHX1NfRFJJVkVSX09LKQo+IC0gICAgICAgICAgICAgICByZXQgPSBzbmV0X3Nl
bmRfbXNnKHNuZXQsIFNORVRfTVNHX0RFU1RST1ksIHRydWUpOwo+ICsgICAgICAgICAgICAgICBy
ZXQgPSBzbmV0X2Rlc3Ryb3lfZGV2KHNuZXQpOwo+Cj4gICAgICAgICAvKiBDbGVhciBWUXMgKi8K
PiAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzbmV0LT5jZmctPnZxX251bTsgaSsrKSB7Cj4gQEAg
LTI1OCw3ICsyMjYsNyBAQCBzdGF0aWMgaW50IHNuZXRfcmVzZXRfZGV2KHN0cnVjdCBzbmV0ICpz
bmV0KQo+ICAgICAgICAgc25ldC0+ZHB1X3JlYWR5ID0gZmFsc2U7Cj4KPiAgICAgICAgIGlmIChy
ZXQpCj4gLSAgICAgICAgICAgICAgIFNORVRfV0FSTihwZGV2LCAiSW5jb21wbGV0ZSByZXNldCB0
byBTTkVUWyV1XSBkZXZpY2VcbiIsIHNuZXQtPnNpZCk7Cj4gKyAgICAgICAgICAgICAgIFNORVRf
V0FSTihwZGV2LCAiSW5jb21wbGV0ZSByZXNldCB0byBTTkVUWyV1XSBkZXZpY2UsIGVycjogJWRc
biIsIHNuZXQtPnNpZCwgcmV0KTsKPiAgICAgICAgIGVsc2UKPiAgICAgICAgICAgICAgICAgU05F
VF9EQkcocGRldiwgIlJlc2V0IFNORVRbJXVdIGRldmljZVxuIiwgc25ldC0+c2lkKTsKPgo+IEBA
IC0zNTYsNyArMzI0LDcgQEAgc3RhdGljIGludCBzbmV0X3dyaXRlX2NvbmYoc3RydWN0IHNuZXQg
KnNuZXQpCj4gICAgICAgICAgKiB8ICAgICAgICAgICAgIERFU0MgQVJFQSAgICAgICAgICAgICAg
ICB8Cj4gICAgICAgICAgKiB8ICAgICAgICAgICAgREVWSUNFIEFSRUEgICAgICAgICAgICAgICB8
Cj4gICAgICAgICAgKiB8ICAgICAgICAgICAgRFJJVkVSIEFSRUEgICAgICAgICAgICAgICB8Cj4g
LSAgICAgICAgKiB8ICAgICAgICAgICAgIFJFU0VSVkVEICAgICAgICAgICAgICAgICB8Cj4gKyAg
ICAgICAgKiB8ICAgIFZRIFNUQVRFIChDRkcgMispICAgICB8ICAgUlNWRCAgICB8Cj4gICAgICAg
ICAgKgo+ICAgICAgICAgICogTWFnaWMgbnVtYmVyIHNob3VsZCBiZSB3cml0dGVuIGxhc3QsIHRo
aXMgaXMgdGhlIERQVSBpbmRpY2F0aW9uIHRoYXQgdGhlIGRhdGEgaXMgcmVhZHkKPiAgICAgICAg
ICAqLwo+IEBAIC0zOTEsMTIgKzM1OSwxNSBAQCBzdGF0aWMgaW50IHNuZXRfd3JpdGVfY29uZihz
dHJ1Y3Qgc25ldCAqc25ldCkKPiAgICAgICAgICAgICAgICAgb2ZmICs9IDg7Cj4gICAgICAgICAg
ICAgICAgIHNuZXRfd3JpdGU2NChzbmV0LCBvZmYsIHNuZXQtPnZxc1tpXS0+ZHJpdmVyX2FyZWEp
Owo+ICAgICAgICAgICAgICAgICBvZmYgKz0gODsKPiArICAgICAgICAgICAgICAgLyogV3JpdGUg
VlEgc3RhdGUgaWYgY29uZmlnIHZlcnNpb24gaXMgMisgKi8KPiArICAgICAgICAgICAgICAgaWYg
KFNORVRfQ0ZHX1ZFUihzbmV0LCAyKSkKPiArICAgICAgICAgICAgICAgICAgICAgICBzbmV0X3dy
aXRlMzIoc25ldCwgb2ZmLCAqKHUzMiAqKSZzbmV0LT52cXNbaV0tPnZxX3N0YXRlKTsKPiArICAg
ICAgICAgICAgICAgb2ZmICs9IDQ7Cj4gKwo+ICAgICAgICAgICAgICAgICAvKiBJZ25vcmUgcmVz
ZXJ2ZWQgKi8KPiAtICAgICAgICAgICAgICAgb2ZmICs9IDg7Cj4gKyAgICAgICAgICAgICAgIG9m
ZiArPSA0Owo+ICAgICAgICAgfQo+Cj4gLSAgICAgICAvKiBDbGVhciBzbmV0IG1lc3NhZ2VzIGFk
ZHJlc3MgZm9yIHRoaXMgZGV2aWNlICovCj4gLSAgICAgICBzbmV0X3dyaXRlMzIoc25ldCwgc25l
dC0+cHNuZXQtPmNmZy5tc2dfb2ZmLCAwKTsKPiAgICAgICAgIC8qIFdyaXRlIG1hZ2ljIG51bWJl
ciAtIGRhdGEgaXMgcmVhZHkgKi8KPiAgICAgICAgIHNuZXRfd3JpdGUzMihzbmV0LCBzbmV0LT5w
c25ldC0+Y2ZnLmhvc3RfY2ZnX29mZiwgU05FVF9TSUdOQVRVUkUpOwo+Cj4gQEAgLTY5Nyw3ICs2
NjgsNyBAQCBzdGF0aWMgaW50IHBzbmV0X3JlYWRfY2ZnKHN0cnVjdCBwY2lfZGV2ICpwZGV2LCBz
dHJ1Y3QgcHNuZXQgKnBzbmV0KQo+ICAgICAgICAgb2ZmICs9IDQ7Cj4gICAgICAgICBjZmctPmh3
bW9uX29mZiA9IHBzbmV0X3JlYWQzMihwc25ldCwgb2ZmKTsKPiAgICAgICAgIG9mZiArPSA0Owo+
IC0gICAgICAgY2ZnLT5tc2dfb2ZmID0gcHNuZXRfcmVhZDMyKHBzbmV0LCBvZmYpOwo+ICsgICAg
ICAgY2ZnLT5jdHJsX29mZiA9IHBzbmV0X3JlYWQzMihwc25ldCwgb2ZmKTsKPiAgICAgICAgIG9m
ZiArPSA0Owo+ICAgICAgICAgY2ZnLT5mbGFncyA9IHBzbmV0X3JlYWQzMihwc25ldCwgb2ZmKTsK
PiAgICAgICAgIG9mZiArPSA0Owo+IEBAIC05OTcsNiArOTY4LDEwIEBAIHN0YXRpYyBpbnQgc25l
dF92ZHBhX3Byb2JlX3ZmKHN0cnVjdCBwY2lfZGV2ICpwZGV2KQo+ICAgICAgICAgICAgICAgICBn
b3RvIGZyZWVfaXJxczsKPiAgICAgICAgIH0KPgo+ICsgICAgICAgLyogSW5pdCBjb250cm9sIG11
dGV4IGFuZCBzcGlubG9jayAqLwo+ICsgICAgICAgbXV0ZXhfaW5pdCgmc25ldC0+Y3RybF9sb2Nr
KTsKPiArICAgICAgIHNwaW5fbG9ja19pbml0KCZzbmV0LT5jdHJsX3NwaW5sb2NrKTsKPiArCj4g
ICAgICAgICAvKiBTYXZlIHBjaSBkZXZpY2UgcG9pbnRlciAqLwo+ICAgICAgICAgc25ldC0+cGRl
diA9IHBkZXY7Cj4gICAgICAgICBzbmV0LT5wc25ldCA9IHBzbmV0Owo+IEBAIC0xMDEzLDYgKzk4
OCw5IEBAIHN0YXRpYyBpbnQgc25ldF92ZHBhX3Byb2JlX3ZmKHN0cnVjdCBwY2lfZGV2ICpwZGV2
KQo+ICAgICAgICAgLyogQ3JlYXRlIGEgVmlydElPIGNvbmZpZyBwb2ludGVyICovCj4gICAgICAg
ICBzbmV0LT5jZmctPnZpcnRpb19jZmcgPSBzbmV0LT5iYXIgKyBzbmV0LT5wc25ldC0+Y2ZnLnZp
cnRpb19jZmdfb2ZmOwo+Cj4gKyAgICAgICAvKiBDbGVhciBjb250cm9sIHJlZ2lzdGVycyAqLwo+
ICsgICAgICAgc25ldF9jdHJsX2NsZWFyKHNuZXQpOwo+ICsKPiAgICAgICAgIHBjaV9zZXRfbWFz
dGVyKHBkZXYpOwo+ICAgICAgICAgcGNpX3NldF9kcnZkYXRhKHBkZXYsIHNuZXQpOwo+Cj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvdmRwYS9zb2xpZHJ1bi9zbmV0X3ZkcGEuaCBiL2RyaXZlcnMvdmRw
YS9zb2xpZHJ1bi9zbmV0X3ZkcGEuaAo+IGluZGV4IGI3ZjM0MTY5MDUzLi4wOWZmNjc2ZTdhMiAx
MDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZkcGEvc29saWRydW4vc25ldF92ZHBhLmgKPiArKysgYi9k
cml2ZXJzL3ZkcGEvc29saWRydW4vc25ldF92ZHBhLmgKPiBAQCAtMiw3ICsyLDcgQEAKPiAgLyoK
PiAgICogU29saWRSdW4gRFBVIGRyaXZlciBmb3IgY29udHJvbCBwbGFuZQo+ICAgKgo+IC0gKiBD
b3B5cmlnaHQgKEMpIDIwMjIgU29saWRSdW4KPiArICogQ29weXJpZ2h0IChDKSAyMDIyLTIwMjMg
U29saWRSdW4KPiAgICoKPiAgICogQXV0aG9yOiBBbHZhcm8gS2Fyc3ogPGFsdmFyby5rYXJzekBz
b2xpZC1ydW4uY29tPgo+ICAgKgo+IEBAIC0yMCwxMCArMjAsMTUgQEAKPiAgI2RlZmluZSBTTkVU
X0lORk8ocGRldiwgZm10LCAuLi4pIGRldl9pbmZvKCYocGRldiktPmRldiwgIiVzImZtdCwgInNu
ZXRfdmRwYTogIiwgIyNfX1ZBX0FSR1NfXykKPiAgI2RlZmluZSBTTkVUX0RCRyhwZGV2LCBmbXQs
IC4uLikgZGV2X2RiZygmKHBkZXYpLT5kZXYsICIlcyJmbXQsICJzbmV0X3ZkcGE6ICIsICMjX19W
QV9BUkdTX18pCj4gICNkZWZpbmUgU05FVF9IQVNfRkVBVFVSRShzLCBmKSAoKHMpLT5uZWdvdGlh
dGVkX2ZlYXR1cmVzICYgQklUX1VMTChmKSkKPiArLyogQ2hlY2sgaWYgbmVnb3RpYXRlZCBjb25m
aWcgdmVyc2lvbiBpcyBhdCBsZWFzdCBAdmVyICovCj4gKyNkZWZpbmUgU05FVF9DRkdfVkVSKHNu
ZXQsIHZlcikgKChzbmV0KS0+cHNuZXQtPm5lZ290aWF0ZWRfY2ZnX3ZlciA+PSAodmVyKSkKPiAr
Cj4gIC8qIFZRIHN0cnVjdCAqLwo+ICBzdHJ1Y3Qgc25ldF92cSB7Cj4gICAgICAgICAvKiBWUSBj
YWxsYmFjayAqLwo+ICAgICAgICAgc3RydWN0IHZkcGFfY2FsbGJhY2sgY2I7Cj4gKyAgICAgICAv
KiBWUSBzdGF0ZSByZWNlaXZlZCBmcm9tIGJ1cyAqLwo+ICsgICAgICAgc3RydWN0IHZkcGFfdnFf
c3RhdGUgdnFfc3RhdGU7Cj4gICAgICAgICAvKiBkZXNjIGJhc2UgYWRkcmVzcyAqLwo+ICAgICAg
ICAgdTY0IGRlc2NfYXJlYTsKPiAgICAgICAgIC8qIGRldmljZSBiYXNlIGFkZHJlc3MgKi8KPiBA
QCAtNTEsNiArNTYsMTAgQEAgc3RydWN0IHNuZXQgewo+ICAgICAgICAgc3RydWN0IHZkcGFfZGV2
aWNlIHZkcGE7Cj4gICAgICAgICAvKiBDb25maWcgY2FsbGJhY2sgKi8KPiAgICAgICAgIHN0cnVj
dCB2ZHBhX2NhbGxiYWNrIGNiOwo+ICsgICAgICAgLyogVG8gbG9jayB0aGUgY29udHJvbCBtZWNo
YW5pc20gKi8KPiArICAgICAgIHN0cnVjdCBtdXRleCBjdHJsX2xvY2s7Cj4gKyAgICAgICAvKiBT
cGlubG9jayB0byBwcm90ZWN0IGNyaXRpY2FsIHBhcnRzIGluIHRoZSBjb250cm9sIG1lY2hhbmlz
bSAqLwo+ICsgICAgICAgc3BpbmxvY2tfdCBjdHJsX3NwaW5sb2NrOwo+ICAgICAgICAgLyogYXJy
YXkgb2YgdmlycXVldWVzICovCj4gICAgICAgICBzdHJ1Y3Qgc25ldF92cSAqKnZxczsKPiAgICAg
ICAgIC8qIFVzZWQgZmVhdHVyZXMgKi8KPiBAQCAtMTE3LDggKzEyNiw4IEBAIHN0cnVjdCBzbmV0
X2NmZyB7Cj4gICAgICAgICB1MzIga2lja19vZmY7Cj4gICAgICAgICAvKiBPZmZzZXQgaW4gUENJ
IEJBUiBmb3IgSFcgbW9uaXRvcmluZyAqLwo+ICAgICAgICAgdTMyIGh3bW9uX29mZjsKPiAtICAg
ICAgIC8qIE9mZnNldCBpbiBQQ0kgQkFSIGZvciBTTkVUIG1lc3NhZ2VzICovCj4gLSAgICAgICB1
MzIgbXNnX29mZjsKPiArICAgICAgIC8qIE9mZnNldCBpbiBQQ0kgQkFSIGZvciBDb250cm9sIG1l
Y2hhbmlzbSAqLwo+ICsgICAgICAgdTMyIGN0cmxfb2ZmOwo+ICAgICAgICAgLyogQ29uZmlnIGdl
bmVyYWwgZmxhZ3MgLSBlbnVtIHNuZXRfY2ZnX2ZsYWdzICovCj4gICAgICAgICB1MzIgZmxhZ3M7
Cj4gICAgICAgICAvKiBSZXNlcnZlZCBmb3IgZnV0dXJlIHVzYWdlICovCj4gQEAgLTE5MSw0ICsy
MDAsOCBAQCBzdGF0aWMgaW5saW5lIHZvaWQgc25ldF93cml0ZTY0KHN0cnVjdCBzbmV0ICpzbmV0
LCB1MzIgb2ZmLCB1NjQgdmFsKQo+ICB2b2lkIHBzbmV0X2NyZWF0ZV9od21vbihzdHJ1Y3QgcGNp
X2RldiAqcGRldik7Cj4gICNlbmRpZgo+Cj4gK3ZvaWQgc25ldF9jdHJsX2NsZWFyKHN0cnVjdCBz
bmV0ICpzbmV0KTsKPiAraW50IHNuZXRfZGVzdHJveV9kZXYoc3RydWN0IHNuZXQgKnNuZXQpOwo+
ICtpbnQgc25ldF9yZWFkX3ZxX3N0YXRlKHN0cnVjdCBzbmV0ICpzbmV0LCB1MTYgaWR4LCBzdHJ1
Y3QgdmRwYV92cV9zdGF0ZSAqc3RhdGUpOwo+ICsKPiAgI2VuZGlmIC8vX1NORVRfVkRQQV9IXwo+
IC0tCj4gMi4zNC4xCj4KCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5s
aW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFp
bG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
