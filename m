Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp2.osuosl.org (smtp2.osuosl.org [IPv6:2605:bc80:3010::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 0BEB77D0A3A
	for <lists.virtualization@lfdr.de>; Fri, 20 Oct 2023 10:06:37 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp2.osuosl.org (Postfix) with ESMTP id 93A5143250;
	Fri, 20 Oct 2023 08:06:35 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 93A5143250
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
	by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AqJU9gDyixtb; Fri, 20 Oct 2023 08:06:34 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp2.osuosl.org (Postfix) with ESMTPS id C0D254324F;
	Fri, 20 Oct 2023 08:06:33 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org C0D254324F
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id E3A72C008C;
	Fri, 20 Oct 2023 08:06:32 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp1.osuosl.org (smtp1.osuosl.org [140.211.166.138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 20FC2C0032
 for <virtualization@lists.linux-foundation.org>;
 Fri, 20 Oct 2023 08:06:31 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp1.osuosl.org (Postfix) with ESMTP id E329D83F01
 for <virtualization@lists.linux-foundation.org>;
 Fri, 20 Oct 2023 08:06:30 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org E329D83F01
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
 by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id bxgvCdx-BxT0
 for <virtualization@lists.linux-foundation.org>;
 Fri, 20 Oct 2023 08:06:30 +0000 (UTC)
Received: from out30-131.freemail.mail.aliyun.com
 (out30-131.freemail.mail.aliyun.com [115.124.30.131])
 by smtp1.osuosl.org (Postfix) with ESMTPS id 664B683ED9
 for <virtualization@lists.linux-foundation.org>;
 Fri, 20 Oct 2023 08:06:29 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org 664B683ED9
X-Alimail-AntiSpam: AC=PASS; BC=-1|-1; BR=01201311R211e4; CH=green; DM=||false|;
 DS=||; FP=0|-1|-1|-1|0|-1|-1|-1; HT=ay29a033018045192;
 MF=xuanzhuo@linux.alibaba.com; NM=1; PH=DS; RN=13; SR=0;
 TI=SMTPD_---0VuWbaGz_1697789184; 
Received: from localhost(mailfrom:xuanzhuo@linux.alibaba.com
 fp:SMTPD_---0VuWbaGz_1697789184) by smtp.aliyun-inc.com;
 Fri, 20 Oct 2023 16:06:25 +0800
Message-ID: <1697789168.0141354-3-xuanzhuo@linux.alibaba.com>
Subject: Re: [PATCH net-next v1 11/19] virtio_net: xsk: tx: support tx
Date: Fri, 20 Oct 2023 16:06:08 +0800
From: Xuan Zhuo <xuanzhuo@linux.alibaba.com>
To: Jason Wang <jasowang@redhat.com>
References: <20231016120033.26933-1-xuanzhuo@linux.alibaba.com>
 <20231016120033.26933-12-xuanzhuo@linux.alibaba.com>
 <CACGkMEuigM1k5kMc8qU3z2ZBvTGH6=oVRkOCAZ0apsoQF3yuaA@mail.gmail.com>
In-Reply-To: <CACGkMEuigM1k5kMc8qU3z2ZBvTGH6=oVRkOCAZ0apsoQF3yuaA@mail.gmail.com>
Cc: Jesper Dangaard Brouer <hawk@kernel.org>,
 Daniel Borkmann <daniel@iogearbox.net>, "Michael S. Tsirkin" <mst@redhat.com>,
 netdev@vger.kernel.org, John Fastabend <john.fastabend@gmail.com>,
 Alexei Starovoitov <ast@kernel.org>, virtualization@lists.linux-foundation.org,
 Eric Dumazet <edumazet@google.com>, Jakub Kicinski <kuba@kernel.org>,
 bpf@vger.kernel.org, Paolo Abeni <pabeni@redhat.com>,
 "David S. Miller" <davem@davemloft.net>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gRnJpLCAyMCBPY3QgMjAyMyAxNDo1MjowOCArMDgwMCwgSmFzb24gV2FuZyA8amFzb3dhbmdA
cmVkaGF0LmNvbT4gd3JvdGU6Cj4gT24gTW9uLCBPY3QgMTYsIDIwMjMgYXQgODowMeKAr1BNIFh1
YW4gWmh1byA8eHVhbnpodW9AbGludXguYWxpYmFiYS5jb20+IHdyb3RlOgo+ID4KPiA+IFRoZSBk
cml2ZXIncyB0eCBuYXBpIGlzIHZlcnkgaW1wb3J0YW50IGZvciBYU0suIEl0IGlzIHJlc3BvbnNp
YmxlIGZvcgo+ID4gb2J0YWluaW5nIGRhdGEgZnJvbSB0aGUgWFNLIHF1ZXVlIGFuZCBzZW5kaW5n
IGl0IG91dC4KPiA+Cj4gPiBBdCB0aGUgYmVnaW5uaW5nLCB3ZSBuZWVkIHRvIHRyaWdnZXIgdHgg
bmFwaS4KPiA+Cj4gPiBTaWduZWQtb2ZmLWJ5OiBYdWFuIFpodW8gPHh1YW56aHVvQGxpbnV4LmFs
aWJhYmEuY29tPgo+ID4gLS0tCj4gPiAgZHJpdmVycy9uZXQvdmlydGlvL21haW4uYyAgICAgICB8
ICAxOCArKysrKy0KPiA+ICBkcml2ZXJzL25ldC92aXJ0aW8vdmlydGlvX25ldC5oIHwgICAzICst
Cj4gPiAgZHJpdmVycy9uZXQvdmlydGlvL3hzay5jICAgICAgICB8IDEwOCArKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKwo+ID4gIGRyaXZlcnMvbmV0L3ZpcnRpby94c2suaCAgICAgICAg
fCAgMTMgKysrKwo+ID4gIDQgZmlsZXMgY2hhbmdlZCwgMTQwIGluc2VydGlvbnMoKyksIDIgZGVs
ZXRpb25zKC0pCj4gPgo+ID4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L3ZpcnRpby9tYWluLmMg
Yi9kcml2ZXJzL25ldC92aXJ0aW8vbWFpbi5jCj4gPiBpbmRleCBiMzIwNzcwZTVmNGUuLmEwODQy
OWJlZjYxZiAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvbmV0L3ZpcnRpby9tYWluLmMKPiA+ICsr
KyBiL2RyaXZlcnMvbmV0L3ZpcnRpby9tYWluLmMKPiA+IEBAIC0yMDU0LDcgKzIwNTQsOSBAQCBz
dGF0aWMgaW50IHZpcnRuZXRfcG9sbF90eChzdHJ1Y3QgbmFwaV9zdHJ1Y3QgKm5hcGksIGludCBi
dWRnZXQpCj4gPiAgICAgICAgIHN0cnVjdCB2aXJ0bmV0X3NxICpzcSA9IGNvbnRhaW5lcl9vZihu
YXBpLCBzdHJ1Y3QgdmlydG5ldF9zcSwgbmFwaSk7Cj4gPiAgICAgICAgIHN0cnVjdCB2aXJ0bmV0
X2luZm8gKnZpID0gc3EtPnZxLT52ZGV2LT5wcml2Owo+ID4gICAgICAgICB1bnNpZ25lZCBpbnQg
aW5kZXggPSB2cTJ0eHEoc3EtPnZxKTsKPiA+ICsgICAgICAgc3RydWN0IHhza19idWZmX3Bvb2wg
KnBvb2w7Cj4gPiAgICAgICAgIHN0cnVjdCBuZXRkZXZfcXVldWUgKnR4cTsKPiA+ICsgICAgICAg
aW50IGJ1c3kgPSAwOwo+ID4gICAgICAgICBpbnQgb3BhcXVlOwo+ID4gICAgICAgICBib29sIGRv
bmU7Cj4gPgo+ID4gQEAgLTIwNjcsMTEgKzIwNjksMjUgQEAgc3RhdGljIGludCB2aXJ0bmV0X3Bv
bGxfdHgoc3RydWN0IG5hcGlfc3RydWN0ICpuYXBpLCBpbnQgYnVkZ2V0KQo+ID4gICAgICAgICB0
eHEgPSBuZXRkZXZfZ2V0X3R4X3F1ZXVlKHZpLT5kZXYsIGluZGV4KTsKPiA+ICAgICAgICAgX19u
ZXRpZl90eF9sb2NrKHR4cSwgcmF3X3NtcF9wcm9jZXNzb3JfaWQoKSk7Cj4gPiAgICAgICAgIHZp
cnRxdWV1ZV9kaXNhYmxlX2NiKHNxLT52cSk7Cj4gPiAtICAgICAgIGZyZWVfb2xkX3htaXQoc3Es
IHRydWUpOwo+ID4gKwo+ID4gKyAgICAgICByY3VfcmVhZF9sb2NrKCk7Cj4gPiArICAgICAgIHBv
b2wgPSByY3VfZGVyZWZlcmVuY2Uoc3EtPnhzay5wb29sKTsKPiA+ICsgICAgICAgaWYgKHBvb2wp
IHsKPiA+ICsgICAgICAgICAgICAgICBidXN5IHw9IHZpcnRuZXRfeHNrX3htaXQoc3EsIHBvb2ws
IGJ1ZGdldCk7Cj4gPiArICAgICAgICAgICAgICAgcmN1X3JlYWRfdW5sb2NrKCk7Cj4gPiArICAg
ICAgIH0gZWxzZSB7Cj4gPiArICAgICAgICAgICAgICAgcmN1X3JlYWRfdW5sb2NrKCk7Cj4gPiAr
ICAgICAgICAgICAgICAgZnJlZV9vbGRfeG1pdChzcSwgdHJ1ZSk7Cj4gPiArICAgICAgIH0KPiA+
Cj4gPiAgICAgICAgIGlmIChzcS0+dnEtPm51bV9mcmVlID49IDIgKyBNQVhfU0tCX0ZSQUdTKQo+
ID4gICAgICAgICAgICAgICAgIG5ldGlmX3R4X3dha2VfcXVldWUodHhxKTsKPiA+Cj4gPiArICAg
ICAgIGlmIChidXN5KSB7Cj4gPiArICAgICAgICAgICAgICAgX19uZXRpZl90eF91bmxvY2sodHhx
KTsKPiA+ICsgICAgICAgICAgICAgICByZXR1cm4gYnVkZ2V0Owo+ID4gKyAgICAgICB9Cj4gPiAr
Cj4gPiAgICAgICAgIG9wYXF1ZSA9IHZpcnRxdWV1ZV9lbmFibGVfY2JfcHJlcGFyZShzcS0+dnEp
Owo+ID4KPiA+ICAgICAgICAgZG9uZSA9IG5hcGlfY29tcGxldGVfZG9uZShuYXBpLCAwKTsKPiA+
IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC92aXJ0aW8vdmlydGlvX25ldC5oIGIvZHJpdmVycy9u
ZXQvdmlydGlvL3ZpcnRpb19uZXQuaAo+ID4gaW5kZXggOWU2OWI2YzU5MjFiLi4zYmJiMWY1YmFh
ZDUgMTAwNjQ0Cj4gPiAtLS0gYS9kcml2ZXJzL25ldC92aXJ0aW8vdmlydGlvX25ldC5oCj4gPiAr
KysgYi9kcml2ZXJzL25ldC92aXJ0aW8vdmlydGlvX25ldC5oCj4gPiBAQCAtOSw3ICs5LDggQEAK
PiA+ICAjaW5jbHVkZSA8bmV0L3hkcF9zb2NrX2Rydi5oPgo+ID4KPiA+ICAjZGVmaW5lIFZJUlRJ
T19YRFBfRkxBRyAgICAgICAgQklUKDApCj4gPiAtI2RlZmluZSBWSVJUSU9fWE1JVF9EQVRBX01B
U0sgKFZJUlRJT19YRFBfRkxBRykKPiA+ICsjZGVmaW5lIFZJUlRJT19YU0tfRkxBRyAgICAgICAg
QklUKDEpCj4gPiArI2RlZmluZSBWSVJUSU9fWE1JVF9EQVRBX01BU0sgKFZJUlRJT19YRFBfRkxB
RyB8IFZJUlRJT19YU0tfRkxBRykKPiA+Cj4gPiAgLyogUlggcGFja2V0IHNpemUgRVdNQS4gVGhl
IGF2ZXJhZ2UgcGFja2V0IHNpemUgaXMgdXNlZCB0byBkZXRlcm1pbmUgdGhlIHBhY2tldAo+ID4g
ICAqIGJ1ZmZlciBzaXplIHdoZW4gcmVmaWxsaW5nIFJYIHJpbmdzLiBBcyB0aGUgZW50aXJlIFJY
IHJpbmcgbWF5IGJlIHJlZmlsbGVkCj4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvdmlydGlv
L3hzay5jIGIvZHJpdmVycy9uZXQvdmlydGlvL3hzay5jCj4gPiBpbmRleCBkZGRkMDE5NjJhM2Yu
LjBlNzc1YTlkMjcwZiAxMDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvbmV0L3ZpcnRpby94c2suYwo+
ID4gKysrIGIvZHJpdmVycy9uZXQvdmlydGlvL3hzay5jCj4gPiBAQCAtNyw2ICs3LDExNCBAQAo+
ID4KPiA+ICBzdGF0aWMgc3RydWN0IHZpcnRpb19uZXRfaGRyX21yZ19yeGJ1ZiB4c2tfaGRyOwo+
ID4KPiA+ICtzdGF0aWMgdm9pZCBzZ19maWxsX2RtYShzdHJ1Y3Qgc2NhdHRlcmxpc3QgKnNnLCBk
bWFfYWRkcl90IGFkZHIsIHUzMiBsZW4pCj4gPiArewo+ID4gKyAgICAgICBzZy0+ZG1hX2FkZHJl
c3MgPSBhZGRyOwo+ID4gKyAgICAgICBzZy0+bGVuZ3RoID0gbGVuOwo+ID4gK30KPiA+ICsKPiA+
ICtzdGF0aWMgdm9pZCB2aXJ0bmV0X3hza19jaGVja19xdWV1ZShzdHJ1Y3QgdmlydG5ldF9zcSAq
c3EpCj4gPiArewo+ID4gKyAgICAgICBzdHJ1Y3QgdmlydG5ldF9pbmZvICp2aSA9IHNxLT52cS0+
dmRldi0+cHJpdjsKPiA+ICsgICAgICAgc3RydWN0IG5ldF9kZXZpY2UgKmRldiA9IHZpLT5kZXY7
Cj4gPiArICAgICAgIGludCBxbnVtID0gc3EgLSB2aS0+c3E7Cj4gPiArCj4gPiArICAgICAgIC8q
IElmIGl0IGlzIGEgcmF3IGJ1ZmZlciBxdWV1ZSwgaXQgZG9lcyBub3QgY2hlY2sgd2hldGhlciB0
aGUgc3RhdHVzCj4gPiArICAgICAgICAqIG9mIHRoZSBxdWV1ZSBpcyBzdG9wcGVkIHdoZW4gc2Vu
ZGluZy4gU28gdGhlcmUgaXMgbm8gbmVlZCB0byBjaGVjawo+ID4gKyAgICAgICAgKiB0aGUgc2l0
dWF0aW9uIG9mIHRoZSByYXcgYnVmZmVyIHF1ZXVlLgo+ID4gKyAgICAgICAgKi8KPiA+ICsgICAg
ICAgaWYgKHZpcnRuZXRfaXNfeGRwX3Jhd19idWZmZXJfcXVldWUodmksIHFudW0pKQo+ID4gKyAg
ICAgICAgICAgICAgIHJldHVybjsKPiA+ICsKPiA+ICsgICAgICAgLyogSWYgdGhpcyBzcSBpcyBu
b3QgdGhlIGV4Y2x1c2l2ZSBxdWV1ZSBvZiB0aGUgY3VycmVudCBjcHUsCj4gPiArICAgICAgICAq
IHRoZW4gaXQgbWF5IGJlIGNhbGxlZCBieSBzdGFydF94bWl0LCBzbyBjaGVjayBpdCBydW5uaW5n
IG91dAo+ID4gKyAgICAgICAgKiBvZiBzcGFjZS4KPiA+ICsgICAgICAgICoKPiA+ICsgICAgICAg
ICogU3RvcCB0aGUgcXVldWUgdG8gYXZvaWQgZ2V0dGluZyBwYWNrZXRzIHRoYXQgd2UgYXJlCj4g
PiArICAgICAgICAqIHRoZW4gdW5hYmxlIHRvIHRyYW5zbWl0LiBUaGVuIHdhaXQgdGhlIHR4IGlu
dGVycnVwdC4KPiA+ICsgICAgICAgICovCj4gPiArICAgICAgIGlmIChzcS0+dnEtPm51bV9mcmVl
IDwgMiArIE1BWF9TS0JfRlJBR1MpCj4gPiArICAgICAgICAgICAgICAgbmV0aWZfc3RvcF9zdWJx
dWV1ZShkZXYsIHFudW0pOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgaW50IHZpcnRuZXRfeHNr
X3htaXRfb25lKHN0cnVjdCB2aXJ0bmV0X3NxICpzcSwKPiA+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc3RydWN0IHhza19idWZmX3Bvb2wgKnBvb2wsCj4gPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHN0cnVjdCB4ZHBfZGVzYyAqZGVzYykKPiA+ICt7Cj4gPiArICAg
ICAgIHN0cnVjdCB2aXJ0bmV0X2luZm8gKnZpOwo+ID4gKyAgICAgICBkbWFfYWRkcl90IGFkZHI7
Cj4gPiArCj4gPiArICAgICAgIHZpID0gc3EtPnZxLT52ZGV2LT5wcml2Owo+ID4gKwo+ID4gKyAg
ICAgICBhZGRyID0geHNrX2J1ZmZfcmF3X2dldF9kbWEocG9vbCwgZGVzYy0+YWRkcik7Cj4gPiAr
ICAgICAgIHhza19idWZmX3Jhd19kbWFfc3luY19mb3JfZGV2aWNlKHBvb2wsIGFkZHIsIGRlc2Mt
Pmxlbik7Cj4gPiArCj4gPiArICAgICAgIHNnX2luaXRfdGFibGUoc3EtPnNnLCAyKTsKPiA+ICsK
PiA+ICsgICAgICAgc2dfZmlsbF9kbWEoc3EtPnNnLCBzcS0+eHNrLmhkcl9kbWFfYWRkcmVzcywg
dmktPmhkcl9sZW4pOwo+ID4gKyAgICAgICBzZ19maWxsX2RtYShzcS0+c2cgKyAxLCBhZGRyLCBk
ZXNjLT5sZW4pOwo+ID4gKwo+ID4gKyAgICAgICByZXR1cm4gdmlydHF1ZXVlX2FkZF9vdXRidWYo
c3EtPnZxLCBzcS0+c2csIDIsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB2aXJ0bmV0X3hza190b19wdHIoZGVzYy0+bGVuKSwgR0ZQX0FUT01JQyk7Cj4gPiArfQo+ID4g
Kwo+ID4gK3N0YXRpYyBpbnQgdmlydG5ldF94c2tfeG1pdF9iYXRjaChzdHJ1Y3QgdmlydG5ldF9z
cSAqc3EsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHhza19i
dWZmX3Bvb2wgKnBvb2wsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5z
aWduZWQgaW50IGJ1ZGdldCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
dHJ1Y3QgdmlydG5ldF9zcV9zdGF0cyAqc3RhdHMpCj4gPiArewo+ID4gKyAgICAgICBzdHJ1Y3Qg
eGRwX2Rlc2MgKmRlc2NzID0gcG9vbC0+dHhfZGVzY3M7Cj4gPiArICAgICAgIHUzMiBuYl9wa3Rz
LCBtYXhfcGt0cywgaTsKPiA+ICsgICAgICAgYm9vbCBraWNrID0gZmFsc2U7Cj4gPiArICAgICAg
IGludCBlcnI7Cj4gPiArCj4gPiArICAgICAgIG1heF9wa3RzID0gbWluX3QodTMyLCBidWRnZXQs
IHNxLT52cS0+bnVtX2ZyZWUgLyAyKTsKPgo+IE5lZWQgZG9jdW1lbnQgd2h5IG51bV9mcmVlIC8g
MiBpcyBjaG9zZW4gaGVyZS4KCldpbGwgZml4LgoKVGhhbmtzLgoKCj4KPiBPdGhlcnMgbG9vayBm
aW5lLgo+Cj4gVGhhbmtzCj4KPgo+ID4gKwo+ID4gKyAgICAgICBuYl9wa3RzID0geHNrX3R4X3Bl
ZWtfcmVsZWFzZV9kZXNjX2JhdGNoKHBvb2wsIG1heF9wa3RzKTsKPiA+ICsgICAgICAgaWYgKCFu
Yl9wa3RzKQo+ID4gKyAgICAgICAgICAgICAgIHJldHVybiAwOwo+ID4gKwo+ID4gKyAgICAgICBm
b3IgKGkgPSAwOyBpIDwgbmJfcGt0czsgaSsrKSB7Cj4gPiArICAgICAgICAgICAgICAgZXJyID0g
dmlydG5ldF94c2tfeG1pdF9vbmUoc3EsIHBvb2wsICZkZXNjc1tpXSk7Cj4gPiArICAgICAgICAg
ICAgICAgaWYgKHVubGlrZWx5KGVycikpCj4gPiArICAgICAgICAgICAgICAgICAgICAgICBicmVh
azsKPiA+ICsKPiA+ICsgICAgICAgICAgICAgICBraWNrID0gdHJ1ZTsKPiA+ICsgICAgICAgfQo+
ID4gKwo+ID4gKyAgICAgICBpZiAoa2ljayAmJiB2aXJ0cXVldWVfa2lja19wcmVwYXJlKHNxLT52
cSkgJiYgdmlydHF1ZXVlX25vdGlmeShzcS0+dnEpKQo+ID4gKyAgICAgICAgICAgICAgICsrc3Rh
dHMtPmtpY2tzOwo+ID4gKwo+ID4gKyAgICAgICBzdGF0cy0+eGRwX3R4ICs9IGk7Cj4gPiArCj4g
PiArICAgICAgIHJldHVybiBpOwo+ID4gK30KPiA+ICsKPiA+ICtib29sIHZpcnRuZXRfeHNrX3ht
aXQoc3RydWN0IHZpcnRuZXRfc3EgKnNxLCBzdHJ1Y3QgeHNrX2J1ZmZfcG9vbCAqcG9vbCwKPiA+
ICsgICAgICAgICAgICAgICAgICAgICBpbnQgYnVkZ2V0KQo+ID4gK3sKPiA+ICsgICAgICAgc3Ry
dWN0IHZpcnRuZXRfc3Ffc3RhdHMgc3RhdHMgPSB7fTsKPiA+ICsgICAgICAgaW50IHNlbnQ7Cj4g
PiArCj4gPiArICAgICAgIHZpcnRuZXRfZnJlZV9vbGRfeG1pdChzcSwgdHJ1ZSwgJnN0YXRzKTsK
PiA+ICsKPiA+ICsgICAgICAgc2VudCA9IHZpcnRuZXRfeHNrX3htaXRfYmF0Y2goc3EsIHBvb2ws
IGJ1ZGdldCwgJnN0YXRzKTsKPiA+ICsKPiA+ICsgICAgICAgdmlydG5ldF94c2tfY2hlY2tfcXVl
dWUoc3EpOwo+ID4gKwo+ID4gKyAgICAgICB1NjRfc3RhdHNfdXBkYXRlX2JlZ2luKCZzcS0+c3Rh
dHMuc3luY3ApOwo+ID4gKyAgICAgICBzcS0+c3RhdHMucGFja2V0cyArPSBzdGF0cy5wYWNrZXRz
Owo+ID4gKyAgICAgICBzcS0+c3RhdHMuYnl0ZXMgKz0gc3RhdHMuYnl0ZXM7Cj4gPiArICAgICAg
IHNxLT5zdGF0cy5raWNrcyArPSBzdGF0cy5raWNrczsKPiA+ICsgICAgICAgc3EtPnN0YXRzLnhk
cF90eCArPSBzdGF0cy54ZHBfdHg7Cj4gPiArICAgICAgIHU2NF9zdGF0c191cGRhdGVfZW5kKCZz
cS0+c3RhdHMuc3luY3ApOwo+ID4gKwo+ID4gKyAgICAgICBpZiAoeHNrX3VzZXNfbmVlZF93YWtl
dXAocG9vbCkpCj4gPiArICAgICAgICAgICAgICAgeHNrX3NldF90eF9uZWVkX3dha2V1cChwb29s
KTsKPiA+ICsKPiA+ICsgICAgICAgcmV0dXJuIHNlbnQgPT0gYnVkZ2V0Owo+ID4gK30KPiA+ICsK
PiA+ICBzdGF0aWMgaW50IHZpcnRuZXRfcnFfYmluZF94c2tfcG9vbChzdHJ1Y3QgdmlydG5ldF9p
bmZvICp2aSwgc3RydWN0IHZpcnRuZXRfcnEgKnJxLAo+ID4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc3RydWN0IHhza19idWZmX3Bvb2wgKnBvb2wpCj4gPiAgewo+ID4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvbmV0L3ZpcnRpby94c2suaCBiL2RyaXZlcnMvbmV0L3ZpcnRpby94
c2suaAo+ID4gaW5kZXggMTkxODI4NWMzMTBjLi43M2NhOGNkNTMwOGIgMTAwNjQ0Cj4gPiAtLS0g
YS9kcml2ZXJzL25ldC92aXJ0aW8veHNrLmgKPiA+ICsrKyBiL2RyaXZlcnMvbmV0L3ZpcnRpby94
c2suaAo+ID4gQEAgLTMsNSArMywxOCBAQAo+ID4gICNpZm5kZWYgX19YU0tfSF9fCj4gPiAgI2Rl
ZmluZSBfX1hTS19IX18KPiA+Cj4gPiArI2RlZmluZSBWSVJUSU9fWFNLX0ZMQUdfT0ZGU0VUIDQK
PiA+ICsKPiA+ICtzdGF0aWMgaW5saW5lIHZvaWQgKnZpcnRuZXRfeHNrX3RvX3B0cih1MzIgbGVu
KQo+ID4gK3sKPiA+ICsgICAgICAgdW5zaWduZWQgbG9uZyBwOwo+ID4gKwo+ID4gKyAgICAgICBw
ID0gbGVuIDw8IFZJUlRJT19YU0tfRkxBR19PRkZTRVQ7Cj4gPiArCj4gPiArICAgICAgIHJldHVy
biAodm9pZCAqKShwIHwgVklSVElPX1hTS19GTEFHKTsKPiA+ICt9Cj4gPiArCj4gPiAgaW50IHZp
cnRuZXRfeHNrX3Bvb2xfc2V0dXAoc3RydWN0IG5ldF9kZXZpY2UgKmRldiwgc3RydWN0IG5ldGRl
dl9icGYgKnhkcCk7Cj4gPiArYm9vbCB2aXJ0bmV0X3hza194bWl0KHN0cnVjdCB2aXJ0bmV0X3Nx
ICpzcSwgc3RydWN0IHhza19idWZmX3Bvb2wgKnBvb2wsCj4gPiArICAgICAgICAgICAgICAgICAg
ICAgaW50IGJ1ZGdldCk7Cj4gPiAgI2VuZGlmCj4gPiAtLQo+ID4gMi4zMi4wLjMuZzAxMTk1Y2Y5
Zgo+ID4KPgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpW
aXJ0dWFsaXphdGlvbiBtYWlsaW5nIGxpc3QKVmlydHVhbGl6YXRpb25AbGlzdHMubGludXgtZm91
bmRhdGlvbi5vcmcKaHR0cHM6Ly9saXN0cy5saW51eGZvdW5kYXRpb24ub3JnL21haWxtYW4vbGlz
dGluZm8vdmlydHVhbGl6YXRpb24=
