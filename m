Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp4.osuosl.org (smtp4.osuosl.org [IPv6:2605:bc80:3010::137])
	by mail.lfdr.de (Postfix) with ESMTPS id E67326BC40C
	for <lists.virtualization@lfdr.de>; Thu, 16 Mar 2023 03:54:45 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp4.osuosl.org (Postfix) with ESMTP id DAB2241917;
	Thu, 16 Mar 2023 02:54:42 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org DAB2241917
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
	by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id tsEjJN_cCLsO; Thu, 16 Mar 2023 02:54:41 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp4.osuosl.org (Postfix) with ESMTPS id 0CB0241918;
	Thu, 16 Mar 2023 02:54:40 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org 0CB0241918
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 2C5F2C008C;
	Thu, 16 Mar 2023 02:54:40 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp2.osuosl.org (smtp2.osuosl.org [IPv6:2605:bc80:3010::133])
 by lists.linuxfoundation.org (Postfix) with ESMTP id AF330C0032
 for <virtualization@lists.linux-foundation.org>;
 Thu, 16 Mar 2023 02:54:38 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp2.osuosl.org (Postfix) with ESMTP id 8ADA240C00
 for <virtualization@lists.linux-foundation.org>;
 Thu, 16 Mar 2023 02:54:38 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 8ADA240C00
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
 by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id Lto8vdJ3MVVa
 for <virtualization@lists.linux-foundation.org>;
 Thu, 16 Mar 2023 02:54:37 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org 6505D400E7
Received: from out30-99.freemail.mail.aliyun.com
 (out30-99.freemail.mail.aliyun.com [115.124.30.99])
 by smtp2.osuosl.org (Postfix) with ESMTPS id 6505D400E7
 for <virtualization@lists.linux-foundation.org>;
 Thu, 16 Mar 2023 02:54:35 +0000 (UTC)
X-Alimail-AntiSpam: AC=PASS; BC=-1|-1; BR=01201311R561e4; CH=green; DM=||false|;
 DS=||; FP=0|-1|-1|-1|0|-1|-1|-1; HT=ay29a033018046059;
 MF=xuanzhuo@linux.alibaba.com; NM=1; PH=DS; RN=3; SR=0;
 TI=SMTPD_---0VdyCN4B_1678935270; 
Received: from localhost(mailfrom:xuanzhuo@linux.alibaba.com
 fp:SMTPD_---0VdyCN4B_1678935270) by smtp.aliyun-inc.com;
 Thu, 16 Mar 2023 10:54:30 +0800
Message-ID: <1678935192.6874998-1-xuanzhuo@linux.alibaba.com>
Subject: Re: [PATCH vhost v2 06/12] virtio_ring: split-indirect: support
 premapped
Date: Thu, 16 Mar 2023 10:53:12 +0800
From: Xuan Zhuo <xuanzhuo@linux.alibaba.com>
To: Jason Wang <jasowang@redhat.com>
References: <20230308064443.50639-1-xuanzhuo@linux.alibaba.com>
 <20230308064443.50639-7-xuanzhuo@linux.alibaba.com>
 <CACGkMEs0bGAVhawHLbR_f1NupAGJfVdo_jVSNx2i74b6Y4nJ=Q@mail.gmail.com>
 <1678785225.2361012-2-xuanzhuo@linux.alibaba.com>
 <CACGkMEu0gRn6tpBQthASnwQtKtkCkgPLDtwi59zn06S4N6Tocg@mail.gmail.com>
 <1678860064.0790339-1-xuanzhuo@linux.alibaba.com>
 <CACGkMEum17=yKRhSHLrj6v5f6a8xqp9=foW+AqYT-kONi_0Ncg@mail.gmail.com>
In-Reply-To: <CACGkMEum17=yKRhSHLrj6v5f6a8xqp9=foW+AqYT-kONi_0Ncg@mail.gmail.com>
Cc: "Michael S. Tsirkin" <mst@redhat.com>,
 virtualization@lists.linux-foundation.org
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gVGh1LCAxNiBNYXIgMjAyMyAxMDo0OTo1NCArMDgwMCwgSmFzb24gV2FuZyA8amFzb3dhbmdA
cmVkaGF0LmNvbT4gd3JvdGU6Cj4gT24gV2VkLCBNYXIgMTUsIDIwMjMgYXQgMjowNuKAr1BNIFh1
YW4gWmh1byA8eHVhbnpodW9AbGludXguYWxpYmFiYS5jb20+IHdyb3RlOgo+ID4KPiA+IE9uIFdl
ZCwgMTUgTWFyIDIwMjMgMTI6NDc6MjkgKzA4MDAsIEphc29uIFdhbmcgPGphc293YW5nQHJlZGhh
dC5jb20+IHdyb3RlOgo+ID4gPiBPbiBUdWUsIE1hciAxNCwgMjAyMyBhdCA1OjE34oCvUE0gWHVh
biBaaHVvIDx4dWFuemh1b0BsaW51eC5hbGliYWJhLmNvbT4gd3JvdGU6Cj4gPiA+ID4KPiA+ID4g
PiBPbiBUdWUsIDE0IE1hciAyMDIzIDE1OjU3OjA2ICswODAwLCBKYXNvbiBXYW5nIDxqYXNvd2Fu
Z0ByZWRoYXQuY29tPiB3cm90ZToKPiA+ID4gPiA+IE9uIFdlZCwgTWFyIDgsIDIwMjMgYXQgMjo0
NOKAr1BNIFh1YW4gWmh1byA8eHVhbnpodW9AbGludXguYWxpYmFiYS5jb20+IHdyb3RlOgo+ID4g
PiA+ID4gPgo+ID4gPiA+ID4gPiB2aXJ0aW8gY29yZSBvbmx5IHN1cHBvcnRzIHZpcnR1YWwgYWRk
cmVzc2VzLCBkbWEgaXMgY29tcGxldGVkIGluIHZpcnRpbwo+ID4gPiA+ID4gPiBjb3JlLgo+ID4g
PiA+ID4gPgo+ID4gPiA+ID4gPiBJbiBzb21lIHNjZW5hcmlvcyAoc3VjaCBhcyB0aGUgQUZfWERQ
KSwgdGhlIG1lbW9yeSBpcyBhbGxvY2F0ZWQKPiA+ID4gPiA+ID4gYW5kIERNQSBpcyBjb21wbGV0
ZWQgaW4gYWR2YW5jZSwgc28gaXQgaXMgbmVjZXNzYXJ5IGZvciB1cyB0byBzdXBwb3J0Cj4gPiA+
ID4gPiA+IHBhc3NpbmcgdGhlIERNQSBhZGRyZXNzIHRvIHZpcnRpbyBjb3JlLgo+ID4gPiA+ID4g
Pgo+ID4gPiA+ID4gPiBEcml2ZXMgY2FuIHVzZSBzZy0+ZG1hX2FkZHJlc3MgdG8gcGFzcyB0aGUg
bWFwcGVkIGRtYSBhZGRyZXNzIHRvIHZpcnRpbwo+ID4gPiA+ID4gPiBjb3JlLiBJZiBvbmUgc2ct
PmRtYV9hZGRyZXNzIGlzIHVzZWQgdGhlbiBhbGwgc2dzIG11c3QgdXNlIHNnLT5kbWFfYWRkcmVz
cywKPiA+ID4gPiA+ID4gb3RoZXJ3aXNlIGFsbCBkbWFfYWRkcmVzcyBtdXN0IGJlIG51bGwuCj4g
PiA+ID4gPiA+Cj4gPiA+ID4gPiA+IE9uIHRoZSBpbmRpcmVjdCBwYXRoLCBpZiBkbWFfYWRkcmVz
cyBpcyB1c2VkLCBkZXNjX3N0YXRlLmluZGlyX2Rlc2Mgd2lsbAo+ID4gPiA+ID4gPiBiZSBtaXhl
ZCB3aXRoIFZSSU5HX0lORElSRUNUX1BSRU1BUFBFRC4gU28gd2hlbiBkbyB1bm1hcCwgd2UgY2Fu
IHBhc3MgaXQuCj4gPiA+ID4gPgo+ID4gPiA+ID4gSXQncyBiZXR0ZXIgdG8gbWVudGlvbiB3aHkg
aW5kaXJlY3QgZGVzY3JpcHRvcnMgY2FuJ3QgYmUgZG9uZSBpbiB0aGUKPiA+ID4gPiA+IHNhbWUg
d2F5IHdpdGggZGlyZWN0IGRlc2NyaXB0b3JzLgo+ID4gPiA+ID4KPiA+ID4gPiA+IEJ0dywgaWYg
d2UgY2hhbmdlIHRoZSBzZW1hbnRpY3Mgb2YgZGVzY19leHRyYS5kbWFfYWRkciBhbmQKPiA+ID4g
PiA+IGRlc2Nfc3RhdGUuaW5kaXJfZGVzYywgd2Ugc2hvdWxkIGFkZCBjb21tZW50cyB0byBkZWZp
bml0aW9ucyBvZiB0aG9zZQo+ID4gPiA+ID4gc3RydWN0dXJlcy4KPiA+ID4gPgo+ID4gPiA+Cj4g
PiA+ID4gV2lsbCBmaXguCj4gPiA+ID4KPiA+ID4gPiA+Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+
IFNpZ25lZC1vZmYtYnk6IFh1YW4gWmh1byA8eHVhbnpodW9AbGludXguYWxpYmFiYS5jb20+Cj4g
PiA+ID4gPiA+IC0tLQo+ID4gPiA+ID4gPiAgZHJpdmVycy92aXJ0aW8vdmlydGlvX3JpbmcuYyB8
IDI4ICsrKysrKysrKysrKysrKysrKysrKystLS0tLS0KPiA+ID4gPiA+ID4gIDEgZmlsZSBjaGFu
Z2VkLCAyMiBpbnNlcnRpb25zKCspLCA2IGRlbGV0aW9ucygtKQo+ID4gPiA+ID4gPgo+ID4gPiA+
ID4gPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy92aXJ0aW8vdmlydGlvX3JpbmcuYyBiL2RyaXZlcnMv
dmlydGlvL3ZpcnRpb19yaW5nLmMKPiA+ID4gPiA+ID4gaW5kZXggNjZhMDcxZTNiZGVmLi4xMTgy
N2QyZTU2YTggMTAwNjQ0Cj4gPiA+ID4gPiA+IC0tLSBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19y
aW5nLmMKPiA+ID4gPiA+ID4gKysrIGIvZHJpdmVycy92aXJ0aW8vdmlydGlvX3JpbmcuYwo+ID4g
PiA+ID4gPiBAQCAtMjMxLDYgKzIzMSwxOCBAQCBzdGF0aWMgdm9pZCB2cmluZ19mcmVlKHN0cnVj
dCB2aXJ0cXVldWUgKl92cSk7Cj4gPiA+ID4gPiA+ICAgKiBIZWxwZXJzLgo+ID4gPiA+ID4gPiAg
ICovCj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICsjZGVmaW5lIFZSSU5HX0lORElSRUNUX1BSRU1B
UFBFRCAgQklUKDApCj4gPiA+ID4gPiA+ICsKPiA+ID4gPiA+ID4gKyNkZWZpbmUgZGVzY19taXhf
ZG1hX21hcChkb19tYXAsIGRlc2MpIFwKPiA+ID4gPiA+ID4gKyAgICAgICAoZG9fbWFwID8gZGVz
YyA6ICh0eXBlb2YoZGVzYykpKCh1bnNpZ25lZCBsb25nKShkZXNjKSB8IFZSSU5HX0lORElSRUNU
X1BSRU1BUFBFRCkpCj4gPiA+ID4gPiA+ICsKPiA+ID4gPiA+ID4gKyNkZWZpbmUgZGVzY19ybV9k
bWFfbWFwKGRlc2MpIFwKPiA+ID4gPiA+ID4gKyAgICAgICAoKHR5cGVvZihkZXNjKSkoKHVuc2ln
bmVkIGxvbmcpKGRlc2MpICYgflZSSU5HX0lORElSRUNUX1BSRU1BUFBFRCkpCj4gPiA+ID4gPiA+
ICsKPiA+ID4gPiA+ID4gKyNkZWZpbmUgZGVzY19tYXBfaW50ZXIoZGVzYykgXAo+ID4gPiA+ID4g
PiArICAgICAgICEoKHVuc2lnbmVkIGxvbmcpKGRlc2MpICYgVlJJTkdfSU5ESVJFQ1RfUFJFTUFQ
UEVEKQo+ID4gPiA+ID4gPiArCj4gPiA+ID4gPiA+ICsKPiA+ID4gPiA+ID4gICNkZWZpbmUgdG9f
dnZxKF92cSkgY29udGFpbmVyX29mKF92cSwgc3RydWN0IHZyaW5nX3ZpcnRxdWV1ZSwgdnEpCj4g
PiA+ID4gPiA+Cj4gPiA+ID4gPiA+ICBzdGF0aWMgaW5saW5lIGJvb2wgdmlydHF1ZXVlX3VzZV9p
bmRpcmVjdChzdHJ1Y3QgdnJpbmdfdmlydHF1ZXVlICp2cSwKPiA+ID4gPiA+ID4gQEAgLTcyNSw3
ICs3MzcsNyBAQCBzdGF0aWMgaW5saW5lIGludCB2aXJ0cXVldWVfYWRkX3NwbGl0KHN0cnVjdCB2
aXJ0cXVldWUgKl92cSwKPiA+ID4gPiA+ID4gICAgICAgICAvKiBTdG9yZSB0b2tlbiBhbmQgaW5k
aXJlY3QgYnVmZmVyIHN0YXRlLiAqLwo+ID4gPiA+ID4gPiAgICAgICAgIHZxLT5zcGxpdC5kZXNj
X3N0YXRlW2hlYWRdLmRhdGEgPSBkYXRhOwo+ID4gPiA+ID4gPiAgICAgICAgIGlmIChpbmRpcmVj
dCkKPiA+ID4gPiA+ID4gLSAgICAgICAgICAgICAgIHZxLT5zcGxpdC5kZXNjX3N0YXRlW2hlYWRd
LmluZGlyX2Rlc2MgPSBkZXNjOwo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgdnEtPnNwbGl0
LmRlc2Nfc3RhdGVbaGVhZF0uaW5kaXJfZGVzYyA9IGRlc2NfbWl4X2RtYV9tYXAoZG9fbWFwLCBk
ZXNjKTsKPiA+ID4gPiA+Cj4gPiA+ID4gPiBTbyB1c2luZyBpbmRpcl9kZXNjIGlzIGtpbmQgb2Yg
aGFja3kgKHNpbmNlIHdlIGRvbid0IHVzZSBpbmRpcmVjdCBmb3IKPiA+ID4gPiA+IHJ4IHdpdGgg
ZXh0cmEgY29udGV4dCkuCj4gPiA+ID4gPgo+ID4gPiA+ID4gQnV0IGF0IGxlYXN0IEkgdGhpbmsg
d2Ugc2hvdWxkIHNlZWthIHdheSB0byB1c2UgdGhlIHNhbWUgbWV0YWRhdGEgZm9yCj4gPiA+ID4g
PiBib3RoIGRpcmVjdCBhbmQgaW5kaXJlY3QgZGVzY3JpcHRvcnMuCj4gPiA+ID4gPgo+ID4gPiA+
ID4gRS5nIGNhbiB3ZSBtYWtlIHRoZW0gYWxsIHRvIHVzZSBpbmRpcl9kZXNjPwo+ID4gPiA+Cj4g
PiA+ID4gSSB0aGluayBpdCBtYXkgbm90LiBNeSBvcmlnaW5hbCBpZGVhIGlzIHRvIHVzZSBpbmRp
cl9kZXNjIHVuaWZvcm1seSwgYnV0Cj4gPiA+ID4gZm9yIHRoZSBzY2VuZSBvZiBzYXZpbmcgY3R4
LCB3ZSBjYW5ub3QgZ3VhcmFudGVlIHRoYXQgdGhlIGN0eCBoYXMgc3BhY2UgZm9yIHVzLgo+ID4g
Pgo+ID4gPiBPaywgYnV0IHRoZSBwcm9ibGVtIGlzIHRoYXQgdGhlIGNvZGUgYmVjYW1lIGV2ZW4g
bW9yZSBoYWNreSAoaW1hZ2luZQo+ID4gPiBvbmUgZGF5IHdlIG1heSB3YW50IHRvIHVzZSBpbmRp
cmVjdCBmb3IgUlg/KS4KPiA+Cj4gPgo+ID4gSSB0aGluayBpdCBtYXkgaGF2ZSBub3RoaW5nIHRv
IGRvIHdpdGggUlgsIGJ1dCB3aGV0aGVyIGN0eCBpcyB1c2VkLiBCZWNhdXNlIGN0eAo+ID4gYW5k
IGluZGlyZWN0IGNhbm5vdCBjb2V4aXN0Lgo+ID4KPiA+ICAgICAgICAgc3RhdGljIGlubGluZSBp
bnQgdmlydHF1ZXVlX2FkZF9zcGxpdChzdHJ1Y3QgdmlydHF1ZXVlICpfdnEsCj4gPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHNjYXR0ZXJsaXN0
ICpzZ3NbXSwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1bnNpZ25lZCBpbnQgdG90YWxfc2csCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IG91dF9zZ3MsCj4gPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGluX3NncywKPiA+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkICpkYXRh
LAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQg
KmN0eCwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBn
ZnBfdCBnZnApCj4gPiAgICAgICAgIHsKPiA+ICAgICAgICAgICAgICAgICBzdHJ1Y3QgdnJpbmdf
dmlydHF1ZXVlICp2cSA9IHRvX3Z2cShfdnEpOwo+ID4gICAgICAgICAgICAgICAgIHN0cnVjdCBz
Y2F0dGVybGlzdCAqc2c7Cj4gPiAgICAgICAgICAgICAgICAgc3RydWN0IHZyaW5nX2Rlc2MgKmRl
c2M7Cj4gPiAgICAgICAgICAgICAgICAgdW5zaWduZWQgaW50IGksIG4sIGF2YWlsLCBkZXNjc191
c2VkLCBwcmV2LCBlcnJfaWR4Owo+ID4gICAgICAgICAgICAgICAgIGludCBoZWFkOwo+ID4gICAg
ICAgICAgICAgICAgIGJvb2wgaW5kaXJlY3Q7Cj4gPgo+ID4gICAgICAgICAgICAgICAgIFNUQVJU
X1VTRSh2cSk7Cj4gPgo+ID4gICAgICAgICAgICAgICAgIEJVR19PTihkYXRhID09IE5VTEwpOwo+
ID4gICAgICAgICA+ICAgICAgIEJVR19PTihjdHggJiYgdnEtPmluZGlyZWN0KTsKPiA+Cj4gPiBJ
ZiB3ZSB3YW50IHRvIHVzZSBjdHggd2l0aCBpbmRpcmVjdCwgd2UgbXVzdCBhZGQgYW4gZGVkaWNh
dGVkIG1ldGFkYXRhIGZvciBjdHguCj4KPiBUaGUgcmVhc29uIHRoaXMgQlVHX09OKCkgaXMgdGhh
dCB3ZSBkbyBhIGhhY2s6Cj4KPiBGb3IgdGhlIHZxIHRoYXQgdXNlIGN0eCBpdCBjYW4ndCB1c2Ug
aW5kaXJlY3QuIFRoZSBvbmx5IHVzZXIgc28gZmFyIGlzCj4gdGhlIG1lcmdlYWJsZSBSWCBwYXRo
LiBUaGlzIHBhdGggYWRkcyBvbmUgbW9yZSBoYWNrIG9uIHRvcCwgdGhpcyBzZWVtcwo+IGEgYnVy
ZGVuIGZvciB0aGUgZnV0dXJlIG1haW50ZW5hbmNlLiBDb25zaWRlciBvbmUgZGF5IHdlIG1heSB3
YW50IHRvCj4gdXNlIGEgdmlydHF1ZXVlIHdpdGggYm90aCBpbmRpcmVjdCBhbmQgZXh0cmEgY29u
dGV4dC4KCk9LLiBJIHNlZS4KCkkgd2lsbCBhZGQgYSBkZWRpY2F0ZWQgbWV0YWRhdGEgaWYgbm8g
bmV3IGFkdmlzZS4KClRoYW5rcy4KCj4KPiBXZSBjYW4gaGVhciBmcm9tIG90aGVycy4KPgo+IFRo
YW5rcwo+Cj4gPgo+ID4gU28gSSB0aGluayB0aGUgY3VycmVudCBwbGFuIGlzIE9LLgo+ID4KPiA+
IFRoYW5rcy4KPiA+Cj4gPiA+Cj4gPiA+IFNvIEkgdGVuZCB0byBjaGFuZ2UgbXkgbWluZCB0byBp
bnRyb2R1Y2UgZGVkaWNhdGVkIG1ldGFkYXRhLCBpbnN0ZWFkCj4gPiA+IG9mIHRyeWluZyB0byBi
ZSBwYWNrZWQgd2l0aCB0d28gdHlwZXMgb2YgdGhlIGV4aXN0aW5nIG9uZXMuCj4gPiA+Cj4gPiA+
IFRoYW5rcwo+ID4gPgo+ID4gPiA+Cj4gPiA+ID4gVGhhbmtzLgo+ID4gPiA+Cj4gPiA+ID4gPgo+
ID4gPiA+ID4gVGhhbmtzCj4gPiA+ID4gPgo+ID4gPiA+ID4gPiAgICAgICAgIGVsc2UKPiA+ID4g
PiA+ID4gICAgICAgICAgICAgICAgIHZxLT5zcGxpdC5kZXNjX3N0YXRlW2hlYWRdLmluZGlyX2Rl
c2MgPSBjdHg7Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IEBAIC04MjAsMjIgKzgzMiwyNiBAQCBz
dGF0aWMgdm9pZCBkZXRhY2hfYnVmX3NwbGl0KHN0cnVjdCB2cmluZ192aXJ0cXVldWUgKnZxLCB1
bnNpZ25lZCBpbnQgaGVhZCwKPiA+ID4gPiA+ID4gICAgICAgICB2cS0+dnEubnVtX2ZyZWUrKzsK
PiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAgICBpZiAodnEtPmluZGlyZWN0KSB7Cj4gPiA+
ID4gPiA+IC0gICAgICAgICAgICAgICBzdHJ1Y3QgdnJpbmdfZGVzYyAqaW5kaXJfZGVzYyA9Cj4g
PiA+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnEtPnNwbGl0LmRlc2Nf
c3RhdGVbaGVhZF0uaW5kaXJfZGVzYzsKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgIHN0cnVj
dCB2cmluZ19kZXNjICptaXggPSB2cS0+c3BsaXQuZGVzY19zdGF0ZVtoZWFkXS5pbmRpcl9kZXNj
Owo+ID4gPiA+ID4gPiArICAgICAgICAgICAgICAgc3RydWN0IHZyaW5nX2Rlc2MgKmluZGlyX2Rl
c2M7Cj4gPiA+ID4gPiA+ICAgICAgICAgICAgICAgICB1MzIgbGVuOwo+ID4gPiA+ID4gPgo+ID4g
PiA+ID4gPiAgICAgICAgICAgICAgICAgLyogRnJlZSB0aGUgaW5kaXJlY3QgdGFibGUsIGlmIGFu
eSwgbm93IHRoYXQgaXQncyB1bm1hcHBlZC4gKi8KPiA+ID4gPiA+ID4gLSAgICAgICAgICAgICAg
IGlmICghaW5kaXJfZGVzYykKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgIGlmICghbWl4KQo+
ID4gPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47Cj4gPiA+ID4gPiA+Cj4g
PiA+ID4gPiA+ICsgICAgICAgICAgICAgICBpbmRpcl9kZXNjID0gZGVzY19ybV9kbWFfbWFwKG1p
eCk7Cj4gPiA+ID4gPiA+ICsKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIGxlbiA9IHZxLT5z
cGxpdC5kZXNjX2V4dHJhW2hlYWRdLmxlbjsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAgICAg
ICAgICAgICAgIEJVR19PTighKHZxLT5zcGxpdC5kZXNjX2V4dHJhW2hlYWRdLmZsYWdzICYKPiA+
ID4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWUklOR19ERVNDX0ZfSU5E
SVJFQ1QpKTsKPiA+ID4gPiA+ID4gICAgICAgICAgICAgICAgIEJVR19PTihsZW4gPT0gMCB8fCBs
ZW4gJSBzaXplb2Yoc3RydWN0IHZyaW5nX2Rlc2MpKTsKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4g
LSAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW4gLyBzaXplb2Yoc3RydWN0IHZyaW5n
X2Rlc2MpOyBqKyspCj4gPiA+ID4gPiA+IC0gICAgICAgICAgICAgICAgICAgICAgIHZyaW5nX3Vu
bWFwX29uZV9zcGxpdF9pbmRpcmVjdCh2cSwgJmluZGlyX2Rlc2Nbal0pOwo+ID4gPiA+ID4gPiAr
ICAgICAgICAgICAgICAgaWYgKGRlc2NfbWFwX2ludGVyKG1peCkpIHsKPiA+ID4gPiA+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbiAvIHNpemVvZihzdHJ1Y3Qg
dnJpbmdfZGVzYyk7IGorKykKPiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB2cmluZ191bm1hcF9vbmVfc3BsaXRfaW5kaXJlY3QodnEsICZpbmRpcl9kZXNjW2pdKTsK
PiA+ID4gPiA+ID4gKyAgICAgICAgICAgICAgIH0KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gICAg
ICAgICAgICAgICAgIGtmcmVlKGluZGlyX2Rlc2MpOwo+ID4gPiA+ID4gPiAgICAgICAgICAgICAg
ICAgdnEtPnNwbGl0LmRlc2Nfc3RhdGVbaGVhZF0uaW5kaXJfZGVzYyA9IE5VTEw7Cj4gPiA+ID4g
PiA+IC0tCj4gPiA+ID4gPiA+IDIuMzIuMC4zLmcwMTE5NWNmOWYKPiA+ID4gPiA+ID4KPiA+ID4g
PiA+Cj4gPiA+ID4KPiA+ID4KPiA+Cj4KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KVmlydHVhbGl6YXRpb24gbWFpbGluZyBsaXN0ClZpcnR1YWxpemF0aW9u
QGxpc3RzLmxpbnV4LWZvdW5kYXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGludXhmb3VuZGF0aW9u
Lm9yZy9tYWlsbWFuL2xpc3RpbmZvL3ZpcnR1YWxpemF0aW9u
