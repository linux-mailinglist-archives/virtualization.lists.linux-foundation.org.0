Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp1.osuosl.org (smtp1.osuosl.org [IPv6:2605:bc80:3010::138])
	by mail.lfdr.de (Postfix) with ESMTPS id C356977853C
	for <lists.virtualization@lfdr.de>; Fri, 11 Aug 2023 04:10:55 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp1.osuosl.org (Postfix) with ESMTP id 49AFF8210A;
	Fri, 11 Aug 2023 02:10:52 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org 49AFF8210A
Authentication-Results: smtp1.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=eKMbdn6O
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
	by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OC7bWpwkqIDk; Fri, 11 Aug 2023 02:10:51 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp1.osuosl.org (Postfix) with ESMTPS id BF8F383F32;
	Fri, 11 Aug 2023 02:10:50 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org BF8F383F32
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id D8579C008D;
	Fri, 11 Aug 2023 02:10:49 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp2.osuosl.org (smtp2.osuosl.org [140.211.166.133])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 12604C0032
 for <virtualization@lists.linux-foundation.org>;
 Fri, 11 Aug 2023 02:10:48 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp2.osuosl.org (Postfix) with ESMTP id E15FB40125
 for <virtualization@lists.linux-foundation.org>;
 Fri, 11 Aug 2023 02:10:47 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org E15FB40125
Authentication-Results: smtp2.osuosl.org;
 dkim=pass (1024-bit key) header.d=redhat.com header.i=@redhat.com
 header.a=rsa-sha256 header.s=mimecast20190719 header.b=eKMbdn6O
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp2.osuosl.org ([127.0.0.1])
 by localhost (smtp2.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id O2syLEhh4zTF
 for <virtualization@lists.linux-foundation.org>;
 Fri, 11 Aug 2023 02:10:47 +0000 (UTC)
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp2.osuosl.org (Postfix) with ESMTPS id CB66F40012
 for <virtualization@lists.linux-foundation.org>;
 Fri, 11 Aug 2023 02:10:46 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp2.osuosl.org CB66F40012
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1691719845;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=u9oE7qA94MWDV5RlSnQcOTMO4BPmVWC7Dzv0qiGO5EM=;
 b=eKMbdn6OPkRXk7DIpr6Sd6WEmBRfm9xucS69WeB+V10ruigQCFBSJ5xzvX3ZcQ1EPOdWxe
 tX7GY2BOblM+bzrSnYZwRkDU5a+n2xn9iMkf1BMP4nEgbJtioIFM88vgY5Lvs+mXzo6YY4
 boGMz6TJNr6yG0JtjxlCk84YHOvMSAg=
Received: from mail-lj1-f200.google.com (mail-lj1-f200.google.com
 [209.85.208.200]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-428-22aQa-vwPO2x2EkdTXDX1g-1; Thu, 10 Aug 2023 22:10:42 -0400
X-MC-Unique: 22aQa-vwPO2x2EkdTXDX1g-1
Received: by mail-lj1-f200.google.com with SMTP id
 38308e7fff4ca-2b9e014111fso16633731fa.0
 for <virtualization@lists.linux-foundation.org>;
 Thu, 10 Aug 2023 19:10:41 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20221208; t=1691719840; x=1692324640;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=u9oE7qA94MWDV5RlSnQcOTMO4BPmVWC7Dzv0qiGO5EM=;
 b=fSvIvLLuOAjqBjNMhD2i4ahK/+sMXeo0ZE3Bz46MIr5aIWTztLpy11uqT/nYZyD/8F
 Il9fO0WZAR0gy2mP6y7fqy7HZSgV8bNw54XqNVdeqjs1lacGFXQ5RPFxb11vjBq1hE6B
 ii6iiVOa2+GQq7K9KFXrZtL00JXp2RKk9J6WzhTi3xQiYIj9gymb1I9rmuPcQjnFvEBb
 z2iql8QWNepXYKESLrHB2ZzMu9SgfsHG9z6+Rn6FU8/u3BFD7cOvloZxhLCiK4XjOLWs
 ndfTRJOnpPQYUO9EvB4qT1gKPF/xaN892882WYmSV3MhYav2ClzxiVn2WglT0Q9ok3i1
 l5qQ==
X-Gm-Message-State: AOJu0Yykrhi/iXwJW/aL57ElCozcgkj3MnLWcA5Ep2rXjpn7QVDmVCd2
 oIyzc8Mu1WEB99KW3b4jGBVp6Gv+DFoQv3bHCVvF6XEQ9fhGrVomGo3iBKVcyWyu9Ofljj3dhcu
 GFJvEiw4Du6H7qazkFVd1oaNIqr5ctWf+56AN54G3P92lcwAYowPjy7tlPg==
X-Received: by 2002:a2e:8744:0:b0:2b9:45ad:88b1 with SMTP id
 q4-20020a2e8744000000b002b945ad88b1mr599178ljj.2.1691719840609; 
 Thu, 10 Aug 2023 19:10:40 -0700 (PDT)
X-Google-Smtp-Source: AGHT+IHhpvZ7rov6Rv/KhWvHy2BiYAgjqCj2ZJRjGnCeZecKkhetRZera3i8cKkv/uDefp1Q4rLtEd1blLLmsf4EwLQ=
X-Received: by 2002:a2e:8744:0:b0:2b9:45ad:88b1 with SMTP id
 q4-20020a2e8744000000b002b945ad88b1mr599170ljj.2.1691719840271; Thu, 10 Aug
 2023 19:10:40 -0700 (PDT)
MIME-Version: 1.0
References: <20230728070127.18452-1-quic_ajainp@quicinc.com>
 <20230810154334-mutt-send-email-mst@kernel.org>
In-Reply-To: <20230810154334-mutt-send-email-mst@kernel.org>
From: Jason Wang <jasowang@redhat.com>
Date: Fri, 11 Aug 2023 10:10:28 +0800
Message-ID: <CACGkMEvWE4bSzULPcMRx_UZ96Y+RzG8cL_P3zURwuaRCZRrx0A@mail.gmail.com>
Subject: Re: [PATCH] virtio_mmio: add suspend and resume calls for virtio_mmio
 devices
To: "Michael S. Tsirkin" <mst@redhat.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Cc: Xuan Zhuo <xuanzhuo@linux.alibaba.com>,
 virtualization@lists.linux-foundation.org,
 Anvesh Jain P <quic_ajainp@quicinc.com>, linux-kernel@vger.kernel.org,
 Venkata Rao Kakani <quic_vkakani@quicinc.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

T24gRnJpLCBBdWcgMTEsIDIwMjMgYXQgMzo0NeKAr0FNIE1pY2hhZWwgUy4gVHNpcmtpbiA8bXN0
QHJlZGhhdC5jb20+IHdyb3RlOgo+Cj4gT24gRnJpLCBKdWwgMjgsIDIwMjMgYXQgMTI6MzE6MjdQ
TSArMDUzMCwgQW52ZXNoIEphaW4gUCB3cm90ZToKPiA+IEhhbmRsZSBzdXNwZW5kIGFuZCByZXN1
bWUgY2FsbHMgZm9yIHZpcnRpbyBtbWlvIGRldmljZXMgZnJvbQo+ID4gUE0gY29yZS4gRXhwb3Nl
IHRoZXNlIG5vdGlmaWNhdGlvbnMgdG8gdmlydGlvIGRyaXZlcnMgdGhhdCBjYW4gcXVpZXNjZSBh
bmQKPiA+IHJlc3VtZSB2cSBvcGVyYXRpb25zLiBVcGRhdGUgdmlydGlvIHBtIG9wcyB0byBoYW5k
bGUgZnJlZXplJiByZXN0b3JlIGFuZAo+ID4gc3VzcGVuZCAmIHJlc3VtZSBjYWxsYmFja3Mgc2Vw
YXJhdGVseS4KPiA+Cj4gPiBTaWduZWQtb2ZmLWJ5OiBBbnZlc2ggSmFpbiBQIDxxdWljX2FqYWlu
cEBxdWljaW5jLmNvbT4KPiA+IFNpZ25lZC1vZmYtYnk6IFZlbmthdGEgUmFvIEtha2FuaSA8cXVp
Y192a2FrYW5pQHF1aWNpbmMuY29tPgo+Cj4gb2tleSBidXQgd2hhdCBpcyB0aGUgbW90aXZhdGlv
bj8gZG9lcyB0aGlzIGFkZGl0aW9uIG9mIDIwMCBMT0MKPiBhY2hpZXZlIHNvbWV0aGluZyBuZXc/
IHdoYXQgaXMgdGhlIGlzc3VlIGZpeGVkIGhlcmU/CgorMQoKQW5kIEkgdGhpbmsgd2UgbmVlZCBh
biBleGFtcGxlIHRoYXQgY2FuIHVzZSB0aGUgbmV3IG9wcy4KClRoYW5rcwoKPgo+Cj4gPiAtLS0K
PiA+ICBkcml2ZXJzL3ZpcnRpby92aXJ0aW8uYyAgICAgIHwgMTEyICsrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrCj4gPiAgZHJpdmVycy92aXJ0aW8vdmlydGlvX21taW8uYyB8ICA1
MCArKysrKysrKysrKysrKystCj4gPiAgaW5jbHVkZS9saW51eC92aXJ0aW8uaCAgICAgICB8ICAx
MiArKysrCj4gPiAgMyBmaWxlcyBjaGFuZ2VkLCAxNzMgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlv
bigtKQo+ID4KPiA+IGRpZmYgLS1naXQgYS9kcml2ZXJzL3ZpcnRpby92aXJ0aW8uYyBiL2RyaXZl
cnMvdmlydGlvL3ZpcnRpby5jCj4gPiBpbmRleCAzODkzZGMyOWViMjYuLmM2ZjI1YTI2NzYwMCAx
MDA2NDQKPiA+IC0tLSBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpby5jCj4gPiArKysgYi9kcml2ZXJz
L3ZpcnRpby92aXJ0aW8uYwo+ID4gQEAgLTU1MSw2ICs1NTEsMTE4IEBAIGludCB2aXJ0aW9fZGV2
aWNlX3Jlc3RvcmUoc3RydWN0IHZpcnRpb19kZXZpY2UgKmRldikKPiA+ICAgICAgIHJldHVybiBy
ZXQ7Cj4gPiAgfQo+ID4gIEVYUE9SVF9TWU1CT0xfR1BMKHZpcnRpb19kZXZpY2VfcmVzdG9yZSk7
Cj4gPiArCj4gPiAraW50IHZpcnRpb19kZXZpY2Vfc3VzcGVuZChzdHJ1Y3QgdmlydGlvX2Rldmlj
ZSAqZGV2KQo+ID4gK3sKPiA+ICsgICAgIHN0cnVjdCB2aXJ0aW9fZHJpdmVyICpkcnYgPSBkcnZf
dG9fdmlydGlvKGRldi0+ZGV2LmRyaXZlcik7Cj4gPiArCj4gPiArICAgICB2aXJ0aW9fY29uZmln
X2Rpc2FibGUoZGV2KTsKPiA+ICsKPiA+ICsgICAgIGRldi0+ZmFpbGVkID0gZGV2LT5jb25maWct
PmdldF9zdGF0dXMoZGV2KSAmIFZJUlRJT19DT05GSUdfU19GQUlMRUQ7Cj4gPiArCj4gPiArICAg
ICBpZiAoZHJ2ICYmIGRydi0+c3VzcGVuZCkKPiA+ICsgICAgICAgICAgICAgcmV0dXJuIGRydi0+
c3VzcGVuZChkZXYpOwo+ID4gKwo+ID4gKyAgICAgcmV0dXJuIDA7Cj4gPiArfQo+ID4gK0VYUE9S
VF9TWU1CT0xfR1BMKHZpcnRpb19kZXZpY2Vfc3VzcGVuZCk7Cj4gPiArCj4gPiAraW50IHZpcnRp
b19kZXZpY2VfcmVzdW1lKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICpkZXYpCj4gPiArewo+ID4gKyAg
ICAgc3RydWN0IHZpcnRpb19kcml2ZXIgKmRydiA9IGRydl90b192aXJ0aW8oZGV2LT5kZXYuZHJp
dmVyKTsKPiA+ICsgICAgIGludCByZXQ7Cj4gPiArCj4gPiArICAgICBpZiAoZHJ2ICYmIGRydi0+
cmVzdW1lKSB7Cj4gPiArICAgICAgICAgICAgIHJldCA9IGRydi0+cmVzdW1lKGRldik7Cj4gPiAr
ICAgICAgICAgICAgIGlmIChyZXQpCj4gPiArICAgICAgICAgICAgICAgICAgICAgZ290byBlcnI7
Cj4gPiArCj4gPiArICAgICAgICAgICAgIGlmICghKGRldi0+Y29uZmlnLT5nZXRfc3RhdHVzKGRl
dikgJiBWSVJUSU9fQ09ORklHX1NfRFJJVkVSX09LKSkKPiA+ICsgICAgICAgICAgICAgICAgICAg
ICB2aXJ0aW9fZGV2aWNlX3JlYWR5KGRldik7Cj4gPiArCj4gPiArICAgICAgICAgICAgIHZpcnRp
b19jb25maWdfZW5hYmxlKGRldik7Cj4gPiArICAgICB9Cj4gPiArCj4gPiArICAgICByZXR1cm4g
MDsKPiA+ICtlcnI6Cj4gPiArICAgICB2aXJ0aW9fYWRkX3N0YXR1cyhkZXYsIFZJUlRJT19DT05G
SUdfU19GQUlMRUQpOwo+ID4gKyAgICAgcmV0dXJuIHJldDsKPiA+ICt9Cj4gPiArRVhQT1JUX1NZ
TUJPTF9HUEwodmlydGlvX2RldmljZV9yZXN1bWUpOwo+ID4gKwo+ID4gK2ludCB2aXJ0aW9fZGV2
aWNlX3N1c3BlbmRfbGF0ZShzdHJ1Y3QgdmlydGlvX2RldmljZSAqZGV2KQo+ID4gK3sKPiA+ICsg
ICAgIHN0cnVjdCB2aXJ0aW9fZHJpdmVyICpkcnYgPSBkcnZfdG9fdmlydGlvKGRldi0+ZGV2LmRy
aXZlcik7Cj4gPiArCj4gPiArICAgICB2aXJ0aW9fY29uZmlnX2Rpc2FibGUoZGV2KTsKPiA+ICsK
PiA+ICsgICAgIGRldi0+ZmFpbGVkID0gZGV2LT5jb25maWctPmdldF9zdGF0dXMoZGV2KSAmIFZJ
UlRJT19DT05GSUdfU19GQUlMRUQ7Cj4gPiArCj4gPiArICAgICBpZiAoZHJ2ICYmIGRydi0+c3Vz
cGVuZF9sYXRlKQo+ID4gKyAgICAgICAgICAgICByZXR1cm4gZHJ2LT5zdXNwZW5kX2xhdGUoZGV2
KTsKPiA+ICsKPiA+ICsgICAgIHJldHVybiAwOwo+ID4gK30KPiA+ICtFWFBPUlRfU1lNQk9MX0dQ
TCh2aXJ0aW9fZGV2aWNlX3N1c3BlbmRfbGF0ZSk7Cj4gPiArCj4gPiAraW50IHZpcnRpb19kZXZp
Y2VfcmVzdW1lX2Vhcmx5KHN0cnVjdCB2aXJ0aW9fZGV2aWNlICpkZXYpCj4gPiArewo+ID4gKyAg
ICAgc3RydWN0IHZpcnRpb19kcml2ZXIgKmRydiA9IGRydl90b192aXJ0aW8oZGV2LT5kZXYuZHJp
dmVyKTsKPiA+ICsgICAgIGludCByZXQ7Cj4gPiArCj4gPiArICAgICBpZiAoZHJ2ICYmIGRydi0+
cmVzdW1lX2Vhcmx5KSB7Cj4gPiArICAgICAgICAgICAgIHJldCA9IGRydi0+cmVzdW1lX2Vhcmx5
KGRldik7Cj4gPiArICAgICAgICAgICAgIGlmIChyZXQpCj4gPiArICAgICAgICAgICAgICAgICAg
ICAgZ290byBlcnI7Cj4gPiArICAgICAgICAgICAgIGlmICghKGRldi0+Y29uZmlnLT5nZXRfc3Rh
dHVzKGRldikgJiBWSVJUSU9fQ09ORklHX1NfRFJJVkVSX09LKSkKPiA+ICsgICAgICAgICAgICAg
ICAgICAgICB2aXJ0aW9fZGV2aWNlX3JlYWR5KGRldik7Cj4gPiArCj4gPiArICAgICAgICAgICAg
IHZpcnRpb19jb25maWdfZW5hYmxlKGRldik7Cj4gPiArICAgICB9Cj4gPiArCj4gPiArICAgICBy
ZXR1cm4gMDsKPiA+ICtlcnI6Cj4gPiArICAgICB2aXJ0aW9fYWRkX3N0YXR1cyhkZXYsIFZJUlRJ
T19DT05GSUdfU19GQUlMRUQpOwo+ID4gKyAgICAgcmV0dXJuIHJldDsKPiA+ICt9Cj4gPiArRVhQ
T1JUX1NZTUJPTF9HUEwodmlydGlvX2RldmljZV9yZXN1bWVfZWFybHkpOwo+ID4gKwo+ID4gK2lu
dCB2aXJ0aW9fZGV2aWNlX3N1c3BlbmRfbm9pcnEoc3RydWN0IHZpcnRpb19kZXZpY2UgKmRldikK
PiA+ICt7Cj4gPiArICAgICBzdHJ1Y3QgdmlydGlvX2RyaXZlciAqZHJ2ID0gZHJ2X3RvX3ZpcnRp
byhkZXYtPmRldi5kcml2ZXIpOwo+ID4gKwo+ID4gKyAgICAgdmlydGlvX2NvbmZpZ19kaXNhYmxl
KGRldik7Cj4gPiArCj4gPiArICAgICBkZXYtPmZhaWxlZCA9IGRldi0+Y29uZmlnLT5nZXRfc3Rh
dHVzKGRldikgJiBWSVJUSU9fQ09ORklHX1NfRkFJTEVEOwo+ID4gKwo+ID4gKyAgICAgaWYgKGRy
diAmJiBkcnYtPnN1c3BlbmRfbm9pcnEpCj4gPiArICAgICAgICAgICAgIHJldHVybiBkcnYtPnN1
c3BlbmRfbm9pcnEoZGV2KTsKPiA+ICsKPiA+ICsgICAgIHJldHVybiAwOwo+ID4gK30KPiA+ICtF
WFBPUlRfU1lNQk9MX0dQTCh2aXJ0aW9fZGV2aWNlX3N1c3BlbmRfbm9pcnEpOwo+ID4gKwo+ID4g
K2ludCB2aXJ0aW9fZGV2aWNlX3Jlc3VtZV9ub2lycShzdHJ1Y3QgdmlydGlvX2RldmljZSAqZGV2
KQo+ID4gK3sKPiA+ICsgICAgIHN0cnVjdCB2aXJ0aW9fZHJpdmVyICpkcnYgPSBkcnZfdG9fdmly
dGlvKGRldi0+ZGV2LmRyaXZlcik7Cj4gPiArICAgICBpbnQgcmV0Owo+ID4gKwo+ID4gKyAgICAg
aWYgKGRydiAmJiBkcnYtPnJlc3VtZV9ub2lycSkgewo+ID4gKyAgICAgICAgICAgICByZXQgPSBk
cnYtPnJlc3VtZV9ub2lycShkZXYpOwo+ID4gKyAgICAgICAgICAgICBpZiAocmV0KQo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgIGdvdG8gZXJyOwo+ID4gKyAgICAgICAgICAgICBpZiAoIShkZXYt
PmNvbmZpZy0+Z2V0X3N0YXR1cyhkZXYpICYgVklSVElPX0NPTkZJR19TX0RSSVZFUl9PSykpCj4g
PiArICAgICAgICAgICAgICAgICAgICAgdmlydGlvX2RldmljZV9yZWFkeShkZXYpOwo+ID4gKwo+
ID4gKyAgICAgICAgICAgICB2aXJ0aW9fY29uZmlnX2VuYWJsZShkZXYpOwo+ID4gKyAgICAgfQo+
ID4gKwo+ID4gKyAgICAgcmV0dXJuIDA7Cj4gPiArZXJyOgo+ID4gKyAgICAgdmlydGlvX2FkZF9z
dGF0dXMoZGV2LCBWSVJUSU9fQ09ORklHX1NfRkFJTEVEKTsKPiA+ICsgICAgIHJldHVybiByZXQ7
Cj4gPiArfQo+ID4gK0VYUE9SVF9TWU1CT0xfR1BMKHZpcnRpb19kZXZpY2VfcmVzdW1lX25vaXJx
KTsKPiA+ICAjZW5kaWYKPiA+Cj4gPiAgc3RhdGljIGludCB2aXJ0aW9faW5pdCh2b2lkKQo+ID4g
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19tbWlvLmMgYi9kcml2ZXJzL3ZpcnRp
by92aXJ0aW9fbW1pby5jCj4gPiBpbmRleCBhNDZhNGEyOWU5MjkuLjkzODVjN2U2NWRhOSAxMDA2
NDQKPiA+IC0tLSBhL2RyaXZlcnMvdmlydGlvL3ZpcnRpb19tbWlvLmMKPiA+ICsrKyBiL2RyaXZl
cnMvdmlydGlvL3ZpcnRpb19tbWlvLmMKPiA+IEBAIC01OTYsOSArNTk2LDU3IEBAIHN0YXRpYyBp
bnQgdmlydGlvX21taW9fcmVzdG9yZShzdHJ1Y3QgZGV2aWNlICpkZXYpCj4gPgo+ID4gICAgICAg
cmV0dXJuIHZpcnRpb19kZXZpY2VfcmVzdG9yZSgmdm1fZGV2LT52ZGV2KTsKPiA+ICB9Cj4gPiAr
c3RhdGljIGludCB2aXJ0aW9fbW1pb19zdXNwZW5kKHN0cnVjdCBkZXZpY2UgKmRldikKPiA+ICt7
Cj4gPiArICAgICAgIHN0cnVjdCB2aXJ0aW9fbW1pb19kZXZpY2UgKnZtX2RldiA9IGRldl9nZXRf
ZHJ2ZGF0YShkZXYpOwo+ID4gKwo+ID4gKyAgICAgICByZXR1cm4gdmlydGlvX2RldmljZV9zdXNw
ZW5kKCZ2bV9kZXYtPnZkZXYpOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgaW50IHZpcnRpb19t
bWlvX3Jlc3VtZShzdHJ1Y3QgZGV2aWNlICpkZXYpCj4gPiArewo+ID4gKyAgICAgICBzdHJ1Y3Qg
dmlydGlvX21taW9fZGV2aWNlICp2bV9kZXYgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiA+ICsK
PiA+ICsgICAgICAgcmV0dXJuIHZpcnRpb19kZXZpY2VfcmVzdW1lKCZ2bV9kZXYtPnZkZXYpOwo+
ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgaW50IHZpcnRpb19tbWlvX3N1c3BlbmRfbGF0ZShzdHJ1
Y3QgZGV2aWNlICpkZXYpCj4gPiArewo+ID4gKyAgICAgICBzdHJ1Y3QgdmlydGlvX21taW9fZGV2
aWNlICp2bV9kZXYgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiA+ICsKPiA+ICsgICAgICAgcmV0
dXJuIHZpcnRpb19kZXZpY2Vfc3VzcGVuZF9sYXRlKCZ2bV9kZXYtPnZkZXYpOwo+ID4gK30KPiA+
ICsKPiA+ICtzdGF0aWMgaW50IHZpcnRpb19tbWlvX3Jlc3VtZV9lYXJseShzdHJ1Y3QgZGV2aWNl
ICpkZXYpCj4gPiArewo+ID4gKyAgICAgICBzdHJ1Y3QgdmlydGlvX21taW9fZGV2aWNlICp2bV9k
ZXYgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKPiA+ICsKPiA+ICsgICAgICAgcmV0dXJuIHZpcnRp
b19kZXZpY2VfcmVzdW1lX2Vhcmx5KCZ2bV9kZXYtPnZkZXYpOwo+ID4gK30KPiA+ICsKPiA+ICtz
dGF0aWMgaW50IHZpcnRpb19tbWlvX3N1c3BlbmRfbm9pcnEoc3RydWN0IGRldmljZSAqZGV2KQo+
ID4gK3sKPiA+ICsgICAgICAgc3RydWN0IHZpcnRpb19tbWlvX2RldmljZSAqdm1fZGV2ID0gZGV2
X2dldF9kcnZkYXRhKGRldik7Cj4gPiArCj4gPiArICAgICAgIHJldHVybiB2aXJ0aW9fZGV2aWNl
X3N1c3BlbmRfbm9pcnEoJnZtX2Rldi0+dmRldik7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyBp
bnQgdmlydGlvX21taW9fcmVzdW1lX25vaXJxKHN0cnVjdCBkZXZpY2UgKmRldikKPiA+ICt7Cj4g
PiArICAgICAgIHN0cnVjdCB2aXJ0aW9fbW1pb19kZXZpY2UgKnZtX2RldiA9IGRldl9nZXRfZHJ2
ZGF0YShkZXYpOwo+ID4gKwo+ID4gKyAgICAgICByZXR1cm4gdmlydGlvX2RldmljZV9yZXN1bWVf
bm9pcnEoJnZtX2Rldi0+dmRldik7Cj4gPiArfQo+ID4KPiA+ICBzdGF0aWMgY29uc3Qgc3RydWN0
IGRldl9wbV9vcHMgdmlydGlvX21taW9fcG1fb3BzID0gewo+ID4gLSAgICAgU0VUX1NZU1RFTV9T
TEVFUF9QTV9PUFModmlydGlvX21taW9fZnJlZXplLCB2aXJ0aW9fbW1pb19yZXN0b3JlKQo+ID4g
KyAgICAgICAuZnJlZXplICAgICAgICAgPSB2aXJ0aW9fbW1pb19mcmVlemUsCj4gPiArICAgICAg
IC5yZXN0b3JlICAgICAgICA9IHZpcnRpb19tbWlvX3Jlc3RvcmUsCj4gPiArICAgICAgIC5zdXNw
ZW5kICAgICAgICA9IHZpcnRpb19tbWlvX3N1c3BlbmQsCj4gPiArICAgICAgIC5yZXN1bWUgICAg
ICAgICA9IHZpcnRpb19tbWlvX3Jlc3VtZSwKPiA+ICsgICAgICAgLnN1c3BlbmRfbGF0ZSAgID0g
dmlydGlvX21taW9fc3VzcGVuZF9sYXRlLAo+ID4gKyAgICAgICAucmVzdW1lX2Vhcmx5ICAgPSB2
aXJ0aW9fbW1pb19yZXN1bWVfZWFybHksCj4gPiArICAgICAgIC5zdXNwZW5kX25vaXJxICA9IHZp
cnRpb19tbWlvX3N1c3BlbmRfbm9pcnEsCj4gPiArICAgICAgIC5yZXN1bWVfbm9pcnEgICA9IHZp
cnRpb19tbWlvX3Jlc3VtZV9ub2lycSwKPiA+ICB9Owo+ID4gICNlbmRpZgo+ID4KPiA+IGRpZmYg
LS1naXQgYS9pbmNsdWRlL2xpbnV4L3ZpcnRpby5oIGIvaW5jbHVkZS9saW51eC92aXJ0aW8uaAo+
ID4gaW5kZXggZGU2MDQxZGVlZTM3Li5lODhiMzIxNDA4ZTkgMTAwNjQ0Cj4gPiAtLS0gYS9pbmNs
dWRlL2xpbnV4L3ZpcnRpby5oCj4gPiArKysgYi9pbmNsdWRlL2xpbnV4L3ZpcnRpby5oCj4gPiBA
QCAtMTQ1LDYgKzE0NSwxMiBAQCB2b2lkIHZpcnRpb19jb25maWdfY2hhbmdlZChzdHJ1Y3Qgdmly
dGlvX2RldmljZSAqZGV2KTsKPiA+ICAjaWZkZWYgQ09ORklHX1BNX1NMRUVQCj4gPiAgaW50IHZp
cnRpb19kZXZpY2VfZnJlZXplKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICpkZXYpOwo+ID4gIGludCB2
aXJ0aW9fZGV2aWNlX3Jlc3RvcmUoc3RydWN0IHZpcnRpb19kZXZpY2UgKmRldik7Cj4gPiAraW50
IHZpcnRpb19kZXZpY2Vfc3VzcGVuZChzdHJ1Y3QgdmlydGlvX2RldmljZSAqZGV2KTsKPiA+ICtp
bnQgdmlydGlvX2RldmljZV9yZXN1bWUoc3RydWN0IHZpcnRpb19kZXZpY2UgKmRldik7Cj4gPiAr
aW50IHZpcnRpb19kZXZpY2Vfc3VzcGVuZF9sYXRlKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICpkZXYp
Owo+ID4gK2ludCB2aXJ0aW9fZGV2aWNlX3Jlc3VtZV9lYXJseShzdHJ1Y3QgdmlydGlvX2Rldmlj
ZSAqZGV2KTsKPiA+ICtpbnQgdmlydGlvX2RldmljZV9zdXNwZW5kX25vaXJxKHN0cnVjdCB2aXJ0
aW9fZGV2aWNlICpkZXYpOwo+ID4gK2ludCB2aXJ0aW9fZGV2aWNlX3Jlc3VtZV9ub2lycShzdHJ1
Y3QgdmlydGlvX2RldmljZSAqZGV2KTsKPiA+ICAjZW5kaWYKPiA+ICB2b2lkIHZpcnRpb19yZXNl
dF9kZXZpY2Uoc3RydWN0IHZpcnRpb19kZXZpY2UgKmRldik7Cj4gPgo+ID4gQEAgLTE4Nyw2ICsx
OTMsMTIgQEAgc3RydWN0IHZpcnRpb19kcml2ZXIgewo+ID4gICNpZmRlZiBDT05GSUdfUE0KPiA+
ICAgICAgIGludCAoKmZyZWV6ZSkoc3RydWN0IHZpcnRpb19kZXZpY2UgKmRldik7Cj4gPiAgICAg
ICBpbnQgKCpyZXN0b3JlKShzdHJ1Y3QgdmlydGlvX2RldmljZSAqZGV2KTsKPiA+ICsgICAgIGlu
dCAoKnN1c3BlbmQpKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICpkZXYpOwo+ID4gKyAgICAgaW50ICgq
cmVzdW1lKShzdHJ1Y3QgdmlydGlvX2RldmljZSAqZGV2KTsKPiA+ICsgICAgIGludCAoKnN1c3Bl
bmRfbGF0ZSkoc3RydWN0IHZpcnRpb19kZXZpY2UgKmRldik7Cj4gPiArICAgICBpbnQgKCpyZXN1
bWVfZWFybHkpKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICpkZXYpOwo+ID4gKyAgICAgaW50ICgqc3Vz
cGVuZF9ub2lycSkoc3RydWN0IHZpcnRpb19kZXZpY2UgKmRldik7Cj4gPiArICAgICBpbnQgKCpy
ZXN1bWVfbm9pcnEpKHN0cnVjdCB2aXJ0aW9fZGV2aWNlICpkZXYpOwo+ID4gICNlbmRpZgo+ID4g
IH07Cj4gPgo+ID4KPiA+IGJhc2UtY29tbWl0OiAzZjAxZTlmZWQ4NDU0ZGNkODk3MjcwMTZjM2U1
YjJmYmI4ZjhlNTBjCj4gPiAtLQo+ID4gMi4xNy4xCj4KCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0
dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4
Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
