Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from mail.linuxfoundation.org (mail.linuxfoundation.org [140.211.169.12])
	by mail.lfdr.de (Postfix) with ESMTPS id A3F767D708
	for <lists.virtualization@lfdr.de>; Thu,  1 Aug 2019 10:16:29 +0200 (CEST)
Received: from mail.linux-foundation.org (localhost [127.0.0.1])
	by mail.linuxfoundation.org (Postfix) with ESMTP id 7C0048A73;
	Thu,  1 Aug 2019 08:16:15 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@mail.linuxfoundation.org
Received: from smtp1.linuxfoundation.org (smtp1.linux-foundation.org
	[172.17.192.35])
	by mail.linuxfoundation.org (Postfix) with ESMTPS id EB22D8A45
	for <virtualization@lists.linux-foundation.org>;
	Thu,  1 Aug 2019 08:06:16 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
	by smtp1.linuxfoundation.org (Postfix) with ESMTPS id 9D03A832
	for <virtualization@lists.linux-foundation.org>;
	Thu,  1 Aug 2019 08:06:15 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx02.intmail.prod.int.phx2.redhat.com
	[10.5.11.12])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mx1.redhat.com (Postfix) with ESMTPS id DD28D4627A;
	Thu,  1 Aug 2019 08:06:14 +0000 (UTC)
Received: from colo-mx.corp.redhat.com
	(colo-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.21])
	by smtp.corp.redhat.com (Postfix) with ESMTPS id CD7AC60BE0;
	Thu,  1 Aug 2019 08:06:14 +0000 (UTC)
Received: from zmail21.collab.prod.int.phx2.redhat.com
	(zmail21.collab.prod.int.phx2.redhat.com [10.5.83.24])
	by colo-mx.corp.redhat.com (Postfix) with ESMTP id AA76541F40;
	Thu,  1 Aug 2019 08:06:14 +0000 (UTC)
Date: Thu, 1 Aug 2019 04:06:13 -0400 (EDT)
From: Jason Wang <jasowang@redhat.com>
To: "Michael S. Tsirkin" <mst@redhat.com>
Message-ID: <130386548.6222676.1564646773879.JavaMail.zimbra@redhat.com>
In-Reply-To: <20190731132438-mutt-send-email-mst@kernel.org>
References: <20190731084655.7024-1-jasowang@redhat.com>
	<20190731084655.7024-8-jasowang@redhat.com>
	<20190731132438-mutt-send-email-mst@kernel.org>
Subject: Re: [PATCH V2 7/9] vhost: do not use RCU to synchronize MMU
	notifier with worker
MIME-Version: 1.0
X-Originating-IP: [10.68.5.20, 10.4.195.18]
Thread-Topic: vhost: do not use RCU to synchronize MMU notifier with worker
Thread-Index: JuCf0A1UiJx/OyE0t9VYmt7ftZGITg==
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.12
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
	(mx1.redhat.com [10.5.110.29]);
	Thu, 01 Aug 2019 08:06:15 +0000 (UTC)
X-Spam-Status: No, score=-6.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_HI
	autolearn=ham version=3.3.1
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	smtp1.linux-foundation.org
Cc: kvm@vger.kernel.org, jgg@ziepe.ca, netdev@vger.kernel.org,
	linux-kernel@vger.kernel.org,
	virtualization@lists.linux-foundation.org, linux-mm@kvack.org,
	"Paul E. McKenney" <paulmck@linux.ibm.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.12
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>,
	<mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: virtualization-bounces@lists.linux-foundation.org
Errors-To: virtualization-bounces@lists.linux-foundation.org

T24gMjAxOS84LzEg5LiK5Y2IMjoyOSwgTWljaGFlbCBTLiBUc2lya2luIHdyb3RlOgo+IE9uIFdl
ZCwgSnVsIDMxLCAyMDE5IGF0IDA0OjQ2OjUzQU0gLTA0MDAsIEphc29uIFdhbmcgd3JvdGU6Cj4+
IFdlIHVzZWQgdG8gdXNlIFJDVSB0byBzeW5jaHJvbml6ZSBNTVUgbm90aWZpZXIgd2l0aCB3b3Jr
ZXIuIFRoaXMgbGVhZHMKPj4gY2FsbGluZyBzeW5jaHJvbml6ZV9yY3UoKSBpbiBpbnZhbGlkYXRl
X3JhbmdlX3N0YXJ0KCkuIEJ1dCBvbiBhIGJ1c3kKPj4gc3lzdGVtLCB0aGVyZSB3b3VsZCBiZSBt
YW55IGZhY3RvcnMgdGhhdCBtYXkgc2xvdyBkb3duIHRoZQo+PiBzeW5jaHJvbml6ZV9yY3UoKSB3
aGljaCBtYWtlcyBpdCB1bnN1aXRhYmxlIHRvIGJlIGNhbGxlZCBpbiBNTVUKPj4gbm90aWZpZXIu
Cj4+Cj4+IEEgc29sdXRpb24gaXMgU1JDVSBidXQgaXRzIG92ZXJoZWFkIGlzIG9idmlvdXMgd2l0
aCB0aGUgZXhwZW5zaXZlIGZ1bGwKPj4gbWVtb3J5IGJhcnJpZXIuIEFub3RoZXIgY2hvaWNlIGlz
IHRvIHVzZSBzZXFsb2NrLCBidXQgaXQgZG9lc24ndAo+PiBwcm92aWRlIGEgc3luY2hyb25pemF0
aW9uIG1ldGhvZCBiZXR3ZWVuIHJlYWRlcnMgYW5kIHdyaXRlcnMuIFRoZSBsYXN0Cj4+IGNob2lj
ZSBpcyB0byB1c2UgdnEgbXV0ZXgsIGJ1dCBpdCBuZWVkIHRvIGRlYWwgd2l0aCB0aGUgd29yc3Qg
Y2FzZQo+PiB0aGF0IE1NVSBub3RpZmllciBtdXN0IGJlIGJsb2NrZWQgYW5kIHdhaXQgZm9yIHRo
ZSBmaW5pc2ggb2Ygc3dhcCBpbi4KPj4KPj4gU28gdGhpcyBwYXRjaCBzd2l0Y2hlcyB1c2UgYSBj
b3VudGVyIHRvIHRyYWNrIHdoZXRoZXIgb3Igbm90IHRoZSBtYXAKPj4gd2FzIHVzZWQuIFRoZSBj
b3VudGVyIHdhcyBpbmNyZWFzZWQgd2hlbiB2cSB0cnkgdG8gc3RhcnQgb3IgZmluaXNoCj4+IHVz
ZXMgdGhlIG1hcC4gVGhpcyBtZWFucywgd2hlbiBpdCB3YXMgZXZlbiwgd2UncmUgc3VyZSB0aGVy
ZSdzIG5vCj4+IHJlYWRlcnMgYW5kIE1NVSBub3RpZmllciBpcyBzeW5jaHJvbml6ZWQuIFdoZW4g
aXQgd2FzIG9kZCwgaXQgbWVhbnMKPj4gdGhlcmUncyBhIHJlYWRlciB3ZSBuZWVkIHRvIHdhaXQg
aXQgdG8gYmUgZXZlbiBhZ2FpbiB0aGVuIHdlIGFyZQo+PiBzeW5jaHJvbml6ZWQuIFRvIGF2b2lk
IGZ1bGwgbWVtb3J5IGJhcnJpZXIsIHN0b3JlX3JlbGVhc2UgKwo+PiBsb2FkX2FjcXVpcmUgb24g
dGhlIGNvdW50ZXIgaXMgdXNlZC4KPgo+IFVuZm9ydHVuYXRlbHkgdGhpcyBuZWVkcyBhIGxvdCBv
ZiByZXZpZXcgYW5kIHRlc3RpbmcsIHNvIHRoaXMgY2FuJ3QgbWFrZQo+IHJjMiwgYW5kIEkgZG9u
J3QgdGhpbmsgdGhpcyBpcyB0aGUga2luZCBvZiBwYXRjaCBJIGNhbiBtZXJnZSBhZnRlciByYzMu
Cj4gU3VidGxlIG1lbW9yeSBiYXJyaWVyIHRyaWNrcyBsaWtlIHRoaXMgY2FuIGludHJvZHVjZSBu
ZXcgYnVncyB3aGlsZSB0aGV5Cj4gYXJlIGZpeGluZyBvbGQgb25lcy4KCkkgYWRtaXQgdGhlIHBh
dGNoIGlzIHRyaWNreS4gU29tZSBxdWVzdGlvbnM6CgotIERvIHdlIG11c3QgYWRkcmVzcyB0aGUg
Y2FzZSBvZiBlLmcgc3dhcCBpbj8gSWYgbm90LCBhIHNpbXBsZQogIHZob3N0X3dvcmtfZmx1c2go
KSBpbnN0ZWFkIG9mIHN5bmNocm9uaXplX3JjdSgpIG1heSB3b3JrLgotIEhhdmluZyBzb21lIGhh
cmQgdGhvdWdodCwgSSB0aGluayB3ZSBjYW4gdXNlIHNlcWxvY2ssIGl0IGxvb2tzCiAgdG8gbWUg
c21wX3dtYigpIGlzIGluIHdyaXRlX3NlZ2NvdW50X2JlZ2luKCkgaXMgc3VmZmljaWVudCwgd2Ug
ZG9uJ3QKICBjYXJlIHZxLT5tYXAgcmVhZCBiZWZvcmUgc21wX3dtYigpLCBhbmQgZm9yIHRoZSBv
dGhlciB3ZSBhbGwgaGF2ZQogIGdvb2QgZGF0YSBkZXZlbmRlbmN5IHNvIHNtcF93bWIoKSBpbiB0
aGUgd3JpdGVfc2VxYmVnaW5fZW5kKCkgaXMKICBzdWZmaWNpZW50LgoKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvdmhvc3Qvdmhvc3QuYyBiL2RyaXZlcnMvdmhvc3Qvdmhvc3QuYwppbmRleCBkYjJjODFj
YjFlOTAuLjZkOTUwMTMwMzI1OCAxMDA2NDQKLS0tIGEvZHJpdmVycy92aG9zdC92aG9zdC5jCisr
KyBiL2RyaXZlcnMvdmhvc3Qvdmhvc3QuYwpAQCAtMzYzLDM5ICszNjMsMjkgQEAgc3RhdGljIGJv
b2wgdmhvc3RfbWFwX3JhbmdlX292ZXJsYXAoc3RydWN0IHZob3N0X3VhZGRyICp1YWRkciwKIAog
c3RhdGljIHZvaWQgaW5saW5lIHZob3N0X3ZxX2FjY2Vzc19tYXBfYmVnaW4oc3RydWN0IHZob3N0
X3ZpcnRxdWV1ZSAqdnEpCiB7Ci0JaW50IHJlZiA9IFJFQURfT05DRSh2cS0+cmVmKTsKLQotCXNt
cF9zdG9yZV9yZWxlYXNlKCZ2cS0+cmVmLCByZWYgKyAxKTsKLQkvKiBNYWtlIHN1cmUgcmVmIGNv
dW50ZXIgaXMgdmlzaWJsZSBiZWZvcmUgYWNjZXNzaW5nIHRoZSBtYXAgKi8KLQlzbXBfbG9hZF9h
Y3F1aXJlKCZ2cS0+cmVmKTsKKwl3cml0ZV9zZXFjb3VudF9iZWdpbigmdnEtPnNlcSk7CiB9CiAK
IHN0YXRpYyB2b2lkIGlubGluZSB2aG9zdF92cV9hY2Nlc3NfbWFwX2VuZChzdHJ1Y3Qgdmhvc3Rf
dmlydHF1ZXVlICp2cSkKIHsKLQlpbnQgcmVmID0gUkVBRF9PTkNFKHZxLT5yZWYpOwotCi0JLyog
TWFrZSBzdXJlIHZxIGFjY2VzcyBpcyBkb25lIGJlZm9yZSBpbmNyZWFzaW5nIHJlZiBjb3VudGVy
ICovCi0Jc21wX3N0b3JlX3JlbGVhc2UoJnZxLT5yZWYsIHJlZiArIDEpOworCXdyaXRlX3NlcWNv
dW50X2VuZCgmdnEtPnNlcSk7CiB9CiAKIHN0YXRpYyB2b2lkIGlubGluZSB2aG9zdF92cV9zeW5j
X2FjY2VzcyhzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSkKIHsKLQlpbnQgcmVmOworCXVuc2ln
bmVkIGludCByZXQ7CiAKIAkvKiBNYWtlIHN1cmUgbWFwIGNoYW5nZSB3YXMgZG9uZSBiZWZvcmUg
Y2hlY2tpbmcgcmVmIGNvdW50ZXIgKi8KIAlzbXBfbWIoKTsKLQotCXJlZiA9IFJFQURfT05DRSh2
cS0+cmVmKTsKLQlpZiAocmVmICYgMHgxKSB7Ci0JCS8qIFdoZW4gcmVmIGNoYW5nZSwgd2UgYXJl
IHN1cmUgbm8gcmVhZGVyIGNhbiBzZWUKKwlyZXQgPSByYXdfcmVhZF9zZXFjb3VudCgmdnEtPnNl
cSk7CisJaWYgKHJldCAmIDB4MSkgeworCQkvKiBXaGVuIHNlcSBjaGFuZ2VzLCB3ZSBhcmUgc3Vy
ZSBubyByZWFkZXIgY2FuIHNlZQogCQkgKiBwcmV2aW91cyBtYXAgKi8KLQkJd2hpbGUgKFJFQURf
T05DRSh2cS0+cmVmKSA9PSByZWYpIHsKLQkJCXNldF9jdXJyZW50X3N0YXRlKFRBU0tfUlVOTklO
Ryk7CisJCXdoaWxlIChyYXdfcmVhZF9zZXFjb3VudCgmdnEtPnNlcSkgPT0gcmV0KQogCQkJc2No
ZWR1bGUoKTsKLQkJfQogCX0KLQkvKiBNYWtlIHN1cmUgcmVmIGNvdW50ZXIgd2FzIGNoZWNrZWQg
YmVmb3JlIGFueSBvdGhlcgotCSAqIG9wZXJhdGlvbnMgdGhhdCB3YXMgZGVuZSBvbiBtYXAuICov
CisJLyogTWFrZSBzdXJlIHNlcSB3YXMgY2hlY2tlZCBiZWZvcmUgYW55IG90aGVyIG9wZXJhdGlv
bnMgdGhhdAorCSAqIHdhcyBkZW5lIG9uIG1hcC4gKi8KIAlzbXBfbWIoKTsKIH0KIApAQCAtNjkx
LDcgKzY4MSw3IEBAIHZvaWQgdmhvc3RfZGV2X2luaXQoc3RydWN0IHZob3N0X2RldiAqZGV2LAog
CQl2cS0+aW5kaXJlY3QgPSBOVUxMOwogCQl2cS0+aGVhZHMgPSBOVUxMOwogCQl2cS0+ZGV2ID0g
ZGV2OwotCQl2cS0+cmVmID0gMDsKKwkJc2VxY291bnRfaW5pdCgmdnEtPnNlcSk7CiAJCW11dGV4
X2luaXQoJnZxLT5tdXRleCk7CiAJCXNwaW5fbG9ja19pbml0KCZ2cS0+bW11X2xvY2spOwogCQl2
aG9zdF92cV9yZXNldChkZXYsIHZxKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmhvc3Qvdmhvc3Qu
aCBiL2RyaXZlcnMvdmhvc3Qvdmhvc3QuaAppbmRleCAzZDEwZGEwYWU1MTEuLjFhNzA1ZTE4MWE4
NCAxMDA2NDQKLS0tIGEvZHJpdmVycy92aG9zdC92aG9zdC5oCisrKyBiL2RyaXZlcnMvdmhvc3Qv
dmhvc3QuaApAQCAtMTI1LDcgKzEyNSw3IEBAIHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgewogCSAq
LwogCXN0cnVjdCB2aG9zdF91YWRkciB1YWRkcnNbVkhPU1RfTlVNX0FERFJTXTsKICNlbmRpZgot
CWludCByZWY7CisJc2VxY291bnRfdCBzZXE7CiAJY29uc3Qgc3RydWN0IHZob3N0X3VtZW1fbm9k
ZSAqbWV0YV9pb3RsYltWSE9TVF9OVU1fQUREUlNdOwogCiAJc3RydWN0IGZpbGUgKmtpY2s7Ci0t
IAoyLjE4LjEKCj4KPgo+Cj4KPgo+Pgo+PiBDb25zaWRlciB0aGUgcmVhZCBjcml0aWNhbCBzZWN0
aW9uIGlzIHByZXR0eSBzbWFsbCB0aGUgc3luY2hyb25pemF0aW9uCj4+IHNob3VsZCBiZSBkb25l
IHZlcnkgZmFzdC4KPj4KPj4gTm90ZSB0aGUgcGF0Y2ggbGVhZCBhYm91dCAzJSBQUFMgZHJvcHBp
bmcuCj4KPiBTb3JyeSB3aGF0IGRvIHlvdSBtZWFuIGJ5IHRoaXMgbGFzdCBzZW50ZW5jZT8gVGhp
cyBkZWdyYWRlcyBwZXJmb3JtYW5jZQo+IGNvbXBhcmVkIHRvIHdoYXQ/CgpDb21wYXJlIHRvIHdp
dGhvdXQgdGhpcyBwYXRjaC4KCj4KPj4KPj4gUmVwb3J0ZWQtYnk6IE1pY2hhZWwgUy4gVHNpcmtp
biA8bXN0QHJlZGhhdC5jb20+Cj4+IEZpeGVzOiA3ZjQ2NjAzMmRjOWUgKCJ2aG9zdDogYWNjZXNz
IHZxIG1ldGFkYXRhIHRocm91Z2gga2VybmVsIHZpcnR1YWwgYWRkcmVzcyIpCj4+IFNpZ25lZC1v
ZmYtYnk6IEphc29uIFdhbmcgPGphc293YW5nQHJlZGhhdC5jb20+Cj4+IC0tLQo+PiAgZHJpdmVy
cy92aG9zdC92aG9zdC5jIHwgMTQ1ICsrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0t
LS0tLS0tLQo+PiAgZHJpdmVycy92aG9zdC92aG9zdC5oIHwgICA3ICstCj4+ICAyIGZpbGVzIGNo
YW5nZWQsIDk0IGluc2VydGlvbnMoKyksIDU4IGRlbGV0aW9ucygtKQo+Pgo+PiBkaWZmIC0tZ2l0
IGEvZHJpdmVycy92aG9zdC92aG9zdC5jIGIvZHJpdmVycy92aG9zdC92aG9zdC5jCj4+IGluZGV4
IGNmYzExZjllZDljOS4uZGIyYzgxY2IxZTkwIDEwMDY0NAo+PiAtLS0gYS9kcml2ZXJzL3Zob3N0
L3Zob3N0LmMKPj4gKysrIGIvZHJpdmVycy92aG9zdC92aG9zdC5jCj4+IEBAIC0zMjQsMTcgKzMy
NCwxNiBAQCBzdGF0aWMgdm9pZCB2aG9zdF91bmluaXRfdnFfbWFwcyhzdHJ1Y3Qgdmhvc3Rfdmly
dHF1ZXVlICp2cSkKPj4gIAo+PiAgCXNwaW5fbG9jaygmdnEtPm1tdV9sb2NrKTsKPj4gIAlmb3Ig
KGkgPSAwOyBpIDwgVkhPU1RfTlVNX0FERFJTOyBpKyspIHsKPj4gLQkJbWFwW2ldID0gcmN1X2Rl
cmVmZXJlbmNlX3Byb3RlY3RlZCh2cS0+bWFwc1tpXSwKPj4gLQkJCQkgIGxvY2tkZXBfaXNfaGVs
ZCgmdnEtPm1tdV9sb2NrKSk7Cj4+ICsJCW1hcFtpXSA9IHZxLT5tYXBzW2ldOwo+PiAgCQlpZiAo
bWFwW2ldKSB7Cj4+ICAJCQl2aG9zdF9zZXRfbWFwX2RpcnR5KHZxLCBtYXBbaV0sIGkpOwo+PiAt
CQkJcmN1X2Fzc2lnbl9wb2ludGVyKHZxLT5tYXBzW2ldLCBOVUxMKTsKPj4gKwkJCXZxLT5tYXBz
W2ldID0gTlVMTDsKPj4gIAkJfQo+PiAgCX0KPj4gIAlzcGluX3VubG9jaygmdnEtPm1tdV9sb2Nr
KTsKPj4gIAo+PiAtCS8qIE5vIG5lZWQgZm9yIHN5bmNocm9uaXplX3JjdSgpIG9yIGtmcmVlX3Jj
dSgpIHNpbmNlIHdlIGFyZQo+PiAtCSAqIHNlcmlhbGl6ZWQgd2l0aCBtZW1vcnkgYWNjZXNzb3Jz
IChlLmcgdnEgbXV0ZXggaGVsZCkuCj4+ICsJLyogTm8gbmVlZCBmb3Igc3luY2hyb25pemF0aW9u
IHNpbmNlIHdlIGFyZSBzZXJpYWxpemVkIHdpdGgKPj4gKwkgKiBtZW1vcnkgYWNjZXNzb3JzIChl
LmcgdnEgbXV0ZXggaGVsZCkuCj4+ICAJICovCj4+ICAKPj4gIAlmb3IgKGkgPSAwOyBpIDwgVkhP
U1RfTlVNX0FERFJTOyBpKyspCj4+IEBAIC0zNjIsNiArMzYxLDQ0IEBAIHN0YXRpYyBib29sIHZo
b3N0X21hcF9yYW5nZV9vdmVybGFwKHN0cnVjdCB2aG9zdF91YWRkciAqdWFkZHIsCj4+ICAJcmV0
dXJuICEoZW5kIDwgdWFkZHItPnVhZGRyIHx8IHN0YXJ0ID4gdWFkZHItPnVhZGRyIC0gMSArIHVh
ZGRyLT5zaXplKTsKPj4gIH0KPj4gIAo+PiArc3RhdGljIHZvaWQgaW5saW5lIHZob3N0X3ZxX2Fj
Y2Vzc19tYXBfYmVnaW4oc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEpCj4+ICt7Cj4+ICsJaW50
IHJlZiA9IFJFQURfT05DRSh2cS0+cmVmKTsKPj4gKwo+PiArCXNtcF9zdG9yZV9yZWxlYXNlKCZ2
cS0+cmVmLCByZWYgKyAxKTsKPj4gKwkvKiBNYWtlIHN1cmUgcmVmIGNvdW50ZXIgaXMgdmlzaWJs
ZSBiZWZvcmUgYWNjZXNzaW5nIHRoZSBtYXAgKi8KPj4gKwlzbXBfbG9hZF9hY3F1aXJlKCZ2cS0+
cmVmKTsKPgo+IFRoZSBtYXAgYWNjZXNzIGlzIGFmdGVyIHRoaXMgc2VxdWVuY2UsIGNvcnJlY3Q/
CgpZZXMuCgo+Cj4gSnVzdCBnb2luZyBieSB0aGUgcnVsZXMgaW4gRG9jdW1lbnRhdGlvbi9tZW1v
cnktYmFycmllcnMudHh0LAo+IEkgdGhpbmsgdGhhdCB0aGlzIHBhaXIgd2lsbCBub3Qgb3JkZXIg
Zm9sbG93aW5nIGFjY2Vzc2VzIHdpdGggcmVmIHN0b3JlLgo+Cj4gRG9jdW1lbnRhdGlvbi9tZW1v
cnktYmFycmllcnMudHh0IHNheXM6Cj4KPgo+ICsgICAgIEluIGFkZGl0aW9uLCBhIFJFTEVBU0Ur
QUNRVUlSRQo+ICsgICAgIHBhaXIgaXMgLW5vdC0gZ3VhcmFudGVlZCB0byBhY3QgYXMgYSBmdWxs
IG1lbW9yeSBiYXJyaWVyLgo+Cj4KPgo+IFRoZSBndWFyYW50ZWUgdGhhdCBpcyBtYWRlIGlzIHRo
aXM6Cj4gCWFmdGVyCj4gICAgICBhbiBBQ1FVSVJFIG9uIGEgZ2l2ZW4gdmFyaWFibGUsIGFsbCBt
ZW1vcnkgYWNjZXNzZXMgcHJlY2VkaW5nIGFueSBwcmlvcgo+ICAgICAgUkVMRUFTRSBvbiB0aGF0
IHNhbWUgdmFyaWFibGUgYXJlIGd1YXJhbnRlZWQgdG8gYmUgdmlzaWJsZS4KClllcywgYnV0IGl0
J3Mgbm90IGNsZWFyIGFib3V0IHRoZSBvcmRlciBvZiBBQ1FVSVJFIHRoZSBzYW1lIGxvY2F0aW9u
Cm9mIHByZXZpb3VzIFJFTEVBU0UuIEFuZCBpdCBvbmx5IGhhcyBhIGV4YW1wbGUgbGlrZToKCiIK
CSpBID0gYTsKCVJFTEVBU0UgTQoJQUNRVUlSRSBOCgkqQiA9IGI7Cgpjb3VsZCBvY2N1ciBhczoK
CglBQ1FVSVJFIE4sIFNUT1JFICpCLCBTVE9SRSAqQSwgUkVMRUFTRSBNCiIKCkJ1dCBpdCBkb2Vz
bid0IGV4cGxhaW4gd2hhdCBoYXBwZW4gd2hlbgoKKkEgPSBhClJFTEVBU0UgTQpBQ1FVSVJFIE0K
KkIgPSBiOwoKQW5kIHRvb2xzL21lbW9yeS1tb2RlbC9Eb2N1bWVudGF0aW9uIHNhaWQKCiIKRmly
c3QsIHdoZW4gYSBsb2NrLWFjcXVpcmUgcmVhZHMgZnJvbSBhIGxvY2stcmVsZWFzZSwgdGhlIExL
TU0KcmVxdWlyZXMgdGhhdCBldmVyeSBpbnN0cnVjdGlvbiBwby1iZWZvcmUgdGhlIGxvY2stcmVs
ZWFzZSBtdXN0CmV4ZWN1dGUgYmVmb3JlIGFueSBpbnN0cnVjdGlvbiBwby1hZnRlciB0aGUgbG9j
ay1hY3F1aXJlLgoiCgpJcyB0aGlzIGEgaGludCB0aGF0IEkgd2FzIGNvcnJlY3Q/Cgo+Cj4KPiBB
bmQgaWYgd2UgYWxzbyBoYWQgdGhlIHJldmVyc2UgcnVsZSB3ZSdkIGVuZCB1cCB3aXRoIGEgZnVs
bCBiYXJyaWVyLAo+IHdvbid0IHdlPwo+Cj4gQ2MgUGF1bCBpbiBjYXNlIEkgbWlzc2VkIHNvbWV0
aGluZyBoZXJlLiBBbmQgaWYgSSdtIHJpZ2h0LAo+IG1heWJlIHdlIHNob3VsZCBjYWxsIHRoaXMg
b3V0LCBhZGRpbmcKPgo+IAkiVGhlIG9wcG9zaXRlIGlzIG5vdCB0cnVlOiBhIHByaW9yIFJFTEVB
U0UgaXMgbm90Cj4gCSBndWFyYW50ZWVkIHRvIGJlIHZpc2libGUgYmVmb3JlIG1lbW9yeSBhY2Nl
c3NlcyBmb2xsb3dpbmcKPiAJIHRoZSBzdWJzZXF1ZW50IEFDUVVJUkUiLgoKVGhhdCBraW5kcyBv
ZiB2aW9sYXRlcyB0aGUgUkVMRUFTRT8KCiIKICAgICBUaGlzIGFsc28gYWN0cyBhcyBhIG9uZS13
YXkgcGVybWVhYmxlIGJhcnJpZXIuICBJdCBndWFyYW50ZWVzIHRoYXQgYWxsCiAgICAgbWVtb3J5
IG9wZXJhdGlvbnMgYmVmb3JlIHRoZSBSRUxFQVNFIG9wZXJhdGlvbiB3aWxsIGFwcGVhciB0byBo
YXBwZW4KICAgICBiZWZvcmUgdGhlIFJFTEVBU0Ugb3BlcmF0aW9uIHdpdGggcmVzcGVjdCB0byB0
aGUgb3RoZXIgY29tcG9uZW50cyBvZiB0aGUKIgoKPgo+Cj4KPj4gK30KPj4gKwo+PiArc3RhdGlj
IHZvaWQgaW5saW5lIHZob3N0X3ZxX2FjY2Vzc19tYXBfZW5kKHN0cnVjdCB2aG9zdF92aXJ0cXVl
dWUgKnZxKQo+PiArewo+PiArCWludCByZWYgPSBSRUFEX09OQ0UodnEtPnJlZik7Cj4+ICsKPj4g
KwkvKiBNYWtlIHN1cmUgdnEgYWNjZXNzIGlzIGRvbmUgYmVmb3JlIGluY3JlYXNpbmcgcmVmIGNv
dW50ZXIgKi8KPj4gKwlzbXBfc3RvcmVfcmVsZWFzZSgmdnEtPnJlZiwgcmVmICsgMSk7Cj4+ICt9
Cj4+ICsKPj4gK3N0YXRpYyB2b2lkIGlubGluZSB2aG9zdF92cV9zeW5jX2FjY2VzcyhzdHJ1Y3Qg
dmhvc3RfdmlydHF1ZXVlICp2cSkKPj4gK3sKPj4gKwlpbnQgcmVmOwo+PiArCj4+ICsJLyogTWFr
ZSBzdXJlIG1hcCBjaGFuZ2Ugd2FzIGRvbmUgYmVmb3JlIGNoZWNraW5nIHJlZiBjb3VudGVyICov
Cj4+ICsJc21wX21iKCk7Cj4+ICsKPj4gKwlyZWYgPSBSRUFEX09OQ0UodnEtPnJlZik7Cj4+ICsJ
aWYgKHJlZiAmIDB4MSkgewo+Cj4gUGxlYXNlIGRvY3VtZW50IHRoZSBldmVuL29kZCB0cmljayBo
ZXJlIHRvbywgbm90IGp1c3QgaW4gdGhlIGNvbW1pdCBsb2cuCj4KCk9rLgoKPj4gKwkJLyogV2hl
biByZWYgY2hhbmdlLAo+Cj4gY2hhbmdlcwo+Cj4+IHdlIGFyZSBzdXJlIG5vIHJlYWRlciBjYW4g
c2VlCj4+ICsJCSAqIHByZXZpb3VzIG1hcCAqLwo+PiArCQl3aGlsZSAoUkVBRF9PTkNFKHZxLT5y
ZWYpID09IHJlZikgewo+Cj4KPiB3aGF0IGlzIHRoZSBiZWxvdyBsaW5lIGluIGFpZCBvZj8KPgo+
PiArCQkJc2V0X2N1cnJlbnRfc3RhdGUoVEFTS19SVU5OSU5HKTsKPj4gKwkJCXNjaGVkdWxlKCk7
Cj4KPiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmVlZF9yZXNjaGVkKCkpCj4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZSgpOwo+Cj4gPwoKWWVzLCBiZXR0ZXIu
Cgo+Cj4+ICsJCX0KPgo+IE9uIGFuIGludGVycnVwdGlibGUga2VybmVsLCB0aGVyZSdzIGEgcmlz
ayBoZXJlIGlzIHRoYXQKPiBhIHRhc2sgZ290IHByZWVtcHRlZCB3aXRoIGFuIG9kZCByZWYuCj4g
U28gSSBzdXNwZWN0IHdlJ2xsIGhhdmUgdG8gZGlzYWJsZSBwcmVlbXB0aW9uIHdoZW4gd2UKPiBt
YWtlIHJlZiBvZGQuCgpJJ20gbm90IHN1cmUgSSBnZXQsIGlmIHRoZSBvZGQgaXMgbm90IHRoZSBv
cmlnaW5hbCB2YWx1ZSB3ZSByZWFkLAp3ZSdyZSBzdXJlIGl0IHdvbid0IHJlYWQgdGhlIG5ldyBt
YXAgaGVyZSBJIGJlbGlldmUuCgo+Cj4KPj4gKwl9Cj4+ICsJLyogTWFrZSBzdXJlIHJlZiBjb3Vu
dGVyIHdhcyBjaGVja2VkIGJlZm9yZSBhbnkgb3RoZXIKPj4gKwkgKiBvcGVyYXRpb25zIHRoYXQg
d2FzIGRlbmUgb24gbWFwLiAqLwo+Cj4gd2FzIGRlbmUgLT4gd2VyZSBkb25lPwo+CgpZZXMuCgo+
PiArCXNtcF9tYigpOwo+PiArfQo+PiArCj4+ICBzdGF0aWMgdm9pZCB2aG9zdF9pbnZhbGlkYXRl
X3ZxX3N0YXJ0KHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxLAo+PiAgCQkJCSAgICAgIGludCBp
bmRleCwKPj4gIAkJCQkgICAgICB1bnNpZ25lZCBsb25nIHN0YXJ0LAo+PiBAQCAtMzc2LDE2ICs0
MTMsMTUgQEAgc3RhdGljIHZvaWQgdmhvc3RfaW52YWxpZGF0ZV92cV9zdGFydChzdHJ1Y3Qgdmhv
c3RfdmlydHF1ZXVlICp2cSwKPj4gIAlzcGluX2xvY2soJnZxLT5tbXVfbG9jayk7Cj4+ICAJKyt2
cS0+aW52YWxpZGF0ZV9jb3VudDsKPj4gIAo+PiAtCW1hcCA9IHJjdV9kZXJlZmVyZW5jZV9wcm90
ZWN0ZWQodnEtPm1hcHNbaW5kZXhdLAo+PiAtCQkJCQlsb2NrZGVwX2lzX2hlbGQoJnZxLT5tbXVf
bG9jaykpOwo+PiArCW1hcCA9IHZxLT5tYXBzW2luZGV4XTsKPj4gIAlpZiAobWFwKSB7Cj4+ICAJ
CXZob3N0X3NldF9tYXBfZGlydHkodnEsIG1hcCwgaW5kZXgpOwo+PiAtCQlyY3VfYXNzaWduX3Bv
aW50ZXIodnEtPm1hcHNbaW5kZXhdLCBOVUxMKTsKPj4gKwkJdnEtPm1hcHNbaW5kZXhdID0gTlVM
TDsKPj4gIAl9Cj4+ICAJc3Bpbl91bmxvY2soJnZxLT5tbXVfbG9jayk7Cj4+ICAKPj4gIAlpZiAo
bWFwKSB7Cj4+IC0JCXN5bmNocm9uaXplX3JjdSgpOwo+PiArCQl2aG9zdF92cV9zeW5jX2FjY2Vz
cyh2cSk7Cj4+ICAJCXZob3N0X21hcF91bnByZWZldGNoKG1hcCk7Cj4+ICAJfQo+PiAgfQo+PiBA
QCAtNDU3LDcgKzQ5Myw3IEBAIHN0YXRpYyB2b2lkIHZob3N0X2luaXRfbWFwcyhzdHJ1Y3Qgdmhv
c3RfZGV2ICpkZXYpCj4+ICAJZm9yIChpID0gMDsgaSA8IGRldi0+bnZxczsgKytpKSB7Cj4+ICAJ
CXZxID0gZGV2LT52cXNbaV07Cj4+ICAJCWZvciAoaiA9IDA7IGogPCBWSE9TVF9OVU1fQUREUlM7
IGorKykKPj4gLQkJCVJDVV9JTklUX1BPSU5URVIodnEtPm1hcHNbal0sIE5VTEwpOwo+PiArCQkJ
dnEtPm1hcHNbal0gPSBOVUxMOwo+PiAgCX0KPj4gIH0KPj4gICNlbmRpZgo+PiBAQCAtNjU1LDYg
KzY5MSw3IEBAIHZvaWQgdmhvc3RfZGV2X2luaXQoc3RydWN0IHZob3N0X2RldiAqZGV2LAo+PiAg
CQl2cS0+aW5kaXJlY3QgPSBOVUxMOwo+PiAgCQl2cS0+aGVhZHMgPSBOVUxMOwo+PiAgCQl2cS0+
ZGV2ID0gZGV2Owo+PiArCQl2cS0+cmVmID0gMDsKPj4gIAkJbXV0ZXhfaW5pdCgmdnEtPm11dGV4
KTsKPj4gIAkJc3Bpbl9sb2NrX2luaXQoJnZxLT5tbXVfbG9jayk7Cj4+ICAJCXZob3N0X3ZxX3Jl
c2V0KGRldiwgdnEpOwo+PiBAQCAtOTIxLDcgKzk1OCw3IEBAIHN0YXRpYyBpbnQgdmhvc3RfbWFw
X3ByZWZldGNoKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxLAo+PiAgCW1hcC0+bnBhZ2VzID0g
bnBhZ2VzOwo+PiAgCW1hcC0+cGFnZXMgPSBwYWdlczsKPj4gIAo+PiAtCXJjdV9hc3NpZ25fcG9p
bnRlcih2cS0+bWFwc1tpbmRleF0sIG1hcCk7Cj4+ICsJdnEtPm1hcHNbaW5kZXhdID0gbWFwOwo+
PiAgCS8qIE5vIG5lZWQgZm9yIGEgc3luY2hyb25pemVfcmN1KCkuIFRoaXMgZnVuY3Rpb24gc2hv
dWxkIGJlCj4+ICAJICogY2FsbGVkIGJ5IGRldi0+d29ya2VyIHNvIHdlIGFyZSBzZXJpYWxpemVk
IHdpdGggYWxsCj4+ICAJICogcmVhZGVycy4KPj4gQEAgLTEyMTYsMTggKzEyNTMsMTggQEAgc3Rh
dGljIGlubGluZSBpbnQgdmhvc3RfcHV0X2F2YWlsX2V2ZW50KHN0cnVjdCB2aG9zdF92aXJ0cXVl
dWUgKnZxKQo+PiAgCXN0cnVjdCB2cmluZ191c2VkICp1c2VkOwo+PiAgCj4+ICAJaWYgKCF2cS0+
aW90bGIpIHsKPj4gLQkJcmN1X3JlYWRfbG9jaygpOwo+PiArCQl2aG9zdF92cV9hY2Nlc3NfbWFw
X2JlZ2luKHZxKTsKPj4gIAo+PiAtCQltYXAgPSByY3VfZGVyZWZlcmVuY2UodnEtPm1hcHNbVkhP
U1RfQUREUl9VU0VEXSk7Cj4+ICsJCW1hcCA9IHZxLT5tYXBzW1ZIT1NUX0FERFJfVVNFRF07Cj4+
ICAJCWlmIChsaWtlbHkobWFwKSkgewo+PiAgCQkJdXNlZCA9IG1hcC0+YWRkcjsKPj4gIAkJCSoo
KF9fdmlydGlvMTYgKikmdXNlZC0+cmluZ1t2cS0+bnVtXSkgPQo+PiAgCQkJCWNwdV90b192aG9z
dDE2KHZxLCB2cS0+YXZhaWxfaWR4KTsKPj4gLQkJCXJjdV9yZWFkX3VubG9jaygpOwo+PiArCQkJ
dmhvc3RfdnFfYWNjZXNzX21hcF9lbmQodnEpOwo+PiAgCQkJcmV0dXJuIDA7Cj4+ICAJCX0KPj4g
IAo+PiAtCQlyY3VfcmVhZF91bmxvY2soKTsKPj4gKwkJdmhvc3RfdnFfYWNjZXNzX21hcF9lbmQo
dnEpOwo+PiAgCX0KPj4gICNlbmRpZgo+PiAgCj4+IEBAIC0xMjQ1LDE4ICsxMjgyLDE4IEBAIHN0
YXRpYyBpbmxpbmUgaW50IHZob3N0X3B1dF91c2VkKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZx
LAo+PiAgCXNpemVfdCBzaXplOwo+PiAgCj4+ICAJaWYgKCF2cS0+aW90bGIpIHsKPj4gLQkJcmN1
X3JlYWRfbG9jaygpOwo+PiArCQl2aG9zdF92cV9hY2Nlc3NfbWFwX2JlZ2luKHZxKTsKPj4gIAo+
PiAtCQltYXAgPSByY3VfZGVyZWZlcmVuY2UodnEtPm1hcHNbVkhPU1RfQUREUl9VU0VEXSk7Cj4+
ICsJCW1hcCA9IHZxLT5tYXBzW1ZIT1NUX0FERFJfVVNFRF07Cj4+ICAJCWlmIChsaWtlbHkobWFw
KSkgewo+PiAgCQkJdXNlZCA9IG1hcC0+YWRkcjsKPj4gIAkJCXNpemUgPSBjb3VudCAqIHNpemVv
ZigqaGVhZCk7Cj4+ICAJCQltZW1jcHkodXNlZC0+cmluZyArIGlkeCwgaGVhZCwgc2l6ZSk7Cj4+
IC0JCQlyY3VfcmVhZF91bmxvY2soKTsKPj4gKwkJCXZob3N0X3ZxX2FjY2Vzc19tYXBfZW5kKHZx
KTsKPj4gIAkJCXJldHVybiAwOwo+PiAgCQl9Cj4+ICAKPj4gLQkJcmN1X3JlYWRfdW5sb2NrKCk7
Cj4+ICsJCXZob3N0X3ZxX2FjY2Vzc19tYXBfZW5kKHZxKTsKPj4gIAl9Cj4+ICAjZW5kaWYKPj4g
IAo+PiBAQCAtMTI3MiwxNyArMTMwOSwxNyBAQCBzdGF0aWMgaW5saW5lIGludCB2aG9zdF9wdXRf
dXNlZF9mbGFncyhzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSkKPj4gIAlzdHJ1Y3QgdnJpbmdf
dXNlZCAqdXNlZDsKPj4gIAo+PiAgCWlmICghdnEtPmlvdGxiKSB7Cj4+IC0JCXJjdV9yZWFkX2xv
Y2soKTsKPj4gKwkJdmhvc3RfdnFfYWNjZXNzX21hcF9iZWdpbih2cSk7Cj4+ICAKPj4gLQkJbWFw
ID0gcmN1X2RlcmVmZXJlbmNlKHZxLT5tYXBzW1ZIT1NUX0FERFJfVVNFRF0pOwo+PiArCQltYXAg
PSB2cS0+bWFwc1tWSE9TVF9BRERSX1VTRURdOwo+PiAgCQlpZiAobGlrZWx5KG1hcCkpIHsKPj4g
IAkJCXVzZWQgPSBtYXAtPmFkZHI7Cj4+ICAJCQl1c2VkLT5mbGFncyA9IGNwdV90b192aG9zdDE2
KHZxLCB2cS0+dXNlZF9mbGFncyk7Cj4+IC0JCQlyY3VfcmVhZF91bmxvY2soKTsKPj4gKwkJCXZo
b3N0X3ZxX2FjY2Vzc19tYXBfZW5kKHZxKTsKPj4gIAkJCXJldHVybiAwOwo+PiAgCQl9Cj4+ICAK
Pj4gLQkJcmN1X3JlYWRfdW5sb2NrKCk7Cj4+ICsJCXZob3N0X3ZxX2FjY2Vzc19tYXBfZW5kKHZx
KTsKPj4gIAl9Cj4+ICAjZW5kaWYKPj4gIAo+PiBAQCAtMTI5OCwxNyArMTMzNSwxNyBAQCBzdGF0
aWMgaW5saW5lIGludCB2aG9zdF9wdXRfdXNlZF9pZHgoc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAq
dnEpCj4+ICAJc3RydWN0IHZyaW5nX3VzZWQgKnVzZWQ7Cj4+ICAKPj4gIAlpZiAoIXZxLT5pb3Rs
Yikgewo+PiAtCQlyY3VfcmVhZF9sb2NrKCk7Cj4+ICsJCXZob3N0X3ZxX2FjY2Vzc19tYXBfYmVn
aW4odnEpOwo+PiAgCj4+IC0JCW1hcCA9IHJjdV9kZXJlZmVyZW5jZSh2cS0+bWFwc1tWSE9TVF9B
RERSX1VTRURdKTsKPj4gKwkJbWFwID0gdnEtPm1hcHNbVkhPU1RfQUREUl9VU0VEXTsKPj4gIAkJ
aWYgKGxpa2VseShtYXApKSB7Cj4+ICAJCQl1c2VkID0gbWFwLT5hZGRyOwo+PiAgCQkJdXNlZC0+
aWR4ID0gY3B1X3RvX3Zob3N0MTYodnEsIHZxLT5sYXN0X3VzZWRfaWR4KTsKPj4gLQkJCXJjdV9y
ZWFkX3VubG9jaygpOwo+PiArCQkJdmhvc3RfdnFfYWNjZXNzX21hcF9lbmQodnEpOwo+PiAgCQkJ
cmV0dXJuIDA7Cj4+ICAJCX0KPj4gIAo+PiAtCQlyY3VfcmVhZF91bmxvY2soKTsKPj4gKwkJdmhv
c3RfdnFfYWNjZXNzX21hcF9lbmQodnEpOwo+PiAgCX0KPj4gICNlbmRpZgo+PiAgCj4+IEBAIC0x
MzYyLDE3ICsxMzk5LDE3IEBAIHN0YXRpYyBpbmxpbmUgaW50IHZob3N0X2dldF9hdmFpbF9pZHgo
c3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEsCj4+ICAJc3RydWN0IHZyaW5nX2F2YWlsICphdmFp
bDsKPj4gIAo+PiAgCWlmICghdnEtPmlvdGxiKSB7Cj4+IC0JCXJjdV9yZWFkX2xvY2soKTsKPj4g
KwkJdmhvc3RfdnFfYWNjZXNzX21hcF9iZWdpbih2cSk7Cj4+ICAKPj4gLQkJbWFwID0gcmN1X2Rl
cmVmZXJlbmNlKHZxLT5tYXBzW1ZIT1NUX0FERFJfQVZBSUxdKTsKPj4gKwkJbWFwID0gdnEtPm1h
cHNbVkhPU1RfQUREUl9BVkFJTF07Cj4+ICAJCWlmIChsaWtlbHkobWFwKSkgewo+PiAgCQkJYXZh
aWwgPSBtYXAtPmFkZHI7Cj4+ICAJCQkqaWR4ID0gYXZhaWwtPmlkeDsKPj4gLQkJCXJjdV9yZWFk
X3VubG9jaygpOwo+PiArCQkJdmhvc3RfdnFfYWNjZXNzX21hcF9lbmQodnEpOwo+PiAgCQkJcmV0
dXJuIDA7Cj4+ICAJCX0KPj4gIAo+PiAtCQlyY3VfcmVhZF91bmxvY2soKTsKPj4gKwkJdmhvc3Rf
dnFfYWNjZXNzX21hcF9lbmQodnEpOwo+PiAgCX0KPj4gICNlbmRpZgo+PiAgCj4+IEBAIC0xMzg3
LDE3ICsxNDI0LDE3IEBAIHN0YXRpYyBpbmxpbmUgaW50IHZob3N0X2dldF9hdmFpbF9oZWFkKHN0
cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxLAo+PiAgCXN0cnVjdCB2cmluZ19hdmFpbCAqYXZhaWw7
Cj4+ICAKPj4gIAlpZiAoIXZxLT5pb3RsYikgewo+PiAtCQlyY3VfcmVhZF9sb2NrKCk7Cj4+ICsJ
CXZob3N0X3ZxX2FjY2Vzc19tYXBfYmVnaW4odnEpOwo+PiAgCj4+IC0JCW1hcCA9IHJjdV9kZXJl
ZmVyZW5jZSh2cS0+bWFwc1tWSE9TVF9BRERSX0FWQUlMXSk7Cj4+ICsJCW1hcCA9IHZxLT5tYXBz
W1ZIT1NUX0FERFJfQVZBSUxdOwo+PiAgCQlpZiAobGlrZWx5KG1hcCkpIHsKPj4gIAkJCWF2YWls
ID0gbWFwLT5hZGRyOwo+PiAgCQkJKmhlYWQgPSBhdmFpbC0+cmluZ1tpZHggJiAodnEtPm51bSAt
IDEpXTsKPj4gLQkJCXJjdV9yZWFkX3VubG9jaygpOwo+PiArCQkJdmhvc3RfdnFfYWNjZXNzX21h
cF9lbmQodnEpOwo+PiAgCQkJcmV0dXJuIDA7Cj4+ICAJCX0KPj4gIAo+PiAtCQlyY3VfcmVhZF91
bmxvY2soKTsKPj4gKwkJdmhvc3RfdnFfYWNjZXNzX21hcF9lbmQodnEpOwo+PiAgCX0KPj4gICNl
bmRpZgo+PiAgCj4+IEBAIC0xNDEzLDE3ICsxNDUwLDE3IEBAIHN0YXRpYyBpbmxpbmUgaW50IHZo
b3N0X2dldF9hdmFpbF9mbGFncyhzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cSwKPj4gIAlzdHJ1
Y3QgdnJpbmdfYXZhaWwgKmF2YWlsOwo+PiAgCj4+ICAJaWYgKCF2cS0+aW90bGIpIHsKPj4gLQkJ
cmN1X3JlYWRfbG9jaygpOwo+PiArCQl2aG9zdF92cV9hY2Nlc3NfbWFwX2JlZ2luKHZxKTsKPj4g
IAo+PiAtCQltYXAgPSByY3VfZGVyZWZlcmVuY2UodnEtPm1hcHNbVkhPU1RfQUREUl9BVkFJTF0p
Owo+PiArCQltYXAgPSB2cS0+bWFwc1tWSE9TVF9BRERSX0FWQUlMXTsKPj4gIAkJaWYgKGxpa2Vs
eShtYXApKSB7Cj4+ICAJCQlhdmFpbCA9IG1hcC0+YWRkcjsKPj4gIAkJCSpmbGFncyA9IGF2YWls
LT5mbGFnczsKPj4gLQkJCXJjdV9yZWFkX3VubG9jaygpOwo+PiArCQkJdmhvc3RfdnFfYWNjZXNz
X21hcF9lbmQodnEpOwo+PiAgCQkJcmV0dXJuIDA7Cj4+ICAJCX0KPj4gIAo+PiAtCQlyY3VfcmVh
ZF91bmxvY2soKTsKPj4gKwkJdmhvc3RfdnFfYWNjZXNzX21hcF9lbmQodnEpOwo+PiAgCX0KPj4g
ICNlbmRpZgo+PiAgCj4+IEBAIC0xNDM4LDE1ICsxNDc1LDE1IEBAIHN0YXRpYyBpbmxpbmUgaW50
IHZob3N0X2dldF91c2VkX2V2ZW50KHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZxLAo+PiAgCXN0
cnVjdCB2cmluZ19hdmFpbCAqYXZhaWw7Cj4+ICAKPj4gIAlpZiAoIXZxLT5pb3RsYikgewo+PiAt
CQlyY3VfcmVhZF9sb2NrKCk7Cj4+IC0JCW1hcCA9IHJjdV9kZXJlZmVyZW5jZSh2cS0+bWFwc1tW
SE9TVF9BRERSX0FWQUlMXSk7Cj4+ICsJCXZob3N0X3ZxX2FjY2Vzc19tYXBfYmVnaW4odnEpOwo+
PiArCQltYXAgPSB2cS0+bWFwc1tWSE9TVF9BRERSX0FWQUlMXTsKPj4gIAkJaWYgKGxpa2VseSht
YXApKSB7Cj4+ICAJCQlhdmFpbCA9IG1hcC0+YWRkcjsKPj4gIAkJCSpldmVudCA9IChfX3ZpcnRp
bzE2KWF2YWlsLT5yaW5nW3ZxLT5udW1dOwo+PiAtCQkJcmN1X3JlYWRfdW5sb2NrKCk7Cj4+ICsJ
CQl2aG9zdF92cV9hY2Nlc3NfbWFwX2VuZCh2cSk7Cj4+ICAJCQlyZXR1cm4gMDsKPj4gIAkJfQo+
PiAtCQlyY3VfcmVhZF91bmxvY2soKTsKPj4gKwkJdmhvc3RfdnFfYWNjZXNzX21hcF9lbmQodnEp
Owo+PiAgCX0KPj4gICNlbmRpZgo+PiAgCj4+IEBAIC0xNDYxLDE3ICsxNDk4LDE3IEBAIHN0YXRp
YyBpbmxpbmUgaW50IHZob3N0X2dldF91c2VkX2lkeChzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2
cSwKPj4gIAlzdHJ1Y3QgdnJpbmdfdXNlZCAqdXNlZDsKPj4gIAo+PiAgCWlmICghdnEtPmlvdGxi
KSB7Cj4+IC0JCXJjdV9yZWFkX2xvY2soKTsKPj4gKwkJdmhvc3RfdnFfYWNjZXNzX21hcF9iZWdp
bih2cSk7Cj4+ICAKPj4gLQkJbWFwID0gcmN1X2RlcmVmZXJlbmNlKHZxLT5tYXBzW1ZIT1NUX0FE
RFJfVVNFRF0pOwo+PiArCQltYXAgPSB2cS0+bWFwc1tWSE9TVF9BRERSX1VTRURdOwo+PiAgCQlp
ZiAobGlrZWx5KG1hcCkpIHsKPj4gIAkJCXVzZWQgPSBtYXAtPmFkZHI7Cj4+ICAJCQkqaWR4ID0g
dXNlZC0+aWR4Owo+PiAtCQkJcmN1X3JlYWRfdW5sb2NrKCk7Cj4+ICsJCQl2aG9zdF92cV9hY2Nl
c3NfbWFwX2VuZCh2cSk7Cj4+ICAJCQlyZXR1cm4gMDsKPj4gIAkJfQo+PiAgCj4+IC0JCXJjdV9y
ZWFkX3VubG9jaygpOwo+PiArCQl2aG9zdF92cV9hY2Nlc3NfbWFwX2VuZCh2cSk7Cj4+ICAJfQo+
PiAgI2VuZGlmCj4+ICAKPj4gQEAgLTE0ODYsMTcgKzE1MjMsMTcgQEAgc3RhdGljIGlubGluZSBp
bnQgdmhvc3RfZ2V0X2Rlc2Moc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSAqdnEsCj4+ICAJc3RydWN0
IHZyaW5nX2Rlc2MgKmQ7Cj4+ICAKPj4gIAlpZiAoIXZxLT5pb3RsYikgewo+PiAtCQlyY3VfcmVh
ZF9sb2NrKCk7Cj4+ICsJCXZob3N0X3ZxX2FjY2Vzc19tYXBfYmVnaW4odnEpOwo+PiAgCj4+IC0J
CW1hcCA9IHJjdV9kZXJlZmVyZW5jZSh2cS0+bWFwc1tWSE9TVF9BRERSX0RFU0NdKTsKPj4gKwkJ
bWFwID0gdnEtPm1hcHNbVkhPU1RfQUREUl9ERVNDXTsKPj4gIAkJaWYgKGxpa2VseShtYXApKSB7
Cj4+ICAJCQlkID0gbWFwLT5hZGRyOwo+PiAgCQkJKmRlc2MgPSAqKGQgKyBpZHgpOwo+PiAtCQkJ
cmN1X3JlYWRfdW5sb2NrKCk7Cj4+ICsJCQl2aG9zdF92cV9hY2Nlc3NfbWFwX2VuZCh2cSk7Cj4+
ICAJCQlyZXR1cm4gMDsKPj4gIAkJfQo+PiAgCj4+IC0JCXJjdV9yZWFkX3VubG9jaygpOwo+PiAr
CQl2aG9zdF92cV9hY2Nlc3NfbWFwX2VuZCh2cSk7Cj4+ICAJfQo+PiAgI2VuZGlmCj4+ICAKPj4g
QEAgLTE4NDMsMTMgKzE4ODAsMTEgQEAgc3RhdGljIGJvb2wgaW90bGJfYWNjZXNzX29rKHN0cnVj
dCB2aG9zdF92aXJ0cXVldWUgKnZxLAo+PiAgI2lmIFZIT1NUX0FSQ0hfQ0FOX0FDQ0VMX1VBQ0NF
U1MKPj4gIHN0YXRpYyB2b2lkIHZob3N0X3ZxX21hcF9wcmVmZXRjaChzdHJ1Y3Qgdmhvc3Rfdmly
dHF1ZXVlICp2cSkKPj4gIHsKPj4gLQlzdHJ1Y3Qgdmhvc3RfbWFwIF9fcmN1ICptYXA7Cj4+ICsJ
c3RydWN0IHZob3N0X21hcCAqbWFwOwo+PiAgCWludCBpOwo+PiAgCj4+ICAJZm9yIChpID0gMDsg
aSA8IFZIT1NUX05VTV9BRERSUzsgaSsrKSB7Cj4+IC0JCXJjdV9yZWFkX2xvY2soKTsKPj4gLQkJ
bWFwID0gcmN1X2RlcmVmZXJlbmNlKHZxLT5tYXBzW2ldKTsKPj4gLQkJcmN1X3JlYWRfdW5sb2Nr
KCk7Cj4+ICsJCW1hcCA9IHZxLT5tYXBzW2ldOwo+PiAgCQlpZiAodW5saWtlbHkoIW1hcCkpCj4+
ICAJCQl2aG9zdF9tYXBfcHJlZmV0Y2godnEsIGkpOwo+PiAgCX0KPj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvdmhvc3Qvdmhvc3QuaCBiL2RyaXZlcnMvdmhvc3Qvdmhvc3QuaAo+PiBpbmRleCBhOWEy
YTkzODU3ZDIuLmY5ZTk1NThhNTI5ZCAxMDA2NDQKPj4gLS0tIGEvZHJpdmVycy92aG9zdC92aG9z
dC5oCj4+ICsrKyBiL2RyaXZlcnMvdmhvc3Qvdmhvc3QuaAo+PiBAQCAtMTE1LDE2ICsxMTUsMTcg
QEAgc3RydWN0IHZob3N0X3ZpcnRxdWV1ZSB7Cj4+ICAjaWYgVkhPU1RfQVJDSF9DQU5fQUNDRUxf
VUFDQ0VTUwo+PiAgCS8qIFJlYWQgYnkgbWVtb3J5IGFjY2Vzc29ycywgbW9kaWZpZWQgYnkgbWV0
YSBkYXRhCj4+ICAJICogcHJlZmV0Y2hpbmcsIE1NVSBub3RpZmllciBhbmQgdnJpbmcgaW9jdGwo
KS4KPj4gLQkgKiBTeW5jaG9ucml6ZWQgdGhyb3VnaCBtbXVfbG9jayAod3JpdGVycykgYW5kIFJD
VSAod3JpdGVycwo+PiAtCSAqIGFuZCByZWFkZXJzKS4KPj4gKwkgKiBTeW5jaG9ucml6ZWQgdGhy
b3VnaCBtbXVfbG9jayAod3JpdGVycykgYW5kIHJlZiBjb3VudGVycywKPj4gKwkgKiBzZWUgdmhv
c3RfdnFfYWNjZXNzX21hcF9iZWdpbigpL3Zob3N0X3ZxX2FjY2Vzc19tYXBfZW5kKCkuCj4+ICAJ
ICovCj4+IC0Jc3RydWN0IHZob3N0X21hcCBfX3JjdSAqbWFwc1tWSE9TVF9OVU1fQUREUlNdOwo+
PiArCXN0cnVjdCB2aG9zdF9tYXAgKm1hcHNbVkhPU1RfTlVNX0FERFJTXTsKPj4gIAkvKiBSZWFk
IGJ5IE1NVSBub3RpZmllciwgbW9kaWZpZWQgYnkgdnJpbmcgaW9jdGwoKSwKPj4gIAkgKiBzeW5j
aHJvbml6ZWQgdGhyb3VnaCBNTVUgbm90aWZpZXIKPj4gIAkgKiByZWdpc3RlcmluZy91bnJlZ2lz
dGVyaW5nLgo+PiAgCSAqLwo+PiAgCXN0cnVjdCB2aG9zdF91YWRkciB1YWRkcnNbVkhPU1RfTlVN
X0FERFJTXTsKPj4gICNlbmRpZgo+PiArCWludCByZWY7Cj4KPiBJcyBpdCBpbXBvcnRhbnQgdGhh
dCB0aGlzIGlzIHNpZ25lZD8gSWYgbm90IEknZCBkbyB1bnNpZ25lZCBoZXJlOgo+IGV2ZW4gdGhv
dWdoIGtlcm5lbCBkb2VzIGNvbXBpbGUgd2l0aCAycyBjb21wbGVtZW50IHNpZ24gb3ZlcmZsb3cs
Cj4gaXQgc2VlbXMgY2xlYW5lciBub3QgdG8gZGVwZW5kIG9uIHRoYXQuCgpOb3QgYSBtdXN0LCBs
ZXQgbWUgZml4LgoKVGhhbmtzCgo+Cj4+ICAJY29uc3Qgc3RydWN0IHZob3N0X3VtZW1fbm9kZSAq
bWV0YV9pb3RsYltWSE9TVF9OVU1fQUREUlNdOwo+PiAgCj4+ICAJc3RydWN0IGZpbGUgKmtpY2s7
Cj4+IC0tIAo+PiAyLjE4LjEKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KVmlydHVhbGl6YXRpb24gbWFpbGluZyBsaXN0ClZpcnR1YWxpemF0aW9uQGxpc3Rz
LmxpbnV4LWZvdW5kYXRpb24ub3JnCmh0dHBzOi8vbGlzdHMubGludXhmb3VuZGF0aW9uLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL3ZpcnR1YWxpemF0aW9u
