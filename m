Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp3.osuosl.org (smtp3.osuosl.org [140.211.166.136])
	by mail.lfdr.de (Postfix) with ESMTPS id B96114C632D
	for <lists.virtualization@lfdr.de>; Mon, 28 Feb 2022 07:40:01 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp3.osuosl.org (Postfix) with ESMTP id 424D860768;
	Mon, 28 Feb 2022 06:40:00 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
	by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id hEEaKn6WCrcz; Mon, 28 Feb 2022 06:39:59 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [140.211.9.56])
	by smtp3.osuosl.org (Postfix) with ESMTPS id D58E5606DC;
	Mon, 28 Feb 2022 06:39:58 +0000 (UTC)
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 58DB2C007B;
	Mon, 28 Feb 2022 06:39:58 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp1.osuosl.org (smtp1.osuosl.org [IPv6:2605:bc80:3010::138])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 4411CC001A
 for <virtualization@lists.linux-foundation.org>;
 Mon, 28 Feb 2022 06:39:57 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp1.osuosl.org (Postfix) with ESMTP id 3842C81B17
 for <virtualization@lists.linux-foundation.org>;
 Mon, 28 Feb 2022 06:39:57 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Authentication-Results: smtp1.osuosl.org (amavisd-new);
 dkim=pass (1024-bit key) header.d=redhat.com
Received: from smtp1.osuosl.org ([127.0.0.1])
 by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id Uycjmr7AxbE2
 for <virtualization@lists.linux-foundation.org>;
 Mon, 28 Feb 2022 06:39:56 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp1.osuosl.org (Postfix) with ESMTPS id 4A820817B5
 for <virtualization@lists.linux-foundation.org>;
 Mon, 28 Feb 2022 06:39:55 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1646030394;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=3YNbrx7MMKE34LwQXKjmQQiWz8FnEP5yPTrpfUZ6sb8=;
 b=MO4jfM0IfDyHOrWYmK45hyzEn6m860/O5dS8Oc0z71eSEnXt5c+PWVehw/7vn9Pwiy1jb2
 PDGTNJ+MxAUMdRlvElAQ/0HM2GrVUIHXPgy/BqwuLKjPyvTPNnzq3B2n5SFb3TcxULt3nN
 nkf/FfrFFomUTWooF95zYgcxOW8spbw=
Received: from mail-pf1-f197.google.com (mail-pf1-f197.google.com
 [209.85.210.197]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 us-mta-670-uvi93mUgNyG8ZnEjKnEsQw-1; Mon, 28 Feb 2022 01:39:51 -0500
X-MC-Unique: uvi93mUgNyG8ZnEjKnEsQw-1
Received: by mail-pf1-f197.google.com with SMTP id
 a200-20020a621ad1000000b004e191fdcb4dso7277267pfa.1
 for <virtualization@lists.linux-foundation.org>;
 Sun, 27 Feb 2022 22:39:51 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:message-id:date:mime-version:user-agent:subject
 :content-language:to:cc:references:from:in-reply-to
 :content-transfer-encoding;
 bh=3YNbrx7MMKE34LwQXKjmQQiWz8FnEP5yPTrpfUZ6sb8=;
 b=6tk+P7CtmDNEKx7n0OL52/yPS3F8f1y3ATx0txE8jycUBmQQKHMe8Ko+oztJ3nVBee
 kh4621758U9Qmrc83ikTj16+1g8R5mEzqB+F1dcsem3aa8THKmMZEYnBowkmsos47UTv
 +5yDqeSn0HEzmloeh8tAUvMF8j1iM21mYjDsYCZHzgCLw+185/EPig20Sb+EOzJOL5wz
 RGjqMaFK/oJcku331RwHa7n07P7DabJwUsUWUgYz+JXqMeL6O76GfTsjaH7rG03NLSjs
 2Tev4ZihaSTTA6aUN5T6XlYgG2656iARZbiw0XoGqq/4NlgjWzCxTEjVFC96LaBtNTP7
 8ztg==
X-Gm-Message-State: AOAM530vGfAmd7j/iFHOe1GXgSbEErnafwrgmgayJ6QHRHhZYIw1iLcQ
 eRP3KIcBhS9lzBXVKW4zBlgO42wkFyqjFDTuWPbTjUH5ZkuqPy32h6hKGlQSPNrnhla6lx3/KvE
 Xso+3x579wOCltiSlaZBqiAp5+duRTsxbCmTPryrfMQ==
X-Received: by 2002:a05:6a00:1143:b0:4f0:e9bf:6333 with SMTP id
 b3-20020a056a00114300b004f0e9bf6333mr20174439pfm.29.1646030390261; 
 Sun, 27 Feb 2022 22:39:50 -0800 (PST)
X-Google-Smtp-Source: ABdhPJx8/HXKSbdI9keE00wF6BCIe8Q44mhzORXxQKSRSxBcw3rWWLmQ/acVu2OnzLstJcfFpqYlSw==
X-Received: by 2002:a05:6a00:1143:b0:4f0:e9bf:6333 with SMTP id
 b3-20020a056a00114300b004f0e9bf6333mr20174392pfm.29.1646030389853; 
 Sun, 27 Feb 2022 22:39:49 -0800 (PST)
Received: from [10.72.13.215] ([209.132.188.80])
 by smtp.gmail.com with ESMTPSA id
 a32-20020a631a20000000b003756899829csm9151181pga.58.2022.02.27.22.39.41
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Sun, 27 Feb 2022 22:39:49 -0800 (PST)
Message-ID: <7829cc8d-66d0-cedd-eca5-f899cd5ecd07@redhat.com>
Date: Mon, 28 Feb 2022 14:39:39 +0800
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:91.0)
 Gecko/20100101 Thunderbird/91.6.1
Subject: Re: [PATCH v2 08/14] util: Add iova_tree_alloc
To: =?UTF-8?Q?Eugenio_P=c3=a9rez?= <eperezma@redhat.com>, qemu-devel@nongnu.org
References: <20220227134111.3254066-1-eperezma@redhat.com>
 <20220227134111.3254066-9-eperezma@redhat.com>
From: Jason Wang <jasowang@redhat.com>
In-Reply-To: <20220227134111.3254066-9-eperezma@redhat.com>
Authentication-Results: relay.mimecast.com;
 auth=pass smtp.auth=CUSA124A263 smtp.mailfrom=jasowang@redhat.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: "Michael S. Tsirkin" <mst@redhat.com>,
 virtualization@lists.linux-foundation.org, Eli Cohen <eli@mellanox.com>,
 Eric Blake <eblake@redhat.com>, Parav Pandit <parav@mellanox.com>,
 Cindy Lu <lulu@redhat.com>, "Fangyi \(Eric\)" <eric.fangyi@huawei.com>,
 Markus Armbruster <armbru@redhat.com>, yebiaoxiang@huawei.com,
 Liuxiangdong <liuxiangdong5@huawei.com>, Laurent Vivier <lvivier@redhat.com>,
 Eduardo Habkost <ehabkost@redhat.com>,
 Richard Henderson <richard.henderson@linaro.org>,
 Gautam Dawar <gdawar@xilinx.com>, Xiao W Wang <xiao.w.wang@intel.com>,
 Stefan Hajnoczi <stefanha@redhat.com>,
 Harpreet Singh Anand <hanand@xilinx.com>, Paolo Bonzini <pbonzini@redhat.com>,
 Lingshan <lingshan.zhu@intel.com>
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CuWcqCAyMDIyLzIvMjcg5LiL5Y2IOTo0MSwgRXVnZW5pbyBQw6lyZXog5YaZ6YGTOgo+IFRoaXMg
aW92YSB0cmVlIGZ1bmN0aW9uIGFsbG93cyBpdCB0byBsb29rIGZvciBhIGhvbGUgaW4gYWxsb2Nh
dGVkCj4gcmVnaW9ucyBhbmQgcmV0dXJuIGEgdG90YWxseSBuZXcgdHJhbnNsYXRpb24gZm9yIGEg
Z2l2ZW4gdHJhbnNsYXRlZAo+IGFkZHJlc3MuCj4KPiBJdCdzIHVzYWdlIGlzIG1haW5seSB0byBh
bGxvdyBkZXZpY2VzIHRvIGFjY2VzcyBxZW11IGFkZHJlc3Mgc3BhY2UsCj4gcmVtYXBwaW5nIGd1
ZXN0J3Mgb25lIGludG8gYSBuZXcgaW92YSBzcGFjZSB3aGVyZSBxZW11IGNhbiBhZGQgY2h1bmtz
IG9mCj4gYWRkcmVzc2VzLgo+Cj4gU2lnbmVkLW9mZi1ieTogRXVnZW5pbyBQw6lyZXogPGVwZXJl
em1hQHJlZGhhdC5jb20+Cj4gUmV2aWV3ZWQtYnk6IFBldGVyIFh1IDxwZXRlcnhAcmVkaGF0LmNv
bT4KPiAtLS0KPiAgIGluY2x1ZGUvcWVtdS9pb3ZhLXRyZWUuaCB8ICAxOCArKysrKysKPiAgIHV0
aWwvaW92YS10cmVlLmMgICAgICAgICB8IDEzMyArKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysKPiAgIDIgZmlsZXMgY2hhbmdlZCwgMTUxIGluc2VydGlvbnMoKykKPgo+IGRp
ZmYgLS1naXQgYS9pbmNsdWRlL3FlbXUvaW92YS10cmVlLmggYi9pbmNsdWRlL3FlbXUvaW92YS10
cmVlLmgKPiBpbmRleCA4MjQ5ZWRkNzY0Li5hNjIzMTM2Y2Q4IDEwMDY0NAo+IC0tLSBhL2luY2x1
ZGUvcWVtdS9pb3ZhLXRyZWUuaAo+ICsrKyBiL2luY2x1ZGUvcWVtdS9pb3ZhLXRyZWUuaAo+IEBA
IC0yOSw2ICsyOSw3IEBACj4gICAjZGVmaW5lICBJT1ZBX09LICAgICAgICAgICAoMCkKPiAgICNk
ZWZpbmUgIElPVkFfRVJSX0lOVkFMSUQgICgtMSkgLyogSW52YWxpZCBwYXJhbWV0ZXJzICovCj4g
ICAjZGVmaW5lICBJT1ZBX0VSUl9PVkVSTEFQICAoLTIpIC8qIElPVkEgcmFuZ2Ugb3ZlcmxhcHBl
ZCAqLwo+ICsjZGVmaW5lICBJT1ZBX0VSUl9OT01FTSAgICAoLTMpIC8qIENhbm5vdCBhbGxvY2F0
ZSAqLwo+ICAgCj4gICB0eXBlZGVmIHN0cnVjdCBJT1ZBVHJlZSBJT1ZBVHJlZTsKPiAgIHR5cGVk
ZWYgc3RydWN0IERNQU1hcCB7Cj4gQEAgLTExOSw2ICsxMjAsMjMgQEAgY29uc3QgRE1BTWFwICpp
b3ZhX3RyZWVfZmluZF9hZGRyZXNzKGNvbnN0IElPVkFUcmVlICp0cmVlLCBod2FkZHIgaW92YSk7
Cj4gICAgKi8KPiAgIHZvaWQgaW92YV90cmVlX2ZvcmVhY2goSU9WQVRyZWUgKnRyZWUsIGlvdmFf
dHJlZV9pdGVyYXRvciBpdGVyYXRvcik7Cj4gICAKPiArLyoqCj4gKyAqIGlvdmFfdHJlZV9hbGxv
YzoKCgpTaG91bGQgYmUgaW92YV90cmVlX2FsbG9jX21hcC4KCgo+ICsgKgo+ICsgKiBAdHJlZTog
dGhlIGlvdmEgdHJlZSB0byBhbGxvY2F0ZSBmcm9tCj4gKyAqIEBtYXA6IHRoZSBuZXcgbWFwIChh
cyB0cmFuc2xhdGVkIGFkZHIgJiBzaXplKSB0byBhbGxvY2F0ZSBpbiB0aGUgaW92YSByZWdpb24K
PiArICogQGlvdmFfYmVnaW46IHRoZSBtaW5pbXVtIGFkZHJlc3Mgb2YgdGhlIGFsbG9jYXRpb24K
PiArICogQGlvdmFfZW5kOiB0aGUgbWF4aW11bSBhZGRyZXNzYWJsZSBkaXJlY3Rpb24gb2YgdGhl
IGFsbG9jYXRpb24KPiArICoKPiArICogQWxsb2NhdGVzIGEgbmV3IHJlZ2lvbiBvZiBhIGdpdmVu
IHNpemUsIGJldHdlZW4gaW92YV9taW4gYW5kIGlvdmFfbWF4Lgo+ICsgKgo+ICsgKiBSZXR1cm46
IFNhbWUgYXMgaW92YV90cmVlX2luc2VydCwgYnV0IGNhbm5vdCBvdmVybGFwIGFuZCBjYW4gcmV0
dXJuIGVycm9yIGlmCj4gKyAqIGlvdmEgdHJlZSBpcyBvdXQgb2YgZnJlZSBjb250aWd1b3VzIHJh
bmdlLiBUaGUgY2FsbGVyIGdldHMgdGhlIGFzc2lnbmVkIGlvdmEKPiArICogaW4gbWFwLT5pb3Zh
Lgo+ICsgKi8KPiAraW50IGlvdmFfdHJlZV9hbGxvY19tYXAoSU9WQVRyZWUgKnRyZWUsIERNQU1h
cCAqbWFwLCBod2FkZHIgaW92YV9iZWdpbiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgaHdh
ZGRyIGlvdmFfZW5kKTsKPiArCj4gICAvKioKPiAgICAqIGlvdmFfdHJlZV9kZXN0cm95Ogo+ICAg
ICoKPiBkaWZmIC0tZ2l0IGEvdXRpbC9pb3ZhLXRyZWUuYyBiL3V0aWwvaW92YS10cmVlLmMKPiBp
bmRleCAyM2VhMzViN2E0Li4zMDJiMDFmMWNjIDEwMDY0NAo+IC0tLSBhL3V0aWwvaW92YS10cmVl
LmMKPiArKysgYi91dGlsL2lvdmEtdHJlZS5jCj4gQEAgLTE2LDYgKzE2LDM5IEBAIHN0cnVjdCBJ
T1ZBVHJlZSB7Cj4gICAgICAgR1RyZWUgKnRyZWU7Cj4gICB9Owo+ICAgCj4gKy8qIEFyZ3MgdG8g
cGFzcyB0byBpb3ZhX3RyZWVfYWxsb2MgZm9yZWFjaCBmdW5jdGlvbi4gKi8KPiArc3RydWN0IElP
VkFUcmVlQWxsb2NBcmdzIHsKPiArICAgIC8qIFNpemUgb2YgdGhlIGRlc2lyZWQgYWxsb2NhdGlv
biAqLwo+ICsgICAgc2l6ZV90IG5ld19zaXplOwo+ICsKPiArICAgIC8qIFRoZSBtaW5pbXVtIGFk
ZHJlc3MgYWxsb3dlZCBpbiB0aGUgYWxsb2NhdGlvbiAqLwo+ICsgICAgaHdhZGRyIGlvdmFfYmVn
aW47Cj4gKwo+ICsgICAgLyogTWFwIGF0IHRoZSBsZWZ0IG9mIHRoZSBob2xlLCBjYW4gYmUgTlVM
TCBpZiAidGhpcyIgaXMgZmlyc3Qgb25lICovCj4gKyAgICBjb25zdCBETUFNYXAgKnByZXY7Cj4g
Kwo+ICsgICAgLyogTWFwIGF0IHRoZSByaWdodCBvZiB0aGUgaG9sZSwgY2FuIGJlIE5VTEwgaWYg
InByZXYiIGlzIHRoZSBsYXN0IG9uZSAqLwo+ICsgICAgY29uc3QgRE1BTWFwICp0aGlzOwo+ICsK
PiArICAgIC8qIElmIGZvdW5kLCB3ZSBmaWxsIGluIHRoZSBJT1ZBIGhlcmUgKi8KPiArICAgIGh3
YWRkciBpb3ZhX3Jlc3VsdDsKPiArCj4gKyAgICAvKiBXaGV0aGVyIGhhdmUgd2UgZm91bmQgYSB2
YWxpZCBJT1ZBICovCj4gKyAgICBib29sIGlvdmFfZm91bmQ7Cj4gK307Cj4gKwo+ICsvKioKPiAr
ICogSXRlcmF0ZSBhcmdzIHRvIHRoZSBuZXh0IGhvbGUKPiArICoKPiArICogQGFyZ3MgIFRoZSBh
bGxvYyBhcmd1bWVudHMKPiArICogQG5leHQgIFRoZSBuZXh0IG1hcHBpbmcgaW4gdGhlIHRyZWUu
IENhbiBiZSBOVUxMIHRvIHNpZ25hbCB0aGUgbGFzdCBvbmUKPiArICovCj4gK3N0YXRpYyB2b2lk
IGlvdmFfdHJlZV9hbGxvY19hcmdzX2l0ZXJhdGUoc3RydWN0IElPVkFUcmVlQWxsb2NBcmdzICph
cmdzLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IERN
QU1hcCAqbmV4dCkgewo+ICsgICAgYXJncy0+cHJldiA9IGFyZ3MtPnRoaXM7Cj4gKyAgICBhcmdz
LT50aGlzID0gbmV4dDsKPiArfQo+ICsKPiAgIHN0YXRpYyBpbnQgaW92YV90cmVlX2NvbXBhcmUo
Z2NvbnN0cG9pbnRlciBhLCBnY29uc3Rwb2ludGVyIGIsIGdwb2ludGVyIGRhdGEpCj4gICB7Cj4g
ICAgICAgY29uc3QgRE1BTWFwICptMSA9IGEsICptMiA9IGI7Cj4gQEAgLTEwNyw2ICsxNDAsMTA2
IEBAIGludCBpb3ZhX3RyZWVfcmVtb3ZlKElPVkFUcmVlICp0cmVlLCBjb25zdCBETUFNYXAgKm1h
cCkKPiAgICAgICByZXR1cm4gSU9WQV9PSzsKPiAgIH0KPiAgIAo+ICsvKioKPiArICogVHJ5IHRv
IGZpbmQgYW4gdW5hbGxvY2F0ZWQgSU9WQSByYW5nZSBiZXR3ZWVuIHByZXYgYW5kIHRoaXMgZWxl
bWVudHMuCj4gKyAqCj4gKyAqIEBhcmdzIEFyZ3VtZW50cyB0byBhbGxvY2F0aW9uCj4gKyAqCj4g
KyAqIENhc2VzOgo+ICsgKgo+ICsgKiAoMSkgIXByZXYsICF0aGlzOiBObyBlbnRyaWVzIGFsbG9j
YXRlZCwgYWx3YXlzIHN1Y2NlZWQKPiArICoKPiArICogKDIpICFwcmV2LCB0aGlzOiBXZSdyZSBp
dGVyYXRpbmcgYXQgdGhlIDFzdCBlbGVtZW50Lgo+ICsgKgo+ICsgKiAoMykgcHJldiwgIXRoaXM6
IFdlJ3JlIGl0ZXJhdGluZyBhdCB0aGUgbGFzdCBlbGVtZW50Lgo+ICsgKgo+ICsgKiAoNCkgcHJl
diwgdGhpczogdGhpcyBpcyB0aGUgbW9zdCBjb21tb24gY2FzZSwgd2UnbGwgdHJ5IHRvIGZpbmQg
YSBob2xlCj4gKyAqIGJldHdlZW4gInByZXYiIGFuZCAidGhpcyIgbWFwcGluZy4KPiArICoKPiAr
ICogTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gYXNzdW1lcyB0aGUgbGFzdCB2YWxpZCBpb3ZhIGlz
IEhXQUREUl9NQVgsIGJ1dCBpdAo+ICsgKiBzZWFyY2hlcyBsaW5lYXJseSBzbyBpdCdzIGVhc3kg
dG8gZGlzY2FyZCB0aGUgcmVzdWx0IGlmIGl0J3Mgbm90IHRoZSBjYXNlLgo+ICsgKi8KPiArc3Rh
dGljIHZvaWQgaW92YV90cmVlX2FsbG9jX21hcF9pbl9ob2xlKHN0cnVjdCBJT1ZBVHJlZUFsbG9j
QXJncyAqYXJncykKPiArewo+ICsgICAgY29uc3QgRE1BTWFwICpwcmV2ID0gYXJncy0+cHJldiwg
KnRoaXMgPSBhcmdzLT50aGlzOwo+ICsgICAgdWludDY0X3QgaG9sZV9zdGFydCwgaG9sZV9sYXN0
Owo+ICsKPiArICAgIGlmICh0aGlzICYmIHRoaXMtPmlvdmEgKyB0aGlzLT5zaXplIDwgYXJncy0+
aW92YV9iZWdpbikgewo+ICsgICAgICAgIHJldHVybjsKPiArICAgIH0KPiArCj4gKyAgICBob2xl
X3N0YXJ0ID0gTUFYKHByZXYgPyBwcmV2LT5pb3ZhICsgcHJldi0+c2l6ZSArIDEgOiAwLCBhcmdz
LT5pb3ZhX2JlZ2luKTsKPiArICAgIGhvbGVfbGFzdCA9IHRoaXMgPyB0aGlzLT5pb3ZhIDogSFdB
RERSX01BWDsKCgpEbyB3ZSBuZWVkIHRvIHVzZSBpb3ZhX2xhc3QgaW5zdGVhZCBvZiBIV0FERFJf
TUFYPwoKCj4gKwo+ICsgICAgaWYgKGhvbGVfbGFzdCAtIGhvbGVfc3RhcnQgPiBhcmdzLT5uZXdf
c2l6ZSkgewo+ICsgICAgICAgIGFyZ3MtPmlvdmFfcmVzdWx0ID0gaG9sZV9zdGFydDsKPiArICAg
ICAgICBhcmdzLT5pb3ZhX2ZvdW5kID0gdHJ1ZTsKPiArICAgIH0KPiArfQo+ICsKPiArLyoqCj4g
KyAqIEZvcmVhY2ggZG1hIG5vZGUgaW4gdGhlIHRyZWUsIGNvbXBhcmUgaWYgdGhlcmUgaXMgYSBo
b2xlIHdpdGggaXRzIHByZXZpb3VzCj4gKyAqIG5vZGUgKG9yIG1pbmltdW0gaW92YSBhZGRyZXNz
IGFsbG93ZWQpIGFuZCB0aGUgbm9kZS4KPiArICoKPiArICogQGtleSAgIE5vZGUgaXRlcmF0aW5n
Cj4gKyAqIEB2YWx1ZSBOb2RlIGl0ZXJhdGluZwo+ICsgKiBAcGFyZ3MgU3RydWN0IHRvIGNvbW11
bmljYXRlIHdpdGggdGhlIG91dHNpZGUgd29ybGQKPiArICoKPiArICogUmV0dXJuOiBmYWxzZSB0
byBrZWVwIGl0ZXJhdGluZywgdHJ1ZSBpZiBuZWVkcyBicmVhay4KPiArICovCj4gK3N0YXRpYyBn
Ym9vbGVhbiBpb3ZhX3RyZWVfYWxsb2NfdHJhdmVyc2UoZ3BvaW50ZXIga2V5LCBncG9pbnRlciB2
YWx1ZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncG9pbnRl
ciBwYXJncykKPiArewo+ICsgICAgc3RydWN0IElPVkFUcmVlQWxsb2NBcmdzICphcmdzID0gcGFy
Z3M7Cj4gKyAgICBETUFNYXAgKm5vZGUgPSB2YWx1ZTsKPiArCj4gKyAgICBhc3NlcnQoa2V5ID09
IHZhbHVlKTsKPiArCj4gKyAgICBpb3ZhX3RyZWVfYWxsb2NfYXJnc19pdGVyYXRlKGFyZ3MsIG5v
ZGUpOwo+ICsgICAgaW92YV90cmVlX2FsbG9jX21hcF9pbl9ob2xlKGFyZ3MpOwo+ICsgICAgcmV0
dXJuIGFyZ3MtPmlvdmFfZm91bmQ7Cj4gK30KPiArCj4gK2ludCBpb3ZhX3RyZWVfYWxsb2NfbWFw
KElPVkFUcmVlICp0cmVlLCBETUFNYXAgKm1hcCwgaHdhZGRyIGlvdmFfYmVnaW4sCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgIGh3YWRkciBpb3ZhX2xhc3QpCj4gK3sKPiArICAgIHN0cnVjdCBJ
T1ZBVHJlZUFsbG9jQXJncyBhcmdzID0gewo+ICsgICAgICAgIC5uZXdfc2l6ZSA9IG1hcC0+c2l6
ZSwKPiArICAgICAgICAuaW92YV9iZWdpbiA9IGlvdmFfYmVnaW4sCj4gKyAgICB9Owo+ICsKPiAr
ICAgIGFzc2VydChpb3ZhX2JlZ2luIDwgaW92YV9sYXN0KTsKCgpTaG91bGQgd2UgdXNlICI8PSIg
aGVyZSwgb3RoZXJ3aXNlIHdlIGRpc2FsbG93IGFsbG9jYXRlIHRoZSBzaXplIG9mIDEuCgpBbmQg
bWF5YmUgd2Ugc2hvdWxkIHJldHVybiBlcnJvciBpbnN0ZWFkIG9mIGFzc2VydC4KCgo+ICsKPiAr
ICAgIC8qCj4gKyAgICAgKiBGaW5kIGEgdmFsaWQgaG9sZSBmb3IgdGhlIG1hcHBpbmcKPiArICAg
ICAqCj4gKyAgICAgKiBBc3N1bWluZyBsb3cgaW92YV9iZWdpbiwgc28gbm8gbmVlZCB0byBkbyBh
IGJpbmFyeSBzZWFyY2ggdG8KPiArICAgICAqIGxvY2F0ZSB0aGUgZmlyc3Qgbm9kZS4KPiArICAg
ICAqCj4gKyAgICAgKiBUT0RPOiBSZXBsYWNlIGFsbCB0aGlzIHdpdGggZ190cmVlX25vZGVfZmly
c3QvbmV4dC9sYXN0IHdoZW4gYXZhaWxhYmxlCj4gKyAgICAgKiAoZnJvbSBnbGliIHNpbmNlIDIu
NjgpLiBUbyBkbyBpdCB3aXRoIGdfdHJlZV9mb3JlYWNoIGNvbXBsaWNhdGVzIHRoZQo+ICsgICAg
ICogY29kZSBhIGxvdC4KPiArICAgICAqCgoKT25lIG1vcmUgcXVlc3Rpb24KClRoZSBjdXJyZW50
IGNvZGUgbG9va3Mgd29yayBidXQgc3RpbGwgYSBsaXR0bGUgYml0IGNvbXBsaWNhdGVkIHRvIGJl
IApyZXZpZXdlZC4gTG9va2luZyBhdCB0aGUgbWlzc2luZyBoZWxwZXJzIGFib3ZlLCBpZiB0aGUg
YWRkIGFuZCByZW1vdmUgCmFyZSBzZWxkb20uIEkgd29uZGVyIGlmIHdlIGNhbiBzaW1wbHkgZG8K
CmdfdHJlZV9mb3JlYWNoKCkgZHVyaW5nIGVhY2ggYWRkL2RlbCB0byBidWlsZCBhIHNvcnRlZCBs
aXN0IHRoZW4gd2UgY2FuIAplbXVsYXRlIGdfdHJlZV9ub2RlX2ZpcnN0L25leHQvbGFzdCBlYXNp
bHk/CgoKPiArICAgICAqLwo+ICsgICAgZ190cmVlX2ZvcmVhY2godHJlZS0+dHJlZSwgaW92YV90
cmVlX2FsbG9jX3RyYXZlcnNlLCAmYXJncyk7Cj4gKyAgICBpZiAoIWFyZ3MuaW92YV9mb3VuZCkg
ewo+ICsgICAgICAgIC8qCj4gKyAgICAgICAgICogRWl0aGVyIHRyZWUgaXMgZW1wdHkgb3IgdGhl
IGxhc3QgaG9sZSBpcyBzdGlsbCBub3QgY2hlY2tlZC4KPiArICAgICAgICAgKiBnX3RyZWVfZm9y
ZWFjaCBkb2VzIG5vdCBjb21wYXJlIChsYXN0LCBpb3ZhX2VuZF0gcmFuZ2UsIHNvIHdlIGNoZWNr
CgoKIihsYXN0LCBpb3ZhX2xhc3RdIiA/CgpUaGFua3MKCgo+ICsgICAgICAgICAqIGl0IGhlcmUu
Cj4gKyAgICAgICAgICovCj4gKyAgICAgICAgaW92YV90cmVlX2FsbG9jX2FyZ3NfaXRlcmF0ZSgm
YXJncywgTlVMTCk7Cj4gKyAgICAgICAgaW92YV90cmVlX2FsbG9jX21hcF9pbl9ob2xlKCZhcmdz
KTsKPiArICAgIH0KPiArCj4gKyAgICBpZiAoIWFyZ3MuaW92YV9mb3VuZCB8fCBhcmdzLmlvdmFf
cmVzdWx0ICsgbWFwLT5zaXplID4gaW92YV9sYXN0KSB7Cj4gKyAgICAgICAgcmV0dXJuIElPVkFf
RVJSX05PTUVNOwo+ICsgICAgfQo+ICsKPiArICAgIG1hcC0+aW92YSA9IGFyZ3MuaW92YV9yZXN1
bHQ7Cj4gKyAgICByZXR1cm4gaW92YV90cmVlX2luc2VydCh0cmVlLCBtYXApOwo+ICt9Cj4gKwo+
ICAgdm9pZCBpb3ZhX3RyZWVfZGVzdHJveShJT1ZBVHJlZSAqdHJlZSkKPiAgIHsKPiAgICAgICBn
X3RyZWVfZGVzdHJveSh0cmVlLT50cmVlKTsKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxpbmcgbGlzdApWaXJ0dWFsaXph
dGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczovL2xpc3RzLmxpbnV4Zm91bmRh
dGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlvbg==
