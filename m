Return-Path: <virtualization-bounces@lists.linux-foundation.org>
X-Original-To: lists.virtualization@lfdr.de
Delivered-To: lists.virtualization@lfdr.de
Received: from smtp3.osuosl.org (smtp3.osuosl.org [IPv6:2605:bc80:3010::136])
	by mail.lfdr.de (Postfix) with ESMTPS id 01A306C765E
	for <lists.virtualization@lfdr.de>; Fri, 24 Mar 2023 04:49:56 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by smtp3.osuosl.org (Postfix) with ESMTP id A193060E5B;
	Fri, 24 Mar 2023 03:49:54 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org A193060E5B
Authentication-Results: smtp3.osuosl.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=redhat.com header.i=@redhat.com header.a=rsa-sha256 header.s=mimecast20190719 header.b=RG+1BLtW
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
	by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JKrblEhixrGD; Fri, 24 Mar 2023 03:49:53 +0000 (UTC)
Received: from lists.linuxfoundation.org (lf-lists.osuosl.org [IPv6:2605:bc80:3010:104::8cd3:938])
	by smtp3.osuosl.org (Postfix) with ESMTPS id 4A30560E24;
	Fri, 24 Mar 2023 03:49:53 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 4A30560E24
Received: from lf-lists.osuosl.org (localhost [127.0.0.1])
	by lists.linuxfoundation.org (Postfix) with ESMTP id 840ABC008A;
	Fri, 24 Mar 2023 03:49:52 +0000 (UTC)
X-Original-To: virtualization@lists.linux-foundation.org
Delivered-To: virtualization@lists.linuxfoundation.org
Received: from smtp4.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by lists.linuxfoundation.org (Postfix) with ESMTP id 22F74C0032
 for <virtualization@lists.linux-foundation.org>;
 Fri, 24 Mar 2023 03:49:51 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp4.osuosl.org (Postfix) with ESMTP id F077541716
 for <virtualization@lists.linux-foundation.org>;
 Fri, 24 Mar 2023 03:49:50 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org F077541716
Authentication-Results: smtp4.osuosl.org;
 dkim=pass (1024-bit key) header.d=redhat.com header.i=@redhat.com
 header.a=rsa-sha256 header.s=mimecast20190719 header.b=RG+1BLtW
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp4.osuosl.org ([127.0.0.1])
 by localhost (smtp4.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id jATFnax0nQ71
 for <virtualization@lists.linux-foundation.org>;
 Fri, 24 Mar 2023 03:49:48 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp4.osuosl.org D82EA416C2
Received: from us-smtp-delivery-124.mimecast.com
 (us-smtp-delivery-124.mimecast.com [170.10.133.124])
 by smtp4.osuosl.org (Postfix) with ESMTPS id D82EA416C2
 for <virtualization@lists.linux-foundation.org>;
 Fri, 24 Mar 2023 03:49:47 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1679629786;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=tvUYLbQ5ItZ7YGhfcbwRlMUBJivNVLYqKMadR4fNk5g=;
 b=RG+1BLtWSqvPsEXgXopS7TorjGLwIVLn5+lxULrusXHJHKLdkVI/xmlesHXplbHvYm6wO5
 0MQOu+j+szbJKwQgGN0tcabCMGLBMYcWQsgVHXV5oflabDNhipqMVOsvIyQ3dVi7hq/Cy+
 hnhQ8QiSZd4n1X3AVq1kj5QJu60OR1s=
Received: from mail-pl1-f197.google.com (mail-pl1-f197.google.com
 [209.85.214.197]) by relay.mimecast.com with ESMTP with STARTTLS
 (version=TLSv1.3, cipher=TLS_AES_256_GCM_SHA384) id
 us-mta-512-dlOmgYvqP06ADGpzLcNGlQ-1; Thu, 23 Mar 2023 23:49:45 -0400
X-MC-Unique: dlOmgYvqP06ADGpzLcNGlQ-1
Received: by mail-pl1-f197.google.com with SMTP id
 bh9-20020a170902a98900b0019e506b80d0so489718plb.13
 for <virtualization@lists.linux-foundation.org>;
 Thu, 23 Mar 2023 20:49:45 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112; t=1679629784;
 h=content-transfer-encoding:in-reply-to:from:references:cc:to
 :content-language:subject:user-agent:mime-version:date:message-id
 :x-gm-message-state:from:to:cc:subject:date:message-id:reply-to;
 bh=tvUYLbQ5ItZ7YGhfcbwRlMUBJivNVLYqKMadR4fNk5g=;
 b=to4xdRB5c7EdUVErIaEaZ441mCaCLy59WNN5e9Q9qnUQkXpqaX/lLIB8y8Y35qvTeA
 JNz4XJPSHwTzANhPfePSAPwHcue29TvuOHuWuxzdg3EBOF97eudJqqL6UU9xAGNRGG2x
 csXqKnrVgiQZu/090213aOzMck0XLjMiSglzGJp1CXPN2yDAFB5c2rzo5tYPtvcw6NtO
 1kzpPkRUcc79lHDHRO9l0mbtXy1EN3SwP7i2VivqKjt2a63kLYsg/FcVYNNCeIsbk6CL
 9UOb9v6AdeHkatQ1YbL0rbCWNcUJitoatOY6MoVDARuPFnmWpVoJklVSM3ATMAfxFJG+
 HoUA==
X-Gm-Message-State: AO0yUKWNOly3BRHlI31gsOi3HFo/9H8vSPPisbFd4lBFfKqJJMeAbKn/
 4MIcya2WuKWYu7HMmoehdf5TDfuj3j35WAAl9yr/y46DEdjjG4DYjyhDP9S15ZC+/rDMRV9F80f
 3R/Sq0+ZQAZ+uza5GbpRus8LG1AYJSyhUN9/JhSoLZw==
X-Received: by 2002:a05:6a20:131c:b0:d9:c0fe:17ca with SMTP id
 g28-20020a056a20131c00b000d9c0fe17camr1377714pzh.16.1679629784227; 
 Thu, 23 Mar 2023 20:49:44 -0700 (PDT)
X-Google-Smtp-Source: AK7set9jvo39PB6TeNlOHJ5XW5HW9YLQwg1N6J3rrirOctyXgU8nBNprbs5zVYrlhDXL7BhSRGvnhw==
X-Received: by 2002:a05:6a20:131c:b0:d9:c0fe:17ca with SMTP id
 g28-20020a056a20131c00b000d9c0fe17camr1377695pzh.16.1679629783909; 
 Thu, 23 Mar 2023 20:49:43 -0700 (PDT)
Received: from [10.72.13.198] ([43.228.180.230])
 by smtp.gmail.com with ESMTPSA id
 q8-20020a656848000000b005034a57b963sm12467895pgt.58.2023.03.23.20.49.35
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Thu, 23 Mar 2023 20:49:43 -0700 (PDT)
Message-ID: <78c7511a-deab-7e95-fde1-5317a568cf97@redhat.com>
Date: Fri, 24 Mar 2023 11:49:32 +0800
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:102.0)
 Gecko/20100101 Thunderbird/102.9.0
Subject: Re: [PATCH v3 8/8] vdpa_sim: add support for user VA
To: Stefano Garzarella <sgarzare@redhat.com>,
 virtualization@lists.linux-foundation.org
References: <20230321154228.182769-1-sgarzare@redhat.com>
 <20230321154804.184577-1-sgarzare@redhat.com>
 <20230321154804.184577-4-sgarzare@redhat.com>
From: Jason Wang <jasowang@redhat.com>
In-Reply-To: <20230321154804.184577-4-sgarzare@redhat.com>
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: redhat.com
Content-Language: en-US
Cc: Andrey Zhadchenko <andrey.zhadchenko@virtuozzo.com>, kvm@vger.kernel.org,
 "Michael S. Tsirkin" <mst@redhat.com>, netdev@vger.kernel.org,
 linux-kernel@vger.kernel.org, eperezma@redhat.com, stefanha@redhat.com
X-BeenThere: virtualization@lists.linux-foundation.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Linux virtualization <virtualization.lists.linux-foundation.org>
List-Unsubscribe: <https://lists.linuxfoundation.org/mailman/options/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=unsubscribe>
List-Archive: <http://lists.linuxfoundation.org/pipermail/virtualization/>
List-Post: <mailto:virtualization@lists.linux-foundation.org>
List-Help: <mailto:virtualization-request@lists.linux-foundation.org?subject=help>
List-Subscribe: <https://lists.linuxfoundation.org/mailman/listinfo/virtualization>, 
 <mailto:virtualization-request@lists.linux-foundation.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: virtualization-bounces@lists.linux-foundation.org
Sender: "Virtualization" <virtualization-bounces@lists.linux-foundation.org>

CuWcqCAyMDIzLzMvMjEgMjM6NDgsIFN0ZWZhbm8gR2FyemFyZWxsYSDlhpnpgZM6Cj4gVGhlIG5l
dyAidXNlX3ZhIiBtb2R1bGUgcGFyYW1ldGVyIChkZWZhdWx0OiB0cnVlKSBpcyB1c2VkIGluCj4g
dmRwYV9hbGxvY19kZXZpY2UoKSB0byBpbmZvcm0gdGhlIHZEUEEgZnJhbWV3b3JrIHRoYXQgdGhl
IGRldmljZQo+IHN1cHBvcnRzIFZBLgo+Cj4gdnJpbmdoIGlzIGluaXRpYWxpemVkIHRvIHVzZSBW
QSBvbmx5IHdoZW4gInVzZV92YSIgaXMgdHJ1ZSBhbmQgdGhlCj4gdXNlcidzIG1tIGhhcyBiZWVu
IGJvdW5kLiBTbywgb25seSB3aGVuIHRoZSBidXMgc3VwcG9ydHMgdXNlciBWQQo+IChlLmcuIHZo
b3N0LXZkcGEpLgo+Cj4gdmRwYXNpbV9tbV93b3JrX2ZuIHdvcmsgaXMgdXNlZCB0byBzZXJpYWxp
emUgdGhlIGJpbmRpbmcgdG8gYSBuZXcKPiBhZGRyZXNzIHNwYWNlIHdoZW4gdGhlIC5iaW5kX21t
IGNhbGxiYWNrIGlzIGludm9rZWQsIGFuZCB1bmJpbmRpbmcKPiB3aGVuIHRoZSAudW5iaW5kX21t
IGNhbGxiYWNrIGlzIGludm9rZWQuCj4KPiBDYWxsIG1tZ2V0X25vdF96ZXJvKCkva3RocmVhZF91
c2VfbW0oKSBpbnNpZGUgdGhlIHdvcmtlciBmdW5jdGlvbgo+IHRvIHBpbiB0aGUgYWRkcmVzcyBz
cGFjZSBvbmx5IGFzIGxvbmcgYXMgbmVlZGVkLCBmb2xsb3dpbmcgdGhlCj4gZG9jdW1lbnRhdGlv
biBvZiBtbWdldCgpIGluIGluY2x1ZGUvbGludXgvc2NoZWQvbW0uaDoKPgo+ICAgICogTmV2ZXIg
dXNlIHRoaXMgZnVuY3Rpb24gdG8gcGluIHRoaXMgYWRkcmVzcyBzcGFjZSBmb3IgYW4KPiAgICAq
IHVuYm91bmRlZC9pbmRlZmluaXRlIGFtb3VudCBvZiB0aW1lLgo+Cj4gU2lnbmVkLW9mZi1ieTog
U3RlZmFubyBHYXJ6YXJlbGxhIDxzZ2FyemFyZUByZWRoYXQuY29tPgo+IC0tLQo+Cj4gTm90ZXM6
Cj4gICAgICB2MzoKPiAgICAgIC0gY2FsbGVkIG1tZ2V0X25vdF96ZXJvKCkgYmVmb3JlIGt0aHJl
YWRfdXNlX21tKCkgW0phc29uXQo+ICAgICAgICBBcyB0aGUgZG9jdW1lbnRhdGlvbiBvZiBtbWdl
dCgpIGluIGluY2x1ZGUvbGludXgvc2NoZWQvbW0uaCBzYXlzOgo+ICAgICAgCj4gICAgICAgICog
TmV2ZXIgdXNlIHRoaXMgZnVuY3Rpb24gdG8gcGluIHRoaXMgYWRkcmVzcyBzcGFjZSBmb3IgYW4K
PiAgICAgICAgKiB1bmJvdW5kZWQvaW5kZWZpbml0ZSBhbW91bnQgb2YgdGltZS4KPiAgICAgIAo+
ICAgICAgICBJIG1vdmVkIG1tZ2V0X25vdF96ZXJvL2t0aHJlYWRfdXNlX21tIGluc2lkZSB0aGUg
d29ya2VyIGZ1bmN0aW9uLAo+ICAgICAgICB0aGlzIHdheSB3ZSBwaW4gdGhlIGFkZHJlc3Mgc3Bh
Y2Ugb25seSBhcyBsb25nIGFzIG5lZWRlZC4KPiAgICAgICAgVGhpcyBpcyBzaW1pbGFyIHRvIHdo
YXQgdmZpb19pb21tdV90eXBlMV9kbWFfcndfY2h1bmsoKSBkb2VzIGluCj4gICAgICAgIGRyaXZl
cnMvdmZpby92ZmlvX2lvbW11X3R5cGUxLmMKPiAgICAgIC0gc2ltcGxpZmllZCB0aGUgbW0gYmlu
ZC91bmJpbmQgW0phc29uXQo+ICAgICAgLSByZW5hbWVkIHZkcGFzaW1fd29ya2VyX2NoYW5nZV9t
bV9zeW5jKCkgW0phc29uXQo+ICAgICAgLSBmaXggY29tbWl0IG1lc3NhZ2UgKHMvZGVmYXVsdDog
ZmFsc2UvZGVmYXVsdDogdHJ1ZSkKPiAgICAgIHYyOgo+ICAgICAgLSBgdXNlX3ZhYCBzZXQgdG8g
dHJ1ZSBieSBkZWZhdWx0IFtFdWdlbmlvXQo+ICAgICAgLSBzdXBwb3J0ZWQgdGhlIG5ldyB1bmJp
bmRfbW0gY2FsbGJhY2sgW0phc29uXQo+ICAgICAgLSByZW1vdmVkIHRoZSB1bmJpbmRfbW0gY2Fs
bCBpbiB2ZHBhc2ltX2RvX3Jlc2V0KCkgW0phc29uXQo+ICAgICAgLSBhdm9pZGVkIHRvIHJlbGVh
c2UgdGhlIGxvY2sgd2hpbGUgY2FsbCBrdGhyZWFkX2ZsdXNoX3dvcmsoKSBzaW5jZSB3ZQo+ICAg
ICAgICBhcmUgbm93IHVzaW5nIGEgbXV0ZXggdG8gcHJvdGVjdCB0aGUgZGV2aWNlIHN0YXRlCj4K
PiAgIGRyaXZlcnMvdmRwYS92ZHBhX3NpbS92ZHBhX3NpbS5oIHwgIDEgKwo+ICAgZHJpdmVycy92
ZHBhL3ZkcGFfc2ltL3ZkcGFfc2ltLmMgfCA4MCArKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrLQo+ICAgMiBmaWxlcyBjaGFuZ2VkLCA3OSBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygt
KQo+Cj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvdmRwYS92ZHBhX3NpbS92ZHBhX3NpbS5oIGIvZHJp
dmVycy92ZHBhL3ZkcGFfc2ltL3ZkcGFfc2ltLmgKPiBpbmRleCA0Nzc0MjkyZmJhOGMuLjNhNDI4
ODdkMDVkOSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3ZkcGEvdmRwYV9zaW0vdmRwYV9zaW0uaAo+
ICsrKyBiL2RyaXZlcnMvdmRwYS92ZHBhX3NpbS92ZHBhX3NpbS5oCj4gQEAgLTU5LDYgKzU5LDcg
QEAgc3RydWN0IHZkcGFzaW0gewo+ICAgCXN0cnVjdCB2ZHBhc2ltX3ZpcnRxdWV1ZSAqdnFzOwo+
ICAgCXN0cnVjdCBrdGhyZWFkX3dvcmtlciAqd29ya2VyOwo+ICAgCXN0cnVjdCBrdGhyZWFkX3dv
cmsgd29yazsKPiArCXN0cnVjdCBtbV9zdHJ1Y3QgKm1tX2JvdW5kOwo+ICAgCXN0cnVjdCB2ZHBh
c2ltX2Rldl9hdHRyIGRldl9hdHRyOwo+ICAgCS8qIG11dGV4IHRvIHN5bmNocm9uaXplIHZpcnRx
dWV1ZSBzdGF0ZSAqLwo+ICAgCXN0cnVjdCBtdXRleCBtdXRleDsKPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy92ZHBhL3ZkcGFfc2ltL3ZkcGFfc2ltLmMgYi9kcml2ZXJzL3ZkcGEvdmRwYV9zaW0vdmRw
YV9zaW0uYwo+IGluZGV4IGFiNGNmYjgyYzIzNy4uMjNjODkxY2RjZDU0IDEwMDY0NAo+IC0tLSBh
L2RyaXZlcnMvdmRwYS92ZHBhX3NpbS92ZHBhX3NpbS5jCj4gKysrIGIvZHJpdmVycy92ZHBhL3Zk
cGFfc2ltL3ZkcGFfc2ltLmMKPiBAQCAtMzUsMTAgKzM1LDQ0IEBAIG1vZHVsZV9wYXJhbShtYXhf
aW90bGJfZW50cmllcywgaW50LCAwNDQ0KTsKPiAgIE1PRFVMRV9QQVJNX0RFU0MobWF4X2lvdGxi
X2VudHJpZXMsCj4gICAJCSAiTWF4aW11bSBudW1iZXIgb2YgaW90bGIgZW50cmllcyBmb3IgZWFj
aCBhZGRyZXNzIHNwYWNlLiAwIG1lYW5zIHVubGltaXRlZC4gKGRlZmF1bHQ6IDIwNDgpIik7Cj4g
ICAKPiArc3RhdGljIGJvb2wgdXNlX3ZhID0gdHJ1ZTsKPiArbW9kdWxlX3BhcmFtKHVzZV92YSwg
Ym9vbCwgMDQ0NCk7Cj4gK01PRFVMRV9QQVJNX0RFU0ModXNlX3ZhLCAiRW5hYmxlL2Rpc2FibGUg
dGhlIGRldmljZSdzIGFiaWxpdHkgdG8gdXNlIFZBIik7Cj4gKwo+ICAgI2RlZmluZSBWRFBBU0lN
X1FVRVVFX0FMSUdOIFBBR0VfU0laRQo+ICAgI2RlZmluZSBWRFBBU0lNX1FVRVVFX01BWCAyNTYK
PiAgICNkZWZpbmUgVkRQQVNJTV9WRU5ET1JfSUQgMAo+ICAgCj4gK3N0cnVjdCB2ZHBhc2ltX21t
X3dvcmsgewo+ICsJc3RydWN0IGt0aHJlYWRfd29yayB3b3JrOwo+ICsJc3RydWN0IHZkcGFzaW0g
KnZkcGFzaW07Cj4gKwlzdHJ1Y3QgbW1fc3RydWN0ICptbV90b19iaW5kOwo+ICsJaW50IHJldDsK
PiArfTsKPiArCj4gK3N0YXRpYyB2b2lkIHZkcGFzaW1fbW1fd29ya19mbihzdHJ1Y3Qga3RocmVh
ZF93b3JrICp3b3JrKQo+ICt7Cj4gKwlzdHJ1Y3QgdmRwYXNpbV9tbV93b3JrICptbV93b3JrID0K
PiArCQljb250YWluZXJfb2Yod29yaywgc3RydWN0IHZkcGFzaW1fbW1fd29yaywgd29yayk7Cj4g
KwlzdHJ1Y3QgdmRwYXNpbSAqdmRwYXNpbSA9IG1tX3dvcmstPnZkcGFzaW07Cj4gKwo+ICsJbW1f
d29yay0+cmV0ID0gMDsKPiArCj4gKwkvL1RPRE86IHNob3VsZCB3ZSBhdHRhY2ggdGhlIGNncm91
cCBvZiB0aGUgbW0gb3duZXI/Cj4gKwl2ZHBhc2ltLT5tbV9ib3VuZCA9IG1tX3dvcmstPm1tX3Rv
X2JpbmQ7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHZkcGFzaW1fd29ya2VyX2NoYW5nZV9tbV9z
eW5jKHN0cnVjdCB2ZHBhc2ltICp2ZHBhc2ltLAo+ICsJCQkJCSAgc3RydWN0IHZkcGFzaW1fbW1f
d29yayAqbW1fd29yaykKPiArewo+ICsJc3RydWN0IGt0aHJlYWRfd29yayAqd29yayA9ICZtbV93
b3JrLT53b3JrOwo+ICsKPiArCWt0aHJlYWRfaW5pdF93b3JrKHdvcmssIHZkcGFzaW1fbW1fd29y
a19mbik7Cj4gKwlrdGhyZWFkX3F1ZXVlX3dvcmsodmRwYXNpbS0+d29ya2VyLCB3b3JrKTsKPiAr
Cj4gKwlrdGhyZWFkX2ZsdXNoX3dvcmsod29yayk7Cj4gK30KPiArCj4gICBzdGF0aWMgc3RydWN0
IHZkcGFzaW0gKnZkcGFfdG9fc2ltKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSkKPiAgIHsKPiAg
IAlyZXR1cm4gY29udGFpbmVyX29mKHZkcGEsIHN0cnVjdCB2ZHBhc2ltLCB2ZHBhKTsKPiBAQCAt
NTksOCArOTMsMTAgQEAgc3RhdGljIHZvaWQgdmRwYXNpbV9xdWV1ZV9yZWFkeShzdHJ1Y3QgdmRw
YXNpbSAqdmRwYXNpbSwgdW5zaWduZWQgaW50IGlkeCkKPiAgIHsKPiAgIAlzdHJ1Y3QgdmRwYXNp
bV92aXJ0cXVldWUgKnZxID0gJnZkcGFzaW0tPnZxc1tpZHhdOwo+ICAgCXVpbnQxNl90IGxhc3Rf
YXZhaWxfaWR4ID0gdnEtPnZyaW5nLmxhc3RfYXZhaWxfaWR4Owo+ICsJYm9vbCB2YV9lbmFibGVk
ID0gdXNlX3ZhICYmIHZkcGFzaW0tPm1tX2JvdW5kOwo+ICAgCj4gLQl2cmluZ2hfaW5pdF9pb3Rs
YigmdnEtPnZyaW5nLCB2ZHBhc2ltLT5mZWF0dXJlcywgdnEtPm51bSwgdHJ1ZSwgZmFsc2UsCj4g
Kwl2cmluZ2hfaW5pdF9pb3RsYigmdnEtPnZyaW5nLCB2ZHBhc2ltLT5mZWF0dXJlcywgdnEtPm51
bSwgdHJ1ZSwKPiArCQkJICB2YV9lbmFibGVkLAo+ICAgCQkJICAoc3RydWN0IHZyaW5nX2Rlc2Mg
KikodWludHB0cl90KXZxLT5kZXNjX2FkZHIsCj4gICAJCQkgIChzdHJ1Y3QgdnJpbmdfYXZhaWwg
KikKPiAgIAkJCSAgKHVpbnRwdHJfdCl2cS0+ZHJpdmVyX2FkZHIsCj4gQEAgLTEzMCw4ICsxNjYs
MjAgQEAgc3RhdGljIGNvbnN0IHN0cnVjdCB2ZHBhX2NvbmZpZ19vcHMgdmRwYXNpbV9iYXRjaF9j
b25maWdfb3BzOwo+ICAgc3RhdGljIHZvaWQgdmRwYXNpbV93b3JrX2ZuKHN0cnVjdCBrdGhyZWFk
X3dvcmsgKndvcmspCj4gICB7Cj4gICAJc3RydWN0IHZkcGFzaW0gKnZkcGFzaW0gPSBjb250YWlu
ZXJfb2Yod29yaywgc3RydWN0IHZkcGFzaW0sIHdvcmspOwo+ICsJc3RydWN0IG1tX3N0cnVjdCAq
bW0gPSB2ZHBhc2ltLT5tbV9ib3VuZDsKPiArCj4gKwlpZiAobW0pIHsKPiArCQlpZiAoIW1tZ2V0
X25vdF96ZXJvKG1tKSkKPiArCQkJcmV0dXJuOwoKCkRvIHdlIG5lZWQgdG8gY2hlY2sgdXNlX3Zh
IGhlcmUuCgpPdGhlciB0aGFuIHRoaXMKCkFja2VkLWJ5OiBKYXNvbiBXYW5nIDxqYXNvd2FuZ0By
ZWRoYXQuY29tPgoKVGhhbmtzCgoKPiArCQlrdGhyZWFkX3VzZV9tbShtbSk7Cj4gKwl9Cj4gICAK
PiAgIAl2ZHBhc2ltLT5kZXZfYXR0ci53b3JrX2ZuKHZkcGFzaW0pOwo+ICsKPiArCWlmIChtbSkg
ewo+ICsJCWt0aHJlYWRfdW51c2VfbW0obW0pOwo+ICsJCW1tcHV0KG1tKTsKPiArCX0KPiAgIH0K
PiAgIAo+ICAgc3RydWN0IHZkcGFzaW0gKnZkcGFzaW1fY3JlYXRlKHN0cnVjdCB2ZHBhc2ltX2Rl
dl9hdHRyICpkZXZfYXR0ciwKPiBAQCAtMTYyLDcgKzIxMCw3IEBAIHN0cnVjdCB2ZHBhc2ltICp2
ZHBhc2ltX2NyZWF0ZShzdHJ1Y3QgdmRwYXNpbV9kZXZfYXR0ciAqZGV2X2F0dHIsCj4gICAJdmRw
YSA9IF9fdmRwYV9hbGxvY19kZXZpY2UoTlVMTCwgb3BzLAo+ICAgCQkJCSAgIGRldl9hdHRyLT5u
Z3JvdXBzLCBkZXZfYXR0ci0+bmFzLAo+ICAgCQkJCSAgIGRldl9hdHRyLT5hbGxvY19zaXplLAo+
IC0JCQkJICAgZGV2X2F0dHItPm5hbWUsIGZhbHNlKTsKPiArCQkJCSAgIGRldl9hdHRyLT5uYW1l
LCB1c2VfdmEpOwo+ICAgCWlmIChJU19FUlIodmRwYSkpIHsKPiAgIAkJcmV0ID0gUFRSX0VSUih2
ZHBhKTsKPiAgIAkJZ290byBlcnJfYWxsb2M7Cj4gQEAgLTU4Miw2ICs2MzAsMzAgQEAgc3RhdGlj
IGludCB2ZHBhc2ltX3NldF9tYXAoc3RydWN0IHZkcGFfZGV2aWNlICp2ZHBhLCB1bnNpZ25lZCBp
bnQgYXNpZCwKPiAgIAlyZXR1cm4gcmV0Owo+ICAgfQo+ICAgCj4gK3N0YXRpYyBpbnQgdmRwYXNp
bV9iaW5kX21tKHN0cnVjdCB2ZHBhX2RldmljZSAqdmRwYSwgc3RydWN0IG1tX3N0cnVjdCAqbW0p
Cj4gK3sKPiArCXN0cnVjdCB2ZHBhc2ltICp2ZHBhc2ltID0gdmRwYV90b19zaW0odmRwYSk7Cj4g
KwlzdHJ1Y3QgdmRwYXNpbV9tbV93b3JrIG1tX3dvcms7Cj4gKwo+ICsJbW1fd29yay52ZHBhc2lt
ID0gdmRwYXNpbTsKPiArCW1tX3dvcmsubW1fdG9fYmluZCA9IG1tOwo+ICsKPiArCXZkcGFzaW1f
d29ya2VyX2NoYW5nZV9tbV9zeW5jKHZkcGFzaW0sICZtbV93b3JrKTsKPiArCj4gKwlyZXR1cm4g
bW1fd29yay5yZXQ7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIHZkcGFzaW1fdW5iaW5kX21tKHN0
cnVjdCB2ZHBhX2RldmljZSAqdmRwYSkKPiArewo+ICsJc3RydWN0IHZkcGFzaW0gKnZkcGFzaW0g
PSB2ZHBhX3RvX3NpbSh2ZHBhKTsKPiArCXN0cnVjdCB2ZHBhc2ltX21tX3dvcmsgbW1fd29yazsK
PiArCj4gKwltbV93b3JrLnZkcGFzaW0gPSB2ZHBhc2ltOwo+ICsJbW1fd29yay5tbV90b19iaW5k
ID0gTlVMTDsKPiArCj4gKwl2ZHBhc2ltX3dvcmtlcl9jaGFuZ2VfbW1fc3luYyh2ZHBhc2ltLCAm
bW1fd29yayk7Cj4gK30KPiArCj4gICBzdGF0aWMgaW50IHZkcGFzaW1fZG1hX21hcChzdHJ1Y3Qg
dmRwYV9kZXZpY2UgKnZkcGEsIHVuc2lnbmVkIGludCBhc2lkLAo+ICAgCQkJICAgdTY0IGlvdmEs
IHU2NCBzaXplLAo+ICAgCQkJICAgdTY0IHBhLCB1MzIgcGVybSwgdm9pZCAqb3BhcXVlKQo+IEBA
IC02NzgsNiArNzUwLDggQEAgc3RhdGljIGNvbnN0IHN0cnVjdCB2ZHBhX2NvbmZpZ19vcHMgdmRw
YXNpbV9jb25maWdfb3BzID0gewo+ICAgCS5zZXRfZ3JvdXBfYXNpZCAgICAgICAgID0gdmRwYXNp
bV9zZXRfZ3JvdXBfYXNpZCwKPiAgIAkuZG1hX21hcCAgICAgICAgICAgICAgICA9IHZkcGFzaW1f
ZG1hX21hcCwKPiAgIAkuZG1hX3VubWFwICAgICAgICAgICAgICA9IHZkcGFzaW1fZG1hX3VubWFw
LAo+ICsJLmJpbmRfbW0JCT0gdmRwYXNpbV9iaW5kX21tLAo+ICsJLnVuYmluZF9tbQkJPSB2ZHBh
c2ltX3VuYmluZF9tbSwKPiAgIAkuZnJlZSAgICAgICAgICAgICAgICAgICA9IHZkcGFzaW1fZnJl
ZSwKPiAgIH07Cj4gICAKPiBAQCAtNzEyLDYgKzc4Niw4IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3Qg
dmRwYV9jb25maWdfb3BzIHZkcGFzaW1fYmF0Y2hfY29uZmlnX29wcyA9IHsKPiAgIAkuZ2V0X2lv
dmFfcmFuZ2UgICAgICAgICA9IHZkcGFzaW1fZ2V0X2lvdmFfcmFuZ2UsCj4gICAJLnNldF9ncm91
cF9hc2lkICAgICAgICAgPSB2ZHBhc2ltX3NldF9ncm91cF9hc2lkLAo+ICAgCS5zZXRfbWFwICAg
ICAgICAgICAgICAgID0gdmRwYXNpbV9zZXRfbWFwLAo+ICsJLmJpbmRfbW0JCT0gdmRwYXNpbV9i
aW5kX21tLAo+ICsJLnVuYmluZF9tbQkJPSB2ZHBhc2ltX3VuYmluZF9tbSwKPiAgIAkuZnJlZSAg
ICAgICAgICAgICAgICAgICA9IHZkcGFzaW1fZnJlZSwKPiAgIH07Cj4gICAKCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClZpcnR1YWxpemF0aW9uIG1haWxp
bmcgbGlzdApWaXJ0dWFsaXphdGlvbkBsaXN0cy5saW51eC1mb3VuZGF0aW9uLm9yZwpodHRwczov
L2xpc3RzLmxpbnV4Zm91bmRhdGlvbi5vcmcvbWFpbG1hbi9saXN0aW5mby92aXJ0dWFsaXphdGlv
bg==
